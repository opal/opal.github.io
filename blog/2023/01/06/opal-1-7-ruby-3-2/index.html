<!doctype html>
<html style="background-color: #f5f5f5; min-height: 100%;">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

  <title>Opal 1.7, Ruby 3.2, --watch</title>

  <link href="/assets/application-915b7e3cafe6e192dee011fa09837b2af85b7e1de3dbb52fd1413d46dd2dca0e.css" rel="stylesheet" />
  <link href="//code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css" rel="stylesheet" />

  <script src="/assets/application-596f523b41cd0c1b75b8066512c4c9b592e85ce699428a05db4d6ac425c2b09f.js" onload="Opal.loaded(typeof(OpalLoaded) === &quot;undefined&quot; ? [] : OpalLoaded);
Opal.require(&quot;application&quot;);;console.log('loaded application')"></script>

  <!-- Algolia -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
</head>
<body class="blog blog_2023 blog_2023_01 blog_2023_01_06 blog_2023_01_06_opal-1-7-ruby-3-2 blog_2023_01_06_opal-1-7-ruby-3-2_index">
  <nav class='navbar navbar-default opal-nav' role='navigation'>
<div class='container'>
<div class='navbar-header'>
<a class='navbar-brand' href='/'>
<img height='22' src='https://secure.gravatar.com/avatar/88298620949a6534d403da2e356c9339?s=420&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-org-420.png' style='margin-top:-10%;' width='22'>
Opal
</a>
<button class='navbar-toggle' data-target='#opal-navbar' data-toggle='collapse' type='button'>
<span class='icon-bar'></span>
<span class='icon-bar'></span>
<span class='icon-bar'></span>
</button>
</div>
<div class='navbar-collapse collapse' id='opal-navbar'>
<ul class='nav navbar-nav'>
<li>
<a href='/try'>
<i class='ion-ios-compose'></i>
Try
</a>
</li>
<li>
<a href='/blog'>
<i class='ion-ios-chatboxes'></i>
Blog
</a>
</li>
<li>
<a href='/docs'>
<i class='ion-ios-copy'></i>
Documentation
</a>
</li>
<li>
<a href='/libraries'>
<i class='ion-map'></i>
Libraries
</a>
</li>
<li>
<a href='https://github.com/opal/opal#readme'>
<i class='ion-social-github'></i>
GitHub
</a>
</li>
<li>
<a href='https://rubygems.org/gems/opal/versions/1.8.2' style='opacity: 0.5;'>
v1.8.2
</a>
</li>
</ul>
<ul class='nav navbar-right'>
<li class='search-bar'>
<form id='search-form'>
<input placeholder='Search docs &amp; guides' type='search'>
<button title='Clear the search query.' type='reset'>
&times;
</button>
</form>
</li>
</ul>
</div>
</div>
</nav>


  <div class="container">
      <div class="container col-sm-8">
    <div class='blog-title'>
<h1>
<a href='/blog'>The Opal Blog</a>
</h1>
</div>

    <article class='blog-post'>
<header>
<h2 class='blog-post-title'>
<a href=''>
Opal 1.7, Ruby 3.2, --watch
</a>
</h2>
<div class='blog-post-meta'>
Posted by elia
<br>
January 06, 2023
</div>
</header>
<div class='blog-post-body'>
<p>We&#39;re excited to announce the release of Opal v1.7! This release includes support for Ruby 3.2 and the ability to watch file changes with the <code>--watch</code> flag.</p>&#x000A;&#x000A;<h2 id="ruby-3-2-support">Ruby 3.2 Support</h2>&#x000A;&#x000A;<p>Opal v1.7 adds support for Ruby 3.2, the latest version of the Ruby programming language. This means that you can use most of the new features and improvements in Ruby 3.2 when writing your Opal code.</p>&#x000A;&#x000A;<h2 id="watching-file-changes-with-the-watch-flag">Watching File Changes with the <code>--watch</code> Flag</h2>&#x000A;&#x000A;<p>Opal v1.7 introduces the <code>--watch</code> flag, which allows you to automatically recompile your code whenever a file is changed. This is especially useful when working on larger projects, as it saves you the time and effort of manually recompiling your code every time you make a change.</p>&#x000A;&#x000A;<p>To use the <code>--watch</code> flag, simply pass it as an argument when running the <code>opal</code> command. For example:</p>&#x000A;<div class="highlight"><pre class="highlight shell"><code>opal <span class="nt">--output</span><span class="o">=</span>main.js <span class="nt">--watch</span> main.rb&#x000A;</code></pre></div>&#x000A;<p>This will start the Opal compiler and watch for any changes to the <code>main.rb</code> file. When a change is detected, the compiler will automatically recompile the code.</p>&#x000A;&#x000A;<p>We hope these new features will make it easier for you to write and debug your Opal code. As always, please report any issues or feedback on the Opal GitHub repository.</p>&#x000A;&#x000A;<p><em>If you work on macOS be sure to install v1.7.1 that includes a fix for reading the most updated content of watched files.</em></p>&#x000A;&#x000A;<h2 id="new-runners">New runners</h2>&#x000A;&#x000A;<p>Support was added for running code in Deno, Firefox, and Safari, if any of those is available on your box you can try them out by passing <code>--runner</code> with <code>safari</code>, <code>firefox</code>, or <code>deno</code>.</p>&#x000A;&#x000A;<p>Example:</p>&#x000A;<div class="highlight"><pre class="highlight shell"><code><span class="nv">$ </span><span class="c"># Remember to enable "Allow Remote Automation" in Safari's Develop menu</span>&#x000A;<span class="nv">$ </span>opal:master ⤑ bin/opal <span class="nt">--runner</span><span class="o">=</span>safari <span class="nt">-ropal</span>/platform <span class="nt">-e</span> <span class="s2">"puts 'Hello from Webkit, heir of Konqueror!'"</span>                                                     ~/C/opal&#x000A;Connecting to localhost:9444...&#x000A;Connecting to localhost:9444...&#x000A;Connecting to localhost:9444...&#x000A;Hello from Webkit, heir of Konqueror!&#x000A;</code></pre></div>&#x000A;<hr>&#x000A;&#x000A;<h3 id="resources">Resources</h3>&#x000A;&#x000A;<ul>&#x000A;<li><a href="https://github.com/opal/opal/releases/tag/v1.7.0">Changelog for v1.7.0</a></li>&#x000A;<li><a href="https://github.com/opal/opal/compare/v1.6.1...v1.7.0">List of commits</a> / <a href="https://github.com/opal/opal/compare/v1.6.1...v1.7.0.diff">raw diff</a></li>&#x000A;<li><a href="https://opalrb.com">Updated website</a></li>&#x000A;<li><a href="http://opalrb.com/docs/">Documentation</a></li>&#x000A;</ul>&#x000A;</div>
</article>

  </div>

  </div>

  <footer>
  <a href="/license"><i class="ion-unlocked"></i> License</a> ·
  <a href="https://github.com/opal/opal/graphs/contributors"><i class="ion-fork-repo"></i> Contributors</a>
</footer>


  <script>
    document.querySelector(`a[href="${location.pathname.replace(/\/$/,'')}"]`)?.parentElement.classList.add("active")
  </script>

  <!-- Algolia -->
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
  <script type="text/javascript">
    docsearch({
      apiKey: 'cf08db1eca77cb92ca34e24a86430bcb',
      indexName: 'opalrb',
      inputSelector: '#search-form input[type="search"]',
      debug: false // Set debug to true if you want to inspect the dropdown
    });
  </script>
</body>
</html>
