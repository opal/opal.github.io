<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Module: _JS_::Opal
  
    &mdash; corelib (Opal v0.5.5)
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "_JS_::Opal";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  <span class="title"><a href="/docs">Opal Docs</a></span>
  
    &raquo;
    <a href="../_index.html">Index (O)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../_JS_.html" title="_JS_ (module)">_JS_</a></span></span>
     &raquo; 
    <span class="title">Opal</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <iframe id="search_frame" src="../class_list.html"></iframe>

      <div id="content"><h1>Module: _JS_::Opal
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>/Users/elia/Code/opal-docs/opal/opal/corelib/runtime.js.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>This module is just a placeholder for showing the documentation of the
internal JavaScript runtime. The methods you&#39;ll find defined below
are actually JavaScript functions attached to the <code>Opal</code> global object</p>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_stub_for-class_method" title="add_stub_for (class method)">.<strong>add_stub_for</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Actuall add a method_missing stub function to the given prototype for the given name.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#boot_class_meta-class_method" title="boot_class_meta (class method)">.<strong>boot_class_meta</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>class itself.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#boot_module-class_method" title="boot_module (class method)">.<strong>boot_module</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Internal function to create a new module instance.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#bridge_class-class_method" title="bridge_class (class method)">.<strong>bridge_class</strong>  &#x21d2; Class </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>For performance, some core ruby classes are toll-free bridged to their native javascript counterparts (e.g. a ruby Array is a javascript Array).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_scope-class_method" title="create_scope (class method)">.<strong>create_scope</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Create a new constants scope for the given class with the given base.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="add_stub_for-class_method">
  
    .<strong>add_stub_for</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Actuall add a method_missing stub function to the given prototype for the
given name.
*</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>prototype</span>
      
      
        <span class='type'>(<tt>Prototype</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the target prototype</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>stub</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>stub name to add (e.g. &quot;$foo&quot;)</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/elia/Code/opal-docs/opal/opal/corelib/runtime.js.rb', line 139</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_add_stub_for'>add_stub_for</span><span class='lparen'>(</span><span class='op'>*</span><span class='rparen'>)</span>
<span class='heredoc_beg'>&lt;&lt;-JAVASCRIPT</span>
<span class='tstring_content'>   function add_stub_for(prototype, stub) {
     function method_missing_stub() {
       // Copy any given block onto the method_missing dispatcher
       this.$method_missing._p = method_missing_stub._p;
   
       // Set block property to null ready for the next call (stop false-positives)
       method_missing_stub._p = null;
   
       // call method missing with correct args (remove &#39;$&#39; prefix on method name)
       return this.$method_missing.apply(this, [stub.slice(1)].concat($slice.call(arguments)));
     }
   
     method_missing_stub.rb_stub = true;
     prototype[stub] = method_missing_stub;
   }
</span><span class='heredoc_end'>JAVASCRIPT
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="boot_class_meta-class_method">
  
    .<strong>boot_class_meta</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>class itself</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/elia/Code/opal-docs/opal/opal/corelib/runtime.js.rb', line 31</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_boot_class_meta'>boot_class_meta</span><span class='lparen'>(</span><span class='op'>*</span><span class='rparen'>)</span>
<span class='heredoc_beg'>&lt;&lt;-JAVASCRIPT</span>
<span class='tstring_content'>   function boot_class_meta(superklass, constructor) {
     var mtor = function() {};
     mtor.prototype = superklass.constructor.prototype;
   
     function OpalClass() {};
     OpalClass.prototype = new mtor();
   
     var klass = new OpalClass();
   
     klass._id         = unique_id++;
     klass._alloc      = constructor;
     klass._isClass    = true;
     klass.constructor = OpalClass;
     klass._super      = superklass;
     klass._methods    = [];
     klass.__inc__     = [];
     klass.__parent    = superklass;
     klass._proto      = constructor.prototype;
   
     constructor.prototype._klass = klass;
   
     return klass;
   }
</span><span class='heredoc_end'>JAVASCRIPT
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="boot_module-class_method">
  
    .<strong>boot_module</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Internal function to create a new module instance. This simply sets up
the prototype hierarchy and method tables.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/elia/Code/opal-docs/opal/opal/corelib/runtime.js.rb', line 62</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_boot_module'>boot_module</span><span class='lparen'>(</span><span class='op'>*</span><span class='rparen'>)</span>
<span class='heredoc_beg'>&lt;&lt;-JAVASCRIPT</span>
<span class='tstring_content'>   function boot_module() {
     var mtor = function() {};
     mtor.prototype = RubyModule.constructor.prototype;
   
     function OpalModule() {};
     OpalModule.prototype = new mtor();
   
     var module = new OpalModule();
   
     module._id         = unique_id++;
     module._isClass    = true;
     module.constructor = OpalModule;
     module._super      = RubyModule;
     module._methods    = [];
     module.__inc__     = [];
     module.__parent    = RubyModule;
     module._proto      = {};
     module.__mod__     = true;
     module.__dep__     = [];
   
     return module;
   }
</span><span class='heredoc_end'>JAVASCRIPT
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="bridge_class-class_method">
  
    .<strong>bridge_class</strong>  &#x21d2; <tt><span class='object_link'><a href="../Class.html" title="Class (class)">Class</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>For performance, some core ruby classes are toll-free bridged to their
native javascript counterparts (e.g. a ruby Array is a javascript Array).
*
This method is used to setup a native constructor (e.g. Array), to have
its prototype act like a normal ruby class. Firstly, a new ruby class is
created using the native constructor so that its prototype is set as the
target for th new class. Note: all bridged classes are set to inherit
from Object.
*
Bridged classes are tracked in <code>bridged_classes</code> array so that methods
defined on Object can be &quot;donated&quot; to all bridged classes. This allows
us to fake the inheritance of a native prototype from our Object
prototype.
*
Example:
*
   bridge_class(&quot;Proc&quot;, Function);
*</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the name of the ruby class to create</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>constructor</span>
      
      
        <span class='type'>(<tt>Function</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>native javascript constructor to use</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Class.html" title="Class (class)">Class</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>returns new ruby class</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/elia/Code/opal-docs/opal/opal/corelib/runtime.js.rb', line 111</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_bridge_class'>bridge_class</span><span class='lparen'>(</span><span class='op'>*</span><span class='rparen'>)</span>
<span class='heredoc_beg'>&lt;&lt;-JAVASCRIPT</span>
<span class='tstring_content'>   function bridge_class(name, constructor) {
     var klass = boot_class_meta(RubyObject, constructor);
   
     klass._name = name;
   
     create_scope(Opal, klass, name);
     bridged_classes.push(klass);
   
     var object_methods = RubyBasicObject._methods.concat(RubyObject._methods);
   
     for (var i = 0, len = object_methods.length; i &lt; len; i++) {
       var meth = object_methods[i];
       constructor.prototype[meth] = RubyObject._proto[meth];
     }
   
     return klass;
   };
</span><span class='heredoc_end'>JAVASCRIPT
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_scope-class_method">
  
    .<strong>create_scope</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Create a new constants scope for the given class with the given
base. Constants are looked up through their parents, so the base
scope will be the outer scope of the new klass.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/Users/elia/Code/opal-docs/opal/opal/corelib/runtime.js.rb', line 9</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_create_scope'>create_scope</span><span class='lparen'>(</span><span class='op'>*</span><span class='rparen'>)</span>
<span class='heredoc_beg'>&lt;&lt;-JAVASCRIPT</span>
<span class='tstring_content'>   function create_scope(base, klass, id) {
     var const_alloc   = function() {};
     var const_scope   = const_alloc.prototype = new base.constructor();
     klass._scope      = const_scope;
     const_scope.base  = klass;
     klass._base_module = base.base;
     const_scope.constructor = const_alloc;
     const_scope.constants = [];
   
     if (id) {
       klass._orig_scope = base;
       base[id] = base.constructor[id] = klass;
       base.constants.push(id);
     }
   }
</span><span class='heredoc_end'>JAVASCRIPT
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on 12/09/15 by
  <!-- <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a> -->
  0.8.7.6 (ruby-2.2.3).
</div>

    </div>
  </body>
</html>