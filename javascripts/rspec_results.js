(function(){function e(e,t,n){var r=function(){},$=r.prototype=new e.constructor;t.$$scope=$,t.$$base_module=e.base,$.base=t,$.constructor=r,$.constants=[],n&&(t.$$orig_scope=e,e[n]=e.constructor[n]=t,e.constants.push(n))}function t(e,t){var r=i(null,t,e);return n(e,r)}function n(e,t){function n(){}var $=function(){};$.prototype=e.constructor.prototype,n.prototype=new $;var o=new n;return r(o,n,e,t.prototype),o.$$alloc=t,o.$$proto.$$class=o,o}function r(e,t,n,r){e.$$id=w.uid(),e.$$proto=r,e.constructor=t,e.$$is_class=!0,e.$$super=n,e.$$parent=n,e.$$methods=[],e.$$inc=[]}function $(){function e(){}var t=function(){};t.prototype=C.constructor.prototype,e.prototype=new t;var n=new e,$={};return r(n,e,C,$),n.$$is_mod=!0,n.$$dep=[],n}function o(e){var t=new w.Class.$$alloc;return t.$$class=w.Class,t.$$proto=e.constructor.prototype,t.$$is_singleton=!0,t.$$inc=[],t.$$methods=[],t.$$scope=e.$$scope,e.$$meta=t}function a(e){var t=e.$$class,n="#<Class:#<"+t.$$name+":"+t.$$id+">>",r=function(){},$=w.boot(t,r);return $.$$name=n,$.$$proto=e,$.$$class=t.$$class,$.$$scope=t.$$scope,$.$$parent=t,e.$$meta=$}function i(e,t,n){if(n){var r=function(){};r.prototype=n.$$proto||n.prototype,e&&(r.displayName=e),t.prototype=new r}return t.prototype.constructor=t,t}function s(e,t,n){var $=function(){};$.prototype=n.prototype;var o=function(){};o.prototype=new $,o.displayName="#<Class:"+e+">";var a=new o;return r(a,o,n,t.prototype),a.$$alloc=t,a.$$name=e,t.prototype.$$class=a,w[e]=a,w.constants.push(e),a}function c(t,r){var $=n(q,r);$.$$name=t,e(w,$,t),k.push($);for(var o=M.$$methods.concat(q.$$methods),a=0,i=o.length;i>a;a++){var s=o[a];r.prototype[s]=q.$$proto[s]}return l(r.prototype),$}function u(e,t){for(var n=e.$$scope.constants,r=t.$$scope,$=r.constants,o=0,a=n.length;a>o;o++)$.push(n[o]),r[n[o]]=e.$$scope[n[o]]}function l(e){w.stub_subscribers.push(e)}function _(e,t){var n=p(t);e[t]=n}function p(e){function t(){return this.$method_missing.$$p=t.$$p,t.$$p=null,this.$method_missing.apply(this,[e.slice(1)].concat(R.call(arguments)))}return t.$$stub=!0,t}function d(e,t,n){var r=e.$$meta||e.$$class;for(t="$"+t;r&&r.$$proto[t]!==n;)r=r.$$parent;if(!r)throw new Error("could not find current class for super()");for(r=r.$$parent;r;){var $=r.$$proto[t];if($&&$!==n)break;r=r.$$parent}return r.$$proto}function f(e,t){var n=e.$$methods,r=e.$$dep;if(e.$$methods=n.concat(t),r)for(var $=0,o=r.length;o>$;$++){for(var a=r[$],i=a.$$proto,s=0,c=t.length;c>s;s++){var u=t[s];i[u]=e.$$proto[u],i[u].$$donated=!0}a.$$dep&&f(a,t,!0)}}function h(e,t,n){e.$$proto[t]=n,n.$$owner=e,e.$$methods.push(t),e.$$module_function&&(e[t]=n);var r=e.$$dep;if(r)for(var $=0,o=r.length;o>$;$++){var a=r[$],i=a.$$proto,s=i[t];if(!i.hasOwnProperty(t)||s.$$donated||s.$$stub)if(i.hasOwnProperty(t)&&!s.$$stub){for(var c=a.$$inc,u=0,l=c.length;l>u;u++){if(c[u]===s.$$owner)var _=u;if(c[u]===e)var p=u}p>=_&&(i[t]=n,i[t].$$donated=!0)}else i[t]=n,i[t].$$donated=!0;else;a.$$dep&&f(a,[t],!0)}}function m(e,t){M.$$methods.push(e);for(var n=0,r=k.length;r>n;n++)k[n].$$proto[e]=t}function g(){}function v(){}function b(){}function y(){}function x(){}if("undefined"!=typeof this.Opal)return console.warn("Opal already loaded. Loading twice can cause troubles, please fix your setup."),this.Opal;var w=this.Opal={},k=w.bridged_classes=[],E=function(){};E.prototype=w,w.constructor=E,w.constants=[],w.global=this;var S=w.hasOwnProperty,R=w.slice=Array.prototype.slice,O=4,A=O;w.uid=function(){return A+=2},w.cvars={},w.gvars={},w.exit=function(e){w.gvars.DEBUG&&console.log("Exited with status "+e)},w.get=function(e){var t=this[e];return null==t?this.base.$const_missing(e):t},w.create_scope=e,w.klass=function(n,r,$,o){n.$$is_class||(n=n.$$class),null===r&&(r=q);var a=n.$$scope[$];if(S.call(n.$$scope,$)&&a.$$orig_scope===n.$$scope){if(!a.$$is_class)throw w.TypeError.$new($+" is not a class");if(r!==a.$$super&&r!==q)throw w.TypeError.$new("superclass mismatch for class "+$)}else{if("function"==typeof r)return c($,r);a=t(r,o),a.$$name=$,e(n.$$scope,a,$),n[$]=n.$$scope[$]=a,r!==q&&r!==M&&u(r,a),r.$inherited&&r.$inherited(a)}return a},w.boot=t,w.module=function(t,n){var r;if(t.$$is_class||(t=t.$$class),S.call(t.$$scope,n)){if(r=t.$$scope[n],!r.$$is_mod&&r!==q)throw w.TypeError.$new(n+" is not a module")}else r=$(),r.$$name=n,e(t.$$scope,r,n),t[n]=t.$$scope[n]=r;return r},w.get_singleton_class=function(e){return e.$$meta?e.$$meta:e.$$is_class?o(e):a(e)},w.append_features=function(e,t){for(var n=t.$$inc,r=0,$=n.length;$>r;r++)if(n[r]===e)return;n.push(e),e.$$dep.push(t);var o={$$name:e.$$name,$$proto:e.$$proto,$$parent:t.$$parent,$$module:e,$$iclass:!0};t.$$parent=o;for(var a=e.$$proto,i=t.$$proto,s=e.$$methods,c=0,l=s.length;l>c;c++){var _,p=s[c];(!i.hasOwnProperty(p)||(_=i[p]).$$donated||_.$$stub)&&(i[p]=a[p],i[p].$$donated=!0)}t.$$dep&&f(t,s.slice(),!0),u(e,t)},w.casgn=function(e,t,n){var r=e.$$scope;return n.$$is_class&&n.$$name===T&&(n.$$name=t),n.$$is_class&&(n.$$base_module=e),r.constants.push(t),r[t]=n},w.cdecl=function(e,t,n){return e.constants.push(t),e[t]=n},w.add_stubs=function(e){for(var t,n=w.stub_subscribers,r=0,$=e.length;$>r;r++)for(var o=e[r],a=p(o),i=0;i<n.length;i++)t=n[i],o in t||(t[o]=a)},w.stub_subscribers=[g.prototype],w.add_stub_for=_,w.ac=function(e,t,n,r){var $=(n.$$is_class?n.$$name+".":n.$$class.$$name+"#")+r,o="["+$+"] wrong number of arguments("+e+" for "+t+")";throw w.ArgumentError.$new(o)},w.find_super_dispatcher=function(e,t,n,r,$){var o;return o=$?e.$$is_class?$.$$super:e.$$class.$$proto:e.$$is_class?e.$$super:d(e,t,n),o=o["$"+t],o.$$p=r,o},w.find_iter_super_dispatcher=function(e,t,n,r,$){return n.$$def?w.find_super_dispatcher(e,n.$$jsid,n,r,$):w.find_super_dispatcher(e,t,n,r,$)},w.ret=function(e){throw w.returner.$v=e,w.returner},w.yield1=function(e,t){if("function"!=typeof e)throw w.LocalJumpError.$new("no block given");return e.length>1&&t.$$is_array?e.apply(null,t):e(t)},w.yieldX=function(e,t){if("function"!=typeof e)throw w.LocalJumpError.$new("no block given");return e.length>1&&1==t.length&&t[0].$$is_array?e.apply(null,t[0]):(t.$$is_array||(t=R.call(t)),e.apply(null,t))},w.rescue=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];if(r.$$is_array){var $=w.rescue(e,r);if($)return $}else if(r["$==="](e))return r}return null},w.is_a=function(e,t){if(e.$$meta===t)return!0;for(var n=e.$$class;n;){if(n===t)return!0;for(var r=0,$=n.$$inc.length;$>r;r++)if(n.$$inc[r]==t)return!0;n=n.$$super}return!1},w.to_ary=function(e){return e.$$is_array?e:e.$to_ary&&!e.$to_ary.$$stub?e.$to_ary():[e]},w.kwrestargs=function(e,t){var n=[],r={},$=null,o=e.smap;for($ in o)t[$]||(n.push($),r[$]=o[$]);return w.hash2(n,r)},w.send=function(e,t){var n=R.call(arguments,2),r=e["$"+t];return r?r.apply(e,n):e.$method_missing.apply(e,[t].concat(n))},w.block_send=function(e,t,n){var r=R.call(arguments,3),$=e["$"+t];return $?($.$$p=n,$.apply(e,r)):e.$method_missing.apply(e,[t].concat(r))},w.defn=function(e,t,n){return e.$$is_mod?h(e,t,n):e.$$is_class?(e.$$proto[t]=n,e===M?m(t,n):e===q&&f(e,[t])):e[t]=n,T},w.defs=function(e,t,n){e.$$is_class||e.$$is_mod?e.constructor.prototype[t]=n:e[t]=n},w.undef=function(e,t){delete e.$$proto[t]},w.hash=function(){if(1==arguments.length&&arguments[0].$$class==w.Hash)return arguments[0];var e,t,n,r,$=new w.Hash.$$alloc,o=[],a={},i={};if($.map=a,$.smap=i,$.keys=o,1==arguments.length)if(arguments[0].$$is_array)for(var s=arguments[0],c=0,u=s.length;u>c;c++){var l=s[c];if(2!==l.length)throw w.ArgumentError.$new("value not of length 2: "+l.$inspect());e=l[0],t=l[1],e.$$is_string?(r=e,map=i):(r=e.$hash(),map=a),null==map[r]&&o.push(e),map[r]=t}else{t=arguments[0];for(e in t)r=e.$hash(),i[r]=t[r],o.push(e)}else{if(n=arguments.length,n%2!==0)throw w.ArgumentError.$new("odd number of arguments for Hash");for(var _=0;n>_;_++)e=arguments[_],t=arguments[++_],e.$$is_string?(r=e,map=i):(r=e.$hash(),map=a),null==map[r]&&o.push(e),map[r]=t}return $},w.hash2=function(e,t){var n=new w.Hash.$$alloc;return n.keys=e,n.map={},n.smap=t,n},w.range=function(e,t,n){var r=new w.Range.$$alloc;return r.begin=e,r.end=t,r.exclude=n,r},function(e){function t(e){return a[e]?!1:(o.push(e),a[e]=!0,!0)}function n(e){var t,n,r=[],$="/";"."!==s&&(e=s.replace(/\/*$/,"/")+e),e=e.replace(/\.(rb|opal|js)$/,""),t=e.split($);for(var o=0,a=t.length;a>o;o++)n=t[o],""!=n&&(".."===n?r.pop():r.push(n));return r.join($)}function r(n){t(n);var r=i[n];if(r)r(e);else{var $=e.dynamic_require_severity||"warning",o="cannot load such file -- "+n;"error"===$?e.LoadError?e.LoadError.$new(o):function(){throw o}():"warning"===$&&console.warn("WARNING: LoadError: "+o)}return!0}function $(e){return a[e]?!1:r(e)}var o=["corelib/runtime"],a={"corelib/runtime":!0},i={},s=".";e.modules=i,e.loaded_features=o,e.normalize_loadable_path=n,e.mark_as_loaded=t,e.load=r,e.require=$}(w);var M,q,C,I;i("BasicObject",g),i("Object",v,g),i("Module",y,v),i("Class",b,y),M=s("BasicObject",g,b),q=s("Object",v,M.constructor),C=s("Module",y,q.constructor),I=s("Class",b,C.constructor),M.$$class=I,q.$$class=I,C.$$class=I,I.$$class=I,M.$$super=null,q.$$super=M,C.$$super=q,I.$$super=C,M.$$parent=null,q.$$parent=M,C.$$parent=q,I.$$parent=C,q.$$dep=k,w.base=q,M.$$scope=q.$$scope=w,M.$$orig_scope=q.$$orig_scope=w,w.Kernel=q,C.$$scope=q.$$scope,C.$$orig_scope=q.$$orig_scope,I.$$scope=q.$$scope,I.$$orig_scope=q.$$orig_scope,q.$$proto.toString=function(){return this.$to_s()},q.$$proto.$require=w.require,w.top=new q.$$alloc,w.klass(q,q,"NilClass",x);var T=w.nil=new x;T.$$id=O,T.call=T.apply=function(){throw w.LocalJumpError.$new("no block given")},w.breaker=new Error("unexpected break"),w.returner=new Error("unexpected return"),c("Array",Array),c("Boolean",Boolean),c("Numeric",Number),c("String",String),c("Proc",Function),c("Exception",Error),c("Regexp",RegExp),c("Time",Date),TypeError.$$super=Error}).call(this),"undefined"!=typeof global&&(global.Opal=this.Opal,Opal.global=global),"undefined"!=typeof window&&(window.Opal=this.Opal,Opal.global=window),Opal.modules["corelib/helpers"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module;return e.add_stubs(["$new","$class","$===","$respond_to?","$raise","$type_error","$__send__","$coerce_to","$nil?","$<=>","$inspect"]),function(t){var o=$(t,"Opal"),a=(o.$$proto,o.$$scope);e.defs(o,"$type_error",function(e,t,r,$){var o,i;return null==r&&(r=n),null==$&&($=n),a.get("TypeError").$new((o=(i=r!==!1&&r!==n)?$:i)===n||o.$$is_boolean&&1!=o?"no implicit conversion of "+e.$class()+" into "+t:"can't convert "+e.$class()+" into "+t+" ("+e.$class()+"#"+r+" gives "+$.$class())}),e.defs(o,"$coerce_to",function(e,t,r){var $,o=this;return($=t["$==="](e))===n||$.$$is_boolean&&1!=$?((($=e["$respond_to?"](r))===n||$.$$is_boolean&&1!=$)&&o.$raise(o.$type_error(e,t)),e.$__send__(r)):e}),e.defs(o,"$coerce_to!",function(e,t,r){var $,o=this,a=n;return a=o.$coerce_to(e,t,r),(($=t["$==="](a))===n||$.$$is_boolean&&1!=$)&&o.$raise(o.$type_error(e,t,r,a)),a}),e.defs(o,"$coerce_to?",function(e,t,r){var $,o=this,a=n;return($=e["$respond_to?"](r))===n||$.$$is_boolean&&1!=$?n:(a=o.$coerce_to(e,t,r),($=a["$nil?"]())===n||$.$$is_boolean&&1!=$?((($=t["$==="](a))===n||$.$$is_boolean&&1!=$)&&o.$raise(o.$type_error(e,t,r,a)),a):n)}),e.defs(o,"$try_convert",function(e,t,r){var $;return($=t["$==="](e))===n||$.$$is_boolean&&1!=$?($=e["$respond_to?"](r))===n||$.$$is_boolean&&1!=$?n:e.$__send__(r):e}),e.defs(o,"$compare",function(e,t){var r,$=this,o=n;return o=e["$<=>"](t),(r=o===n)===n||r.$$is_boolean&&1!=r||$.$raise(a.get("ArgumentError"),"comparison of "+e.$class()+" with "+t.$class()+" failed"),o}),e.defs(o,"$destructure",function(e){return 1==e.length?e[0]:e.$$is_array?e:r.call(e)}),e.defs(o,"$respond_to?",function(e,t){return null!=e&&e.$$class?e["$respond_to?"](t):!1}),e.defs(o,"$inspect",function(e){return void 0===e?"undefined":null===e?"null":e.$$class?e.$inspect():e.toString()})}(t)},Opal.modules["corelib/module"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.klass;return e.add_stubs(["$attr_reader","$attr_writer","$coerce_to!","$raise","$=~","$[]","$!","$==","$inject","$const_get","$split","$const_missing","$to_str","$===","$class","$append_features","$included","$name","$new","$to_s","$__id__"]),function(t,$super){function o(){}var a,i,s,c,u=o=$(t,$super,"Module",o),l=u.$$proto,_=u.$$scope;return e.defs(u,"$new",a=function(){function t(){}var r=a.$$p,$=r||n;a.$$p=null;var o=e.boot(e.Module,t);if(o.$$name=n,o.$$class=e.Module,o.$$dep=[],o.$$is_mod=!0,o.$$proto={},e.create_scope(e.Module.$$scope,o),$!==n){var i=$.$$s;$.$$s=null,$.call(o),$.$$s=i}return o}),l["$==="]=function(t){var r,$=this;return(r=null==t)===n||r.$$is_boolean&&1!=r?e.is_a(t,$):!1},l["$<"]=function(e){for(var t=this,n=t;n;){if(n===e)return!0;n=n.$$parent}return!1},l.$alias_method=function(t,n){var r=this,$="$"+t,o=r.$$proto["$"+n];return r.$$is_singleton?r.$$proto[$]=o:e.defn(r,$,o),r},l.$alias_native=function(e,t){var n=this;return null==t&&(t=e),n.$$proto["$"+e]=n.$$proto[t]},l.$ancestors=function(){for(var e=this,t=e,n=[];t;)n.push(t),n=n.concat(t.$$inc),t=t.$$super;return n},l.$append_features=function(t){var n=this;return e.append_features(n,t),n},l.$attr_accessor=function(e){var t,n,$=this;return e=r.call(arguments,0),(t=$).$attr_reader.apply(t,[].concat(e)),(n=$).$attr_writer.apply(n,[].concat(e))},e.defn(u,"$attr",l.$attr_accessor),l.$attr_reader=function(t){var $=this;t=r.call(arguments,0);for(var o=$.$$proto,a=t.length-1;a>=0;a--){var i=t[a],s="$"+i,c=function(e){return function(){return this[e]}}(i);o[i]=n,$.$$is_singleton?o.constructor.prototype[s]=c:e.defn($,s,c)}return n},l.$attr_writer=function(t){var $=this;t=r.call(arguments,0);for(var o=$.$$proto,a=t.length-1;a>=0;a--){var i=t[a],s="$"+i+"=",c=function(e){return function(t){return this[e]=t}}(i);o[i]=n,$.$$is_singleton?o.constructor.prototype[s]=c:e.defn($,s,c)}return n},l.$autoload=function(e,t){var r,$=this;return(r=$.$$autoload)||(r=$.$$autoload={}),r[e]=t,n},l.$class_variable_get=function(t){var r,$=this;t=_.get("Opal")["$coerce_to!"](t,_.get("String"),"to_str"),(r=t.length<3||"@@"!==t.slice(0,2))===n||r.$$is_boolean&&1!=r||$.$raise(_.get("NameError"),"class vars should start with @@");var o=e.cvars[t.slice(2)];return function(){return(r=null==o)===n||r.$$is_boolean&&1!=r?n:$.$raise(_.get("NameError"),"uninitialized class variable @@a in")}(),o},l.$class_variable_set=function(t,r){var $,o=this;return t=_.get("Opal")["$coerce_to!"](t,_.get("String"),"to_str"),($=t.length<3||"@@"!==t.slice(0,2))===n||$.$$is_boolean&&1!=$||o.$raise(_.get("NameError")),e.cvars[t.slice(2)]=r,r},l.$constants=function(){var e=this;return e.$$scope.constants},l["$const_defined?"]=function(t,r){var $,o=this;if(null==r&&(r=!0),(($=t["$=~"](/^[A-Z]\w*$/))===n||$.$$is_boolean&&1!=$)&&o.$raise(_.get("NameError"),"wrong constant name "+t),scopes=[o.$$scope],r||o===e.Object)for(var a=o.$$super;a!==e.BasicObject;)scopes.push(a.$$scope),a=a.$$super;for(var i=0,s=scopes.length;s>i;i++)if(scopes[i].hasOwnProperty(t))return!0;return!1},l.$const_get=function(t,r){var $,o,a,i=this;if(null==r&&(r=!0),o=t["$[]"]("::"),($=o!==!1&&o!==n?t["$=="]("::")["$!"]():o)!==n&&(!$.$$is_boolean||1==$))return($=(o=t.$split("::")).$inject,$.$$p=(a=function(e,t){a.$$s||this;return null==e&&(e=n),null==t&&(t=n),e.$const_get(t)},a.$$s=i,a),$).call(o,i);(($=t["$=~"](/^[A-Z]\w*$/))===n||$.$$is_boolean&&1!=$)&&i.$raise(_.get("NameError"),"wrong constant name "+t);var s=[i.$$scope];if(r||i==e.Object)for(var c=i.$$super;c!==e.BasicObject;)s.push(c.$$scope),c=c.$$super;for(var u=0,l=s.length;l>u;u++)if(s[u].hasOwnProperty(t))return s[u][t];return i.$const_missing(t)},l.$const_missing=function(e){var t=this;if(t.$$autoload){var n=t.$$autoload[e];if(n)return t.$require(n),t.$const_get(e)}return t.$raise(_.get("NameError"),"uninitialized constant "+t+"::"+e)},l.$const_set=function(t,r){var $,o=this;(($=t["$=~"](/^[A-Z]\w*$/))===n||$.$$is_boolean&&1!=$)&&o.$raise(_.get("NameError"),"wrong constant name "+t);try{t=t.$to_str()}catch(a){o.$raise(_.get("TypeError"),"conversion with #to_str failed")}return e.casgn(o,t,r),r},l.$define_method=i=function(t,r){var $,o,a=this,s=i.$$p,c=s||n;null==r&&(r=n),i.$$p=null,(($=(o=r)!==!1&&o!==n?o:c)===n||$.$$is_boolean&&1!=$)&&a.$raise(_.get("ArgumentError"),"tried to create Proc object without a block"),r!==!1&&r!==n&&(($=_.get("Proc")["$==="](r))===n||$.$$is_boolean&&1!=$?a.$raise(_.get("TypeError"),"wrong argument type "+r.$class()+" (expected Proc/Method)"):c=r);var u="$"+t;return c.$$jsid=t,c.$$s=null,c.$$def=c,a.$$is_singleton?a.$$proto[u]=c:e.defn(a,u,c),t},l.$remove_method=function(t){var n=this;return e.undef(n,"$"+t),n},l.$include=function(e){var t=this;e=r.call(arguments,0);for(var n=e.length-1;n>=0;n--){var $=e[n];$!==t&&($.$append_features(t),$.$included(t))}return t},l["$include?"]=function(e){for(var t=this,n=t;n;n=n.$$super)for(var r=0;r!=n.$$inc.length;r++){var $=n.$$inc[r];if(e===$)return!0}return!1},l.$instance_method=function(e){var t=this,n=t.$$proto["$"+e];return(!n||n.$$stub)&&t.$raise(_.get("NameError"),"undefined method `"+e+"' for class `"+t.$name()+"'"),_.get("UnboundMethod").$new(t,n,e)},l.$instance_methods=function(t){var n=this;null==t&&(t=!0);var r=[],$=n.$$proto;for(var o in $)if("$"===o.charAt(0)&&"function"==typeof $[o]&&!$[o].$$stub){if(!n.$$is_mod){if(n!==e.BasicObject&&$[o]===e.BasicObject.$$proto[o])continue;if(!t&&!$.hasOwnProperty(o))continue;if(!t&&$[o].$$donated)continue}r.push(o.substr(1))}return r},l.$included=function(){return n},l.$extended=function(){return n},l.$module_eval=s=function(){var e=this,t=s.$$p,r=t||n;s.$$p=null,r!==!1&&r!==n||e.$raise(_.get("ArgumentError"),"no block given");var $,o=r.$$s;return r.$$s=null,$=r.call(e),r.$$s=o,$},e.defn(u,"$class_eval",l.$module_eval),l.$module_exec=c=function(){var e=this,t=c.$$p,$=t||n;if(c.$$p=null,$===n)throw new Error("no block given");var o,a=$.$$s;return $.$$s=null,o=$.apply(e,r.call(arguments)),$.$$s=a,o},e.defn(u,"$class_exec",l.$module_exec),l["$method_defined?"]=function(e){var t=this,n=t.$$proto["$"+e];return!!n&&!n.$$stub},l.$module_function=function(e){var t=this;if(e=r.call(arguments,0),0===e.length)t.$$module_function=!0;else for(var n=0,$=e.length;$>n;n++){var o=e[n],a=t.$$proto["$"+o];t.constructor.prototype["$"+o]=a}return t},l.$name=function(){var t=this;if(t.$$full_name)return t.$$full_name;for(var r=[],$=t;$;){if($.$$name===n)return 0===r.length?n:r.join("::");if(r.unshift($.$$name),$=$.$$base_module,$===e.Object)break}return 0===r.length?n:t.$$full_name=r.join("::")},l.$public=function(e){var t=this;return e=r.call(arguments,0),0===e.length&&(t.$$module_function=!1),n},e.defn(u,"$private",l.$public),e.defn(u,"$protected",l.$public),e.defn(u,"$nesting",l.$public),l.$private_class_method=function(e){var t=this;return t["$"+e]||n},e.defn(u,"$public_class_method",l.$private_class_method),l["$private_method_defined?"]=function(){return!1},l.$private_constant=function(){return n},e.defn(u,"$protected_method_defined?",l["$private_method_defined?"]),e.defn(u,"$public_instance_methods",l.$instance_methods),e.defn(u,"$public_method_defined?",l["$method_defined?"]),l.$remove_class_variable=function(){return n},l.$remove_const=function(e){var t=this,n=t.$$scope[e];return delete t.$$scope[e],n},l.$to_s=function(){var e,t=this;return(e=t.$name())!==!1&&e!==n?e:"#<"+(t.$$is_mod?"Module":"Class")+":0x"+t.$__id__().$to_s(16)+">"},l.$undef_method=function(t){var n=this;return e.add_stub_for(n.$$proto,"$"+t),n},n&&"undef_method"}(t,null)},Opal.modules["corelib/class"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.klass;return e.add_stubs(["$require","$raise","$allocate"]),t.$require("corelib/module"),function(t,$super){function o(){}var a,i,s=o=$(t,$super,"Class",o),c=s.$$proto,u=s.$$scope;return e.defs(s,"$new",a=function(t){function r(){}var $=this,o=a.$$p,i=o||n;null==t&&(t=u.get("Object")),a.$$p=null,(!t.$$is_class||t.$$is_mod)&&$.$raise(u.get("TypeError"),"superclass must be a Class");var s=e.boot(t,r);if(s.$$name=n,s.$$parent=t,e.create_scope(t.$$scope,s),t.$inherited(s),i!==n){var c=i.$$s;i.$$s=null,i.call(s),i.$$s=c}return s}),c.$allocate=function(){var t=this,n=new t.$$alloc;return n.$$id=e.uid(),n},c.$inherited=function(){return n},c.$new=i=function(e){var t=this,$=i.$$p,o=$||n;e=r.call(arguments,0),i.$$p=null;var a=t.$allocate();return a.$initialize.$$p=o,a.$initialize.apply(a,e),a},c.$superclass=function(){var e=this;return e.$$super||n},n&&"superclass"}(t,null)},Opal.modules["corelib/basic_object"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.klass;return e.add_stubs(["$raise","$inspect"]),function(t,$super){function o(){}var a,i,s,c,u=o=$(t,$super,"BasicObject",o),l=u.$$proto,_=u.$$scope;return e.defn(u,"$initialize",function(){return n}),e.defn(u,"$==",function(e){var t=this;return t===e}),e.defn(u,"$__id__",function(){var t=this;return t.$$id||(t.$$id=e.uid())}),e.defn(u,"$__send__",a=function(e,t){var $=this,o=a.$$p,i=o||n;t=r.call(arguments,1),a.$$p=null;var s=$["$"+e];return s?(i!==n&&(s.$$p=i),s.apply($,t)):(i!==n&&($.$method_missing.$$p=i),$.$method_missing.apply($,[e].concat(t)))}),e.defn(u,"$!",function(){return!1}),e.defn(u,"$eql?",l["$=="]),e.defn(u,"$equal?",l["$=="]),e.defn(u,"$instance_eval",i=function(){var e=this,t=i.$$p,r=t||n;i.$$p=null,r!==!1&&r!==n||_.get("Kernel").$raise(_.get("ArgumentError"),"no block given");var $,o=r.$$s;return r.$$s=null,$=r.call(e,e),r.$$s=o,$}),e.defn(u,"$instance_exec",s=function(e){var t=this,$=s.$$p,o=$||n;e=r.call(arguments,0),s.$$p=null,o!==!1&&o!==n||_.get("Kernel").$raise(_.get("ArgumentError"),"no block given");var a,i=o.$$s;return o.$$s=null,a=o.apply(t,e),o.$$s=i,a}),e.defn(u,"$method_missing",c=function(e,t){{var $,o=this;c.$$p}return t=r.call(arguments,1),c.$$p=null,_.get("Kernel").$raise(_.get("NoMethodError"),function(){return($=o.$inspect&&!o.$inspect.$$stub)===n||$.$$is_boolean&&1!=$?"undefined method `"+e+"' for "+o.$$class:"undefined method `"+e+"' for "+o.$inspect()+":"+o.$$class}())}),n&&"method_missing"}(t,null)},Opal.modules["corelib/kernel"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?t>=e:e["$<="](t)}e.dynamic_require_severity="warning";var r=e.top,$=e.nil,o=e.breaker,a=e.slice,i=e.module,s=e.gvars,c=e.hash2;return e.add_stubs(["$raise","$inspect","$==","$object_id","$class","$new","$coerce_to?","$<<","$allocate","$copy_instance_variables","$initialize_clone","$initialize_copy","$singleton_class","$initialize_dup","$for","$to_proc","$each","$reverse","$append_features","$extended","$length","$respond_to?","$[]","$to_ary","$to_a","$to_int","$fetch","$Integer","$Float","$to_str","$coerce_to","$to_s","$__id__","$coerce_to!","$nil?","$===","$print","$format","$puts","$empty?","$rand","$respond_to_missing?","$try_convert!","$expand_path","$join","$start_with?"]),function(r){var u,l,_,p,d,f,h,m,g=i(r,"Kernel"),v=g.$$proto,b=g.$$scope;e.defn(g,"$method_missing",u=function(e,t){{var n=this;u.$$p}return t=a.call(arguments,1),u.$$p=null,n.$raise(b.get("NoMethodError"),"undefined method `"+e+"' for "+n.$inspect())}),e.defn(g,"$=~",function(){return!1}),e.defn(g,"$===",function(e){var t,n=this;return(t=n.$object_id()["$=="](e.$object_id()))!==!1&&t!==$?t:n["$=="](e)}),e.defn(g,"$<=>",function(e){var t=this,n=t["$=="](e);return n&&n!==$?0:$}),e.defn(g,"$method",function(e){var t=this,n=t["$"+e];return(!n||n.$$stub)&&t.$raise(b.get("NameError"),"undefined method `"+e+"' for class `"+t.$class()+"'"),b.get("Method").$new(t,n,e)}),e.defn(g,"$methods",function(t){var n=this;null==t&&(t=!0);var r=[];for(var o in n)if("$"==o[0]&&"function"==typeof n[o]){if((0==t||t===$)&&!e.hasOwnProperty.call(n,o))continue;void 0===n[o].$$stub&&r.push(o.substr(1))}return r}),e.defn(g,"$Array",function(e){var t;return e===$?[]:e.$$is_array?e:(t=b.get("Opal")["$coerce_to?"](e,b.get("Array"),"to_ary"),t!==$?t:(t=b.get("Opal")["$coerce_to?"](e,b.get("Array"),"to_a"),t!==$?t:[e]))}),e.defn(g,"$at_exit",l=function(){var e,t=l.$$p,n=t||$;return null==s.__at_exit__&&(s.__at_exit__=$),l.$$p=null,(e=s.__at_exit__)!==!1&&e!==$?e:s.__at_exit__=[],s.__at_exit__["$<<"](n)}),e.defn(g,"$caller",function(){return[]}),e.defn(g,"$class",function(){var e=this;return e.$$class}),e.defn(g,"$copy_instance_variables",function(e){var t=this;for(var n in e)"$"!==n.charAt(0)&&(t[n]=e[n])}),e.defn(g,"$clone",function(){var e=this,t=$;return t=e.$class().$allocate(),t.$copy_instance_variables(e),t.$initialize_clone(e),t}),e.defn(g,"$initialize_clone",function(e){var t=this;return t.$initialize_copy(e)}),e.defn(g,"$define_singleton_method",_=function(e){var t=this,n=_.$$p,r=n||$;_.$$p=null,r!==!1&&r!==$||t.$raise(b.get("ArgumentError"),"tried to create Proc object without a block");var o="$"+e;return r.$$jsid=e,r.$$s=null,r.$$def=r,t.$singleton_class().$$proto[o]=r,t}),e.defn(g,"$dup",function(){var e=this,t=$;return t=e.$class().$allocate(),t.$copy_instance_variables(e),t.$initialize_dup(e),t}),e.defn(g,"$initialize_dup",function(e){var t=this;return t.$initialize_copy(e)}),e.defn(g,"$enum_for",p=function(e,t){var n,r,o=this,i=p.$$p,s=i||$;return t=a.call(arguments,1),null==e&&(e="each"),p.$$p=null,(n=(r=b.get("Enumerator")).$for,n.$$p=s.$to_proc(),n).apply(r,[o,e].concat(t))}),e.defn(g,"$to_enum",v.$enum_for),e.defn(g,"$equal?",function(e){var t=this;return t===e}),e.defn(g,"$exit",function(t){var n,r;return null==s.__at_exit__&&(s.__at_exit__=$),null==t&&(t=!0),(n=s.__at_exit__)===$||n.$$is_boolean&&1!=n||(n=(r=s.__at_exit__.$reverse()).$each,n.$$p="call".$to_proc(),n).call(r),(n=t===!0)===$||n.$$is_boolean&&1!=n||(t=0),e.exit(t),$}),e.defn(g,"$extend",function(e){var t=this;e=a.call(arguments,0);for(var n=t.$singleton_class(),r=e.length-1;r>=0;r--){var $=e[r];$.$append_features(n),$.$extended(t)}return t}),e.defn(g,"$format",function(e,t){function n(){C&U&&f.$raise(b.get("ArgumentError"),"flag after width"),C&Y&&f.$raise(b.get("ArgumentError"),"flag after precision")}function r(){C&U&&f.$raise(b.get("ArgumentError"),"width given twice"),C&Y&&f.$raise(b.get("ArgumentError"),"width after precision")}function o(e){return e>=t.length&&f.$raise(b.get("ArgumentError"),"too few arguments"),t[e]}function i(){switch(N){case-1:f.$raise(b.get("ArgumentError"),"unnumbered("+z+") mixed with numbered");case-2:f.$raise(b.get("ArgumentError"),"unnumbered("+z+") mixed with named")}return N=z++,o(N-1)}function c(e){return N>0&&f.$raise(b.get("ArgumentError"),"numbered("+e+") after unnumbered("+N+")"),-2===N&&f.$raise(b.get("ArgumentError"),"numbered("+e+") after named"),1>e&&f.$raise(b.get("ArgumentError"),"invalid index - "+e+"$"),N=-1,o(e-1)}function u(){return void 0===q?i():q}function l(t){for(var n,r="";;m++){if(m===j&&f.$raise(b.get("ArgumentError"),"malformed format string - %*[0-9]"),e.charCodeAt(m)<48||e.charCodeAt(m)>57)return m--,n=parseInt(r)||0,n>2147483647&&f.$raise(b.get("ArgumentError"),""+t+" too big"),n;r+=e.charAt(m)}}function _(t){var n,r=l(t);return"$"===e.charAt(m+1)?(m++,n=c(r)):n=i(),n.$to_int()}var p,d,f=this;null==s.DEBUG&&(s.DEBUG=$),t=a.call(arguments,1),(p=(d=t.$length()["$=="](1))?t["$[]"](0)["$respond_to?"]("to_ary"):d)===$||p.$$is_boolean&&1!=p||(t=t["$[]"](0).$to_ary(),t=t.$to_a());var h,m,g,v,y,x,w,k,E,S,R,O,A,M,q,C,I="",T=0,j=e.length,z=1,N=0,F=0,P=1,B=2,D=4,H=8,L=16,U=32,G=64,Y=128;for(m=e.indexOf("%");-1!==m;m=e.indexOf("%",m)){switch(v=void 0,C=F,x=-1,w=-1,q=void 0,h=m,m++,e.charAt(m)){case"%":T=m;case"":case"\n":case"\x00":m++;continue}e:for(;j>m;m++)switch(e.charAt(m)){case" ":n(),C|=L;continue e;case"#":n(),C|=P;continue e;case"+":n(),C|=D;continue e;case"-":n(),C|=B;continue e;case"0":n(),C|=H;continue e;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":if(k=l("width"),"$"===e.charAt(m+1)){if(m+2===j){v="%",m++;break e}void 0!==q&&f.$raise(b.get("ArgumentError"),"value given twice - %"+k+"$"),q=c(k),m++}else r(),C|=U,x=k;continue e;case"<":case"{":for(S="<"===e.charAt(m)?">":"}",E="",m++;;m++){if(m===j&&f.$raise(b.get("ArgumentError"),"malformed name - unmatched parenthesis"),e.charAt(m)===S){if(N>0&&f.$raise(b.get("ArgumentError"),"named "+E+" after unnumbered("+N+")"),-1===N&&f.$raise(b.get("ArgumentError"),"named "+E+" after numbered"),N=-2,void 0!==t[0]&&t[0].$$is_hash||f.$raise(b.get("ArgumentError"),"one hash required"),q=t[0].$fetch(E),">"===S)continue e;if(v=q.toString(),-1!==w&&(v=v.slice(0,w)),C&B)for(;v.length<x;)v+=" ";else for(;v.length<x;)v=" "+v;break e}E+=e.charAt(m)}case"*":m++,r(),C|=U,x=_("width"),0>x&&(C|=B,x=-x);continue e;case".":if(C&Y&&f.$raise(b.get("ArgumentError"),"precision given twice"),C|=G|Y,w=0,m++,"*"===e.charAt(m)){m++,w=_("precision"),0>w&&(C&=~G);continue e}w=l("precision");continue e;case"d":case"i":case"u":if(g=f.$Integer(u()),g>=0){for(v=g.toString();v.length<w;)v="0"+v;if(C&B)for((C&D||C&L)&&(v=(C&D?"+":" ")+v);v.length<x;)v+=" ";else if(C&H&&-1===w){for(;v.length<x-(C&D||C&L?1:0);)v="0"+v;(C&D||C&L)&&(v=(C&D?"+":" ")+v)}else for((C&D||C&L)&&(v=(C&D?"+":" ")+v);v.length<x;)v=" "+v}else{for(v=(-g).toString();v.length<w;)v="0"+v;if(C&B)for(v="-"+v;v.length<x;)v+=" ";else if(C&H&&-1===w){for(;v.length<x-1;)v="0"+v;v="-"+v}else for(v="-"+v;v.length<x;)v=" "+v}break e;case"b":case"B":case"o":case"x":case"X":switch(e.charAt(m)){case"b":case"B":R=2,O="0b",A=/^1+/,M="1";break;case"o":R=8,O="0",A=/^3?7+/,M="7";break;case"x":case"X":R=16,O="0x",A=/^f+/,M="f"}if(g=f.$Integer(u()),g>=0){for(v=g.toString(R);v.length<w;)v="0"+v;if(C&B)for((C&D||C&L)&&(v=(C&D?"+":" ")+v),C&P&&0!==g&&(v=O+v);v.length<x;)v+=" ";else if(C&H&&-1===w){for(;v.length<x-(C&D||C&L?1:0)-(C&P&&0!==g?O.length:0);)v="0"+v;C&P&&0!==g&&(v=O+v),(C&D||C&L)&&(v=(C&D?"+":" ")+v)}else for(C&P&&0!==g&&(v=O+v),(C&D||C&L)&&(v=(C&D?"+":" ")+v);v.length<x;)v=" "+v}else if(C&D||C&L){for(v=(-g).toString(R);v.length<w;)v="0"+v;if(C&B)for(C&P&&(v=O+v),v="-"+v;v.length<x;)v+=" ";else if(C&H&&-1===w){for(;v.length<x-1-(C&P?2:0);)v="0"+v;C&P&&(v=O+v),v="-"+v}else for(C&P&&(v=O+v),v="-"+v;v.length<x;)v=" "+v}else{for(v=(g>>>0).toString(R).replace(A,M);v.length<w-2;)v=M+v;if(C&B)for(v=".."+v,C&P&&(v=O+v);v.length<x;)v+=" ";else if(C&H&&-1===w){for(;v.length<x-2-(C&P?O.length:0);)v=M+v;v=".."+v,C&P&&(v=O+v)}else for(v=".."+v,C&P&&(v=O+v);v.length<x;)v=" "+v}e.charAt(m)===e.charAt(m).toUpperCase()&&(v=v.toUpperCase());break e;case"f":case"e":case"E":case"g":case"G":if(g=f.$Float(u()),g>=0||isNaN(g)){if(1/0===g)v="Inf";else switch(e.charAt(m)){case"f":v=g.toFixed(-1===w?6:w);break;case"e":case"E":v=g.toExponential(-1===w?6:w);break;case"g":case"G":v=g.toExponential(),y=parseInt(v.split("e")[1]),-4>y||y>=(-1===w?6:w)||(v=g.toPrecision(-1===w?C&P?6:void 0:w))}if(C&B)for((C&D||C&L)&&(v=(C&D?"+":" ")+v);v.length<x;)v+=" ";else if(C&H&&1/0!==g&&!isNaN(g)){for(;v.length<x-(C&D||C&L?1:0);)v="0"+v;(C&D||C&L)&&(v=(C&D?"+":" ")+v)}else for((C&D||C&L)&&(v=(C&D?"+":" ")+v);v.length<x;)v=" "+v}else{if(g===-1/0)v="Inf";else switch(e.charAt(m)){case"f":v=(-g).toFixed(-1===w?6:w);break;case"e":case"E":v=(-g).toExponential(-1===w?6:w);break;case"g":case"G":v=(-g).toExponential(),y=parseInt(v.split("e")[1]),-4>y||y>=(-1===w?6:w)||(v=(-g).toPrecision(-1===w?C&P?6:void 0:w))}if(C&B)for(v="-"+v;v.length<x;)v+=" ";else if(C&H&&g!==-1/0){for(;v.length<x-1;)v="0"+v;v="-"+v}else for(v="-"+v;v.length<x;)v=" "+v}e.charAt(m)!==e.charAt(m).toUpperCase()||1/0===g||g===-1/0||isNaN(g)||(v=v.toUpperCase()),v=v.replace(/([eE][-+]?)([0-9])$/,"$10$2");break e;case"a":case"A":f.$raise(b.get("NotImplementedError"),"`A` and `a` format field types are not implemented in Opal yet");case"c":if(g=u(),g["$respond_to?"]("to_ary")&&(g=g.$to_ary()[0]),v=g["$respond_to?"]("to_str")?g.$to_str():String.fromCharCode(b.get("Opal").$coerce_to(g,b.get("Integer"),"to_int")),1!==v.length&&f.$raise(b.get("ArgumentError"),"%c requires a character"),C&B)for(;v.length<x;)v+=" ";else for(;v.length<x;)v=" "+v;break e;case"p":if(v=u().$inspect(),-1!==w&&(v=v.slice(0,w)),C&B)for(;v.length<x;)v+=" ";else for(;v.length<x;)v=" "+v;break e;case"s":if(v=u().$to_s(),-1!==w&&(v=v.slice(0,w)),C&B)for(;v.length<x;)v+=" ";else for(;v.length<x;)v=" "+v;break e;default:f.$raise(b.get("ArgumentError"),"malformed format string - %"+e.charAt(m))}void 0===v&&f.$raise(b.get("ArgumentError"),"malformed format string - %"),I+=e.slice(T,h)+v,T=m+1}return s.DEBUG&&N>=0&&z<t.length&&f.$raise(b.get("ArgumentError"),"too many arguments for format string"),I+e.slice(T)}),e.defn(g,"$freeze",function(){var e=this;return e.___frozen___=!0,e}),e.defn(g,"$frozen?",function(){var e,t=this;return null==t.___frozen___&&(t.___frozen___=$),(e=t.___frozen___)!==!1&&e!==$?e:!1
}),e.defn(g,"$hash",function(){var e=this;return""+e.$class()+":"+e.$class().$__id__()+":"+e.$__id__()}),e.defn(g,"$initialize_copy",function(){return $}),e.defn(g,"$inspect",function(){var e=this;return e.$to_s()}),e.defn(g,"$instance_of?",function(e){var t=this;return t.$$class===e}),e.defn(g,"$instance_variable_defined?",function(t){var n=this;return e.hasOwnProperty.call(n,t.substr(1))}),e.defn(g,"$instance_variable_get",function(e){var t=this,n=t[e.substr(1)];return null==n?$:n}),e.defn(g,"$instance_variable_set",function(e,t){var n=this;return n[e.substr(1)]=t}),e.defn(g,"$instance_variables",function(){var e=this,t=[];for(var n in e)"$"!==n.charAt(0)&&"$$class"!==n&&"$$id"!==n&&t.push("@"+n);return t}),e.defn(g,"$Integer",function(e,t){var n,r,o,a=this;return e.$$is_string?(void 0===t?t=0:(t=b.get("Opal").$coerce_to(t,b.get("Integer"),"to_int"),(1===t||0>t||t>36)&&a.$raise(b.get("ArgumentError"),"invalid radix "+t)),r=e.toLowerCase(),r=r.replace(/(\d)_(?=\d)/g,"$1"),r=r.replace(/^(\s*[+-]?)(0[bodx]?)/,function(n,r,$){switch($){case"0b":if(0===t||2===t)return t=2,r;case"0":case"0o":if(0===t||8===t)return t=8,r;case"0d":if(0===t||10===t)return t=10,r;case"0x":if(0===t||16===t)return t=16,r}a.$raise(b.get("ArgumentError"),'invalid value for Integer(): "'+e+'"')}),t=0===t?10:t,o="0-"+(10>=t?t-1:"9a-"+String.fromCharCode(97+(t-11))),new RegExp("^\\s*[+-]?["+o+"]+\\s*$").test(r)||a.$raise(b.get("ArgumentError"),'invalid value for Integer(): "'+e+'"'),n=parseInt(r,t),isNaN(n)&&a.$raise(b.get("ArgumentError"),'invalid value for Integer(): "'+e+'"'),n):(void 0!==t&&a.$raise(b.get("ArgumentError"),"base specified for non string value"),e===$&&a.$raise(b.get("TypeError"),"can't convert nil into Integer"),e.$$is_number?((1/0===e||e===-1/0||isNaN(e))&&a.$raise(b.get("FloatDomainError"),e),Math.floor(e)):e["$respond_to?"]("to_int")&&(n=e.$to_int(),n!==$)?n:b.get("Opal")["$coerce_to!"](e,b.get("Integer"),"to_i"))}),e.defn(g,"$Float",function(e){var t,n=this;return e===$&&n.$raise(b.get("TypeError"),"can't convert nil into Float"),e.$$is_string?(t=e.toString(),t=t.replace(/(\d)_(?=\d)/g,"$1"),/^\s*[-+]?0[xX][0-9a-fA-F]+\s*$/.test(t)?n.$Integer(t):(/^\s*[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?\s*$/.test(t)||n.$raise(b.get("ArgumentError"),'invalid value for Float(): "'+e+'"'),parseFloat(t))):b.get("Opal")["$coerce_to!"](e,b.get("Float"),"to_f")}),e.defn(g,"$Hash",function(e){var t,n;return(t=(n=e["$nil?"]())!==!1&&n!==$?n:e["$=="]([]))===$||t.$$is_boolean&&1!=t?(t=b.get("Hash")["$==="](e))===$||t.$$is_boolean&&1!=t?b.get("Opal")["$coerce_to!"](e,b.get("Hash"),"to_hash"):e:c([],{})}),e.defn(g,"$is_a?",function(t){var n=this;return e.is_a(n,t)}),e.defn(g,"$kind_of?",v["$is_a?"]),e.defn(g,"$lambda",d=function(){var e=d.$$p,t=e||$;return d.$$p=null,t.$$is_lambda=!0,t}),e.defn(g,"$load",function(t){return t=b.get("Opal")["$coerce_to!"](t,b.get("String"),"to_str"),e.load(e.normalize_loadable_path(t))}),e.defn(g,"$loop",f=function(){var e=this,t=f.$$p,n=t||$;for(f.$$p=null;;)if(n()===o)return o.$v;return e}),e.defn(g,"$nil?",function(){return!1}),e.defn(g,"$object_id",v.$__id__),e.defn(g,"$printf",function(e){var n,r=this;return e=a.call(arguments,0),t(e.$length(),0)&&r.$print((n=r).$format.apply(n,[].concat(e))),$}),e.defn(g,"$private_methods",function(){return[]}),e.defn(g,"$private_instance_methods",v.$private_methods),e.defn(g,"$proc",h=function(){var e=this,t=h.$$p,n=t||$;return h.$$p=null,n!==!1&&n!==$||e.$raise(b.get("ArgumentError"),"tried to create Proc object without a block"),n.$$is_lambda=!1,n}),e.defn(g,"$puts",function(e){var t;return null==s.stdout&&(s.stdout=$),e=a.call(arguments,0),(t=s.stdout).$puts.apply(t,[].concat(e))}),e.defn(g,"$p",function(e){var t,r,o,i=this;return e=a.call(arguments,0),(t=(r=e).$each,t.$$p=(o=function(e){o.$$s||this;return null==s.stdout&&(s.stdout=$),null==e&&(e=$),s.stdout.$puts(e.$inspect())},o.$$s=i,o),t).call(r),n(e.$length(),1)?e["$[]"](0):e}),e.defn(g,"$print",function(e){var t;return null==s.stdout&&(s.stdout=$),e=a.call(arguments,0),(t=s.stdout).$print.apply(t,[].concat(e))}),e.defn(g,"$warn",function(e){var t,n;return null==s.VERBOSE&&(s.VERBOSE=$),null==s.stderr&&(s.stderr=$),e=a.call(arguments,0),(t=(n=s.VERBOSE["$nil?"]())!==!1&&n!==$?n:e["$empty?"]())===$||t.$$is_boolean&&1!=t?(t=s.stderr).$puts.apply(t,[].concat(e)):$}),e.defn(g,"$raise",function(e,t){if(null==s["!"]&&(s["!"]=$),null==e&&s["!"])throw s["!"];throw null==e?e=b.get("RuntimeError").$new():e.$$is_string?e=b.get("RuntimeError").$new(e):e.$$is_class&&(e=e.$new(t)),s["!"]=e,e}),e.defn(g,"$fail",v.$raise),e.defn(g,"$rand",function(e){var t=this;if(void 0===e)return Math.random();if(e.$$is_range){var n=e.$to_a();return n[t.$rand(n.length)]}return Math.floor(Math.random()*Math.abs(b.get("Opal").$coerce_to(e,b.get("Integer"),"to_int")))}),e.defn(g,"$respond_to?",function(e,t){var n,r=this;if(null==t&&(t=!1),(n=r["$respond_to_missing?"](e))!==$&&(!n.$$is_boolean||1==n))return!0;var o=r["$"+e];return"function"!=typeof o||o.$$stub?!1:!0}),e.defn(g,"$respond_to_missing?",function(){return!1}),e.defn(g,"$require",function(t){return t=b.get("Opal")["$coerce_to!"](t,b.get("String"),"to_str"),e.require(e.normalize_loadable_path(t))}),e.defn(g,"$require_relative",function(t){return b.get("Opal")["$try_convert!"](t,b.get("String"),"to_str"),t=b.get("File").$expand_path(b.get("File").$join(e.current_file,"..",t)),e.require(e.normalize_loadable_path(t))}),e.defn(g,"$require_tree",function(t){t=b.get("File").$expand_path(t);for(var n in e.modules)n["$start_with?"](t)&&e.require(n);return $}),e.defn(g,"$send",v.$__send__),e.defn(g,"$public_send",v.$__send__),e.defn(g,"$singleton_class",function(){var t=this;return e.get_singleton_class(t)}),e.defn(g,"$sprintf",v.$format),e.defn(g,"$srand",v.$rand),e.defn(g,"$String",function(e){var t;return(t=b.get("Opal")["$coerce_to?"](e,b.get("String"),"to_str"))!==!1&&t!==$?t:b.get("Opal")["$coerce_to!"](e,b.get("String"),"to_s")}),e.defn(g,"$taint",function(){var e=this;return e}),e.defn(g,"$tainted?",function(){return!1}),e.defn(g,"$tap",m=function(){var t=this,n=m.$$p,r=n||$;return m.$$p=null,e.yield1(r,t)===o?o.$v:t}),e.defn(g,"$to_proc",function(){var e=this;return e}),e.defn(g,"$to_s",function(){var e=this;return"#<"+e.$class()+":0x"+e.$__id__().$to_s(16)+">"}),e.defn(g,"$untaint",v.$taint)}(r)},Opal.modules["corelib/nil_class"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e,r=e.nil,$=(e.breaker,e.slice,e.klass);return e.add_stubs(["$raise"]),function(t,$super){function n(){}var o=n=$(t,$super,"NilClass",n),a=o.$$proto,i=o.$$scope;return a["$!"]=function(){return!0},a["$&"]=function(){return!1},a["$|"]=function(e){return e!==!1&&e!==r},a["$^"]=function(e){return e!==!1&&e!==r},a["$=="]=function(e){return e===r},a.$dup=function(){var e=this;return e.$raise(i.get("TypeError"))},a.$inspect=function(){return"nil"},a["$nil?"]=function(){return!0},a.$singleton_class=function(){return i.get("NilClass")},a.$to_a=function(){return[]},a.$to_h=function(){return e.hash()},a.$to_i=function(){return 0},e.defn(o,"$to_f",a.$to_i),a.$to_s=function(){return""},r&&"to_s"}(t,null),e.cdecl(n,"NIL",r)},Opal.modules["corelib/boolean"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e,r=e.nil,$=(e.breaker,e.slice,e.klass);return e.add_stubs(["$undef_method"]),function(t,$super){function n(){}{var o=n=$(t,$super,"Boolean",n),a=o.$$proto;o.$$scope}return a.$$is_boolean=!0,a.$__id__=function(){var e=this;return e.valueOf()?2:0},e.defn(o,"$object_id",a.$__id__),function(e){e.$$scope,e.$$proto;return e.$undef_method("new")}(o.$singleton_class()),a["$!"]=function(){var e=this;return 1!=e},a["$&"]=function(e){var t=this;return 1==t?e!==!1&&e!==r:!1},a["$|"]=function(e){var t=this;return 1==t?!0:e!==!1&&e!==r},a["$^"]=function(e){var t=this;return 1==t?e===!1||e===r:e!==!1&&e!==r},a["$=="]=function(e){var t=this;return 1==t===e.valueOf()},e.defn(o,"$equal?",a["$=="]),e.defn(o,"$singleton_class",a.$class),a.$to_s=function(){var e=this;return 1==e?"true":"false"},r&&"to_s"}(t,null),e.cdecl(n,"TrueClass",n.get("Boolean")),e.cdecl(n,"FalseClass",n.get("Boolean")),e.cdecl(n,"TRUE",!0),e.cdecl(n,"FALSE",!1)},Opal.modules["corelib/error"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e,r=e.nil,$=(e.breaker,e.slice,e.klass),o=e.module;return e.add_stubs(["$attr_reader","$class"]),function(t,$super){function n(){}{var o=n=$(t,$super,"Exception",n),a=o.$$proto;o.$$scope}return a.message=r,o.$attr_reader("message"),e.defs(o,"$new",function(e){var t=this;null==e&&(e="Exception");var n=new t.$$alloc(e);return Error.captureStackTrace&&Error.captureStackTrace(n),n.name=t.$$name,n.$initialize(e),n}),a.$initialize=function(e){var t=this;return t.message=e},a.$backtrace=function(){var e=this,t=e.stack;return"string"==typeof t?t.split("\n").slice(0,15):t?t.slice(0,15):[]},a.$inspect=function(){var e=this;return"#<"+e.$class()+": '"+e.message+"'>"},e.defn(o,"$to_s",a.$message)}(t,null),function(e,$super){function t(){}{var n=t=$(e,$super,"ScriptError",t);n.$$proto,n.$$scope}return r}(t,n.get("Exception")),function(e,$super){function t(){}{var n=t=$(e,$super,"SyntaxError",t);n.$$proto,n.$$scope}return r}(t,n.get("ScriptError")),function(e,$super){function t(){}{var n=t=$(e,$super,"LoadError",t);n.$$proto,n.$$scope}return r}(t,n.get("ScriptError")),function(e,$super){function t(){}{var n=t=$(e,$super,"NotImplementedError",t);n.$$proto,n.$$scope}return r}(t,n.get("ScriptError")),function(e,$super){function t(){}{var n=t=$(e,$super,"SystemExit",t);n.$$proto,n.$$scope}return r}(t,n.get("Exception")),function(e,$super){function t(){}{var n=t=$(e,$super,"NoMemoryError",t);n.$$proto,n.$$scope}return r}(t,n.get("Exception")),function(e,$super){function t(){}{var n=t=$(e,$super,"SignalException",t);n.$$proto,n.$$scope}return r}(t,n.get("Exception")),function(e,$super){function t(){}{var n=t=$(e,$super,"Interrupt",t);n.$$proto,n.$$scope}return r}(t,n.get("Exception")),function(e,$super){function t(){}{var n=t=$(e,$super,"StandardError",t);n.$$proto,n.$$scope}return r}(t,n.get("Exception")),function(e,$super){function t(){}{var n=t=$(e,$super,"NameError",t);n.$$proto,n.$$scope}return r}(t,n.get("StandardError")),function(e,$super){function t(){}{var n=t=$(e,$super,"NoMethodError",t);n.$$proto,n.$$scope}return r}(t,n.get("NameError")),function(e,$super){function t(){}{var n=t=$(e,$super,"RuntimeError",t);n.$$proto,n.$$scope}return r}(t,n.get("StandardError")),function(e,$super){function t(){}{var n=t=$(e,$super,"LocalJumpError",t);n.$$proto,n.$$scope}return r}(t,n.get("StandardError")),function(e,$super){function t(){}{var n=t=$(e,$super,"TypeError",t);n.$$proto,n.$$scope}return r}(t,n.get("StandardError")),function(e,$super){function t(){}{var n=t=$(e,$super,"ArgumentError",t);n.$$proto,n.$$scope}return r}(t,n.get("StandardError")),function(e,$super){function t(){}{var n=t=$(e,$super,"IndexError",t);n.$$proto,n.$$scope}return r}(t,n.get("StandardError")),function(e,$super){function t(){}{var n=t=$(e,$super,"StopIteration",t);n.$$proto,n.$$scope}return r}(t,n.get("IndexError")),function(e,$super){function t(){}{var n=t=$(e,$super,"KeyError",t);n.$$proto,n.$$scope}return r}(t,n.get("IndexError")),function(e,$super){function t(){}{var n=t=$(e,$super,"RangeError",t);n.$$proto,n.$$scope}return r}(t,n.get("StandardError")),function(e,$super){function t(){}{var n=t=$(e,$super,"FloatDomainError",t);n.$$proto,n.$$scope}return r}(t,n.get("RangeError")),function(e,$super){function t(){}{var n=t=$(e,$super,"IOError",t);n.$$proto,n.$$scope}return r}(t,n.get("StandardError")),function(e,$super){function t(){}{var n=t=$(e,$super,"SystemCallError",t);n.$$proto,n.$$scope}return r}(t,n.get("StandardError")),function(t){var n=o(t,"Errno"),a=(n.$$proto,n.$$scope);!function(t,$super){function n(){}{var o,a=n=$(t,$super,"EINVAL",n);a.$$proto,a.$$scope}return e.defs(a,"$new",o=function(){{var t=this;o.$$p}return o.$$p=null,e.find_super_dispatcher(t,"new",o,null,n).apply(t,["Invalid argument"])}),r&&"new"}(n,a.get("SystemCallError"))}(t)},Opal.modules["corelib/regexp"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.klass,o=e.gvars;return e.add_stubs(["$nil?","$[]","$match","$begin","$coerce_to","$new","$call","$=~"]),function(t,$super){function a(){}var i,s=a=$(t,$super,"Regexp",a),c=s.$$proto,u=s.$$scope;return c.$$is_regexp=!0,function(e){e.$$scope,e.$$proto;return e.$$proto.$escape=function(e){return e.replace(/([-[\]\/{}()*+?.^$\\| ])/g,"\\$1").replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r").replace(/[\f]/g,"\\f").replace(/[\t]/g,"\\t")},e.$$proto.$last_match=function(e){var t;return null==o["~"]&&(o["~"]=n),null==e&&(e=n),(t=e["$nil?"]())===n||t.$$is_boolean&&1!=t?o["~"]["$[]"](e):o["~"]},e.$$proto.$quote=e.$$proto.$escape,e.$$proto.$union=function(e){return e=r.call(arguments,0),new RegExp(e.join(""))},e.$$proto.$new=function(e,t){return new RegExp(e,t)},n&&"new"}(s.$singleton_class()),c["$=="]=function(e){var t=this;return e.constructor==RegExp&&t.toString()===e.toString()},c["$==="]=function(e){var t=this;return t.$match(e)!==n},c["$=~"]=function(e){var t,r=this;return null==o["~"]&&(o["~"]=n),t=r.$match(e),t!==!1&&t!==n?o["~"].$begin(0):t},e.defn(s,"$eql?",c["$=="]),c.$inspect=function(){var e=this;return e.toString()},c.$match=i=function(e,t){var r=this,$=i.$$p,a=$||n;if(null==o["~"]&&(o["~"]=n),i.$$p=null,t=void 0===t?0:u.get("Opal").$coerce_to(t,u.get("Integer"),"to_int"),e===n)return o["~"]=n;if(e=u.get("Opal").$coerce_to(e,u.get("String"),"to_str"),0>t&&(t+=e.length,0>t))return o["~"]=n;for(var s,c=new RegExp(r.source,"gm"+(r.ignoreCase?"i":""));;){if(s=c.exec(e),null===s)return o["~"]=n;if(s.index>=t)return o["~"]=u.get("MatchData").$new(c,s),a===n?o["~"]:a.$call(o["~"]);c.lastIndex=s.index+1}},c["$~"]=function(){var e=this;return null==o._&&(o._=n),e["$=~"](o._)},c.$source=function(){var e=this;return e.source},e.defn(s,"$to_s",c.$source)}(t,null)},Opal.modules["corelib/comparable"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}e.dynamic_require_severity="warning";var r=e.top,$=e.nil,o=(e.breaker,e.slice,e.module);return e.add_stubs(["$===","$equal?","$<=>","$normalize","$raise","$class"]),function(r){var a=o(r,"Comparable"),i=(a.$$proto,a.$$scope);e.defs(a,"$normalize",function(e){var r;return(r=i.get("Integer")["$==="](e))===$||r.$$is_boolean&&1!=r?t(e,0)?1:n(e,0)?-1:0:e}),e.defn(a,"$==",function(t){var n,r=this,o=$;try{return(n=r["$equal?"](t))===$||n.$$is_boolean&&1!=n?(n=o=r["$<=>"](t))===$||n.$$is_boolean&&1!=n?!1:0==i.get("Comparable").$normalize(o):!0}catch(a){if(e.rescue(a,[i.get("StandardError")]))return!1;throw a}}),e.defn(a,"$>",function(e){var t,n=this,r=$;return((t=r=n["$<=>"](e))===$||t.$$is_boolean&&1!=t)&&n.$raise(i.get("ArgumentError"),"comparison of "+n.$class()+" with "+e.$class()+" failed"),i.get("Comparable").$normalize(r)>0}),e.defn(a,"$>=",function(e){var t,n=this,r=$;return((t=r=n["$<=>"](e))===$||t.$$is_boolean&&1!=t)&&n.$raise(i.get("ArgumentError"),"comparison of "+n.$class()+" with "+e.$class()+" failed"),i.get("Comparable").$normalize(r)>=0}),e.defn(a,"$<",function(e){var t,n=this,r=$;return((t=r=n["$<=>"](e))===$||t.$$is_boolean&&1!=t)&&n.$raise(i.get("ArgumentError"),"comparison of "+n.$class()+" with "+e.$class()+" failed"),i.get("Comparable").$normalize(r)<0}),e.defn(a,"$<=",function(e){var t,n=this,r=$;return((t=r=n["$<=>"](e))===$||t.$$is_boolean&&1!=t)&&n.$raise(i.get("ArgumentError"),"comparison of "+n.$class()+" with "+e.$class()+" failed"),i.get("Comparable").$normalize(r)<=0}),e.defn(a,"$between?",function(e,r){var $=this;return n($,e)?!1:t($,r)?!1:!0})}(r)},Opal.modules["corelib/enumerable"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=e.breaker,$=e.slice,o=e.module;return e.add_stubs(["$raise","$enum_for","$flatten","$map","$==","$destructure","$nil?","$coerce_to!","$coerce_to","$===","$new","$<<","$[]","$[]=","$inspect","$__send__","$yield","$enumerator_size","$respond_to?","$size","$private","$compare","$<=>","$dup","$to_a","$lambda","$sort","$call","$first","$zip"]),function(t){var a,i,s,c,u,l,_,p,d,f,h,m,g,v,b,y,x,w,k,E,S,R,O,A,M,q,C,I,T,j,z,N,F,P,B,D=o(t,"Enumerable"),H=D.$$proto,L=D.$$scope;e.defn(D,"$all?",a=function(){var t,$=this,o=a.$$p,i=o||n;a.$$p=null;var s=!0;return $.$each.$$p=i!==n?function(){var $=e.yieldX(i,arguments);return $===r?(s=r.$v,r):(t=$)===n||t.$$is_boolean&&0==t?(s=!1,r):void 0}:function(e){return 1==arguments.length&&((t=e)===n||t.$$is_boolean&&0==t)?(s=!1,r):void 0},$.$each(),s}),e.defn(D,"$any?",i=function(){var t,$=this,o=i.$$p,a=o||n;i.$$p=null;var s=!1;return $.$each.$$p=a!==n?function(){var $=e.yieldX(a,arguments);return $===r?(s=r.$v,r):(t=$)===n||t.$$is_boolean&&1!=t?void 0:(s=!0,r)}:function(e){return 1==arguments.length&&((t=e)===n||t.$$is_boolean&&1!=t)?void 0:(s=!0,r)},$.$each(),s}),e.defn(D,"$chunk",s=function(){{var e=this;s.$$p}return s.$$p=null,e.$raise(L.get("NotImplementedError"))}),e.defn(D,"$collect",c=function(){var t=this,$=c.$$p,o=$||n;if(c.$$p=null,o===n)return t.$enum_for("collect");var a=[];return t.$each.$$p=function(){var t=e.yieldX(o,arguments);return t===r?(a=r.$v,r):void a.push(t)},t.$each(),a}),e.defn(D,"$collect_concat",u=function(){var t,$,o,a=this,i=u.$$p,s=i||n;return u.$$p=null,s===n?a.$enum_for("collect_concat"):(t=($=a).$map,t.$$p=(o=function(t){{var $;o.$$s||this}return null==t&&(t=n),$=e.yield1(s,t),$===r?$:$},o.$$s=a,o),t).call($).$flatten(1)}),e.defn(D,"$count",l=function(t){var $,o=this,a=l.$$p,i=a||n;l.$$p=null;var s=0;return null!=t?i=function(){return L.get("Opal").$destructure(arguments)["$=="](t)}:i===n&&(i=function(){return!0}),o.$each.$$p=function(){var t=e.yieldX(i,arguments);return t===r?(s=r.$v,r):void(($=t)===n||$.$$is_boolean&&1!=$||s++)},o.$each(),s}),e.defn(D,"$cycle",_=function(t){var $,o=this,a=_.$$p,i=a||n;if(null==t&&(t=n),_.$$p=null,i===!1||i===n)return o.$enum_for("cycle",t);if(($=t["$nil?"]())===n||$.$$is_boolean&&1!=$){if(t=L.get("Opal")["$coerce_to!"](t,L.get("Integer"),"to_int"),($=0>=t)!==n&&(!$.$$is_boolean||1==$))return n}else;var s,c=[];if(o.$each.$$p=function(){var t=L.get("Opal").$destructure(arguments),n=e.yield1(i,t);return n===r?(s=r.$v,r):void c.push(t)},o.$each(),void 0!==s)return s;if(0===c.length)return n;if(($=t["$nil?"]())===n||$.$$is_boolean&&1!=$)for(;t>1;){for(var u=0,l=c.length;l>u;u++){var p=e.yield1(i,c[u]);if(p===r)return r.$v}t--}else for(;;)for(var u=0,l=c.length;l>u;u++){var p=e.yield1(i,c[u]);if(p===r)return r.$v}}),e.defn(D,"$detect",p=function(t){var $,o=this,a=p.$$p,i=a||n;if(p.$$p=null,i===n)return o.$enum_for("detect",t);var s=void 0;return o.$each.$$p=function(){var t=L.get("Opal").$destructure(arguments),o=e.yield1(i,t);return o===r?(s=r.$v,r):($=o)===n||$.$$is_boolean&&1!=$?void 0:(s=t,r)},o.$each(),void 0===s&&void 0!==t&&(s="function"==typeof t?t():t),void 0===s?n:s}),e.defn(D,"$drop",function(e){var t,r=this;e=L.get("Opal").$coerce_to(e,L.get("Integer"),"to_int"),(t=0>e)===n||t.$$is_boolean&&1!=t||r.$raise(L.get("ArgumentError"),"attempt to drop negative size");var $=[],o=0;return r.$each.$$p=function(){o>=e&&$.push(L.get("Opal").$destructure(arguments)),o++},r.$each(),$}),e.defn(D,"$drop_while",d=function(){var t,$=this,o=d.$$p,a=o||n;if(d.$$p=null,a===n)return $.$enum_for("drop_while");var i=[],s=!0;return $.$each.$$p=function(){var $=L.get("Opal").$destructure(arguments);if(s){var o=e.yield1(a,$);if(o===r)return i=r.$v,r;((t=o)===n||t.$$is_boolean&&0==t)&&(s=!1,i.push($))}else i.push($)},$.$each(),i}),e.defn(D,"$each_cons",f=function(){{var e=this;f.$$p}return f.$$p=null,e.$raise(L.get("NotImplementedError"))}),e.defn(D,"$each_entry",h=function(){{var e=this;h.$$p}return h.$$p=null,e.$raise(L.get("NotImplementedError"))}),e.defn(D,"$each_slice",m=function(t){var $,o=this,a=m.$$p,i=a||n;if(m.$$p=null,t=L.get("Opal").$coerce_to(t,L.get("Integer"),"to_int"),($=0>=t)===n||$.$$is_boolean&&1!=$||o.$raise(L.get("ArgumentError"),"invalid slice size"),i===n)return o.$enum_for("each_slice",t);var s,c=[];return o.$each.$$p=function(){var n=L.get("Opal").$destructure(arguments);if(c.push(n),c.length===t){if(e.yield1(i,c)===r)return s=r.$v,r;c=[]}},o.$each(),void 0!==s?s:c.length>0&&e.yield1(i,c)===r?r.$v:n}),e.defn(D,"$each_with_index",g=function(e){var t,o=this,a=g.$$p,i=a||n;if(e=$.call(arguments,0),g.$$p=null,i===n)return(t=o).$enum_for.apply(t,["each_with_index"].concat(e));var s,c=0;return o.$each.$$p=function(){var e=L.get("Opal").$destructure(arguments),t=i(e,c);return t===r?(s=r.$v,r):void c++},o.$each.apply(o,e),void 0!==s?s:o}),e.defn(D,"$each_with_object",v=function(e){var t=this,$=v.$$p,o=$||n;if(v.$$p=null,o===n)return t.$enum_for("each_with_object",e);var a;return t.$each.$$p=function(){var t=L.get("Opal").$destructure(arguments),n=o(t,e);return n===r?(a=r.$v,r):void 0},t.$each(),void 0!==a?a:e}),e.defn(D,"$entries",function(e){var t=this;e=$.call(arguments,0);var n=[];return t.$each.$$p=function(){n.push(L.get("Opal").$destructure(arguments))},t.$each.apply(t,e),n}),e.defn(D,"$find",H.$detect),e.defn(D,"$find_all",b=function(){var t,$=this,o=b.$$p,a=o||n;if(b.$$p=null,a===n)return $.$enum_for("find_all");var i=[];return $.$each.$$p=function(){var $=L.get("Opal").$destructure(arguments),o=e.yield1(a,$);return o===r?(i=r.$v,r):void((t=o)===n||t.$$is_boolean&&1!=t||i.push($))},$.$each(),i}),e.defn(D,"$find_index",y=function(t){var $,o=this,a=y.$$p,i=a||n;if(y.$$p=null,($=void 0===t&&i===n)!==n&&(!$.$$is_boolean||1==$))return o.$enum_for("find_index");var s=n,c=0;return null!=t?o.$each.$$p=function(){var e=L.get("Opal").$destructure(arguments);return e["$=="](t)?(s=c,r):void(c+=1)}:i!==n&&(o.$each.$$p=function(){var t=e.yieldX(i,arguments);return t===r?(s=r.$v,r):($=t)===n||$.$$is_boolean&&1!=$?void(c+=1):(s=c,r)}),o.$each(),s}),e.defn(D,"$first",function(e){var t,$=this,o=n;if((t=void 0===e)===n||t.$$is_boolean&&1!=t){if(o=[],e=L.get("Opal").$coerce_to(e,L.get("Integer"),"to_int"),(t=0>e)===n||t.$$is_boolean&&1!=t||$.$raise(L.get("ArgumentError"),"attempt to take negative size"),(t=0==e)!==n&&(!t.$$is_boolean||1==t))return[];var a=0,e=L.get("Opal").$coerce_to(e,L.get("Integer"),"to_int");$.$each.$$p=function(){return o.push(L.get("Opal").$destructure(arguments)),e<=++a?r:void 0},$.$each()}else o=n,$.$each.$$p=function(){return o=L.get("Opal").$destructure(arguments),r},$.$each();return o}),e.defn(D,"$flat_map",H.$collect_concat),e.defn(D,"$grep",x=function(t){var $,o=this,a=x.$$p,i=a||n;x.$$p=null;var s=[];return o.$each.$$p=i!==n?function(){var o=L.get("Opal").$destructure(arguments),a=t["$==="](o);if(($=a)!==n&&(!$.$$is_boolean||1==$)){if(a=e.yield1(i,o),a===r)return s=r.$v,r;s.push(a)}}:function(){var e=L.get("Opal").$destructure(arguments),r=t["$==="](e);($=r)===n||$.$$is_boolean&&1!=$||s.push(e)},o.$each(),s}),e.defn(D,"$group_by",w=function(){var t,$,o,a=this,i=w.$$p,s=i||n,c=n;if(w.$$p=null,s===n)return a.$enum_for("group_by");c=L.get("Hash").$new();var u;return a.$each.$$p=function(){var a=L.get("Opal").$destructure(arguments),i=e.yield1(s,a);return i===r?(u=r.$v,r):void(t=i,$=c,(o=$["$[]"](t))!==!1&&o!==n?o:$["$[]="](t,[]))["$<<"](a)},a.$each(),void 0!==u?u:c}),e.defn(D,"$include?",function(e){var t=this,n=!1;return t.$each.$$p=function(){var t=L.get("Opal").$destructure(arguments);return t["$=="](e)?(n=!0,r):void 0},t.$each(),n}),e.defn(D,"$inject",k=function(t,$){var o=this,a=k.$$p,i=a||n;k.$$p=null;var s=t;return i!==n&&void 0===$?o.$each.$$p=function(){var t=L.get("Opal").$destructure(arguments);return void 0===s?void(s=t):(t=e.yieldX(i,[s,t]),t===r?(s=r.$v,r):void(s=t))}:(void 0===$&&(L.get("Symbol")["$==="](t)||o.$raise(L.get("TypeError"),""+t.$inspect()+" is not a Symbol"),$=t,s=void 0),o.$each.$$p=function(){var e=L.get("Opal").$destructure(arguments);return void 0===s?void(s=e):void(s=s.$__send__($,e))}),o.$each(),void 0==s?n:s}),e.defn(D,"$lazy",function(){var e,t,r,o=this;return(e=(t=L.get("Enumerator").$$scope.get("Lazy")).$new,e.$$p=(r=function(e,t){{var o;r.$$s||this}return null==e&&(e=n),t=$.call(arguments,1),(o=e).$yield.apply(o,[].concat(t))},r.$$s=o,r),e).call(t,o,o.$enumerator_size())}),e.defn(D,"$enumerator_size",function(){var e,t=this;return(e=t["$respond_to?"]("size"))===n||e.$$is_boolean&&1!=e?n:t.$size()}),D.$private("enumerator_size"),e.defn(D,"$map",H.$collect),e.defn(D,"$max",E=function(){var e=this,t=E.$$p,$=t||n;E.$$p=null;var o;return e.$each.$$p=$!==n?function(){var t=L.get("Opal").$destructure(arguments);if(void 0===o)return void(o=t);var a=$(t,o);return a===r?(o=r.$v,r):(a===n&&e.$raise(L.get("ArgumentError"),"comparison failed"),void(a>0&&(o=t)))}:function(){var e=L.get("Opal").$destructure(arguments);return void 0===o?void(o=e):void(L.get("Opal").$compare(e,o)>0&&(o=e))},e.$each(),void 0===o?n:o}),e.defn(D,"$max_by",S=function(){var t=this,$=S.$$p,o=$||n;if(S.$$p=null,o===!1||o===n)return t.$enum_for("max_by");var a,i;return t.$each.$$p=function(){var t=L.get("Opal").$destructure(arguments),n=e.yield1(o,t);return void 0===a?(a=t,void(i=n)):n===r?(a=r.$v,r):void(n["$<=>"](i)>0&&(a=t,i=n))},t.$each(),void 0===a?n:a}),e.defn(D,"$member?",H["$include?"]),e.defn(D,"$min",R=function(){var e=this,t=R.$$p,$=t||n;R.$$p=null;var o;return e.$each.$$p=$!==n?function(){var t=L.get("Opal").$destructure(arguments);if(void 0===o)return void(o=t);var a=$(t,o);return a===r?(o=r.$v,r):(a===n&&e.$raise(L.get("ArgumentError"),"comparison failed"),void(0>a&&(o=t)))}:function(){var e=L.get("Opal").$destructure(arguments);return void 0===o?void(o=e):void(L.get("Opal").$compare(e,o)<0&&(o=e))},e.$each(),void 0===o?n:o}),e.defn(D,"$min_by",O=function(){var t=this,$=O.$$p,o=$||n;if(O.$$p=null,o===!1||o===n)return t.$enum_for("min_by");var a,i;return t.$each.$$p=function(){var t=L.get("Opal").$destructure(arguments),n=e.yield1(o,t);return void 0===a?(a=t,void(i=n)):n===r?(a=r.$v,r):void(n["$<=>"](i)<0&&(a=t,i=n))},t.$each(),void 0===a?n:a}),e.defn(D,"$minmax",A=function(){{var e=this;A.$$p}return A.$$p=null,e.$raise(L.get("NotImplementedError"))}),e.defn(D,"$minmax_by",M=function(){{var e=this;M.$$p}return M.$$p=null,e.$raise(L.get("NotImplementedError"))}),e.defn(D,"$none?",q=function(){var t,$=this,o=q.$$p,a=o||n;q.$$p=null;var i=!0;return $.$each.$$p=a!==n?function(){var $=e.yieldX(a,arguments);return $===r?(i=r.$v,r):(t=$)===n||t.$$is_boolean&&1!=t?void 0:(i=!1,r)}:function(){var e=L.get("Opal").$destructure(arguments);return(t=e)===n||t.$$is_boolean&&1!=t?void 0:(i=!1,r)},$.$each(),i}),e.defn(D,"$one?",C=function(){var t,$=this,o=C.$$p,a=o||n;C.$$p=null;var i=!1;return $.$each.$$p=a!==n?function(){var $=e.yieldX(a,arguments);if($===r)return i=r.$v,r;if((t=$)!==n&&(!t.$$is_boolean||1==t)){if(i===!0)return i=!1,r;i=!0}}:function(){var e=L.get("Opal").$destructure(arguments);if((t=e)!==n&&(!t.$$is_boolean||1==t)){if(i===!0)return i=!1,r;i=!0}},$.$each(),i}),e.defn(D,"$partition",I=function(){var t,$=this,o=I.$$p,a=o||n;if(I.$$p=null,a===n)return $.$enum_for("partition");var i=[],s=[];return $.$each.$$p=function(){var $=L.get("Opal").$destructure(arguments),o=e.yield1(a,$);return o===r?(result=r.$v,r):void((t=o)===n||t.$$is_boolean&&1!=t?s.push($):i.push($))},$.$each(),[i,s]}),e.defn(D,"$reduce",H.$inject),e.defn(D,"$reject",T=function(){var t,$=this,o=T.$$p,a=o||n;if(T.$$p=null,a===n)return $.$enum_for("reject");var i=[];return $.$each.$$p=function(){var $=L.get("Opal").$destructure(arguments),o=e.yield1(a,$);return o===r?(i=r.$v,r):void(((t=o)===n||t.$$is_boolean&&0==t)&&i.push($))},$.$each(),i}),e.defn(D,"$reverse_each",j=function(){var t=this,r=j.$$p,$=r||n;if(j.$$p=null,$===n)return t.$enum_for("reverse_each");var o=[];t.$each.$$p=function(){o.push(arguments)},t.$each();for(var a=o.length-1;a>=0;a--)e.yieldX($,o[a]);return o}),e.defn(D,"$select",H.$find_all),e.defn(D,"$slice_before",z=function(t){var r,$,o,a=this,i=z.$$p,s=i||n;return z.$$p=null,(r=void 0===t&&s===n||arguments.length>1)===n||r.$$is_boolean&&1!=r||a.$raise(L.get("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 1)"),(r=($=L.get("Enumerator")).$new,r.$$p=(o=function(r){var $,a=o.$$s||this;null==r&&(r=n);var i=[];a.$each.$$p=s!==n?void 0===t?function(){var t=L.get("Opal").$destructure(arguments),o=e.yield1(s,t);($=o)!==n&&(!$.$$is_boolean||1==$)&&i.length>0&&(r["$<<"](i),i=[]),i.push(t)}:function(){var e=L.get("Opal").$destructure(arguments),o=s(e,t.$dup());($=o)!==n&&(!$.$$is_boolean||1==$)&&i.length>0&&(r["$<<"](i),i=[]),i.push(e)}:function(){var e=L.get("Opal").$destructure(arguments),o=t["$==="](e);($=o)!==n&&(!$.$$is_boolean||1==$)&&i.length>0&&(r["$<<"](i),i=[]),i.push(e)},a.$each(),i.length>0&&r["$<<"](i)},o.$$s=a,o),r).call($)}),e.defn(D,"$sort",N=function(){var e,t,r,$=this,o=N.$$p,a=o||n,i=n;return N.$$p=null,i=$.$to_a(),a!==n||(a=(e=(t=$).$lambda,e.$$p=(r=function(e,t){r.$$s||this;return null==e&&(e=n),null==t&&(t=n),e["$<=>"](t)},r.$$s=$,r),e).call(t)),i.sort(a)}),e.defn(D,"$sort_by",F=function(){var e,t,r,$,o,a,i,s,c,u=this,l=F.$$p,_=l||n;return F.$$p=null,_===n?u.$enum_for("sort_by"):(e=(t=($=(o=(i=(s=u).$map,i.$$p=(c=function(){c.$$s||this;return arg=L.get("Opal").$destructure(arguments),[_.$call(arg),arg]},c.$$s=u,c),i).call(s)).$sort,$.$$p=(a=function(e,t){a.$$s||this;return null==e&&(e=n),null==t&&(t=n),e["$[]"](0)["$<=>"](t["$[]"](0))},a.$$s=u,a),$).call(o)).$map,e.$$p=(r=function(e){r.$$s||this;return null==e&&(e=n),e[1]},r.$$s=u,r),e).call(t)}),e.defn(D,"$take",function(e){var t=this;return t.$first(e)}),e.defn(D,"$take_while",P=function(){var t,$=this,o=P.$$p,a=o||n;if(P.$$p=null,a===!1||a===n)return $.$enum_for("take_while");var i=[];return $.$each.$$p=function(){var $=L.get("Opal").$destructure(arguments),o=e.yield1(a,$);return o===r?(i=r.$v,r):(t=o)===n||t.$$is_boolean&&0==t?r:void i.push($)},$.$each(),i}),e.defn(D,"$to_a",H.$entries),e.defn(D,"$zip",B=function(e){{var t,n=this;B.$$p}return e=$.call(arguments,0),B.$$p=null,(t=n.$to_a()).$zip.apply(t,[].concat(e))})}(t)},Opal.modules["corelib/enumerator"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}e.dynamic_require_severity="warning";var r=e.top,$=e.nil,o=e.breaker,a=e.slice,i=e.klass;return e.add_stubs(["$require","$include","$allocate","$new","$to_proc","$coerce_to","$nil?","$empty?","$class","$__send__","$===","$call","$enum_for","$destructure","$inspect","$[]","$raise","$yield","$each","$enumerator_size","$respond_to?","$try_convert","$for"]),r.$require("corelib/enumerable"),function(r,$super){function s(){}var c,u,l,_,p=s=i(r,$super,"Enumerator",s),d=p.$$proto,f=p.$$scope;return d.size=d.args=d.object=d.method=$,p.$include(f.get("Enumerable")),e.defs(p,"$for",c=function(e,t,n){var r=this,o=c.$$p,i=o||$;n=a.call(arguments,2),null==t&&(t="each"),c.$$p=null;var s=r.$allocate();return s.object=e,s.size=i,s.method=t,s.args=n,s}),d.$initialize=u=function(){var e,t,n=this,r=u.$$p,o=r||$;return u.$$p=null,o!==!1&&o!==$?(n.object=(e=(t=f.get("Generator")).$new,e.$$p=o.$to_proc(),e).call(t),n.method="each",n.args=[],n.size=arguments[0]||$,(e=n.size)===$||e.$$is_boolean&&1!=e?$:n.size=f.get("Opal").$coerce_to(n.size,f.get("Integer"),"to_int")):(n.object=arguments[0],n.method=arguments[1]||"each",n.args=a.call(arguments,2),n.size=$)},d.$each=l=function(e){var n,r,o,i=this,s=l.$$p,c=s||$;return e=a.call(arguments,0),l.$$p=null,r=c["$nil?"](),(n=r!==!1&&r!==$?e["$empty?"]():r)===$||n.$$is_boolean&&1!=n?(e=t(i.args,e),(n=c["$nil?"]())===$||n.$$is_boolean&&1!=n?(r=(o=i.object).$__send__,r.$$p=c.$to_proc(),r).apply(o,[i.method].concat(e)):(n=i.$class()).$new.apply(n,[i.object,i.method].concat(e))):i},d.$size=function(){var e,t=this;return(e=f.get("Proc")["$==="](t.size))===$||e.$$is_boolean&&1!=e?t.size:(e=t.size).$call.apply(e,[].concat(t.args))},d.$with_index=_=function(e){var t=this,n=_.$$p,r=n||$;if(null==e&&(e=0),_.$$p=null,e=e!==!1&&e!==$?f.get("Opal").$coerce_to(e,f.get("Integer"),"to_int"):0,r===!1||r===$)return t.$enum_for("with_index",e);var a,i=0;return t.$each.$$p=function(){var e=f.get("Opal").$destructure(arguments),t=r(e,i);return t===o?(a=o.$v,o):void i++},t.$each(),void 0!==a?a:$},e.defn(p,"$with_object",d.$each_with_object),d.$inspect=function(){var e,n=this,r=$;return r="#<"+n.$class()+": "+n.object.$inspect()+":"+n.method,((e=n.args["$empty?"]())===$||e.$$is_boolean&&1!=e)&&(r=t(r,"("+n.args.$inspect()["$[]"](f.get("Range").$new(1,-2))+")")),t(r,">")},function(t,$super){function n(){}var r,s,c=n=i(t,$super,"Generator",n),u=c.$$proto,l=c.$$scope;return u.block=$,c.$include(l.get("Enumerable")),u.$initialize=r=function(){var e=this,t=r.$$p,n=t||$;return r.$$p=null,n!==!1&&n!==$||e.$raise(l.get("LocalJumpError"),"no block given"),e.block=n
},u.$each=s=function(t){var n,r,i=this,c=s.$$p,u=c||$,_=$;t=a.call(arguments,0),s.$$p=null,_=(n=(r=l.get("Yielder")).$new,n.$$p=u.$to_proc(),n).call(r);try{if(t.unshift(_),e.yieldX(i.block,t)===o)return o.$v}catch(p){if(p===o)return o.$v;throw p}return i},$&&"each"}(p,null),function(t,$super){function n(){}{var r,s=n=i(t,$super,"Yielder",n),c=s.$$proto;s.$$scope}return c.block=$,c.$initialize=r=function(){var e=this,t=r.$$p,n=t||$;return r.$$p=null,e.block=n},c.$yield=function(t){var n=this;t=a.call(arguments,0);var r=e.yieldX(n.block,t);if(r===o)throw o;return r},c["$<<"]=function(e){var t,n=this;return e=a.call(arguments,0),(t=n).$yield.apply(t,[].concat(e)),n},$&&"<<"}(p,null),function(r,$super){function s(){}var c,u,l,_,p,d,f,h,m,g=s=i(r,$super,"Lazy",s),v=g.$$proto,b=g.$$scope;return v.enumerator=$,function(e,$super){function t(){}{var n=t=i(e,$super,"StopLazyError",t);n.$$proto,n.$$scope}return $}(g,b.get("Exception")),v.$initialize=c=function(t,n){var r,i=this,s=c.$$p,u=s||$;return null==n&&(n=$),c.$$p=null,u!==$||i.$raise(b.get("ArgumentError"),"tried to call lazy new without a block"),i.enumerator=t,e.find_super_dispatcher(i,"initialize",c,(r=function(n,i){var s,c,l,_=r.$$s||this;null==n&&(n=$),i=a.call(arguments,1);try{return(s=(c=t).$each,s.$$p=(l=function(t){l.$$s||this;return t=a.call(arguments,0),t.unshift(n),e.yieldX(u,t)===o?o:void 0},l.$$s=_,l),s).apply(c,[].concat(i))}catch(p){if(e.rescue(p,[b.get("Exception")]))return $;throw p}},r.$$s=i,r)).apply(i,[n])},e.defn(g,"$force",v.$to_a),v.$lazy=function(){var e=this;return e},v.$collect=u=function(){var t,n,r,i=this,s=u.$$p,c=s||$;return u.$$p=null,c!==!1&&c!==$||i.$raise(b.get("ArgumentError"),"tried to call lazy map without a block"),(t=(n=b.get("Lazy")).$new,t.$$p=(r=function(t,n){r.$$s||this;null==t&&(t=$),n=a.call(arguments,1);var i=e.yieldX(c,n);return i===o?o:void t.$yield(i)},r.$$s=i,r),t).call(n,i,i.$enumerator_size())},v.$collect_concat=l=function(){var t,n,r,i=this,s=l.$$p,c=s||$;return l.$$p=null,c!==!1&&c!==$||i.$raise(b.get("ArgumentError"),"tried to call lazy map without a block"),(t=(n=b.get("Lazy")).$new,t.$$p=(r=function(t,n){var i,s,u,l,_,p=r.$$s||this;null==t&&(t=$),n=a.call(arguments,1);var d=e.yieldX(c,n);if(d===o)return o;if(d["$respond_to?"]("force")&&d["$respond_to?"]("each"))(i=(s=d).$each,i.$$p=(u=function(e){u.$$s||this;return null==e&&(e=$),t.$yield(e)},u.$$s=p,u),i).call(s);else{var f=b.get("Opal").$try_convert(d,b.get("Array"),"to_ary");f===$?t.$yield(d):(i=(l=d).$each,i.$$p=(_=function(e){_.$$s||this;return null==e&&(e=$),t.$yield(e)},_.$$s=p,_),i).call(l)}},r.$$s=i,r),t).call(n,i,$)},v.$drop=function(e){var r,o,i,s=this,c=$,u=$,l=$;return e=b.get("Opal").$coerce_to(e,b.get("Integer"),"to_int"),n(e,0)&&s.$raise(b.get("ArgumentError"),"attempt to drop negative size"),c=s.$enumerator_size(),u=function(){return(r=b.get("Integer")["$==="](c))===$||r.$$is_boolean&&1!=r?c:n(e,c)?e:c}(),l=0,(r=(o=b.get("Lazy")).$new,r.$$p=(i=function(r,o){{var s;i.$$s||this}return null==r&&(r=$),o=a.call(arguments,1),n(l,e)?l=t(l,1):(s=r).$yield.apply(s,[].concat(o))},i.$$s=s,i),r).call(o,s,u)},v.$drop_while=_=function(){var t,n,r,i=this,s=_.$$p,c=s||$,u=$;return _.$$p=null,c!==!1&&c!==$||i.$raise(b.get("ArgumentError"),"tried to call lazy drop_while without a block"),u=!0,(t=(n=b.get("Lazy")).$new,t.$$p=(r=function(t,n){{var i,s;r.$$s||this}if(null==t&&(t=$),n=a.call(arguments,1),u===!1||u===$)return(s=t).$yield.apply(s,[].concat(n));var l=e.yieldX(c,n);return l===o?o:void(((i=l)===$||i.$$is_boolean&&0==i)&&(u=!1,(i=t).$yield.apply(i,[].concat(n))))},r.$$s=i,r),t).call(n,i,$)},v.$enum_for=p=function(e,t){var n,r,o=this,i=p.$$p,s=i||$;return t=a.call(arguments,1),null==e&&(e="each"),p.$$p=null,(n=(r=o.$class()).$for,n.$$p=s.$to_proc(),n).apply(r,[o,e].concat(t))},v.$find_all=d=function(){var t,n,r,i=this,s=d.$$p,c=s||$;return d.$$p=null,c!==!1&&c!==$||i.$raise(b.get("ArgumentError"),"tried to call lazy select without a block"),(t=(n=b.get("Lazy")).$new,t.$$p=(r=function(t,n){{var i;r.$$s||this}null==t&&(t=$),n=a.call(arguments,1);var s=e.yieldX(c,n);return s===o?o:void((i=s)===$||i.$$is_boolean&&1!=i||(i=t).$yield.apply(i,[].concat(n)))},r.$$s=i,r),t).call(n,i,$)},e.defn(g,"$flat_map",v.$collect_concat),v.$grep=f=function(t){var n,r,i,s,c,u=this,l=f.$$p,_=l||$;return f.$$p=null,_!==!1&&_!==$?(n=(r=b.get("Lazy")).$new,n.$$p=(i=function(n,r){{var s;i.$$s||this}null==n&&(n=$),r=a.call(arguments,1);var c=b.get("Opal").$destructure(r),u=t["$==="](c);if((s=u)!==$&&(!s.$$is_boolean||1==s)){if(u=e.yield1(_,c),u===o)return o;n.$yield(e.yield1(_,c))}},i.$$s=u,i),n).call(r,u,$):(n=(s=b.get("Lazy")).$new,n.$$p=(c=function(e,n){{var r;c.$$s||this}null==e&&(e=$),n=a.call(arguments,1);var o=b.get("Opal").$destructure(n),i=t["$==="](o);(r=i)===$||r.$$is_boolean&&1!=r||e.$yield(o)},c.$$s=u,c),n).call(s,u,$)},e.defn(g,"$map",v.$collect),e.defn(g,"$select",v.$find_all),v.$reject=h=function(){var t,n,r,i=this,s=h.$$p,c=s||$;return h.$$p=null,c!==!1&&c!==$||i.$raise(b.get("ArgumentError"),"tried to call lazy reject without a block"),(t=(n=b.get("Lazy")).$new,t.$$p=(r=function(t,n){{var i;r.$$s||this}null==t&&(t=$),n=a.call(arguments,1);var s=e.yieldX(c,n);return s===o?o:void(((i=s)===$||i.$$is_boolean&&0==i)&&(i=t).$yield.apply(i,[].concat(n)))},r.$$s=i,r),t).call(n,i,$)},v.$take=function(e){var r,o,i,s=this,c=$,u=$,l=$;return e=b.get("Opal").$coerce_to(e,b.get("Integer"),"to_int"),n(e,0)&&s.$raise(b.get("ArgumentError"),"attempt to take negative size"),c=s.$enumerator_size(),u=function(){return(r=b.get("Integer")["$==="](c))===$||r.$$is_boolean&&1!=r?c:n(e,c)?e:c}(),l=0,(r=(o=b.get("Lazy")).$new,r.$$p=(i=function(r,o){var s,c=i.$$s||this;return null==r&&(r=$),o=a.call(arguments,1),n(l,e)?((s=r).$yield.apply(s,[].concat(o)),l=t(l,1)):c.$raise(b.get("StopLazyError"))},i.$$s=s,i),r).call(o,s,u)},v.$take_while=m=function(){var t,n,r,i=this,s=m.$$p,c=s||$;return m.$$p=null,c!==!1&&c!==$||i.$raise(b.get("ArgumentError"),"tried to call lazy take_while without a block"),(t=(n=b.get("Lazy")).$new,t.$$p=(r=function(t,n){var i,s=r.$$s||this;null==t&&(t=$),n=a.call(arguments,1);var u=e.yieldX(c,n);return u===o?o:void((i=u)===$||i.$$is_boolean&&1!=i?s.$raise(b.get("StopLazyError")):(i=t).$yield.apply(i,[].concat(n)))},r.$$s=i,r),t).call(n,i,$)},e.defn(g,"$to_enum",v.$enum_for),v.$inspect=function(){var e=this;return"#<"+e.$class()+": "+e.enumerator.$inspect()+">"},$&&"inspect"}(p,p)}(r,null)},Opal.modules["corelib/array"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}e.dynamic_require_severity="warning";var r=e.top,$=e.nil,o=e.breaker,a=e.slice,i=e.klass,s=e.gvars,c=e.range;return e.add_stubs(["$require","$include","$new","$class","$raise","$===","$to_a","$respond_to?","$to_ary","$coerce_to","$coerce_to?","$==","$to_str","$clone","$hash","$<=>","$object_id","$inspect","$empty?","$enum_for","$nil?","$coerce_to!","$initialize_clone","$initialize_dup","$replace","$eql?","$length","$begin","$end","$exclude_end?","$flatten","$__id__","$[]","$to_s","$join","$delete_if","$to_proc","$each","$reverse","$!","$map","$rand","$keep_if","$shuffle!","$sort","$times","$[]=","$<<","$at"]),r.$require("corelib/enumerable"),function(r,$super){function u(){}var l,_,p,d,f,h,m,g,v,b,y,x,w,k,E,S,R,O,A,M,q,C,I,T=u=i(r,$super,"Array",u),j=T.$$proto,z=T.$$scope;return j.length=$,T.$include(z.get("Enumerable")),j.$$is_array=!0,e.defs(T,"$[]",function(e){return e=a.call(arguments,0)}),j.$initialize=function(e){var t,n=this;return e=a.call(arguments,0),(t=n.$class()).$new.apply(t,[].concat(e))},e.defs(T,"$new",l=function(e,t){var n,r=this,a=l.$$p,i=a||$;if(null==e&&(e=$),null==t&&(t=$),l.$$p=null,(n=arguments.length>2)===$||n.$$is_boolean&&1!=n||r.$raise(z.get("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..2)"),(n=0===arguments.length)!==$&&(!n.$$is_boolean||1==n))return[];if((n=1===arguments.length)!==$&&(!n.$$is_boolean||1==n)){if(!((n=z.get("Array")["$==="](e))===$||n.$$is_boolean&&1!=n))return e.$to_a();if((n=e["$respond_to?"]("to_ary"))!==$&&(!n.$$is_boolean||1==n))return e.$to_ary()}e=z.get("Opal").$coerce_to(e,z.get("Integer"),"to_int"),(n=0>e)===$||n.$$is_boolean&&1!=n||r.$raise(z.get("ArgumentError"),"negative array size");var s=[];if(i===$)for(var c=0;e>c;c++)s.push(t);else for(var u,c=0;e>c;c++){if(u=i(c),u===o)return o.$v;s[c]=u}return s}),e.defs(T,"$try_convert",function(e){return z.get("Opal")["$coerce_to?"](e,z.get("Array"),"to_ary")}),j["$&"]=function(e){var t,n=this;e=(t=z.get("Array")["$==="](e))===$||t.$$is_boolean&&1!=t?z.get("Opal").$coerce_to(e,z.get("Array"),"to_ary").$to_a():e.$to_a();for(var r=[],o={},a=0,i=n.length;i>a;a++){var s=n[a];if(!o[s])for(var c=0,u=e.length;u>c;c++){var l=e[c];!o[l]&&s["$=="](l)&&(o[s]=!0,r.push(s))}}return r},j["$|"]=function(e){var t,n=this;e=(t=z.get("Array")["$==="](e))===$||t.$$is_boolean&&1!=t?z.get("Opal").$coerce_to(e,z.get("Array"),"to_ary").$to_a():e.$to_a();for(var r=[],o={},a=0,i=n.length;i>a;a++){var s=n[a];o[s]||(o[s]=!0,r.push(s))}for(var a=0,i=e.length;i>a;a++){var s=e[a];o[s]||(o[s]=!0,r.push(s))}return r},j["$*"]=function(e){var t,n=this;if((t=e["$respond_to?"]("to_str"))!==$&&(!t.$$is_boolean||1==t))return n.join(e.$to_str());((t=e["$respond_to?"]("to_int"))===$||t.$$is_boolean&&1!=t)&&n.$raise(z.get("TypeError"),"no implicit conversion of "+e.$class()+" into Integer"),e=z.get("Opal").$coerce_to(e,z.get("Integer"),"to_int"),(t=0>e)===$||t.$$is_boolean&&1!=t||n.$raise(z.get("ArgumentError"),"negative argument");for(var r=[],o=0;e>o;o++)r=r.concat(n);return r},j["$+"]=function(e){var t,n=this;return e=(t=z.get("Array")["$==="](e))===$||t.$$is_boolean&&1!=t?z.get("Opal").$coerce_to(e,z.get("Array"),"to_ary").$to_a():e.$to_a(),n.concat(e)},j["$-"]=function(e){var t,n=this;if(e=(t=z.get("Array")["$==="](e))===$||t.$$is_boolean&&1!=t?z.get("Opal").$coerce_to(e,z.get("Array"),"to_ary").$to_a():e.$to_a(),(t=0===n.length)!==$&&(!t.$$is_boolean||1==t))return[];if((t=0===e.length)!==$&&(!t.$$is_boolean||1==t))return n.$clone();for(var r={},o=[],a=0,i=e.length;i>a;a++)r[e[a]]=!0;for(var a=0,i=n.length;i>a;a++){var s=n[a];r[s]||o.push(s)}return o},j["$<<"]=function(e){var t=this;return t.push(e),t},j["$<=>"]=function(e){var t,n=this;if((t=z.get("Array")["$==="](e))===$||t.$$is_boolean&&1!=t){if((t=e["$respond_to?"]("to_ary"))===$||t.$$is_boolean&&1!=t)return $;e=e.$to_ary().$to_a()}else e=e.$to_a();if(n.$hash()===e.$hash())return 0;if(n.length!=e.length)return n.length>e.length?1:-1;for(var r=0,o=n.length;o>r;r++){var a=n[r]["$<=>"](e[r]);if(0!==a)return a}return 0},j["$=="]=function(e){function t(e,n){var $,o,a,i;if(!n.$$is_array)return z.get("Opal")["$respond_to?"](n,"to_ary")?n["$=="](e):!1;if(n=n.$to_a(),e.length!==n.length)return!1;for(r[e.$object_id()]=!0,$=0,o=e.length;o>$;$++)if(a=e[$],i=n[$],a.$$is_array){if(i.$$is_array&&i.length!==a.length)return!1;if(!r.hasOwnProperty(a.$object_id())&&!t(a,i))return!1}else if(!a["$=="](i))return!1;return!0}var n=this,r={};return t(n,e)},j["$[]"]=function(e,t){var n,r=this;if((n=z.get("Range")["$==="](e))===$||n.$$is_boolean&&1!=n){e=z.get("Opal").$coerce_to(e,z.get("Integer"),"to_int");var o=r.length;return 0>e&&(e+=o,0>e)?$:void 0===t?e>=o||0>e?$:r[e]:(t=z.get("Opal").$coerce_to(t,z.get("Integer"),"to_int"),0>t||e>o||0>e?$:r.slice(e,e+t))}var o=r.length,a=e.exclude,i=z.get("Opal").$coerce_to(e.begin,z.get("Integer"),"to_int"),s=z.get("Opal").$coerce_to(e.end,z.get("Integer"),"to_int");return 0>i&&(i+=o,0>i)?$:i>o?$:0>s&&(s+=o,0>s)?[]:(a||(s+=1),r.slice(i,s))},j["$[]="]=function(e,t,n){var r,o=this,a=$,i=$;if((r=z.get("Range")["$==="](e))===$||r.$$is_boolean&&1!=r){(r=void 0===n)===$||r.$$is_boolean&&1!=r?(i=t,t=n,a=(r=z.get("Array")["$==="](t))===$||r.$$is_boolean&&1!=r?(r=t["$respond_to?"]("to_ary"))===$||r.$$is_boolean&&1!=r?[t]:t.$to_ary().$to_a():t.$to_a()):i=1;var s,c=o.length,e=z.get("Opal").$coerce_to(e,z.get("Integer"),"to_int"),i=z.get("Opal").$coerce_to(i,z.get("Integer"),"to_int");if(0>e&&(s=e,e+=c,0>e&&o.$raise(z.get("IndexError"),"index "+s+" too small for array; minimum "+-o.length)),0>i&&o.$raise(z.get("IndexError"),"negative length ("+i+")"),e>c)for(var u=c;e>u;u++)o[u]=$;return void 0===n?o[e]=t:o.splice.apply(o,[e,i].concat(a)),t}a=(r=z.get("Array")["$==="](t))===$||r.$$is_boolean&&1!=r?(r=t["$respond_to?"]("to_ary"))===$||r.$$is_boolean&&1!=r?[t]:t.$to_ary().$to_a():t.$to_a();var c=o.length,l=e.exclude,_=z.get("Opal").$coerce_to(e.begin,z.get("Integer"),"to_int"),p=z.get("Opal").$coerce_to(e.end,z.get("Integer"),"to_int");if(0>_&&(_+=c,0>_&&o.$raise(z.get("RangeError"),""+e.$inspect()+" out of range")),0>p&&(p+=c),l||(p+=1),_>c)for(var u=c;_>u;u++)o[u]=$;return 0>p?o.splice.apply(o,[_,0].concat(a)):o.splice.apply(o,[_,p-_].concat(a)),t},j.$assoc=function(e){for(var t,n=this,r=0,o=n.length;o>r;r++)if(t=n[r],t.length&&t[0]["$=="](e))return t;return $},j.$at=function(e){var t=this;return e=z.get("Opal").$coerce_to(e,z.get("Integer"),"to_int"),0>e&&(e+=t.length),0>e||e>=t.length?$:t[e]},j.$cycle=_=function(t){var n,r,a=this,i=_.$$p,s=i||$;if(null==t&&(t=$),_.$$p=null,(n=(r=a["$empty?"]())!==!1&&r!==$?r:t["$=="](0))!==$&&(!n.$$is_boolean||1==n))return $;if(s===!1||s===$)return a.$enum_for("cycle",t);if((n=t["$nil?"]())===$||n.$$is_boolean&&1!=n){if(t=z.get("Opal")["$coerce_to!"](t,z.get("Integer"),"to_int"),0>=t)return a;for(;t>0;){for(var c=0,u=a.length;u>c;c++){var l=e.yield1(s,a[c]);if(l===o)return o.$v}t--}}else for(;;)for(var c=0,u=a.length;u>c;c++){var l=e.yield1(s,a[c]);if(l===o)return o.$v}return a},j.$clear=function(){var e=this;return e.splice(0,e.length),e},j.$clone=function(){var e=this,t=$;return t=[],t.$initialize_clone(e),t},j.$dup=function(){var e=this,t=$;return t=[],t.$initialize_dup(e),t},j.$initialize_copy=function(e){var t=this;return t.$replace(e)},j.$collect=p=function(){var t=this,n=p.$$p,r=n||$;if(p.$$p=null,r===$)return t.$enum_for("collect");for(var a=[],i=0,s=t.length;s>i;i++){var c=e.yield1(r,t[i]);if(c===o)return o.$v;a.push(c)}return a},j["$collect!"]=d=function(){var t=this,n=d.$$p,r=n||$;if(d.$$p=null,r===$)return t.$enum_for("collect!");for(var a=0,i=t.length;i>a;a++){var s=e.yield1(r,t[a]);if(s===o)return o.$v;t[a]=s}return t},j.$compact=function(){for(var e,t=this,n=[],r=0,o=t.length;o>r;r++)(e=t[r])!==$&&n.push(e);return n},j["$compact!"]=function(){for(var e=this,t=e.length,n=0,r=e.length;r>n;n++)e[n]===$&&(e.splice(n,1),r--,n--);return e.length===t?$:e},j.$concat=function(e){var t,n=this;e=(t=z.get("Array")["$==="](e))===$||t.$$is_boolean&&1!=t?z.get("Opal").$coerce_to(e,z.get("Array"),"to_ary").$to_a():e.$to_a();for(var r=0,o=e.length;o>r;r++)n.push(e[r]);return n},j.$delete=f=function(t){var n,r=this,a=f.$$p,i=a||$;f.$$p=null;for(var s=r.length,c=0,u=s;u>c;c++)r[c]["$=="](t)&&(r.splice(c,1),u--,c--);return r.length===s?i!==$?(n=e.yieldX(i,[]))===o?o.$v:n:$:t},j.$delete_at=function(e){var t=this;if(e=z.get("Opal").$coerce_to(e,z.get("Integer"),"to_int"),0>e&&(e+=t.length),0>e||e>=t.length)return $;var n=t[e];return t.splice(e,1),n},j.$delete_if=h=function(){var e=this,t=h.$$p,n=t||$;if(h.$$p=null,n===$)return e.$enum_for("delete_if");for(var r,a=0,i=e.length;i>a;a++){if((r=n(e[a]))===o)return o.$v;r!==!1&&r!==$&&(e.splice(a,1),i--,a--)}return e},j.$drop=function(e){var t=this;return 0>e&&t.$raise(z.get("ArgumentError")),t.slice(e)},e.defn(T,"$dup",j.$clone),j.$each=m=function(){var t=this,n=m.$$p,r=n||$;if(m.$$p=null,r===$)return t.$enum_for("each");for(var a=0,i=t.length;i>a;a++){var s=e.yield1(r,t[a]);if(s==o)return o.$v}return t},j.$each_index=g=function(){var t=this,n=g.$$p,r=n||$;if(g.$$p=null,r===$)return t.$enum_for("each_index");for(var a=0,i=t.length;i>a;a++){var s=e.yield1(r,a);if(s===o)return o.$v}return t},j["$empty?"]=function(){var e=this;return 0===e.length},j["$eql?"]=function(e){function t(e,n){var $,o,a,i;if(!n.$$is_array)return!1;if(n=n.$to_a(),e.length!==n.length)return!1;for(r[e.$object_id()]=!0,$=0,o=e.length;o>$;$++)if(a=e[$],i=n[$],a.$$is_array){if(i.$$is_array&&i.length!==a.length)return!1;if(!r.hasOwnProperty(a.$object_id())&&!t(a,i))return!1}else if(!a["$eql?"](i))return!1;return!0}var n=this,r={};return t(n,e)},j.$fetch=v=function(e,t){var n=this,r=v.$$p,o=r||$;v.$$p=null;var a=e;return e=z.get("Opal").$coerce_to(e,z.get("Integer"),"to_int"),0>e&&(e+=n.length),e>=0&&e<n.length?n[e]:o!==$?o(a):null!=t?t:void(0===n.length?n.$raise(z.get("IndexError"),"index "+a+" outside of array bounds: 0...0"):n.$raise(z.get("IndexError"),"index "+a+" outside of array bounds: -"+n.length+"..."+n.length))},j.$fill=b=function(t){var n,r=this,i=b.$$p,s=i||$,c=$,u=$,l=$,_=$,p=$;if(t=a.call(arguments,0),b.$$p=null,s!==!1&&s!==$?((n=t.length>2)===$||n.$$is_boolean&&1!=n||r.$raise(z.get("ArgumentError"),"wrong number of arguments ("+t.$length()+" for 0..2)"),n=e.to_ary(t),c=null==n[0]?$:n[0],u=null==n[1]?$:n[1]):((n=0==t.length)===$||n.$$is_boolean&&1!=n?(n=t.length>3)===$||n.$$is_boolean&&1!=n||r.$raise(z.get("ArgumentError"),"wrong number of arguments ("+t.$length()+" for 1..3)"):r.$raise(z.get("ArgumentError"),"wrong number of arguments (0 for 1..3)"),n=e.to_ary(t),l=null==n[0]?$:n[0],c=null==n[1]?$:n[1],u=null==n[2]?$:n[2]),(n=z.get("Range")["$==="](c))===$||n.$$is_boolean&&1!=n)if(c!==!1&&c!==$)if(_=z.get("Opal").$coerce_to(c,z.get("Integer"),"to_int"),(n=0>_)===$||n.$$is_boolean&&1!=n||(_+=r.length),(n=0>_)===$||n.$$is_boolean&&1!=n||(_=0),u!==!1&&u!==$){if(p=z.get("Opal").$coerce_to(u,z.get("Integer"),"to_int"),(n=0==p)!==$&&(!n.$$is_boolean||1==n))return r;p+=_}else p=r.length;else _=0,p=r.length;else if(u!==!1&&u!==$&&r.$raise(z.get("TypeError"),"length invalid with range"),_=z.get("Opal").$coerce_to(c.$begin(),z.get("Integer"),"to_int"),(n=0>_)===$||n.$$is_boolean&&1!=n||(_+=r.length),(n=0>_)===$||n.$$is_boolean&&1!=n||r.$raise(z.get("RangeError"),""+c.$inspect()+" out of range"),p=z.get("Opal").$coerce_to(c.$end(),z.get("Integer"),"to_int"),(n=0>p)===$||n.$$is_boolean&&1!=n||(p+=r.length),((n=c["$exclude_end?"]())===$||n.$$is_boolean&&1!=n)&&(p+=1),(n=_>=p)!==$&&(!n.$$is_boolean||1==n))return r;if((n=_>r.length)!==$&&(!n.$$is_boolean||1==n))for(var d=r.length;p>d;d++)r[d]=$;if((n=p>r.length)===$||n.$$is_boolean&&1!=n||(r.length=p),s!==!1&&s!==$){for(r.length;p>_;_++){var f=s(_);if(f===o)return o.$v;r[_]=f}}else{for(r.length;p>_;_++)r[_]=l}return r},j.$first=function(e){var t=this;return null==e?0===t.length?$:t[0]:(e=z.get("Opal").$coerce_to(e,z.get("Integer"),"to_int"),0>e&&t.$raise(z.get("ArgumentError"),"negative array size"),t.slice(0,e))},j.$flatten=function(e){function t(e,o){var a,i,s,c,e=e.$to_a(),u=[];for(a=0,i=e.length;i>a;a++)if(s=e[a],z.get("Opal")["$respond_to?"](s,"to_ary"))if(c=s.$to_ary(),c!==$)switch(c.$$is_array||n.$raise(z.get("TypeError")),r===c.$object_id()&&n.$raise(z.get("ArgumentError")),o){case void 0:u.push.apply(u,t(c));break;case 0:u.push(c);break;default:u.push.apply(u,t(c,o-1))}else u.push(s);else u.push(s);return u}var n=this,r=n.$object_id();return void 0!==e&&(e=z.get("Opal").$coerce_to(e,z.get("Integer"),"to_int")),t(n,e)},j["$flatten!"]=function(e){var t=this,n=t.$flatten(e);if(t.length==n.length){for(var r=0,o=t.length;o>r&&t[r]===n[r];r++);if(r==o)return $}return t.$replace(n),t},j.$hash=function(){for(var e,t=this,n=["A"],r=0,$=t.length;$>r;r++)e=t[r],n.push(e.$$is_array&&t["$eql?"](e)?"self":e.$hash());return n.join(",")},j["$include?"]=function(e){for(var t=this,n=0,r=t.length;r>n;n++)if(t[n]["$=="](e))return!0;return!1},j.$index=y=function(e){var t=this,n=y.$$p,r=n||$;if(y.$$p=null,null!=e){for(var a=0,i=t.length;i>a;a++)if(t[a]["$=="](e))return a}else{if(r===$)return t.$enum_for("index");for(var s,a=0,i=t.length;i>a;a++){if((s=r(t[a]))===o)return o.$v;if(s!==!1&&s!==$)return a}}return $},j.$insert=function(e,t){var n=this;if(t=a.call(arguments,1),e=z.get("Opal").$coerce_to(e,z.get("Integer"),"to_int"),t.length>0){if(0>e&&(e+=n.length+1,0>e&&n.$raise(z.get("IndexError"),""+e+" is out of bounds")),e>n.length)for(var r=n.length;e>r;r++)n.push($);n.splice.apply(n,[e,0].concat(t))}return n},j.$inspect=function(){for(var e=this,t=[],n=e.$__id__(),r=0,$=e.length;$>r;r++){var o=e["$[]"](r);t.push(o.$__id__()===n?"[...]":o.$inspect())}return"["+t.join(", ")+"]"},j.$join=function(e){var t,n=this;if(null==s[","]&&(s[","]=$),null==e&&(e=$),(t=0===n.length)!==$&&(!t.$$is_boolean||1==t))return"";(t=e===$)===$||t.$$is_boolean&&1!=t||(e=s[","]);for(var r=[],o=n.$object_id(),a=0,i=n.length;i>a;a++){var c=n[a];if(z.get("Opal")["$respond_to?"](c,"to_str")){var u=c.$to_str();if(u!==$){r.push(u.$to_s());continue}}if(z.get("Opal")["$respond_to?"](c,"to_ary")){var u=c.$to_ary();if(o===u.$object_id()&&n.$raise(z.get("ArgumentError")),u!==$){r.push(u.$join(e));continue}}if(z.get("Opal")["$respond_to?"](c,"to_s")){var u=c.$to_s();if(u!==$){r.push(u);continue}}n.$raise(z.get("NoMethodError"),""+z.get("Opal").$inspect(c)+" doesn't respond to #to_str, #to_ary or #to_s")}return r.join(e===$?"":z.get("Opal")["$coerce_to!"](e,z.get("String"),"to_str").$to_s())},j.$keep_if=x=function(){var e=this,t=x.$$p,n=t||$;if(x.$$p=null,n===$)return e.$enum_for("keep_if");for(var r,a=0,i=e.length;i>a;a++){if((r=n(e[a]))===o)return o.$v;(r===!1||r===$)&&(e.splice(a,1),i--,a--)}return e},j.$last=function(e){var t=this;return null==e?0===t.length?$:t[t.length-1]:(e=z.get("Opal").$coerce_to(e,z.get("Integer"),"to_int"),0>e&&t.$raise(z.get("ArgumentError"),"negative array size"),e>t.length&&(e=t.length),t.slice(t.length-e,t.length))},j.$length=function(){var e=this;return e.length},e.defn(T,"$map",j.$collect),e.defn(T,"$map!",j["$collect!"]),j.$pop=function(e){var t,n=this;return(t=void 0===e)===$||t.$$is_boolean&&1!=t?(e=z.get("Opal").$coerce_to(e,z.get("Integer"),"to_int"),(t=0>e)===$||t.$$is_boolean&&1!=t||n.$raise(z.get("ArgumentError"),"negative array size"),(t=0===n.length)===$||t.$$is_boolean&&1!=t?(t=e>n.length)===$||t.$$is_boolean&&1!=t?n.splice(n.length-e,n.length):n.splice(0,n.length):[]):(t=0===n.length)===$||t.$$is_boolean&&1!=t?n.pop():$},j.$product=w=function(t){var n,r=this,i=w.$$p,s=i||$;t=a.call(arguments,0),w.$$p=null;var c,u,l,_,p=s!==$?null:[],d=t.length+1,f=new Array(d),h=new Array(d),m=new Array(d),g=1;for(m[0]=r,c=1;d>c;c++)m[c]=z.get("Opal").$coerce_to(t[c-1],z.get("Array"),"to_ary");for(c=0;d>c;c++){if(_=m[c].length,0===_)return p||r;g*=_,g>2147483647&&r.$raise(z.get("RangeError"),"too big to product"),h[c]=_,f[c]=0}e:for(;;){for(l=[],c=0;d>c;c++)l.push(m[c][f[c]]);for(p?p.push(l):(n=e.yield1(s,l))===o?o.$v:n,u=d-1,f[u]++;f[u]===h[u];){if(f[u]=0,--u<0)break e;f[u]++}}return p||r},j.$push=function(e){var t=this;e=a.call(arguments,0);for(var n=0,r=e.length;r>n;n++)t.push(e[n]);return t},j.$rassoc=function(e){for(var t,n=this,r=0,o=n.length;o>r;r++)if(t=n[r],t.length&&void 0!==t[1]&&t[1]["$=="](e))return t;return $},j.$reject=k=function(){var e=this,t=k.$$p,n=t||$;if(k.$$p=null,n===$)return e.$enum_for("reject");for(var r,a=[],i=0,s=e.length;s>i;i++){if((r=n(e[i]))===o)return o.$v;(r===!1||r===$)&&a.push(e[i])}return a},j["$reject!"]=E=function(){var e,t,n=this,r=E.$$p,o=r||$,a=$;return E.$$p=null,o===$?n.$enum_for("reject!"):(a=n.$length(),(e=(t=n).$delete_if,e.$$p=o.$to_proc(),e).call(t),n.$length()["$=="](a)?$:n)},j.$replace=function(e){var t,n=this;return e=(t=z.get("Array")["$==="](e))===$||t.$$is_boolean&&1!=t?z.get("Opal").$coerce_to(e,z.get("Array"),"to_ary").$to_a():e.$to_a(),n.splice(0,n.length),n.push.apply(n,e),n},j.$reverse=function(){var e=this;return e.slice(0).reverse()},j["$reverse!"]=function(){var e=this;return e.reverse()},j.$reverse_each=S=function(){var e,t,n=this,r=S.$$p,o=r||$;return S.$$p=null,o===$?n.$enum_for("reverse_each"):((e=(t=n.$reverse()).$each,e.$$p=o.$to_proc(),e).call(t),n)},j.$rindex=R=function(e){var t=this,n=R.$$p,r=n||$;if(R.$$p=null,null!=e){for(var a=t.length-1;a>=0;a--)if(t[a]["$=="](e))return a}else if(r!==$)for(var i,a=t.length-1;a>=0;a--){if((i=r(t[a]))===o)return o.$v;if(i!==!1&&i!==$)return a}else if(null==e)return t.$enum_for("rindex");return $},j.$sample=function(e){var t,n,r,o=this;return null==e&&(e=$),n=e["$!"](),(t=n!==!1&&n!==$?o["$empty?"]():n)===$||t.$$is_boolean&&1!=t?(t=(n=e!==!1&&e!==$)?o["$empty?"]():n)===$||t.$$is_boolean&&1!=t?e!==!1&&e!==$?(t=(n=c(1,e,!1)).$map,t.$$p=(r=function(){var e=r.$$s||this;return e["$[]"](e.$rand(e.$length()))},r.$$s=o,r),t).call(n):o["$[]"](o.$rand(o.$length())):[]:$},j.$select=O=function(){var t=this,n=O.$$p,r=n||$;if(O.$$p=null,r===$)return t.$enum_for("select");for(var a,i,s=[],c=0,u=t.length;u>c;c++){if(a=t[c],(i=e.yield1(r,a))===o)return o.$v;i!==!1&&i!==$&&s.push(a)}return s},j["$select!"]=A=function(){var e,t,n=this,r=A.$$p,o=r||$;if(A.$$p=null,o===$)return n.$enum_for("select!");var a=n.length;return(e=(t=n).$keep_if,e.$$p=o.$to_proc(),e).call(t),n.length===a?$:n},j.$shift=function(e){var t,n=this;return(t=void 0===e)===$||t.$$is_boolean&&1!=t?(e=z.get("Opal").$coerce_to(e,z.get("Integer"),"to_int"),(t=0>e)===$||t.$$is_boolean&&1!=t||n.$raise(z.get("ArgumentError"),"negative array size"),(t=0===n.length)===$||t.$$is_boolean&&1!=t?n.splice(0,e):[]):(t=0===n.length)===$||t.$$is_boolean&&1!=t?n.shift():$},e.defn(T,"$size",j.$length),j.$shuffle=function(){var e=this;return e.$clone()["$shuffle!"]()},j["$shuffle!"]=function(){for(var e=this,t=e.length-1;t>0;t--){var n=e[t],r=Math.floor(Math.random()*(t+1));e[t]=e[r],e[r]=n}return e},e.defn(T,"$slice",j["$[]"]),j["$slice!"]=function(e,t){var n=this;return 0>e&&(e+=n.length),null!=t?n.splice(e,t):0>e||e>=n.length?$:n.splice(e,1)[0]},j.$sort=M=function(){var e,r=this,a=M.$$p,i=a||$;if(M.$$p=null,(e=r.length>1)===$||e.$$is_boolean&&1!=e)return r;i===$&&(i=function(e,t){return e["$<=>"](t)});try{return r.slice().sort(function(e,a){var s=i(e,a);if(s===o)throw o;return s===$&&r.$raise(z.get("ArgumentError"),"comparison of "+e.$inspect()+" with "+a.$inspect()+" failed"),t(s,0)?1:n(s,0)?-1:0})}catch(s){if(s===o)return o.$v;throw s}},j["$sort!"]=q=function(){var e,t,n=this,r=q.$$p,o=r||$;q.$$p=null;var a;a=o!==$?(e=(t=n.slice()).$sort,e.$$p=o.$to_proc(),e).call(t):n.slice().$sort(),n.length=0;for(var i=0,s=a.length;s>i;i++)n.push(a[i]);return n},j.$take=function(e){var t=this;return 0>e&&t.$raise(z.get("ArgumentError")),t.slice(0,e)},j.$take_while=C=function(){var e=this,t=C.$$p,n=t||$;C.$$p=null;for(var r,a,i=[],s=0,c=e.length;c>s;s++){if(r=e[s],(a=n(r))===o)return o.$v;if(a===!1||a===$)return i;i.push(r)}return i},j.$to_a=function(){var e=this;return e},e.defn(T,"$to_ary",j.$to_a),e.defn(T,"$to_s",j.$inspect),j.$transpose=function(){var e,t,n,r=this,o=$,a=$;return(e=r["$empty?"]())===$||e.$$is_boolean&&1!=e?(o=[],a=$,(e=(t=r).$each,e.$$p=(n=function(e){var t,r,i,s=n.$$s||this;return null==e&&(e=$),e=(t=z.get("Array")["$==="](e))===$||t.$$is_boolean&&1!=t?z.get("Opal").$coerce_to(e,z.get("Array"),"to_ary").$to_a():e.$to_a(),(t=a)!==!1&&t!==$?t:a=e.length,(t=e.length["$=="](a)["$!"]())===$||t.$$is_boolean&&1!=t||s.$raise(z.get("IndexError"),"element size differs ("+e.length+" should be "+a),(t=(r=e.length).$times,t.$$p=(i=function(t){var n,r,a,s=(i.$$s||this,$);return null==t&&(t=$),n=t,r=o,s=(a=r["$[]"](n))!==!1&&a!==$?a:r["$[]="](n,[]),s["$<<"](e.$at(t))},i.$$s=s,i),t).call(r)},n.$$s=r,n),e).call(t),o):[]},j.$uniq=function(){for(var e,t,n=this,r=[],$={},o=0,a=n.length;a>o;o++)e=n[o],t=e,$[t]||($[t]=!0,r.push(e));return r},j["$uniq!"]=function(){for(var e,t,n=this,r=n.length,o={},a=0,i=r;i>a;a++)e=n[a],t=e,o[t]?(n.splice(a,1),i--,a--):o[t]=!0;return n.length===r?$:n},j.$unshift=function(e){var t=this;e=a.call(arguments,0);for(var n=e.length-1;n>=0;n--)t.unshift(e[n]);return t},j.$zip=I=function(e){var t=this,n=I.$$p,r=n||$;e=a.call(arguments,0),I.$$p=null;for(var o,i,s=[],c=t.length,u=0;c>u;u++){o=[t[u]];for(var l=0,_=e.length;_>l;l++)i=e[l][u],null==i&&(i=$),o[l+1]=i;s[u]=o}if(r!==$){for(var u=0;c>u;u++)r(s[u]);return $}return s},$&&"zip"}(r,null)},Opal.modules["corelib/array/inheritance"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="warning";var $=e.top,o=e,a=e.nil,i=(e.breaker,e.slice),s=e.klass;return e.add_stubs(["$new","$allocate","$initialize","$to_proc","$__send__","$clone","$respond_to?","$==","$eql?","$inspect","$hash","$class","$slice","$uniq","$flatten"]),function(t,$super){function n(){}var r=n=s(t,$super,"Array",n),$=(r.$$proto,r.$$scope);return e.defs(r,"$inherited",function(e){var t=a;t=$.get("Class").$new($.get("Array").$$scope.get("Wrapper")),e.$$proto=t.$$proto,e.$$proto.$$class=e,e.$$alloc=t.$$alloc,e.$$parent=$.get("Array").$$scope.get("Wrapper"),e.$allocate=t.$allocate,e.$new=t.$new,e["$[]"]=t["$[]"]}),a&&"inherited"}($,null),function($,$super){function o(){}var c,u,l,_,p,d=o=s($,$super,"Wrapper",o),f=d.$$proto,h=d.$$scope;return f.literal=a,f.$$is_array=!0,e.defs(d,"$allocate",c=function(t){var n=this,r=(c.$$p,a);return null==t&&(t=[]),c.$$p=null,r=e.find_super_dispatcher(n,"allocate",c,null,o).apply(n,[]),r.literal=t,r}),e.defs(d,"$new",u=function(e){var t,n,r=this,$=u.$$p,o=$||a,s=a;return e=i.call(arguments,0),u.$$p=null,s=r.$allocate(),(t=(n=s).$initialize,t.$$p=o.$to_proc(),t).apply(n,[].concat(e)),s}),e.defs(d,"$[]",function(e){var t=this;return e=i.call(arguments,0),t.$allocate(e)}),f.$initialize=l=function(e){var t,n,r=this,$=l.$$p,o=$||a;return e=i.call(arguments,0),l.$$p=null,r.literal=(t=(n=h.get("Array")).$new,t.$$p=o.$to_proc(),t).apply(n,[].concat(e))},f.$method_missing=_=function(e){var t,n,r=this,$=_.$$p,o=$||a,s=a;return e=i.call(arguments,0),_.$$p=null,s=(t=(n=r.literal).$__send__,t.$$p=o.$to_proc(),t).apply(n,[].concat(e)),(t=s===r.literal)===a||t.$$is_boolean&&1!=t?s:r},f.$initialize_copy=function(e){var t=this;return t.literal=e.literal.$clone()},f["$respond_to?"]=p=function(t){var n,r=i.call(arguments,0),$=this,o=p.$$p;return p.$$p=null,(n=e.find_super_dispatcher($,"respond_to?",p,o).apply($,r))!==!1&&n!==a?n:$.literal["$respond_to?"](t)},f["$=="]=function(e){var t=this;return t.literal["$=="](e)},f["$eql?"]=function(e){var t=this;return t.literal["$eql?"](e)},f.$to_a=function(){var e=this;return e.literal},f.$to_ary=function(){var e=this;return e},f.$inspect=function(){var e=this;return e.literal.$inspect()},f.$hash=function(){var e=this;return e.literal.$hash()},f["$*"]=function(e){var n=this,r=t(n.literal,e);return r.$$is_array?n.$class().$allocate(r):r},f["$[]"]=function(e,t){var n=this,r=n.literal.$slice(e,t);return r.$$is_array&&(e.$$is_range||void 0!==t)?n.$class().$allocate(r):r},e.defn(d,"$slice",f["$[]"]),f.$uniq=function(){var e=this;return e.$class().$allocate(e.literal.$uniq())},f.$flatten=function(e){var t=this;return t.$class().$allocate(t.literal.$flatten(e))},f["$-"]=function(e){var t=this;return n(t.literal,e)},f["$+"]=function(e){var t=this;return r(t.literal,e)},a&&"+"}(o.get("Array"),null)},Opal.modules["corelib/hash"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=e.breaker,$=e.slice,o=e.klass;return e.add_stubs(["$require","$include","$!","$==","$call","$coerce_to!","$lambda?","$abs","$arity","$raise","$enum_for","$inspect","$flatten","$eql?","$===","$clone","$merge!","$to_proc","$alias_method"]),t.$require("corelib/enumerable"),function(t,$super){function a(){}var i,s,c,u,l,_,p,d,f,h,m,g,v,b=a=o(t,$super,"Hash",a),y=b.$$proto,x=b.$$scope;y.proc=y.none=n,b.$include(x.get("Enumerable")),y.$$is_hash=!0,e.defs(b,"$[]",function(t){return t=$.call(arguments,0),e.hash.apply(null,t)}),e.defs(b,"$allocate",function(){var e=this,t=new e.$$alloc;return t.map={},t.smap={},t.keys=[],t.none=n,t.proc=n,t}),y.$initialize=i=function(e){var t=this,r=i.$$p,$=r||n;return i.$$p=null,t.none=void 0===e?n:e,t.proc=$,t},y["$=="]=function(e){var t=this;if(t===e)return!0;if(!e.keys||!e.smap||!e.map)return!1;if(t.keys.length!==e.keys.length)return!1;for(var n,r,$,o,a,i,s=t.map,c=t.smap,u=e.map,l=e.smap,_=0,p=t.keys.length;p>_;_++)if($=t.keys[_],$.$$is_string?(o=$,n=c,r=l):(o=$.$hash(),n=s,r=u),a=n[o],void 0===a&&console.log("==",$,t),i=r[o],void 0===i||a["$=="](i)["$!"]())return!1;return!0},y["$[]"]=function(t){var r,$,o=this;if(t.$$is_string?(r=o.smap,$=t):(r=o.map,$=t.$hash()),void 0===r&&console.log(o,"[] --> key:",t,$,r),e.hasOwnProperty.call(r,$))return r[$];var a=o.proc;return a!==n?a.$call(o,t):o.none},y["$[]="]=function(t,n){var r,$,n,o=this;return t.$$is_string?(r=o.smap,$=t):(r=o.map,$=t.$hash()),e.hasOwnProperty.call(r,$)||o.keys.push(t),r[$]=n,n},y.$assoc=function(e){for(var t,r,$,o=this,a=o.keys,i=0,s=a.length;s>i;i++)if(r=a[i],r["$=="](e))return r.$$is_string?(t=o.smap,$=r):(t=o.map,$=r.$hash()),[r,t[$]];
return n},y.$clear=function(){var e=this;return e.map={},e.smap={},e.keys=[],e},y.$clone=function(){for(var e,t,n,r,$,o=this,a={},i={},s=o.map,c=o.smap,u=[],l=0,_=o.keys.length;_>l;l++)n=o.keys[l],n.$$is_string?(r=n,e=i,t=c):(r=n.$hash(),e=a,t=s),$=t[r],u.push(n),e[r]=$;var p=new o.$$class.$$alloc;return p.map=a,p.smap=i,p.keys=u,p.none=o.none,p.proc=o.proc,p},y.$default=function(e){var t=this;return void 0!==e&&t.proc!==n?t.proc.$call(t,e):t.none},y["$default="]=function(e){var t=this;return t.proc=n,t.none=e},y.$default_proc=function(){var e=this;return e.proc},y["$default_proc="]=function(e){var t=this;return e!==n&&(e=x.get("Opal")["$coerce_to!"](e,x.get("Proc"),"to_proc"),e["$lambda?"]()&&2!=e.$arity().$abs()&&t.$raise(x.get("TypeError"),"default_proc takes two arguments")),t.none=n,t.proc=e},y.$delete=s=function(e){var t=this,r=s.$$p,$=r||n;s.$$p=null;var o,a,i;return e.$$is_string?(a=t.smap,i=e):(a=t.map,i=e.$hash()),o=a[i],null!=o?(delete a[i],t.keys.$delete(e),o):$!==n?$.$call(e):n},y.$delete_if=c=function(){var e=this,t=c.$$p,$=t||n;if(c.$$p=null,$===!1||$===n)return e.$enum_for("delete_if");for(var o,a,i,s,u,l=e.map,_=e.smap,p=e.keys,d=0,f=p.length;f>d;d++){if(a=p[d],a.$$is_string?(o=_,u=a):(o=l,u=a.$hash()),s=o[u],i=$(a,s),i===r)return r.$v;i!==!1&&i!==n&&(p.splice(d,1),delete o[u],f--,d--)}return e},e.defn(b,"$dup",y.$clone),y.$each=u=function(){var t=this,$=u.$$p,o=$||n;if(u.$$p=null,o===!1||o===n)return t.$enum_for("each");for(var a,i,s,c,l=t.map,_=t.smap,p=t.keys,d=0,f=p.length;f>d;d++)if(i=p[d],i.$$is_string?(a=_,s=i):(a=l,s=i.$hash()),c=e.yield1(o,[i,a[s]]),c===r)return r.$v;return t},y.$each_key=l=function(){var e=this,t=l.$$p,$=t||n;if(l.$$p=null,$===!1||$===n)return e.$enum_for("each_key");for(var o,a=e.keys,i=0,s=a.length;s>i;i++)if(o=a[i],$(o)===r)return r.$v;return e},e.defn(b,"$each_pair",y.$each),y.$each_value=_=function(){var e=this,t=_.$$p,$=t||n;if(_.$$p=null,$===!1||$===n)return e.$enum_for("each_value");for(var o=e.map,a=e.smap,i=e.keys,s=0,c=i.length;c>s;s++)if(key=i[s],key.$$is_string?(map=a,khash=key):(map=o,khash=key.$hash()),$(map[khash])===r)return r.$v;return e},y["$empty?"]=function(){var e=this;return 0===e.keys.length},e.defn(b,"$eql?",y["$=="]),y.$fetch=p=function(e,t){var $=this,o=p.$$p,a=o||n;p.$$p=null;var i,s,c;if(e.$$is_string?(s=e,i=$.smap):(s=e.$hash(),i=$.map),c=i[s],null!=c)return c;if(a!==n){var c;return(c=a(e))===r?r.$v:c}return null!=t?t:void $.$raise(x.get("KeyError"),"key not found: "+e.$inspect())},y.$flatten=function(e){for(var t,n,r,$,o=this,a=o.map,i=o.smap,s=o.keys,c=[],u=0,l=s.length;l>u;u++)n=s[u],n.$$is_string?(r=n,t=i):(r=n.$hash(),t=a),$=t[r],c.push(n),$.$$is_array?null==e||1===e?c.push($):c=c.concat($.$flatten(e-1)):c.push($);return c},y["$has_key?"]=function(t){var n,r,$=this,o=$.keys;if(t.$$is_string?(r=t,n=$.smap):(r=t.$hash(),n=$.map),e.hasOwnProperty.call(n,r))for(var a=0,i=o.length;i>a;a++)if(!t["$eql?"](o[a])["$!"]())return!0;return!1},y["$has_value?"]=function(e){var t=this;for(var n in t.map)if(t.map[n]["$=="](e))return!0;return!1};var w=null;y.$hash=function(){var e=this,t=null===w;try{var n,r,$=["Hash"],o=e.keys,a=e.$object_id();if(t&&(w={}),w.hasOwnProperty(a))return"self";w[a]=!0;for(var i=0,s=o.length;s>i;i++)n=o[i],r=n.$$is_string?e.smap[n]:e.map[n.$hash()],n=n.$hash(),r="undefined"==typeof r?"":r.$hash(),$.push([n,r]);return $.sort().join()}finally{t&&(w=null)}},e.defn(b,"$include?",y["$has_key?"]),y.$index=function(e){for(var t,r,$,o=this,a=o.map,i=o.smap,s=o.keys,c=0,u=s.length;u>c;c++)if($=s[c],$.$$is_string?(t=i,r=$):(t=a,r=$.$hash()),t[r]["$=="](e))return $;return n},y.$indexes=function(e){var t=this;e=$.call(arguments,0);for(var n,r,o,a,i=[],s=t.map,c=t.smap,u=0,l=e.length;l>u;u++)r=e[u],r.$$is_string?(o=r,n=c):(o=r.$hash(),n=s),a=n[o],i.push(null!=a?a:t.none);return i},e.defn(b,"$indices",y.$indexes);var k=null;return y.$inspect=function(){var e=this,t=null===k;try{var n,r,$=[],o=e.keys;if(id=e.$object_id(),counter=0,t&&(k={}),k.hasOwnProperty(id))return"{...}";k[id]=!0;for(var a=0,i=o.length;i>a;a++)n=o[a],r=n.$$is_string?e.smap[n]:e.map[n.$hash()],n=n.$inspect(),r=r.$inspect(),$.push(n+"=>"+r);return"{"+$.join(", ")+"}"}finally{t&&(k=null)}},y.$invert=function(){for(var t,n,r,$,o,a=this,i=e.hash(),s=a.keys,c=a.map,u=a.smap,l=i.keys,_=i.map,p=i.smap,d=0,f=s.length;f>d;d++)r=s[d],r.$$is_string?(t=u,$=r):(t=c,$=r.$hash()),o=t[$],l.push(o),o.$$is_string?(n=p,$=o):(n=_,$=o.$hash()),n[$]=r;return i},y.$keep_if=d=function(){var e=this,t=d.$$p,$=t||n;if(d.$$p=null,$===!1||$===n)return e.$enum_for("keep_if");for(var o,a,i,s,c,u=e.map,l=e.smap,_=e.keys,p=0,f=_.length;f>p;p++){if(a=_[p],a.$$is_string?(i=a,o=l):(i=a.$hash(),o=u),s=o[i],c=$(a,s),c===r)return r.$v;(c===!1||c===n)&&(_.splice(p,1),delete o[i],f--,p--)}return e},e.defn(b,"$key",y.$index),e.defn(b,"$key?",y["$has_key?"]),y.$keys=function(){var e=this;return e.keys.slice(0)},y.$length=function(){var e=this;return e.keys.length},e.defn(b,"$member?",y["$has_key?"]),y.$merge=f=function(e){var t,r,$=this,o=f.$$p,a=o||n,i=n;return f.$$p=null,((t=x.get("Hash")["$==="](e))===n||t.$$is_boolean&&1!=t)&&(e=x.get("Opal")["$coerce_to!"](e,x.get("Hash"),"to_hash")),i=$.$clone(),(t=(r=i)["$merge!"],t.$$p=a.$to_proc(),t).call(r,e),i},y["$merge!"]=h=function(e){var t=this,r=h.$$p,$=r||n;h.$$p=null,x.get("Hash")["$==="](e)||(e=x.get("Opal")["$coerce_to!"](e,x.get("Hash"),"to_hash"));var o,a,i,s,c,u,l=t.keys,_=t.map,p=t.smap,d=e.keys,f=e.map,m=e.smap;if($===n)for(var g=0,v=d.length;v>g;g++)i=d[g],i.$$is_string?(s=i,o=p,a=m):(s=i.$hash(),o=_,a=f),null==o[s]&&l.push(i),o[s]=a[s];else for(var g=0,v=d.length;v>g;g++)i=d[g],i.$$is_string?(s=i,o=p,a=m):(s=i.$hash(),o=_,a=f),c=o[s],u=a[s],null==c?(l.push(i),o[s]=u):o[s]=$(i,c,u);return t},y.$rassoc=function(e){for(var t,r,$,o=this,a=o.keys,i=o.map,s=o.smap,c=0,u=a.length;u>c;c++)if(t=a[c],t.$$is_string?(r=t,map=s):(r=t.$hash(),map=i),$=map[r],$["$=="](e))return[t,$];return n},y.$reject=m=function(){var t=this,$=m.$$p,o=$||n;if(m.$$p=null,o===!1||o===n)return t.$enum_for("reject");for(var a,i,s,c,u,l,_=t.keys,p=t.map,d=t.smap,f=e.hash(),h=f.map,g=f.smap,v=f.keys,b=0,y=_.length;y>b;b++){if(s=_[b],s.$$is_string?(c=s,a=d,i=g):(c=s.$hash(),a=p,i=h),u=a[c],(l=o(s,u))===r)return r.$v;(l===!1||l===n)&&(v.push(s),i[c]=u)}return f},y.$replace=function(e){for(var t,n,r,$,o=this,a=o.keys=[],i=o.map={},s=o.smap={},c=e.map,u=e.smap,l=0,_=e.keys.length;_>l;l++)t=e.keys[l],t.$$is_string?(n=t,r=s,$=u):(n=t.$hash(),r=i,$=c),a.push(t),r[n]=$[n];return o},y.$select=g=function(){var t=this,$=g.$$p,o=$||n;if(g.$$p=null,o===!1||o===n)return t.$enum_for("select");for(var a,i,s,c,u,l,_=t.keys,p=t.map,d=t.smap,f=e.hash(),h=f.map,m=f.smap,v=f.keys,b=0,y=_.length;y>b;b++){if(s=_[b],s.$$is_string?(c=s,a=d,i=m):(c=s.$hash(),a=p,i=h),u=a[c],l=o(s,u),l===r)return r.$v;l!==!1&&l!==n&&(v.push(s),i[c]=u)}return f},y["$select!"]=v=function(){var e=this,t=v.$$p,$=t||n;if(v.$$p=null,$===!1||$===n)return e.$enum_for("select!");for(var o,a,i,s,c=e.map,u=e.smap,l=e.keys,_=n,p=0,d=l.length;d>p;p++){if(o=l[p],o.$$is_string?(a=o,map=u):(a=o.$hash(),map=c),i=map[a],s=$(o,i),s===r)return r.$v;(s===!1||s===n)&&(l.splice(p,1),delete map[a],d--,p--,_=e)}return _},y.$shift=function(){var e,t,r,$,o=this,a=o.keys,i=o.map,s=o.smap;return a.length?(t=a[0],t.$$is_string?(r=t,e=s):(r=t.$hash(),e=i),$=e[r],delete e[r],a.splice(0,1),[t,$]):n},e.defn(b,"$size",y.$length),b.$alias_method("store","[]="),y.$to_a=function(){for(var e,t,n=this,r=n.keys,$=n.map,o=n.smap,a=[],i=0,s=r.length;s>i;i++)t=r[i],t.$$is_string?(khash=t,e=o):(khash=t.$hash(),e=$),a.push([t,e[khash]]);return a},y.$to_h=function(){var t=this;if(t.$$class===e.Hash)return t;var n=new e.Hash.$$alloc,r=t.$clone();return n.map=r.map,n.smap=r.smap,n.keys=r.keys,n.none=r.none,n.proc=r.proc,n},y.$to_hash=function(){var e=this;return e},e.defn(b,"$to_s",y.$inspect),e.defn(b,"$update",y["$merge!"]),e.defn(b,"$value?",y["$has_value?"]),e.defn(b,"$values_at",y.$indexes),y.$values=function(){for(var e,t,n=this,r=n.map,$=n.smap,o=n.keys,a=[],i=0,s=o.length;s>i;i++)key=o[i],key.$$is_string?(t=key,e=$):(t=key.$hash(),e=r),a.push(e[t]);return a},n&&"values"}(t,null)},Opal.modules["corelib/string"]=function(Opal){function $rb_divide(e,t){return"number"==typeof e&&"number"==typeof t?e/t:e["$/"](t)}function $rb_plus(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}Opal.dynamic_require_severity="warning";var self=Opal.top,$scope=Opal,nil=Opal.nil,$breaker=Opal.breaker,$slice=Opal.slice,$klass=Opal.klass,$gvars=Opal.gvars;return Opal.add_stubs(["$require","$include","$coerce_to?","$coerce_to","$raise","$===","$format","$to_s","$respond_to?","$to_str","$<=>","$==","$=~","$new","$empty?","$ljust","$ceil","$rjust","$floor","$to_a","$each_char","$to_proc","$coerce_to!","$initialize_clone","$initialize_dup","$enum_for","$chomp","$[]","$to_i","$class","$each_line","$match","$captures","$try_convert","$proc","$shift","$__send__","$succ","$escape"]),self.$require("corelib/comparable"),function($base,$super){function $String(){}function char_class_from_char_sets(e){function t(e){var t,n,r,$,o,a,i="",s=e.length;for(t=0;s>t;t++)if(n=e.charAt(t),"-"===n&&t>0&&s-1>t&&!r){for($=e.charCodeAt(t-1),o=e.charCodeAt(t+1),$>o&&self.$raise($scope.get("ArgumentError"),'invalid range "'+$+"-"+o+'" in string transliteration'),a=$+1;o+1>a;a++)i+=String.fromCharCode(a);r=!0,t++}else r="\\"===n,i+=n;return i}function n(e,t){if(0===e.length)return t;var n,r,$="",o=e.length;for(n=0;o>n;n++)r=e.charAt(n),-1!==t.indexOf(r)&&($+=r);return $}var r,$,o,a,i,s,c="",u="";for(r=0,$=e.length;$>r;r++)o=$scope.get("Opal").$coerce_to(e[r],$scope.get("String"),"to_str"),a="^"===o.charAt(0)&&o.length>1,o=t(a?o.slice(1):o),a?u=n(u,o):c=n(c,o);if(c.length>0&&u.length>0){for(s="",r=0,$=c.length;$>r;r++)i=c.charAt(r),-1===u.indexOf(i)&&(s+=i);c=s,u=""}return c.length>0?"["+$scope.get("Regexp").$escape(c)+"]":u.length>0?"[^"+$scope.get("Regexp").$escape(u)+"]":null}var self=$String=$klass($base,$super,"String",$String),def=self.$$proto,$scope=self.$$scope,TMP_1,TMP_2,TMP_3,TMP_4,TMP_5,TMP_6,TMP_7,TMP_8,TMP_10;def.length=nil,self.$include($scope.get("Comparable")),def.$$is_string=!0,def.$__id__=function(){var e=this;return e.toString()},Opal.defn(self,"$object_id",def.$__id__),Opal.defs(self,"$try_convert",function(e){return $scope.get("Opal")["$coerce_to?"](e,$scope.get("String"),"to_str")}),Opal.defs(self,"$new",function(e){return null==e&&(e=""),e=$scope.get("Opal").$coerce_to(e,$scope.get("String"),"to_str"),new String(e)}),def.$initialize=function(e){var t=this;return void 0===e?t:t.$raise($scope.get("NotImplementedError"),"Mutable strings are not supported in Opal.")},def["$%"]=function(e){var t,n=this;return(t=$scope.get("Array")["$==="](e))===nil||t.$$is_boolean&&1!=t?n.$format(n,e):(t=n).$format.apply(t,[n].concat(e))},def["$*"]=function(e){var t=this;if(e=$scope.get("Opal").$coerce_to(e,$scope.get("Integer"),"to_int"),0>e&&t.$raise($scope.get("ArgumentError"),"negative argument"),0===e)return"";var n="",r=t.toString();for(r.length*e>=1<<28&&t.$raise($scope.get("RangeError"),"multiply count must not overflow maximum string size");1===(1&e)&&(n+=r),e>>>=1,0!==e;)r+=r;return n},def["$+"]=function(e){var t=this;return e=$scope.get("Opal").$coerce_to(e,$scope.get("String"),"to_str"),t+e.$to_s()},def["$<=>"]=function(e){var t,n=this;if((t=e["$respond_to?"]("to_str"))===nil||t.$$is_boolean&&1!=t){var r=e["$<=>"](n);return r===nil?nil:r>0?-1:0>r?1:0}return e=e.$to_str().$to_s(),n>e?1:e>n?-1:0},def["$<<"]=function(){var e=this;return e.$raise($scope.get("NotImplementedError"),"#<< not supported. Mutable String methods are not supported in Opal.")},def["$=="]=function(e){var t=this;return e.$$is_string?t.toString()===e.toString():$scope.get("Opal")["$respond_to?"](e,"to_str")?e["$=="](t):!1},Opal.defn(self,"$eql?",def["$=="]),Opal.defn(self,"$===",def["$=="]),def["$=~"]=function(e){var t=this;return e.$$is_string&&t.$raise($scope.get("TypeError"),"type mismatch: String given"),e["$=~"](t)},def["$[]"]=function(e,t){var n=this,r=n.length;if(e.$$is_range){var $=e.exclude,t=$scope.get("Opal").$coerce_to(e.end,$scope.get("Integer"),"to_int"),e=$scope.get("Opal").$coerce_to(e.begin,$scope.get("Integer"),"to_int");return Math.abs(e)>r?nil:(0>e&&(e+=r),0>t&&(t+=r),$||(t+=1),t-=e,0>t&&(t=0),n.substr(e,t))}if(e.$$is_string)return null!=t&&n.$raise($scope.get("TypeError")),-1!==n.indexOf(e)?e:nil;if(e.$$is_regexp){var o=n.match(e);return null===o?($gvars["~"]=nil,nil):($gvars["~"]=$scope.get("MatchData").$new(e,o),null==t?o[0]:(t=$scope.get("Opal").$coerce_to(t,$scope.get("Integer"),"to_int"),0>t&&-t<o.length?o[t+=o.length]:t>=0&&t<o.length?o[t]:nil))}return e=$scope.get("Opal").$coerce_to(e,$scope.get("Integer"),"to_int"),0>e&&(e+=r),null==t?e>=r||0>e?nil:n.substr(e,1):(t=$scope.get("Opal").$coerce_to(t,$scope.get("Integer"),"to_int"),0>t?nil:e>r||0>e?nil:n.substr(e,t))},def.$capitalize=function(){var e=this;return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()},Opal.defn(self,"$capitalize!",def["$<<"]),def.$casecmp=function(e){var t=this;e=$scope.get("Opal").$coerce_to(e,$scope.get("String"),"to_str").$to_s();var n=/^[\x00-\x7F]*$/;return n.test(t)&&n.test(e)&&(t=t.toLowerCase(),e=e.toLowerCase()),t["$<=>"](e)},def.$center=function(e,t){var n,r=this;if(null==t&&(t=" "),e=$scope.get("Opal").$coerce_to(e,$scope.get("Integer"),"to_int"),t=$scope.get("Opal").$coerce_to(t,$scope.get("String"),"to_str").$to_s(),(n=t["$empty?"]())===nil||n.$$is_boolean&&1!=n||r.$raise($scope.get("ArgumentError"),"zero width padding"),(n=e<=r.length)!==nil&&(!n.$$is_boolean||1==n))return r;var $=r.$ljust($rb_divide($rb_plus(e,r.length),2).$ceil(),t),o=r.$rjust($rb_divide($rb_plus(e,r.length),2).$floor(),t);return o+$.slice(r.length)},def.$chars=TMP_1=function(){var e,t,n=this,r=TMP_1.$$p,$=r||nil;return TMP_1.$$p=null,$===!1||$===nil?n.$each_char().$to_a():(e=(t=n).$each_char,e.$$p=$.$to_proc(),e).call(t)},def.$chomp=function(e){var t,n=this;if(null==$gvars["/"]&&($gvars["/"]=nil),null==e&&(e=$gvars["/"]),(t=e===nil||0===n.length)!==nil&&(!t.$$is_boolean||1==t))return n;if(e=$scope.get("Opal")["$coerce_to!"](e,$scope.get("String"),"to_str").$to_s(),"\n"===e)return n.replace(/\r?\n?$/,"");if(""===e)return n.replace(/(\r?\n)+$/,"");if(n.length>e.length){var r=n.substr(n.length-e.length,e.length);if(r===e)return n.substr(0,n.length-e.length)}return n},Opal.defn(self,"$chomp!",def["$<<"]),def.$chop=function(){var e=this,t=e.length;return 1>=t?"":"\n"===e.charAt(t-1)&&"\r"===e.charAt(t-2)?e.substr(0,t-2):e.substr(0,t-1)},Opal.defn(self,"$chop!",def["$<<"]),def.$chr=function(){var e=this;return e.charAt(0)},def.$clone=function(){var e=this,t=nil;return t=e.slice(),t.$initialize_clone(e),t},def.$dup=function(){var e=this,t=nil;return t=e.slice(),t.$initialize_dup(e),t},def.$count=function(e){var t=this;e=$slice.call(arguments,0),0===e.length&&t.$raise($scope.get("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var n=char_class_from_char_sets(e);return null===n?0:t.length-t.replace(new RegExp(n,"g"),"").length},def.$delete=function(e){var t=this;e=$slice.call(arguments,0),0===e.length&&t.$raise($scope.get("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var n=char_class_from_char_sets(e);return null===n?t:t.replace(new RegExp(n,"g"),"")},Opal.defn(self,"$dup",def.$clone),def.$downcase=function(){var e=this;return e.toLowerCase()},Opal.defn(self,"$downcase!",def["$<<"]),def.$each_char=TMP_2=function(){var e,t=this,n=TMP_2.$$p,r=n||nil;if(TMP_2.$$p=null,r===nil)return t.$enum_for("each_char");for(var $=0,o=t.length;o>$;$++)(e=Opal.yield1(r,t.charAt($)))===$breaker?$breaker.$v:e;return t},def.$each_line=TMP_3=function(e){var t,n=this,r=TMP_3.$$p,$=r||nil;if(null==$gvars["/"]&&($gvars["/"]=nil),null==e&&(e=$gvars["/"]),TMP_3.$$p=null,$===nil)return n.$enum_for("each_line",e);if(e===nil)return(t=Opal.yield1($,n))===$breaker?$breaker.$v:t,n;if(e=$scope.get("Opal").$coerce_to(e,$scope.get("String"),"to_str"),0===e.length){for(var o=n.split(/(\n{2,})/),a=0,i=o.length;i>a;a+=2)(o[a]||o[a+1])&&((t=Opal.yield1($,(o[a]||"")+(o[a+1]||"")))===$breaker?$breaker.$v:t);return n}for(var s=n.$chomp(e),c=n.length!=s.length,u=s.split(e),a=0,l=u.length;l>a;a++)l-1>a||c?(t=Opal.yield1($,u[a]+e))===$breaker?$breaker.$v:t:(t=Opal.yield1($,u[a]))===$breaker?$breaker.$v:t;return n},def["$empty?"]=function(){var e=this;return 0===e.length},def["$end_with?"]=function(e){var t=this;e=$slice.call(arguments,0);for(var n=0,r=e.length;r>n;n++){var $=$scope.get("Opal").$coerce_to(e[n],$scope.get("String"),"to_str").$to_s();if(t.length>=$.length&&t.substr(t.length-$.length,$.length)==$)return!0}return!1},Opal.defn(self,"$eql?",def["$=="]),Opal.defn(self,"$equal?",def["$==="]),def.$gsub=TMP_4=function(e,t){var n=this,r=TMP_4.$$p,$=r||nil;TMP_4.$$p=null;var o,a,i="",s=nil,c=0;for(e.$$is_regexp?e=new RegExp(e.source,"gm"+(e.ignoreCase?"i":"")):(e=$scope.get("Opal").$coerce_to(e,$scope.get("String"),"to_str"),e=new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));;){if(o=e.exec(n),null===o){$gvars["~"]=nil,i+=n.slice(c);break}s=$scope.get("MatchData").$new(e,o),void 0===t?($===nil&&n.$raise($scope.get("ArgumentError"),"wrong number of arguments (1 for 2)"),a=$(o[0])):t.$$is_hash?a=t["$[]"](o[0]).$to_s():(t.$$is_string||(t=$scope.get("Opal").$coerce_to(t,$scope.get("String"),"to_str")),a=t.replace(/([\\]+)([0-9+&`'])/g,function(e,t,r){if(t.length%2===0)return e;switch(r){case"+":for(var $=o.length-1;$>0;$--)if(void 0!==o[$])return t.slice(1)+o[$];return"";case"&":return t.slice(1)+o[0];case"`":return t.slice(1)+n.slice(0,o.index);case"'":return t.slice(1)+n.slice(o.index+o[0].length);default:return t.slice(1)+(o[r]||"")}}).replace(/\\\\/g,"\\")),e.lastIndex===o.index?(i+=a+n.slice(c,o.index+1),e.lastIndex+=1):i+=n.slice(c,o.index)+a,c=e.lastIndex}return $gvars["~"]=s,i},Opal.defn(self,"$gsub!",def["$<<"]),def.$hash=function(){var e=this;return e.toString()},def.$hex=function(){var e=this;return e.$to_i(16)},def["$include?"]=function(e){var t,n=this;return e.$$is_string?-1!==n.indexOf(e):(((t=e["$respond_to?"]("to_str"))===nil||t.$$is_boolean&&1!=t)&&n.$raise($scope.get("TypeError"),"no implicit conversion of "+e.$class()+" into String"),-1!==n.indexOf(e.$to_str()))},def.$index=function(e,t){var n,r,$,o=this;if(void 0===t)t=0;else if(t=$scope.get("Opal").$coerce_to(t,$scope.get("Integer"),"to_int"),0>t&&(t+=o.length,0>t))return nil;if(e.$$is_regexp)for($=new RegExp(e.source,"gm"+(e.ignoreCase?"i":""));;){if(r=$.exec(o),null===r){$gvars["~"]=nil,n=-1;break}if(r.index>=t){$gvars["~"]=$scope.get("MatchData").$new($,r),n=r.index;break}$.lastIndex=r.index+1}else e=$scope.get("Opal").$coerce_to(e,$scope.get("String"),"to_str"),n=0===e.length&&t>o.length?-1:o.indexOf(e,t);return-1===n?nil:n},def.$inspect=function(){var e=this,t=/[\\\"\x00-\x1f\x7f-\x9f\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n={"":"\\a","":"\\e","\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","":"\\v",'"':'\\"',"\\":"\\\\"},r=e.replace(t,function(e){return n[e]||"\\u"+("0000"+e.charCodeAt(0).toString(16).toUpperCase()).slice(-4)});return'"'+r.replace(/\#[\$\@\{]/g,"\\$&")+'"'},def.$intern=function(){var e=this;return e},def.$lines=TMP_5=function(e){var t,n,r=this,$=TMP_5.$$p,o=$||nil,a=nil;return null==$gvars["/"]&&($gvars["/"]=nil),null==e&&(e=$gvars["/"]),TMP_5.$$p=null,a=(t=(n=r).$each_line,t.$$p=o.$to_proc(),t).call(n,e),o!==!1&&o!==nil?r:a.$to_a()},def.$length=function(){var e=this;return e.length},def.$ljust=function(e,t){var n,r=this;if(null==t&&(t=" "),e=$scope.get("Opal").$coerce_to(e,$scope.get("Integer"),"to_int"),t=$scope.get("Opal").$coerce_to(t,$scope.get("String"),"to_str").$to_s(),(n=t["$empty?"]())===nil||n.$$is_boolean&&1!=n||r.$raise($scope.get("ArgumentError"),"zero width padding"),(n=e<=r.length)!==nil&&(!n.$$is_boolean||1==n))return r;var $=-1,o="";for(e-=r.length;++$<e;)o+=t;return r+o.slice(0,e)},def.$lstrip=function(){var e=this;return e.replace(/^\s*/,"")},Opal.defn(self,"$lstrip!",def["$<<"]),def.$match=TMP_6=function(e,t){var n,r,$=this,o=TMP_6.$$p,a=o||nil;return TMP_6.$$p=null,(n=(r=$scope.get("String")["$==="](e))!==!1&&r!==nil?r:e["$respond_to?"]("to_str"))===nil||n.$$is_boolean&&1!=n||(e=$scope.get("Regexp").$new(e.$to_str())),((n=$scope.get("Regexp")["$==="](e))===nil||n.$$is_boolean&&1!=n)&&$.$raise($scope.get("TypeError"),"wrong argument type "+e.$class()+" (expected Regexp)"),(n=(r=e).$match,n.$$p=a.$to_proc(),n).call(r,$,t)},def.$next=function(){var e=this,t=e.length;if(0===t)return"";for(var n,r=e,$=e.search(/[a-zA-Z0-9]/),o=!1;t--;){if(n=e.charCodeAt(t),n>=48&&57>=n||n>=65&&90>=n||n>=97&&122>=n)switch(n){case 57:o=!0,n=48;break;case 90:o=!0,n=65;break;case 122:o=!0,n=97;break;default:o=!1,n+=1}else-1===$?255===n?(o=!0,n=0):(o=!1,n+=1):o=!0;if(r=r.slice(0,t)+String.fromCharCode(n)+r.slice(t+1),o&&(0===t||t===$)){switch(n){case 65:break;case 97:break;default:n+=1}r=0===t?String.fromCharCode(n)+r:r.slice(0,t)+String.fromCharCode(n)+r.slice(t),o=!1}if(!o)break}return r},Opal.defn(self,"$next!",def["$<<"]),def.$oct=function(){var e,t=this,n=t,r=8;return/^\s*_/.test(n)?0:(n=n.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/i,function(e,t,n,$){switch($.charAt(0)){case"+":case"-":return e;case"0":if("x"===$.charAt(1)&&"0x"===n)return e}switch(n){case"0b":r=2;break;case"0":case"0o":r=8;break;case"0d":r=10;break;case"0x":r=16}return t+$}),e=parseInt(n.replace(/_(?!_)/g,""),r),isNaN(e)?0:e)},def.$ord=function(){var e=this;return e.charCodeAt(0)},def.$partition=function(e){var t,n,r=this;return e.$$is_regexp?(n=e.exec(r),null===n?t=-1:($scope.get("MatchData").$new(e,n),e=n[0],t=n.index)):(e=$scope.get("Opal").$coerce_to(e,$scope.get("String"),"to_str"),t=r.indexOf(e)),-1===t?[r,"",""]:[r.slice(0,t),r.slice(t,t+e.length),r.slice(t+e.length)]},def.$reverse=function(){var e=this;return e.split("").reverse().join("")},Opal.defn(self,"$reverse!",def["$<<"]),def.$rindex=function(e,t){var n,r,$,o,a=this;if(void 0===t)t=a.length;else if(t=$scope.get("Opal").$coerce_to(t,$scope.get("Integer"),"to_int"),0>t&&(t+=a.length,0>t))return nil;if(e.$$is_regexp){for(r=null,$=new RegExp(e.source,"gm"+(e.ignoreCase?"i":""));;){if(o=$.exec(a),null===o||o.index>t)break;r=o,$.lastIndex=r.index+1}null===r?($gvars["~"]=nil,n=-1):($scope.get("MatchData").$new($,r),n=r.index)}else e=$scope.get("Opal").$coerce_to(e,$scope.get("String"),"to_str"),n=a.lastIndexOf(e,t);return-1===n?nil:n},def.$rjust=function(e,t){var n,r=this;if(null==t&&(t=" "),e=$scope.get("Opal").$coerce_to(e,$scope.get("Integer"),"to_int"),t=$scope.get("Opal").$coerce_to(t,$scope.get("String"),"to_str").$to_s(),(n=t["$empty?"]())===nil||n.$$is_boolean&&1!=n||r.$raise($scope.get("ArgumentError"),"zero width padding"),(n=e<=r.length)!==nil&&(!n.$$is_boolean||1==n))return r;var $=Math.floor(e-r.length),o=Math.floor($/t.length),a=Array(o+1).join(t),i=$-a.length;return a+t.slice(0,i)+r},def.$rpartition=function(e){var t,n,r,$,o=this;if(e.$$is_regexp){for(n=null,r=new RegExp(e.source,"gm"+(e.ignoreCase?"i":""));;){if($=r.exec(o),null===$)break;n=$,r.lastIndex=n.index+1}null===n?t=-1:($scope.get("MatchData").$new(r,n),e=n[0],t=n.index)}else e=$scope.get("Opal").$coerce_to(e,$scope.get("String"),"to_str"),t=o.lastIndexOf(e);return-1===t?["","",o]:[o.slice(0,t),o.slice(t,t+e.length),o.slice(t+e.length)]},def.$rstrip=function(){var e=this;return e.replace(/[\s\u0000]*$/,"")},def.$scan=TMP_7=function(e){var t=this,n=TMP_7.$$p,r=n||nil;TMP_7.$$p=null;var $,o=[],a=nil;for(e.$$is_regexp?e=new RegExp(e.source,"gm"+(e.ignoreCase?"i":"")):(e=$scope.get("Opal").$coerce_to(e,$scope.get("String"),"to_str"),e=new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));null!=($=e.exec(t));)a=$scope.get("MatchData").$new(e,$),r===nil?o.push(1==$.length?$[0]:a.$captures()):1==$.length?r($[0]):r.call(t,a.$captures()),e.lastIndex===$.index&&(e.lastIndex+=1);return $gvars["~"]=a,r!==nil?t:o},Opal.defn(self,"$size",def.$length),Opal.defn(self,"$slice",def["$[]"]),Opal.defn(self,"$slice!",def["$<<"]),def.$split=function(pattern,limit){var self=this,$a;null==$gvars[";"]&&($gvars[";"]=nil),null==pattern&&(pattern=($a=$gvars[";"])!==!1&&$a!==nil?$a:" "),(pattern===nil||void 0===pattern)&&(pattern=$gvars[";"]);var result=[];if(void 0!==limit&&(limit=$scope.get("Opal")["$coerce_to!"](limit,$scope.get("Integer"),"to_int")),0===self.length)return[];if(1===limit)return[self];if(pattern&&pattern.$$is_regexp){var pattern_str=pattern.toString(),blank_pattern="/^/"==pattern_str.substr(0,3)||"/(?:)/"==pattern_str.substr(0,6);if(void 0===limit||0===limit)result=self.split(blank_pattern?/(?:)/:pattern);else{pattern.global||(pattern=eval(pattern_str+"g"));var match_data,prev_index=0;for(pattern.lastIndex=0;null!==(match_data=pattern.exec(self));){var segment=self.slice(prev_index,match_data.index);if(result.push(segment),prev_index=pattern.lastIndex,0===match_data[0].length){blank_pattern&&(pattern=/(?:)/),result=self.split(pattern),void 0!==limit&&0>limit&&blank_pattern&&result.push(""),prev_index=void 0;break}if(void 0!==limit&&limit>1&&result.length+1==limit)break}void 0!==prev_index&&result.push(self.slice(prev_index,self.length))}}else{var splitted=0,start=0,lim=0;pattern=pattern===nil||void 0===pattern?" ":$scope.get("Opal").$try_convert(pattern,$scope.get("String"),"to_str").$to_s();for(var string=" "==pattern?self.replace(/[\r\n\t\v]\s+/g," "):self,cursor=-1;(cursor=string.indexOf(pattern,start))>-1&&cursor<string.length&&splitted+1!==limit;)" "!=pattern||cursor!=start?(result.push(string.substr(start,pattern.length?cursor-start:1)),splitted++,start=cursor+(pattern.length?pattern.length:1)):start=cursor+1;string.length>0&&(0>limit||string.length>start)&&result.push(string.length==start?"":string.substr(start,string.length))}if(void 0===limit||0===limit)for(;""===result[result.length-1];)result.length=result.length-1;if(limit>0){var tail=result.slice(limit-1).join("");result.splice(limit-1,result.length-1,tail)}return result},def.$squeeze=function(e){var t=this;if(e=$slice.call(arguments,0),0===e.length)return t.replace(/(.)\1+/g,"$1");var n=char_class_from_char_sets(e);return null===n?t:t.replace(new RegExp("("+n+")\\1+","g"),"$1")},Opal.defn(self,"$squeeze!",def["$<<"]),def["$start_with?"]=function(e){var t=this;e=$slice.call(arguments,0);for(var n=0,r=e.length;r>n;n++){var $=$scope.get("Opal").$coerce_to(e[n],$scope.get("String"),"to_str").$to_s();if(0===t.indexOf($))return!0}return!1},def.$strip=function(){var e=this;return e.replace(/^\s*/,"").replace(/[\s\u0000]*$/,"")},Opal.defn(self,"$strip!",def["$<<"]),def.$sub=TMP_8=function(e,t){var n=this,r=TMP_8.$$p,$=r||nil;TMP_8.$$p=null,e.$$is_regexp||(e=$scope.get("Opal").$coerce_to(e,$scope.get("String"),"to_str"),e=new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")));var o=e.exec(n);return null===o?($gvars["~"]=nil,n.toString()):($scope.get("MatchData").$new(e,o),void 0===t?($===nil&&n.$raise($scope.get("ArgumentError"),"wrong number of arguments (1 for 2)"),n.slice(0,o.index)+$(o[0])+n.slice(o.index+o[0].length)):t.$$is_hash?n.slice(0,o.index)+t["$[]"](o[0]).$to_s()+n.slice(o.index+o[0].length):(t=$scope.get("Opal").$coerce_to(t,$scope.get("String"),"to_str"),t=t.replace(/([\\]+)([0-9+&`'])/g,function(e,t,r){if(t.length%2===0)return e;switch(r){case"+":for(var $=o.length-1;$>0;$--)if(void 0!==o[$])return t.slice(1)+o[$];return"";case"&":return t.slice(1)+o[0];case"`":return t.slice(1)+n.slice(0,o.index);case"'":return t.slice(1)+n.slice(o.index+o[0].length);default:return t.slice(1)+(o[r]||"")}}).replace(/\\\\/g,"\\"),n.slice(0,o.index)+t+n.slice(o.index+o[0].length)))},Opal.defn(self,"$sub!",def["$<<"]),Opal.defn(self,"$succ",def.$next),Opal.defn(self,"$succ!",def["$<<"]),def.$sum=function(e){var t=this;null==e&&(e=16),e=$scope.get("Opal").$coerce_to(e,$scope.get("Integer"),"to_int");for(var n=0,r=t.length,$=0;r>$;$++)n+=t.charCodeAt($);return 0>=e?n:n&Math.pow(2,e)-1},def.$swapcase=function(){var e=this,t=e.replace(/([a-z]+)|([A-Z]+)/g,function(e,t){return t?e.toUpperCase():e.toLowerCase()});return e.constructor===String?t:e.$class().$new(t)},Opal.defn(self,"$swapcase!",def["$<<"]),def.$to_f=function(){var e=this;if("_"===e.charAt(0))return 0;var t=parseFloat(e.replace(/_/g,""));return isNaN(t)||1/0==t||t==-1/0?0:t},def.$to_i=function(e){var t=this;null==e&&(e=10);var n,r=t.toLowerCase(),$=$scope.get("Opal").$coerce_to(e,$scope.get("Integer"),"to_int");return(1===$||0>$||$>36)&&t.$raise($scope.get("ArgumentError"),"invalid radix "+$),/^\s*_/.test(r)?0:(r=r.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/,function(e,t,n,r){switch(r.charAt(0)){case"+":case"-":return e;case"0":if("x"===r.charAt(1)&&"0x"===n&&(0===$||16===$))return e}switch(n){case"0b":if(0===$||2===$)return $=2,t+r;break;case"0":case"0o":if(0===$||8===$)return $=8,t+r;break;case"0d":if(0===$||10===$)return $=10,t+r;break;case"0x":if(0===$||16===$)return $=16,t+r}return e}),n=parseInt(r.replace(/_(?!_)/g,""),$),isNaN(n)?0:n)},def.$to_proc=function(){var e,t,n,r=this,$=nil;return $=r,(e=(t=r).$proc,e.$$p=(n=function(e){var t,r,o,a=n.$$s||this,i=nil;return e=$slice.call(arguments,0),t=n.$$p||nil,n.$$p=null,(r=e["$empty?"]())===nil||r.$$is_boolean&&1!=r||a.$raise($scope.get("ArgumentError"),"no receiver given"),i=e.$shift(),(r=(o=i).$__send__,r.$$p=t.$to_proc(),r).apply(o,[$].concat(e))},n.$$s=r,n),e).call(t)},def.$to_s=function(){var e=this;return e.toString()},Opal.defn(self,"$to_str",def.$to_s),Opal.defn(self,"$to_sym",def.$intern),def.$tr=function(e,t){var n=this;if(e=$scope.get("Opal").$coerce_to(e,$scope.get("String"),"to_str").$to_s(),t=$scope.get("Opal").$coerce_to(t,$scope.get("String"),"to_str").$to_s(),0==e.length||e===t)return n;var r={},$=e.split(""),o=$.length,a=t.split(""),i=a.length,s=!1,c=null;"^"===$[0]&&$.length>1&&(s=!0,$.shift(),c=a[i-1],o-=1);for(var u=[],l=null,_=!1,p=0;o>p;p++){var d=$[p];if(null==l)l=d,u.push(d);else if("-"===d)"-"===l?(u.push("-"),u.push("-")):p==o-1?u.push("-"):_=!0;else if(_){var f=l.charCodeAt(0),h=d.charCodeAt(0);f>h&&n.$raise($scope.get("ArgumentError"),'invalid range "'+String.fromCharCode(f)+"-"+String.fromCharCode(h)+'" in string transliteration');for(var m=f+1;h>m;m++)u.push(String.fromCharCode(m));u.push(d),_=null,l=null}else u.push(d)}if($=u,o=$.length,s)for(var p=0;o>p;p++)r[$[p]]=!0;else{if(i>0){for(var g=[],v=null,_=!1,p=0;i>p;p++){var d=a[p];if(null==l)l=d,g.push(d);else if("-"===d)"-"===v?(g.push("-"),g.push("-")):p==i-1?g.push("-"):_=!0;else if(_){var f=l.charCodeAt(0),h=d.charCodeAt(0);f>h&&n.$raise($scope.get("ArgumentError"),'invalid range "'+String.fromCharCode(f)+"-"+String.fromCharCode(h)+'" in string transliteration');for(var m=f+1;h>m;m++)g.push(String.fromCharCode(m));g.push(d),_=null,l=null}else g.push(d)}a=g,i=a.length}var b=o-i;if(b>0)for(var y=i>0?a[i-1]:"",p=0;b>p;p++)a.push(y);for(var p=0;o>p;p++)r[$[p]]=a[p]}for(var x="",p=0,w=n.length;w>p;p++){var d=n.charAt(p),k=r[d];x+=s?null==k?c:d:null!=k?k:d}return x},Opal.defn(self,"$tr!",def["$<<"]),def.$tr_s=function(e,t){var n=this;if(e=$scope.get("Opal").$coerce_to(e,$scope.get("String"),"to_str").$to_s(),t=$scope.get("Opal").$coerce_to(t,$scope.get("String"),"to_str").$to_s(),0==e.length)return n;var r={},$=e.split(""),o=$.length,a=t.split(""),i=a.length,s=!1,c=null;"^"===$[0]&&$.length>1&&(s=!0,$.shift(),c=a[i-1],o-=1);for(var u=[],l=null,_=!1,p=0;o>p;p++){var d=$[p];if(null==l)l=d,u.push(d);else if("-"===d)"-"===l?(u.push("-"),u.push("-")):p==o-1?u.push("-"):_=!0;else if(_){var f=l.charCodeAt(0),h=d.charCodeAt(0);f>h&&n.$raise($scope.get("ArgumentError"),'invalid range "'+String.fromCharCode(f)+"-"+String.fromCharCode(h)+'" in string transliteration');for(var m=f+1;h>m;m++)u.push(String.fromCharCode(m));u.push(d),_=null,l=null}else u.push(d)}if($=u,o=$.length,s)for(var p=0;o>p;p++)r[$[p]]=!0;else{if(i>0){for(var g=[],v=null,_=!1,p=0;i>p;p++){var d=a[p];if(null==l)l=d,g.push(d);else if("-"===d)"-"===v?(g.push("-"),g.push("-")):p==i-1?g.push("-"):_=!0;else if(_){var f=l.charCodeAt(0),h=d.charCodeAt(0);f>h&&n.$raise($scope.get("ArgumentError"),'invalid range "'+String.fromCharCode(f)+"-"+String.fromCharCode(h)+'" in string transliteration');for(var m=f+1;h>m;m++)g.push(String.fromCharCode(m));g.push(d),_=null,l=null}else g.push(d)}a=g,i=a.length}var b=o-i;if(b>0)for(var y=i>0?a[i-1]:"",p=0;b>p;p++)a.push(y);for(var p=0;o>p;p++)r[$[p]]=a[p]}for(var x="",w=null,p=0,k=n.length;k>p;p++){var d=n.charAt(p),E=r[d];s?null==E?null==w&&(x+=c,w=!0):(x+=d,w=null):null!=E?(null==w||w!==E)&&(x+=E,w=E):(x+=d,w=null)}return x},Opal.defn(self,"$tr_s!",def["$<<"]),def.$upcase=function(){var e=this;return e.toUpperCase()},Opal.defn(self,"$upcase!",def["$<<"]),def.$freeze=function(){var e=this;return e},def["$frozen?"]=function(){return!0
},def.$upto=TMP_10=function(e,t){var n=this,r=TMP_10.$$p,$=r||nil;if(null==t&&(t=!1),TMP_10.$$p=null,$===nil)return n.$enum_for("upto",e,t);e=$scope.get("Opal").$coerce_to(e,$scope.get("String"),"to_str");var o,a,i=n.toString();if(1===i.length&&1===e.length)for(o=i.charCodeAt(0),a=e.charCodeAt(0);a>=o&&(!t||o!==a);)$(String.fromCharCode(o)),o+=1;else if(parseInt(i).toString()===i&&parseInt(e).toString()===e)for(o=parseInt(i),a=parseInt(e);a>=o&&(!t||o!==a);)$(o.toString()),o+=1;else for(;i.length<=e.length&&e>=i&&(!t||i!==e);)$(i),i=i.$succ();return n}}(self,null),Opal.cdecl($scope,"Symbol",$scope.get("String"))},Opal.modules["corelib/string/inheritance"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}e.dynamic_require_severity="warning";var r=e.top,$=e,o=e.nil,a=(e.breaker,e.slice),i=e.klass;return e.add_stubs(["$new","$allocate","$initialize","$to_proc","$__send__","$class","$clone","$respond_to?","$==","$inspect"]),function(t,$super){function n(){}var r=n=i(t,$super,"String",n),$=(r.$$proto,r.$$scope);return e.defs(r,"$inherited",function(e){var t=o;t=$.get("Class").$new($.get("String").$$scope.get("Wrapper")),e.$$proto=t.$$proto,e.$$proto.$$class=e,e.$$alloc=t.$$alloc,e.$$parent=$.get("String").$$scope.get("Wrapper"),e.$allocate=t.$allocate,e.$new=t.$new}),o&&"inherited"}(r,null),function(r,$super){function $(){}{var s,c,u,l,_=$=i(r,$super,"Wrapper",$),p=_.$$proto;_.$$scope}return p.literal=o,p.$$is_string=!0,e.defs(_,"$allocate",s=function(t){var n=this,r=(s.$$p,o);return null==t&&(t=""),s.$$p=null,r=e.find_super_dispatcher(n,"allocate",s,null,$).apply(n,[]),r.literal=t,r}),e.defs(_,"$new",c=function(e){var t,n,r=this,$=c.$$p,i=$||o,s=o;return e=a.call(arguments,0),c.$$p=null,s=r.$allocate(),(t=(n=s).$initialize,t.$$p=i.$to_proc(),t).apply(n,[].concat(e)),s}),e.defs(_,"$[]",function(e){var t=this;return e=a.call(arguments,0),t.$allocate(e)}),p.$initialize=function(e){var t=this;return null==e&&(e=""),t.literal=e},p.$method_missing=u=function(e){var t,n,r=this,$=u.$$p,i=$||o,s=o;return e=a.call(arguments,0),u.$$p=null,s=(t=(n=r.literal).$__send__,t.$$p=i.$to_proc(),t).apply(n,[].concat(e)),(t=null!=s.$$is_string)===o||t.$$is_boolean&&1!=t?s:(t=s==r.literal)===o||t.$$is_boolean&&1!=t?r.$class().$allocate(s):r},p.$initialize_copy=function(e){var t=this;return t.literal=e.literal.$clone()},p["$respond_to?"]=l=function(t){var n,r=a.call(arguments,0),$=this,i=l.$$p;return l.$$p=null,(n=e.find_super_dispatcher($,"respond_to?",l,i).apply($,r))!==!1&&n!==o?n:$.literal["$respond_to?"](t)},p["$=="]=function(e){var t=this;return t.literal["$=="](e)},e.defn(_,"$eql?",p["$=="]),e.defn(_,"$===",p["$=="]),p.$to_s=function(){var e=this;return e.literal},e.defn(_,"$to_str",p.$to_s),p.$inspect=function(){var e=this;return e.literal.$inspect()},p["$+"]=function(e){var n=this;return t(n.literal,e)},p["$*"]=function(e){var t=this,r=n(t.literal,e);return r.$$is_string?t.$class().$allocate(r):r},o&&"*"}($.get("String"),null)},Opal.modules["corelib/match_data"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.klass,o=e.gvars;return e.add_stubs(["$attr_reader","$[]","$raise","$===","$inspect","$to_a","$coerce_to!"]),function(t,$super){function a(){}var i=a=$(t,$super,"MatchData",a),s=i.$$proto,c=i.$$scope;return s.matches=n,i.$attr_reader("post_match","pre_match","regexp","string"),s.$initialize=function(e,t){var r=this;o["~"]=r,r.regexp=e,r.begin=t.index,r.string=t.input,r.pre_match=t.input.slice(0,t.index),r.post_match=t.input.slice(t.index+t[0].length),r.matches=[];for(var $=0,a=t.length;a>$;$++){var i=t[$];r.matches.push(null==i?n:i)}},s["$[]"]=function(e){var t,n=this;return e=r.call(arguments,0),(t=n.matches)["$[]"].apply(t,[].concat(e))},s.$offset=function(e){var t=this;return 0!==e&&t.$raise(c.get("ArgumentError"),"MatchData#offset only supports 0th element"),[t.begin,t.begin+t.matches[e].length]},s["$=="]=function(e){var t,r,$,o,a=this;return(t=c.get("MatchData")["$==="](e))===n||t.$$is_boolean&&1!=t?!1:(o=a.string==e.string,$=o!==!1&&o!==n?a.regexp.toString()==e.regexp.toString():o,r=$!==!1&&$!==n?a.pre_match==e.pre_match:$,t=r!==!1&&r!==n?a.post_match==e.post_match:r,t!==!1&&t!==n?a.begin==e.begin:t)},e.defn(i,"$eql?",s["$=="]),s.$begin=function(e){var t=this;return 0!==e&&t.$raise(c.get("ArgumentError"),"MatchData#begin only supports 0th element"),t.begin},s.$end=function(e){var t=this;return 0!==e&&t.$raise(c.get("ArgumentError"),"MatchData#end only supports 0th element"),t.begin+t.matches[e].length},s.$captures=function(){var e=this;return e.matches.slice(1)},s.$inspect=function(){for(var e=this,t="#<MatchData "+e.matches[0].$inspect(),n=1,r=e.matches.length;r>n;n++)t+=" "+n+":"+e.matches[n].$inspect();return t+">"},s.$length=function(){var e=this;return e.matches.length},e.defn(i,"$size",s.$length),s.$to_a=function(){var e=this;return e.matches},s.$to_s=function(){var e=this;return e.matches[0]},s.$values_at=function(e){var t=this;e=r.call(arguments,0);var $,o,a,i=[];for($=0;$<e.length;$++)e[$].$$is_range&&(o=e[$].$to_a(),o.unshift($,1),Array.prototype.splice.apply(e,o)),a=c.get("Opal")["$coerce_to!"](e[$],c.get("Integer"),"to_int"),i.push(0>a&&(a+=t.matches.length,0>a)?n:t.matches[a]);return i},n&&"values_at"}(t,null)},Opal.modules["corelib/numeric"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function $(e,t){return"number"==typeof e&&"number"==typeof t?e/t:e["$/"](t)}e.dynamic_require_severity="warning";var o=e.top,a=e,i=e.nil,s=e.breaker,c=e.slice,u=e.klass;return e.add_stubs(["$require","$include","$coerce","$===","$raise","$class","$__send__","$send_coerced","$coerce_to!","$-@","$**","$respond_to?","$==","$enum_for","$gcd","$lcm","$floor","$%"]),o.$require("corelib/comparable"),function(o,$super){function a(){}var l,_,p,d,f,h,m=a=u(o,$super,"Numeric",a),g=m.$$proto,v=m.$$scope;return m.$include(v.get("Comparable")),g.$$is_number=!0,g.$__id__=function(){var e=this;return 2*e+1},e.defn(m,"$object_id",g.$__id__),g.$coerce=function(e,t){var n=this,r=i;null==t&&(t="operation");try{return e.$$is_number?[n,e]:e.$coerce(n)}catch($){return function(){return r=t,"operation"["$==="](r)?n.$raise(v.get("TypeError"),""+e.$class()+" can't be coerced into Numeric"):"comparison"["$==="](r)?n.$raise(v.get("ArgumentError"),"comparison of "+n.$class()+" with "+e.$class()+" failed"):i}()}},g.$send_coerced=function(t,n){var r,$=this,o=i,a=i,s=i,c=i;return o=function(){return a=t,"+"["$==="](a)||"-"["$==="](a)||"*"["$==="](a)||"/"["$==="](a)||"%"["$==="](a)||"&"["$==="](a)||"|"["$==="](a)||"^"["$==="](a)||"**"["$==="](a)?"operation":">"["$==="](a)||">="["$==="](a)||"<"["$==="](a)||"<="["$==="](a)||"<=>"["$==="](a)?"comparison":i}(),r=e.to_ary($.$coerce(n,o)),s=null==r[0]?i:r[0],c=null==r[1]?i:r[1],s.$__send__(t,c)},g["$+"]=function(e){var t=this;return e.$$is_number?t+e:t.$send_coerced("+",e)},g["$-"]=function(e){var t=this;return e.$$is_number?t-e:t.$send_coerced("-",e)},g["$*"]=function(e){var t=this;return e.$$is_number?t*e:t.$send_coerced("*",e)},g["$/"]=function(e){var t=this;return e.$$is_number?t/e:t.$send_coerced("/",e)},g["$%"]=function(e){var t=this;return e.$$is_number?0>e||0>t?(t%e+e)%e:t%e:t.$send_coerced("%",e)},g["$&"]=function(e){var t=this;return e.$$is_number?t&e:t.$send_coerced("&",e)},g["$|"]=function(e){var t=this;return e.$$is_number?t|e:t.$send_coerced("|",e)},g["$^"]=function(e){var t=this;return e.$$is_number?t^e:t.$send_coerced("^",e)},g["$<"]=function(e){var t=this;return e.$$is_number?e>t:t.$send_coerced("<",e)},g["$<="]=function(e){var t=this;return e.$$is_number?e>=t:t.$send_coerced("<=",e)},g["$>"]=function(e){var t=this;return e.$$is_number?t>e:t.$send_coerced(">",e)},g["$>="]=function(e){var t=this;return e.$$is_number?t>=e:t.$send_coerced(">=",e)},g["$<=>"]=function(t){var n=this;try{return t.$$is_number?n>t?1:t>n?-1:0:n.$send_coerced("<=>",t)}catch(r){if(e.rescue(r,[v.get("ArgumentError")]))return i;throw r}},g["$<<"]=function(e){var t=this;return e=v.get("Opal")["$coerce_to!"](e,v.get("Integer"),"to_int"),e>0?t<<e:t>>-e},g["$>>"]=function(e){var t=this;return e=v.get("Opal")["$coerce_to!"](e,v.get("Integer"),"to_int"),e>0?t>>e:t<<-e},g["$[]"]=function(e){var n=this,r=i,$=i;return e=v.get("Opal")["$coerce_to!"](e,v.get("Integer"),"to_int"),r=2["$**"](30)["$-@"](),$=t(2["$**"](30),1),r>e||e>$?0:(n>>e)%2},g["$+@"]=function(){var e=this;return+e},g["$-@"]=function(){var e=this;return-e},g["$~"]=function(){var e=this;return~e},g["$**"]=function(e){var t=this;return e.$$is_number?Math.pow(t,e):t.$send_coerced("**",e)},g["$=="]=function(e){var t=this;return e.$$is_number?t==Number(e):e["$respond_to?"]("==")?e["$=="](t):!1},g.$abs=function(){var e=this;return Math.abs(e)},g.$ceil=function(){var e=this;return Math.ceil(e)},g.$chr=function(){var e=this;return String.fromCharCode(e)},g.$conj=function(){var e=this;return e},e.defn(m,"$conjugate",g.$conj),g.$downto=l=function(e){var t=this,n=l.$$p,r=n||i;if(l.$$p=null,r===!1||r===i)return t.$enum_for("downto",e);e.$$is_number||t.$raise(v.get("ArgumentError"),"comparison of "+t.$class()+" with "+e.$class()+" failed");for(var $=t;$>=e;$--)if(r($)===s)return s.$v;return t},e.defn(m,"$eql?",g["$=="]),g["$equal?"]=function(e){var t,n=this;return(t=n["$=="](e))!==!1&&t!==i?t:isNaN(n)&&isNaN(e)},g["$even?"]=function(){var e=this;return e%2===0},g.$floor=function(){var e=this;return Math.floor(e)},g.$gcd=function(e){var t,n=this;((t=v.get("Integer")["$==="](e))===i||t.$$is_boolean&&1!=t)&&n.$raise(v.get("TypeError"),"not an integer");for(var r=Math.abs(n),$=Math.abs(e);r>0;){var o=r;r=$%r,$=o}return $},g.$gcdlcm=function(){var e=this;return[e.$gcd(),e.$lcm()]},g.$hash=function(){var e=this;return"Numeric:"+e.toString()},g["$integer?"]=function(){var e=this;return e%1===0},g["$is_a?"]=_=function(t){var n,r,$=c.call(arguments,0),o=this,a=_.$$p;return _.$$p=null,((n=(r=t["$=="](v.get("Fixnum")))?v.get("Integer")["$==="](o):r)===i||n.$$is_boolean&&1!=n)&&((n=(r=t["$=="](v.get("Integer")))?v.get("Integer")["$==="](o):r)===i||n.$$is_boolean&&1!=n)&&((n=(r=t["$=="](v.get("Float")))?v.get("Float")["$==="](o):r)===i||n.$$is_boolean&&1!=n)?e.find_super_dispatcher(o,"is_a?",_,a).apply(o,$):!0},e.defn(m,"$kind_of?",g["$is_a?"]),g["$instance_of?"]=p=function(t){var n,r,$=c.call(arguments,0),o=this,a=p.$$p;return p.$$p=null,((n=(r=t["$=="](v.get("Fixnum")))?v.get("Integer")["$==="](o):r)===i||n.$$is_boolean&&1!=n)&&((n=(r=t["$=="](v.get("Integer")))?v.get("Integer")["$==="](o):r)===i||n.$$is_boolean&&1!=n)&&((n=(r=t["$=="](v.get("Float")))?v.get("Float")["$==="](o):r)===i||n.$$is_boolean&&1!=n)?e.find_super_dispatcher(o,"instance_of?",p,a).apply(o,$):!0},g.$lcm=function(e){var t,n=this;return((t=v.get("Integer")["$==="](e))===i||t.$$is_boolean&&1!=t)&&n.$raise(v.get("TypeError"),"not an integer"),0==n||0==e?0:Math.abs(n*e/n.$gcd(e))},e.defn(m,"$magnitude",g.$abs),e.defn(m,"$modulo",g["$%"]),g.$next=function(){var e=this;return e+1},g["$nonzero?"]=function(){var e=this;return 0==e?i:e},g["$odd?"]=function(){var e=this;return e%2!==0},g.$ord=function(){var e=this;return e},g.$pred=function(){var e=this;return e-1},g.$round=function(e){var t=this;null==e&&(e=0);var n=Math.pow(10,e);return Math.round(t*n)/n},g.$step=d=function(e,t){var n,r=this,$=d.$$p,o=$||i;if(null==t&&(t=1),d.$$p=null,o===!1||o===i)return r.$enum_for("step",e,t);(n=0==t)===i||n.$$is_boolean&&1!=n||r.$raise(v.get("ArgumentError"),"step cannot be 0");var a=r;if(t>0)for(;e>=a;)o(a),a+=t;else for(;a>=e;)o(a),a+=t;return r},e.defn(m,"$succ",g.$next),g.$times=f=function(){var e=this,t=f.$$p,n=t||i;if(f.$$p=null,n===!1||n===i)return e.$enum_for("times");for(var r=0;e>r;r++)if(n(r)===s)return s.$v;return e},g.$to_f=function(){var e=this;return e},g.$to_i=function(){var e=this;return parseInt(e)},e.defn(m,"$to_int",g.$to_i),g.$to_s=function(e){var t,$,o=this;return null==e&&(e=10),(t=($=n(e,2))!==!1&&$!==i?$:r(e,36))===i||t.$$is_boolean&&1!=t||o.$raise(v.get("ArgumentError"),"base must be between 2 and 36"),o.toString(e)},e.defn(m,"$inspect",g.$to_s),g.$divmod=function(e){var t=this,n=i,r=i;return n=$(t,e).$floor(),r=t["$%"](e),[n,r]},g.$upto=h=function(e){var t=this,n=h.$$p,r=n||i;if(h.$$p=null,r===!1||r===i)return t.$enum_for("upto",e);e.$$is_number||t.$raise(v.get("ArgumentError"),"comparison of "+t.$class()+" with "+e.$class()+" failed");for(var $=t;e>=$;$++)if(r($)===s)return s.$v;return t},g["$zero?"]=function(){var e=this;return 0==e},g.$size=function(){return 4},g["$nan?"]=function(){var e=this;return isNaN(e)},g["$finite?"]=function(){var e=this;return 1/0!=e&&e!=-1/0},g["$infinite?"]=function(){var e=this;return 1/0==e?1:e==-1/0?-1:i},g["$positive?"]=function(){var e=this;return 1/e>0},g["$negative?"]=function(){var e=this;return 0>1/e},i&&"negative?"}(o,null),e.cdecl(a,"Fixnum",a.get("Numeric")),function(t,$super){function n(){}{var r=n=u(t,$super,"Integer",n);r.$$proto,r.$$scope}return e.defs(r,"$===",function(e){return e.$$is_number?e%1===0:!1}),i&&"==="}(o,a.get("Numeric")),function(t,$super){function n(){}var r,$=n=u(t,$super,"Float",n),o=($.$$proto,$.$$scope);return e.defs($,"$===",function(e){return!!e.$$is_number}),e.cdecl(o,"INFINITY",1/0),e.cdecl(o,"NAN",0/0),(r="undefined"!=typeof Number.EPSILON)===i||r.$$is_boolean&&1!=r?e.cdecl(o,"EPSILON",2.220446049250313e-16):e.cdecl(o,"EPSILON",Number.EPSILON)}(o,a.get("Numeric"))},Opal.modules["corelib/complex"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e,r=e.nil,$=(e.breaker,e.slice,e.klass);return function(e,$super){function t(){}{var n=t=$(e,$super,"Complex",t);n.$$proto,n.$$scope}return r}(t,n.get("Numeric"))},Opal.modules["corelib/rational"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e,r=e.nil,$=(e.breaker,e.slice,e.klass);return function(e,$super){function t(){}{var n=t=$(e,$super,"Rational",t);n.$$proto,n.$$scope}return r}(t,n.get("Numeric"))},Opal.modules["corelib/proc"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=e.breaker,$=e.slice,o=e.klass;return e.add_stubs(["$raise"]),function(t,$super){function a(){}var i,s,c=a=o(t,$super,"Proc",a),u=c.$$proto,l=c.$$scope;return u.$$is_proc=!0,u.$$is_lambda=!1,e.defs(c,"$new",i=function(){var e=this,t=i.$$p,r=t||n;return i.$$p=null,r!==!1&&r!==n||e.$raise(l.get("ArgumentError"),"tried to create a Proc object without a block"),r}),u.$call=s=function(t){var o=this,a=s.$$p,i=a||n;t=$.call(arguments,0),s.$$p=null,i!==n&&(o.$$p=i);var c;return c=o.$$is_lambda?o.apply(null,t):e.yieldX(o,t),c===r?r.$v:c},e.defn(c,"$[]",u.$call),u.$to_proc=function(){var e=this;return e},u["$lambda?"]=function(){var e=this;return!!e.$$is_lambda},u.$arity=function(){var e=this;return e.length},n&&"arity"}(t,null)},Opal.modules["corelib/method"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.klass;return e.add_stubs(["$attr_reader","$class","$arity","$new","$name"]),function(t,$super){function o(){}var a,i=o=$(t,$super,"Method",o),s=i.$$proto,c=i.$$scope;return s.method=s.receiver=s.owner=s.name=s.obj=n,i.$attr_reader("owner","receiver","name"),s.$initialize=function(e,t,n){var r=this;return r.receiver=e,r.owner=e.$class(),r.name=n,r.method=t},s.$arity=function(){var e=this;return e.method.$arity()},s.$call=a=function(e){var t=this,$=a.$$p,o=$||n;return e=r.call(arguments,0),a.$$p=null,t.method.$$p=o,t.method.apply(t.receiver,e)},e.defn(i,"$[]",s.$call),s.$unbind=function(){var e=this;return c.get("UnboundMethod").$new(e.owner,e.method,e.name)},s.$to_proc=function(){var e=this;return e.method},s.$inspect=function(){var e=this;return"#<Method: "+e.obj.$class()+"#"+e.name+"}>"},n&&"inspect"}(t,null),function(e,$super){function t(){}var r=t=$(e,$super,"UnboundMethod",t),o=r.$$proto,a=r.$$scope;return o.method=o.name=o.owner=n,r.$attr_reader("owner","name"),o.$initialize=function(e,t,n){var r=this;return r.owner=e,r.method=t,r.name=n},o.$arity=function(){var e=this;return e.method.$arity()},o.$bind=function(e){var t=this;return a.get("Method").$new(e,t.method,t.name)},o.$inspect=function(){var e=this;return"#<UnboundMethod: "+e.owner.$name()+"#"+e.name+">"},n&&"inspect"}(t,null)},Opal.modules["corelib/range"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?t>=e:e["$<="](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.dynamic_require_severity="warning";var $=e.top,o=e.nil,a=e.breaker,i=e.slice,s=e.klass;return e.add_stubs(["$require","$include","$attr_reader","$<=>","$raise","$include?","$enum_for","$succ","$!","$==","$===","$exclude_end?","$eql?","$begin","$end","$abs","$to_i","$inspect"]),$.$require("corelib/enumerable"),function($,$super){function c(){}var u,l,_,p=c=s($,$super,"Range",c),d=p.$$proto,f=p.$$scope;return d.begin=d.exclude=d.end=o,p.$include(f.get("Enumerable")),d.$$is_range=!0,p.$attr_reader("begin","end"),d.$initialize=function(e,t,n){var r,$=this;return null==n&&(n=!1),((r=e["$<=>"](t))===o||r.$$is_boolean&&1!=r)&&$.$raise(f.get("ArgumentError")),$.begin=e,$.end=t,$.exclude=n},d["$=="]=function(e){var t=this;return e.$$is_range?t.exclude===e.exclude&&t.begin==e.begin&&t.end==e.end:!1},d["$==="]=function(e){var t=this;return t["$include?"](e)},d["$cover?"]=function(e){var r,$,a=this;return(r=t(a.begin,e))?function(){return($=a.exclude)===o||$.$$is_boolean&&1!=$?t(e,a.end):n(e,a.end)}():r},d.$each=u=function(){var t,r,$=this,i=u.$$p,s=i||o,c=o,l=o;if(u.$$p=null,s===o)return $.$enum_for("each");for(c=$.begin,l=$.end;n(c,l);){if(e.yield1(s,c)===a)return a.$v;c=c.$succ()}return r=$.exclude["$!"](),(t=r!==!1&&r!==o?c["$=="](l):r)===o||t.$$is_boolean&&1!=t||e.yield1(s,c)!==a?$:a.$v},d["$eql?"]=function(e){var t,n,r=this;return(t=f.get("Range")["$==="](e))===o||t.$$is_boolean&&1!=t?!1:(n=r.exclude["$==="](e["$exclude_end?"]()),t=n!==!1&&n!==o?r.begin["$eql?"](e.$begin()):n,t!==!1&&t!==o?r.end["$eql?"](e.$end()):t)},d["$exclude_end?"]=function(){var e=this;return e.exclude},e.defn(p,"$first",d.$begin),e.defn(p,"$include?",d["$cover?"]),e.defn(p,"$last",d.$end),d.$max=l=function(){var t=i.call(arguments,0),n=this,r=l.$$p,$=r||o;return l.$$p=null,$!==o?e.find_super_dispatcher(n,"max",l,r).apply(n,t):n.exclude?n.end-1:n.end},e.defn(p,"$member?",d["$cover?"]),d.$min=_=function(){var t=i.call(arguments,0),n=this,r=_.$$p,$=r||o;return _.$$p=null,$!==o?e.find_super_dispatcher(n,"min",_,r).apply(n,t):n.begin},e.defn(p,"$member?",d["$include?"]),d.$size=function(){var e,t,$=this,a=o,i=o,s=o;return a=$.begin,i=$.end,(e=$.exclude)===o||e.$$is_boolean&&1!=e||(i=r(i,1)),t=f.get("Numeric")["$==="](a),(e=t!==!1&&t!==o?f.get("Numeric")["$==="](i):t)===o||e.$$is_boolean&&1!=e?o:n(i,a)?0:(s=f.get("Float").$$scope.get("INFINITY"),(e=(t=s["$=="](a.$abs()))!==!1&&t!==o?t:i.$abs()["$=="](s))===o||e.$$is_boolean&&1!=e?(Math.abs(i-a)+1).$to_i():s)},d.$step=function(e){var t=this;return null==e&&(e=1),t.$raise(f.get("NotImplementedError"))},d.$to_s=function(){var e=this;return e.begin.$inspect()+(e.exclude?"...":"..")+e.end.$inspect()},e.defn(p,"$inspect",d.$to_s)}($,null)},Opal.modules["corelib/time"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?t>=e:e["$<="](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e/t:e["$/"](t)}function $(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="warning";var o=e.top,a=e.nil,i=(e.breaker,e.slice),s=e.klass,c=e.range;return e.add_stubs(["$require","$include","$kind_of?","$to_i","$coerce_to","$between?","$raise","$new","$compact","$nil?","$===","$<=>","$to_f","$strftime","$is_a?","$zero?","$wday","$utc?","$warn","$year","$mon","$day","$yday","$hour","$min","$sec","$rjust","$ljust","$zone","$to_s","$[]","$cweek_cyear","$month","$isdst","$private","$!","$==","$ceil"]),o.$require("corelib/comparable"),function(o,$super){function u(){}var l=u=s(o,$super,"Time",u),_=l.$$proto,p=l.$$scope;_.tz_offset=a,l.$include(p.get("Comparable"));var d=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],f=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],h=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],m=["January","February","March","April","May","June","July","August","September","October","November","December"];return e.defs(l,"$at",function(e,t){return null==t&&(t=0),new Date(1e3*e+t)}),e.defs(l,"$new",function(e,t,n,r,$,o){switch(arguments.length){case 1:return new Date(e,0);case 2:return new Date(e,t-1);case 3:return new Date(e,t-1,n);case 4:return new Date(e,t-1,n,r);case 5:return new Date(e,t-1,n,r,$);case 6:return new Date(e,t-1,n,r,$,o);case 7:return new Date(e,t-1,n,r,$,o);default:return new Date}}),e.defs(l,"$local",function(e,t,n,r,$,o,s){var c,u=this;if(null==t&&(t=a),null==n&&(n=a),null==r&&(r=a),null==$&&($=a),null==o&&(o=a),null==s&&(s=a),(c=10===arguments.length)!==a&&(!c.$$is_boolean||1==c)){var l=i.call(arguments).reverse();o=l[9],$=l[8],r=l[7],n=l[6],t=l[5],e=l[4]}return e=function(){return(c=e["$kind_of?"](p.get("String")))===a||c.$$is_boolean&&1!=c?p.get("Opal").$coerce_to(e,p.get("Integer"),"to_int"):e.$to_i()}(),t=function(){return(c=t["$kind_of?"](p.get("String")))===a||c.$$is_boolean&&1!=c?p.get("Opal").$coerce_to((c=t)!==!1&&c!==a?c:1,p.get("Integer"),"to_int"):t.$to_i()}(),((c=t["$between?"](1,12))===a||c.$$is_boolean&&1!=c)&&u.$raise(p.get("ArgumentError"),"month out of range: "+t),n=function(){return(c=n["$kind_of?"](p.get("String")))===a||c.$$is_boolean&&1!=c?p.get("Opal").$coerce_to((c=n)!==!1&&c!==a?c:1,p.get("Integer"),"to_int"):n.$to_i()}(),((c=n["$between?"](1,31))===a||c.$$is_boolean&&1!=c)&&u.$raise(p.get("ArgumentError"),"day out of range: "+n),r=function(){return(c=r["$kind_of?"](p.get("String")))===a||c.$$is_boolean&&1!=c?p.get("Opal").$coerce_to((c=r)!==!1&&c!==a?c:0,p.get("Integer"),"to_int"):r.$to_i()}(),((c=r["$between?"](0,24))===a||c.$$is_boolean&&1!=c)&&u.$raise(p.get("ArgumentError"),"hour out of range: "+r),$=function(){return(c=$["$kind_of?"](p.get("String")))===a||c.$$is_boolean&&1!=c?p.get("Opal").$coerce_to((c=$)!==!1&&c!==a?c:0,p.get("Integer"),"to_int"):$.$to_i()}(),((c=$["$between?"](0,59))===a||c.$$is_boolean&&1!=c)&&u.$raise(p.get("ArgumentError"),"minute out of range: "+$),o=function(){return(c=o["$kind_of?"](p.get("String")))===a||c.$$is_boolean&&1!=c?p.get("Opal").$coerce_to((c=o)!==!1&&c!==a?c:0,p.get("Integer"),"to_int"):o.$to_i()}(),((c=o["$between?"](0,59))===a||c.$$is_boolean&&1!=c)&&u.$raise(p.get("ArgumentError"),"second out of range: "+o),(c=u).$new.apply(c,[].concat([e,t,n,r,$,o].$compact()))}),e.defs(l,"$gm",function(e,t,n,r,$,o){var i,s=this;(i=e["$nil?"]())===a||i.$$is_boolean&&1!=i||s.$raise(p.get("TypeError"),"missing year (got nil)"),(t>12||n>31||r>24||$>59||o>59)&&s.$raise(p.get("ArgumentError"));var c=new Date(Date.UTC(e,(t||1)-1,n||1,r||0,$||0,o||0));return c.tz_offset=0,c}),function(e){e.$$scope,e.$$proto;return e.$$proto.$mktime=e.$$proto.$local,e.$$proto.$utc=e.$$proto.$gm}(l.$singleton_class()),e.defs(l,"$now",function(){return new Date}),_["$+"]=function(e){var t,n=this;(t=p.get("Time")["$==="](e))===a||t.$$is_boolean&&1!=t||n.$raise(p.get("TypeError"),"time + time?"),e=p.get("Opal").$coerce_to(e,p.get("Integer"),"to_int");var r=new Date(n.getTime()+1e3*e);return r.tz_offset=n.tz_offset,r},_["$-"]=function(e){var t,n=this;if((t=p.get("Time")["$==="](e))!==a&&(!t.$$is_boolean||1==t))return(n.getTime()-e.getTime())/1e3;e=p.get("Opal").$coerce_to(e,p.get("Integer"),"to_int");var r=new Date(n.getTime()-1e3*e);return r.tz_offset=n.tz_offset,r},_["$<=>"]=function(e){var t=this;return t.$to_f()["$<=>"](e.$to_f())},_["$=="]=function(e){var t=this;return t.$to_f()===e.$to_f()},_.$asctime=function(){var e=this;return e.$strftime("%a %b %e %H:%M:%S %Y")},e.defn(l,"$ctime",_.$asctime),_.$day=function(){var e=this;return 0===e.tz_offset?e.getUTCDate():e.getDate()},_.$yday=function(){var e=this,t=new Date(e.getFullYear(),0,1);return Math.ceil((e-t)/864e5)},_.$isdst=function(){var e=this;return e.$raise(p.get("NotImplementedError"))},_["$eql?"]=function(e){var t,n=this;return t=e["$is_a?"](p.get("Time")),t!==!1&&t!==a?n["$<=>"](e)["$zero?"]():t},_["$friday?"]=function(){var e=this;return 5==e.$wday()},_.$hour=function(){var e=this;return 0===e.tz_offset?e.getUTCHours():e.getHours()},_.$inspect=function(){var e,t=this;return t.$strftime((e=t["$utc?"]())===a||e.$$is_boolean&&1!=e?"%Y-%m-%d %H:%M:%S %z":"%Y-%m-%d %H:%M:%S UTC")},e.defn(l,"$mday",_.$day),_.$min=function(){var e=this;return 0===e.tz_offset?e.getUTCMinutes():e.getMinutes()},_.$mon=function(){var e=this;return 0===e.tz_offset?e.getUTCMonth()+1:e.getMonth()+1},_["$monday?"]=function(){var e=this;return 1==e.$wday()},e.defn(l,"$month",_.$mon),_["$saturday?"]=function(){var e=this;return 6==e.$wday()},_.$sec=function(){var e=this;return 0===e.tz_offset?e.getUTCSeconds():e.getSeconds()},_.$usec=function(){var e=this;return e.$warn("Microseconds are not supported"),0},_.$zone=function(){var e,t=this,n=t.toString();return e=-1==n.indexOf("(")?n.match(/[A-Z]{3,4}/)[0]:n.match(/\([^)]+\)/)[0].match(/[A-Z]/g).join(""),"GMT"==e&&/(GMT\W*\d{4})/.test(n)?RegExp.$1:e},_.$getgm=function(){var e=this,t=new Date(e.getTime());return t.tz_offset=0,t},_["$gmt?"]=function(){var e=this;return 0===e.tz_offset},_.$gmt_offset=function(){var e=this;return 60*-e.getTimezoneOffset()},_.$strftime=function(e){var t=this;return e.replace(/%([\-_#^0]*:{0,2})(\d+)?([EO]*)(.)/g,function(e,n,r,$,o){var a="",r=parseInt(r),i=-1!==n.indexOf("0"),s=-1===n.indexOf("-"),u=-1!==n.indexOf("_"),l=-1!==n.indexOf("^"),_=-1!==n.indexOf("#"),p=(n.match(":")||[]).length;switch(i&&u&&(n.indexOf("0")<n.indexOf("_")?i=!1:u=!1),o){case"Y":a+=t.$year();break;case"C":i=!u,a+=Math.round(t.$year()/100);break;case"y":i=!u,a+=t.$year()%100;break;case"m":i=!u,a+=t.$mon();break;case"B":a+=m[t.$mon()-1];break;case"b":case"h":u=!i,a+=h[t.$mon()-1];break;case"d":i=!u,a+=t.$day();break;case"e":u=!i,a+=t.$day();break;case"j":a+=t.$yday();break;case"H":i=!u,a+=t.$hour();break;case"k":u=!i,a+=t.$hour();break;case"I":i=!u,a+=t.$hour()%12||12;break;case"l":u=!i,a+=t.$hour()%12||12;break;case"P":a+=t.$hour()>=12?"pm":"am";break;case"p":a+=t.$hour()>=12?"PM":"AM";break;case"M":i=!u,a+=t.$min();break;case"S":i=!u,a+=t.$sec();break;case"L":i=!u,r=isNaN(r)?3:r,a+=t.getMilliseconds();break;case"N":r=isNaN(r)?9:r,a+=t.getMilliseconds().toString().$rjust(3,"0"),a=a.$ljust(r,"0");break;case"z":var g=t.getTimezoneOffset(),v=Math.floor(Math.abs(g)/60),b=Math.abs(g)%60;a+=0>g?"+":"-",a+=10>v?"0":"",a+=v,p>0&&(a+=":"),a+=10>b?"0":"",a+=b,p>1&&(a+=":00");break;case"Z":a+=t.$zone();break;case"A":a+=d[t.$wday()];break;case"a":a+=f[t.$wday()];break;case"u":a+=t.$wday()+1;break;case"w":a+=t.$wday();break;case"V":a+=t.$cweek_cyear()["$[]"](0).$to_s().$rjust(2,"0");break;case"G":a+=t.$cweek_cyear()["$[]"](1);break;case"g":a+=t.$cweek_cyear()["$[]"](1)["$[]"](c(-2,-1,!1));break;case"s":a+=t.$to_i();break;case"n":a+="\n";break;case"t":a+="	";break;case"%":a+="%";break;case"c":a+=t.$strftime("%a %b %e %T %Y");break;case"D":case"x":a+=t.$strftime("%m/%d/%y");break;case"F":a+=t.$strftime("%Y-%m-%d");break;case"v":a+=t.$strftime("%e-%^b-%4Y");break;case"r":a+=t.$strftime("%I:%M:%S %p");break;case"R":a+=t.$strftime("%H:%M");break;case"T":case"X":a+=t.$strftime("%H:%M:%S");break;default:return e}return l&&(a=a.toUpperCase()),_&&(a=a.replace(/[A-Z]/,function(e){e.toLowerCase()}).replace(/[a-z]/,function(e){e.toUpperCase()})),s&&(i||u)&&(a=a.$rjust(isNaN(r)?2:r,u?" ":"0")),a})},_["$sunday?"]=function(){var e=this;return 0==e.$wday()},_["$thursday?"]=function(){var e=this;return 4==e.$wday()},_.$to_a=function(){var e=this;return[e.$sec(),e.$min(),e.$hour(),e.$day(),e.$month(),e.$year(),e.$wday(),e.$yday(),e.$isdst(),e.$zone()]},_.$to_f=function(){var e=this;return e.getTime()/1e3},_.$to_i=function(){var e=this;return parseInt(e.getTime()/1e3)},e.defn(l,"$to_s",_.$inspect),_["$tuesday?"]=function(){var e=this;return 2==e.$wday()},e.defn(l,"$utc?",_["$gmt?"]),e.defn(l,"$utc_offset",_.$gmt_offset),_.$wday=function(){var e=this;return 0===e.tz_offset?e.getUTCDay():e.getDay()},_["$wednesday?"]=function(){var e=this;return 3==e.$wday()},_.$year=function(){var e=this;return 0===e.tz_offset?e.getUTCFullYear():e.getFullYear()},l.$private("cweek_cyear"),_.$cweek_cyear=function(){var e,o,i=this,s=a,c=a,u=a,l=a,_=a,d=a,f=a,h=a;return s=p.get("Time").$new(i.$year(),1,1),c=s.$wday(),u=0,l=i.$year(),(e=(o=t(c,4))?c["$=="](0)["$!"]():o)===a||e.$$is_boolean&&1!=e?(_=n(n(c,7),1),_["$=="](-8)&&(_=-1)):_=n(c,1),d=r($(i.$yday(),_),7).$ceil(),t(d,0)?p.get("Time").$new(n(i.$year(),1),12,31).$cweek_cyear():(d["$=="](53)&&(f=p.get("Time").$new(i.$year(),12,31),h=f.$wday(),(e=(o=t(h,3))?h["$=="](0)["$!"]():o)===a||e.$$is_boolean&&1!=e||(d=1,l=$(l,1))),[d,l])},a&&"cweek_cyear"}(o,null)},Opal.modules["corelib/struct"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>=t:e["$>="](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="warning";var $=e.top,o=e.nil,a=e.breaker,i=e.slice,s=e.klass,c=e.hash2;return e.add_stubs(["$require","$include","$==","$[]","$upcase","$const_set","$new","$unshift","$each","$define_struct_attribute","$instance_eval","$to_proc","$raise","$<<","$members","$attr_accessor","$each_with_index","$instance_variable_set","$class","$===","$-@","$size","$include?","$to_sym","$instance_variable_get","$enum_for","$hash","$all?","$length","$map","$join","$inspect","$each_pair","$inject","$[]=","$flatten","$to_a"]),$.$require("corelib/enumerable"),function($,$super){function u(){}var l,_,p,d=u=s($,$super,"Struct",u),f=d.$$proto,h=d.$$scope;return d.$include(h.get("Enumerable")),e.defs(d,"$new",l=function(t,n){var r,$,a,s,c=i.call(arguments,0),_=this,p=l.$$p,d=p||o;return n=i.call(arguments,1),l.$$p=null,_["$=="](h.get("Struct"))?t["$[]"](0)["$=="](t["$[]"](0).$upcase())?h.get("Struct").$const_set(t,(r=_).$new.apply(r,[].concat(n))):(n.$unshift(t),($=(a=h.get("Class")).$new,$.$$p=(s=function(){var e,t,r,$,a=s.$$s||this;return(e=(t=n).$each,e.$$p=(r=function(e){var t=r.$$s||this;return null==e&&(e=o),t.$define_struct_attribute(e)},r.$$s=a,r),e).call(t),d!==!1&&d!==o?(e=($=a).$instance_eval,e.$$p=d.$to_proc(),e).call($):o},s.$$s=_,s),$).call(a,_)):e.find_super_dispatcher(_,"new",l,p,u).apply(_,c)}),e.defs(d,"$define_struct_attribute",function(e){var t=this;return t["$=="](h.get("Struct"))&&t.$raise(h.get("ArgumentError"),"you cannot define attributes to the Struct class"),t.$members()["$<<"](e),t.$attr_accessor(e)}),e.defs(d,"$members",function(){var e,t=this;return null==t.members&&(t.members=o),t["$=="](h.get("Struct"))&&t.$raise(h.get("ArgumentError"),"the Struct class has no members"),(e=t.members)!==!1&&e!==o?e:t.members=[]}),e.defs(d,"$inherited",function(e){var t,n,r,$=this,a=o;return null==$.members&&($.members=o),a=$.members,(t=(n=e).$instance_eval,t.$$p=(r=function(){var e=r.$$s||this;return e.members=a},r.$$s=$,r),t).call(n)}),function(e){e.$$scope,e.$$proto;return e.$$proto["$[]"]=e.$$proto.$new}(d.$singleton_class()),f.$initialize=function(e){var t,n,r,$=this;return e=i.call(arguments,0),(t=(n=$.$members()).$each_with_index,t.$$p=(r=function(t,n){var $=r.$$s||this;return null==t&&(t=o),null==n&&(n=o),$.$instance_variable_set("@"+t,e["$[]"](n))},r.$$s=$,r),t).call(n)},f.$members=function(){var e=this;return e.$class().$members()},f["$[]"]=function(e){var r,$=this;return(r=h.get("Integer")["$==="](e))===o||r.$$is_boolean&&1!=r?(r=h.get("String")["$==="](e))===o||r.$$is_boolean&&1!=r?$.$raise(h.get("TypeError"),"no implicit conversion of "+e.$class()+" into Integer"):((r=$.$members()["$include?"](e.$to_sym()))===o||r.$$is_boolean&&1!=r)&&$.$raise(h.get("NameError"),"no member '"+e+"' in struct"):(t(e,$.$members().$size()["$-@"]())&&$.$raise(h.get("IndexError"),"offset "+e+" too small for struct(size:"+$.$members().$size()+")"),n(e,$.$members().$size())&&$.$raise(h.get("IndexError"),"offset "+e+" too large for struct(size:"+$.$members().$size()+")"),e=$.$members()["$[]"](e)),$.$instance_variable_get("@"+e)},f["$[]="]=function(e,r){var $,a=this;return($=h.get("Integer")["$==="](e))===o||$.$$is_boolean&&1!=$?($=h.get("String")["$==="](e))===o||$.$$is_boolean&&1!=$?a.$raise(h.get("TypeError"),"no implicit conversion of "+e.$class()+" into Integer"):(($=a.$members()["$include?"](e.$to_sym()))===o||$.$$is_boolean&&1!=$)&&a.$raise(h.get("NameError"),"no member '"+e+"' in struct"):(t(e,a.$members().$size()["$-@"]())&&a.$raise(h.get("IndexError"),"offset "+e+" too small for struct(size:"+a.$members().$size()+")"),n(e,a.$members().$size())&&a.$raise(h.get("IndexError"),"offset "+e+" too large for struct(size:"+a.$members().$size()+")"),e=a.$members()["$[]"](e)),a.$instance_variable_set("@"+e,r)
},f.$each=_=function(){var t,n,r,$=this,i=_.$$p,s=i||o;return _.$$p=null,s===o?$.$enum_for("each"):((t=(n=$.$members()).$each,t.$$p=(r=function(t){var n,$=r.$$s||this;return null==t&&(t=o),n=e.yield1(s,$["$[]"](t)),n===a?n:n},r.$$s=$,r),t).call(n),$)},f.$each_pair=p=function(){var t,n,r,$=this,i=p.$$p,s=i||o;return p.$$p=null,s===o?$.$enum_for("each_pair"):((t=(n=$.$members()).$each,t.$$p=(r=function(t){var n,$=r.$$s||this;return null==t&&(t=o),n=e.yieldX(s,[t,$["$[]"](t)]),n===a?n:n},r.$$s=$,r),t).call(n),$)},f["$eql?"]=function(e){var t,n,r,$,a=this;return(t=a.$hash()["$=="](e.$hash()))!==!1&&t!==o?t:(n=(r=e.$each_with_index())["$all?"],n.$$p=($=function(e,t){var n=$.$$s||this;return null==e&&(e=o),null==t&&(t=o),n["$[]"](n.$members()["$[]"](t))["$=="](e)},$.$$s=a,$),n).call(r)},f.$length=function(){var e=this;return e.$members().$length()},e.defn(d,"$size",f.$length),f.$to_a=function(){var e,t,n,r=this;return(e=(t=r.$members()).$map,e.$$p=(n=function(e){var t=n.$$s||this;return null==e&&(e=o),t["$[]"](e)},n.$$s=r,n),e).call(t)},e.defn(d,"$values",f.$to_a),f.$inspect=function(){var e,t,n,$=this,a=o;return a="#<struct ",$.$class()["$=="](h.get("Struct"))&&(a=r(a,""+$.$class()+" ")),a=r(a,(e=(t=$.$each_pair()).$map,e.$$p=(n=function(e,t){n.$$s||this;return null==e&&(e=o),null==t&&(t=o),""+e+"="+t.$inspect()},n.$$s=$,n),e).call(t).$join(", ")),a=r(a,">")},e.defn(d,"$to_s",f.$inspect),f.$to_h=function(){var e,t,n,r=this;return(e=(t=r.$members()).$inject,e.$$p=(n=function(e,t){var r=n.$$s||this;return null==e&&(e=o),null==t&&(t=o),e["$[]="](t,r["$[]"](t)),e},n.$$s=r,n),e).call(t,c([],{}))},f.$values_at=function(e){var t,n,r,$=this;e=i.call(arguments,0),e=(t=(n=e).$map,t.$$p=(r=function(e){r.$$s||this;return null==e&&(e=o),e.$$is_range?e.$to_a():e},r.$$s=$,r),t).call(n).$flatten();for(var a=[],s=0,c=e.length;c>s;s++)e[s].$$is_number||$.$raise(h.get("TypeError"),"no implicit conversion of "+e[s].$class()+" into Integer"),a.push($["$[]"](e[s]));return a},o&&"values_at"}($,null)},Opal.modules["corelib/io"]=function(e){e.dynamic_require_severity="warning";var t,n,r=e.top,$=e,o=e.nil,a=(e.breaker,e.slice),i=e.klass,s=e.module,c=e.gvars;return null==c.stdout&&(c.stdout=o),null==c.stderr&&(c.stderr=o),e.add_stubs(["$attr_accessor","$size","$write","$join","$map","$String","$empty?","$concat","$chomp","$getbyte","$getc","$raise","$new","$write_proc=","$extend"]),function(t,$super){function n(){}var r=n=i(t,$super,"IO",n),$=r.$$proto,u=r.$$scope;return $.tty=$.closed=o,e.cdecl(u,"SEEK_SET",0),e.cdecl(u,"SEEK_CUR",1),e.cdecl(u,"SEEK_END",2),$["$tty?"]=function(){var e=this;return e.tty},$["$closed?"]=function(){var e=this;return e.closed},r.$attr_accessor("write_proc"),$.$write=function(e){var t=this;return t.write_proc(e),e.$size()},r.$attr_accessor("sync"),function(t){{var n=s(t,"Writable");n.$$proto,n.$$scope}e.defn(n,"$<<",function(e){var t=this;return t.$write(e),t}),e.defn(n,"$print",function(e){var t,n,r,$=this;return null==c[","]&&(c[","]=o),e=a.call(arguments,0),$.$write((t=(n=e).$map,t.$$p=(r=function(e){var t=r.$$s||this;return null==e&&(e=o),t.$String(e)},r.$$s=$,r),t).call(n).$join(c[","])),o}),e.defn(n,"$puts",function(e){var t,n,r,$=this,i=o;return null==c["/"]&&(c["/"]=o),e=a.call(arguments,0),i=c["/"],$.$write((t=e["$empty?"]())===o||t.$$is_boolean&&1!=t?(t=(n=e).$map,t.$$p=(r=function(e){var t=r.$$s||this;return null==e&&(e=o),t.$String(e).$chomp()},r.$$s=$,r),t).call(n).$concat([o]).$join(i):c["/"]),o})}(r),function(t){var n=s(t,"Readable"),r=(n.$$proto,n.$$scope);e.defn(n,"$readbyte",function(){var e=this;return e.$getbyte()}),e.defn(n,"$readchar",function(){var e=this;return e.$getc()}),e.defn(n,"$readline",function(e){var t=this;return null==c["/"]&&(c["/"]=o),null==e&&(e=c["/"]),t.$raise(r.get("NotImplementedError"))}),e.defn(n,"$readpartial",function(e,t){var n=this;return null==t&&(t=o),n.$raise(r.get("NotImplementedError"))})}(r)}(r,null),e.cdecl($,"STDERR",c.stderr=$.get("IO").$new()),e.cdecl($,"STDIN",c.stdin=$.get("IO").$new()),e.cdecl($,"STDOUT",c.stdout=$.get("IO").$new()),t=["object"==typeof process?function(e){process.stdout.write(e)}:function(e){console.log(e)}],n=c.stdout,n["$write_proc="].apply(n,t),t[t.length-1],t=["object"==typeof process?function(e){process.stderr.write(e)}:function(e){console.warn(e)}],n=c.stderr,n["$write_proc="].apply(n,t),t[t.length-1],c.stdout.$extend($.get("IO").$$scope.get("Writable")),c.stderr.$extend($.get("IO").$$scope.get("Writable"))},Opal.modules["corelib/main"]=function(e){e.dynamic_require_severity="warning";{var t=e.top,n=e,r=e.nil;e.breaker,e.slice}return e.add_stubs(["$include"]),e.defs(t,"$to_s",function(){return"main"}),e.defs(t,"$include",function(e){return n.get("Object").$include(e)}),r&&"include"},Opal.modules["corelib/variables"]=function(e){e.dynamic_require_severity="warning";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.gvars),$=e.hash2;return e.add_stubs(["$new"]),r["&"]=r["~"]=r["`"]=r["'"]=n,r.LOADED_FEATURES=r['"']=e.loaded_features,r.LOAD_PATH=r[":"]=[],r["/"]="\n",r[","]=n,e.cdecl(t,"ARGV",[]),e.cdecl(t,"ARGF",t.get("Object").$new()),e.cdecl(t,"ENV",$([],{})),r.VERBOSE=!1,r.DEBUG=!1,r.SAFE=0,e.cdecl(t,"RUBY_PLATFORM","opal"),e.cdecl(t,"RUBY_ENGINE","opal"),e.cdecl(t,"RUBY_VERSION","2.1.1"),e.cdecl(t,"RUBY_ENGINE_VERSION","0.8.0.beta1"),e.cdecl(t,"RUBY_RELEASE_DATE","2015-02-14")},Opal.modules["corelib/dir"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=e.breaker,$=(e.slice,e.klass);return e.add_stubs(["$[]"]),function(t,$super){function o(){}{var a=o=$(t,$super,"Dir",o);a.$$proto,a.$$scope}return function(t){{var $=t.$$scope;t.$$proto}return t.$$proto.$chdir=TMP_1=function(t){var $,o=TMP_1.$$p,a=o||n,i=n;TMP_1.$$p=null;try{return i=e.current_dir,e.current_dir=t,$=e.yieldX(a,[]),$===r?$:$}finally{e.current_dir=i}},t.$$proto.$pwd=function(){return e.current_dir||"."},t.$$proto.$getwd=t.$$proto.$pwd,t.$$proto.$home=function(){var e;return(e=$.get("ENV")["$[]"]("HOME"))!==!1&&e!==n?e:"."},n&&"home"}(a.$singleton_class())}(t,null)},Opal.modules["corelib/file"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e,r=e.nil,$=(e.breaker,e.slice),o=e.klass,a=e.range;return e.add_stubs(["$join","$compact","$split","$==","$first","$[]=","$home","$each","$pop","$<<","$[]","$gsub","$find","$=~"]),function(t,$super){function n(){}var i=n=o(t,$super,"File",n),s=(i.$$proto,i.$$scope);return e.cdecl(s,"Separator",e.cdecl(s,"SEPARATOR","/")),e.cdecl(s,"ALT_SEPARATOR",r),e.cdecl(s,"PATH_SEPARATOR",":"),function(t){{var n=t.$$scope;t.$$proto}return t.$$proto.$expand_path=function(e,t){var $,o,a,i=this,s=r,c=r;return null==t&&(t=r),e=[t,e].$compact().$join(n.get("SEPARATOR")),s=e.$split(n.get("SEPARATOR")),c=[],s.$first()["$=="]("~")&&s["$[]="](0,n.get("Dir").$home()),($=(o=s).$each,$.$$p=(a=function(e){a.$$s||this;return null==e&&(e=r),e["$=="]("..")?c.$pop():c["$<<"](e)},a.$$s=i,a),$).call(o),c.$join(n.get("SEPARATOR"))},t.$$proto.$dirname=function(e){var t=this;return t.$split(e)["$[]"](a(0,-2,!1))},t.$$proto.$basename=function(e){var t=this;return t.$split(e)["$[]"](-1)},t.$$proto["$exist?"]=function(t){return null!=e.modules[t]},t.$$proto["$exists?"]=t.$$proto["$exist?"],t.$$proto["$directory?"]=function(t){var $,o,a,i=this,s=r,c=r;s=[];for(var u in e.modules)s.push(u);return t=t.$gsub(new RegExp("(^."+n.get("SEPARATOR")+"+|"+n.get("SEPARATOR")+"+$)")),c=($=(o=s).$find,$.$$p=(a=function(e){a.$$s||this;return null==e&&(e=r),e["$=~"](new RegExp("^"+t))},a.$$s=i,a),$).call(o)},t.$$proto.$join=function(e){return e=$.call(arguments,0),e.$join(n.get("SEPARATOR")).$gsub(new RegExp(""+n.get("SEPARATOR")+"+"),n.get("SEPARATOR"))},t.$$proto.$split=function(e){return e.$split(n.get("SEPARATOR"))},r&&"split"}(i.$singleton_class())}(t,n.get("IO"))},function(e){e.dynamic_require_severity="warning";{var t=e.top;e.nil,e.breaker,e.slice}return e.add_stubs(["$require"]),t.$require("corelib/runtime"),t.$require("corelib/helpers"),t.$require("corelib/module"),t.$require("corelib/class"),t.$require("corelib/basic_object"),t.$require("corelib/kernel"),t.$require("corelib/nil_class"),t.$require("corelib/boolean"),t.$require("corelib/error"),t.$require("corelib/regexp"),t.$require("corelib/comparable"),t.$require("corelib/enumerable"),t.$require("corelib/enumerator"),t.$require("corelib/array"),t.$require("corelib/array/inheritance"),t.$require("corelib/hash"),t.$require("corelib/string"),t.$require("corelib/string/inheritance"),t.$require("corelib/match_data"),t.$require("corelib/numeric"),t.$require("corelib/complex"),t.$require("corelib/rational"),t.$require("corelib/proc"),t.$require("corelib/method"),t.$require("corelib/range"),t.$require("corelib/time"),t.$require("corelib/struct"),t.$require("corelib/io"),t.$require("corelib/main"),t.$require("corelib/variables"),t.$require("corelib/dir"),t.$require("corelib/file")}(Opal),Opal.modules.thread=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e,r=e.nil,$=e.breaker,o=e.slice,a=e.klass,i=e.hash2;return e.add_stubs(["$allocate","$core_initialize!","$current","$fail","$[]","$coerce_key_name","$[]=","$key?","$keys","$private","$coerce_to!","$public","$clear","$empty?","$size","$shift","$push","$each","$to_proc","$locked?","$lock","$unlock"]),function(e,$super){function t(){}{var n=t=a(e,$super,"ThreadError",t);n.$$proto,n.$$scope}return r}(t,n.get("StandardError")),function(t,$super){function n(){}var $=n=a(t,$super,"Thread",n),s=$.$$proto,c=$.$$scope;return s.fiber_locals=s.thread_locals=r,e.defs($,"$current",function(){var e,t=this;return null==t.current&&(t.current=r),((e=t.current)===r||e.$$is_boolean&&1!=e)&&(t.current=t.$allocate(),t.current["$core_initialize!"]()),t.current}),e.defs($,"$list",function(){var e=this;return[e.$current()]}),s.$initialize=function(e){var t=this;return e=o.call(arguments,0),t.$fail(c.get("NotImplementedError"),"Thread creation not available")},s["$[]"]=function(e){var t=this;return t.fiber_locals["$[]"](t.$coerce_key_name(e))},s["$[]="]=function(e,t){var n=this;return n.fiber_locals["$[]="](n.$coerce_key_name(e),t)},s["$key?"]=function(e){var t=this;return t.fiber_locals["$key?"](t.$coerce_key_name(e))},s.$keys=function(){var e=this;return e.fiber_locals.$keys()},s.$thread_variable_get=function(e){var t=this;return t.thread_locals["$[]"](t.$coerce_key_name(e))},s.$thread_variable_set=function(e,t){var n=this;return n.thread_locals["$[]="](n.$coerce_key_name(e),t)},s["$thread_variable?"]=function(e){var t=this;return t.thread_locals["$key?"](t.$coerce_key_name(e))},s.$thread_variables=function(){var e=this;return e.thread_locals.$keys()},$.$private(),s["$core_initialize!"]=function(){var e=this;return e.thread_locals=i([],{}),e.fiber_locals=i([],{})},s.$coerce_key_name=function(e){return c.get("Opal")["$coerce_to!"](e,c.get("String"),"to_s")},$.$public(),function(t,$super){function n(){}var $,o=n=a(t,$super,"Queue",n),i=o.$$proto,s=o.$$scope;return i.storage=r,i.$initialize=function(){var e=this;return e.$clear()},i.$clear=function(){var e=this;return e.storage=[]},i["$empty?"]=function(){var e=this;return e.storage["$empty?"]()},i.$size=function(){var e=this;return e.storage.$size()},e.defn(o,"$length",i.$size),i.$pop=function(e){var t,n=this;return null==e&&(e=!1),(t=n["$empty?"]())===r||t.$$is_boolean&&1!=t||(e!==!1&&e!==r&&n.$fail(s.get("ThreadError"),"Queue empty"),n.$fail(s.get("ThreadError"),"Deadlock")),n.storage.$shift()},e.defn(o,"$shift",i.$pop),e.defn(o,"$deq",i.$pop),i.$push=function(e){var t=this;return t.storage.$push(e)},e.defn(o,"$<<",i.$push),e.defn(o,"$enq",i.$push),i.$each=$=function(){var e,t,n=this,o=$.$$p,a=o||r;return $.$$p=null,(e=(t=n.storage).$each,e.$$p=a.$to_proc(),e).call(t)},r&&"each"}($,null)}(t,null),e.cdecl(n,"Queue",n.get("Thread").$$scope.get("Queue")),function(t,$super){function n(){}var o,i=n=a(t,$super,"Mutex",n),s=i.$$proto,c=i.$$scope;return s.locked=r,s.$initialize=function(){var e=this;return e.locked=!1},s.$lock=function(){var e,t=this;return(e=t.locked)===r||e.$$is_boolean&&1!=e||t.$fail(c.get("ThreadError"),"Deadlock"),t.locked=!0,t},s["$locked?"]=function(){var e=this;return e.locked},s["$owned?"]=function(){var e=this;return e.locked},s.$try_lock=function(){var e,t=this;return(e=t["$locked?"]())===r||e.$$is_boolean&&1!=e?(t.$lock(),!0):!1},s.$unlock=function(){var e,t=this;return((e=t.locked)===r||e.$$is_boolean&&1!=e)&&t.$fail(c.get("ThreadError"),"Mutex not locked"),t.locked=!1,t},s.$synchronize=o=function(){var t,n=this,a=o.$$p,i=a||r;o.$$p=null,n.$lock();try{return t=e.yieldX(i,[]),t===$?t:t}finally{n.$unlock()}},r&&"synchronize"}(t,null)},Opal.modules.set=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=e.breaker,$=e.slice,o=e.klass,a=e.module;return e.add_stubs(["$include","$new","$nil?","$===","$raise","$each","$add","$call","$merge","$class","$respond_to?","$subtract","$dup","$join","$to_a","$equal?","$instance_of?","$==","$instance_variable_get","$is_a?","$size","$all?","$include?","$[]=","$enum_for","$[]","$<<","$replace","$delete","$select","$each_key","$to_proc","$empty?","$eql?","$instance_eval","$clear","$keys"]),function(t,$super){function a(){}var i,s,c,u,l,_=a=o(t,$super,"Set",a),p=_.$$proto,d=_.$$scope;return p.hash=n,_.$include(d.get("Enumerable")),e.defs(_,"$[]",function(e){var t=this;return e=$.call(arguments,0),t.$new(e)}),p.$initialize=i=function(e){var t,r,$,o=this,a=i.$$p,s=a||n;return null==e&&(e=n),i.$$p=null,o.hash=d.get("Hash").$new(),(t=e["$nil?"]())===n||t.$$is_boolean&&1!=t?(((t=d.get("Enumerable")["$==="](e))===n||t.$$is_boolean&&1!=t)&&o.$raise(d.get("ArgumentError"),"value must be enumerable"),s!==!1&&s!==n?(t=(r=e).$each,t.$$p=($=function(e){var t=$.$$s||this;return null==e&&(e=n),t.$add(s.$call(e))},$.$$s=o,$),t).call(r):o.$merge(e)):n},p.$dup=function(){var e=this,t=n;return t=e.$class().$new(),t.$merge(e)},p["$-"]=function(e){var t,r=this;return((t=e["$respond_to?"]("each"))===n||t.$$is_boolean&&1!=t)&&r.$raise(d.get("ArgumentError"),"value must be enumerable"),r.$dup().$subtract(e)},e.defn(_,"$difference",p["$-"]),p.$inspect=function(){var e=this;return"#<Set: {"+e.$to_a().$join(",")+"}>"},p["$=="]=function(e){var t,r,$,o=this;return(t=o["$equal?"](e))===n||t.$$is_boolean&&1!=t?(t=e["$instance_of?"](o.$class()))===n||t.$$is_boolean&&1!=t?(r=e["$is_a?"](d.get("Set")),(t=r!==!1&&r!==n?o.$size()["$=="](e.$size()):r)===n||t.$$is_boolean&&1!=t?!1:(t=(r=e)["$all?"],t.$$p=($=function(e){var t=$.$$s||this;return null==t.hash&&(t.hash=n),null==e&&(e=n),t.hash["$include?"](e)},$.$$s=o,$),t).call(r)):o.hash["$=="](e.$instance_variable_get("@hash")):!0},p.$add=function(e){var t=this;return t.hash["$[]="](e,!0),t},e.defn(_,"$<<",p.$add),p.$classify=s=function(){var t,$,o,a,i,c=this,u=s.$$p,l=u||n,_=n;return s.$$p=null,l===n?c.$enum_for("classify"):(_=(t=($=d.get("Hash")).$new,t.$$p=(o=function(e,t){var r=o.$$s||this;return null==e&&(e=n),null==t&&(t=n),e["$[]="](t,r.$class().$new())},o.$$s=c,o),t).call($),(t=(a=c).$each,t.$$p=(i=function(t){{var $;i.$$s||this}return null==t&&(t=n),_["$[]"](($=e.yield1(l,t))===r?r.$v:$).$add(t)},i.$$s=c,i),t).call(a),_)},p["$collect!"]=c=function(){var t,$,o,a=this,i=c.$$p,s=i||n,u=n;return c.$$p=null,s===n?a.$enum_for("collect!"):(u=a.$class().$new(),(t=($=a).$each,t.$$p=(o=function(t){{var $;o.$$s||this}return null==t&&(t=n),u["$<<"](($=e.yield1(s,t))===r?r.$v:$)},o.$$s=a,o),t).call($),a.$replace(u))},e.defn(_,"$map!",p["$collect!"]),p.$delete=function(e){var t=this;return t.hash.$delete(e),t},p["$delete?"]=function(e){var t,r=this;return(t=r["$include?"](e))===n||t.$$is_boolean&&1!=t?n:(r.$delete(e),r)},p.$delete_if=u=function(){try{var t,$,o,a,i,s,c=this,l=u.$$p,_=l||n;return u.$$p=null,(t=_!==n)!=!1&&t!==n?t:e.ret(c.$enum_for("delete_if")),(t=($=(a=(i=c).$select,a.$$p=(s=function(t){{var $;s.$$s||this}return null==t&&(t=n),$=e.yield1(_,t),$===r?$:$},s.$$s=c,s),a).call(i)).$each,t.$$p=(o=function(e){var t=o.$$s||this;return null==t.hash&&(t.hash=n),null==e&&(e=n),t.hash.$delete(e)},o.$$s=c,o),t).call($),c}catch(p){if(p===e.returner)return p.$v;throw p}},p["$add?"]=function(e){var t,r=this;return(t=r["$include?"](e))===n||t.$$is_boolean&&1!=t?r.$add(e):n},p.$each=l=function(){var e,t,r=this,$=l.$$p,o=$||n;return l.$$p=null,o===n?r.$enum_for("each"):((e=(t=r.hash).$each_key,e.$$p=o.$to_proc(),e).call(t),r)},p["$empty?"]=function(){var e=this;return e.hash["$empty?"]()},p["$eql?"]=function(e){var t,r,$,o=this;return o.hash["$eql?"]((t=(r=e).$instance_eval,t.$$p=($=function(){var e=$.$$s||this;return null==e.hash&&(e.hash=n),e.hash},$.$$s=o,$),t).call(r))},p.$clear=function(){var e=this;return e.hash.$clear(),e},p["$include?"]=function(e){var t=this;return t.hash["$include?"](e)},e.defn(_,"$member?",p["$include?"]),p.$merge=function(e){var t,r,$,o=this;return(t=(r=e).$each,t.$$p=($=function(e){var t=$.$$s||this;return null==e&&(e=n),t.$add(e)},$.$$s=o,$),t).call(r),o},p.$replace=function(e){var t=this;return t.$clear(),t.$merge(e),t},p.$size=function(){var e=this;return e.hash.$size()},e.defn(_,"$length",p.$size),p.$subtract=function(e){var t,r,$,o=this;return(t=(r=e).$each,t.$$p=($=function(e){var t=$.$$s||this;return null==e&&(e=n),t.$delete(e)},$.$$s=o,$),t).call(r),o},p.$to_a=function(){var e=this;return e.hash.$keys()},n&&"to_a"}(t,null),function(t){var r,o=a(t,"Enumerable"),i=(o.$$proto,o.$$scope);e.defn(o,"$to_set",r=function(e,t){var o,a,s=this,c=r.$$p,u=c||n;return t=$.call(arguments,1),null==e&&(e=i.get("Set")),r.$$p=null,(o=(a=e).$new,o.$$p=u.$to_proc(),o).apply(a,[s].concat(t))})}(t)},Opal.modules.time=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.klass);return e.add_stubs(["$strftime"]),function(t,$super){function $(){}{var o=$=r(t,$super,"Time",$),a=o.$$proto;o.$$scope}return e.defs(o,"$parse",function(e){return new Date(Date.parse(e))}),a.$iso8601=function(){var e=this;return e.$strftime("%FT%T%z")},n&&"iso8601"}(t,null)},Opal.modules.rbconfig=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e,r=e.nil,$=(e.breaker,e.slice,e.module),o=e.hash2;return e.add_stubs(["$split","$[]"]),function(t){var n=$(t,"RbConfig"),a=(n.$$proto,n.$$scope),i=r;i=a.get("RUBY_VERSION").$split("."),e.cdecl(a,"CONFIG",o(["ruby_version","MAJOR","MINOR","TEENY","RUBY","RUBY_INSTALL_NAME","RUBY_SO_NAME","target_os","host_os","PATH_SEPARATOR"],{ruby_version:a.get("RUBY_VERSION"),MAJOR:i["$[]"](0),MINOR:i["$[]"](1),TEENY:i["$[]"](2),RUBY:a.get("RUBY_ENGINE"),RUBY_INSTALL_NAME:a.get("RUBY_ENGINE"),RUBY_SO_NAME:a.get("RUBY_ENGINE"),target_os:"ECMA-262",host_os:"ECMA-262",PATH_SEPARATOR:":"}))}(t),e.cdecl(n,"RUBY_NAME","opal"),e.cdecl(n,"RUBY_EXE","opal"),e.cdecl(n,"RUBY_PATCHLEVEL","327")},Opal.modules.pathname=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.klass,o=e.module;return e.add_stubs(["$==","$raise","$attr_reader","$path","$start_with?","$!","$absolute?","$sub","$new"]),function(t,$super){function o(){}var a=o=$(t,$super,"Pathname",o),i=a.$$proto,s=a.$$scope;return i.path=n,i.$initialize=function(e){var t=this;return e["$=="]("\x00")&&t.$raise(s.get("ArgumentError")),t.path=e},a.$attr_reader("path"),i["$=="]=function(e){var t=this;return e.$path()["$=="](t.path)},i["$absolute?"]=function(){var e=this;return e.path["$start_with?"]("/")},i["$relative?"]=function(){var e=this;return e["$absolute?"]()["$!"]()},i["$root?"]=function(){var e=this;return e.path["$=="]("/")},i.$parent=function(){var e,t=this,r=n;return r=t.path.$sub(/\/([^\/]+\/?$)/,""),r["$=="]("")&&(r=function(){return(e=t["$absolute?"]())===n||e.$$is_boolean&&1!=e?".":"/"}()),s.get("Pathname").$new(r)},i.$sub=function(e){var t,n=this;return e=r.call(arguments,0),s.get("Pathname").$new((t=n.path).$sub.apply(t,[].concat(e)))},i.$cleanpath=function(){var t=this;return e.normalize_loadable_path(t.path)},i.$to_path=function(){var e=this;return e.path},i.$hash=function(){var e=this;return e.path},e.defn(a,"$to_str",i.$to_path),e.defn(a,"$to_s",i.$to_path)}(t,null),function(t){var n=o(t,"Kernel"),r=(n.$$proto,n.$$scope);e.defn(n,"$Pathname",function(e){return r.get("Pathname").$new(e)})}(t)},Opal.modules["rspec/core/version"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=(e.nil,e.breaker,e.slice,e.module);return function(t){{var r=n(t,"RSpec");r.$$proto,r.$$scope}!function(t){{var r=n(t,"Core");r.$$proto,r.$$scope}!function(t){var r=n(t,"Version"),$=(r.$$proto,r.$$scope);e.cdecl($,"STRING","3.0.0.beta1")}(r)}(r)}(t)},Opal.modules["rspec/core/flat_map"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=e.breaker,$=(e.slice,e.module);return e.add_stubs(["$respond_to?","$flat_map","$flatten","$map","$module_function"]),function(t){{var o=$(t,"RSpec");o.$$proto,o.$$scope}!function(t){{var o=$(t,"Core");o.$$proto,o.$$scope}!function(t){{var o,a,i,s=$(t,"FlatMap");s.$$proto,s.$$scope}(o=[]["$respond_to?"]("flat_map"))===n||o.$$is_boolean&&1!=o?e.defn(s,"$flat_map",i=function(t){var $,o,a,s=this,c=i.$$p,u=c||n;return i.$$p=null,($=(o=t).$map,$.$$p=(a=function(t){{var $;a.$$s||this}return null==t&&(t=n),$=e.yield1(u,t),$===r?$:$},a.$$s=s,a),$).call(o).$flatten()}):e.defn(s,"$flat_map",a=function(t){var $,o,i,s=this,c=a.$$p,u=c||n;return a.$$p=null,($=(o=t).$flat_map,$.$$p=(i=function(t){{var $;i.$$s||this}return null==t&&(t=n),$=e.yield1(u,t),$===r?$:$},i.$$s=s,i),$).call(o)}),s.$module_function("flat_map")}(o)}(o)}(t)},Opal.modules["rspec/core/filter_manager"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=e.breaker,$=e.slice,o=e.module,a=e.klass,i=e.hash2;return e.add_stubs(["$expand_path","$gsub","$inspect","$inspect_filter_hash","$lambda","$!","$each","$store","$without_conditional_filters","$empty?","$private","$reject","$==","$[]","$_warn_deprecated_keys","$last","$has_key?","$_warn_deprecated_key","$deprecate","$[]=","$delete","$attr_reader","$new","$extend","$push","$replace","$clear","$inclusions","$empty_without_conditional_filters?","$exclusions","$select","$exclude?","$include?","$merge","$reverse_merge","$any_apply?","$unless_standalone","$already_set_standalone_filter?","$is_standalone_filter?","$each_key","$merge!","$each_pair","$any?"]),function(t){{var s=o(t,"RSpec");s.$$proto,s.$$scope}!function(t){{var s=o(t,"Core");s.$$proto,s.$$scope}!function(t,$super){function s(){}var c,u=s=a(t,$super,"FilterManager",s),l=u.$$proto,_=u.$$scope;return l.inclusions=l.exclusions=n,e.cdecl(_,"STANDALONE_FILTERS",["locations","line_numbers","full_description"]),e.cdecl(_,"PROC_HEX_NUMBER",/0x[0-9a-f]+@/),e.cdecl(_,"PROJECT_DIR",_.get("File").$expand_path(".")),e.defs(u,"$inspect_filter_hash",function(e){return e.$inspect().$gsub(_.get("PROC_HEX_NUMBER"),"").$gsub(_.get("PROJECT_DIR"),".").$gsub(" (lambda)","")}),function(e,$super){function t(){}var r=t=a(e,$super,"InclusionFilterHash",t),$=r.$$proto,o=r.$$scope;return $.$description=function(){var e=this;return o.get("FilterManager").$inspect_filter_hash(e)},n&&"description"}(u,_.get("Hash")),function(t,$super){function r(){}var o,s,c,u,l,_,p=r=a(t,$super,"ExclusionFilterHash",r),d=p.$$proto,f=p.$$scope;return e.cdecl(f,"CONDITIONAL_FILTERS",i(["if","unless"],{"if":(o=(s=p).$lambda,o.$$p=(c=function(e){c.$$s||this;return null==e&&(e=n),e["$!"]()},c.$$s=p,c),o).call(s),unless:(o=(u=p).$lambda,o.$$p=(l=function(e){l.$$s||this;return null==e&&(e=n),e},l.$$s=p,l),o).call(u)})),d.$initialize=_=function(){var t,r,o,a=$.call(arguments,0),i=this,s=_.$$p;return _.$$p=null,e.find_super_dispatcher(i,"initialize",_,s).apply(i,a),(t=(r=f.get("CONDITIONAL_FILTERS")).$each,t.$$p=(o=function(e,t){var r=o.$$s||this;return null==e&&(e=n),null==t&&(t=n),r.$store(e,t)},o.$$s=i,o),t).call(r)},d.$description=function(){var e=this;return f.get("FilterManager").$inspect_filter_hash(e.$without_conditional_filters())},d["$empty_without_conditional_filters?"]=function(){var e=this;return e.$without_conditional_filters()["$empty?"]()},p.$private(),d.$without_conditional_filters=function(){var e,t,r,$=this;return(e=(t=$).$reject,e.$$p=(r=function(e,t){r.$$s||this;return null==e&&(e=n),null==t&&(t=n),f.get("CONDITIONAL_FILTERS")["$[]"](e)["$=="](t)},r.$$s=$,r),e).call(t)},n&&"without_conditional_filters"}(u,_.get("Hash")),function(t){var r,a,i=o(t,"BackwardCompatibility"),s=(i.$$proto,i.$$scope);e.defn(i,"$merge",r=function(t,n,o){var a=$.call(arguments,0),i=this,s=r.$$p;return o=$.call(arguments,2),r.$$p=null,i.$_warn_deprecated_keys(o.$last()),e.find_super_dispatcher(i,"merge",r,s).apply(i,a)}),e.defn(i,"$reverse_merge",a=function(t,n,r){var o=$.call(arguments,0),i=this,s=a.$$p;return r=$.call(arguments,2),a.$$p=null,i.$_warn_deprecated_keys(r.$last()),e.find_super_dispatcher(i,"reverse_merge",a,s).apply(i,o)}),e.defn(i,"$_warn_deprecated_keys",function(e){var t,r=this;return(t=e["$has_key?"]("unless"))===n||t.$$is_boolean&&1!=t||r.$_warn_deprecated_key("unless",e),(t=e["$has_key?"]("if"))===n||t.$$is_boolean&&1!=t?n:r.$_warn_deprecated_key("if",e)}),e.defn(i,"$_warn_deprecated_key",function(e,t){var r=this;return null==r.exclusions&&(r.exclusions=n),s.get("RSpec").$deprecate("FilterManager#exclude("+e.$inspect()+" => "+t["$[]"](e).$inspect()+")"),r.exclusions["$[]="](e,t.$delete(e))})}(u),u.$attr_reader("exclusions","inclusions"),l.$initialize=function(){var e=this;return e.exclusions=_.get("ExclusionFilterHash").$new(),e.inclusions=_.get("InclusionFilterHash").$new(),e.$extend(_.get("BackwardCompatibility"))},l.$add_location=function(e,t){var r,$,o,a,s=this,c=n;return c=(r=s.inclusions.$delete("locations"))!==!1&&r!==n?r:($=(o=_.get("Hash")).$new,$.$$p=(a=function(e,t){a.$$s||this;return null==e&&(e=n),null==t&&(t=n),e["$[]="](t,[])},a.$$s=s,a),$).call(o),(r=c["$[]"](_.get("File").$expand_path(e))).$push.apply(r,[].concat(t)),s.inclusions.$replace(i(["locations"],{locations:c})),s.exclusions.$clear()},l["$empty?"]=function(){var e,t=this;return e=t.$inclusions()["$empty?"](),e!==!1&&e!==n?t.$exclusions()["$empty_without_conditional_filters?"]():e},l.$prune=function(e){var t,r,$,o=this;return(t=(r=e).$select,t.$$p=($=function(e){var t,r=$.$$s||this;return null==e&&(e=n),t=r["$exclude?"](e)["$!"](),t!==!1&&t!==n?r["$include?"](e):t},$.$$s=o,$),t).call(r)},l.$exclude=function(e){var t,n=this;return e=$.call(arguments,0),(t=n).$merge.apply(t,[n.exclusions,n.inclusions].concat(e))},l["$exclude!"]=function(e){var t,n=this;return e=$.call(arguments,0),(t=n).$replace.apply(t,[n.exclusions,n.inclusions].concat(e))},l.$exclude_with_low_priority=function(e){var t,n=this;return e=$.call(arguments,0),(t=n).$reverse_merge.apply(t,[n.exclusions,n.inclusions].concat(e))},l["$exclude?"]=function(e){var t,r=this;return(t=r.exclusions["$empty?"]())===n||t.$$is_boolean&&1!=t?e["$any_apply?"](r.exclusions):!1},l.$include=function(e){var t,r,o,a=this;return e=$.call(arguments,0),(t=(r=a).$unless_standalone,t.$$p=(o=function(){var t,r=o.$$s||this;return null==r.inclusions&&(r.inclusions=n),null==r.exclusions&&(r.exclusions=n),(t=r).$merge.apply(t,[r.inclusions,r.exclusions].concat(e))},o.$$s=a,o),t).apply(r,[].concat(e))},l["$include!"]=function(e){var t,r,o,a=this;return e=$.call(arguments,0),(t=(r=a).$unless_standalone,t.$$p=(o=function(){var t,r=o.$$s||this;return null==r.inclusions&&(r.inclusions=n),null==r.exclusions&&(r.exclusions=n),(t=r).$replace.apply(t,[r.inclusions,r.exclusions].concat(e))},o.$$s=a,o),t).apply(r,[].concat(e))},l.$include_with_low_priority=function(e){var t,r,o,a=this;return e=$.call(arguments,0),(t=(r=a).$unless_standalone,t.$$p=(o=function(){var t,r=o.$$s||this;return null==r.inclusions&&(r.inclusions=n),null==r.exclusions&&(r.exclusions=n),(t=r).$reverse_merge.apply(t,[r.inclusions,r.exclusions].concat(e))},o.$$s=a,o),t).apply(r,[].concat(e))},l["$include?"]=function(e){var t,r=this;return(t=r.inclusions["$empty?"]())===n||t.$$is_boolean&&1!=t?e["$any_apply?"](r.inclusions):!0},u.$private(),l.$unless_standalone=c=function(t){var o,a=this,i=c.$$p,s=i||n;return t=$.call(arguments,0),c.$$p=null,(o=a["$already_set_standalone_filter?"]())===n||o.$$is_boolean&&1!=o?(o=a["$is_standalone_filter?"](t.$last()))===n||o.$$is_boolean&&1!=o?(o=e.yieldX(s,[]),o===r?o:o):a.inclusions.$replace(t.$last()):n},l.$merge=function(e,t,r){var o,a,i,s=this;return r=$.call(arguments,2),(o=(a=e["$merge!"](r.$last())).$each_key,o.$$p=(i=function(e){i.$$s||this;return null==e&&(e=n),t.$delete(e)},i.$$s=s,i),o).call(a)},l.$replace=function(e,t,r){var o,a,i,s=this;return r=$.call(arguments,2),(o=(a=r.$last()).$each_key,o.$$p=(i=function(e){i.$$s||this;return null==e&&(e=n),t.$delete(e)},i.$$s=s,i),o).call(a),e.$replace(r.$last())},l.$reverse_merge=function(e,t,r){var o,a,i,s=this,c=n;return r=$.call(arguments,2),c=r.$last().$merge(e),(o=(a=t).$each_pair,o.$$p=(i=function(e,t){i.$$s||this;return null==e&&(e=n),null==t&&(t=n),c["$[]"](e)["$=="](t)?c.$delete(e):n},i.$$s=s,i),o).call(a),e.$replace(c)},l["$already_set_standalone_filter?"]=function(){var e=this;return e["$is_standalone_filter?"](e.$inclusions())},l["$is_standalone_filter?"]=function(e){var t,r,$,o=this;return(t=(r=_.get("STANDALONE_FILTERS"))["$any?"],t.$$p=($=function(t){$.$$s||this;return null==t&&(t=n),e["$has_key?"](t)},$.$$s=o,$),t).call(r)},n&&"is_standalone_filter?"}(s,null)}(s)}(t)},Opal.modules["rspec/core/dsl"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e,r=e.nil,$=(e.breaker,e.slice),o=e.module;return e.add_stubs(["$register","$describe","$to_proc","$extend","$send"]),function(t){{var n=o(t,"RSpec");n.$$proto,n.$$scope}!function(t){{var n=o(t,"Core");n.$$proto,n.$$scope}!function(t){var n,a=o(t,"DSL"),i=(a.$$proto,a.$$scope);e.defn(a,"$describe",n=function(e){var t,o,a=n.$$p,s=a||r;return e=$.call(arguments,0),n.$$p=null,(t=(o=i.get("RSpec").$$scope.get("Core").$$scope.get("ExampleGroup")).$describe,t.$$p=s.$to_proc(),t).apply(o,[].concat(e)).$register()})}(n)}(n)}(t),t.$extend(n.get("RSpec").$$scope.get("Core").$$scope.get("DSL")),n.get("Module").$send("include",n.get("RSpec").$$scope.get("Core").$$scope.get("DSL"))},Opal.modules["rspec/core/reporter"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.dynamic_require_severity="warning";var r=(e.top,e),$=e.nil,o=e.breaker,a=e.slice,i=e.module,s=e.klass;return e.add_stubs(["$map","$to_proc","$new","$[]=","$each","$register_listener","$respond_to?","$<<","$[]","$to_sym","$start","$finish","$now","$notify","$empty?","$descendant_filtered_examples","$stop","$seed_used?","$seed","$alias_method","$to_f","$send","$registered_listeners","$private"]),function(r){{var c=i(r,"Core");c.$$proto,c.$$scope}!function(r,$super){function i(){}var c,u,l,_,p=i=s(r,$super,"Reporter",i),d=p.$$proto,f=p.$$scope;return d.listeners=d.example_count=d.failure_count=d.pending_count=d.duration=d.configuration=d.start=$,e.cdecl(f,"NOTIFICATIONS",(c=(u=["start","message","example_group_started","example_group_finished","example_started","example_passed","example_failed","example_pending","start_dump","dump_pending","dump_failures","dump_summary","seed","close","stop","deprecation","deprecation_summary"]).$map,c.$$p="to_sym".$to_proc(),c).call(u)),d.$initialize=function(e,t){var n,r,o,i,s,c=this;return t=a.call(arguments,1),c.configuration=e,c.listeners=(n=(r=f.get("Hash")).$new,n.$$p=(o=function(e,t){o.$$s||this;return null==e&&(e=$),null==t&&(t=$),e["$[]="](t,[])},o.$$s=c,o),n).call(r),(n=(i=t).$each,n.$$p=(s=function(e){var t,n=s.$$s||this;return null==e&&(e=$),(t=n).$register_listener.apply(t,[e].concat(f.get("NOTIFICATIONS")))},s.$$s=c,s),n).call(i),c.example_count=c.failure_count=c.pending_count=0,c.duration=c.start=$},d.$register_listener=function(e,t){var n,r,o,i=this;return t=a.call(arguments,1),(n=(r=t).$each,n.$$p=(o=function(t){var n,r=o.$$s||this;return null==r.listeners&&(r.listeners=$),null==t&&(t=$),(n=e["$respond_to?"](t))===$||n.$$is_boolean&&1!=n?$:r.listeners["$[]"](t.$to_sym())["$<<"](e)},o.$$s=i,o),n).call(r),!0},d.$registered_listeners=function(e){var t=this;return t.listeners["$[]"](e)},d.$report=l=function(t){var n,r=this,a=l.$$p,i=a||$;l.$$p=null,r.$start(t);try{return n=e.yield1(i,r),n===o?n:n}finally{r.$finish()}},d.$start=function(e){var t=this;return t.start=f.get("RSpec").$$scope.get("Core").$$scope.get("Time").$now(),t.$notify("start",e)},d.$message=function(e){var t=this;return t.$notify("message",e)},d.$example_group_started=function(e){var t,n=this;return(t=e.$descendant_filtered_examples()["$empty?"]())===$||t.$$is_boolean&&1!=t?n.$notify("example_group_started",e):$},d.$example_group_finished=function(e){var t,n=this;return(t=e.$descendant_filtered_examples()["$empty?"]())===$||t.$$is_boolean&&1!=t?n.$notify("example_group_finished",e):$},d.$example_started=function(e){var n=this;
return n.example_count=t(n.example_count,1),n.$notify("example_started",e)},d.$example_passed=function(e){var t=this;return t.$notify("example_passed",e)},d.$example_failed=function(e){var n=this;return n.failure_count=t(n.failure_count,1),n.$notify("example_failed",e)},d.$example_pending=function(e){var n=this;return n.pending_count=t(n.pending_count,1),n.$notify("example_pending",e)},d.$deprecation=function(e){var t=this;return t.$notify("deprecation",e)},d.$finish=function(){var e,t=this;try{return t.$stop(),t.$notify("start_dump"),t.$notify("dump_pending"),t.$notify("dump_failures"),t.$notify("dump_summary",t.duration,t.example_count,t.failure_count,t.pending_count),t.$notify("deprecation_summary"),(e=t["$seed_used?"]())===$||e.$$is_boolean&&1!=e?$:t.$notify("seed",t.configuration.$seed())}finally{t.$notify("close")}},p.$alias_method("abort","finish"),d.$stop=function(){var e,t=this;return(e=t.start)===$||e.$$is_boolean&&1!=e||(t.duration=n(f.get("RSpec").$$scope.get("Core").$$scope.get("Time").$now(),t.start).$to_f()),t.$notify("stop")},d.$notify=_=function(e,t){var n,r,o,i=this,s=_.$$p,c=s||$;return t=a.call(arguments,1),_.$$p=null,(n=(r=i.$registered_listeners(e)).$each,n.$$p=(o=function(n){{var r,a;o.$$s||this}return null==n&&(n=$),(r=(a=n).$send,r.$$p=c.$to_proc(),r).apply(a,[e].concat(t))},o.$$s=i,o),n).call(r)},p.$private(),d["$seed_used?"]=function(){var e,t=this;return e=t.configuration.$seed(),e!==!1&&e!==$?t.configuration["$seed_used?"]():e},$&&"seed_used?"}(c,null)}(r.get("RSpec"))},Opal.modules["rspec/core/hooks"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass,a=e.hash2;return e.add_stubs(["$attr_reader","$all_apply?","$options","$instance_exec","$to_proc","$block","$instance_exec_with_rescue","$message","$reporter","$configuration","$class","$first","$backtrace","$each","$define_method","$__send__","$hooks","$public_instance_methods","$protected","$with","$new","$select","$options_apply?","$run","$call","$reduce","$wrap","$empty?","$shift","$[]","$process","$private","$==","$any?","$include?","$parent_groups","$<<","$register_hook","$alias_method","$dry_run?","$find_hook","$for","$flat_map","$[]=","$reverse","$scope_and_options_from","$send","$===","$before_all_hooks_for","$after_all_hooks_for","$around_each_hooks_for","$before_each_hooks_for","$after_each_hooks_for","$extract_scope_from","$build_hash_from","$is_a?","$raise"]),function(t){{var i=$(t,"RSpec");i.$$proto,i.$$scope}!function(t){{var i=$(t,"Core");i.$$proto,i.$$scope}!function(t){var i,s,c,u,l,_,p,d,f,h,m,g,v,b=$(t,"Hooks"),y=(b.$$proto,b.$$scope);!function(e,$super){function t(){}{var r=t=o(e,$super,"Hook",t),$=r.$$proto;r.$$scope}return r.$attr_reader("block","options"),$.$initialize=function(e,t){var n=this;return n.block=e,n.options=t},$["$options_apply?"]=function(e){var t=this;return e["$all_apply?"](t.$options())},n&&"options_apply?"}(b,null),function(e,$super){function t(){}{var r=t=o(e,$super,"BeforeHook",t),$=r.$$proto;r.$$scope}return $.$run=function(e){var t,n,r=this;return(t=(n=e).$instance_exec,t.$$p=r.$block().$to_proc(),t).call(n,e)},$.$display_name=function(){return"before hook"},n&&"display_name"}(b,y.get("Hook")),function(e,$super){function t(){}{var r=t=o(e,$super,"AfterHook",t),$=r.$$proto;r.$$scope}return $.$run=function(e){var t,n,r=this;return(t=(n=e).$instance_exec_with_rescue,t.$$p=r.$block().$to_proc(),t).call(n,"in an after hook")},$.$display_name=function(){return"after hook"},n&&"display_name"}(b,y.get("Hook")),function(t,$super){function r(){}var $=r=o(t,$super,"AfterAllHook",r),a=$.$$proto,i=$.$$scope;return a.$run=function(t){var r,$,o=this,a=n;try{return(r=($=t).$instance_exec,r.$$p=o.$block().$to_proc(),r).call($,t)}catch(s){if(e.rescue(s,[i.get("Exception")]))return a=s,i.get("RSpec").$configuration().$reporter().$message("\nAn error occurred in an after(:all) hook.\n  "+a.$class()+": "+a.$message()+"\n  occurred at "+a.$backtrace().$first()+"\n\n");throw s}},a.$display_name=function(){return"after(:all) hook"},n&&"display_name"}(b,y.get("Hook")),function(e,$super){function t(){}{var r=t=o(e,$super,"AroundHook",t),$=r.$$proto;r.$$scope}return $.$display_name=function(){return"around hook"},n&&"display_name"}(b,y.get("Hook")),function(t,$super){function $(){}var a,i,s,c=$=o(t,$super,"BaseHookCollection",$),u=c.$$proto,l=c.$$scope;return(a=(i=l.get("Array").$public_instance_methods(!1)).$each,a.$$p=(s=function(e){var t,$,o,a=s.$$s||this;return null==e&&(e=n),(t=($=a).$define_method,t.$$p=(o=function(t){var $,a,i,s=o.$$s||this;return t=r.call(arguments,0),$=o.$$p||n,o.$$p=null,(a=(i=s.$hooks()).$__send__,a.$$p=$.$to_proc(),a).apply(i,[e].concat(t))},o.$$s=a,o),t).call($,e)},s.$$s=c,s),a).call(i),c.$attr_reader("hooks"),c.$protected("hooks"),e.defn(c,"$append",u.$push),e.defn(c,"$prepend",u.$unshift),u.$initialize=function(e){var t=this;return null==e&&(e=[]),t.hooks=e},n&&"initialize"}(b,null),function(e,$super){function t(){}{var r=t=o(e,$super,"HookCollection",t),$=r.$$proto;r.$$scope}return $.$for=function(e){var t,r,$,o=this;return o.$class().$new((t=(r=o.$hooks()).$select,t.$$p=($=function(t){$.$$s||this;return null==t&&(t=n),t["$options_apply?"](e)},$.$$s=o,$),t).call(r)).$with(e)},$.$with=function(e){var t=this;return t.example=e,t},$.$run=function(){var e,t,r,$=this;return(e=(t=$.$hooks()).$each,e.$$p=(r=function(e){var t=r.$$s||this;return null==t.example&&(t.example=n),null==e&&(e=n),e.$run(t.example)},r.$$s=$,r),e).call(t)},n&&"run"}(b,y.get("BaseHookCollection")),function(e,$super){function t(){}{var r=t=o(e,$super,"AroundHookCollection",t),$=r.$$proto;r.$$scope}return $.initial_procsy=n,$.$for=function(e,t){var r,$,o,a=this;return null==t&&(t=n),a.$class().$new((r=($=a.$hooks()).$select,r.$$p=(o=function(t){o.$$s||this;return null==t&&(t=n),t["$options_apply?"](e)},o.$$s=a,o),r).call($)).$with(e,t)},$.$with=function(e,t){var n=this;return n.example=e,n.initial_procsy=t,n},$.$run=function(){var e,t,r,$=this;return(e=(t=$.$hooks()).$reduce,e.$$p=(r=function(e,t){var $,o,a,i=r.$$s||this;return null==e&&(e=n),null==t&&(t=n),($=(o=e).$wrap,$.$$p=(a=function(){var r,$,o=a.$$s||this;return null==o.example&&(o.example=n),(r=($=o.example).$instance_exec,r.$$p=t.$block().$to_proc(),r).call($,e)},a.$$s=i,a),$).call(o)},r.$$s=$,r),e).call(t,$.initial_procsy).$call()},n&&"run"}(b,y.get("BaseHookCollection")),function(e,$super){function t(){}{var r=t=o(e,$super,"GroupHookCollection",t),$=r.$$proto;r.$$scope}return $.group=n,$.$for=function(e){var t=this;return t.group=e,t},$.$run=function(){var e,t=this;return function(){for(;(e=t.$hooks()["$empty?"]())===n||e.$$is_boolean&&1!=e;)t.$hooks().$shift().$run(t.group);return n}()},n&&"run"}(b,y.get("BaseHookCollection")),function(e,$super){function t(){}{var r=t=o(e,$super,"HookCollections",t),$=r.$$proto;r.$$scope}return $.data=n,$.$initialize=function(e){var t=this;return t.data=e},$["$[]"]=function(e){var t=this;return t.data["$[]"](e)},$.$register_globals=function(e,t){var n=this;return n.$process(e,t,"before","each"),n.$process(e,t,"after","each"),n.$process(e,t,"around","each"),n.$process(e,t,"before","all"),n.$process(e,t,"after","all")},r.$private(),$.$process=function(e,t,r,$){var o,a,i,s=this;return(o=(a=t["$[]"](r)["$[]"]($)).$each,o.$$p=(i=function(t){var o,a,s,c,u=i.$$s||this;return null==t&&(t=n),(o=(a=$["$=="]("each"))!==!1&&a!==n?a:t["$options_apply?"](e))===n||o.$$is_boolean&&1!=o?n:(o=(a=(s=e.$parent_groups())["$any?"],a.$$p=(c=function(e){c.$$s||this;return null==e&&(e=n),e.$hooks()["$[]"](r)["$[]"]($)["$include?"](t)},c.$$s=u,c),a).call(s))===n||o.$$is_boolean&&1!=o?u["$[]"](r)["$[]"]($)["$<<"](t):n},i.$$s=s,i),o).call(a)},n&&"process"}(b,null),e.defn(b,"$hooks",function(){var e,t=this;return null==t.hooks&&(t.hooks=n),(e=t.hooks)!==!1&&e!==n?e:t.hooks=y.get("HookCollections").$new(a(["around","before","after"],{around:a(["each"],{each:y.get("AroundHookCollection").$new()}),before:a(["each","all","suite"],{each:y.get("HookCollection").$new(),all:y.get("HookCollection").$new(),suite:y.get("HookCollection").$new()}),after:a(["each","all","suite"],{each:y.get("HookCollection").$new(),all:y.get("HookCollection").$new(),suite:y.get("HookCollection").$new()})}))}),e.defn(b,"$before",i=function(e){var t,$,o=this,a=i.$$p,s=a||n;return e=r.call(arguments,0),i.$$p=null,(t=($=o).$register_hook,t.$$p=s.$to_proc(),t).apply($,["append","before"].concat(e))}),b.$alias_method("append_before","before"),e.defn(b,"$prepend_before",s=function(e){var t,$,o=this,a=s.$$p,i=a||n;return e=r.call(arguments,0),s.$$p=null,(t=($=o).$register_hook,t.$$p=i.$to_proc(),t).apply($,["prepend","before"].concat(e))}),e.defn(b,"$after",c=function(e){var t,$,o=this,a=c.$$p,i=a||n;return e=r.call(arguments,0),c.$$p=null,(t=($=o).$register_hook,t.$$p=i.$to_proc(),t).apply($,["prepend","after"].concat(e))}),b.$alias_method("prepend_after","after"),e.defn(b,"$append_after",u=function(e){var t,$,o=this,a=u.$$p,i=a||n;return e=r.call(arguments,0),u.$$p=null,(t=($=o).$register_hook,t.$$p=i.$to_proc(),t).apply($,["append","after"].concat(e))}),e.defn(b,"$around",l=function(e){var t,$,o=this,a=l.$$p,i=a||n;return e=r.call(arguments,0),l.$$p=null,(t=($=o).$register_hook,t.$$p=i.$to_proc(),t).apply($,["prepend","around"].concat(e))}),e.defn(b,"$run_hook",function(e,t,r,$){var o,a=this;return null==r&&(r=y.get("ExampleGroup").$new()),null==$&&($=n),(o=y.get("RSpec").$configuration()["$dry_run?"]())===n||o.$$is_boolean&&1!=o?a.$find_hook(e,t,r,$).$run():n}),e.defn(b,"$around_each_hooks_for",function(e,t){var r,$,o,a=this;return null==t&&(t=n),y.get("AroundHookCollection").$new((r=($=y.get("FlatMap")).$flat_map,r.$$p=(o=function(e){o.$$s||this;return null==e&&(e=n),e.$hooks()["$[]"]("around")["$[]"]("each")},o.$$s=a,o),r).call($,a.$parent_groups())).$for(e,t)}),b.$private(),e.cdecl(y,"SCOPES",["each","all","suite"]),e.cdecl(y,"HOOK_TYPES",a(["before","after","around"],{before:(_=(p=y.get("Hash")).$new,_.$$p=(d=function(){d.$$s||this;return y.get("BeforeHook")},d.$$s=b,d),_).call(p),after:(_=(f=y.get("Hash")).$new,_.$$p=(h=function(){h.$$s||this;return y.get("AfterHook")},h.$$s=b,h),_).call(f),around:(_=(m=y.get("Hash")).$new,_.$$p=(g=function(){g.$$s||this;return y.get("AroundHook")},g.$$s=b,g),_).call(m)})),y.get("HOOK_TYPES")["$[]"]("after")["$[]="]("all",y.get("AfterAllHook")),e.defn(b,"$before_all_hooks_for",function(e){var t=this;return y.get("GroupHookCollection").$new(t.$hooks()["$[]"]("before")["$[]"]("all")).$for(e)}),e.defn(b,"$after_all_hooks_for",function(e){var t=this;return y.get("GroupHookCollection").$new(t.$hooks()["$[]"]("after")["$[]"]("all")).$for(e)}),e.defn(b,"$before_each_hooks_for",function(e){var t,r,$,o=this;return y.get("HookCollection").$new((t=(r=y.get("FlatMap")).$flat_map,t.$$p=($=function(e){$.$$s||this;return null==e&&(e=n),e.$hooks()["$[]"]("before")["$[]"]("each")},$.$$s=o,$),t).call(r,o.$parent_groups().$reverse())).$for(e)}),e.defn(b,"$after_each_hooks_for",function(e){var t,r,$,o=this;return y.get("HookCollection").$new((t=(r=y.get("FlatMap")).$flat_map,t.$$p=($=function(e){$.$$s||this;return null==e&&(e=n),e.$hooks()["$[]"]("after")["$[]"]("each")},$.$$s=o,$),t).call(r,o.$parent_groups())).$for(e)}),e.defn(b,"$register_hook",v=function(t,$,o){var a,i,s=this,c=v.$$p,u=c||n,l=n,_=n;return o=r.call(arguments,2),v.$$p=null,a=e.to_ary((i=s).$scope_and_options_from.apply(i,[].concat(o))),l=null==a[0]?n:a[0],_=null==a[1]?n:a[1],s.$hooks()["$[]"]($)["$[]"](l).$send(t,y.get("HOOK_TYPES")["$[]"]($)["$[]"](l).$new(u,_))}),e.defn(b,"$find_hook",function(e,t,r,$){var o=this,a=n;return function(){return a=[e,t],["before","all"]["$==="](a)?o.$before_all_hooks_for(r):["after","all"]["$==="](a)?o.$after_all_hooks_for(r):["around","each"]["$==="](a)?o.$around_each_hooks_for(r,$):["before","each"]["$==="](a)?o.$before_each_hooks_for(r):["after","each"]["$==="](a)?o.$after_each_hooks_for(r):["before","suite"]["$==="](a)||["after","suite"]["$==="](a)?o.$hooks()["$[]"](e)["$[]"]("suite").$with(r):n}()}),e.defn(b,"$scope_and_options_from",function(e){var t=this;return e=r.call(arguments,0),[t.$extract_scope_from(e),y.get("Metadata").$build_hash_from(e)]}),e.defn(b,"$extract_scope_from",function(e){var t,r,$,o,a=this;return(t=y.get("SCOPES")["$include?"](e.$first()))===n||t.$$is_boolean&&1!=t?(t=(r=($=e)["$any?"],r.$$p=(o=function(e){o.$$s||this;return null==e&&(e=n),e["$is_a?"](y.get("Symbol"))},o.$$s=a,o),r).call($))===n||t.$$is_boolean&&1!=t?"each":a.$raise(y.get("ArgumentError").$new("You must explicitly give a scope (:each, :all, or :suite) when using symbols as metadata for a hook.")):e.$shift()})}(i)}(i)}(t)},Opal.modules["rspec/core/memoized_helpers"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=e.breaker,$=(e.slice,e.module),o=e.hash2,a=e.klass;return e.add_stubs(["$fetch","$[]=","$__memoized","$described_class","$description","$class","$===","$new","$handle_matcher","$subject","$private","$instance_eval","$==","$raise","$article","$hook_expression","$first_non_rspec_line","$hook_intention","$extend","$nil?","$send","$to_proc","$module_for","$arity","$define_method","$current_example","$let","$before","$__send__","$alias_method","$get_constant_or_yield","$include","$const_set","$method","$const_defined?","$const_get"]),function(t){{var i=$(t,"RSpec");i.$$proto,i.$$scope}!function(t){{var i=$(t,"Core");i.$$proto,i.$$scope}!function(t){var i,s,c=$(t,"MemoizedHelpers"),u=(c.$$proto,c.$$scope);e.defn(c,"$subject",function(){var e,t,r,$=this;return(e=(t=$.$__memoized()).$fetch,e.$$p=(r=function(){var e,t=r.$$s||this,$=n;return t.$__memoized()["$[]="]("subject",function(){return $=(e=t.$described_class())!==!1&&e!==n?e:t.$class().$description(),(e=u.get("Class")["$==="]($))===n||e.$$is_boolean&&1!=e?$:$.$new()}())},r.$$s=$,r),e).call(t,"subject")}),e.defn(c,"$should",function(e,t){var r=this;return null==e&&(e=n),null==t&&(t=n),u.get("RSpec").$$scope.get("Expectations").$$scope.get("PositiveExpectationHandler").$handle_matcher(r.$subject(),e,t)}),e.defn(c,"$should_not",function(e,t){var r=this;return null==e&&(e=n),null==t&&(t=n),u.get("RSpec").$$scope.get("Expectations").$$scope.get("NegativeExpectationHandler").$handle_matcher(r.$subject(),e,t)}),c.$private(),e.defn(c,"$__memoized",function(){var e,t=this;return null==t.__memoized&&(t.__memoized=n),(e=t.__memoized)!==!1&&e!==n?e:t.__memoized=o([],{})}),function(t,$super){function $(){}var o,i,s=$=a(t,$super,"AllHookMemoizedHash",$),c=(s.$$proto,s.$$scope);return e.defs(s,"$isolate_for_all_hook",o=function(t){var $,a,i,s=this,c=o.$$p,u=c||n,l=n;return o.$$p=null,l=s,($=(a=t).$instance_eval,$.$$p=(i=function(){var t,$=i.$$s||this;$.__memoized=l;try{return t=e.yieldX(u,[]),t===r?t:t}finally{$.__memoized=n}},i.$$s=s,i),$).call(a)}),e.defs(s,"$fetch",i=function(e){var t=this,r=(i.$$p,n);return i.$$p=null,r=function(){return e["$=="]("subject")?"subject":"let declaration `"+e+"`"}(),t.$raise(""+r+" accessed in "+t.$article()+" "+t.$hook_expression()+" hook at:\n  "+c.get("CallerFilter").$first_non_rspec_line()+"\n\n`let` and `subject` declarations are not intended to be called\nin "+t.$article()+" "+t.$hook_expression()+" hook, as they exist to define state that\nis reset between each example, while "+t.$hook_expression()+" exists to\n"+t.$hook_intention()+".\n")}),function(t,$super){function r(){}{var $=r=a(t,$super,"Before",r);$.$$proto,$.$$scope}return e.defs($,"$hook_expression",function(){return"`before(:all)`"}),e.defs($,"$article",function(){return"a"}),e.defs($,"$hook_intention",function(){return"define state that is shared across examples in an example group"}),n&&"hook_intention"}(s,s),function(t,$super){function r(){}{var $=r=a(t,$super,"After",r);$.$$proto,$.$$scope}return e.defs($,"$hook_expression",function(){return"`after(:all)`"}),e.defs($,"$article",function(){return"an"}),e.defs($,"$hook_intention",function(){return"cleanup state that is shared across examples in an example group"}),n&&"hook_intention"}(s,s)}(c,null),e.defs(c,"$included",function(e){return e.$extend(u.get("ClassMethods"))}),function(t){var r,o,a,i,s=$(t,"ClassMethods"),c=(s.$$proto,s.$$scope);e.defn(s,"$let",r=function(t){var $,o,a,i,s,u,l=this,_=r.$$p,p=_||n;return r.$$p=null,($=p["$nil?"]())===n||$.$$is_boolean&&1!=$||l.$raise("#let or #subject called without a block"),($=(o=c.get("MemoizedHelpers").$module_for(l)).$send,$.$$p=p.$to_proc(),$).call(o,"define_method",t),p.$arity()["$=="](1)?($=(a=l).$define_method,$.$$p=(i=function(){var $,o,a,s=i.$$s||this;return($=(o=s.$__memoized()).$fetch,$.$$p=(a=function(t){var $=a.$$s||this;return null==t&&(t=n),$.$__memoized()["$[]="](t,e.find_iter_super_dispatcher($,"let",a.$$def||i.$$def||r,null).apply($,[c.get("RSpec").$current_example(),n.$to_proc()]))},a.$$s=s,a),$).call(o,t)},i.$$s=l,i),$).call(a,t):($=(s=l).$define_method,$.$$p=(u=function(){var $,o,a,i=u.$$s||this;return($=(o=i.$__memoized()).$fetch,$.$$p=(a=function(t){var $=a.$$s||this;return null==t&&(t=n),$.$__memoized()["$[]="](t,e.find_iter_super_dispatcher($,"let",a.$$def||u.$$def||r,null).apply($,[n.$to_proc()]))},a.$$s=i,a),$).call(o,t)},u.$$s=l,u),$).call(s,t)}),e.defn(s,"$let!",o=function(e){var t,r,$,a,i=this,s=o.$$p,c=s||n;return o.$$p=null,(t=(r=i).$let,t.$$p=c.$to_proc(),t).call(r,e),(t=($=i).$before,t.$$p=(a=function(){var t=a.$$s||this;return t.$__send__(e)},a.$$s=i,a),t).call($)}),e.defn(s,"$subject",a=function(e){var t,r,$,o,i,s=this,u=a.$$p,l=u||n;return null==e&&(e=n),a.$$p=null,e!==!1&&e!==n?((t=(r=s).$let,t.$$p=l.$to_proc(),t).call(r,e),s.$alias_method("subject",e),(t=($=s.$$scope.get("NamedSubjectPreventSuper")).$send,t.$$p=(o=function(){var e=o.$$s||this;return e.$raise(c.get("NotImplementedError"),"`super` in named subjects is not supported")},o.$$s=s,o),t).call($,"define_method",e)):(t=(i=s).$let,t.$$p=l.$to_proc(),t).call(i,"subject")}),e.defn(s,"$subject!",i=function(e){var t,r,$,o,a=this,s=i.$$p,c=s||n;return null==e&&(e=n),i.$$p=null,(t=(r=a).$subject,t.$$p=c.$to_proc(),t).call(r,e),(t=($=a).$before,t.$$p=(o=function(){var e=o.$$s||this;return e.$subject()},o.$$s=a,o),t).call($)})}(c),e.defs(c,"$module_for",function(e){var t,r,$,o=this;return(t=(r=o).$get_constant_or_yield,t.$$p=($=function(){var t,r,o,a=$.$$s||this,i=n;return i=(t=(r=u.get("Module")).$new,t.$$p=(o=function(){var t,n,r,$=o.$$s||this;return $.$include((t=(n=u.get("Module")).$new,t.$$p=(r=function(){var t=r.$$s||this;return e.$const_set("NamedSubjectPreventSuper",t)},r.$$s=$,r),t).call(n))},o.$$s=a,o),t).call(r),e.$const_set("LetDefinitions",i),i},$.$$s=o,$),t).call(r,e,"LetDefinitions")}),e.defs(c,"$define_helpers_on",function(e){var t=this;return e.$send("include",t.$module_for(e))}),u.get("Module").$method("const_defined?").$arity()["$=="](1)?e.defs(c,"$get_constant_or_yield",i=function(t,$){var o,a=i.$$p,s=a||n;return i.$$p=null,(o=t["$const_defined?"]($))===n||o.$$is_boolean&&1!=o?(o=e.yieldX(s,[]),o===r?o:o):t.$const_get($)}):e.defs(c,"$get_constant_or_yield",s=function(t,$){var o,a=s.$$p,i=a||n,c=n;return s.$$p=null,(o=t["$const_defined?"]($,c=!1))===n||o.$$is_boolean&&1!=o?(o=e.yieldX(i,[]),o===r?o:o):t.$const_get($,c)})}(i)}(i)}(t)},Opal.modules["rspec/core/metadata"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}e.dynamic_require_severity="warning";var r=e.top,$=e.nil,o=e.breaker,a=e.slice,i=e.module,s=e.klass,c=e.hash2,u=e.gvars,l=e.hash;return e.add_stubs(["$sub","$expand_path","$==","$is_a?","$last","$pop","$[]=","$has_key?","$store_computed","$private","$===","$store","$location","$file_and_line_number","$described_class","$full_description","$build_description_from","$[]","$=~","$first_caller_from_outside_rspec","$relative_path","$to_i","$detect","$inject","$to_s","$method_description_after_module?","$include","$each","$nil?","$container_stack","$first","$reverse","$flat_map","$<<","$update","$extend","$ensure_valid_keys","$delete","$caller","$configure_for_example","$dup","$any?","$filter_applies?","$all?","$!","$filter_applies_to_any_value?","$line_number_filter_applies?","$location_filter_applies?","$filters_apply?","$arity","$call","$example_group_declaration_line","$map","$preceding_declaration_line","$world","$empty?","$&","$relevant_line_numbers","$protected","$raise","$first_non_rspec_line","$join"]),function(r){{var _=i(r,"RSpec");_.$$proto,_.$$scope}!function(r){var _=i(r,"Core"),p=(_.$$proto,_.$$scope);!function(r,$super){function _(){}var p,d=_=s(r,$super,"Metadata",_),f=d.$$proto,h=d.$$scope;return e.defs(d,"$relative_path",function(t){try{return t=t.$sub(h.get("File").$expand_path("."),"."),t=t.$sub(/\A([^:]+:\d+)$/,"\\1"),t["$=="]("-e:1")?$:t}catch(n){if(e.rescue(n,[h.get("SecurityError")]))return $;throw n}}),e.defs(d,"$build_hash_from",function(e){var t,n,r=$;for(r=function(){return(t=e.$last()["$is_a?"](h.get("Hash")))===$||t.$$is_boolean&&1!=t?c([],{}):e.$pop()}();(n=e.$last()["$is_a?"](h.get("Symbol")))!==$&&(!n.$$is_boolean||1==n);)r["$[]="](e.$pop(),!0);return r}),function(n){var r,o,s=i(n,"MetadataHash"),l=(s.$$proto,s.$$scope);e.defn(s,"$[]",r=function(t){var n,o=a.call(arguments,0),i=this,s=r.$$p;return r.$$p=null,((n=i["$has_key?"](t))===$||n.$$is_boolean&&1!=n)&&i.$store_computed(t),e.find_super_dispatcher(i,"[]",r,s).apply(i,o)}),e.defn(s,"$fetch",o=function(t,n){var r,i=a.call(arguments,0),s=this,c=o.$$p;return n=a.call(arguments,1),o.$$p=null,((r=s["$has_key?"](t))===$||r.$$is_boolean&&1!=r)&&s.$store_computed(t),e.find_super_dispatcher(s,"fetch",o,c).apply(s,i)}),s.$private(),e.defn(s,"$store_computed",function(t){var n,r=this,o=$,a=$,i=$,s=$;return function(){return o=t,"location"["$==="](o)?r.$store("location",r.$location()):"file_path"["$==="](o)||"line_number"["$==="](o)?(n=e.to_ary(r.$file_and_line_number()),a=null==n[0]?$:n[0],i=null==n[1]?$:n[1],r.$store("file_path",a),r.$store("line_number",i)):"execution_result"["$==="](o)?r.$store("execution_result",c([],{})):"describes"["$==="](o)||"described_class"["$==="](o)?(s=r.$described_class(),r.$store("described_class",s),r.$store("describes",s)):"full_description"["$==="](o)?r.$store("full_description",r.$full_description()):"description"["$==="](o)?r.$store("description",(n=r).$build_description_from.apply(n,[].concat(r["$[]"]("description_args")))):"description_args"["$==="](o)?r.$store("description_args",[]):$}()}),e.defn(s,"$location",function(){var e=this;return""+e["$[]"]("file_path")+":"+e["$[]"]("line_number")}),e.defn(s,"$file_and_line_number",function(){var e,t=this;return t.$first_caller_from_outside_rspec()["$=~"](/(.+?):(\d+)(|:\d+)/),[l.get("Metadata").$relative_path((e=u["~"])===$?$:e["$[]"](1)),((e=u["~"])===$?$:e["$[]"](2)).$to_i()]}),e.defn(s,"$first_caller_from_outside_rspec",function(){var e,t,n,r=this;return(e=(t=r["$[]"]("caller")).$detect,e.$$p=(n=function(e){{var t;n.$$s||this}return null==e&&(e=$),t=e["$=~"](/\/lib\/rspec\/core/),t===$||t===!1},n.$$s=r,n),e).call(t)}),e.defn(s,"$method_description_after_module?",function(e,t){var n;return(n=e["$is_a?"](l.get("Module")))===$||n.$$is_boolean&&1!=n?!1:t["$=~"](/^(#|::|\.)/)}),e.defn(s,"$build_description_from",function(n,r){var o,i,s,c,u=this,l=$,_=$;return r=a.call(arguments,1),null==n&&(n=""),o=e.to_ary((i=(s=r).$inject,i.$$p=(c=function(e,n){var r,o=c.$$s||this;return desc=e[0],last_part=e[1],null==n&&(n=$),n=n.$to_s(),((r=o["$method_description_after_module?"](last_part,n))===$||r.$$is_boolean&&1!=r)&&(n=t(" ",n)),[t(desc,n),n]},c.$$s=u,c),i).call(s,[n.$to_s(),n])),l=null==o[0]?$:o[0],_=null==o[1]?$:o[1],l})}(d),function(t){var n=i(t,"ExampleMetadataHash"),r=(n.$$proto,n.$$scope);n.$include(r.get("MetadataHash")),e.defn(n,"$described_class",function(){var e=this;return e["$[]"]("example_group").$described_class()}),e.defn(n,"$full_description",function(){var e,t=this;return(e=t).$build_description_from.apply(e,[t["$[]"]("example_group")["$[]"]("full_description")].concat(t["$[]"]("description_args")))})}(d),function(t){var n=i(t,"GroupMetadataHash"),r=(n.$$proto,n.$$scope);n.$include(r.get("MetadataHash")),e.defn(n,"$described_class",function(){try{var t,n,o,a,i,s=this;return(t=(n=s.$container_stack()).$each,t.$$p=(o=function(t){var n,r,a,i=o.$$s||this;return null==t&&(t=$),(n=(r=["described_class","describes"]).$each,n.$$p=(a=function(n){var r,o=(a.$$s||this,$);return null==n&&(n=$),(r=t["$has_key?"](n))===$||r.$$is_boolean&&1!=r?$:(o=t["$[]"](n),(r=o["$nil?"]())===$||r.$$is_boolean&&1!=r?void e.ret(o):$)},a.$$s=i,a),n).call(r)},o.$$s=s,o),t).call(n),(t=(a=s.$container_stack().$reverse()).$each,t.$$p=(i=function(t){var n,o,a=(i.$$s||this,$);return null==t&&(t=$),a=t["$[]"]("description_args").$first(),(n=(o=r.get("String")["$==="](a))!==!1&&o!==$?o:r.get("Symbol")["$==="](a))===$||n.$$is_boolean&&1!=n?void e.ret(a):$},i.$$s=s,i),t).call(a),$}catch(c){if(c===e.returner)return c.$v;throw c}}),e.defn(n,"$full_description",function(){var e,t,n,o,a=this;return(e=a).$build_description_from.apply(e,[].concat((t=(n=r.get("FlatMap")).$flat_map,t.$$p=(o=function(e){o.$$s||this;return null==e&&(e=$),e["$[]"]("description_args")},o.$$s=a,o),t).call(n,a.$container_stack().$reverse())))}),e.defn(n,"$container_stack",function(){var e,t,n=this,r=$,o=$;return null==n.container_stack&&(n.container_stack=$),(e=n.container_stack)!==!1&&e!==$?e:n.container_stack=function(){for(r=[o=n];(t=o["$has_key?"]("example_group"))!==$&&(!t.$$is_boolean||1==t);)r["$<<"](o["$[]"]("example_group")),o=o["$[]"]("example_group");return r}()})}(d),f.$initialize=p=function(t){var n,r=this,a=p.$$p,i=a||$;return null==t&&(t=$),p.$$p=null,t!==!1&&t!==$?(r.$update(t),r.$store("example_group",c(["example_group"],{example_group:t["$[]"]("example_group").$extend(h.get("GroupMetadataHash"))}).$extend(h.get("GroupMetadataHash")))):r.$store("example_group",c([],{}).$extend(h.get("GroupMetadataHash"))),i!==$?(n=e.yield1(i,r),n===o?n:n):$},f.$process=function(e){var t,n=this,r=$;return e=a.call(arguments,0),r=function(){return(t=e.$last()["$is_a?"](h.get("Hash")))===$||t.$$is_boolean&&1!=t?c([],{}):e.$pop()}(),n.$ensure_valid_keys(r),n["$[]"]("example_group").$store("description_args",e),n["$[]"]("example_group").$store("caller",(t=r.$delete("caller"))!==!1&&t!==$?t:n.$caller()),n.$update(r)},f.$for_example=function(e,t){var n=this;return n.$dup().$extend(h.get("ExampleMetadataHash")).$configure_for_example(e,t)},f["$any_apply?"]=function(e){var t,n,r,o=this;return(t=(n=e)["$any?"],t.$$p=(r=function(e,t){var n=r.$$s||this;return null==e&&(e=$),null==t&&(t=$),n["$filter_applies?"](e,t)},r.$$s=o,r),t).call(n)},f["$all_apply?"]=function(e){var t,n,r,o=this;return(t=(n=e)["$all?"],t.$$p=(r=function(e,t){var n=r.$$s||this;return null==e&&(e=$),null==t&&(t=$),n["$filter_applies?"](e,t)},r.$$s=o,r),t).call(n)},f["$filter_applies?"]=function(e,t,n){var r,o,a=this,i=$;return null==n&&(n=a),o=h.get("Array")["$==="](n["$[]"](e)),(r=o!==!1&&o!==$?h.get("Proc")["$==="](t)["$!"]():o)===$||r.$$is_boolean&&1!=r?e["$=="]("line_numbers")?n["$line_number_filter_applies?"](t):e["$=="]("locations")?n["$location_filter_applies?"](t):(r=h.get("Hash")["$==="](t))===$||r.$$is_boolean&&1!=r?(r=n["$has_key?"](e))===$||r.$$is_boolean&&1!=r?!1:function(){return i=t,h.get("Regexp")["$==="](i)?n["$[]"](e)["$=~"](t):h.get("Proc")["$==="](i)?function(){return i=t.$arity(),0["$==="](i)?t.$call():2["$==="](i)?t.$call(n["$[]"](e),n):t.$call(n["$[]"](e))}():n["$[]"](e).$to_s()["$=="](t.$to_s())}():n["$filters_apply?"](e,t):n["$filter_applies_to_any_value?"](e,t)},f["$filters_apply?"]=function(e,t){var n,r,o,a=this;return(n=(r=t)["$all?"],n.$$p=(o=function(t,n){var r=o.$$s||this;return null==t&&(t=$),null==n&&(n=$),r["$filter_applies?"](t,n,r["$[]"](e))},o.$$s=a,o),n).call(r)},f["$filter_applies_to_any_value?"]=function(e,t){var n,r,o,a=this;return(n=(r=a["$[]"](e))["$any?"],n.$$p=(o=function(n){var r=o.$$s||this;return null==n&&(n=$),r["$filter_applies?"](e,n,l(e,t))},o.$$s=a,o),n).call(r)},f["$location_filter_applies?"]=function(e){var t=this,n=$;return n=t.$example_group_declaration_line(e),n!==!1&&n!==$?t["$line_number_filter_applies?"](n):!0},f["$line_number_filter_applies?"]=function(e){var t,n,r,o=this,a=$;return a=(t=(n=e).$map,t.$$p=(r=function(e){r.$$s||this;return null==e&&(e=$),h.get("RSpec").$world().$preceding_declaration_line(e)},r.$$s=o,r),t).call(n),o.$relevant_line_numbers()["$&"](a)["$empty?"]()["$!"]()},d.$protected(),f.$configure_for_example=function(e,t){var n,r=this;return e!==!1&&e!==$&&r.$store("description_args",[e]),r.$store("caller",(n=t.$delete("caller"))!==!1&&n!==$?n:r.$caller()),r.$update(t)},d.$private(),e.cdecl(h,"RESERVED_KEYS",["description","example_group","execution_result","file_path","full_description","line_number","location"]),f.$ensure_valid_keys=function(e){var t,r,o,a=this;return(t=(r=h.get("RESERVED_KEYS")).$each,t.$$p=(o=function(t){var r,a=o.$$s||this;return null==t&&(t=$),(r=e["$has_key?"](t))===$||r.$$is_boolean&&1!=r?$:a.$raise("            "+n("*",50)+"\n:"+t+" is not allowed\n\nRSpec reserves some hash keys for its own internal use,\nincluding :"+t+", which is used on:\n\n            "+h.get("CallerFilter").$first_non_rspec_line()+".\n\nHere are all of RSpec's reserved hash keys:\n\n            "+h.get("RESERVED_KEYS").$join("\n  ")+"\n            "+n("*",50)+"\n")},o.$$s=a,o),t).call(r)},f.$example_group_declaration_line=function(e){var t,n=this;return(t=n["$[]"]("example_group"))===$||t.$$is_boolean&&1!=t?$:e["$[]"](h.get("File").$expand_path(n["$[]"]("example_group")["$[]"]("file_path")))},f.$relevant_line_numbers=function(e){var n,r=this;return null==e&&(e=r),t([e["$[]"]("line_number")],function(){return(n=e["$[]"]("example_group"))===$||n.$$is_boolean&&1!=n?[]:r.$relevant_line_numbers(e["$[]"]("example_group"))}())},$&&"relevant_line_numbers"}(_,p.get("Hash"))}(_)}(r)},Opal.modules["rspec/core/pending"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=e.breaker,$=e.slice,o=e.module,a=e.klass,i=e.hash2;return e.add_stubs(["$current_example","$before","$pending","$class","$is_a?","$last","$pop","$first","$[]","$has_key?","$!","$[]=","$metadata","$execution_result","$instance_eval","$verify_mocks_for_rspec","$example_group_instance","$teardown_mocks_for_rspec","$raise","$new"]),function(t){{var s=o(t,"RSpec");s.$$proto,s.$$scope}!function(t){{var s=o(t,"Core");s.$$proto,s.$$scope}!function(t){var s,c=o(t,"Pending"),u=(c.$$proto,c.$$scope);!function(e,$super){function t(){}{var r=t=a(e,$super,"PendingDeclaredInExample",t);r.$$proto,r.$$scope}return n}(c,u.get("StandardError"));try{!function(e,$super){function t(){}{var r=t=a(e,$super,"PendingExampleFixedError",t);r.$$proto,r.$$scope}return n}(c,u.get("Test").$$scope.get("Unit").$$scope.get("AssertionFailedError"))}catch(l){!function(e,$super){function t(){}{var r=t=a(e,$super,"PendingExampleFixedError",t);r.$$proto,r.$$scope}return n}(c,u.get("StandardError"))}e.cdecl(u,"NO_REASON_GIVEN","No reason given"),e.cdecl(u,"NOT_YET_IMPLEMENTED","Not yet implemented"),e.defn(c,"$pending",s=function(t){var o,a,c,l,_,p,d=this,f=s.$$p,h=f||n,m=n,g=n,v=n,b=n,y=n;if(t=$.call(arguments,0),s.$$p=null,m=u.get("RSpec").$current_example(),m===!1||m===n)return(o=(a=d.$class()).$before,o.$$p=(c=function(){var e,n=c.$$s||this;return(e=n).$pending.apply(e,[].concat(t))},c.$$s=d,c),o).call(a,"each");if(g=function(){return(o=t.$last()["$is_a?"](u.get("Hash")))===n||o.$$is_boolean&&1!=o?i([],{}):t.$pop()}(),v=(o=t.$first())!==!1&&o!==n?o:u.get("NO_REASON_GIVEN"),(o=(l=g["$[]"]("unless"))!==!1&&l!==n?l:(_=g["$has_key?"]("if"),_!==!1&&_!==n?g["$[]"]("if")["$!"]():_))!==n&&(!o.$$is_boolean||1==o))return function(){return h!==n?(o=e.yieldX(h,[]),o===r?o:o):n}();if(m.$metadata()["$[]="]("pending",!0),m.$metadata()["$[]"]("execution_result")["$[]="]("pending_message",v),m.$execution_result()["$[]="]("pending_fixed",!1),h!==n){try{try{b=function(){return e.yieldX(h,[])===r?r.$v:(o=(l=m.$example_group_instance()).$instance_eval,o.$$p=(p=function(){var e=p.$$s||this;return e.$verify_mocks_for_rspec()},p.$$s=d,p),o).call(l)}(),m.$metadata()["$[]="]("pending",!1)}catch(x){if(!e.rescue(x,[u.get("Exception")]))throw x;y=x,m.$execution_result()["$[]="]("exception",y)}}finally{d.$teardown_mocks_for_rspec()}b!==!1&&b!==n&&(m.$execution_result()["$[]="]("pending_fixed",!0),d.$raise(u.get("PendingExampleFixedError").$new()))}return d.$raise(u.get("PendingDeclaredInExample").$new(v))})}(s)}(s)}(t)},Opal.modules["rspec/core/formatters"]=function(e){e.dynamic_require_severity="warning";var t=(e.top,e),n=(e.nil,e.breaker,e.slice,e.module);return function(e){{var t=n(e,"Formatters");t.$$proto,t.$$scope}}(t.get("RSpec").$$scope.get("Core"))},Opal.modules["rspec/core/backport_random"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)
}function n(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}function $(e,t){return"number"==typeof e&&"number"==typeof t?e>=t:e["$>="](t)}function o(e,t){return"number"==typeof e&&"number"==typeof t?e/t:e["$/"](t)}function a(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function s(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}function c(e,t){return"number"==typeof e&&"number"==typeof t?t>=e:e["$<="](t)}e.dynamic_require_severity="warning";var u=e.top,l=e.nil,_=e.breaker,p=(e.slice,e.module),d=e.klass,f=e.range;return e.add_stubs(["$kind_of?","$__send__","$raise","$inspect","$message","$class","$coerce_to","$new","$seed=","$times","$|","$&","$[]","$[]=","$^","$>>","$odd?","$===","$each","$size","$max","$next_state","$<<","$random_32_bits","$mask_32_bits","$map","$pack","$each_with_index","$state_as_bignum","$left","$abs","$==","$pop","$first","$convert_seed","$private","$attr_reader","$seed_rand","$coerce_to_int","$nonzero?","$new_seed","$random_float","$_rand_range","$random_integer","$random_bytes","$is_a?","$seed","$send","$state","$marshal_dump","$allocate","$marshal_load","$end","$begin","$!","$respond_to?","$exclude_end?","$loop","$**","$rand","$include"]),function(u){{var h=p(u,"RSpec");h.$$proto,h.$$scope}!function(u){{var h=p(u,"Core");h.$$proto,h.$$scope}!function(u){var h=p(u,"Backports"),m=(h.$$proto,h.$$scope);e.defs(h,"$coerce_to",function(t,n,r){var $,o=this,a=l,i=l;if(($=t["$kind_of?"](n))!==l&&(!$.$$is_boolean||1==$))return t;try{a=t.$__send__(r)}catch(s){if(!e.rescue(s,[m.get("Exception")]))throw s;i=s,o.$raise(m.get("TypeError"),"Coercion error: "+t.$inspect()+"."+r+" => "+n+" failed:\n"+("("+i.$message()+")"))}return(($=a["$kind_of?"](n))===l||$.$$is_boolean&&1!=$)&&o.$raise(m.get("TypeError"),"Coercion error: obj."+r+" did NOT return a "+n+" (was "+a.$class()+")"),a}),e.defs(h,"$coerce_to_int",function(e){var t=this;return t.$coerce_to(e,m.get("Integer"),"to_int")}),e.cdecl(m,"Undefined",m.get("Object").$new()),function(u,$super){function h(){}var m=h=d(u,$super,"Random",h),g=(m.$$proto,m.$$scope);return function(c,$super){function u(){}var _=u=d(c,$super,"MT19937",u),p=_.$$proto,h=_.$$scope;return p.state=p.last_read=l,e.cdecl(h,"STATE_SIZE",624),e.cdecl(h,"LAST_STATE",t(h.get("STATE_SIZE"),1)),e.cdecl(h,"PAD_32_BITS",4294967295),p.$initialize=function(e){var t,n,r=this;return t=[e],n=r,n["$seed="].apply(n,t),t[t.length-1]},e.cdecl(h,"LAST_31_BITS",2147483647),e.cdecl(h,"OFFSET",397),p.$next_state=function(){var e,r,$,o=this;return(e=(r=h.get("STATE_SIZE")).$times,e.$$p=($=function(e){var r,o,a=$.$$s||this,i=l;return null==a.state&&(a.state=l),null==e&&(e=l),i=a.state["$[]"](e)["$&"](2147483648)["$|"](a.state["$[]"](t(n(e,1),h.get("STATE_SIZE")))["$&"](2147483647)),a.state["$[]="](e,a.state["$[]"](t(n(e,h.get("OFFSET")),h.get("STATE_SIZE")))["$^"](i["$>>"](1))),(r=i["$odd?"]())===l||r.$$is_boolean&&1!=r?l:(r=e,o=a.state,o["$[]="](r,o["$[]"](r)["$^"](2567483615)))},$.$$s=o,$),e).call(r),o.last_read=-1},p["$seed="]=function(e){var o,a,s,c,u,_,p,d=this,m=l,g=l;return function(){return m=e,h.get("Integer")["$==="](m)?(d.state=h.get("Array").$new(h.get("STATE_SIZE")),d.state["$[]="](0,e["$&"](h.get("PAD_32_BITS"))),(o=(a=f(1,h.get("LAST_STATE"),!1)).$each,o.$$p=(s=function(e){var $=s.$$s||this;return null==$.state&&($.state=l),null==e&&(e=l),$.state["$[]="](e,n(r(1812433253,$.state["$[]"](t(e,1))["$^"]($.state["$[]"](t(e,1))["$>>"](30))),e)["$&"](h.get("PAD_32_BITS")))},s.$$s=d,s),o).call(a),d.last_read=h.get("LAST_STATE")):h.get("Array")["$==="](m)?(o=[19650218],c=d,c["$seed="].apply(c,o),o[o.length-1],i=1,g=0,(o=(c=[h.get("STATE_SIZE"),e.$size()].$max()).$times,o.$$p=(u=function(){var o=u.$$s||this;return null==o.state&&(o.state=l),o.state["$[]="](i,n(n(o.state["$[]"](i)["$^"](r(o.state["$[]"](t(i,1))["$^"](o.state["$[]"](t(i,1))["$>>"](30)),1664525)),g),e["$[]"](g))["$&"](h.get("PAD_32_BITS"))),$(i=n(i,1),h.get("STATE_SIZE"))&&(o.state["$[]="](0,o.state["$[]"](-1)),i=1),$(g=n(g,1),e.$size())?g=0:l},u.$$s=d,u),o).call(c),(o=(_=t(h.get("STATE_SIZE"),1)).$times,o.$$p=(p=function(){var e=p.$$s||this;return null==e.state&&(e.state=l),e.state["$[]="](i,t(e.state["$[]"](i)["$^"](r(e.state["$[]"](t(i,1))["$^"](e.state["$[]"](t(i,1))["$>>"](30)),1566083941)),i)["$&"](h.get("PAD_32_BITS"))),$(i=n(i,1),h.get("STATE_SIZE"))?(e.state["$[]="](0,e.state["$[]"](-1)),i=1):l},p.$$s=d,p),o).call(_),d.state["$[]="](0,2147483648)):d.$raise(h.get("ArgumentError"),"Seed must be an Integer or an Array")}()},p.$random_32_bits=function(){var e=this,t=l;return $(e.last_read,h.get("LAST_STATE"))&&e.$next_state(),e.last_read=n(e.last_read,1),t=e.state["$[]"](e.last_read),t=t["$^"](t["$>>"](11)),t=t["$^"](t["$<<"](7)["$&"](2636928640)),t=t["$^"](t["$<<"](15)["$&"](4022730752)),t=t["$^"](t["$>>"](18))},e.cdecl(h,"FLOAT_FACTOR",o(1,9007199254740992)),p.$random_float=function(){var e=this;return r(n(r(e.$random_32_bits()["$>>"](5),67108864),e.$random_32_bits()["$>>"](6)),h.get("FLOAT_FACTOR"))},p.$random_integer=function(e){var r,$,o,i=this,c=l,u=l,_=l,p=l;for(c=t(e,1),u=0;a(c,h.get("PAD_32_BITS"));)c=c["$>>"](32),u=n(u,1);for(_=i.$mask_32_bits(c);!s(p,e);)p=i.$random_32_bits()["$&"](_),(r=($=u).$times,r.$$p=(o=function(){var e=o.$$s||this;return p=p["$<<"](32),p=p["$|"](e.$random_32_bits())},o.$$s=i,o),r).call($);return p},p.$random_bytes=function(e){var t,$,a,i=this,s=l,c=l;return s=o(n(e,3),4),c=(t=($=s.$times()).$map,t.$$p=(a=function(){var e=a.$$s||this;return e.$random_32_bits()},a.$$s=i,a),t).call($),c.$pack(r("L",s))["$[]"](0,e)},p.$state_as_bignum=function(){var e,t,n,$=this,o=l;return o=0,(e=(t=$.state).$each_with_index,e.$$p=(n=function(e,t){n.$$s||this;return null==e&&(e=l),null==t&&(t=l),o=o["$|"](e["$<<"](r(32,t)))},n.$$s=$,n),e).call(t),o},p.$left=function(){var e=this;return t(h.get("MT19937").$$scope.get("STATE_SIZE"),e.last_read)},p.$marshal_dump=function(){var e=this;return[e.$state_as_bignum(),e.$left()]},p.$marshal_load=function(n){var r,$,o,a=this,i=l,s=l;return r=e.to_ary(n),i=null==r[0]?l:r[0],s=null==r[1]?l:r[1],a.last_read=t(h.get("MT19937").$$scope.get("STATE_SIZE"),s),a.state=h.get("Array").$new(h.get("STATE_SIZE")),(r=($=h.get("STATE_SIZE")).$times,r.$$p=(o=function(e){var t=o.$$s||this;return null==t.state&&(t.state=l),null==e&&(e=l),t.state["$[]="](e,i["$&"](h.get("PAD_32_BITS"))),i=i["$>>"](32)},o.$$s=a,o),r).call($)},e.defs(_,"$convert_seed",function(e){var t,n,r=l;for(e=e.$abs(),r=[];!e["$=="](0);)r["$<<"](e["$&"](h.get("PAD_32_BITS"))),e=e["$>>"](32);return(t=(n=r["$[]"](-1)["$=="](1))?a(r.$size(),1):n)===l||t.$$is_boolean&&1!=t||r.$pop(),a(r.$size(),1)?r:r.$first()}),e.defs(_,"$[]",function(e){var t=this;return t.$new(t.$convert_seed(e))}),_.$private(),e.cdecl(h,"MASK_BY",[1,2,4,8,16]),p.$mask_32_bits=function(e){var t,n,r,$=this;return(t=(n=h.get("MASK_BY")).$each,t.$$p=(r=function(t){r.$$s||this;return null==t&&(t=l),e=e["$|"](e["$>>"](t))},r.$$s=$,r),t).call(n),e},l&&"mask_32_bits"}(m,null),function($){var o,i=p($,"Implementation"),u=(i.$$proto,i.$$scope);i.$attr_reader("seed"),e.defn(i,"$initialize",o=function(t){{var n=this;o.$$p}return null==t&&(t=0),o.$$p=null,e.find_super_dispatcher(n,"initialize",o,null).apply(n,[]),n.$seed_rand(t)}),e.defn(i,"$seed_rand",function(e){var t,n,r=this,$=l;return null==r.seed&&(r.seed=l),null==e&&(e=0),e=u.get("Backports").$coerce_to_int(e),n=r.seed,((t=null!=n&&n!==l?"instance-variable":l)===l||t.$$is_boolean&&1!=t)&&(r.seed=l),t=[r.seed,(n=e["$nonzero?"]())!==!1&&n!==l?n:u.get("Random").$new_seed()],$=t[0],r.seed=t[1],r.mt=u.get("MT19937")["$[]"](r.seed),$}),e.defn(i,"$rand",function(e){var t,n=this,$=l;return null==n.mt&&(n.mt=l),null==e&&(e=u.get("Backports").$$scope.get("Undefined")),(t=function(){return $=e,u.get("Backports").$$scope.get("Undefined")["$==="]($)?n.mt.$random_float():u.get("Float")["$==="]($)?c(e,0)?l:r(e,n.mt.$random_float()):u.get("Range")["$==="]($)?n.$_rand_range(e):(e=u.get("Backports").$coerce_to_int(e),c(e,0)?l:n.mt.$random_integer(e))}())!==!1&&t!==l?t:n.$raise(u.get("ArgumentError"),"invalid argument "+e)}),e.defn(i,"$bytes",function(e){var t=this;return null==t.mt&&(t.mt=l),e=u.get("Backports").$coerce_to_int(e),s(e,0)&&t.$raise(u.get("ArgumentError"),"negative size"),t.mt.$random_bytes(e)}),e.defn(i,"$==",function(e){var t,n,r,$=this;return r=e["$is_a?"](u.get("Random")),n=r!==!1&&r!==l?$.$seed()["$=="](e.$seed()):r,t=n!==!1&&n!==l?$.$left()["$=="](e.$send("left")):n,t!==!1&&t!==l?$.$state()["$=="](e.$send("state")):t}),e.defn(i,"$marshal_dump",function(){var e=this;return null==e.mt&&(e.mt=l),null==e.seed&&(e.seed=l),e.mt.$marshal_dump()["$<<"](e.seed)}),e.defn(i,"$marshal_load",function(e){var t=this;return null==t.mt&&(t.mt=l),t.seed=e.$pop(),t.mt=u.get("MT19937").$allocate(),t.mt.$marshal_load(e)}),i.$private(),e.defn(i,"$state",function(){var e=this;return null==e.mt&&(e.mt=l),e.mt.$state_as_bignum()}),e.defn(i,"$left",function(){var e=this;return null==e.mt&&(e.mt=l),e.mt.$left()}),e.defn(i,"$_rand_range",function(e){var $,o,i,p,d=this,f=l;return null==d.mt&&(d.mt=l),f=t(e.$end(),e.$begin()),i=f["$is_a?"](u.get("Float"))["$!"](),o=i!==!1&&i!==l?f["$respond_to?"]("to_int"):i,($=o!==!1&&o!==l?f=u.get("Backports").$coerce_to_int(f):o)===l||$.$$is_boolean&&1!=$?($=f=u.get("Backports").$coerce_to(f,u.get("Float"),"to_f"))===l||$.$$is_boolean&&1!=$?l:s(f,0)?l:($=e["$exclude_end?"]())===l||$.$$is_boolean&&1!=$?($=(o=d).$loop,$.$$p=(p=function(){var t=p.$$s||this,$=l;return null==t.mt&&(t.mt=l),$=r(r(t.mt.$random_float(),f),1.0001),a($,f)?l:(_.$v=n(e.$begin(),$),_)},p.$$s=d,p),$).call(o):c(f,0)?l:n(e.$begin(),r(d.mt.$random_float(),f)):((($=e["$exclude_end?"]())===l||$.$$is_boolean&&1!=$)&&(f=n(f,1)),c(f,0)?l:n(e.$begin(),d.mt.$random_integer(f)))})}(m),e.defs(m,"$new_seed",function(){return n(2["$**"](62),g.get("Kernel").$rand(2["$**"](62)))}),l&&"new_seed"}(h,null),function(e,$super){function t(){}var n=t=d(e,$super,"Random",t),r=(n.$$proto,n.$$scope);return n.$include(r.get("Implementation")),function(e){{var t=e.$$scope;e.$$proto}return e.$include(t.get("Implementation"))}(n.$singleton_class())}(h,null)}(h)}(h)}(u)},Opal.modules["rspec/core/ordering"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.dynamic_require_severity="warning";var $=e.top,o=e.nil,a=e.breaker,i=(e.slice,e.module),s=e.klass,c=e.hash2;return e.add_stubs(["$require","$new","$seed","$shuffle","$dup","$times","$rand","$size","$==","$[]","$[]=","$call","$register","$fetch","$to_proc","$used?","$attr_reader","$used_random_seed?","$ordering_registry","$register_ordering","$to_i","$split","$to_s","$include?","$has_key?","$seed=","$order="]),function($){{var u=i($,"RSpec");u.$$proto,u.$$scope}!function($){var u,l=i($,"Core"),_=(l.$$proto,l.$$scope);(u=null==e.Object.$$scope.Random?o:"constant")===o||u.$$is_boolean&&1!=u?(l.$require("rspec/core/backport_random"),e.cdecl(_,"RandomNumberGenerator",_.get("RSpec").$$scope.get("Core").$$scope.get("Backports").$$scope.get("Random"))):e.cdecl(_,"RandomNumberGenerator",e.get("Random")),function($){{var u=i($,"Ordering");u.$$proto,u.$$scope}!function(e,$super){function t(){}{var n=t=s(e,$super,"Identity",t),r=n.$$proto;n.$$scope}return r.$order=function(e){return e},o&&"order"}(u,null),function(e,$super){function $(){}var a=$=s(e,$super,"Random",$),i=a.$$proto,u=a.$$scope;return i.used=i.configuration=o,i.$initialize=function(e){var t=this;return t.configuration=e,t.used=!1},i["$used?"]=function(){var e=this;return e.used},i.$order=function(e){var t=this,n=o;return t.used=!0,n=u.get("RandomNumberGenerator").$new(t.configuration.$seed()),t.$shuffle(e,n)},t(u.get("RUBY_VERSION"),"1.9.3")?(i.$shuffle=function(e,t){return e.$shuffle(c(["random"],{random:t}))},o&&"shuffle"):(i.$shuffle=function(e,t){var $,a,i,s=this,c=o;return c=e.$dup(),($=(a=c.$size()).$times,$.$$p=(i=function(e){var $,a=(i.$$s||this,o);return null==e&&(e=o),a=n(e,t.$rand(r(c.$size(),e))),e["$=="](a)?o:($=[c["$[]"](a),c["$[]"](e)],c["$[]="](e,$[0]),c["$[]="](a,$[1]))},i.$$s=s,i),$).call(a),c},o&&"shuffle")}(u,null),function(e,$super){function t(){}{var n=t=s(e,$super,"Custom",t),r=n.$$proto;n.$$scope}return r.callable=o,r.$initialize=function(e){var t=this;return t.callable=e},r.$order=function(e){var t=this;return t.callable.$call(e)},o&&"order"}(u,null),function(e,$super){function t(){}var n,r=t=s(e,$super,"Registry",t),$=r.$$proto,a=r.$$scope;return $.strategies=o,$.$initialize=function(e){var t=this,n=o;return t.configuration=e,t.strategies=c([],{}),t.$register("random",a.get("Random").$new(e)),n=a.get("Identity").$new(),t.$register("defined",n),t.$register("global",n)},$.$fetch=n=function(e){var t,r,$=this,a=n.$$p,i=a||o;return n.$$p=null,(t=(r=$.strategies).$fetch,t.$$p=i.$to_proc(),t).call(r,e)},$.$register=function(e,t){var n=this;return n.strategies["$[]="](e,t)},$["$used_random_seed?"]=function(){var e=this;return e.strategies["$[]"]("random")["$used?"]()},o&&"used_random_seed?"}(u,null),function(t,$super){function n(){}var r,$=n=s(t,$super,"ConfigurationManager",n),i=$.$$proto,c=$.$$scope;return i.seed_forced=i.order_forced=o,$.$attr_reader("seed","ordering_registry"),i.$initialize=function(){var e=this;return e.ordering_registry=c.get("Registry").$new(e),e.seed=e.$rand(65535),e.seed_forced=!1,e.order_forced=!1},i["$seed_used?"]=function(){var e=this;return e.$ordering_registry()["$used_random_seed?"]()},i["$seed="]=function(e){var t,n=this;return(t=n.seed_forced)===o||t.$$is_boolean&&1!=t?(n.$register_ordering("global",n.$ordering_registry().$fetch("random")),n.seed=e.$to_i()):o},i["$order="]=function(t){var n,r=this,$=o,a=o,i=o;return n=e.to_ary(t.$to_s().$split(":")),$=null==n[0]?o:n[0],a=null==n[1]?o:n[1],a!==!1&&a!==o&&(r.seed=a=a.$to_i()),i=function(){return(n=$["$include?"]("rand"))===o||n.$$is_boolean&&1!=n?$["$=="]("defined")?"defined":o:"random"}(),i!==!1&&i!==o?r.$register_ordering("global",r.$ordering_registry().$fetch(i)):o},i.$force=function(e){var t,n,r=this;return(t=e["$has_key?"]("seed"))===o||t.$$is_boolean&&1!=t?(t=e["$has_key?"]("order"))===o||t.$$is_boolean&&1!=t?o:(t=[e["$[]"]("order")],n=r,n["$order="].apply(n,t),t[t.length-1],r.order_forced=!0):(t=[e["$[]"]("seed")],n=r,n["$seed="].apply(n,t),t[t.length-1],r.seed_forced=!0,r.order_forced=!0)},i.$register_ordering=r=function(t,n){var $,i,s,u=this,l=r.$$p,_=l||o;return null==n&&(n=c.get("Custom").$new(($=(i=c.get("Proc")).$new,$.$$p=(s=function(t){{var n;s.$$s||this}return null==t&&(t=o),n=e.yield1(_,t),n===a?n:n},s.$$s=u,s),$).call(i))),r.$$p=null,i=u.order_forced,($=i!==!1&&i!==o?t["$=="]("global"):i)===o||$.$$is_boolean&&1!=$?u.$ordering_registry().$register(t,n):o},o&&"register_ordering"}(u,null)}(l)}(u)}($)},Opal.modules["rspec/core/world"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?t>=e:e["$<="](t)}e.dynamic_require_severity="warning";var r=e.top,$=e.nil,o=(e.breaker,e.slice,e.module),a=e.klass;return e.add_stubs(["$include","$attr_reader","$attr_accessor","$new","$[]=","$dup","$examples","$prune","$filter_manager","$uniq!","$configuration","$fetch","$ordering_registry","$order","$clear","$example_groups","$registry","$<<","$inclusion_filter","$exclusion_filter","$configure_group","$inject","$size","$filtered_examples","$flat_map","$descendants","$sort","$declaration_line_numbers","$reporter","$announce_inclusion_filter","$announce_exclusion_filter","$empty?","$==","$length","$message","$[]","$join","$run_all_when_everything_filtered?","$zero?","$example_count","$everything_filtered_message","$description","$empty_without_conditional_filters?","$private"]),function(e){{var r=o(e,"RSpec");r.$$proto,r.$$scope}!function(e){{var r=o(e,"Core");r.$$proto,r.$$scope}!function(e,$super){function r(){}var o=r=a(e,$super,"World",r),i=o.$$proto,s=o.$$scope;return i.configuration=i.example_groups=i.line_numbers=$,o.$include(s.get("RSpec").$$scope.get("Core").$$scope.get("Hooks")),o.$attr_reader("example_groups","filtered_examples"),o.$attr_accessor("wants_to_quit"),i.$initialize=function(e){var t,n,r,o=this;return null==e&&(e=s.get("RSpec").$configuration()),o.configuration=e,o.example_groups=[],o.filtered_examples=(t=(n=s.get("Hash")).$new,t.$$p=(r=function(e,t){var n=r.$$s||this,o=$;return null==e&&(e=$),null==t&&(t=$),e["$[]="](t,function(){return o=t.$examples().$dup(),o=n.$filter_manager().$prune(o),o["$uniq!"](),o}())},r.$$s=o,r),t).call(n)},i.$ordered_example_groups=function(){var e=this,t=$;return t=e.configuration.$ordering_registry().$fetch("global"),t.$order(e.example_groups)},i.$reset=function(){var e=this;return e.$example_groups().$clear(),s.get("SharedExampleGroup").$registry().$clear()},i.$filter_manager=function(){var e=this;return e.configuration.$filter_manager()},i.$register=function(e){var t=this;return t.$example_groups()["$<<"](e),e},i.$inclusion_filter=function(){var e=this;return e.configuration.$inclusion_filter()},i.$exclusion_filter=function(){var e=this;return e.configuration.$exclusion_filter()},i.$configure_group=function(e){var t=this;return t.configuration.$configure_group(e)},i.$example_count=function(){var e,n,r,o,a,i,c=this;return(e=(n=(o=(a=s.get("FlatMap")).$flat_map,o.$$p=(i=function(e){i.$$s||this;return null==e&&(e=$),e.$descendants()},i.$$s=c,i),o).call(a,c.$example_groups())).$inject,e.$$p=(r=function(e,n){r.$$s||this;return null==e&&(e=$),null==n&&(n=$),t(e,n.$filtered_examples().$size())},r.$$s=c,r),e).call(n,0)},i.$preceding_declaration_line=function(e){var t,r,o,a=this;return(t=(r=a.$declaration_line_numbers().$sort()).$inject,t.$$p=(o=function(t,r){o.$$s||this;return null==t&&(t=$),null==r&&(r=$),n(r,e)?r:t},o.$$s=a,o),t).call(r,$)},i.$reporter=function(){var e=this;return e.configuration.$reporter()},i.$announce_filters=function(){var e,t,n=this,r=$,o=$;return r=[],n.$announce_inclusion_filter(r),n.$announce_exclusion_filter(r),((e=n.$filter_manager()["$empty?"]())===$||e.$$is_boolean&&1!=e)&&n.$reporter().$message(r.$length()["$=="](1)?"Run options: "+r["$[]"](0):"Run options:\n  "+r.$join("\n  ")),t=n.configuration["$run_all_when_everything_filtered?"](),(e=t!==!1&&t!==$?n.$example_count()["$zero?"]():t)===$||e.$$is_boolean&&1!=e||(n.$reporter().$message(""+n.$everything_filtered_message()+"; ignoring "+n.$inclusion_filter().$description()),n.$filtered_examples().$clear(),n.$inclusion_filter().$clear()),(e=n.$example_count()["$zero?"]())===$||e.$$is_boolean&&1!=e?$:(n.$example_groups().$clear(),(e=n.$filter_manager()["$empty?"]())===$||e.$$is_boolean&&1!=e?(e=n.$exclusion_filter()["$empty_without_conditional_filters?"]())===$||e.$$is_boolean&&1!=e?(e=n.$inclusion_filter()["$empty?"]())===$||e.$$is_boolean&&1!=e?$:n.$reporter().$message(n.$everything_filtered_message()):(o=n.$everything_filtered_message(),(e=n.configuration["$run_all_when_everything_filtered?"]())===$||e.$$is_boolean&&1!=e||o["$<<"]("; ignoring "+n.$inclusion_filter().$description()),n.$reporter().$message(o)):n.$reporter().$message("No examples found."))},i.$everything_filtered_message=function(){return"\nAll examples were filtered out"},i.$announce_inclusion_filter=function(e){var t,n=this;return(t=n.$inclusion_filter()["$empty?"]())===$||t.$$is_boolean&&1!=t?e["$<<"]("include "+n.$inclusion_filter().$description()):$},i.$announce_exclusion_filter=function(e){var t,n=this;return(t=n.$exclusion_filter()["$empty_without_conditional_filters?"]())===$||t.$$is_boolean&&1!=t?e["$<<"]("exclude "+n.$exclusion_filter().$description()):$},o.$private(),i.$declaration_line_numbers=function(){var e,n,r,o,a=this;return(e=a.line_numbers)!==!1&&e!==$?e:a.line_numbers=(n=(r=a.$example_groups()).$inject,n.$$p=(o=function(e,n){o.$$s||this;return null==e&&(e=$),null==n&&(n=$),t(e,n.$declaration_line_numbers())},o.$$s=a,o),n).call(r,[])},$&&"declaration_line_numbers"}(r,null)}(r)}(r)},Opal.modules["rspec/core/backtrace_formatter"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass,o=e.hash2;return e.add_stubs(["$format_backtrace","$backtrace_formatter","$configuration","$attr_accessor","$<<","$union","$map","$new","$gsub","$getwd","$empty?","$[]","$tap","$concat","$compact","$backtrace_line","$take_while","$!","$==","$exclude?","$relative_path","$any?","$=~","$none?"]),function(t){{var a=r(t,"RSpec");a.$$proto,a.$$scope}!function(t){{var a=r(t,"Core");a.$$proto,a.$$scope}!function(t,$super){function r(){}var a=r=$(t,$super,"BacktraceFormatter",r),i=a.$$proto,s=a.$$scope;return i.full_backtrace=i.exclusion_patterns=i.inclusion_patterns=n,e.defs(a,"$format_backtrace",function(e,t){return null==t&&(t=o([],{})),s.get("RSpec").$configuration().$backtrace_formatter().$format_backtrace(e,t)}),a.$attr_accessor("exclusion_patterns","inclusion_patterns"),i.$initialize=function(){var e,t,r,$,o=this;return o.full_backtrace=!1,o.exclusion_patterns=[]["$<<"]((e=s.get("Regexp")).$union.apply(e,[].concat((t=(r=["/libd*/ruby/","org/jruby/","bin/","/gems/","lib/rspec/(core|expectations|matchers|mocks)"]).$map,t.$$p=($=function(e){$.$$s||this;return null==e&&(e=n),s.get("Regexp").$new(e.$gsub("/",s.get("File").$$scope.get("SEPARATOR")))},$.$$s=o,$),t).call(r)))),o.inclusion_patterns=[s.get("Regexp").$new(s.get("Dir").$getwd())]},i["$full_backtrace="]=function(e){var t=this;return t.full_backtrace=e},i["$full_backtrace?"]=function(){var e,t=this;return(e=t.full_backtrace)!==!1&&e!==n?e:t.exclusion_patterns["$empty?"]()},i.$format_backtrace=function(e,t){var r,$,a,i,c,u,l,_,p,d=this;return null==t&&(t=o([],{})),(r=t["$[]"]("full_backtrace"))===n||r.$$is_boolean&&1!=r?(r=($=(i=(c=(l=(_=e).$take_while,l.$$p=(p=function(e){p.$$s||this;return null==e&&(e=n),e["$=="](s.get("RSpec").$$scope.get("Core").$$scope.get("Runner").$$scope.get("AT_EXIT_HOOK_BACKTRACE_LINE"))["$!"]()},p.$$s=d,p),l).call(_)).$map,i.$$p=(u=function(e){var t=u.$$s||this;return null==e&&(e=n),t.$backtrace_line(e)},u.$$s=d,u),i).call(c).$compact()).$tap,r.$$p=(a=function(t){{var r;a.$$s||this}return null==t&&(t=n),(r=t["$empty?"]())===n||r.$$is_boolean&&1!=r?n:(t.$concat(e),t["$<<"](""),t["$<<"]("  Showing full backtrace because every line was filtered out."),t["$<<"]("  See docs for RSpec::Configuration#backtrace_exclusion_patterns and"),t["$<<"]("  RSpec::Configuration#backtrace_inclusion_patterns for more information."))},a.$$s=d,a),r).call($):e},i.$backtrace_line=function(t){var r,$=this;try{return(r=$["$exclude?"](t))===n||r.$$is_boolean&&1!=r?s.get("RSpec").$$scope.get("Core").$$scope.get("Metadata").$relative_path(t):n}catch(o){if(e.rescue(o,[s.get("SecurityError")]))return n;throw o}},i["$exclude?"]=function(e){var t,r,$,o,a,i,s=this;return(t=s.full_backtrace)===n||t.$$is_boolean&&1!=t?(t=(r=($=s.exclusion_patterns)["$any?"],r.$$p=(o=function(t){o.$$s||this;return null==t&&(t=n),t["$=~"](e)},o.$$s=s,o),r).call($),t!==!1&&t!==n?(r=(a=s.inclusion_patterns)["$none?"],r.$$p=(i=function(t){i.$$s||this;return null==t&&(t=n),t["$=~"](e)},i.$$s=s,i),r).call(a):t):!1},n&&"exclude?"}(a,null)}(a)}(t)},Opal.modules["rspec/core/ruby_project"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=e.breaker,$=e.slice,o=e.module,a=e.gvars;return e.add_stubs(["$require","$map","$add_dir_to_load_path","$join","$root","$include?","$unshift","$determine_root","$find_first_parent_containing","$ascend_until","$exists?","$ascend","$Pathname","$expand_path","$module_function"]),t.$require("pathname"),function(t){{var i=o(t,"RSpec");i.$$proto,i.$$scope}!function(t){{var i=o(t,"Core");i.$$proto,i.$$scope}!function(t){var i,s=o(t,"RubyProject"),c=(s.$$proto,s.$$scope);e.defn(s,"$add_to_load_path",function(e){var t,r,o,a=this;return e=$.call(arguments,0),(t=(r=e).$map,t.$$p=(o=function(e){var t=o.$$s||this;return null==e&&(e=n),t.$add_dir_to_load_path(c.get("File").$join(t.$root(),e))},o.$$s=a,o),t).call(r)}),e.defn(s,"$add_dir_to_load_path",function(e){var t;return null==a.LOAD_PATH&&(a.LOAD_PATH=n),(t=a.LOAD_PATH["$include?"](e))===n||t.$$is_boolean&&1!=t?a.LOAD_PATH.$unshift(e):n}),e.defn(s,"$root",function(){var e,t=this;return null==t.project_root&&(t.project_root=n),(e=t.project_root)!==!1&&e!==n?e:t.project_root=t.$determine_root()}),e.defn(s,"$determine_root",function(){var e,t=this;return(e=t.$find_first_parent_containing("spec"))!==!1&&e!==n?e:"."}),e.defn(s,"$find_first_parent_containing",function(e){var t,r,$,o=this;return(t=(r=o).$ascend_until,t.$$p=($=function(t){$.$$s||this;return null==t&&(t=n),c.get("File")["$exists?"](c.get("File").$join(t,e))},$.$$s=o,$),t).call(r)}),e.defn(s,"$ascend_until",i=function(){try{var t,$,o,a=this,s=i.$$p,u=s||n;return i.$$p=null,(t=($=a.$Pathname(c.get("File").$expand_path("."))).$ascend,t.$$p=(o=function(t){{var $,a;o.$$s||this}return null==t&&(t=n),($=(a=e.yield1(u,t))===r?r.$v:a)===n||$.$$is_boolean&&1!=$?n:void e.ret(t)},o.$$s=a,o),t).call($)}catch(l){if(l===e.returner)return l.$v;throw l}}),s.$module_function("add_to_load_path"),s.$module_function("add_dir_to_load_path"),s.$module_function("root"),s.$module_function("determine_root"),s.$module_function("find_first_parent_containing"),s.$module_function("ascend_until")}(i)}(i)}(t)},Opal.modules["rspec/core/formatters/helpers"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e/t:e["$/"](t)}function $(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function o(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}e.dynamic_require_severity="warning";var a=e.top,i=e.nil,s=(e.breaker,e.slice,e.module);return e.add_stubs(["$to_i","$pluralize","$format_seconds","$sprintf","$strip_trailing_zeroes","$sub","$empty?","$==","$to_f"]),function(a){{var c=s(a,"RSpec");c.$$proto,c.$$scope}!function(a){{var c=s(a,"Core");c.$$proto,c.$$scope}!function(a){{var c=s(a,"Formatters");c.$$proto,c.$$scope}!function(a){var c=s(a,"Helpers"),u=(c.$$proto,c.$$scope);e.cdecl(u,"SUB_SECOND_PRECISION",5),e.cdecl(u,"DEFAULT_PRECISION",2),e.defn(c,"$format_duration",function(e){var a=this,s=i,c=i,l=i;return s=function(){return t(e,1)?u.get("SUB_SECOND_PRECISION"):t(e,120)?u.get("DEFAULT_PRECISION"):t(e,300)?1:0}(),n(e,60)?(c=r(e.$to_i(),60).$to_i(),l=$(e,o(c,60)),""+a.$pluralize(c,"minute")+" "+a.$pluralize(a.$format_seconds(l,s),"second")):a.$pluralize(a.$format_seconds(e,s),"second")}),e.defn(c,"$format_seconds",function(e,n){var r,$,o=this,a=i;return null==n&&(n=i),(r=n)!==!1&&r!==i?r:n=function(){return u.get(($=t(e,1))===i||$.$$is_boolean&&1!=$?"DEFAULT_PRECISION":"SUB_SECOND_PRECISION")}(),a=o.$sprintf("%."+n+"f",e),o.$strip_trailing_zeroes(a)}),e.defn(c,"$strip_trailing_zeroes",function(e){var t,n=i;return n=e.$sub(/[^1-9]+$/,""),(t=n["$empty?"]())===i||t.$$is_boolean&&1!=t?n:"0"}),e.defn(c,"$pluralize",function(e,t){return""+e+" "+t+function(){return e.$to_f()["$=="](1)?i:"s"}()})}(c)}(c)}(c)}(a)},Opal.modules["rspec/core/formatters/deprecation_formatter"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}e.dynamic_require_severity="warning";var $=e.top,o=e.nil,a=(e.breaker,e.slice,e.module),i=e.klass;return e.add_stubs(["$require","$attr_reader","$new","$deprecation_stream","$===","$summary_stream","$include?","$print_deprecation_message","$printer","$<<","$deprecation_summary","$[]","$gsub","$deprecation_type_for","$private","$type","$include","$sync=","$deprecation_message_for","$deprecation_formatter","$puts","$to_s","$count","$pluralize","$path","$[]=","$stash_deprecation_message","$==","$too_many_warnings_message","$any?","$print_deferred_deprecation_warnings","$each","$sort_by","$to_proc","$keys","$raise"]),$.$require("rspec/core/formatters/helpers"),$.$require("set"),function($){{var s=a($,"RSpec");s.$$proto,s.$$scope}!function($){var s=a($,"Core"),c=(s.$$proto,s.$$scope);!function($){{var s=a($,"Formatters");s.$$proto,s.$$scope}!function($,$super){function a(){}var s,c,u,l,_,p=a=i($,$super,"DeprecationFormatter",a),d=p.$$proto,f=p.$$scope;return d.printer=d.seen_deprecations=d.count=o,p.$attr_reader("count","deprecation_stream","summary_stream"),d.$initialize=function(e,t){var n=this;return n.deprecation_stream=e,n.summary_stream=t,n.seen_deprecations=f.get("Set").$new(),n.count=0},d.$printer=function(){var e,t=this,n=o;return(e=t.printer)!==!1&&e!==o?e:t.printer=function(){return n=t.$deprecation_stream(),f.get("File")["$==="](n)||f.get("RaiseErrorStream")["$==="](n)?f.get("ImmediatePrinter").$new(t.$deprecation_stream(),t.$summary_stream(),t):f.get("DelayedPrinter").$new(t.$deprecation_stream(),t.$summary_stream(),t)}()},d.$deprecation=function(e){var n,r=this;return(n=r.seen_deprecations["$include?"](e))===o||n.$$is_boolean&&1!=n?(r.count=t(r.count,1),r.$printer().$print_deprecation_message(e),r.seen_deprecations["$<<"](e)):o},d.$deprecation_summary=function(){var e=this;return e.$printer().$deprecation_summary()},d.$deprecation_message_for=function(e){var t;return(t=e["$[]"]("message"))===o||t.$$is_boolean&&1!=t?f.get("GeneratedDeprecationMessage").$new(e):f.get("SpecifiedDeprecationMessage").$new(e)},e.cdecl(f,"RAISE_ERROR_CONFIG_NOTICE","          |\n          |If you need more of the backtrace for any of these deprecations to\n          |identify where to make the necessary changes, you can configure\n          |`config.raise_errors_for_deprecations!`, and it will turn the\n          |deprecation warnings into errors, giving you the full backtrace.\n".$gsub(/^\s+\|/,"")),e.cdecl(f,"SpecifiedDeprecationMessage",(s=(c=f.get("Struct")).$new,s.$$p=(u=function(){var t,n=u.$$s||this;return e.defn(n,"$initialize",t=function(n){{var r=this;t.$$p}return t.$$p=null,r.message=n["$[]"]("message"),e.find_super_dispatcher(r,"initialize",t,null).apply(r,[r.$deprecation_type_for(n)])}),e.defn(n,"$to_s",function(){var e=this;return null==e.message&&(e.message=o),e.message}),e.defn(n,"$too_many_warnings_message",function(){var e=o;return e="Too many similar deprecation messages reported, disregarding further reports.",e["$<<"](" Set config.deprecation_stream to a File for full output."),e}),n.$private(),e.defn(n,"$deprecation_type_for",function(e){return e["$[]"]("message").$gsub(/(\w+\/)+\w+\.rb:\d+/,"")}),o&&"deprecation_type_for"},u.$$s=p,u),s).call(c,"type")),e.cdecl(f,"GeneratedDeprecationMessage",(s=(l=f.get("Struct")).$new,s.$$p=(_=function(){var t,n=_.$$s||this;return e.defn(n,"$initialize",t=function(n){{var r=this;t.$$p}return t.$$p=null,r.data=n,e.find_super_dispatcher(r,"initialize",t,null).apply(r,[n["$[]"]("deprecated")])}),e.defn(n,"$to_s",function(){var e,t=this,n=o;return null==t.data&&(t.data=o),n=""+t.data["$[]"]("deprecated")+" is deprecated.",(e=t.data["$[]"]("replacement"))===o||e.$$is_boolean&&1!=e||n["$<<"](" Use "+t.data["$[]"]("replacement")+" instead."),(e=t.data["$[]"]("call_site"))===o||e.$$is_boolean&&1!=e||n["$<<"](" Called from "+t.data["$[]"]("call_site")+"."),n}),e.defn(n,"$too_many_warnings_message",function(){var e=this,t=o;return t="Too many uses of deprecated '"+e.$type()+"'.",t["$<<"](" Set config.deprecation_stream to a File for full output."),t}),o&&"too_many_warnings_message"},_.$$s=p,_),s).call(l,"type")),function(t,$super){function r(){}var $=r=i(t,$super,"ImmediatePrinter",r),a=$.$$proto,s=$.$$scope;return a.deprecation_stream=o,$.$include(e.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("Helpers")),$.$attr_reader("deprecation_stream","summary_stream","deprecation_formatter"),a.$initialize=function(e,t,n){var r,$,o=this;return o.deprecation_stream=e,r=[!0],$=o.deprecation_stream,$["$sync="].apply($,r),r[r.length-1],o.summary_stream=t,o.deprecation_formatter=n},a.$print_deprecation_message=function(e){var t=this,n=o;return n=t.$deprecation_formatter().$deprecation_message_for(e),t.$deprecation_stream().$puts(n.$to_s())},a.$deprecation_summary=function(){var e=this;return n(e.$deprecation_formatter().$count(),0)?(e.$summary_stream().$puts("\n"+e.$pluralize(e.$deprecation_formatter().$count(),"deprecation")+" logged to "+e.$deprecation_stream().$path()),e.$deprecation_stream().$puts(s.get("RAISE_ERROR_CONFIG_NOTICE"))):o},o&&"deprecation_summary"}(p,null),function(n,$super){function $(){}var a=$=i(n,$super,"DelayedPrinter",$),s=a.$$proto,c=a.$$scope;return s.seen_deprecations=s.deprecation_messages=o,e.cdecl(c,"TOO_MANY_USES_LIMIT",4),a.$include(e.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("Helpers")),a.$attr_reader("deprecation_stream","summary_stream","deprecation_formatter"),s.$initialize=function(e,t,n){var r,$,a,i,s,u=this;
return u.deprecation_stream=e,u.summary_stream=t,u.deprecation_formatter=n,u.seen_deprecations=(r=($=c.get("Hash")).$new,r.$$p=(a=function(){a.$$s||this;return 0},a.$$s=u,a),r).call($),u.deprecation_messages=(r=(i=c.get("Hash")).$new,r.$$p=(s=function(e,t){s.$$s||this;return null==e&&(e=o),null==t&&(t=o),e["$[]="](t,[])},s.$$s=u,s),r).call(i)},s.$print_deprecation_message=function(e){var n,r,$=this,a=o;return a=$.$deprecation_formatter().$deprecation_message_for(e),n=a,r=$.seen_deprecations,r["$[]="](n,t(r["$[]"](n),1)),$.$stash_deprecation_message(a)},s.$stash_deprecation_message=function(e){var t=this;return r(t.seen_deprecations["$[]"](e),c.get("TOO_MANY_USES_LIMIT"))?t.deprecation_messages["$[]"](e)["$<<"](e.$to_s()):t.seen_deprecations["$[]"](e)["$=="](c.get("TOO_MANY_USES_LIMIT"))?t.deprecation_messages["$[]"](e)["$<<"](e.$too_many_warnings_message()):o},s.$deprecation_summary=function(){var e,t=this;return(e=t.deprecation_messages["$any?"]())===o||e.$$is_boolean&&1!=e?o:(t.$print_deferred_deprecation_warnings(),t.$deprecation_stream().$puts(c.get("RAISE_ERROR_CONFIG_NOTICE")),t.$summary_stream().$puts("\n"+t.$pluralize(t.$deprecation_formatter().$count(),"deprecation warning")+" total"))},s.$print_deferred_deprecation_warnings=function(){var e,t,n,r,$,a=this;return a.$deprecation_stream().$puts("\nDeprecation Warnings:\n\n"),(e=(t=(r=($=a.deprecation_messages.$keys()).$sort_by,r.$$p="type".$to_proc(),r).call($)).$each,e.$$p=(n=function(e){var t,r,$,a=n.$$s||this,i=o;return null==a.deprecation_messages&&(a.deprecation_messages=o),null==e&&(e=o),i=a.deprecation_messages["$[]"](e),(t=(r=i).$each,t.$$p=($=function(e){var t=$.$$s||this;return null==e&&(e=o),t.$deprecation_stream().$puts(e)},$.$$s=a,$),t).call(r),a.$deprecation_stream().$puts()},n.$$s=a,n),e).call(t)},o&&"print_deferred_deprecation_warnings"}(p,null),function(e,$super){function t(){}var n=t=i(e,$super,"RaiseErrorStream",t),r=n.$$proto,$=n.$$scope;return r.$puts=function(e){var t=this;return t.$raise($.get("DeprecationError"),e)},r["$sync="]=function(){return o},o&&"sync="}(p,null)}(s,null)}(s),e.cdecl(c,"DeprecationError",c.get("Class").$new(c.get("StandardError")))}(s)}($)},Opal.modules["rspec/support/caller_filter"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>=t:e["$>="](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}e.dynamic_require_severity="warning";var $=e.top,o=e.nil,a=(e.breaker,e.slice,e.module),i=e.klass;return e.add_stubs(["$join","$!","$caller","$raise","$find","$=~"]),function($){{var s=a($,"RSpec");s.$$proto,s.$$scope}!function($,$super){function a(){}var s=a=i($,$super,"CallerFilter",a),c=(s.$$proto,s.$$scope);return e.cdecl(c,"RSPEC_LIBS",["core","mocks","expectations","support","matchers","rails"]),e.cdecl(c,"ADDITIONAL_TOP_LEVEL_FILES",["autorun"]),e.cdecl(c,"LIB_REGEX",new RegExp("/lib/rspec/("+t(c.get("RSPEC_LIBS"),c.get("ADDITIONAL_TOP_LEVEL_FILES")).$join("|")+")(\\.rb|/)")),n(c.get("RUBY_VERSION"),"2.0.0")?(e.defs(s,"$first_non_rspec_line",function(){var e,n,$,a=this,i=o,s=o,u=o,l=o;for(i=5,s=1,u=o;(e=u["$!"]())!==o&&(!e.$$is_boolean||1==e);)l=a.$caller(s,i),l!==!1&&l!==o||a.$raise("No non-lib lines in stack"),u=(e=(n=l).$find,e.$$p=($=function(e){{var t;$.$$s||this}return null==e&&(e=o),t=e["$=~"](c.get("LIB_REGEX")),t===o||t===!1},$.$$s=a,$),e).call(n),s=t(s,i),i=r(i,2);return u}),o&&"first_non_rspec_line"):(e.defs(s,"$first_non_rspec_line",function(){var e,t,n,r=this;return(e=(t=r.$caller()).$find,e.$$p=(n=function(e){{var t;n.$$s||this}return null==e&&(e=o),t=e["$=~"](c.get("LIB_REGEX")),t===o||t===!1},n.$$s=r,n),e).call(t)}),o&&"first_non_rspec_line")}(s,null)}($)},Opal.modules["rspec/support/warnings"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.hash2;return e.add_stubs(["$respond_to?","$warn_with","$fetch","$first_non_rspec_line","$<<","$warn"]),function(t){var o,a=r(t,"RSpec"),i=(a.$$proto,a.$$scope);((o=a["$respond_to?"]("deprecate"))===n||o.$$is_boolean&&1!=o)&&e.defs(a,"$deprecate",function(e,t){var n=this;return null==t&&(t=$([],{})),n.$warn_with("DEPRECATION: "+e+" is deprecated.",t)}),((o=a["$respond_to?"]("warn_deprecation"))===n||o.$$is_boolean&&1!=o)&&e.defs(a,"$warn_deprecation",function(e){var t=this;return t.$warn_with("DEPRECATION: \n "+e)}),e.defs(a,"$warning",function(e,t){var n=this;return null==t&&(t=$([],{})),n.$warn_with("WARNING: "+e+".",t)}),e.defs(a,"$warn_with",function(t,r){var o,a,s,c=this,u=n;return null==r&&(r=$([],{})),u=(o=(a=r).$fetch,o.$$p=(s=function(){s.$$s||this;return i.get("CallerFilter").$first_non_rspec_line()},s.$$s=c,s),o).call(a,"call_site"),u!==!1&&u!==n&&t["$<<"](" Called from "+u+"."),e.get("Kernel").$warn(t)})}(t)},Opal.modules["rspec/expectations/extensions/object"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e,r=e.nil,$=(e.breaker,e.slice),o=e.module,a=e.hash2;return e.add_stubs(["$===","$deprecate","$to_s","$reject!","$=~","$compile","$backtrace","$raise","$extend"]),function(t){{var n=o(t,"RSpec");n.$$proto,n.$$scope}!function(t){var n=o(t,"Expectations"),i=(n.$$proto,n.$$scope);!function(t){var n,i=o(t,"DeprecatedConstants"),s=(i.$$proto,i.$$scope);e.defn(i,"$const_missing",n=function(t){var o,i,c,u=$.call(arguments,0),l=this,_=n.$$p,p=r,d=r;return n.$$p=null,function(){if(p=t,"Rspec"["$==="](p)||"Spec"["$==="](p))return s.get("RSpec").$deprecate(t.$to_s(),a(["replacement"],{replacement:"RSpec"})),s.get("RSpec");try{return e.find_super_dispatcher(l,"const_missing",n,_).apply(l,u)}catch($){if(e.rescue($,[s.get("Exception")]))return d=$,(o=(i=d.$backtrace())["$reject!"],o.$$p=(c=function(e){c.$$s||this;return null==e&&(e=r),e["$=~"](s.get("Regexp").$compile("rspec/expectations/extensions/object"))},c.$$s=l,c),o).call(i),l.$raise(d);throw $}}()})}(n),e.defn(n,"$differ=",function(){return i.get("RSpec").$deprecate("RSpec::Expectations.differ=(differ)")})}(n)}(t),t.$extend(n.get("RSpec").$$scope.get("Expectations").$$scope.get("DeprecatedConstants"))},Opal.modules["rspec/expectations/extensions"]=function(e){e.dynamic_require_severity="warning";{var t=e.top;e.nil,e.breaker,e.slice}return e.add_stubs(["$require"]),t.$require("rspec/expectations/extensions/object")},Opal.modules["rspec/matchers/pretty"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.dynamic_require_severity="warning";var r=e.top,$=e.nil,o=(e.breaker,e.slice,e.module),a=e.range;return e.add_stubs(["$gsub","$to_s","$map","$to_word","$Array","$length","$===","$[]","$join","$each_with_index","$<<","$inspect","$is_matcher_with_description?","$description","$split_words","$name","$to_sentence","$underscore","$last","$split","$class","$dup","$gsub!","$tr!","$downcase!","$private","$is_a_matcher?","$respond_to?"]),function(r){{var i=o(r,"RSpec");i.$$proto,i.$$scope}!function(r){{var i=o(r,"Matchers");i.$$proto,i.$$scope}!function(r){var i=o(r,"Pretty"),s=(i.$$proto,i.$$scope);e.defn(i,"$split_words",function(e){return e.$to_s().$gsub(/_/," ")}),e.defn(i,"$to_sentence",function(e){var t,n,r,o=this,i=$;return e===!1||e===$?"":(e=(t=(n=o.$Array(e)).$map,t.$$p=(r=function(e){var t=r.$$s||this;return null==e&&(e=$),t.$to_word(e)},r.$$s=o,r),t).call(n),function(){return i=e.$length(),0["$==="](i)?"":1["$==="](i)?" "+e["$[]"](0):2["$==="](i)?" "+e["$[]"](0)+" and "+e["$[]"](1):" "+e["$[]"](a(0,-1,!0)).$join(", ")+", and "+e["$[]"](-1)}())}),e.defn(i,"$_pretty_print",function(e){var r,o,a,i=this,s=$;return s="",(r=(o=e).$each_with_index,r.$$p=(a=function(r,o){a.$$s||this;return null==r&&(r=$),null==o&&(o=$),s["$<<"](t(o,n(e.$length(),2))?""+r.$inspect()+", ":t(o,n(e.$length(),1))?""+r.$inspect()+" and ":""+r.$inspect())},a.$$s=i,a),r).call(o),s}),e.defn(i,"$to_word",function(e){var t,n=this;return(t=n["$is_matcher_with_description?"](e))===$||t.$$is_boolean&&1!=t?e.$inspect():e.$description()}),e.defn(i,"$name_to_sentence",function(){var e=this;return e.$split_words(e.$name())}),e.defn(i,"$expected_to_sentence",function(){var e,t,n=this;return null==n.expected&&(n.expected=$),t=n.expected,(e=null!=t&&t!==$?"instance-variable":$)===$||e.$$is_boolean&&1!=e?$:n.$to_sentence(n.expected)}),e.defn(i,"$name",function(){var e,t,n=this;return null==n.name&&(n.name=$),t=n.name,(e=null!=t&&t!==$?"instance-variable":$)===$||e.$$is_boolean&&1!=e?n.$underscore(n.$class().$name().$split("::").$last()):n.name}),e.defn(i,"$underscore",function(e){var t=$;return t=e.$to_s().$dup(),t["$gsub!"](/([A-Z]+)([A-Z][a-z])/,"\\1_\\2"),t["$gsub!"](/([a-z\d])([A-Z])/,"\\1_\\2"),t["$tr!"]("-","_"),t["$downcase!"](),t}),i.$private(),e.defn(i,"$is_matcher_with_description?",function(e){var t;return t=s.get("RSpec").$$scope.get("Matchers")["$is_a_matcher?"](e),t!==!1&&t!==$?e["$respond_to?"]("description"):t})}(i)}(i)}(r)},Opal.modules["rspec/matchers/built_in/base_matcher"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=e.breaker,$=e.slice,o=e.module,a=e.klass;return e.add_stubs(["$include","$attr_reader","$match","$expected","$empty?","$unshift","$assert_ivars","$inspect","$name_to_sentence","$expected_to_sentence","$matches?","$private","$all?","$include?","$map","$to_proc","$instance_variables","$raise","$name","$class","$to_sentence"]),function(t){{var i=o(t,"RSpec");i.$$proto,i.$$scope}!function(t){{var i=o(t,"Matchers");i.$$proto,i.$$scope}!function(t){{var i=o(t,"BuiltIn");i.$$proto,i.$$scope}!function(t,$super){function o(){}var i,s=o=a(t,$super,"BaseMatcher",o),c=s.$$proto,u=s.$$scope;return c.actual=c.expected=n,s.$include(u.get("RSpec").$$scope.get("Matchers").$$scope.get("Pretty")),s.$attr_reader("actual","expected","rescued_exception"),c.$initialize=function(e){var t=this;return null==e&&(e=n),t.expected=e},c["$matches?"]=function(e){var t=this;return t.actual=e,t.$match(t.$expected(),e)},c.$match_unless_raises=i=function(t){var o,a=this,s=i.$$p,c=s||n;t=$.call(arguments,0),i.$$p=null,(o=t["$empty?"]())===n||o.$$is_boolean&&1!=o||t.$unshift(u.get("Exception"));try{return e.yieldX(c,[])===r?r.$v:!0}catch(l){if(e.rescue(l,[t]))return a.rescued_exception=l,!1;throw l}},c.$failure_message_for_should=function(){var e=this;return e.$assert_ivars("@actual","@expected"),"expected "+e.actual.$inspect()+" to "+e.$name_to_sentence()+e.$expected_to_sentence()},c.$failure_message_for_should_not=function(){var e=this;return e.$assert_ivars("@actual","@expected"),"expected "+e.actual.$inspect()+" not to "+e.$name_to_sentence()+e.$expected_to_sentence()},c.$description=function(){var e,t=this;return(e=t.$expected())===n||e.$$is_boolean&&1!=e?t.$name_to_sentence():""+t.$name_to_sentence()+" "+t.expected.$inspect()},c["$diffable?"]=function(){return!1},c["$=="]=function(e){var t=this;return t["$matches?"](e)},s.$private(),c.$assert_ivars=function(e){var t,r,o,a,i=this;return e=$.call(arguments,0),(t=(r=(o=e)["$all?"],r.$$p=(a=function(e){var t,r,$=a.$$s||this;return null==e&&(e=n),(t=(r=$.$instance_variables()).$map,t.$$p="intern".$to_proc(),t).call(r)["$include?"](e)},a.$$s=i,a),r).call(o))===n||t.$$is_boolean&&1!=t?i.$raise(""+i.$class().$name()+" needs to supply "+i.$to_sentence(e)):n},n&&"assert_ivars"}(i,null)}(i)}(i)}(t)},Opal.modules["rspec/matchers/built_in/be_instance_of"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$instance_of?","$expected"]),function(e){{var t=r(e,"RSpec");t.$$proto,t.$$scope}!function(e){{var t=r(e,"Matchers");t.$$proto,t.$$scope}!function(e){var t=r(e,"BuiltIn"),o=(t.$$proto,t.$$scope);!function(e,$super){function t(){}{var r=t=$(e,$super,"BeAnInstanceOf",t),o=r.$$proto;r.$$scope}return o.$match=function(e,t){return t["$instance_of?"](e)},o.$description=function(){var e=this;return"be an instance of "+e.$expected()},n&&"description"}(t,o.get("BaseMatcher"))}(t)}(t)}(t)},Opal.modules["rspec/matchers/dsl"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e,r=e.nil,$=(e.breaker,e.slice),o=e.module;return e.add_stubs(["$define_method","$new","$matcher_execution_context=","$alias_method","$respond_to?","$configure","$extend"]),function(t){{var n=o(t,"RSpec");n.$$proto,n.$$scope}!function(t){{var n=o(t,"Matchers");n.$$proto,n.$$scope}!function(t){var n,a,i,s,c=o(t,"DSL"),u=(c.$$proto,c.$$scope);e.defn(c,"$define",n=function(e){var t,o,a,i=this,s=n.$$p,c=s||r;return n.$$p=null,(t=(o=i).$define_method,t.$$p=(a=function(t){var n,o,i,s,l=a.$$s||this,_=r;return null==l.matcher_execution_context&&(l.matcher_execution_context=r),t=$.call(arguments,0),_=(n=u.get("RSpec").$$scope.get("Matchers").$$scope.get("DSL").$$scope.get("Matcher")).$new.apply(n,[e,c].concat(t)),o=[(s=l.matcher_execution_context)!==!1&&s!==r?s:l.matcher_execution_context=l],i=_,i["$matcher_execution_context="].apply(i,o),o[o.length-1],_},a.$$s=i,a),t).call(o,e)}),c.$alias_method("matcher","define"),(a=u.get("RSpec")["$respond_to?"]("configure"))===r||a.$$is_boolean&&1!=a||(a=(i=u.get("RSpec")).$configure,a.$$p=(s=function(e){var t=s.$$s||this;return null==e&&(e=r),e.$extend(t)},s.$$s=c,s),a).call(i)}(n)}(n)}(t),n.get("RSpec").$$scope.get("Matchers").$extend(n.get("RSpec").$$scope.get("Matchers").$$scope.get("DSL"))},Opal.modules["rspec/matchers/built_in/be"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass,a=e.gvars;return e.add_stubs(["$require","$!","$inspect","$actual","$nil?","$private","$empty?","$parenthesize","$join","$inspected_args","$collect","$split_words","$to_sentence","$include","$each","$define_method","$new","$__send__","$gsub","$to_s","$negative_expectation_expression","$raise","$<<","$include?","$expected_to_sentence","$args_to_sentence","$negative_expression","$parse_expected","$shift","$is_private_on?","$predicate","$to_proc","$present_tense_predicate","$args_to_s","$prefix_to_sentence","$is_a?","$first","$methods","$private_methods","$to_sym","$prefix_and_expected","$=~"]),t.$require("rspec/matchers/dsl"),function(t){{var i=$(t,"RSpec");i.$$proto,i.$$scope}!function(t){{var i=$(t,"Matchers");i.$$proto,i.$$scope}!function(t){var i=$(t,"BuiltIn"),s=(i.$$proto,i.$$scope);!function(e,$super){function t(){}{var r=t=o(e,$super,"BeTruthy",t),$=r.$$proto;r.$$scope}return $.$match=function(e,t){return t["$!"]()["$!"]()},$.$failure_message_for_should=function(){var e=this;return"expected: truthy value\n     got: "+e.$actual().$inspect()},$.$failure_message_for_should_not=function(){var e=this;return"expected: falsey value\n     got: "+e.$actual().$inspect()},n&&"failure_message_for_should_not"}(i,s.get("BaseMatcher")),function(e,$super){function t(){}{var r=t=o(e,$super,"BeFalsey",t),$=r.$$proto;r.$$scope}return $.$match=function(e,t){return t["$!"]()},$.$failure_message_for_should=function(){var e=this;return"expected: falsey value\n     got: "+e.$actual().$inspect()},$.$failure_message_for_should_not=function(){var e=this;return"expected: truthy value\n     got: "+e.$actual().$inspect()},n&&"failure_message_for_should_not"}(i,s.get("BaseMatcher")),function(e,$super){function t(){}{var r=t=o(e,$super,"BeNil",t),$=r.$$proto;r.$$scope}return $.$match=function(e,t){return t["$nil?"]()},$.$failure_message_for_should=function(){var e=this;return"expected: nil\n     got: "+e.$actual().$inspect()},$.$failure_message_for_should_not=function(){return"expected: not nil\n     got: nil"},n&&"failure_message_for_should_not"}(i,s.get("BaseMatcher")),function(t){{var r=$(t,"BeHelpers");r.$$proto,r.$$scope}r.$private(),e.defn(r,"$args_to_s",function(){var e,t=this;return null==t.args&&(t.args=n),(e=t.args["$empty?"]())===n||e.$$is_boolean&&1!=e?t.$parenthesize(t.$inspected_args().$join(", ")):""}),e.defn(r,"$parenthesize",function(e){return"("+e+")"}),e.defn(r,"$inspected_args",function(){var e,t,r,$=this;return null==$.args&&($.args=n),(e=(t=$.args).$collect,e.$$p=(r=function(e){r.$$s||this;return null==e&&(e=n),e.$inspect()},r.$$s=$,r),e).call(t)}),e.defn(r,"$expected_to_sentence",function(){var e=this;return null==e.expected&&(e.expected=n),e.$split_words(e.expected)}),e.defn(r,"$args_to_sentence",function(){var e=this;return null==e.args&&(e.args=n),e.$to_sentence(e.args)})}(i),function(e,$super){function t(){}var $,a,i,s,c=t=o(e,$super,"Be",t),u=c.$$proto,l=c.$$scope;return u.actual=n,c.$include(l.get("BeHelpers")),u.$initialize=$=function(e){{var t=this;$.$$p}return e=r.call(arguments,0),$.$$p=null,t.args=e},u.$match=function(e,t){return t["$!"]()["$!"]()},u.$failure_message_for_should=function(){var e=this;return"expected "+e.actual.$inspect()+" to evaluate to true"},u.$failure_message_for_should_not=function(){var e=this;return"expected "+e.actual.$inspect()+" to evaluate to false"},(a=(i=["==","<","<=",">=",">","===","=~"]).$each,a.$$p=(s=function(e){var t,r,$,o=s.$$s||this;return null==e&&(e=n),(t=(r=o).$define_method,t.$$p=($=function(t){$.$$s||this;return null==t&&(t=n),l.get("BeComparedTo").$new(t,e)},$.$$s=o,$),t).call(r,e)},s.$$s=c,s),a).call(i)}(i,s.get("BaseMatcher")),function(e,$super){function t(){}var r=t=o(e,$super,"BeComparedTo",t),$=r.$$proto,a=r.$$scope;return $.actual=$.operator=$.expected=n,$.$initialize=function(e,t){var n,r=this;return n=[e,t],r.expected=n[0],r.operator=n[1],r.args=[]},$["$matches?"]=function(e){var t=this;return t.actual=e,t.actual.$__send__(t.operator,t.expected)},$.$failure_message_for_should=function(){var e=this;return"expected: "+e.operator+" "+e.expected.$inspect()+"\n     got: "+e.operator.$to_s().$gsub(/./," ")+" "+e.actual.$inspect()},$.$failure_message_for_should_not=function(){var e,t=this,r=n;return r="`"+t.$negative_expectation_expression()+"` not only FAILED,\nit is a bit confusing.\n",t.$raise(r["$<<"](function(){return(e=["===","=="]["$include?"](t.operator))===n||e.$$is_boolean&&1!=e?"It might be more clearly expressed in the positive?":'It might be more clearly expressed without the "be"?'}()))},$.$description=function(){var e=this;return"be "+e.operator+" "+e.$expected_to_sentence()+e.$args_to_sentence()},$.$negative_expectation_expression=function(){var e=this;return a.get("Expectations").$$scope.get("Syntax").$negative_expression("actual","be "+e.operator+" "+e.expected)},n&&"negative_expectation_expression"}(i,s.get("Be")),function(t,$super){function $(){}var i,s,c=$=o(t,$super,"BePredicate",$),u=c.$$proto,l=c.$$scope;return u.actual=u.block=u.args=u.result=u.expected=u.prefix=n,c.$include(l.get("BeHelpers")),u.$initialize=i=function(e){var t=this,$=i.$$p,o=$||n;return e=r.call(arguments,0),i.$$p=null,t.expected=t.$parse_expected(e.$shift()),t.args=e,t.block=o},u["$matches?"]=function(t){var r,$,o,a=this,i=n;a.actual=t,(r=a["$is_private_on?"](a.actual))===n||r.$$is_boolean&&1!=r||a.$raise(l.get("Expectations").$$scope.get("ExpectationNotMetError").$new("expectation set on private method `"+a.$predicate()+"`"));try{return a.result=(r=($=t).$__send__,r.$$p=a.block.$to_proc(),r).apply($,[a.$predicate()].concat(a.args))}catch(s){if(!e.rescue(s,[l.get("NameError")]))throw s;i=s}try{return a.result=(r=(o=t).$__send__,r.$$p=a.block.$to_proc(),r).apply(o,[a.$present_tense_predicate()].concat(a.args))}catch(s){if(e.rescue(s,[l.get("NameError")]))return a.$raise(i);throw s}},e.defn(c,"$===",u["$matches?"]),u.$failure_message_for_should=function(){var e=this;return"expected "+e.$predicate()+e.$args_to_s()+" to return true, got "+e.result.$inspect()},u.$failure_message_for_should_not=function(){var e=this;return"expected "+e.$predicate()+e.$args_to_s()+" to return false, got "+e.result.$inspect()},u.$description=function(){var e=this;return""+e.$prefix_to_sentence()+e.$expected_to_sentence()+e.$args_to_sentence()},c.$private(),u["$is_private_on?"]=(s=c.$methods().$first()["$is_a?"](l.get("String")))===n||s.$$is_boolean&&1!=s?function(e){var t=this;return e.$private_methods()["$include?"](t.$predicate())}:function(e){var t=this;return e.$private_methods()["$include?"](t.$predicate().$to_s())},u.$predicate=function(){var e=this;return(""+e.expected+"?").$to_sym()},u.$present_tense_predicate=function(){var e=this;return(""+e.expected+"s?").$to_sym()},u.$parse_expected=function(t){var r,$=this;return r=e.to_ary($.$prefix_and_expected(t)),$.prefix=null==r[0]?n:r[0],t=null==r[1]?n:r[1],t},u.$prefix_and_expected=function(e){var t;return e.$to_s()["$=~"](/^(be_(an?_)?)(.*)/),[(t=a["~"])===n?n:t["$[]"](1),(t=a["~"])===n?n:t["$[]"](3)]},u.$prefix_to_sentence=function(){var e=this;return e.$split_words(e.prefix)},n&&"prefix_to_sentence"}(i,s.get("BaseMatcher"))}(i)}(i)}(t)},Opal.modules["rspec/matchers/built_in/be_kind_of"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$kind_of?"]),function(e){{var t=r(e,"RSpec");t.$$proto,t.$$scope}!function(e){{var t=r(e,"Matchers");t.$$proto,t.$$scope}!function(e){var t=r(e,"BuiltIn"),o=(t.$$proto,t.$$scope);!function(e,$super){function t(){}{var r=t=$(e,$super,"BeAKindOf",t),o=r.$$proto;r.$$scope}return o.$match=function(e,t){return t["$kind_of?"](e)},n&&"match"}(t,o.get("BaseMatcher"))}(t)}(t)}(t)},Opal.modules["rspec/matchers/built_in/be_within"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?t>=e:e["$<="](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e/t:e["$/"](t)}function $(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}e.dynamic_require_severity="warning";var o=e.top,a=e.nil,i=(e.breaker,e.slice,e.module),s=e.klass;return e.add_stubs(["$raise","$needs_expected","$respond_to?","$needs_subtractable","$abs","$description","$private","$new","$inspect"]),function(o){{var c=i(o,"RSpec");c.$$proto,c.$$scope}!function(o){{var c=i(o,"Matchers");c.$$proto,c.$$scope}!function(o){{var c=i(o,"BuiltIn");c.$$proto,c.$$scope}!function(o,$super){function i(){}var c=i=s(o,$super,"BeWithin",i),u=c.$$proto,l=c.$$scope;return u.actual=u.expected=u.tolerance=u.delta=u.unit=a,u.$initialize=function(e){var t=this;return t.delta=e},u["$matches?"]=function(e){var r,$,o=this;return o.actual=e,$=o.expected,((r=null!=$&&$!==a?"instance-variable":a)===a||r.$$is_boolean&&1!=r)&&o.$raise(o.$needs_expected()),((r=o.actual["$respond_to?"]("-"))===a||r.$$is_boolean&&1!=r)&&o.$raise(o.$needs_subtractable()),t(n(o.actual,o.expected).$abs(),o.tolerance)},e.defn(c,"$==",u["$matches?"]),u.$of=function(e){var t=this;return t.expected=e,t.tolerance=t.delta,t.unit="",t},u.$percent_of=function(e){var t=this;return t.expected=e,t.tolerance=r($(t.delta,t.expected.$abs()),100),t.unit="%",t},u.$failure_message_for_should=function(){var e=this;return"expected "+e.actual+" to "+e.$description()},u.$failure_message_for_should_not=function(){var e=this;return"expected "+e.actual+" not to "+e.$description()},u.$description=function(){var e=this;return"be within "+e.delta+e.unit+" of "+e.expected},c.$private(),u.$needs_subtractable=function(){var e=this;return l.get("ArgumentError").$new("The actual value ("+e.actual.$inspect()+") must respond to `-`")},u.$needs_expected=function(){var e=this;return l.get("ArgumentError").$new("You must set an expected value using #of: be_within("+e.delta+").of(expected_value)")},a&&"needs_expected"}(c,null)}(c)}(c)}(o)},Opal.modules["rspec/matchers/built_in/change"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e>=t:e["$>="](t)}function $(e,t){return"number"==typeof e&&"number"==typeof t?t>=e:e["$<="](t)}e.dynamic_require_severity="warning";var o=e.top,a=e.nil,i=(e.breaker,e.slice,e.module),s=e.klass;return e.add_stubs(["$lambda","$__send__","$raise_block_syntax_error","$evaluate_value_proc","$call","$!","$change_expected?","$changed?","$matches_before?","$matches_after?","$matches_expected_delta?","$matches_min?","$matches_max?","$raise","$new","$===","$dup","$expected_matches_actual?","$message","$inspect","$failure_message_for_expected_after","$actual_delta","$private","$is_a_matcher?","$description","$=="]),function(o){{var c=i(o,"RSpec");c.$$proto,c.$$scope}!function(o){{var c=i(o,"Matchers");c.$$proto,c.$$scope}!function(o){{var c=i(o,"BuiltIn");c.$$proto,c.$$scope}!function(o,$super){function i(){}var c,u,l=i=s(o,$super,"Change",i),_=l.$$proto,p=l.$$scope;return _.value_proc=_.eval_before=_.expected_before=_.actual_before=_.eval_after=_.expected_after=_.actual_after=_.expected_delta=_.minimum=_.maximum=_.message=a,_.$initialize=c=function(e,t){var n,r,$,o,i=this,s=c.$$p,u=s||a;return null==e&&(e=a),null==t&&(t=a),c.$$p=null,i.message=t,i.value_proc=(n=u)!==!1&&n!==a?n:(r=($=i).$lambda,r.$$p=(o=function(){o.$$s||this;return e.$__send__(t)},o.$$s=i,o),r).call($),i.expected_after=i.expected_before=i.minimum=i.maximum=i.expected_delta=a,i.eval_before=i.eval_after=!1},_["$matches?"]=u=function(e){var t,n,r,$,o,i,s=this,c=u.$$p,l=c||a;return u.$$p=null,l!==a&&s.$raise_block_syntax_error(),s.actual_before=s.$evaluate_value_proc(),e.$call(),s.actual_after=s.$evaluate_value_proc(),o=(i=s["$change_expected?"]()["$!"]())!==!1&&i!==a?i:s["$changed?"](),$=o!==!1&&o!==a?s["$matches_before?"]():o,r=$!==!1&&$!==a?s["$matches_after?"]():$,n=r!==!1&&r!==a?s["$matches_expected_delta?"]():r,t=n!==!1&&n!==a?s["$matches_min?"]():n,t!==!1&&t!==a?s["$matches_max?"]():t},e.defn(l,"$==",_["$matches?"]),_.$raise_block_syntax_error=function(){var e=this;return e.$raise(p.get("SyntaxError").$new("block passed to should or should_not change must use {} instead of do/end\n"))},_.$evaluate_value_proc=function(){var e=this,t=a,n=a;return function(){return t=n=e.value_proc.$call(),p.get("Enumerable")["$==="](t)||p.get("String")["$==="](t)?n.$dup():n}()},_.$failure_message_for_should=function(){var e,t,n=this;return t=n.eval_before,(e=t!==!1&&t!==a?n["$expected_matches_actual?"](n.expected_before,n.actual_before)["$!"]():t)===a||e.$$is_boolean&&1!=e?(t=n.eval_after,(e=t!==!1&&t!==a?n["$expected_matches_actual?"](n.expected_after,n.actual_after)["$!"]():t)===a||e.$$is_boolean&&1!=e?(e=n.expected_delta)===a||e.$$is_boolean&&1!=e?(e=n.minimum)===a||e.$$is_boolean&&1!=e?(e=n.maximum)===a||e.$$is_boolean&&1!=e?""+n.$message()+" should have changed, but is still "+n.actual_before.$inspect():""+n.$message()+" should have been changed by at most "+n.maximum.$inspect()+", but was changed by "+n.$actual_delta().$inspect():""+n.$message()+" should have been changed by at least "+n.minimum.$inspect()+", but was changed by "+n.$actual_delta().$inspect():""+n.$message()+" should have been changed by "+n.expected_delta.$inspect()+", but was changed by "+n.$actual_delta().$inspect():""+n.$message()+" should have been changed to "+n.$failure_message_for_expected_after()+", but is now "+n.actual_after.$inspect()):""+n.$message()+" should have initially been "+n.expected_before.$inspect()+", but was "+n.actual_before.$inspect()},_.$actual_delta=function(){var e=this;return t(e.actual_after,e.actual_before)},_.$failure_message_for_should_not=function(){var e=this;return""+e.$message()+" should not have changed, but did change from "+e.actual_before.$inspect()+" to "+e.actual_after.$inspect()},_.$by=function(e){var t=this;return t.expected_delta=e,t},_.$by_at_least=function(e){var t=this;return t.minimum=e,t},_.$by_at_most=function(e){var t=this;return t.maximum=e,t},_.$to=function(e){var t=this;return t.eval_after=!0,t.expected_after=e,t},_.$from=function(e){var t=this;return t.eval_before=!0,t.expected_before=e,t},_.$description=function(){var e=this;return"change #"+e.$message()},l.$private(),_.$failure_message_for_expected_after=function(){var e,t=this;return(e=p.get("RSpec").$$scope.get("Matchers")["$is_a_matcher?"](t.expected_after))===a||e.$$is_boolean&&1!=e?t.expected_after.$inspect():t.expected_after.$description()},_.$message=function(){var e,t=this;return(e=t.message)!==!1&&e!==a?e:"result"},_["$change_expected?"]=function(){var e=this;return e.expected_delta["$=="](0)["$!"]()},_["$changed?"]=function(){var e=this;return e.actual_before["$=="](e.actual_after)["$!"]()},_["$matches_before?"]=function(){var e,t=this;return(e=t.eval_before)===a||e.$$is_boolean&&1!=e?!0:t["$expected_matches_actual?"](t.expected_before,t.actual_before)},_["$matches_after?"]=function(){var e,t=this;return(e=t.eval_after)===a||e.$$is_boolean&&1!=e?!0:t["$expected_matches_actual?"](t.expected_after,t.actual_after)},_["$matches_expected_delta?"]=function(){var e,t=this;return(e=t.expected_delta)===a||e.$$is_boolean&&1!=e?!0:n(t.actual_before,t.expected_delta)["$=="](t.actual_after)},_["$matches_min?"]=function(){var e,n=this;return(e=n.minimum)===a||e.$$is_boolean&&1!=e?!0:r(t(n.actual_after,n.actual_before),n.minimum)},_["$matches_max?"]=function(){var e,n=this;return(e=n.maximum)===a||e.$$is_boolean&&1!=e?!0:$(t(n.actual_after,n.actual_before),n.maximum)},_["$expected_matches_actual?"]=function(e,t){var n;return(n=e["$==="](t))!==!1&&n!==a?n:t["$=="](e)},a&&"expected_matches_actual?"}(c,null)}(c)}(c)}(o)},Opal.modules["rspec/matchers/built_in/cover"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass;return e.add_stubs(["$all?","$cover?","$none?","$expected"]),function(e){{var t=$(e,"RSpec");t.$$proto,t.$$scope}!function(e){{var t=$(e,"Matchers");t.$$proto,t.$$scope}!function(e){var t=$(e,"BuiltIn"),a=(t.$$proto,t.$$scope);!function(e,$super){function t(){}{var $=t=o(e,$super,"Cover",t),a=$.$$proto;$.$$scope}return a.expected=n,a.$initialize=function(e){var t=this;return e=r.call(arguments,0),t.expected=e},a["$matches?"]=function(e){var t,r,$,o=this;return o.actual=e,(t=(r=o.expected)["$all?"],t.$$p=($=function(t){$.$$s||this;return null==t&&(t=n),e["$cover?"](t)},$.$$s=o,$),t).call(r)},a["$does_not_match?"]=function(e){var t,r,$,o=this;return o.actual=e,(t=(r=o.$expected())["$none?"],t.$$p=($=function(t){$.$$s||this;return null==t&&(t=n),e["$cover?"](t)},$.$$s=o,$),t).call(r)},n&&"does_not_match?"}(t,a.get("BaseMatcher"))}(t)}(t)}(t)},Opal.modules["rspec/matchers/built_in/eq"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$==","$inspect","$expected","$actual"]),function(e){{var t=r(e,"RSpec");t.$$proto,t.$$scope}!function(e){{var t=r(e,"Matchers");t.$$proto,t.$$scope}!function(e){var t=r(e,"BuiltIn"),o=(t.$$proto,t.$$scope);!function(e,$super){function t(){}{var r=t=$(e,$super,"Eq",t),o=r.$$proto;r.$$scope}return o.$match=function(e,t){return t["$=="](e)},o.$failure_message_for_should=function(){var e=this;return"\nexpected: "+e.$expected().$inspect()+"\n     got: "+e.$actual().$inspect()+"\n\n(compared using ==)\n"},o.$failure_message_for_should_not=function(){var e=this;return"\nexpected: value != "+e.$expected().$inspect()+"\n     got: "+e.$actual().$inspect()+"\n\n(compared using ==)\n"},o["$diffable?"]=function(){return!0},n&&"diffable?"}(t,o.get("BaseMatcher"))}(t)}(t)}(t)},Opal.modules["rspec/matchers/built_in/eql"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$eql?","$inspect","$expected","$actual"]),function(e){{var t=r(e,"RSpec");t.$$proto,t.$$scope}!function(e){{var t=r(e,"Matchers");t.$$proto,t.$$scope}!function(e){var t=r(e,"BuiltIn"),o=(t.$$proto,t.$$scope);!function(e,$super){function t(){}{var r=t=$(e,$super,"Eql",t),o=r.$$proto;r.$$scope}return o.$match=function(e,t){return t["$eql?"](e)},o.$failure_message_for_should=function(){var e=this;return"\nexpected: "+e.$expected().$inspect()+"\n     got: "+e.$actual().$inspect()+"\n\n(compared using eql?)\n"},o.$failure_message_for_should_not=function(){var e=this;return"\nexpected: value != "+e.$expected().$inspect()+"\n     got: "+e.$actual().$inspect()+"\n\n(compared using eql?)\n"},o["$diffable?"]=function(){return!0},n&&"diffable?"}(t,o.get("BaseMatcher"))}(t)}(t)}(t)},Opal.modules["rspec/matchers/built_in/equal"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$equal?","$inspect_object","$expected","$actual","$eq_expression","$private","$class","$object_id","$inspect","$positive_expression"]),function(e){{var t=r(e,"RSpec");t.$$proto,t.$$scope}!function(e){{var t=r(e,"Matchers");t.$$proto,t.$$scope}!function(e){var t=r(e,"BuiltIn"),o=(t.$$proto,t.$$scope);!function(e,$super){function t(){}var r=t=$(e,$super,"Equal",t),o=r.$$proto,a=r.$$scope;return o.$match=function(e,t){return t["$equal?"](e)},o.$failure_message_for_should=function(){var e=this;
return"\nexpected "+e.$inspect_object(e.$expected())+"\n     got "+e.$inspect_object(e.$actual())+"\n\nCompared using equal?, which compares object identity,\nbut expected and actual are not the same object. Use\n`"+e.$eq_expression()+"` if you don't care about\nobject identity in this example.\n\n"},o.$failure_message_for_should_not=function(){var e=this;return"\nexpected not "+e.$inspect_object(e.$actual())+"\n         got "+e.$inspect_object(e.$expected())+"\n\nCompared using equal?, which compares object identity.\n\n"},o["$diffable?"]=function(){return!0},r.$private(),o.$inspect_object=function(e){return"#<"+e.$class()+":"+e.$object_id()+"> => "+e.$inspect()},o.$eq_expression=function(){return a.get("Expectations").$$scope.get("Syntax").$positive_expression("actual","eq(expected)")},n&&"eq_expression"}(t,o.get("BaseMatcher"))}(t)}(t)}(t)},Opal.modules["rspec/matchers/built_in/exist"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="warning";var n=e.top,r=e.nil,$=(e.breaker,e.slice),o=e.module,a=e.klass;return e.add_stubs(["$select","$respond_to?","$map","$__send__","$uniq","$!","$size","$===","$raise","$new","$inspect","$first","$last"]),function(e){{var n=o(e,"RSpec");n.$$proto,n.$$scope}!function(e){{var n=o(e,"Matchers");n.$$proto,n.$$scope}!function(e){var n=o(e,"BuiltIn"),i=(n.$$proto,n.$$scope);!function(e,$super){function n(){}var o=n=a(e,$super,"Exist",n),i=o.$$proto,s=o.$$scope;return i.actual=r,i.$initialize=function(e){var t=this;return e=$.call(arguments,0),t.expected=e},i["$matches?"]=function(e){var n,$,o,a,i,c,u,l=this,_=r,p=r,d=r,f=r;return l.actual=e,_=(n=($=["exist?","exists?"]).$select,n.$$p=(o=function(e){var t=o.$$s||this;return null==t.actual&&(t.actual=r),null==e&&(e=r),t.actual["$respond_to?"](e)},o.$$s=l,o),n).call($),p=(n=(a=_).$map,n.$$p=(i=function(e){var t,n=i.$$s||this;return null==n.actual&&(n.actual=r),null==n.expected&&(n.expected=r),null==e&&(e=r),(t=n.actual).$__send__.apply(t,[e].concat(n.expected))},i.$$s=l,i),n).call(a),d=(n=(c=p).$map,n.$$p=(u=function(e){u.$$s||this;return null==e&&(e=r),e["$!"]()["$!"]()},u.$$s=l,u),n).call(c).$uniq(),function(){return f=d.$size(),0["$==="](f)?l.$raise(s.get("NoMethodError").$new(""+l.actual.$inspect()+" does not respond to either #exist? or #exists?")):1["$==="](f)?p.$first():l.$raise(t(t("#exist? and #exists? returned different values:\n\n"," exist?: "+p.$first()+"\n"),"exists?: "+p.$last()))}()},r&&"matches?"}(n,i.get("BaseMatcher"))}(n)}(n)}(n)},Opal.modules["rspec/matchers/built_in/has"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass;return e.add_stubs(["$__send__","$predicate","$failure_message_args_description","$join","$compact","$method_description","$args_description","$private","$to_sym","$sub","$to_s","$gsub","$empty?","$map","$inspect"]),function(t){{var a=$(t,"RSpec");a.$$proto,a.$$scope}!function(t){{var a=$(t,"Matchers");a.$$proto,a.$$scope}!function(t){{var a=$(t,"BuiltIn");a.$$proto,a.$$scope}!function(t,$super){function $(){}{var a=$=o(t,$super,"Has",$),i=a.$$proto;a.$$scope}return i.expected=i.args=n,i.$initialize=function(e,t){var n,$=this;return t=r.call(arguments,1),n=[e,t],$.expected=n[0],$.args=n[1]},i["$matches?"]=function(e){var t,n=this;return(t=e).$__send__.apply(t,[n.$predicate(n.expected)].concat(n.args))},e.defn(a,"$==",i["$matches?"]),i.$failure_message_for_should=function(){var e=this;return"expected #"+e.$predicate(e.expected)+e.$failure_message_args_description()+" to return true, got false"},i.$failure_message_for_should_not=function(){var e=this;return"expected #"+e.$predicate(e.expected)+e.$failure_message_args_description()+" to return false, got true"},i.$description=function(){var e=this;return[e.$method_description(e.expected),e.$args_description()].$compact().$join(" ")},a.$private(),i.$predicate=function(e){return(""+e.$to_s().$sub("have_","has_")+"?").$to_sym()},i.$method_description=function(e){return e.$to_s().$gsub("_"," ")},i.$args_description=function(){var e,t,r,$=this;return(e=$.args["$empty?"]())===n||e.$$is_boolean&&1!=e?(e=(t=$.args).$map,e.$$p=(r=function(e){r.$$s||this;return null==e&&(e=n),e.$inspect()},r.$$s=$,r),e).call(t).$join(", "):n},i.$failure_message_args_description=function(){var e=this,t=n;return t=e.$args_description(),t!==!1&&t!==n?"("+t+")":n},n&&"failure_message_args_description"}(a,null)}(a)}(a)}(t)},Opal.modules["rspec/matchers/built_in/include"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass;return e.add_stubs(["$perform_match","$expected_to_sentence","$none?","$is_a_matcher?","$private","$__send__","$comparing_hash_values?","$has_key?","$==","$[]","$comparing_hash_keys?","$comparing_with_matcher?","$actual","$any?","$matches?","$include?","$is_a?","$!"]),function(e){{var t=$(e,"RSpec");t.$$proto,t.$$scope}!function(e){{var t=$(e,"Matchers");t.$$proto,t.$$scope}!function(e){var t=$(e,"BuiltIn"),a=(t.$$proto,t.$$scope);!function(e,$super){function t(){}var $=t=o(e,$super,"Include",t),a=$.$$proto,i=$.$$scope;return a.actual=a.expected=n,a.$initialize=function(e){var t=this;return e=r.call(arguments,0),t.expected=e},a["$matches?"]=function(e){var t=this;return t.actual=e,t.$perform_match("all?","all?",t.actual,t.expected)},a["$does_not_match?"]=function(e){var t=this;return t.actual=e,t.$perform_match("none?","any?",t.actual,t.expected)},a.$description=function(){var e=this;return"include"+e.$expected_to_sentence()},a["$diffable?"]=function(){var e,t,r,$=this;return(e=(t=$.expected)["$none?"],e.$$p=(r=function(e){r.$$s||this;return null==e&&(e=n),i.get("RSpec").$$scope.get("Matchers")["$is_a_matcher?"](e)},r.$$s=$,r),e).call(t)},$.$private(),a.$perform_match=function(e,t,r,$){var o,a,i,s=this;return(o=(a=$).$__send__,o.$$p=(i=function(e){var $,o,a,s,c,u=i.$$s||this;return null==e&&(e=n),($=u["$comparing_hash_values?"](r,e))===n||$.$$is_boolean&&1!=$?($=u["$comparing_hash_keys?"](r,e))===n||$.$$is_boolean&&1!=$?($=u["$comparing_with_matcher?"](u.$actual(),e))===n||$.$$is_boolean&&1!=$?r["$include?"](e):($=(s=u.$actual())["$any?"],$.$$p=(c=function(t){c.$$s||this;return null==t&&(t=n),e["$matches?"](t)},c.$$s=u,c),$).call(s):r["$has_key?"](e):($=(o=e).$__send__,$.$$p=(a=function(e,t){{var $;a.$$s||this}return null==e&&(e=n),null==t&&(t=n),$=r["$has_key?"](e),$!==!1&&$!==n?r["$[]"](e)["$=="](t):$},a.$$s=u,a),$).call(o,t)},i.$$s=s,i),o).call(a,e)},a["$comparing_hash_keys?"]=function(e,t){var r;return r=e["$is_a?"](i.get("Hash")),r!==!1&&r!==n?t["$is_a?"](i.get("Hash"))["$!"]():r},a["$comparing_hash_values?"]=function(e,t){var r;return r=e["$is_a?"](i.get("Hash")),r!==!1&&r!==n?t["$is_a?"](i.get("Hash")):r},a["$comparing_with_matcher?"]=function(e,t){var r;return r=e["$is_a?"](i.get("Array")),r!==!1&&r!==n?i.get("RSpec").$$scope.get("Matchers")["$is_a_matcher?"](t):r},n&&"comparing_with_matcher?"}(t,a.get("BaseMatcher"))}(t)}(t)}(t)},Opal.modules["rspec/matchers/built_in/match"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$match"]),function(e){{var t=r(e,"RSpec");t.$$proto,t.$$scope}!function(e){{var t=r(e,"Matchers");t.$$proto,t.$$scope}!function(e){var t=r(e,"BuiltIn"),o=(t.$$proto,t.$$scope);!function(e,$super){function t(){}{var r=t=$(e,$super,"Match",t),o=r.$$proto;r.$$scope}return o.$match=function(e,t){return t.$match(e)},o["$diffable?"]=function(){return!0},n&&"diffable?"}(t,o.get("BaseMatcher"))}(t)}(t)}(t)},Opal.modules["rspec/matchers/built_in/match_array"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="warning";var n=e.top,r=e.nil,$=(e.breaker,e.slice,e.module),o=e.klass;return e.add_stubs(["$respond_to?","$difference_between_arrays","$&","$empty?","$actual","$inspect","$safe_sort","$expected","$_pretty_print","$private","$sort","$dup","$to_ary","$each","$index","$delete_at"]),function(e){{var n=$(e,"RSpec");n.$$proto,n.$$scope}!function(e){{var n=$(e,"Matchers");n.$$proto,n.$$scope}!function(e){var n=$(e,"BuiltIn"),a=(n.$$proto,n.$$scope);!function(e,$super){function n(){}{var $=n=o(e,$super,"MatchArray",n),a=$.$$proto;$.$$scope}return a.extra_items=a.missing_items=r,a.$match=function(e,t){var n,$=this;return(n=t["$respond_to?"]("to_ary"))===r||n.$$is_boolean&&1!=n?!1:($.extra_items=$.$difference_between_arrays(t,e),$.missing_items=$.$difference_between_arrays(e,t),$.extra_items["$empty?"]()["$&"]($.missing_items["$empty?"]()))},a.$failure_message_for_should=function(){var e,n=this,$=r;return(e=n.$actual()["$respond_to?"]("to_ary"))===r||e.$$is_boolean&&1!=e?$="expected an array, actual collection was "+n.$actual().$inspect():($="expected collection contained:  "+n.$safe_sort(n.$expected()).$inspect()+"\n",$=t($,"actual collection contained:    "+n.$safe_sort(n.$actual()).$inspect()+"\n"),((e=n.missing_items["$empty?"]())===r||e.$$is_boolean&&1!=e)&&($=t($,"the missing elements were:      "+n.$safe_sort(n.missing_items).$inspect()+"\n")),((e=n.extra_items["$empty?"]())===r||e.$$is_boolean&&1!=e)&&($=t($,"the extra elements were:        "+n.$safe_sort(n.extra_items).$inspect()+"\n"))),$},a.$failure_message_for_should_not=function(){return"Matcher does not support should_not"},a.$description=function(){var e=this;return"contain exactly "+e.$_pretty_print(e.$expected())},$.$private(),a.$safe_sort=function(e){try{return e.$sort()}catch(t){return e}},a.$difference_between_arrays=function(e,t){var n,$,o,a=this,i=r;return i=e.$to_ary().$dup(),(n=($=t.$to_ary()).$each,n.$$p=(o=function(e){var t,n=(o.$$s||this,r);return null==e&&(e=r),(t=n=i.$index(e))===r||t.$$is_boolean&&1!=t?r:i.$delete_at(n)},o.$$s=a,o),n).call($),i},r&&"difference_between_arrays"}(n,a.get("BaseMatcher"))}(n)}(n)}(n)},Opal.modules["rspec/matchers/built_in/raise_error"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$===","$raise_message_already_set","$respond_to?","$warn","$inspect","$call","$==","$verify_message","$eval_block","$expectation_matched?","$error_and_message_match?","$block_matches?","$prevent_invalid_expectations","$!","$matches?","$[]","$=~","$message","$expected_error","$given_error","$private","$expecting_specific_exception?","$new","$raise","$backtrace_formatter","$configuration","$format_backtrace","$backtrace","$join"]),function(t){{var o=r(t,"RSpec");o.$$proto,o.$$scope}!function(t){{var o=r(t,"Matchers");o.$$proto,o.$$scope}!function(t){{var o=r(t,"BuiltIn");o.$$proto,o.$$scope}!function(t,$super){function r(){}var o,a,i=r=$(t,$super,"RaiseError",r),s=i.$$proto,c=i.$$scope;return s.expected_message=s.block=s.actual_error=s.expected_error=s.raised_expected_error=s.with_expected_message=s.eval_block=s.eval_block_passed=n,s.$initialize=o=function(e,t){var r,$=this,a=o.$$p,i=a||n,s=n;return null==e&&(e=c.get("Exception")),null==t&&(t=n),o.$$p=null,$.block=i,$.actual_error=n,function(){return s=e,c.get("String")["$==="](s)||c.get("Regexp")["$==="](s)?(r=[c.get("Exception"),e],$.expected_error=r[0],$.expected_message=r[1]):(r=[e,t],$.expected_error=r[0],$.expected_message=r[1])}()},s.$with_message=function(e){var t,r=this;return(t=r.expected_message)===n||t.$$is_boolean&&1!=t||r.$raise_message_already_set(),r.expected_message=e,r},s["$matches?"]=a=function(t,r){var $,o,i,s=this,u=a.$$p,l=u||n;if(null==r&&(r=!1),a.$$p=null,($=s.block)!==!1&&$!==n?$:s.block=l,s.raised_expected_error=!1,s.with_expected_message=!1,s.eval_block=!1,s.eval_block_passed=!1,($=t["$respond_to?"]("call"))===n||$.$$is_boolean&&1!=$)return e.get("Kernel").$warn("`raise_error` was called with non-proc object "+t.$inspect()),!1;try{t.$call()}catch(_){if(!e.rescue(_,[c.get("Exception")]))throw _;s.actual_error=_,($=(o=s.actual_error["$=="](s.expected_error))!==!1&&o!==n?o:s.expected_error["$==="](s.actual_error))===n||$.$$is_boolean&&1!=$||(s.raised_expected_error=!0,s.with_expected_message=s.$verify_message())}return r!==!1&&r!==n||(i=s.raised_expected_error,o=i!==!1&&i!==n?s.with_expected_message:i,($=o!==!1&&o!==n?s.block:o)===n||$.$$is_boolean&&1!=$||s.$eval_block()),s["$expectation_matched?"]()},e.defn(i,"$==",s["$matches?"]),s["$expectation_matched?"]=function(){var e,t=this;return e=t["$error_and_message_match?"](),e!==!1&&e!==n?t["$block_matches?"]():e},s["$error_and_message_match?"]=function(){var e,t=this;return e=t.raised_expected_error,e!==!1&&e!==n?t.with_expected_message:e},s["$block_matches?"]=function(){var e,t=this;return(e=t.eval_block)===n||e.$$is_boolean&&1!=e?!0:t.eval_block_passed},s["$does_not_match?"]=function(e){var t=this;return t.$prevent_invalid_expectations(),t["$matches?"](e,"negative_expectation")["$!"]()},s.$eval_block=function(){var t=this,r=n;t.eval_block=!0;try{return t.block["$[]"](t.actual_error),t.eval_block_passed=!0}catch($){if(e.rescue($,[c.get("Exception")]))return r=$,t.actual_error=r;throw $}},s.$verify_message=function(){var e=this,t=n;return function(){return t=e.expected_message,n["$==="](t)?!0:c.get("Regexp")["$==="](t)?e.expected_message["$=~"](e.actual_error.$message()):e.expected_message["$=="](e.actual_error.$message())}()},s.$failure_message_for_should=function(){var e,t=this;return(e=t.eval_block)===n||e.$$is_boolean&&1!=e?"expected "+t.$expected_error()+t.$given_error():t.actual_error.$message()},s.$failure_message_for_should_not=function(){var e=this;return"expected no "+e.$expected_error()+e.$given_error()},s.$description=function(){var e=this;return"raise "+e.$expected_error()},i.$private(),s.$prevent_invalid_expectations=function(){var e,t,r=this,$=n,o=n;return(e=(t=r["$expecting_specific_exception?"]())!==!1&&t!==n?t:r.expected_message)===n||e.$$is_boolean&&1!=e?n:($=function(){return t=r["$expecting_specific_exception?"](),(e=t!==!1&&t!==n?r.expected_message:t)===n||e.$$is_boolean&&1!=e?(e=r["$expecting_specific_exception?"]())===n||e.$$is_boolean&&1!=e?(e=r.expected_message)===n||e.$$is_boolean&&1!=e?n:"`expect { }.not_to raise_error(message)`":"`expect { }.not_to raise_error(SpecificErrorClass)`":"`expect { }.not_to raise_error(SpecificErrorClass, message)`"}(),o=c.get("ArgumentError").$new(""+$+" is not valid, use `expect { }.not_to raise_error` (with no args) instead"),r.$raise(o))},s.$expected_error=function(){var e=this,t=n;return function(){return t=e.expected_message,n["$==="](t)?e.expected_error.$inspect():c.get("Regexp")["$==="](t)?""+e.expected_error+" with message matching "+e.expected_message.$inspect():""+e.expected_error+" with "+e.expected_message.$inspect()}()},s.$format_backtrace=function(e){var t=n;return t=c.get("Matchers").$configuration().$backtrace_formatter(),t.$format_backtrace(e)},s.$given_error=function(){var e,t=this,r=n;return(e=t.actual_error)===n||e.$$is_boolean&&1!=e?" but nothing was raised":(r=t.$format_backtrace(t.actual_error.$backtrace()),[", got "+t.actual_error.$inspect()+" with backtrace:"].concat(r).$join("\n  # "))},s["$expecting_specific_exception?"]=function(){var e=this;return e.expected_error["$=="](c.get("Exception"))["$!"]()},s.$raise_message_already_set=function(){var e=this;return e.$raise("`expect { }.to raise_error(message).with_message(message)` is not valid. The matcher only allows the expected message to be specified once")},n&&"raise_message_already_set"}(o,null)}(o)}(o)}(t)},Opal.modules["rspec/matchers/built_in/respond_to"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?t>=e:e["$<="](t)}e.dynamic_require_severity="warning";var r=e.top,$=e.nil,o=(e.breaker,e.slice),a=e.module,i=e.klass;return e.add_stubs(["$empty?","$find_failing_method_names","$inspect","$join","$collect","$with_arity","$sub","$failure_message_for_should","$pp_names","$private","$__send__","$respond_to?","$matches_arity?","$arity","$method","$~","$==","$nil?","$length","$first"]),function(r){{var s=a(r,"RSpec");s.$$proto,s.$$scope}!function(r){{var s=a(r,"Matchers");s.$$proto,s.$$scope}!function(r){{var s=a(r,"BuiltIn");s.$$proto,s.$$scope}!function(r,$super){function a(){}{var s=a=i(r,$super,"RespondTo",a),c=s.$$proto;s.$$scope}return c.actual=c.failing_method_names=c.names=c.expected_arity=$,c.$initialize=function(e){var t=this;return e=o.call(arguments,0),t.names=e,t.expected_arity=$},c["$matches?"]=function(e){var t=this;return t.$find_failing_method_names(e,"reject")["$empty?"]()},e.defn(s,"$==",c["$matches?"]),c["$does_not_match?"]=function(e){var t=this;return t.$find_failing_method_names(e,"select")["$empty?"]()},c.$failure_message_for_should=function(){var e,t,n,r=this;return"expected "+r.actual.$inspect()+" to respond to "+(e=(t=r.failing_method_names).$collect,e.$$p=(n=function(e){n.$$s||this;return null==e&&(e=$),e.$inspect()},n.$$s=r,n),e).call(t).$join(", ")+r.$with_arity()},c.$failure_message_for_should_not=function(){var e=this;return e.$failure_message_for_should().$sub(/to respond to/,"not to respond to")},c.$description=function(){var e=this;return"respond to "+e.$pp_names()+e.$with_arity()},c.$with=function(e){var t=this;return t.expected_arity=e,t},c.$argument=function(){var e=this;return e},e.defn(s,"$arguments",c.$argument),s.$private(),c.$find_failing_method_names=function(e,t){var n,r,o,a=this;return a.actual=e,a.failing_method_names=(n=(r=a.names).$__send__,n.$$p=(o=function(t){var n,r=o.$$s||this;return null==r.actual&&(r.actual=$),null==t&&(t=$),n=r.actual["$respond_to?"](t),n!==!1&&n!==$?r["$matches_arity?"](e,t):n},o.$$s=a,o),n).call(r,t)},c["$matches_arity?"]=function(e,r){var o,a=this,i=$;return(o=a.expected_arity)===$||o.$$is_boolean&&1!=o?!0:(i=e.$method(r).$arity(),t(i,0)?n(i["$~"](),a.expected_arity):i["$=="](a.expected_arity))},c.$with_arity=function(){var e,t=this;return(e=t.expected_arity["$nil?"]())===$||e.$$is_boolean&&1!=e?" with "+t.expected_arity+" argument"+function(){return t.expected_arity["$=="](1)?"":"s"}():""},c.$pp_names=function(){var e=this;return e.names.$length()["$=="](1)?"#"+e.names.$first():e.names.$inspect()},$&&"pp_names"}(s,null)}(s)}(s)}(r)},Opal.modules["rspec/matchers/built_in/start_and_end_with"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass;return e.add_stubs(["$==","$length","$first","$respond_to?","$raise","$new","$inspect","$subset_matches?","$element_matches?","$downcase","$sub","$last","$split","$name","$class","$[]","$-@"]),function(t){{var a=$(t,"RSpec");a.$$proto,a.$$scope}!function(t){{var a=$(t,"Matchers");a.$$proto,a.$$scope}!function(t){var a=$(t,"BuiltIn"),i=(a.$$proto,a.$$scope);!function(t,$super){function $(){}var a=$=o(t,$super,"StartAndEndWith",$),i=a.$$proto,s=a.$$scope;return i.expected=i.actual=n,i.$initialize=function(e){var t=this;return e=r.call(arguments,0),t.expected=function(){return e.$length()["$=="](1)?e.$first():e}()},i["$matches?"]=function(t){var r,$=this;$.actual=function(){return(r=t["$respond_to?"]("[]"))===n||r.$$is_boolean&&1!=r?$.$raise(s.get("ArgumentError").$new(""+t.$inspect()+" does not respond to :[]")):t}();try{return(r=$.expected["$respond_to?"]("length"))===n||r.$$is_boolean&&1!=r?$["$element_matches?"]($.expected,$.actual):$["$subset_matches?"]($.expected,$.actual)}catch(o){if(e.rescue(o,[s.get("ArgumentError")]))return $.$raise(s.get("ArgumentError").$new(""+t.$inspect()+" does not have ordered elements"));throw o}},i.$failure_message_for_should=function(){var e=this;return"expected "+e.actual.$inspect()+" to "+e.$class().$name().$split("::").$last().$sub(/With/,"").$downcase()+" with "+e.expected.$inspect()},i.$failure_message_for_should_not=function(){var e=this;return"expected "+e.actual.$inspect()+" not to "+e.$class().$name().$split("::").$last().$sub(/With/,"").$downcase()+" with "+e.expected.$inspect()},n&&"failure_message_for_should_not"}(a,i.get("BaseMatcher")),function(e,$super){function t(){}{var r=t=o(e,$super,"StartWith",t),$=r.$$proto;r.$$scope}return $.actual=$.expected=n,$["$subset_matches?"]=function(e,t){return t["$[]"](0,e.$length())["$=="](e)},$["$element_matches?"]=function(){var e=this;return e.actual["$[]"](0)["$=="](e.expected)},n&&"element_matches?"}(a,i.get("StartAndEndWith")),function(e,$super){function t(){}{var r=t=o(e,$super,"EndWith",t),$=r.$$proto;r.$$scope}return $["$subset_matches?"]=function(e,t){return t["$[]"](e.$length()["$-@"](),e.$length())["$=="](e)},$["$element_matches?"]=function(e,t){return t["$[]"](-1)["$=="](e)},n&&"element_matches?"}(a,i.get("StartAndEndWith"))}(a)}(a)}(t)},Opal.modules["rspec/matchers/built_in/satisfy"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$call"]),function(t){{var o=r(t,"RSpec");o.$$proto,o.$$scope}!function(t){{var o=r(t,"Matchers");o.$$proto,o.$$scope}!function(t){{var o=r(t,"BuiltIn");o.$$proto,o.$$scope}!function(t,$super){function r(){}{var o,a,i=r=$(t,$super,"Satisfy",r),s=i.$$proto;i.$$scope}return s.block=s.actual=n,s.$initialize=o=function(){var e=this,t=o.$$p,r=t||n;return o.$$p=null,e.block=r},s["$matches?"]=a=function(e){var t=this,r=a.$$p,$=r||n;return a.$$p=null,$!==!1&&$!==n&&(t.block=$),t.actual=e,t.block.$call(e)},e.defn(i,"$==",s["$matches?"]),s.$failure_message_for_should=function(){var e=this;return"expected "+e.actual+" to satisfy block"},s.$failure_message_for_should_not=function(){var e=this;return"expected "+e.actual+" not to satisfy block"},s.$description=function(){return"satisfy block"},n&&"description"}(o,null)}(o)}(o)}(t)},Opal.modules["rspec/matchers/built_in/throw_symbol"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="warning";var n=e.top,r=e.nil,$=(e.breaker,e.slice,e.module),o=e.klass,a=e.gvars;return e.add_stubs(["$nil?","$call","$catch","$throw","$==","$=~","$message","$raise","$to_sym","$!","$&","$expected","$caught","$private","$throw_description","$is_a?","$inspect"]),function(n){{var i=$(n,"RSpec");i.$$proto,i.$$scope}!function(n){{var i=$(n,"Matchers");i.$$proto,i.$$scope}!function(n){{var i=$(n,"BuiltIn");i.$$proto,i.$$scope}!function(n,$super){function $(){}var i=$=o(n,$super,"ThrowSymbol",$),s=i.$$proto,c=i.$$scope;return s.expected_symbol=s.caught_arg=s.caught_symbol=s.expected_arg=r,s.$initialize=function(e,t){var n=this;return null==e&&(e=r),null==t&&(t=r),n.expected_symbol=e,n.expected_arg=t,n.caught_symbol=n.caught_arg=r},s["$matches?"]=function(t){var n,$,o,i=this,s=r,u=r;try{try{return(n=i.expected_symbol["$nil?"]())===r||n.$$is_boolean&&1!=n?(i.caught_arg=(n=($=i).$catch,n.$$p=(o=function(){var e,n,$,a=o.$$s||this;return null==a.expected_symbol&&(a.expected_symbol=r),(e=(n=a).$catch,e.$$p=($=function(){var e=$.$$s||this;return t.$call(),e.$throw("proc_did_not_throw_anything","nothing_thrown")},$.$$s=a,$),e).call(n,a.expected_symbol)},o.$$s=i,o),n).call($,"proc_did_not_throw_anything"),i.caught_arg["$=="]("nothing_thrown")?i.caught_arg=r:i.caught_symbol=i.expected_symbol):t.$call()}catch(l){if(e.rescue(l,[c.get("NameError"),c.get("ArgumentError")]))return s=l,((n=s.$message()["$=~"](/uncaught throw (`|\:)([a-zA-Z0-9_]*)(')?/))===r||n.$$is_boolean&&1!=n)&&(u=s,i.$raise()),i.caught_symbol=((n=a["~"])===r?r:n["$[]"](2)).$to_sym();u=l,i.$raise()}}finally{if(u===!1||u===r)return(n=i.expected_symbol["$nil?"]())===r||n.$$is_boolean&&1!=n?(n=i.expected_arg["$nil?"]())===r||n.$$is_boolean&&1!=n?i.caught_symbol["$=="](i.expected_symbol)["$&"](i.caught_arg["$=="](i.expected_arg)):i.caught_symbol["$=="](i.expected_symbol):i.caught_symbol["$nil?"]()["$!"]()}},e.defn(i,"$==",s["$matches?"]),s.$failure_message_for_should=function(){var e=this;return"expected "+e.$expected()+" to be thrown, got "+e.$caught()},s.$failure_message_for_should_not=function(){var e,t=this;return"expected "+t.$expected("no Symbol")+function(){return(e=t.expected_symbol)===r||e.$$is_boolean&&1!=e?r:" not"}()+" to be thrown, got "+t.$caught()},s.$description=function(){var e=this;return"throw "+e.$expected()},i.$private(),s.$expected=function(e){var t,n=this;return null==e&&(e="a Symbol"),n.$throw_description((t=n.expected_symbol)!==!1&&t!==r?t:e,n.expected_arg)},s.$caught=function(){var e,t=this;return t.$throw_description((e=t.caught_symbol)!==!1&&e!==r?e:"nothing",t.caught_arg)},s.$throw_description=function(e,n){var $,o,a=this,i=r,s=r;return i=function(){return($=e["$is_a?"](c.get("String")))===r||$.$$is_boolean&&1!=$?e.$inspect():e}(),s=function(){return n!==!1&&n!==r?" with "+n.$inspect():(o=a.expected_arg,($=o!==!1&&o!==r?a.caught_symbol["$=="](a.expected_symbol):o)===r||$.$$is_boolean&&1!=$?"":" with no argument")}(),t(i,s)},r&&"throw_description"}(i,null)}(i)}(i)}(n)},Opal.modules["rspec/matchers/built_in/yield"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="warning";var n=e.top,r=e.nil,$=(e.breaker,e.slice),o=e.module,a=e.klass;return e.add_stubs(["$new","$assert_valid_expect_block!","$call","$assert_used!","$attr_accessor","$num_yields=","$yielded_args=","$num_yields","$<<","$yielded_args","$first","$===","$raise","$map","$==","$size","$arity","$probe","$send","$yielded_once?","$exactly","$set_expected_yields_count","$tap","$relativity_failure_message","$private","$human_readable_expecation_type","$human_readable_count","$empty?","$single_yield_args","$failure_reason","$zero?","$inspect","$args_match?","$positive_failure_reason","$negative_failure_reason","$join","$all_args_match?","$!","$all?","$zip","$successive_yield_args"]),function(n){{var i=o(n,"RSpec");i.$$proto,i.$$scope}!function(n){{var i=o(n,"Matchers");i.$$proto,i.$$scope}!function(n){var i=o(n,"BuiltIn"),s=(i.$$proto,i.$$scope);!function(n,$super){function o(){}var i=o=a(n,$super,"YieldProbe",o),s=i.$$proto,c=i.$$scope;return s.used=r,e.defs(i,"$probe",function(e){var t=this,n=r;return n=t.$new(),t["$assert_valid_expect_block!"](e),e.$call(n),n["$assert_used!"](),n}),i.$attr_accessor("num_yields","yielded_args"),s.$initialize=function(){var e,t=this;return t.used=!1,e=[0,[]],t["$num_yields="](e[0]),t["$yielded_args="](e[1])},s.$to_proc=function(){var e,n,o,a=this,i=r;return a.used=!0,i=a,(e=(n=c.get("Proc")).$new,e.$$p=(o=function(e){{var n;o.$$s||this}return e=$.call(arguments,0),n=i,n["$num_yields="](t(n.$num_yields(),1)),i.$yielded_args()["$<<"](e),r},o.$$s=a,o),e).call(n)},s.$single_yield_args=function(){var e=this;return e.$yielded_args().$first()},s["$yielded_once?"]=function(e){var n=this,$=r;return function(){return $=n.$num_yields(),1["$==="]($)?!0:0["$==="]($)?!1:n.$raise(t(t("The "+e+" matcher is not designed to be used with a ","method that yields multiple times. Use the yield_successive_args "),"matcher for that case."))}()},s.$successive_yield_args=function(){var e,t,n,$=this;return(e=(t=$.$yielded_args()).$map,e.$$p=(n=function(e){n.$$s||this;return null==e&&(e=r),e.$size()["$=="](1)?e.$first():e},n.$$s=$,n),e).call(t)},s["$assert_used!"]=function(){var e,n=this;return(e=n.used)===r||e.$$is_boolean&&1!=e?n.$raise(t(t(t(t("You must pass the argument yielded to your expect block on ","to the method-under-test as a block. It acts as a probe that "),"allows the matcher to detect whether or not the method-under-test "),"yields, and, if so, how many times, and what the yielded arguments "),"are.")):r},e.defs(i,"$assert_valid_expect_block!",function(e){var n=this;return e.$arity()["$=="](1)?r:n.$raise(t("Your expect block must accept an argument to be used with this ","matcher. Pass the argument as a block on to the method you are testing."))}),r&&"assert_valid_expect_block!"}(i,null),function(e,$super){function t(){}var n=t=a(e,$super,"YieldControl",t),$=n.$$proto,o=n.$$scope;return $.expectation_type=$.expected_yields_count=r,$.$initialize=function(){var e=this;return e.expectation_type=r,e.expected_yields_count=r},$["$matches?"]=function(e){var t,n=this,$=r;return $=o.get("YieldProbe").$probe(e),(t=n.expectation_type)===r||t.$$is_boolean&&1!=t?$["$yielded_once?"]("yield_control"):$.$num_yields().$send(n.expectation_type,n.expected_yields_count)},$.$once=function(){var e=this;return e.$exactly(1),e},$.$twice=function(){var e=this;return e.$exactly(2),e},$.$exactly=function(e){var t=this;return t.$set_expected_yields_count("==",e),t},$.$at_most=function(e){var t=this;return t.$set_expected_yields_count("<=",e),t},$.$at_least=function(e){var t=this;return t.$set_expected_yields_count(">=",e),t},$.$times=function(){var e=this;return e},$.$failure_message_for_should=function(){var e,t,n,$=this;return(e=(t="expected given block to yield control").$tap,e.$$p=(n=function(e){var t=n.$$s||this;return null==e&&(e=r),e["$<<"](t.$relativity_failure_message())},n.$$s=$,n),e).call(t)},$.$failure_message_for_should_not=function(){var e,t,n,$=this;return(e=(t="expected given block not to yield control").$tap,e.$$p=(n=function(e){var t=n.$$s||this;return null==e&&(e=r),e["$<<"](t.$relativity_failure_message())},n.$$s=$,n),e).call(t)},n.$private(),$.$set_expected_yields_count=function(e,t){var n=this,$=r;return n.expectation_type=e,n.expected_yields_count=function(){return $=t,o.get("Numeric")["$==="]($)?t:"once"["$==="]($)?1:"twice"["$==="]($)?2:r}()},$.$relativity_failure_message=function(){var e,t=this;return(e=t.expected_yields_count)===r||e.$$is_boolean&&1!=e?"":" "+t.$human_readable_expecation_type()+t.$human_readable_count()},$.$human_readable_expecation_type=function(){var e=this,t=r;return function(){return t=e.expectation_type,"<="["$==="](t)?"at most ":">="["$==="](t)?"at least ":""}()},$.$human_readable_count=function(){var e=this,t=r;return function(){return t=e.expected_yields_count,1["$==="](t)?"once":2["$==="](t)?"twice":""+e.expected_yields_count+" times"}()},r&&"human_readable_count"}(i,s.get("BaseMatcher")),function(e,$super){function t(){}var n=t=a(e,$super,"YieldWithNoArgs",t),$=n.$$proto,o=n.$$scope;return $.probe=r,$["$matches?"]=function(e){var t,n=this;return n.probe=o.get("YieldProbe").$probe(e),t=n.probe["$yielded_once?"]("yield_with_no_args"),t!==!1&&t!==r?n.probe.$single_yield_args()["$empty?"]():t},$.$failure_message_for_should=function(){var e=this;return"expected given block to yield with no arguments, but "+e.$failure_reason()},$.$failure_message_for_should_not=function(){return"expected given block not to yield with no arguments, but did"},n.$private(),$.$failure_reason=function(){var e,t=this;return(e=t.probe.$num_yields()["$zero?"]())===r||e.$$is_boolean&&1!=e?"yielded with arguments: "+t.probe.$single_yield_args().$inspect():"did not yield"},r&&"failure_reason"}(i,s.get("BaseMatcher")),function(n,$super){function o(){}var i=o=a(n,$super,"YieldWithArgs",o),s=i.$$proto,c=i.$$scope;return s.probe=s.expected=s.positive_args_failure=s.actual=r,s.$initialize=function(e){var t=this;return e=$.call(arguments,0),t.expected=e},s["$matches?"]=function(e){var t,n=this;return n.probe=c.get("YieldProbe").$probe(e),n.actual=n.probe.$single_yield_args(),t=n.probe["$yielded_once?"]("yield_with_args"),t!==!1&&t!==r?n["$args_match?"]():t},e.defn(i,"$==",s["$matches?"]),s.$failure_message_for_should=function(){var e=this;return"expected given block to yield with arguments, but "+e.$positive_failure_reason()},s.$failure_message_for_should_not=function(){var e=this;return"expected given block not to yield with arguments, but "+e.$negative_failure_reason()},s.$description=function(){var e,n,$,o=this,a=r;return a="yield with args",((e=o.expected["$empty?"]())===r||e.$$is_boolean&&1!=e)&&a["$<<"](t(t("(",(e=(n=o.expected).$map,e.$$p=($=function(e){$.$$s||this;return null==e&&(e=r),e.$inspect()},$.$$s=o,$),e).call(n).$join(", ")),")")),a},i.$private(),s.$positive_failure_reason=function(){var e,t=this;return(e=t.probe.$num_yields()["$zero?"]())===r||e.$$is_boolean&&1!=e?t.positive_args_failure:"did not yield"},s.$negative_failure_reason=function(){var e,n=this;return(e=n["$all_args_match?"]())===r||e.$$is_boolean&&1!=e?"did":t(t("yielded with expected arguments","\nexpected not: "+n.expected.$inspect()),"\n         got: "+n.actual.$inspect()+" (compared using === and ==)")},s["$args_match?"]=function(){var e,n=this,$=r;return(e=n.expected["$empty?"]())===r||e.$$is_boolean&&1!=e?(((e=$=n["$all_args_match?"]())===r||e.$$is_boolean&&1!=e)&&(n.positive_args_failure=t(t("yielded with unexpected arguments","\nexpected: "+n.expected.$inspect()),"\n     got: "+n.actual.$inspect()+" (compared using === and ==)")),$):((e=n.actual["$empty?"]())===r||e.$$is_boolean&&1!=e||(n.positive_args_failure="yielded with no arguments"),n.actual["$empty?"]()["$!"]())},s["$all_args_match?"]=function(){var e,t,n,$=this;return(e=$.expected.$size()["$=="]($.actual.$size())["$!"]())===r||e.$$is_boolean&&1!=e?(e=(t=$.expected.$zip($.actual))["$all?"],e.$$p=(n=function(e,t){{var $;
n.$$s||this}return null==e&&(e=r),null==t&&(t=r),($=e["$==="](t))!==!1&&$!==r?$:t["$=="](e)},n.$$s=$,n),e).call(t):!1},r&&"all_args_match?"}(i,null),function(n,$super){function o(){}var i=o=a(n,$super,"YieldSuccessiveArgs",o),s=i.$$proto,c=i.$$scope;return s.probe=s.expected=s.actual=r,s.$initialize=function(e){var t=this;return e=$.call(arguments,0),t.expected=e},s["$matches?"]=function(e){var t=this;return t.probe=c.get("YieldProbe").$probe(e),t.actual=t.probe.$successive_yield_args(),t["$args_match?"]()},e.defn(i,"$==",s["$matches?"]),s.$failure_message_for_should=function(){var e=this;return t(t("expected given block to yield successively with arguments, but yielded with unexpected arguments","\nexpected: "+e.expected.$inspect()),"\n     got: "+e.actual.$inspect()+" (compared using === and ==)")},s.$failure_message_for_should_not=function(){var e=this;return t(t("expected given block not to yield successively with arguments, but yielded with expected arguments","\nexpected not: "+e.expected.$inspect()),"\n         got: "+e.actual.$inspect()+" (compared using === and ==)")},s.$description=function(){var e,n,$,o=this,a=r;return a="yield successive args",a["$<<"](t(t("(",(e=(n=o.expected).$map,e.$$p=($=function(e){$.$$s||this;return null==e&&(e=r),e.$inspect()},$.$$s=o,$),e).call(n).$join(", ")),")")),a},i.$private(),s["$args_match?"]=function(){var e,t,n,$=this;return(e=$.expected.$size()["$=="]($.actual.$size())["$!"]())===r||e.$$is_boolean&&1!=e?(e=(t=$.expected.$zip($.actual))["$all?"],e.$$p=(n=function(e,t){{var $;n.$$s||this}return null==e&&(e=r),null==t&&(t=r),($=e["$==="](t))!==!1&&$!==r?$:t["$=="](e)},n.$$s=$,n),e).call(t):!1},r&&"args_match?"}(i,null)}(i)}(i)}(n)},Opal.modules["rspec/matchers/built_in"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.range;return e.add_stubs(["$require","$autoload","$respond_to?"]),function(e){{var t=r(e,"RSpec");t.$$proto,t.$$scope}!function(e){{var t=r(e,"Matchers");t.$$proto,t.$$scope}!function(e){{var t,o=r(e,"BuiltIn");o.$$proto,o.$$scope}o.$require("rspec/matchers/built_in/base_matcher"),o.$autoload("BeAnInstanceOf","rspec/matchers/built_in/be_instance_of"),o.$autoload("Be","rspec/matchers/built_in/be"),o.$autoload("BeTruthy","rspec/matchers/built_in/be"),o.$autoload("BeFalsey","rspec/matchers/built_in/be"),o.$autoload("BeNil","rspec/matchers/built_in/be"),o.$autoload("BeComparedTo","rspec/matchers/built_in/be"),o.$autoload("BePredicate","rspec/matchers/built_in/be"),o.$autoload("BeAKindOf","rspec/matchers/built_in/be_kind_of"),o.$autoload("BeWithin","rspec/matchers/built_in/be_within"),o.$autoload("Change","rspec/matchers/built_in/change"),(t=$(1,2,!1)["$respond_to?"]("cover?"))===n||t.$$is_boolean&&1!=t||o.$autoload("Cover","rspec/matchers/built_in/cover"),o.$autoload("Eq","rspec/matchers/built_in/eq"),o.$autoload("Eql","rspec/matchers/built_in/eql"),o.$autoload("Equal","rspec/matchers/built_in/equal"),o.$autoload("Exist","rspec/matchers/built_in/exist"),o.$autoload("Has","rspec/matchers/built_in/has"),o.$autoload("Have","rspec/matchers/built_in/have"),o.$autoload("Include","rspec/matchers/built_in/include"),o.$autoload("Match","rspec/matchers/built_in/match"),o.$autoload("MatchArray","rspec/matchers/built_in/match_array"),o.$autoload("RaiseError","rspec/matchers/built_in/raise_error"),o.$autoload("RespondTo","rspec/matchers/built_in/respond_to"),o.$autoload("StartWith","rspec/matchers/built_in/start_and_end_with"),o.$autoload("EndWith","rspec/matchers/built_in/start_and_end_with"),o.$autoload("Satisfy","rspec/matchers/built_in/satisfy"),o.$autoload("ThrowSymbol","rspec/matchers/built_in/throw_symbol"),o.$autoload("YieldControl","rspec/matchers/built_in/yield"),o.$autoload("YieldWithArgs","rspec/matchers/built_in/yield"),o.$autoload("YieldWithNoArgs","rspec/matchers/built_in/yield"),o.$autoload("YieldSuccessiveArgs","rspec/matchers/built_in/yield")}(t)}(t)}(t)},Opal.modules["rspec/matchers/matcher"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>=t:e["$>="](t)}e.dynamic_require_severity="warning";var n=e.top,r=e.nil,$=(e.breaker,e.slice),o=e.module,a=e.klass;return e.add_stubs(["$require","$define_user_override","$actual_arg_for","$define_method","$to_proc","$private","$__send__","$lambda","$name_to_sentence","$expected_to_sentence","$inspect","$actual","$include","$extend","$attr_reader","$attr_accessor","$class_exec","$new","$name","$class","$to_f","$respond_to?","$matcher_execution_context","$zero?","$arity"]),n.$require("set"),function(n){{var i=o(n,"RSpec");i.$$proto,i.$$scope}!function(n){{var i=o(n,"Matchers");i.$$proto,i.$$scope}!function(n){{var i=o(n,"DSL");i.$$proto,i.$$scope}!function(t){var n,a,i,s,c,u,l,_,p=o(t,"Macros"),d=p.$$proto,f=p.$$scope;e.defn(p,"$match",n=function(){var t,$,o,a=this,i=n.$$p,s=i||r;return n.$$p=null,(t=($=a).$define_user_override,t.$$p=(o=function(t){var $=o.$$s||this;null==t&&(t=r);try{return $.actual=t,e.find_iter_super_dispatcher($,"match",o.$$def||n,null).apply($,[].concat($.$actual_arg_for(s)))}catch(a){if(e.rescue(a,[f.get("RSpec").$$scope.get("Expectations").$$scope.get("ExpectationNotMetError")]))return!1;throw a}},o.$$s=a,o),t).call($,"matches?",s)}),e.defn(p,"$match_for_should",d.$match),e.defn(p,"$match_for_should_not",a=function(){var t,n,$,o=this,i=a.$$p,s=i||r;return a.$$p=null,(t=(n=o).$define_user_override,t.$$p=($=function(t){var n=$.$$s||this;return null==t&&(t=r),n.actual=t,e.find_iter_super_dispatcher(n,"match_for_should_not",$.$$def||a,null).apply(n,[].concat(n.$actual_arg_for(s)))},$.$$s=o,$),t).call(n,"does_not_match?",s)}),e.defn(p,"$match_unless_raises",i=function(t){var n,$,o,a=this,s=i.$$p,c=s||r;return null==t&&(t=f.get("Exception")),i.$$p=null,(n=($=a).$define_user_override,n.$$p=(o=function(n){var $=o.$$s||this;null==n&&(n=r),$.actual=n;try{return e.find_iter_super_dispatcher($,"match_unless_raises",o.$$def||i,null).apply($,[].concat($.$actual_arg_for(c)))}catch(a){if(e.rescue(a,[t]))return $.rescued_exception=a,!1}},o.$$s=a,o),n).call($,"matches?",c)}),e.defn(p,"$failure_message_for_should",s=function(){var e=this,t=s.$$p,n=t||r;return s.$$p=null,e.$define_user_override("failure_message_for_should",n)}),e.defn(p,"$failure_message_for_should_not",c=function(){var e=this,t=c.$$p,n=t||r;return c.$$p=null,e.$define_user_override("failure_message_for_should_not",n)}),e.defn(p,"$description",u=function(){var e=this,t=u.$$p,n=t||r;return u.$$p=null,e.$define_user_override("description",n)}),e.defn(p,"$diffable",function(){var e,t,n,r=this;return(e=(t=r).$define_method,e.$$p=(n=function(){n.$$s||this;return!0},n.$$s=r,n),e).call(t,"diffable?")}),e.defn(p,"$chain",l=function(t){var n,o,a,i=this,s=l.$$p,c=s||r;return l.$$p=null,(n=(o=i).$define_user_override,n.$$p=(a=function(t){var n,o=a.$$s||this;return t=$.call(arguments,0),n=a.$$p||r,a.$$p=null,e.find_iter_super_dispatcher(o,"chain",a.$$def||l,null).apply(o,[].concat(t).concat(n.$to_proc())),o},a.$$s=i,a),n).call(o,t,c)}),p.$private(),e.defn(p,"$define_user_override",_=function(t,n){var $,o,a,i,s,c=this,u=_.$$p,l=u||r;return null==c.user_method_defs&&(c.user_method_defs=r),_.$$p=null,($=(o=c.user_method_defs).$__send__,$.$$p=n.$to_proc(),$).call(o,"define_method",t),($=l)!==!1&&$!==r?$:l=(a=(i=c).$lambda,a.$$p=(s=function(){var t=s.$$s||this;return e.find_iter_super_dispatcher(t,"define_user_override",s.$$def||_,null).apply(t,[].concat(t.$actual_arg_for(n)))},s.$$s=c,s),a).call(i),($=(a=c).$define_method,$.$$p=l.$to_proc(),$).call(a,t)})}(i),function(t){{var n=o(t,"DefaultImplementations");n.$$proto,n.$$scope}e.defn(n,"$diffable?",function(){return!1}),e.defn(n,"$description",function(){var e=this;return""+e.$name_to_sentence()+e.$expected_to_sentence()}),e.defn(n,"$failure_message_for_should",function(){var e=this;return"expected "+e.$actual().$inspect()+" to "+e.$name_to_sentence()+e.$expected_to_sentence()}),e.defn(n,"$failure_message_for_should_not",function(){var e=this;return"expected "+e.$actual().$inspect()+" not to "+e.$name_to_sentence()+e.$expected_to_sentence()})}(i),function(n,$super){function o(){}var i,s,c,u=o=a(n,$super,"Matcher",o),l=u.$$proto,_=u.$$scope;return l.actual=r,u.$include(_.get("DefaultImplementations")),u.$include(_.get("RSpec").$$scope.get("Matchers")),u.$include(_.get("RSpec").$$scope.get("Matchers").$$scope.get("Pretty")),u.$extend(_.get("Macros")),u.$attr_reader("expected","actual","rescued_exception"),u.$attr_accessor("matcher_execution_context"),l.$initialize=function(e,t,n){var o,a,i=this;return n=$.call(arguments,2),i.name=e,i.actual=r,i.expected=n,(o=(a=function(e){{var t=e.$$scope;e.$$proto}return e.$include(e.user_method_defs=t.get("Module").$new()),e}(i.$singleton_class())).$class_exec,o.$$p=t.$to_proc(),o).apply(a,[].concat(n))},l.$inspect=function(){var e=this;return"#<"+e.$class().$name()+" "+e.$name()+">"},t(_.get("RUBY_VERSION").$to_f(),1.9)?l["$respond_to_missing?"]=i=function(t,n){var o,a=$.call(arguments,0),s=this,c=i.$$p;return null==n&&(n=!1),i.$$p=null,(o=e.find_super_dispatcher(s,"respond_to_missing?",i,c).apply(s,a))!==!1&&o!==r?o:s.$matcher_execution_context()["$respond_to?"](t,n)}:l["$respond_to?"]=s=function(t,n){var o,a=$.call(arguments,0),i=this,c=s.$$p;return null==n&&(n=!1),s.$$p=null,(o=e.find_super_dispatcher(i,"respond_to?",s,c).apply(i,a))!==!1&&o!==r?o:i.$matcher_execution_context()["$respond_to?"](t,n)},u.$private(),l.$actual_arg_for=function(e){var t,n=this;return(t=e.$arity()["$zero?"]())===r||t.$$is_boolean&&1!=t?[n.actual]:[]},l.$method_missing=c=function(t,n){var o,a,i=this,s=c.$$p,u=s||r;return n=$.call(arguments,1),c.$$p=null,(o=i.$matcher_execution_context()["$respond_to?"](t))===r||o.$$is_boolean&&1!=o?e.find_super_dispatcher(i,"method_missing",c,null).apply(i,[t].concat(n).concat(u.$to_proc())):(o=(a=i.$matcher_execution_context()).$__send__,o.$$p=u.$to_proc(),o).apply(a,[t].concat(n))},r&&"method_missing"}(i,null)}(i)}(i)}(n)},Opal.modules["rspec/matchers/operator_matcher"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="warning";var n=e.top,r=e.nil,$=(e.breaker,e.slice,e.module),o=e.klass,a=e.hash2;return e.add_stubs(["$registry","$[]","$[]=","$delete","$each","$ancestors","$define_method","$uses_generic_implementation_of?","$get","$class","$__send__","$last_should","$new","$eval_match","$sub","$!","$==","$respond_to?","$raise","$use_custom_matcher_or_delegate","$fail_with","$inspect","$private","$owner","$method_handle_for","$last_matcher=","$__delegate_operator","$include?","$fail_with_message","$gsub"]),function(n){{var i=$(n,"RSpec");i.$$proto,i.$$scope}!function(n){{var i=$(n,"Matchers");i.$$proto,i.$$scope}!function(n,$super){function $(){}var i,s,c,u=$=o(n,$super,"OperatorMatcher",$),l=u.$$proto,_=u.$$scope;return l.expected=l.actual=l.operator=r,function(t){t.$$scope,t.$$proto;return t.$$proto.$registry=function(){var e,t=this;return null==t.registry&&(t.registry=r),(e=t.registry)!==!1&&e!==r?e:t.registry=a([],{})},t.$$proto.$register=function(e,t,n){var $,o,i,s=this;return $=e,o=s.$registry(),(i=o["$[]"]($))!==!1&&i!==r?i:o["$[]="]($,a([],{})),s.$registry()["$[]"](e)["$[]="](t,n)},t.$$proto.$unregister=function(e,t){var n,$=this;return n=$.$registry()["$[]"](e),n!==!1&&n!==r?$.$registry()["$[]"](e).$delete(t):n},t.$$proto.$get=function(t,n){try{var $,o,a,i=this;return($=(o=t.$ancestors()).$each,$.$$p=(a=function(t){var $,o=a.$$s||this,i=r;return null==t&&(t=r),$=o.$registry()["$[]"](t),i=$!==!1&&$!==r?o.$registry()["$[]"](t)["$[]"](n):$,i===!1||i===r?r:void e.ret(i)},a.$$s=i,a),$).call(o),r}catch(s){if(s===e.returner)return s.$v;throw s}},r&&"get"}(u.$singleton_class()),l.$initialize=function(e){var t=this;return t.actual=e},e.defs(u,"$use_custom_matcher_or_delegate",function(n){var $,o,a,i,s,c=this,u=r;return($=(o=c).$define_method,$.$$p=(a=function(t){var $,o,i=a.$$s||this,s=r;return null==i.actual&&(i.actual=r),null==t&&(t=r),o=i["$uses_generic_implementation_of?"](n),($=o!==!1&&o!==r?s=_.get("OperatorMatcher").$get(i.actual.$class(),n):o)===r||$.$$is_boolean&&1!=$?i.$eval_match(i.actual,n,t):i.actual.$__send__(e.get("RSpec").$$scope.get("Matchers").$last_should(),s.$new(t))},a.$$s=c,a),$).call(o,n),u=n.$sub(/^=/,"!"),i=u["$=="](n)["$!"](),($=i!==!1&&i!==r?c["$respond_to?"](u):i)===r||$.$$is_boolean&&1!=$?r:($=(i=c).$define_method,$.$$p=(s=function($){var o=s.$$s||this,a=r;return null==$&&($=r),a=function(){return e.get("RSpec").$$scope.get("Matchers").$last_should()["$=="]("should")?"should_not":"should"}(),o.$raise(t("RSpec does not support `"+e.get("RSpec").$$scope.get("Matchers").$last_should()+" "+u+" expected`.  ","Use `"+a+" "+n+" expected` instead."))},s.$$s=c,s),$).call(i,u)}),(i=(s=["==","===","=~",">",">=","<","<="]).$each,i.$$p=(c=function(e){var t=c.$$s||this;return null==e&&(e=r),t.$use_custom_matcher_or_delegate(e)},c.$$s=u,c),i).call(s),l.$fail_with_message=function(e){var t=this;return _.get("RSpec").$$scope.get("Expectations").$fail_with(e,t.expected,t.actual)},l.$description=function(){var e=this;return""+e.operator+" "+e.expected.$inspect()},u.$private(),l["$uses_generic_implementation_of?"]=function(t){var n=this;try{return _.get("Expectations").$method_handle_for(n.actual,t).$owner()["$=="](e.get("Kernel"))}catch(r){if(e.rescue(r,[_.get("NameError")]))return!1;throw r}},l.$eval_match=function(t,n,r){var $,o,a=this;return $=[a],o=e.get("RSpec").$$scope.get("Matchers"),o["$last_matcher="].apply(o,$),$[$.length-1],$=[n,r],a.operator=$[0],a.expected=$[1],a.$__delegate_operator(t,n,r)},r&&"eval_match"}(i,null),function(e){var t=$(e,"BuiltIn"),n=(t.$$proto,t.$$scope);!function(e,$super){function t(){}{var n=t=o(e,$super,"PositiveOperatorMatcher",t),$=n.$$proto;n.$$scope}return $.$__delegate_operator=function(e,t,n){var $,o=this;return($=e.$__send__(t,n))===r||$.$$is_boolean&&1!=$?o.$fail_with_message(($=["==","===","=~"]["$include?"](t))===r||$.$$is_boolean&&1!=$?"expected: "+t+" "+n.$inspect()+"\n     got: "+t.$gsub(/./," ")+" "+e.$inspect():"expected: "+n.$inspect()+"\n     got: "+e.$inspect()+" (using "+t+")"):!0},r&&"__delegate_operator"}(t,n.get("OperatorMatcher")),function(e,$super){function t(){}{var n=t=o(e,$super,"NegativeOperatorMatcher",t),$=n.$$proto;n.$$scope}return $.$__delegate_operator=function(e,t,n){var $,o=this;return($=e.$__send__(t,n))===r||$.$$is_boolean&&1!=$?!1:o.$fail_with_message("expected not: "+t+" "+n.$inspect()+"\n         got: "+t.$gsub(/./," ")+" "+e.$inspect())},r&&"__delegate_operator"}(t,n.get("OperatorMatcher"))}(i)}(i)}(n)},Opal.modules["rspec/matchers/generated_descriptions"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module);return e.add_stubs(["$attr_accessor","$last_matcher=","$last_should=","$nil?","$last_should","$gsub","$to_s","$last_description","$private","$respond_to?","$last_matcher","$description"]),function(t){{var $=r(t,"RSpec");$.$$proto,$.$$scope}!function(t){{var $=r(t,"Matchers");$.$$proto,$.$$scope}!function(e){e.$$scope,e.$$proto;return e.$attr_accessor("last_matcher","last_should")}($.$singleton_class()),e.defs($,"$clear_generated_description",function(){var e,t,r=this;return e=[n],t=r,t["$last_matcher="].apply(t,e),e[e.length-1],e=[n],t=r,t["$last_should="].apply(t,e),e[e.length-1]}),e.defs($,"$generated_description",function(){var e,t=this;return(e=t.$last_should()["$nil?"]())===n||e.$$is_boolean&&1!=e?""+t.$last_should().$to_s().$gsub("_"," ")+" "+t.$last_description():n}),$.$private(),e.defs($,"$last_description",function(){var e,t=this;return(e=t.$last_matcher()["$respond_to?"]("description"))===n||e.$$is_boolean&&1!=e?"When you call a matcher in an example without a String, like this:\n\nspecify { object.should matcher }\n\nor this:\n\nit { should matcher }\n\nRSpec expects the matcher to have a #description method. You should either\nadd a String to the example this matcher is being used in, or give it a\ndescription method. Then you won't have to suffer this lengthy warning again.\n":t.$last_matcher().$description()})}($)}(t)},Opal.modules["rspec/matchers/method_missing"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module;return e.add_stubs(["$private","$=~","$to_s","$new","$to_proc"]),function(t){{var o=$(t,"RSpec");o.$$proto,o.$$scope}!function(t){var o,a=$(t,"Matchers"),i=(a.$$proto,a.$$scope);a.$private(),e.defn(a,"$method_missing",o=function(t,$){var a,s,c,u=r.call(arguments,0),l=this,_=o.$$p,p=_||n;return $=r.call(arguments,1),o.$$p=null,(a=t.$to_s()["$=~"](/^be_/))===n||a.$$is_boolean&&1!=a?(a=t.$to_s()["$=~"](/^have_/))===n||a.$$is_boolean&&1!=a?e.find_super_dispatcher(l,"method_missing",o,_).apply(l,u):(a=(c=i.get("Matchers").$$scope.get("BuiltIn").$$scope.get("Has")).$new,a.$$p=p.$to_proc(),a).apply(c,[t].concat($)):(a=(s=i.get("Matchers").$$scope.get("BuiltIn").$$scope.get("BePredicate")).$new,a.$$p=p.$to_proc(),a).apply(s,[t].concat($))})}(o)}(t)},Opal.modules["rspec/matchers/compatibility"]=function(e){e.dynamic_require_severity="warning";{var t,n,r,$=e.top,o=e,a=e.nil;e.breaker,e.slice}return e.add_stubs(["$each","$===","$const_get","$any?","$include?","$public_instance_methods","$class_exec","$alias_method","$constants"]),(t=(n=o.get("RSpec").$$scope.get("Matchers").$constants()).$each,t.$$p=(r=function(e){var t,n,$,i,s,c,u,l,_,p=r.$$s||this,d=a;return null==e&&(e=a),(t=o.get("Class")["$==="](d=o.get("RSpec").$$scope.get("Matchers").$const_get(e)))===a||t.$$is_boolean&&1!=t?a:((t=(n=($=d.$public_instance_methods())["$any?"],n.$$p=(i=function(e){i.$$s||this;return null==e&&(e=a),["failure_message_for_should","failure_message_for_should"]["$include?"](e)},i.$$s=p,i),n).call($))===a||t.$$is_boolean&&1!=t||(t=(n=d).$class_exec,t.$$p=(s=function(){var e=s.$$s||this;return e.$alias_method("failure_message","failure_message_for_should")},s.$$s=p,s),t).call(n),(t=(c=(u=d.$public_instance_methods())["$any?"],c.$$p=(l=function(e){l.$$s||this;return null==e&&(e=a),["failure_message_for_should_not","failure_message_for_should_not"]["$include?"](e)},l.$$s=p,l),c).call(u))===a||t.$$is_boolean&&1!=t?a:(t=(c=d).$class_exec,t.$$p=(_=function(){var e=_.$$s||this;return e.$alias_method("negative_failure_message","failure_message_for_should_not")},_.$$s=p,_),t).call(c))},r.$$s=$,r),t).call(n)},Opal.modules["rspec/matchers/test_unit_integration"]=function(e){e.dynamic_require_severity="warning";{var t,n=(e.top,e),r=e.nil;e.breaker,e.slice}return e.add_stubs(["$send"]),(t=function(){try{return null!=n.get("MiniTest").$$scope.get("Unit").$$scope.get("TestCase")?"constant":r}catch(t){if(t.$$class===e.NameError)return r;throw t}}())===r||t.$$is_boolean&&1!=t||n.get("MiniTest").$$scope.get("Unit").$$scope.get("TestCase").$send("include",n.get("RSpec").$$scope.get("Matchers")),(t=function(){try{return null!=n.get("Test").$$scope.get("Unit").$$scope.get("TestCase")?"constant":r}catch(t){if(t.$$class===e.NameError)return r;throw t}}())===r||t.$$is_boolean&&1!=t?r:n.get("Test").$$scope.get("Unit").$$scope.get("TestCase").$send("include",n.get("RSpec").$$scope.get("Matchers"))},Opal.modules["rspec/matchers"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.range;return e.add_stubs(["$require","$===","$respond_to?","$new","$alias_method","$empty?","$equal","$be_a_kind_of","$to_proc","$register"]),t.$require("rspec/matchers/pretty"),t.$require("rspec/matchers/built_in"),t.$require("rspec/matchers/matcher"),t.$require("rspec/matchers/operator_matcher"),t.$require("rspec/matchers/generated_descriptions"),t.$require("rspec/matchers/method_missing"),t.$require("rspec/matchers/compatibility"),t.$require("rspec/matchers/dsl"),t.$require("rspec/matchers/test_unit_integration"),function(t){{var a=$(t,"RSpec");a.$$proto,a.$$scope}!function(t){var a,i,s,c,u=$(t,"Matchers"),l=(u.$$proto,u.$$scope);e.defs(u,"$is_a_matcher?",function(t){var r;return(r=e.get("RSpec").$$scope.get("Matchers").$$scope.get("BuiltIn").$$scope.get("BaseMatcher")["$==="](t))===n||r.$$is_boolean&&1!=r?(r=t["$respond_to?"]("i_respond_to_everything_so_im_not_really_a_matcher"))===n||r.$$is_boolean&&1!=r?(r=t["$respond_to?"]("matches?"))===n||r.$$is_boolean&&1!=r?!1:(r=t["$respond_to?"]("failure_message_for_should"))!==!1&&r!==n?r:t["$respond_to?"]("failure_message"):!1:!0}),e.defn(u,"$be_truthy",function(){return l.get("BuiltIn").$$scope.get("BeTruthy").$new()}),e.defn(u,"$be_falsey",function(){return l.get("BuiltIn").$$scope.get("BeFalsey").$new()}),u.$alias_method("be_falsy","be_falsey"),e.defn(u,"$be_nil",function(){return l.get("BuiltIn").$$scope.get("BeNil").$new()}),e.defn(u,"$be",function(e){var t,$=this;return e=r.call(arguments,0),(t=e["$empty?"]())===n||t.$$is_boolean&&1!=t?(t=$).$equal.apply(t,[].concat(e)):l.get("Matchers").$$scope.get("BuiltIn").$$scope.get("Be").$new()}),e.defn(u,"$be_a",function(e){var t=this;return t.$be_a_kind_of(e)}),u.$alias_method("be_an","be_a"),e.defn(u,"$be_an_instance_of",function(e){return l.get("BuiltIn").$$scope.get("BeAnInstanceOf").$new(e)}),u.$alias_method("be_instance_of","be_an_instance_of"),e.defn(u,"$be_a_kind_of",function(e){return l.get("BuiltIn").$$scope.get("BeAKindOf").$new(e)}),u.$alias_method("be_kind_of","be_a_kind_of"),e.defn(u,"$be_within",function(e){return l.get("BuiltIn").$$scope.get("BeWithin").$new(e)}),e.defn(u,"$change",a=function(e,t){var r,$,o=a.$$p,i=o||n;return null==e&&(e=n),null==t&&(t=n),a.$$p=null,(r=($=l.get("BuiltIn").$$scope.get("Change")).$new,r.$$p=i.$to_proc(),r).call($,e,t)}),(i=o(1,2,!1)["$respond_to?"]("cover?"))===n||i.$$is_boolean&&1!=i||e.defn(u,"$cover",function(e){var t;return e=r.call(arguments,0),(t=l.get("BuiltIn").$$scope.get("Cover")).$new.apply(t,[].concat(e))}),e.defn(u,"$end_with",function(e){var t;return e=r.call(arguments,0),(t=l.get("BuiltIn").$$scope.get("EndWith")).$new.apply(t,[].concat(e))}),e.defn(u,"$eq",function(e){return l.get("BuiltIn").$$scope.get("Eq").$new(e)}),e.defn(u,"$eql",function(e){return l.get("BuiltIn").$$scope.get("Eql").$new(e)}),e.defn(u,"$equal",function(e){return l.get("BuiltIn").$$scope.get("Equal").$new(e)}),e.defn(u,"$exist",function(e){var t;return e=r.call(arguments,0),(t=l.get("BuiltIn").$$scope.get("Exist")).$new.apply(t,[].concat(e))}),e.defn(u,"$include",function(e){var t;return e=r.call(arguments,0),(t=l.get("BuiltIn").$$scope.get("Include")).$new.apply(t,[].concat(e))}),e.defn(u,"$match",function(e){return l.get("BuiltIn").$$scope.get("Match").$new(e)}),u.$alias_method("match_regex","match"),e.defn(u,"$raise_error",s=function(e,t){var r,$,o=s.$$p,a=o||n;return null==e&&(e=l.get("Exception")),null==t&&(t=n),s.$$p=null,(r=($=l.get("BuiltIn").$$scope.get("RaiseError")).$new,r.$$p=a.$to_proc(),r).call($,e,t)}),u.$alias_method("raise_exception","raise_error"),e.defn(u,"$respond_to",function(e){var t;return e=r.call(arguments,0),(t=l.get("BuiltIn").$$scope.get("RespondTo")).$new.apply(t,[].concat(e))}),e.defn(u,"$satisfy",c=function(){var e,t,r=c.$$p,$=r||n;return c.$$p=null,(e=(t=l.get("BuiltIn").$$scope.get("Satisfy")).$new,e.$$p=$.$to_proc(),e).call(t)}),e.defn(u,"$start_with",function(e){var t;return e=r.call(arguments,0),(t=l.get("BuiltIn").$$scope.get("StartWith")).$new.apply(t,[].concat(e))}),e.defn(u,"$throw_symbol",function(e,t){return null==e&&(e=n),null==t&&(t=n),l.get("BuiltIn").$$scope.get("ThrowSymbol").$new(e,t)}),e.defn(u,"$yield_control",function(){return l.get("BuiltIn").$$scope.get("YieldControl").$new()}),e.defn(u,"$yield_with_no_args",function(){return l.get("BuiltIn").$$scope.get("YieldWithNoArgs").$new()}),e.defn(u,"$yield_with_args",function(e){var t;return e=r.call(arguments,0),(t=l.get("BuiltIn").$$scope.get("YieldWithArgs")).$new.apply(t,[].concat(e))}),e.defn(u,"$yield_successive_args",function(e){var t;return e=r.call(arguments,0),(t=l.get("BuiltIn").$$scope.get("YieldSuccessiveArgs")).$new.apply(t,[].concat(e))}),e.defn(u,"$match_array",function(e){return l.get("BuiltIn").$$scope.get("MatchArray").$new(e)}),l.get("OperatorMatcher").$register(l.get("Enumerable"),"=~",l.get("BuiltIn").$$scope.get("MatchArray"))}(a)}(t)},Opal.modules["rspec/expectations/expectation_target"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="warning";var n=e.top,r=e.nil,$=(e.breaker,e.slice),o=e.module,a=e.klass,i=e.hash2;return e.add_stubs(["$attr_accessor","$prevent_operator_matchers","$handle_matcher","$to_proc","$deprecated_should_enabled?","$deprecate","$should","$should_not","$deprecated_should_enabled=","$remove_method","$private","$raise"]),function(n){{var s=o(n,"RSpec");s.$$proto,s.$$scope}!function(n){{var s=o(n,"Expectations");s.$$proto,s.$$scope}!function(n,$super){function o(){}var s,c,u=o=a(n,$super,"ExpectationTarget",o),l=u.$$proto,_=u.$$scope;return l.target=r,function(e){e.$$scope,e.$$proto;return e.$attr_accessor("deprecated_should_enabled"),e.$$proto["$deprecated_should_enabled?"]=e.$$proto.$deprecated_should_enabled}(u.$singleton_class()),l.$initialize=function(e){var t=this;return t.target=e},l.$to=s=function(e,t){var n,$,o=this,a=s.$$p,i=a||r;return null==e&&(e=r),null==t&&(t=r),s.$$p=null,o.$prevent_operator_matchers("to",e),(n=($=_.get("RSpec").$$scope.get("Expectations").$$scope.get("PositiveExpectationHandler")).$handle_matcher,n.$$p=i.$to_proc(),n).call($,o.target,e,t)},l.$not_to=c=function(e,t){var n,$,o=this,a=c.$$p,i=a||r;return null==e&&(e=r),null==t&&(t=r),c.$$p=null,o.$prevent_operator_matchers("not_to",e),(n=($=_.get("RSpec").$$scope.get("Expectations").$$scope.get("NegativeExpectationHandler")).$handle_matcher,n.$$p=i.$to_proc(),n).call($,o.target,e,t)},e.defn(u,"$to_not",l.$not_to),e.defs(u,"$enable_deprecated_should",function(){var e,t,n=this;return(e=n["$deprecated_should_enabled?"]())===r||e.$$is_boolean&&1!=e?(l.$should=function(e){var t,n=this;return null==n.target&&(n.target=r),e=$.call(arguments,0),_.get("RSpec").$deprecate("`expect { }.should`",i(["replacement"],{replacement:"`expect { }.to`"})),(t=n.target).$should.apply(t,[].concat(e))},l.$should_not=function(e){var t,n=this;return null==n.target&&(n.target=r),e=$.call(arguments,0),_.get("RSpec").$deprecate("`expect { }.should_not`",i(["replacement"],{replacement:"`expect { }.not_to`"})),(t=n.target).$should_not.apply(t,[].concat(e))},e=[!0],t=n,t["$deprecated_should_enabled="].apply(t,e),e[e.length-1]):r}),e.defs(u,"$disable_deprecated_should",function(){var e,t,n=this;return(e=n["$deprecated_should_enabled?"]())===r||e.$$is_boolean&&1!=e?r:(n.$remove_method("should"),n.$remove_method("should_not"),e=[!1],t=n,t["$deprecated_should_enabled="].apply(t,e),e[e.length-1])}),u.$private(),l.$prevent_operator_matchers=function(e,n){var $=this;return n!==!1&&n!==r?r:$.$raise(_.get("ArgumentError"),t("The expect syntax does not support operator matchers, ","so you must pass a matcher to `#"+e+"`."))},r&&"prevent_operator_matchers"}(s,null)}(s)}(n)},Opal.modules["rspec/expectations/syntax"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.hash2;return e.add_stubs(["$extend","$last","$ancestors","$deprecate","$should_enabled?","$module_exec","$warn_about_should_unless_configured","$handle_matcher","$to_proc","$expect_enabled?","$enable_deprecated_should","$default_should_host","$disable_deprecated_should","$<<","$==","$size","$raise","$new","$first","$method_defined?","$positive_expression","$expression_generator","$negative_expression"]),function(t){{var a=$(t,"RSpec");a.$$proto,a.$$scope}!function(t){{var a=$(t,"Expectations");a.$$proto,a.$$scope}!function(t){var a=$(t,"Syntax"),i=a.$$proto,s=a.$$scope;a.$extend(a),e.defn(a,"$default_should_host",function(){var t,r=this;return null==r.default_should_host&&(r.default_should_host=n),(t=r.default_should_host)!==!1&&t!==n?t:r.default_should_host=e.get("Object").$ancestors().$last()}),e.defs(a,"$warn_about_should!",function(){var e=this;return e.warn_about_should=!0}),e.defs(a,"$warn_about_should_unless_configured",function(e){var t,r=this;return null==r.warn_about_should&&(r.warn_about_should=n),(t=r.warn_about_should)===n||t.$$is_boolean&&1!=t?n:(s.get("RSpec").$deprecate("Using `"+e+"` from rspec-expectations' old `:should` syntax without explicitly enabling the syntax",o(["replacement"],{replacement:"the new `:expect` syntax or explicitly enable `:should`"})),r.warn_about_should=!1)}),e.defn(a,"$enable_should",function(t){var r,$,o,a=this;return null==t&&(t=a.$default_should_host()),a.warn_about_should=!1,(r=a["$should_enabled?"](t))===n||r.$$is_boolean&&1!=r?((r=($=t).$module_exec,r.$$p=(o=function(){var t,r,$=o.$$s||this;return e.defn($,"$should",t=function(r,$){var o,a,i=this,s=t.$$p,c=s||n;return null==r&&(r=n),null==$&&($=n),t.$$p=null,e.get("RSpec").$$scope.get("Expectations").$$scope.get("Syntax").$warn_about_should_unless_configured("should"),(o=(a=e.get("RSpec").$$scope.get("Expectations").$$scope.get("PositiveExpectationHandler")).$handle_matcher,o.$$p=c.$to_proc(),o).call(a,i,r,$)}),e.defn($,"$should_not",r=function(t,$){var o,a,i=this,s=r.$$p,c=s||n;return null==t&&(t=n),null==$&&($=n),r.$$p=null,e.get("RSpec").$$scope.get("Expectations").$$scope.get("Syntax").$warn_about_should_unless_configured("should_not"),(o=(a=e.get("RSpec").$$scope.get("Expectations").$$scope.get("NegativeExpectationHandler")).$handle_matcher,o.$$p=c.$to_proc(),o).call(a,i,t,$)}),n&&"should_not"},o.$$s=a,o),r).call($),(r=a["$expect_enabled?"]())===n||r.$$is_boolean&&1!=r?n:e.get("RSpec").$$scope.get("Expectations").$$scope.get("ExpectationTarget").$enable_deprecated_should()):n}),e.defn(a,"$disable_should",function(t){var r,$,o,a=this;return null==t&&(t=a.$default_should_host()),(r=a["$should_enabled?"](t))===n||r.$$is_boolean&&1!=r?n:((r=($=t).$module_exec,r.$$p=(o=function(){o.$$s||this;return delete i.$should,delete i.$should_not},o.$$s=a,o),r).call($),e.get("RSpec").$$scope.get("Expectations").$$scope.get("ExpectationTarget").$disable_deprecated_should())}),e.defn(a,"$enable_expect",function(t){var $,o,a,i=this;return null==t&&(t=e.get("RSpec").$$scope.get("Matchers")),($=i["$expect_enabled?"](t))===n||$.$$is_boolean&&1!=$?(($=(o=t).$module_exec,$.$$p=(a=function(){var t,$=a.$$s||this;return e.defn($,"$expect",t=function($){var o=this,a=t.$$p,i=a||n;return $=r.call(arguments,0),t.$$p=null,i!==n&&$["$<<"](i),$.$size()["$=="](1)||o.$raise(s.get("ArgumentError").$new("You must pass an argument or a block to #expect but not both.")),e.get("RSpec").$$scope.get("Expectations").$$scope.get("ExpectationTarget").$new($.$first())}),n&&"expect"},a.$$s=i,a),$).call(o),($=i["$should_enabled?"]())===n||$.$$is_boolean&&1!=$?n:e.get("RSpec").$$scope.get("Expectations").$$scope.get("ExpectationTarget").$enable_deprecated_should()):n}),e.defn(a,"$disable_expect",function(t){var r,$,o,a=this;return null==t&&(t=e.get("RSpec").$$scope.get("Matchers")),(r=a["$expect_enabled?"](t))===n||r.$$is_boolean&&1!=r?n:((r=($=t).$module_exec,r.$$p=(o=function(){o.$$s||this;return delete i.$expect},o.$$s=a,o),r).call($),e.get("RSpec").$$scope.get("Expectations").$$scope.get("ExpectationTarget").$disable_deprecated_should())}),e.defn(a,"$should_enabled?",function(e){var t=this;return null==e&&(e=t.$default_should_host()),e["$method_defined?"]("should")}),e.defn(a,"$expect_enabled?",function(t){return null==t&&(t=e.get("RSpec").$$scope.get("Matchers")),t["$method_defined?"]("expect")}),e.defn(a,"$positive_expression",function(e,t){var n=this;return n.$expression_generator().$positive_expression(e,t)}),e.defn(a,"$negative_expression",function(e,t){var n=this;return n.$expression_generator().$negative_expression(e,t)}),e.defn(a,"$expression_generator",function(){var e,t=this;return s.get((e=t["$expect_enabled?"]())===n||e.$$is_boolean&&1!=e?"ShouldExpressionGenerator":"ExpectExpressionGenerator")}),function(t){{var n=$(t,"ShouldExpressionGenerator");n.$$proto,n.$$scope}e.defs(n,"$positive_expression",function(e,t){return""+e+".should "+t}),e.defs(n,"$negative_expression",function(e,t){return""+e+".should_not "+t})}(a),function(t){{var n=$(t,"ExpectExpressionGenerator");n.$$proto,n.$$scope}e.defs(n,"$positive_expression",function(e,t){return"expect("+e+").to "+t}),e.defs(n,"$negative_expression",function(e,t){return"expect("+e+").not_to "+t})}(a)}(a)}(a)}(t)},Opal.modules["rspec/matchers/configuration"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass;return e.add_stubs(["$require","$include?","$Array","$enable_expect","$disable_expect","$enable_should","$disable_should","$should_enabled?","$<<","$expect_enabled?","$respond_to?","$color_enabled?","$configuration","$attr_writer","$each","$syntax=","$warn_about_should!","$new","$reset_syntaxes_to_default"]),t.$require("rspec/expectations/syntax"),function(t){{var a=$(t,"RSpec");
a.$$proto,a.$$scope}!function(t){var a=$(t,"Matchers"),i=(a.$$proto,a.$$scope);!function(t,$super){function $(){}var a,i,s,c=$=o(t,$super,"Configuration",$),u=c.$$proto,l=c.$$scope;return u.color=u.backtrace_formatter=n,u["$syntax="]=function(e){var t,r=this;return(t=r.$Array(e)["$include?"]("expect"))===n||t.$$is_boolean&&1!=t?l.get("Expectations").$$scope.get("Syntax").$disable_expect():l.get("Expectations").$$scope.get("Syntax").$enable_expect(),(t=r.$Array(e)["$include?"]("should"))===n||t.$$is_boolean&&1!=t?l.get("Expectations").$$scope.get("Syntax").$disable_should():l.get("Expectations").$$scope.get("Syntax").$enable_should()},u.$syntax=function(){var e,t=n;return t=[],(e=l.get("Expectations").$$scope.get("Syntax")["$should_enabled?"]())===n||e.$$is_boolean&&1!=e||t["$<<"]("should"),(e=l.get("Expectations").$$scope.get("Syntax")["$expect_enabled?"]())===n||e.$$is_boolean&&1!=e||t["$<<"]("expect"),t},(a=e.get("RSpec")["$respond_to?"]("configuration"))===n||a.$$is_boolean&&1!=a?(c.$attr_writer("color"),u["$color?"]=function(){var e=this;return e.color}):u["$color?"]=function(){return e.get("RSpec").$configuration()["$color_enabled?"]()},u.$add_should_and_should_not_to=function(e){var t,$,o,a=this;return e=r.call(arguments,0),(t=($=e).$each,t.$$p=(o=function(e){o.$$s||this;return null==e&&(e=n),l.get("Expectations").$$scope.get("Syntax").$enable_should(e)},o.$$s=a,o),t).call($)},c.$attr_writer("backtrace_formatter"),u.$backtrace_formatter=function(){var t,r,$=this;return(t=$.backtrace_formatter)!==!1&&t!==n?t:$.backtrace_formatter=function(){return(r=function(){try{return null!=e.get("RSpec").$$scope.get("Core").$$scope.get("BacktraceFormatter")?"constant":n}catch(t){if(t.$$class===e.NameError)return n;throw t}}())===n||r.$$is_boolean&&1!=r?l.get("NullBacktraceFormatter"):e.get("RSpec").$$scope.get("Core").$$scope.get("BacktraceFormatter")}()},u.$reset_syntaxes_to_default=function(){var e,t,n=this;return e=[["should","expect"]],t=n,t["$syntax="].apply(t,e),e[e.length-1],l.get("RSpec").$$scope.get("Expectations").$$scope.get("Syntax")["$warn_about_should!"]()},e.cdecl(l,"NullBacktraceFormatter",(a=(i=l.get("Module")).$new,a.$$p=(s=function(){var t=s.$$s||this;return e.defs(t,"$format_backtrace",function(e){return e}),n&&"format_backtrace"},s.$$s=c,s),a).call(i))}(a,null),e.defs(a,"$configuration",function(){var e,t=this;return null==t.configuration&&(t.configuration=n),(e=t.configuration)!==!1&&e!==n?e:t.configuration=i.get("Configuration").$new()}),a.$configuration().$reset_syntaxes_to_default()}(a)}(t)},Opal.modules["rspec/expectations/fail_with"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="warning";var n=e.top,r=e.nil,$=(e.breaker,e.slice),o=e.module;return e.add_stubs(["$new","$!","$raise","$all_strings?","$any_multiline_strings?","$<<","$diff_as_string","$differ","$coerce_to_string","$no_procs?","$no_numbers?","$diff_as_object","$private","$none?","$===","$flatten","$all?","$any?","$multiline?","$join","$diffably_stringify","$map","$inspect","$gsub","$to_s","$method_defined?","$include?","$encode","$encoding"]),function(e){{var n=o(e,"RSpec");n.$$proto,n.$$scope}!function(e){{var n=o(e,"Expectations");n.$$proto,n.$$scope}!function(e){{var n=e.$$scope;e.$$proto}return e.$$proto.$differ=function(){var e,t=this;return null==t.differ&&(t.differ=r),(e=t.differ)!==!1&&e!==r?e:t.differ=n.get("Differ").$new()},e.$$proto.$fail_with=function(e,$,o){var a,i,s=this;return null==$&&($=r),null==o&&(o=r),(a=e["$!"]())===r||a.$$is_boolean&&1!=a||s.$raise(n.get("ArgumentError"),t("Failure message is nil. Does your matcher define the ","appropriate failure_message_for_* method to return a string?")),(a=(i=o!==!1&&o!==r)?$:i)===r||a.$$is_boolean&&1!=a||((a=s["$all_strings?"](o,$))===r||a.$$is_boolean&&1!=a?(i=s["$no_procs?"](o,$),(a=i!==!1&&i!==r?s["$no_numbers?"](o,$):i)===r||a.$$is_boolean&&1!=a||e["$<<"]("\nDiff:")["$<<"](s.$differ().$diff_as_object(o,$))):(a=s["$any_multiline_strings?"](o,$))===r||a.$$is_boolean&&1!=a||e["$<<"]("\nDiff:")["$<<"](s.$differ().$diff_as_string(s.$coerce_to_string(o),s.$coerce_to_string($)))),s.$raise(n.get("RSpec").$$scope.get("Expectations").$$scope.get("ExpectationNotMetError").$new(e))},e.$private(),e.$$proto["$no_procs?"]=function(e){var t,o,a,i=this;return e=$.call(arguments,0),(t=(o=e.$flatten())["$none?"],t.$$p=(a=function(e){a.$$s||this;return null==e&&(e=r),n.get("Proc")["$==="](e)},a.$$s=i,a),t).call(o)},e.$$proto["$all_strings?"]=function(e){var t,o,a,i=this;return e=$.call(arguments,0),(t=(o=e.$flatten())["$all?"],t.$$p=(a=function(e){a.$$s||this;return null==e&&(e=r),n.get("String")["$==="](e)},a.$$s=i,a),t).call(o)},e.$$proto["$any_multiline_strings?"]=function(e){var t,n,o,a,i,s=this;return e=$.call(arguments,0),t=(n=s)["$all_strings?"].apply(n,[].concat(e)),t!==!1&&t!==r?(o=(a=e.$flatten())["$any?"],o.$$p=(i=function(e){var t=i.$$s||this;return null==e&&(e=r),t["$multiline?"](e)},i.$$s=s,i),o).call(a):t},e.$$proto["$no_numbers?"]=function(e){var t,o,a,i=this;return e=$.call(arguments,0),(t=(o=e.$flatten())["$none?"],t.$$p=(a=function(e){a.$$s||this;return null==e&&(e=r),n.get("Numeric")["$==="](e)},a.$$s=i,a),t).call(o)},e.$$proto.$coerce_to_string=function(e){var t,$=this;return(t=n.get("Array")["$==="](e))===r||t.$$is_boolean&&1!=t?e:$.$diffably_stringify(e).$join("\n")},e.$$proto.$diffably_stringify=function(e){var t,$,o,a=this;return(t=($=e).$map,t.$$p=(o=function(e){{var t;o.$$s||this}return null==e&&(e=r),(t=n.get("Array")["$==="](e))===r||t.$$is_boolean&&1!=t?e.$to_s().$gsub("\n","\\n"):e.$inspect()},o.$$s=a,o),t).call($)},($a=n.get("String")["$method_defined?"]("encoding"))===r||$a.$$is_boolean&&1!=$a?(e.$$proto["$multiline?"]=function(e){return e["$include?"]("\n")},r&&"multiline?"):(e.$$proto["$multiline?"]=function(e){return e["$include?"]("\n".$encode(e.$encoding()))},r&&"multiline?")}(n.$singleton_class())}(n)}(n)},Opal.modules["rspec/expectations/errors"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass;return function(t){{var o=r(t,"RSpec");o.$$proto,o.$$scope}!function(t){var o,a=r(t,"Expectations"),i=(a.$$proto,a.$$scope);(o=function(){try{return null!=i.get("Test").$$scope.get("Unit").$$scope.get("AssertionFailedError")?"constant":n}catch(t){if(t.$$class===e.NameError)return n;throw t}}())===n||o.$$is_boolean&&1!=o?!function(e,$super){function t(){}{var r=t=$(e,$super,"ExpectationNotMetError",t);r.$$proto,r.$$scope}return n}(a,e.get("StandardError")):!function(e,$super){function t(){}{var r=t=$(e,$super,"ExpectationNotMetError",t);r.$$proto,r.$$scope}return n}(a,i.get("Test").$$scope.get("Unit").$$scope.get("AssertionFailedError"))}(o)}(t)},Opal.modules["rspec/expectations/handler"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$nil?","$respond_to?","$warn","$join","$inspect","$check_message","$last_should=","$last_matcher=","$new","$matches?","$to_proc","$call","$failure_message_for_should","$failure_message","$diffable?","$fail_with","$expected","$actual","$!","$does_not_match?","$failure_message_for_should_not","$negative_failure_message"]),function(t){{var o=r(t,"RSpec");o.$$proto,o.$$scope}!function(t){var o=r(t,"Expectations"),a=(o.$$proto,o.$$scope);!function(t,$super){function r(){}{var o=r=$(t,$super,"ExpectationHandler",r);o.$$proto,o.$$scope}return e.defs(o,"$check_message",function(t){var r,$,o;return(r=($=(o=t["$nil?"]())!==!1&&o!==n?o:t["$respond_to?"]("to_str"))!==!1&&$!==n?$:t["$respond_to?"]("call"))===n||r.$$is_boolean&&1!=r?e.get("Kernel").$warn(["WARNING: ignoring the provided expectation message argument (",t.$inspect(),") since it is not a string or a proc."].$join()):n}),n&&"check_message"}(o,null),function(t,$super){function r(){}{var o,a=r=$(t,$super,"PositiveExpectationHandler",r);a.$$proto,a.$$scope}return e.defs(a,"$handle_matcher",o=function(t,r,$){var a,i,s,c=this,u=o.$$p,l=u||n,_=n;return null==$&&($=n),o.$$p=null,c.$check_message($),a=["should"],i=e.get("RSpec").$$scope.get("Matchers"),i["$last_should="].apply(i,a),a[a.length-1],a=[r],i=e.get("RSpec").$$scope.get("Matchers"),i["$last_matcher="].apply(i,a),a[a.length-1],(a=r["$nil?"]())===n||a.$$is_boolean&&1!=a?(_=(a=(i=r)["$matches?"],a.$$p=l.$to_proc(),a).call(i,t),_!==!1&&_!==n?_:((a=$["$respond_to?"]("call"))===n||a.$$is_boolean&&1!=a||($=$.$call()),(a=$)!==!1&&a!==n?a:$=function(){return(s=r["$respond_to?"]("failure_message_for_should"))===n||s.$$is_boolean&&1!=s?r.$failure_message():r.$failure_message_for_should()}(),s=r["$respond_to?"]("diffable?"),(a=s!==!1&&s!==n?r["$diffable?"]():s)===n||a.$$is_boolean&&1!=a?e.get("RSpec").$$scope.get("Expectations").$fail_with($):e.get("RSpec").$$scope.get("Expectations").$fail_with($,r.$expected(),r.$actual()))):e.get("RSpec").$$scope.get("Matchers").$$scope.get("BuiltIn").$$scope.get("PositiveOperatorMatcher").$new(t)}),n&&"handle_matcher"}(o,a.get("ExpectationHandler")),function(t,$super){function r(){}{var o,a=r=$(t,$super,"NegativeExpectationHandler",r);a.$$proto,a.$$scope}return e.defs(a,"$handle_matcher",o=function(t,r,$){var a,i,s,c,u=this,l=o.$$p,_=l||n,p=n;return null==$&&($=n),o.$$p=null,u.$check_message($),a=["should_not"],i=e.get("RSpec").$$scope.get("Matchers"),i["$last_should="].apply(i,a),a[a.length-1],a=[r],i=e.get("RSpec").$$scope.get("Matchers"),i["$last_matcher="].apply(i,a),a[a.length-1],(a=r["$nil?"]())===n||a.$$is_boolean&&1!=a?(p=function(){return(a=r["$respond_to?"]("does_not_match?"))===n||a.$$is_boolean&&1!=a?(a=(s=r)["$matches?"],a.$$p=_.$to_proc(),a).call(s,t):(a=(i=r)["$does_not_match?"],a.$$p=_.$to_proc(),a).call(i,t)["$!"]()}(),p===!1||p===n?p:((a=$["$respond_to?"]("call"))===n||a.$$is_boolean&&1!=a||($=$.$call()),(a=$)!==!1&&a!==n?a:$=function(){return(c=r["$respond_to?"]("failure_message_for_should_not"))===n||c.$$is_boolean&&1!=c?r.$negative_failure_message():r.$failure_message_for_should_not()}(),c=r["$respond_to?"]("diffable?"),(a=c!==!1&&c!==n?r["$diffable?"]():c)===n||a.$$is_boolean&&1!=a?e.get("RSpec").$$scope.get("Expectations").$fail_with($):e.get("RSpec").$$scope.get("Expectations").$fail_with($,r.$expected(),r.$actual()))):e.get("RSpec").$$scope.get("Matchers").$$scope.get("BuiltIn").$$scope.get("NegativeOperatorMatcher").$new(t)}),n&&"handle_matcher"}(o,a.get("ExpectationHandler"))}(o)}(t)},Opal.modules["rspec/expectations/version"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=(e.nil,e.breaker,e.slice,e.module);return function(t){{var r=n(t,"RSpec");r.$$proto,r.$$scope}!function(t){{var r=n(t,"Expectations");r.$$proto,r.$$scope}!function(t){var r=n(t,"Version"),$=(r.$$proto,r.$$scope);e.cdecl($,"STRING","3.0.0.beta1")}(r)}(r)}(t)},Opal.modules.pp=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?t>=e:e["$<="](t)}e.dynamic_require_severity="warning";var n=e.top,r=e.nil,$=(e.breaker,e.slice),o=e.module;return e.add_stubs(["$inspect","$each","$length","$[]"]),function(n){{var a,i=o(n,"Kernel"),s=i.$$proto;i.$$scope}e.defn(i,"$pretty_inspect",function(){var e=this;return e.$inspect()}),(a="undefined"==typeof console||"undefined"==typeof console.log)===r||a.$$is_boolean&&1!=a?e.defn(i,"$pp",function(e){var n,o,a,i=this;return e=$.call(arguments,0),(n=(o=e).$each,n.$$p=(a=function(e){a.$$s||this;return null==e&&(e=r),console.log(e)},a.$$s=i,a),n).call(o),t(e.$length(),1)?e["$[]"](0):e}):e.defn(i,"$pp",s.$p)}(n)},Opal.modules["rspec/expectations/differ"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="warning";var r=e.top,$=e.nil,o=(e.breaker,e.slice,e.module),a=e.klass,i=e.hash2;return e.add_stubs(["$require","$pick_encoding","$matching_encoding","$map!","$chomp","$split","$diff","$empty?","$each","$new","$context_lines","$file_length_difference","$overlaps?","$respond_to?","$merge","$unshift","$<<","$to_s","$format","$color_diff","$!","$==","$encoding","$object_to_string","$diff_as_string","$protected","$color","$color?","$configuration","$join","$map","$chr","$[]","$===","$green","$red","$blue","$lines","$singleline_pp","$sort_by","$keys","$=~","$inspect","$pp","$private","$method_defined?","$compatible?","$default_external","$encode"]),r.$require("diff/lcs"),r.$require("diff/lcs/hunk"),r.$require("pp"),function(r){{var s=o(r,"RSpec");s.$$proto,s.$$scope}!function(r){{var s=o(r,"Expectations");s.$$proto,s.$$scope}!function(r,$super){function o(){}var s,c=o=a(r,$super,"Differ",o),u=c.$$proto,l=c.$$scope;return u.$diff_as_string=function(r,o){var a,i,s,c,u,_,p,d=this,f=$,h=$,m=$,g=$,v=$,b=$,y=$,x=$;try{return f=d.$pick_encoding(r,o),h=d.$matching_encoding("",f),m=(a=(i=o.$split(d.$matching_encoding("\n",f)))["$map!"],a.$$p=(s=function(e){s.$$s||this;return null==e&&(e=$),e.$chomp()},s.$$s=d,s),a).call(i),g=(a=(c=r.$split(d.$matching_encoding("\n",f)))["$map!"],a.$$p=(u=function(e){u.$$s||this;return null==e&&(e=$),e.$chomp()},u.$$s=d,u),a).call(c),v=l.get("Diff").$$scope.get("LCS").$diff(m,g),(a=v["$empty?"]())===$||a.$$is_boolean&&1!=a?(b=y=$,x=0,(a=(_=v).$each,a.$$p=(p=function(e){var n,r,o=p.$$s||this;null==e&&(e=$);try{return y=l.get("Diff").$$scope.get("LCS").$$scope.get("Hunk").$new(m,g,e,o.$context_lines(),x),x=y.$file_length_difference(),b===!1||b===$?$:(r=t(o.$context_lines(),0),(n=r!==!1&&r!==$?y["$overlaps?"](b):r)===$||n.$$is_boolean&&1!=n?h["$<<"](o.$matching_encoding(b.$diff(o.$format()).$to_s(),f)):(n=y["$respond_to?"]("merge"))===$||n.$$is_boolean&&1!=n?y.$unshift(b):y.$merge(b))}finally{b=y,h["$<<"](o.$matching_encoding("\n",f))}},p.$$s=d,p),a).call(_),h["$<<"](d.$matching_encoding(b.$diff(d.$format()).$to_s(),f)),h["$<<"](d.$matching_encoding("\n",f)),d.$color_diff(h)):h}catch(w){if(e.rescue(w,[l.get("Encoding").$$scope.get("CompatibilityError")]))return(a=r.$encoding()["$=="](o.$encoding())["$!"]())===$||a.$$is_boolean&&1!=a?"Could not produce a diff because of the encoding of the string ("+o.$encoding()+")":n("Could not produce a diff because the encoding of the actual string ("+o.$encoding()+") ","differs from the encoding of the expected string ("+r.$encoding()+")");throw w}},u.$diff_as_object=function(e,t){var n,r=this,o=$,a=$,i=$;return o=r.$object_to_string(e),a=r.$object_to_string(t),(n=i=r.$diff_as_string(o,a))===$||n.$$is_boolean&&1!=n?$:r.$color_diff(i)},c.$protected(),u.$format=function(){return"unified"},u.$context_lines=function(){return 3},u.$color=function(e,t){return"e["+t+"m"+e+"e[0m"},u.$red=function(e){var t=this;return t.$color(e,31)},u.$green=function(e){var t=this;return t.$color(e,32)},u.$blue=function(e){var t=this;return t.$color(e,34)},u.$color_diff=function(e){var t,n,r,o=this;return(t=l.get("RSpec").$$scope.get("Matchers").$configuration()["$color?"]())===$||t.$$is_boolean&&1!=t?e:(t=(n=e.$lines()).$map,t.$$p=(r=function(e){var t=r.$$s||this,n=$;return null==e&&(e=$),function(){return n=e["$[]"](0).$chr(),"+"["$==="](n)?t.$green(e):"-"["$==="](n)?t.$red(e):"@"["$==="](n)&&e["$[]"](1).$chr()["$=="]("@")?t.$blue(e):e}()},r.$$s=o,r),t).call(n).$join()},u.$object_to_string=function(e){var t,n,r,o,a,i,s=this,c=$;return function(){return c=e,l.get("Hash")["$==="](c)?(t=(n=(o=(a=e.$keys()).$sort_by,o.$$p=(i=function(e){i.$$s||this;return null==e&&(e=$),e.$to_s()},i.$$s=s,i),o).call(a)).$map,t.$$p=(r=function(t){var n=r.$$s||this,o=$,a=$,i=$;return null==t&&(t=$),o=l.get("PP").$singleline_pp(t,""),a=l.get("PP").$singleline_pp(e["$[]"](t),""),i=n.$pick_encoding(o,a),n.$matching_encoding(""+o+" => "+a,i)},r.$$s=s,r),t).call(n).$join(",\n"):l.get("String")["$==="](c)?(t=e["$=~"](/\n/))===$||t.$$is_boolean&&1!=t?e.$inspect():e:l.get("PP").$pp(e,"")}()},c.$private(),(s=l.get("String")["$method_defined?"]("encoding"))===$||s.$$is_boolean&&1!=s?(u.$pick_encoding=function(){return $},u.$matching_encoding=function(e){return e},$&&"matching_encoding"):(u.$pick_encoding=function(e,t){var n;return(n=l.get("Encoding")["$compatible?"](e,t))!==!1&&n!==$?n:l.get("Encoding").$default_external()},u.$matching_encoding=function(t,n){try{return t.$encode(n)}catch(r){if(e.rescue(r,[l.get("Encoding").$$scope.get("UndefinedConversionError")]))return t.$encode(n,i(["undef"],{undef:"replace"}));throw r}},$&&"matching_encoding")}(s,null)}(s)}(r)},Opal.modules["rspec/expectations"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>=t:e["$>="](t)}e.dynamic_require_severity="warning";var n=e.top,r=e.nil,$=(e.breaker,e.slice,e.module);return e.add_stubs(["$require","$instance_method","$to_i","$call","$bind","$===","$method"]),n.$require("rspec/support/caller_filter"),n.$require("rspec/support/warnings"),n.$require("rspec/expectations/extensions"),n.$require("rspec/matchers"),n.$require("rspec/expectations/expectation_target"),n.$require("rspec/matchers/configuration"),n.$require("rspec/expectations/fail_with"),n.$require("rspec/expectations/errors"),n.$require("rspec/expectations/handler"),n.$require("rspec/expectations/version"),n.$require("rspec/expectations/differ"),function(n){{var o=$(n,"RSpec");o.$$proto,o.$$scope}!function(n){var o=$(n,"Expectations"),a=(o.$$proto,o.$$scope);e.cdecl(a,"KERNEL_METHOD_METHOD",e.get("Kernel").$instance_method("method")),t(a.get("RUBY_VERSION").$to_i(),2)?e.defs(o,"$method_handle_for",function(e,t){return a.get("KERNEL_METHOD_METHOD").$bind(e).$call(t)}):e.defs(o,"$method_handle_for",function(t,n){var $;return($=e.get("Kernel")["$==="](t))===r||$.$$is_boolean&&1!=$?t.$method(n):a.get("KERNEL_METHOD_METHOD").$bind(t).$call(n)})}(o)}(n)},Opal.modules.stringio=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>=t:e["$>="](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function $(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.dynamic_require_severity="warning";var o=e.top,a=e,i=e.nil,s=(e.breaker,e.slice,e.klass),c=e.range;return e.add_stubs(["$include","$new","$call","$close","$attr_accessor","$length","$include?","$!","$check_readable","$==","$===","$raise","$seek","$enum_for","$eof?","$ord","$[]","$check_writable","$String","$write","$closed_write?","$closed_read?"]),function(o,$super){function a(){}var u,l,_,p=a=s(o,$super,"StringIO",a),d=p.$$proto,f=p.$$scope;return d.position=d.string=d.closed=i,p.$include(f.get("IO").$$scope.get("Readable")),p.$include(f.get("IO").$$scope.get("Writable")),e.defs(p,"$open",u=function(e,t){var n=this,r=u.$$p,$=r||i,o=i,a=i;return null==e&&(e=""),null==t&&(t=i),u.$$p=null,o=n.$new(e,t),a=$.$call(o),o.$close(),a}),p.$attr_accessor("string"),d.$initialize=function(e,t){var n,r,$=this;return null==e&&(e=""),null==t&&(t="rw"),$.string=e,$.position=e.$length(),r=t["$include?"]("r"),(n=r!==!1&&r!==i?t["$include?"]("w")["$!"]():r)===i||n.$$is_boolean&&1!=n?(r=t["$include?"]("w"),(n=r!==!1&&r!==i?t["$include?"]("r")["$!"]():r)===i||n.$$is_boolean&&1!=n?i:$.closed="read"):$.closed="write"},d["$eof?"]=function(){var e=this;return e.$check_readable(),e.position["$=="](e.string.$length())},e.defn(p,"$eof",d["$eof?"]),d.$seek=function(e,o){var a=this,s=i;return null==o&&(o=f.get("IO").$$scope.get("SEEK_SET")),s=o,f.get("IO").$$scope.get("SEEK_SET")["$==="](s)?(t(e,0)||a.$raise(f.get("Errno").$$scope.get("EINVAL")),a.position=e):f.get("IO").$$scope.get("SEEK_CUR")["$==="](s)?a.position=n(r(a.position,e),a.string.$length())?a.string.$length():r(a.position,e):f.get("IO").$$scope.get("SEEK_END")["$==="](s)&&(a.position=n(e,a.string.$length())?0:$(a.position,e)),0},d.$tell=function(){var e=this;return e.position},e.defn(p,"$pos",d.$tell),e.defn(p,"$pos=",d.$seek),d.$rewind=function(){var e=this;return e.$seek(0)},d.$each_byte=l=function(){var e,t=this,n=l.$$p,$=n||i,o=i;if(l.$$p=null,$===!1||$===i)return t.$enum_for("each_byte");for(t.$check_readable(),o=t.position;(e=t["$eof?"]())===i||e.$$is_boolean&&1!=e;)$.$call(t.string["$[]"](o).$ord()),o=r(o,1);return t},d.$each_char=_=function(){var e,t=this,n=_.$$p,$=n||i,o=i;if(_.$$p=null,$===!1||$===i)return t.$enum_for("each_char");for(t.$check_readable(),o=t.position;(e=t["$eof?"]())===i||e.$$is_boolean&&1!=e;)$.$call(t.string["$[]"](o)),o=r(o,1);return t},d.$write=function(e){var t=this,n=i,o=i;return t.$check_writable(),e=t.$String(e),t.string.$length()["$=="](t.position)?(t.string=r(t.string,e),t.position=r(t.position,e.$length())):(n=t.string["$[]"](c(0,$(t.position,1),!1)),o=t.string["$[]"](c(r(t.position,e.$length()),-1,!1)),t.string=r(r(n,e),o),t.position=r(t.position,e.$length()))},d.$read=function(e,t){var n,$=this,o=i,a=i;return null==e&&(e=i),null==t&&(t=i),$.$check_readable(),(n=$["$eof?"]())===i||n.$$is_boolean&&1!=n?(o=function(){return e!==!1&&e!==i?(a=$.string["$[]"]($.position,e),$.position=r($.position,e),a):(a=$.string["$[]"](c($.position,-1,!1)),$.position=$.string.$length(),a)}(),t!==!1&&t!==i?t.$write(o):o):i},d.$close=function(){var e=this;return e.closed="both"},d.$close_read=function(){var e=this;return e.closed=e.closed["$=="]("write")?"both":"read"},d.$close_write=function(){var e=this;return e.closed=e.closed["$=="]("read")?"both":"write"},d["$closed?"]=function(){var e=this;return e.closed["$=="]("both")},d["$closed_read?"]=function(){var e,t=this;return(e=t.closed["$=="]("read"))!==!1&&e!==i?e:t.closed["$=="]("both")},d["$closed_write?"]=function(){var e,t=this;return(e=t.closed["$=="]("write"))!==!1&&e!==i?e:t.closed["$=="]("both")},d.$check_writable=function(){var e,t=this;return(e=t["$closed_write?"]())===i||e.$$is_boolean&&1!=e?i:t.$raise(f.get("IOError"),"not opened for writing")},d.$check_readable=function(){var e,t=this;return(e=t["$closed_read?"]())===i||e.$$is_boolean&&1!=e?i:t.$raise(f.get("IOError"),"not opened for reading")},i&&"check_readable"}(o,a.get("IO"))},Opal.modules["rspec/core/formatters/base_formatter"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?t>=e:e["$<="](t)}function $(e,t){return"number"==typeof e&&"number"==typeof t?e/t:e["$/"](t)}e.dynamic_require_severity="warning";var o=e.top,a=e.nil,i=(e.breaker,e.slice,e.module),s=e.klass,c=e.range,u=e.hash2;return e.add_stubs(["$require","$include","$attr_accessor","$attr_reader","$new","$start_sync_output","$<<","$examples","$restore_sync_output","$format_backtrace","$backtrace_formatter","$configuration","$metadata","$protected","$find_failed_line","$backtrace","$file_path","$[]","$match","$exist?","$readlines","$to_i","$expand_path","$detect","$==","$downcase","$output_supports_sync","$sync","$output","$sync=","$!","$closed?","$respond_to?","$profile_examples","$fail_fast","$color_enabled?","$profile_examples?","$fail_fast?","$first","$reverse","$sort_by","$execution_result","$map","$inject","$each","$last","$parent_groups","$example_group","$[]=","$has_key?","$top_level_description","$length","$keys","$each_value","$to_f","$-@"]),o.$require("rspec/core/formatters/helpers"),o.$require("stringio"),function(o){{var l=i(o,"RSpec");l.$$proto,l.$$scope}!function(o){{var l=i(o,"Core");l.$$proto,l.$$scope}!function(o){{var l=i(o,"Formatters");l.$$proto,l.$$scope}!function(o,$super){function i(){}var l=i=s(o,$super,"BaseFormatter",i),_=l.$$proto,p=l.$$scope;return _.pending_examples=_.failed_examples=_.old_sync=a,l.$include(p.get("Helpers")),l.$attr_accessor("example_group"),l.$attr_reader("duration","examples","output"),l.$attr_reader("example_count","pending_count","failure_count"),l.$attr_reader("failed_examples","pending_examples"),_.$initialize=function(e){var t,n=this;return n.output=(t=e)!==!1&&t!==a?t:p.get("StringIO").$new(),n.example_count=n.pending_count=n.failure_count=0,n.examples=[],n.failed_examples=[],n.pending_examples=[],n.example_group=a},_.$start=function(e){var t=this;return t.$start_sync_output(),t.example_count=e},_.$example_group_started=function(e){var t=this;return t.example_group=e},_.$example_group_finished=function(){return a},_.$example_started=function(e){var t=this;return t.$examples()["$<<"](e)},_.$example_passed=function(){return a},_.$example_pending=function(e){var t=this;return t.pending_examples["$<<"](e)},_.$example_failed=function(e){var t=this;return t.failed_examples["$<<"](e)},_.$message=function(){return a},_.$stop=function(){return a},_.$start_dump=function(){return a},_.$dump_failures=function(){return a},_.$dump_summary=function(e,t,n,r){var $=this;return $.duration=e,$.example_count=t,$.failure_count=n,$.pending_count=r},_.$dump_pending=function(){return a},_.$dump_profile=function(){return a},_.$seed=function(){return a},_.$close=function(){var e=this;return e.$restore_sync_output()},_.$format_backtrace=function(e,t){var n=this;return n.$configuration().$backtrace_formatter().$format_backtrace(e,t.$metadata())},l.$protected(),_.$configuration=function(){return p.get("RSpec").$configuration()},_.$read_failed_line=function(n,r){var $,o=this,i=a,s=a,u=a;try{return($=i=o.$find_failed_line(n.$backtrace(),r.$file_path()))===a||$.$$is_boolean&&1!=$?"Unable to find matching line from backtrace":($=e.to_ary(i.$match(/(.+?):(\d+)(|:\d+)/)["$[]"](c(1,2,!1))),s=null==$[0]?a:$[0],u=null==$[1]?a:$[1],($=p.get("File")["$exist?"](s))===a||$.$$is_boolean&&1!=$?"Unable to find "+s+" to read failed line":($=p.get("File").$readlines(s)["$[]"](t(u.$to_i(),1)))!==!1&&$!==a?$:"Unable to find matching line in "+s)}catch(l){if(e.rescue(l,[p.get("SecurityError")]))return"Unable to read failed line";throw l}},_.$find_failed_line=function(e,t){var n,r,$,o=this;return t=p.get("File").$expand_path(t),(n=(r=e).$detect,n.$$p=($=function(e){var n,r=($.$$s||this,a);return null==e&&(e=a),r=e.$match(/(.+?):(\d+)(|:\d+)/),(n=r!==!1&&r!==a)?r["$[]"](1).$downcase()["$=="](t.$downcase()):n},$.$$s=o,$),n).call(r)},_.$start_sync_output=function(){var e,t=this;return(e=t.$output_supports_sync())===a||e.$$is_boolean&&1!=e?a:(e=[t.$output().$sync(),!0],t.old_sync=e[0],t.$output()["$sync="](e[1]))},_.$restore_sync_output=function(){var e,t,n=this;return t=n.$output_supports_sync(),(e=t!==!1&&t!==a?n.$output()["$closed?"]()["$!"]():t)===a||e.$$is_boolean&&1!=e?a:(e=[n.old_sync],t=n.$output(),t["$sync="].apply(t,e),e[e.length-1])},_.$output_supports_sync=function(){var e=this;return e.$output()["$respond_to?"]("sync=")},_["$profile_examples?"]=function(){var e=this;return e.$configuration().$profile_examples()},_["$fail_fast?"]=function(){var e=this;return e.$configuration().$fail_fast()},_["$color_enabled?"]=function(){var e=this;return e.$configuration()["$color_enabled?"](e.$output())},_["$mute_profile_output?"]=function(e){var t,n,r=this;return(t=r["$profile_examples?"]()["$!"]())!==!1&&t!==a?t:(n=r["$fail_fast?"](),n!==!1&&n!==a?e["$=="](0)["$!"]():n)},_.$slowest_examples=function(){var t,r,$,o,i,s,c=this,l=a,_=a,d=a,f=a;return l=p.get("RSpec").$configuration().$profile_examples(),_=(t=(r=c.$examples()).$sort_by,t.$$p=($=function(e){$.$$s||this;return null==e&&(e=a),e.$execution_result()["$[]"]("run_time")},$.$$s=c,$),t).call(r).$reverse().$first(l),t=e.to_ary((o=(i=[c.$examples(),_]).$map,o.$$p=(s=function(e){var t,r,$,o=s.$$s||this;return null==e&&(e=a),(t=(r=e).$inject,t.$$p=($=function(e,t){$.$$s||this;return null==e&&(e=a),null==t&&(t=a),n(e,t.$execution_result()["$[]"]("run_time"))},$.$$s=o,$),t).call(r,0)},s.$$s=c,s),o).call(i)),d=null==t[0]?a:t[0],f=null==t[1]?a:t[1],u(["examples","total","slows"],{examples:_,total:d,slows:f})},_.$slowest_groups=function(){var e,t,o,i,s,c,l,_=this,d=a,f=a;return d=p.get("RSpec").$configuration().$profile_examples(),f=u([],{}),(e=(t=_.$examples()).$each,e.$$p=(o=function(e){var t,r,$,i=(o.$$s||this,a);return null==e&&(e=a),i=e.$example_group().$parent_groups().$last().$metadata()["$[]"]("example_group")["$[]"]("location"),t=i,r=f,($=r["$[]"](t))!==!1&&$!==a?$:r["$[]="](t,p.get("Hash").$new(0)),t="total_time",r=f["$[]"](i),r["$[]="](t,n(r["$[]"](t),e.$execution_result()["$[]"]("run_time"))),t="count",r=f["$[]"](i),r["$[]="](t,n(r["$[]"](t),1)),(t=f["$[]"](i)["$has_key?"]("description"))===a||t.$$is_boolean&&1!=t?f["$[]"](i)["$[]="]("description",e.$example_group().$top_level_description()):a},o.$$s=_,o),e).call(t),r(f.$keys().$length(),1)?u([],{}):((e=(i=f).$each_value,e.$$p=(s=function(e){s.$$s||this;return null==e&&(e=a),e["$[]="]("average",$(e["$[]"]("total_time").$to_f(),e["$[]"]("count")))},s.$$s=_,s),e).call(i),(e=(c=f).$sort_by,e.$$p=(l=function(e,t){l.$$s||this;return null==e&&(e=a),null==t&&(t=a),t["$[]"]("average")["$-@"]()},l.$$s=_,l),e).call(c).$first(d))},a&&"slowest_groups"}(l,null)}(l)}(l)}(o)},Opal.modules["rspec/core/formatters/base_text_formatter"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e/t:e["$/"](t)}function $(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}e.dynamic_require_severity="warning";var o=e.top,a=e.nil,i=(e.breaker,e.slice,e.module),s=e.klass,c=e.gvars,u=e.hash2;return e.add_stubs(["$require","$puts","$output","$empty?","$failed_examples","$each_with_index","$pending_fixed?","$dump_pending_fixed","$dump_failure","$dump_backtrace","$failure_count","$color","$failure_color","$configuration","$pending_count","$pending_color","$success_color","$mute_profile_output?","$dump_profile","$format_duration","$colorise_summary","$summary_line","$dump_commands_to_rerun_failed_examples","$each","$relative_path","$location","$detail_color","$full_description","$dump_profile_slowest_examples","$dump_profile_slowest_example_groups","$slowest_examples","$[]","$%","$nan?","$size","$format_seconds","$bold","$execution_result","$format_caller","$slowest_groups","$pluralize","$<<","$pending_examples","$show_failures_in_pending_blocks?","$dump_failure_info","$===","$!","$==","$close","$to_set","$values","$include?","$fetch","$color_code_for","$protected","$color_enabled?","$colorize","$fixed_color","$default_color","$deprecate","$private","$backtrace_line","$backtrace_formatter","$first","$split","$to_s","$long_padding","$format_backtrace","$backtrace","$short_padding","$next","$metadata","$exception_class_name_for","$strip","$read_failed_line","$=~","$message","$find_shared_group","$dump_shared_failure_info","$name","$class","$find","$group_and_parent_groups","$parent_groups","$example_group"]),o.$require("rspec/core/formatters/base_formatter"),o.$require("set"),function(o){{var l=i(o,"RSpec");l.$$proto,l.$$scope}!function(o){{var l=i(o,"Core");l.$$proto,l.$$scope}!function(o){var l=i(o,"Formatters"),_=(l.$$proto,l.$$scope);!function(o,$super){function i(){}var l,_=i=s(o,$super,"BaseTextFormatter",i),p=_.$$proto,d=_.$$scope;return p.$message=function(e){var t=this;return t.$output().$puts(e)},p.$dump_failures=function(){var e,t,n,r=this;return(e=r.$failed_examples()["$empty?"]())===a||e.$$is_boolean&&1!=e?(r.$output().$puts(),r.$output().$puts("Failures:"),(e=(t=r.$failed_examples()).$each_with_index,e.$$p=(n=function(e,t){var r,$=n.$$s||this;return null==e&&(e=a),null==t&&(t=a),$.$output().$puts(),(r=$["$pending_fixed?"](e))===a||r.$$is_boolean&&1!=r?$.$dump_failure(e,t):$.$dump_pending_fixed(e,t),$.$dump_backtrace(e)},n.$$s=r,n),e).call(t)):a},p.$colorise_summary=function(e){var n=this;return t(n.$failure_count(),0)?n.$color(e,d.get("RSpec").$configuration().$failure_color()):t(n.$pending_count(),0)?n.$color(e,d.get("RSpec").$configuration().$pending_color()):n.$color(e,d.get("RSpec").$configuration().$success_color())},p.$dump_summary=l=function(t,n,r,$){{var o,i=this;l.$$p}return l.$$p=null,e.find_super_dispatcher(i,"dump_summary",l,null).apply(i,[t,n,r,$]),((o=i["$mute_profile_output?"](r))===a||o.$$is_boolean&&1!=o)&&i.$dump_profile(),i.$output().$puts("\nFinished in "+i.$format_duration(t)+"\n"),i.$output().$puts(i.$colorise_summary(i.$summary_line(n,r,$))),i.$dump_commands_to_rerun_failed_examples()},p.$dump_commands_to_rerun_failed_examples=function(){var e,t,r,$=this;return(e=$.$failed_examples()["$empty?"]())===a||e.$$is_boolean&&1!=e?($.$output().$puts(),$.$output().$puts("Failed examples:"),$.$output().$puts(),(e=(t=$.$failed_examples()).$each,e.$$p=(r=function(e){var t=r.$$s||this;return null==e&&(e=a),t.$output().$puts(n(n(t.$failure_color("rspec "+d.get("RSpec").$$scope.get("Core").$$scope.get("Metadata").$relative_path(e.$location()))," "),t.$detail_color("# "+e.$full_description())))},r.$$s=$,r),e).call(t)):a},p.$dump_profile=function(){var e=this;return e.$dump_profile_slowest_examples(),e.$dump_profile_slowest_example_groups()
},p.$dump_profile_slowest_examples=function(){var e,t,n,o=this,i=a,s=a,c=a;return i=o.$slowest_examples(),s=r(i["$[]"]("slows"),i["$[]"]("total")),c="%.1f"["$%"]($(function(){return(e=s["$nan?"]())===a||e.$$is_boolean&&1!=e?s:0}(),100)),o.$output().$puts("\nTop "+i["$[]"]("examples").$size()+" slowest examples ("+o.$format_seconds(i["$[]"]("slows"))+" seconds, "+c+"% of total time):\n"),(e=(t=i["$[]"]("examples")).$each,e.$$p=(n=function(e){var t=n.$$s||this;return null==e&&(e=a),t.$output().$puts("  "+e.$full_description()),t.$output().$puts("    "+t.$bold(t.$format_seconds(e.$execution_result()["$[]"]("run_time")))+" "+t.$bold("seconds")+" "+t.$format_caller(e.$location()))},n.$$s=o,n),e).call(t)},p.$dump_profile_slowest_example_groups=function(){var e,t,n,r=this,$=a;return $=r.$slowest_groups(),(e=$["$empty?"]())===a||e.$$is_boolean&&1!=e?(r.$output().$puts("\nTop "+$.$size()+" slowest example groups:"),(e=(t=r.$slowest_groups()).$each,e.$$p=(n=function(e,t){var r=n.$$s||this,$=a,o=a,i=a;return null==e&&(e=a),null==t&&(t=a),$=""+r.$bold(r.$format_seconds(t["$[]"]("average")))+" "+r.$bold("seconds")+" average",o=""+r.$format_seconds(t["$[]"]("total_time"))+" seconds",i=r.$pluralize(t["$[]"]("count"),"example"),r.$output().$puts("  "+t["$[]"]("description")),r.$output().$puts("    "+$+" ("+o+" / "+i+") "+e)},n.$$s=r,n),e).call(t)):a},p.$summary_line=function(e,n,r){var $=this,o=a;return o=$.$pluralize(e,"example"),o["$<<"](", ")["$<<"]($.$pluralize(n,"failure")),t(r,0)&&o["$<<"](", "+r+" pending"),o},p.$dump_pending=function(){var e,t,n,r=this;return(e=r.$pending_examples()["$empty?"]())===a||e.$$is_boolean&&1!=e?(r.$output().$puts(),r.$output().$puts("Pending:"),(e=(t=r.$pending_examples()).$each,e.$$p=(n=function(e){var t,r,$=n.$$s||this;return null==e&&(e=a),$.$output().$puts($.$pending_color("  "+e.$full_description())),$.$output().$puts($.$detail_color("    # "+e.$execution_result()["$[]"]("pending_message"))),$.$output().$puts($.$detail_color("    # "+$.$format_caller(e.$location()))),r=e.$execution_result()["$[]"]("exception"),(t=r!==!1&&r!==a?d.get("RSpec").$configuration()["$show_failures_in_pending_blocks?"]():r)===a||t.$$is_boolean&&1!=t?a:($.$dump_failure_info(e),$.$dump_backtrace(e))},n.$$s=r,n),e).call(t)):a},p.$seed=function(e){var t=this;return t.$output().$puts(),t.$output().$puts("Randomized with seed "+e),t.$output().$puts()},p.$close=function(){var e,t,n=this;return null==c.stdout&&(c.stdout=a),t=d.get("IO")["$==="](n.$output()),(e=t!==!1&&t!==a?n.$output()["$=="](c.stdout)["$!"]():t)===a||e.$$is_boolean&&1!=e?a:n.$output().$close()},e.cdecl(d,"VT100_COLORS",u(["black","red","green","yellow","blue","magenta","cyan","white"],{black:30,red:31,green:32,yellow:33,blue:34,magenta:35,cyan:36,white:37})),e.cdecl(d,"VT100_COLOR_CODES",d.get("VT100_COLORS").$values().$to_set()),p.$color_code_for=function(e){var t,n,r,$=this;return(t=d.get("VT100_COLOR_CODES")["$include?"](e))===a||t.$$is_boolean&&1!=t?(t=(n=d.get("VT100_COLORS")).$fetch,t.$$p=(r=function(){var e=r.$$s||this;return e.$color_code_for("white")},r.$$s=$,r),t).call(n,e):e},p.$colorize=function(e,t){var n=this;return"e["+n.$color_code_for(t)+"m"+e+"e[0m"},_.$protected(),p.$bold=function(e){var t,n=this;return(t=n["$color_enabled?"]())===a||t.$$is_boolean&&1!=t?e:"e[1m"+e+"e[0m"},p.$color=function(e,t){var n,r=this;return(n=r["$color_enabled?"]())===a||n.$$is_boolean&&1!=n?e:r.$colorize(e,t)},p.$failure_color=function(e){var t=this;return t.$color(e,d.get("RSpec").$configuration().$failure_color())},p.$success_color=function(e){var t=this;return t.$color(e,d.get("RSpec").$configuration().$success_color())},p.$pending_color=function(e){var t=this;return t.$color(e,d.get("RSpec").$configuration().$pending_color())},p.$fixed_color=function(e){var t=this;return t.$color(e,d.get("RSpec").$configuration().$fixed_color())},p.$detail_color=function(e){var t=this;return t.$color(e,d.get("RSpec").$configuration().$detail_color())},p.$default_color=function(e){var t=this;return t.$color(e,d.get("RSpec").$configuration().$default_color())},p.$red=function(e){var t=this;return d.get("RSpec").$deprecate("RSpec::Core::Formatters::BaseTextFormatter#red",u(["replacement"],{replacement:"#failure_color"})),t.$color(e,"red")},p.$green=function(e){var t=this;return d.get("RSpec").$deprecate("RSpec::Core::Formatters::BaseTextFormatter#green",u(["replacement"],{replacement:"#success_color"})),t.$color(e,"green")},p.$yellow=function(e){var t=this;return d.get("RSpec").$deprecate("RSpec::Core::Formatters::BaseTextFormatter#yellow",u(["replacement"],{replacement:"#pending_color"})),t.$color(e,"yellow")},p.$blue=function(e){var t=this;return d.get("RSpec").$deprecate("RSpec::Core::Formatters::BaseTextFormatter#blue",u(["replacement"],{replacement:"#fixed_color"})),t.$color(e,"blue")},p.$magenta=function(e){var t=this;return d.get("RSpec").$deprecate("RSpec::Core::Formatters::BaseTextFormatter#magenta"),t.$color(e,"magenta")},p.$cyan=function(e){var t=this;return d.get("RSpec").$deprecate("RSpec::Core::Formatters::BaseTextFormatter#cyan",u(["replacement"],{replacement:"#detail_color"})),t.$color(e,"cyan")},p.$white=function(e){var t=this;return d.get("RSpec").$deprecate("RSpec::Core::Formatters::BaseTextFormatter#white",u(["replacement"],{replacement:"#default_color"})),t.$color(e,"white")},p.$short_padding=function(){return"  "},p.$long_padding=function(){return"     "},_.$private(),p.$format_caller=function(e){var t=this;return t.$configuration().$backtrace_formatter().$backtrace_line(e.$to_s().$split(":in `block").$first())},p.$dump_backtrace=function(e){var t,n,r,$=this;return(t=(n=$.$format_backtrace(e.$execution_result()["$[]"]("exception").$backtrace(),e)).$each,t.$$p=(r=function(e){var t=r.$$s||this;return null==e&&(e=a),t.$output().$puts(t.$detail_color(""+t.$long_padding()+"# "+e))},r.$$s=$,r),t).call(n)},p.$dump_pending_fixed=function(e,t){var n=this;return n.$output().$puts(""+n.$short_padding()+t.$next()+") "+e.$full_description()+" FIXED"),n.$output().$puts(n.$fixed_color(""+n.$long_padding()+"Expected pending '"+e.$metadata()["$[]"]("execution_result")["$[]"]("pending_message")+"' to fail. No Error was raised."))},p["$pending_fixed?"]=function(e){return e.$execution_result()["$[]"]("pending_fixed")},p.$dump_failure=function(e,t){var n=this;return n.$output().$puts(""+n.$short_padding()+t.$next()+") "+e.$full_description()),n.$dump_failure_info(e)},p.$dump_failure_info=function(e){var t,n,r,$=this,o=a,i=a,s=a;return o=e.$execution_result()["$[]"]("exception"),i=$.$exception_class_name_for(o),$.$output().$puts(""+$.$long_padding()+$.$failure_color("Failure/Error:")+" "+$.$failure_color($.$read_failed_line(o,e).$strip())),((t=i["$=~"](/RSpec/))===a||t.$$is_boolean&&1!=t)&&$.$output().$puts(""+$.$long_padding()+$.$failure_color(i)+":"),(t=o.$message())===a||t.$$is_boolean&&1!=t||(t=(n=o.$message().$to_s().$split("\n")).$each,t.$$p=(r=function(e){var t=r.$$s||this;return null==e&&(e=a),t.$output().$puts(""+t.$long_padding()+"  "+t.$failure_color(e))},r.$$s=$,r),t).call(n),(t=s=$.$find_shared_group(e))===a||t.$$is_boolean&&1!=t?a:$.$dump_shared_failure_info(s)},p.$exception_class_name_for=function(e){var t=a;return t=e.$class().$name().$to_s(),t["$=="]("")&&(t="(anonymous error class)"),t},p.$dump_shared_failure_info=function(e){var t=this;return t.$output().$puts(n(""+t.$long_padding()+'Shared Example Group: "'+e.$metadata()["$[]"]("shared_group_name")+'" called from ',""+t.$configuration().$backtrace_formatter().$backtrace_line(e.$metadata()["$[]"]("example_group")["$[]"]("location"))))},p.$find_shared_group=function(e){var t,n,r,$=this;return(t=(n=$.$group_and_parent_groups(e)).$find,t.$$p=(r=function(e){r.$$s||this;return null==e&&(e=a),e.$metadata()["$[]"]("shared_group_name")},r.$$s=$,r),t).call(n)},p.$group_and_parent_groups=function(e){return n(e.$example_group().$parent_groups(),[e.$example_group()])},a&&"group_and_parent_groups"}(l,_.get("BaseFormatter"))}(l)}(l)}(o)},Opal.modules["rspec/core/formatters/documentation_formatter"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}e.dynamic_require_severity="warning";var $=e.top,o=e.nil,a=(e.breaker,e.slice,e.module),i=e.klass;return e.add_stubs(["$require","$==","$puts","$output","$current_indentation","$strip","$description","$passed_output","$pending_output","$[]","$execution_result","$failure_output","$failure_color","$next_failure_index","$success_color","$pending_color","$reverse","$parent_groups","$example_group"]),$.$require("rspec/core/formatters/base_text_formatter"),function($){{var s=a($,"RSpec");s.$$proto,s.$$scope}!function($){{var s=a($,"Core");s.$$proto,s.$$scope}!function($){var s=a($,"Formatters"),c=(s.$$proto,s.$$scope);!function($,$super){function a(){}{var s,c,u,l,_,p=a=i($,$super,"DocumentationFormatter",a),d=p.$$proto;p.$$scope}return d.group_level=d.next_failure_index=o,d.$initialize=s=function(t){{var n=this;s.$$p}return s.$$p=null,e.find_super_dispatcher(n,"initialize",s,null).apply(n,[t]),n.group_level=0},d.$example_group_started=c=function(n){{var r=this;c.$$p}return c.$$p=null,e.find_super_dispatcher(r,"example_group_started",c,null).apply(r,[n]),r.group_level["$=="](0)&&r.$output().$puts(),r.$output().$puts(""+r.$current_indentation()+n.$description().$strip()),r.group_level=t(r.group_level,1)},d.$example_group_finished=function(){var e=this;return e.group_level=n(e.group_level,1)},d.$example_passed=u=function(t){{var n=this;u.$$p}return u.$$p=null,e.find_super_dispatcher(n,"example_passed",u,null).apply(n,[t]),n.$output().$puts(n.$passed_output(t))},d.$example_pending=l=function(t){{var n=this;l.$$p}return l.$$p=null,e.find_super_dispatcher(n,"example_pending",l,null).apply(n,[t]),n.$output().$puts(n.$pending_output(t,t.$execution_result()["$[]"]("pending_message")))},d.$example_failed=_=function(t){{var n=this;_.$$p}return _.$$p=null,e.find_super_dispatcher(n,"example_failed",_,null).apply(n,[t]),n.$output().$puts(n.$failure_output(t,t.$execution_result()["$[]"]("exception")))},d.$failure_output=function(e){var t=this;return t.$failure_color(""+t.$current_indentation()+e.$description().$strip()+" (FAILED - "+t.$next_failure_index()+")")},d.$next_failure_index=function(){var e,n=this;return(e=n.next_failure_index)!==!1&&e!==o?e:n.next_failure_index=0,n.next_failure_index=t(n.next_failure_index,1)},d.$passed_output=function(e){var t=this;return t.$success_color(""+t.$current_indentation()+e.$description().$strip())},d.$pending_output=function(e,t){var n=this;return n.$pending_color(""+n.$current_indentation()+e.$description().$strip()+" (PENDING: "+t+")")},d.$current_indentation=function(){var e=this;return r("  ",e.group_level)},d.$example_group_chain=function(){var e=this;return e.$example_group().$parent_groups().$reverse()},o&&"example_group_chain"}(s,c.get("BaseTextFormatter"))}(s)}(s)}($)},Opal.modules.template=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.klass),$=e.hash2;return e.add_stubs(["$[]","$[]=","$keys","$attr_reader","$instance_exec","$to_proc","$new","$<<","$join"]),function(t,$super){function o(){}var a,i=o=r(t,$super,"Template",o),s=i.$$proto,c=i.$$scope;return s.name=s.body=n,i._cache=$([],{}),e.defs(i,"$[]",function(e){var t,r=this;return null==r._cache&&(r._cache=n),(t=r._cache["$[]"](e))!==!1&&t!==n?t:r._cache["$[]"]("templates/"+e)}),e.defs(i,"$[]=",function(e,t){var r=this;return null==r._cache&&(r._cache=n),r._cache["$[]="](e,t)}),e.defs(i,"$paths",function(){var e=this;return null==e._cache&&(e._cache=n),e._cache.$keys()}),i.$attr_reader("body"),s.$initialize=a=function(e){var t,r=this,$=a.$$p,o=$||n;return a.$$p=null,t=[e,o],r.name=t[0],r.body=t[1],c.get("Template")["$[]="](e,r)},s.$inspect=function(){var e=this;return"#<Template: '"+e.name+"'>"},s.$render=function(e){var t,n,r=this;return null==e&&(e=r),(t=(n=e).$instance_exec,t.$$p=r.body.$to_proc(),t).call(n,c.get("OutputBuffer").$new())},function(t,$super){function $(){}{var o=$=r(t,$super,"OutputBuffer",$),a=o.$$proto;o.$$scope}return a.buffer=n,a.$initialize=function(){var e=this;return e.buffer=[]},a.$append=function(e){var t=this;return t.buffer["$<<"](e)},e.defn(o,"$append=",a.$append),a.$join=function(){var e=this;return e.buffer.$join()},n&&"join"}(i,null)}(t,null)},Opal.modules.erb=function(e){e.dynamic_require_severity="warning";var t=e.top,n=(e.nil,e.breaker,e.slice,e.klass),r=e.module;return e.add_stubs(["$require","$module_function"]),t.$require("template"),function(t,$super){function $(){}{var o=$=n(t,$super,"ERB",$);o.$$proto,o.$$scope}return function(t){var n=r(t,"Util"),$=n.$$proto,o=(n.$$scope,{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),a=/[&<>"']/g;e.defn(n,"$html_escape",function(e){return(""+e).replace(a,function(e){return o[e]})}),e.defn(n,"$h",$.$html_escape),n.$module_function("h"),n.$module_function("html_escape")}(o)}(t,null)},Opal.modules["rspec/core/formatters/html_printer"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.dynamic_require_severity="warning";var $=e.top,o=e.nil,a=(e.breaker,e.slice,e.module),i=e.klass;return e.add_stubs(["$require","$include","$puts","$indentation_style","$h","$sprintf","$[]","$==","$<<","$flush","$private"]),$.$require("erb"),function($){{var s=a($,"RSpec");s.$$proto,s.$$scope}!function($){{var s=a($,"Core");s.$$proto,s.$$scope}!function($){{var s=a($,"Formatters");s.$$proto,s.$$scope}!function($,$super){function a(){}var s=a=i($,$super,"HtmlPrinter",a),c=s.$$proto,u=s.$$scope;return c.output=o,s.$include(u.get("ERB").$$scope.get("Util")),c.$initialize=function(e){var t=this;return t.output=e},c.$print_html_start=function(){var e=this;return e.output.$puts(u.get("HTML_HEADER")),e.output.$puts(u.get("REPORT_HEADER"))},c.$print_example_group_end=function(){var e=this;return e.output.$puts("  </dl>"),e.output.$puts("</div>")},c.$print_example_group_start=function(e,t,n){var r=this;return r.output.$puts('<div id="div_group_'+e+'" class="example_group passed">'),r.output.$puts("  <dl "+r.$indentation_style(n)+">"),r.output.$puts('  <dt id="example_group_'+e+'" class="passed">'+r.$h(t)+"</dt>")},c.$print_example_passed=function(e,t){var n=this,r=o;return r=n.$sprintf("%.5f",t),n.output.$puts('    <dd class="example passed"><span class="passed_spec_name">'+n.$h(e)+"</span><span class='duration'>"+r+"s</span></dd>")},c.$print_example_failed=function(e,t,n,r,$,a,i){var s=this,c=o;return null==i&&(i=!1),c=s.$sprintf("%.5f",n),s.output.$puts('    <dd class="example '+function(){return e!==!1&&e!==o?"pending_fixed":"failed"}()+'">'),s.output.$puts('      <span class="failed_spec_name">'+s.$h(t)+"</span>"),s.output.$puts('      <span class="duration">'+c+"s</span>"),s.output.$puts('      <div class="failure" id="failure_'+r+'">'),$!==!1&&$!==o&&(s.output.$puts('        <div class="message"><pre>'+s.$h($["$[]"]("message"))+"</pre></div>"),s.output.$puts(i!==!1&&i!==o?'        <div class="backtrace"><pre>'+s.$h($["$[]"]("backtrace"))+"</pre></div>":'        <div class="backtrace"><pre>'+$["$[]"]("backtrace")+"</pre></div>")),a!==!1&&a!==o&&s.output.$puts(a),s.output.$puts("      </div>"),s.output.$puts("    </dd>")},c.$print_example_pending=function(e,t){var n=this;return n.output.$puts('    <dd class="example not_implemented"><span class="not_implemented_spec_name">'+n.$h(e)+" (PENDING: "+n.$h(t)+")</span></dd>")},c.$print_summary=function(e,n,r,$,a){var i=this,s=o,c=o;return e!==!1&&e!==o?s="This was a dry-run":(s=""+r+" example"+function(){return r["$=="](1)?o:"s"}()+", ",s["$<<"](""+$+" failure"+function(){return $["$=="](1)?o:"s"}()),t(a,0)&&s["$<<"](", "+a+" pending")),c=i.$sprintf("%.5f",n),i.output.$puts('<script type="text/javascript">document.getElementById(\'duration\').innerHTML = "Finished in <strong>'+c+' seconds</strong>";</script>'),i.output.$puts('<script type="text/javascript">document.getElementById(\'totals\').innerHTML = "'+s+'";</script>'),i.output.$puts("</div>"),i.output.$puts("</div>"),i.output.$puts("</body>"),i.output.$puts("</html>")},c.$flush=function(){var e=this;return e.output.$flush()},c.$move_progress=function(e){var t=this;return t.output.$puts('    <script type="text/javascript">moveProgressBar(\''+e+"');</script>"),t.output.$flush()},c.$make_header_red=function(){var e=this;return e.output.$puts("    <script type=\"text/javascript\">makeRed('rspec-header');</script>")},c.$make_header_yellow=function(){var e=this;return e.output.$puts("    <script type=\"text/javascript\">makeYellow('rspec-header');</script>")},c.$make_example_group_header_red=function(e){var t=this;return t.output.$puts('    <script type="text/javascript">makeRed(\'div_group_'+e+"');</script>"),t.output.$puts('    <script type="text/javascript">makeRed(\'example_group_'+e+"');</script>")},c.$make_example_group_header_yellow=function(e){var t=this;return t.output.$puts('    <script type="text/javascript">makeYellow(\'div_group_'+e+"');</script>"),t.output.$puts('    <script type="text/javascript">makeYellow(\'example_group_'+e+"');</script>")},s.$private(),c.$indentation_style=function(e){return'style="margin-left: '+n(r(e,1),15)+'px;"'},e.cdecl(u,"REPORT_HEADER",'<div class="rspec-report">\n\n<div id="rspec-header">\n  <div id="label">\n    <h1>RSpec Code Examples</h1>\n  </div>\n\n  <div id="display-filters">\n    <input id="passed_checkbox"  name="passed_checkbox"  type="checkbox" checked="checked" onchange="apply_filters()" value="1" /> <label for="passed_checkbox">Passed</label>\n    <input id="failed_checkbox"  name="failed_checkbox"  type="checkbox" checked="checked" onchange="apply_filters()" value="2" /> <label for="failed_checkbox">Failed</label>\n    <input id="pending_checkbox" name="pending_checkbox" type="checkbox" checked="checked" onchange="apply_filters()" value="3" /> <label for="pending_checkbox">Pending</label>\n  </div>\n\n  <div id="summary">\n    <p id="totals">&#160;</p>\n    <p id="duration">&#160;</p>\n  </div>\n</div>\n\n\n<div class="results">\n'),e.cdecl(u,"GLOBAL_SCRIPTS","\nfunction addClass(element_id, classname) {\n  document.getElementById(element_id).className += (\" \" + classname);\n}\n\nfunction removeClass(element_id, classname) {\n  var elem = document.getElementById(element_id);\n  var classlist = elem.className.replace(classname,'');\n  elem.className = classlist;\n}\n\nfunction moveProgressBar(percentDone) {\n  document.getElementById(\"rspec-header\").style.width = percentDone +\"%\";\n}\n\nfunction makeRed(element_id) {\n  removeClass(element_id, 'passed');\n  removeClass(element_id, 'not_implemented');\n  addClass(element_id,'failed');\n}\n\nfunction makeYellow(element_id) {\n  var elem = document.getElementById(element_id);\n  if (elem.className.indexOf(\"failed\") == -1) {  // class doesn't includes failed\n    if (elem.className.indexOf(\"not_implemented\") == -1) { // class doesn't include not_implemented\n      removeClass(element_id, 'passed');\n      addClass(element_id,'not_implemented');\n    }\n  }\n}\n\nfunction apply_filters() {\n  var passed_filter = document.getElementById('passed_checkbox').checked;\n  var failed_filter = document.getElementById('failed_checkbox').checked;\n  var pending_filter = document.getElementById('pending_checkbox').checked;\n\n  assign_display_style(\"example passed\", passed_filter);\n  assign_display_style(\"example failed\", failed_filter);\n  assign_display_style(\"example not_implemented\", pending_filter);\n\n  assign_display_style_for_group(\"example_group passed\", passed_filter);\n  assign_display_style_for_group(\"example_group not_implemented\", pending_filter, pending_filter || passed_filter);\n  assign_display_style_for_group(\"example_group failed\", failed_filter, failed_filter || pending_filter || passed_filter);\n}\n\nfunction get_display_style(display_flag) {\n  var style_mode = 'none';\n  if (display_flag == true) {\n    style_mode = 'block';\n  }\n  return style_mode;\n}\n\nfunction assign_display_style(classname, display_flag) {\n  var style_mode = get_display_style(display_flag);\n  var elems = document.getElementsByClassName(classname)\n  for (var i=0; i<elems.length;i++) {\n    elems[i].style.display = style_mode;\n  }\n}\n\nfunction assign_display_style_for_group(classname, display_flag, subgroup_flag) {\n  var display_style_mode = get_display_style(display_flag);\n  var subgroup_style_mode = get_display_style(subgroup_flag);\n  var elems = document.getElementsByClassName(classname)\n  for (var i=0; i<elems.length;i++) {\n    var style_mode = display_style_mode;\n    if ((display_flag != subgroup_flag) && (elems[i].getElementsByTagName('dt')[0].innerHTML.indexOf(\", \") != -1)) {\n      elems[i].style.display = subgroup_style_mode;\n    } else {\n      elems[i].style.display = display_style_mode;\n    }\n  }\n}\n"),e.cdecl(u,"GLOBAL_STYLES",'#rspec-header {\n  background: #65C400; color: #fff; height: 4em;\n}\n\n.rspec-report h1 {\n  margin: 0px 10px 0px 10px;\n  padding: 10px;\n  font-family: "Lucida Grande", Helvetica, sans-serif;\n  font-size: 1.8em;\n  position: absolute;\n}\n\n#label {\n  float:left;\n}\n\n#display-filters {\n  float:left;\n  padding: 28px 0 0 40%;\n  font-family: "Lucida Grande", Helvetica, sans-serif;\n}\n\n#summary {\n  float:right;\n  padding: 5px 10px;\n  font-family: "Lucida Grande", Helvetica, sans-serif;\n  text-align: right;\n}\n\n#summary p {\n  margin: 0 0 0 2px;\n}\n\n#summary #totals {\n  font-size: 1.2em;\n}\n\n.example_group {\n  margin: 0 10px 5px;\n  background: #fff;\n}\n\ndl {\n  margin: 0; padding: 0 0 5px;\n  font: normal 11px "Lucida Grande", Helvetica, sans-serif;\n}\n\ndt {\n  padding: 3px;\n  background: #65C400;\n  color: #fff;\n  font-weight: bold;\n}\n\ndd {\n  margin: 5px 0 5px 5px;\n  padding: 3px 3px 3px 18px;\n}\n\ndd .duration {\n  padding-left: 5px;\n  text-align: right;\n  right: 0px;\n  float:right;\n}\n\ndd.example.passed {\n  border-left: 5px solid #65C400;\n  border-bottom: 1px solid #65C400;\n  background: #DBFFB4; color: #3D7700;\n}\n\ndd.example.not_implemented {\n  border-left: 5px solid #FAF834;\n  border-bottom: 1px solid #FAF834;\n  background: #FCFB98; color: #131313;\n}\n\ndd.example.pending_fixed {\n  border-left: 5px solid #0000C2;\n  border-bottom: 1px solid #0000C2;\n  color: #0000C2; background: #D3FBFF;\n}\n\ndd.example.failed {\n  border-left: 5px solid #C20000;\n  border-bottom: 1px solid #C20000;\n  color: #C20000; background: #FFFBD3;\n}\n\n\ndt.not_implemented {\n  color: #000000; background: #FAF834;\n}\n\ndt.pending_fixed {\n  color: #FFFFFF; background: #C40D0D;\n}\n\ndt.failed {\n  color: #FFFFFF; background: #C40D0D;\n}\n\n\n#rspec-header.not_implemented {\n  color: #000000; background: #FAF834;\n}\n\n#rspec-header.pending_fixed {\n  color: #FFFFFF; background: #C40D0D;\n}\n\n#rspec-header.failed {\n  color: #FFFFFF; background: #C40D0D;\n}\n\n\n.backtrace {\n  color: #000;\n  font-size: 12px;\n}\n\na {\n  color: #BE5C00;\n}\n\n/* Ruby code, style similar to vibrant ink */\n.ruby {\n  font-size: 12px;\n  font-family: monospace;\n  color: white;\n  background-color: black;\n  padding: 0.1em 0 0.2em 0;\n}\n\n.ruby .keyword { color: #FF6600; }\n.ruby .constant { color: #339999; }\n.ruby .attribute { color: white; }\n.ruby .global { color: white; }\n.ruby .module { color: white; }\n.ruby .class { color: white; }\n.ruby .string { color: #66FF00; }\n.ruby .ident { color: white; }\n.ruby .method { color: #FFCC00; }\n.ruby .number { color: white; }\n.ruby .char { color: white; }\n.ruby .comment { color: #9933CC; }\n.ruby .symbol { color: white; }\n.ruby .regex { color: #44B4CC; }\n.ruby .punct { color: white; }\n.ruby .escape { color: white; }\n.ruby .interp { color: white; }\n.ruby .expr { color: white; }\n\n.ruby .offending { background-color: gray; }\n.ruby .linenum {\n  width: 75px;\n  padding: 0.1em 1em 0.2em 0;\n  color: #000000;\n  background-color: #FFFBD3;\n}\n'),e.cdecl(u,"HTML_HEADER",'<!DOCTYPE html>\n<html lang=\'en\'>\n<head>\n  <title>RSpec results</title>\n  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />\n  <meta http-equiv="Expires" content="-1" />\n  <meta http-equiv="Pragma" content="no-cache" />\n  <style type="text/css">\n  body {\n    margin: 0;\n    padding: 0;\n    background: #fff;\n    font-size: 80%;\n  }\n  </style>\n  <script type="text/javascript">\n    // <![CDATA[\n'+u.get("GLOBAL_SCRIPTS")+'\n    // ]]>\n  </script>\n  <style type="text/css">\n'+u.get("GLOBAL_STYLES")+"\n  </style>\n</head>\n<body>\n")}(s,null)}(s)}(s)}($)},Opal.modules["rspec/core/formatters/snippet_extractor"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="warning";var r=e.top,$=e.nil,o=(e.breaker,e.slice,e.module),a=e.klass,i=e.hash2,s=e.gvars,c=e.range;return e.add_stubs(["$html","$scan","$require","$new","$snippet_for","$[]","$convert","$post_process","$=~","$to_i","$lines_around","$file?","$split","$read","$max","$min","$length","$join","$each_with_index","$==","$<<"]),function(r){{var u=o(r,"RSpec");u.$$proto,u.$$scope}!function(r){{var u=o(r,"Core");u.$$proto,u.$$scope}!function(r){{var u=o(r,"Formatters");u.$$proto,u.$$scope}!function(r,$super){function o(){}var u=o=a(r,$super,"SnippetExtractor",o),l=u.$$proto,_=u.$$scope;!function(e,$super){function t(){}{var n=t=a(e,$super,"NullConverter",t),r=n.$$proto;n.$$scope}return r.$convert=function(e){return""+e+'\n<span class="comment"># Install the coderay gem to get syntax highlighting</span>'},$&&"convert"}(u,null),function(e,$super){function t(){}var n=t=a(e,$super,"CoderayConverter",t),r=n.$$proto,o=n.$$scope;return r.$convert=function(e){return o.get("CodeRay").$scan(e,"ruby").$html(i(["line_numbers"],{line_numbers:!1}))},$&&"convert"}(u,null);try{u.$require("coderay"),e.cvars["@@converter"]=_.get("CoderayConverter").$new()}catch(p){if(!e.rescue(p,[_.get("LoadError")]))throw p;e.cvars["@@converter"]=_.get("NullConverter").$new()}return l.$snippet=function(t){var n,r=this,o=$,a=$,i=$;return n=e.to_ary(r.$snippet_for(t["$[]"](0))),o=null==n[0]?$:n[0],a=null==n[1]?$:n[1],i=(null==(n=e.cvars["@@converter"])?$:n).$convert(o),r.$post_process(i,a)},l.$snippet_for=function(e){var t,n=this,r=$,o=$;return(t=e["$=~"](/(.*):(\d+)/))===$||t.$$is_boolean&&1!=t?["# Couldn't get snippet for "+e,1]:(r=(t=s["~"])===$?$:t["$[]"](1),o=((t=s["~"])===$?$:t["$[]"](2)).$to_i(),[n.$lines_around(r,o),o])},l.$lines_around=function(r,o){var a,i=$,s=$,u=$,l=$;try{return(a=_.get("File")["$file?"](r))===$||a.$$is_boolean&&1!=a?"# Couldn't get snippet for "+r:(i=_.get("File").$read(r).$split("\n"),s=[0,t(o,3)].$max(),u=[n(o,1),t(i.$length(),1)].$min(),l=[],l.$join("\n"),i["$[]"](c(s,u,!1)).$join("\n"))}catch(p){if(e.rescue(p,[_.get("SecurityError")]))return"# Couldn't get snippet for "+r;throw p}},l.$post_process=function(e,r){var o,a,i,s=this,c=$;return c=[],(o=(a=e.$split("\n")).$each_with_index,o.$$p=(i=function(e,o){var a=(i.$$s||this,$);return null==e&&(e=$),null==o&&(o=$),a='<span class="linenum">'+t(n(r,o),2)+"</span>"+e,o["$=="](2)&&(a='<span class="offending">'+a+"</span>"),c["$<<"](a)},i.$$s=s,i),o).call(a),c.$join("\n")},$&&"post_process"}(u,null)}(u)}(u)}(r)},Opal.modules["rspec/core/formatters/html_formatter"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e/t:e["$/"](t)}function $(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}e.dynamic_require_severity="warning";var o=e.top,a=e.nil,i=(e.breaker,e.slice),s=e.module,c=e.klass,u=e.hash2;return e.add_stubs(["$require","$new","$private","$public","$print_html_start","$flush","$==","$example_group_number","$print_example_group_end","$print_example_group_start","$description","$size","$parent_groups","$move_progress","$percent_done","$print_example_passed","$[]","$execution_result","$make_header_red","$make_example_group_header_red","$metadata","$message","$join","$format_backtrace","$backtrace","$extra_failure_content","$print_example_failed","$make_header_yellow","$make_example_group_header_yellow","$print_example_pending","$map","$backtrace_line","$backtrace_formatter","$configuration","$compact!","$snippet","$to_f","$to_i","$example_number","$print_summary","$dry_run?"]),o.$require("rspec/core/formatters/base_text_formatter"),o.$require("rspec/core/formatters/html_printer"),function(o){{var l=s(o,"RSpec");l.$$proto,l.$$scope}!function(o){{var l=s(o,"Core");l.$$proto,l.$$scope}!function(o){var l=s(o,"Formatters"),_=(l.$$proto,l.$$scope);!function(o,$super){function s(){}var l,_,p,d,f,h,m=s=c(o,$super,"HtmlFormatter",s),g=m.$$proto,v=m.$$scope;return g.example_group_number=g.example_number=g.printer=g.header_red=g.example_group_red=g.failed_examples=g.snippet_extractor=g.example_count=a,g.$initialize=l=function(t){{var n=this;l.$$p}return l.$$p=null,e.find_super_dispatcher(n,"initialize",l,null).apply(n,[t]),n.example_group_number=0,n.example_number=0,n.header_red=a,n.printer=v.get("HtmlPrinter").$new(t)},m.$private(),g.$method_missing=_=function(e,t){_.$$p;return t=i.call(arguments,1),_.$$p=null,a},m.$public(),g.$message=function(){return a},g.$example_group_number=function(){var e=this;return e.example_group_number},g.$example_number=function(){var e=this;return e.example_number},g.$start=p=function(t){{var n=this;p.$$p}return p.$$p=null,e.find_super_dispatcher(n,"start",p,null).apply(n,[t]),n.printer.$print_html_start(),n.printer.$flush()},g.$example_group_started=d=function(n){{var r=this;d.$$p}return d.$$p=null,e.find_super_dispatcher(r,"example_group_started",d,null).apply(r,[n]),r.example_group_red=!1,r.example_group_number=t(r.example_group_number,1),r.$example_group_number()["$=="](1)||r.printer.$print_example_group_end(),r.printer.$print_example_group_start(r.$example_group_number(),n.$description(),n.$parent_groups().$size()),r.printer.$flush()},g.$start_dump=function(){var e=this;return e.printer.$print_example_group_end(),e.printer.$flush()},g.$example_started=f=function(n){{var r=this;f.$$p}return f.$$p=null,e.find_super_dispatcher(r,"example_started",f,null).apply(r,[n]),r.example_number=t(r.example_number,1)},g.$example_passed=function(e){var t=this;return t.printer.$move_progress(t.$percent_done()),t.printer.$print_example_passed(e.$description(),e.$execution_result()["$[]"]("run_time")),t.printer.$flush()},g.$example_failed=h=function(t){var n,r=this,$=(h.$$p,a),o=a,i=a;return h.$$p=null,e.find_super_dispatcher(r,"example_failed",h,null).apply(r,[t]),((n=r.header_red)===a||n.$$is_boolean&&1!=n)&&(r.header_red=!0,r.printer.$make_header_red()),((n=r.example_group_red)===a||n.$$is_boolean&&1!=n)&&(r.example_group_red=!0,r.printer.$make_example_group_header_red(r.$example_group_number())),r.printer.$move_progress(r.$percent_done()),$=t.$metadata()["$[]"]("execution_result")["$[]"]("exception"),o=function(){return $!==!1&&$!==a?u(["message","backtrace"],{message:$.$message(),backtrace:r.$format_backtrace($.$backtrace(),t).$join("\n")}):!1}(),i=r.$extra_failure_content($),r.printer.$print_example_failed(t.$execution_result()["$[]"]("pending_fixed"),t.$description(),t.$execution_result()["$[]"]("run_time"),r.failed_examples.$size(),o,function(){return(n=i["$=="](""))===a||n.$$is_boolean&&1!=n?i:!1}(),!0),r.printer.$flush()},g.$example_pending=function(e){var t,n=this;return((t=n.header_red)===a||t.$$is_boolean&&1!=t)&&n.printer.$make_header_yellow(),((t=n.example_group_red)===a||t.$$is_boolean&&1!=t)&&n.printer.$make_example_group_header_yellow(n.$example_group_number()),n.printer.$move_progress(n.$percent_done()),n.printer.$print_example_pending(e.$description(),e.$metadata()["$[]"]("execution_result")["$[]"]("pending_message")),n.printer.$flush()},g.$extra_failure_content=function(e){var t,n,r,$=this,o=a;return $.$require("rspec/core/formatters/snippet_extractor"),o=(t=(n=e.$backtrace()).$map,t.$$p=(r=function(e){var t=r.$$s||this;return null==e&&(e=a),t.$configuration().$backtrace_formatter().$backtrace_line(e)},r.$$s=$,r),t).call(n),o["$compact!"](),(t=$.snippet_extractor)!==!1&&t!==a?t:$.snippet_extractor=v.get("SnippetExtractor").$new(),'    <pre class="ruby"><code>'+$.snippet_extractor.$snippet(o)+"</code></pre>"},g.$percent_done=function(){var e=this,t=a;return t=100,n(e.example_count,0)&&(t=r($(r(e.$example_number().$to_f(),e.example_count.$to_f()),1e3).$to_i(),10).$to_f()),t
},g.$dump_failures=function(){return a},g.$dump_pending=function(){return a},g.$dump_summary=function(e,t,n,r){var $=this;return $.printer.$print_summary($["$dry_run?"](),e,t,n,r),$.printer.$flush()},a&&"dump_summary"}(l,_.get("BaseTextFormatter"))}(l)}(l)}(o)},Opal.modules["rspec/core/formatters/progress_formatter"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$require","$print","$output","$success_color","$pending_color","$failure_color","$puts"]),t.$require("rspec/core/formatters/base_text_formatter"),function(t){{var o=r(t,"RSpec");o.$$proto,o.$$scope}!function(t){{var o=r(t,"Core");o.$$proto,o.$$scope}!function(t){var o=r(t,"Formatters"),a=(o.$$proto,o.$$scope);!function(t,$super){function r(){}{var o,a,i,s,c=r=$(t,$super,"ProgressFormatter",r),u=c.$$proto;c.$$scope}return u.$example_passed=o=function(t){{var n=this;o.$$p}return o.$$p=null,e.find_super_dispatcher(n,"example_passed",o,null).apply(n,[t]),n.$output().$print(n.$success_color("."))},u.$example_pending=a=function(t){{var n=this;a.$$p}return a.$$p=null,e.find_super_dispatcher(n,"example_pending",a,null).apply(n,[t]),n.$output().$print(n.$pending_color("*"))},u.$example_failed=i=function(t){{var n=this;i.$$p}return i.$$p=null,e.find_super_dispatcher(n,"example_failed",i,null).apply(n,[t]),n.$output().$print(n.$failure_color("F"))},u.$start_dump=s=function(){{var t=this;s.$$p}return s.$$p=null,e.find_super_dispatcher(t,"start_dump",s,null).apply(t,[]),t.$output().$puts()},n&&"start_dump"}(o,a.get("BaseTextFormatter"))}(o)}(o)}(t)},Opal.modules.json=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.hash2,o=e.klass;return e.add_stubs(["$new","$push","$[]=","$[]","$create_id","$json_create","$attr_accessor","$create_id=","$===","$parse","$generate","$from_object","$to_json","$responds_to?","$to_io","$write","$to_s","$to_a","$strftime"]),function(t){function o(t,r){switch(typeof t){case"string":return t;case"number":return t;case"boolean":return!!t;case"null":return n;case"object":if(!t)return n;if(t.$$is_array){for(var $=r.array_class.$new(),a=0,i=t.length;i>a;a++)$.$push(o(t[a],r));return $}var s=r.object_class.$new();for(var u in t)l.call(t,u)&&s["$[]="](u,o(t[u],r));var _;return(_=s["$[]"](c.get("JSON").$create_id()))!=n?(_=e.cget(_),_.$json_create(s)):s}}var a,i,s=r(t,"JSON"),c=(s.$$proto,s.$$scope),u=JSON.parse,l=e.hasOwnProperty;!function(e){e.$$scope,e.$$proto;return e.$attr_accessor("create_id")}(s.$singleton_class()),a=["json_class"],i=s,i["$create_id="].apply(i,a),a[a.length-1],e.defs(s,"$[]",function(e,t){var r,o=this;return null==t&&(t=$([],{})),(r=c.get("String")["$==="](e))===n||r.$$is_boolean&&1!=r?o.$generate(e,t):o.$parse(e,t)}),e.defs(s,"$parse",function(e,t){var n=this;return null==t&&(t=$([],{})),n.$from_object(u(e),t)}),e.defs(s,"$parse!",function(e,t){var n=this;return null==t&&(t=$([],{})),n.$parse(e,t)}),e.defs(s,"$from_object",function(e,t){var r,a,i;return null==t&&(t=$([],{})),r="object_class",a=t,(i=a["$[]"](r))!==!1&&i!==n?i:a["$[]="](r,c.get("Hash")),r="array_class",a=t,(i=a["$[]"](r))!==!1&&i!==n?i:a["$[]="](r,c.get("Array")),o(e,t.smap)}),e.defs(s,"$generate",function(e,t){return null==t&&(t=$([],{})),e.$to_json(t)}),e.defs(s,"$dump",function(e,t,r){var $,o=this,a=n;return null==t&&(t=n),null==r&&(r=n),a=o.$generate(e),t!==!1&&t!==n?(($=t["$responds_to?"]("to_io"))===n||$.$$is_boolean&&1!=$||(t=t.$to_io()),t.$write(a),t):a})}(t),function(t,$super){function r(){}{var $=r=o(t,$super,"Object",r);$.$$proto,$.$$scope}return e.defn($,"$to_json",function(){var e=this;return e.$to_s().$to_json()}),n&&"to_json"}(t,null),function(t){{var n=r(t,"Enumerable");n.$$proto,n.$$scope}e.defn(n,"$to_json",function(){var e=this;return e.$to_a().$to_json()})}(t),function(e,$super){function t(){}{var r=t=o(e,$super,"Array",t),$=r.$$proto;r.$$scope}return $.$to_json=function(){for(var e=this,t=[],n=0,r=e.length;r>n;n++)t.push(e[n].$to_json());return"["+t.join(", ")+"]"},n&&"to_json"}(t,null),function(e,$super){function t(){}{var r=t=o(e,$super,"Boolean",t),$=r.$$proto;r.$$scope}return $.$to_json=function(){var e=this;return 1==e?"true":"false"},n&&"to_json"}(t,null),function(e,$super){function t(){}{var r=t=o(e,$super,"Hash",t),$=r.$$proto;r.$$scope}return $.$to_json=function(){for(var e,t,n=this,r=[],$=n.keys,o=n.map,a=n.smap,i=0,s=$.length;s>i;i++){var c=$[i];c.$$is_string?(e=a,t=c):(e=o,t=c.$hash()),r.push(c.$to_s().$to_json()+":"+e[t].$to_json())}return"{"+r.join(", ")+"}"},n&&"to_json"}(t,null),function(e,$super){function t(){}{var r=t=o(e,$super,"NilClass",t),$=r.$$proto;r.$$scope}return $.$to_json=function(){return"null"},n&&"to_json"}(t,null),function(e,$super){function t(){}{var r=t=o(e,$super,"Numeric",t),$=r.$$proto;r.$$scope}return $.$to_json=function(){var e=this;return e.toString()},n&&"to_json"}(t,null),function(t,$super){function n(){}{var r=n=o(t,$super,"String",n),$=r.$$proto;r.$$scope}return e.defn(r,"$to_json",$.$inspect)}(t,null),function(e,$super){function t(){}{var r=t=o(e,$super,"Time",t),$=r.$$proto;r.$$scope}return $.$to_json=function(){var e=this;return e.$strftime("%FT%T%z").$to_json()},n&&"to_json"}(t,null),function(e,$super){function t(){}{var r=t=o(e,$super,"Date",t),$=r.$$proto;r.$$scope}return $.$to_json=function(){var e=this;return e.$to_s().$to_json()},$.$as_json=function(){var e=this;return e.$to_s()},n&&"as_json"}(t,null)},Opal.modules["rspec/core/formatters/json_formatter"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.dynamic_require_severity="warning";var n=e.top,r=e.nil,$=(e.breaker,e.slice),o=e.module,a=e.klass,i=e.hash2,s=e.gvars;return e.add_stubs(["$require","$attr_reader","$<<","$[]","$[]=","$summary_line","$mute_profile_output?","$dump_profile","$pluralize","$map","$tap","$exception","$name","$class","$message","$backtrace","$format_example","$examples","$write","$output","$to_json","$===","$!","$==","$close","$dump_profile_slowest_examples","$dump_profile_slowest_example_groups","$slowest_examples","$execution_result","$update","$slowest_groups","$private","$description","$full_description","$metadata"]),n.$require("rspec/core/formatters/base_formatter"),n.$require("json"),function(n){{var c=o(n,"RSpec");c.$$proto,c.$$scope}!function(n){{var c=o(n,"Core");c.$$proto,c.$$scope}!function(n){var c=o(n,"Formatters"),u=(c.$$proto,c.$$scope);!function(n,$super){function o(){}var c,u,l,_=o=a(n,$super,"JsonFormatter",o),p=_.$$proto,d=_.$$scope;return p.output_hash=r,_.$attr_reader("output_hash"),p.$initialize=c=function(){var t=$.call(arguments,0),n=this,r=c.$$p;return c.$$p=null,e.find_super_dispatcher(n,"initialize",c,r).apply(n,t),n.output_hash=i([],{})},p.$message=function(e){var t,n,$,o=this;return(t="messages",n=o.output_hash,($=n["$[]"](t))!==!1&&$!==r?$:n["$[]="](t,[]))["$<<"](e)},p.$dump_summary=u=function(t,n,$,o){{var a,s=this;u.$$p}return u.$$p=null,e.find_super_dispatcher(s,"dump_summary",u,null).apply(s,[t,n,$,o]),s.output_hash["$[]="]("summary",i(["duration","example_count","failure_count","pending_count"],{duration:t,example_count:n,failure_count:$,pending_count:o})),s.output_hash["$[]="]("summary_line",s.$summary_line(n,$,o)),(a=s["$mute_profile_output?"]($))===r||a.$$is_boolean&&1!=a?s.$dump_profile():r},p.$summary_line=function(e,n,$){var o=this,a=r;return a=o.$pluralize(e,"example"),a["$<<"](", ")["$<<"](o.$pluralize(n,"failure")),t($,0)&&a["$<<"](", "+$+" pending"),a},p.$stop=l=function(){var t,n,o,a=$.call(arguments,0),s=this,c=l.$$p;return l.$$p=null,e.find_super_dispatcher(s,"stop",l,c).apply(s,a),s.output_hash["$[]="]("examples",(t=(n=s.$examples()).$map,t.$$p=(o=function(e){var t,n,$,a=o.$$s||this;return null==e&&(e=r),(t=(n=a.$format_example(e)).$tap,t.$$p=($=function(t){var n,o=($.$$s||this,r);return null==t&&(t=r),(n=o=e.$exception())===r||n.$$is_boolean&&1!=n?r:t["$[]="]("exception",i(["class","message","backtrace"],{"class":o.$class().$name(),message:o.$message(),backtrace:o.$backtrace()}))},$.$$s=a,$),t).call(n)},o.$$s=s,o),t).call(n))},p.$close=function(){var e,t,n=this;return null==s.stdout&&(s.stdout=r),n.$output().$write(n.output_hash.$to_json()),t=d.get("IO")["$==="](n.$output()),(e=t!==!1&&t!==r?n.$output()["$=="](s.stdout)["$!"]():t)===r||e.$$is_boolean&&1!=e?r:n.$output().$close()},p.$dump_profile=function(){var e=this;return e.output_hash["$[]="]("profile",i([],{})),e.$dump_profile_slowest_examples(),e.$dump_profile_slowest_example_groups()},p.$dump_profile_slowest_examples=function(){var e,t,n,$=this,o=r;return $.output_hash["$[]="]("profile",i([],{})),o=$.$slowest_examples(),$.output_hash["$[]"]("profile")["$[]="]("examples",(e=(t=o["$[]"]("examples")).$map,e.$$p=(n=function(e){var t,$,o,a=n.$$s||this;return null==e&&(e=r),(t=($=a.$format_example(e)).$tap,t.$$p=(o=function(t){o.$$s||this;return null==t&&(t=r),t["$[]="]("run_time",e.$execution_result()["$[]"]("run_time"))},o.$$s=a,o),t).call($)},n.$$s=$,n),e).call(t)),$.output_hash["$[]"]("profile")["$[]="]("slowest",o["$[]"]("slows")),$.output_hash["$[]"]("profile")["$[]="]("total",o["$[]"]("total"))},p.$dump_profile_slowest_example_groups=function(){var e,t,n,$,o=this;return e="profile",t=o.output_hash,(n=t["$[]"](e))!==!1&&n!==r?n:t["$[]="](e,i([],{})),o.output_hash["$[]"]("profile")["$[]="]("groups",(e=(t=o.$slowest_groups()).$map,e.$$p=($=function(e,t){$.$$s||this;return null==e&&(e=r),null==t&&(t=r),t.$update(i(["location"],{location:e}))},$.$$s=o,$),e).call(t))},_.$private(),p.$format_example=function(e){return i(["description","full_description","status","file_path","line_number"],{description:e.$description(),full_description:e.$full_description(),status:e.$execution_result()["$[]"]("status"),file_path:e.$metadata()["$[]"]("file_path"),line_number:e.$metadata()["$[]"]("line_number")})},r&&"format_example"}(c,u.get("BaseFormatter"))}(c)}(c)}(n)},Opal.modules["rspec/core/configuration"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function $(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}function o(e,t){return"number"==typeof e&&"number"==typeof t?e>=t:e["$>="](t)}e.dynamic_require_severity="warning";var a=e.top,i=e.nil,s=e.breaker,c=e.slice,u=e.module,l=e.klass,_=e.hash2,p=e.gvars,d=e.range;return e.add_stubs(["$require","$include","$define_method","$instance_variable_defined?","$instance_variable_get","$value_for","$deprecate","$alias_method","$define_predicate_for","$each","$has_key?","$raise","$[]","$deprecate_alias_key","$define_aliases","$attr_writer","$define_reader","$Array","$add_setting","$!","$equal?","$warn","$inspect","$output_stream","$first_non_rspec_line","$warning","$attr_accessor","$attr_reader","$new","$force","$ordering_manager","$merge!","$warnings=","$clear","$delete","$class_eval","$send","$mock_with","$exclusion_patterns","$exclusion_patterns=","$inclusion_patterns","$inclusion_patterns=","$===","$to_s","$map","$respond_to?","$framework_name","$==","$assert_no_example_groups_defined","$configuration","$empty?","$expect_with","$expecting_with_rspec=","$any?","$length","$first","$push","$full_backtrace?","$full_backtrace=","$output_to_tty?","$windows_os?","$unshift","$filter_run","$to_i","$fetch","$filter","$union","$built_in_formatter","$custom_formatter","$<<","$formatters","$file_at","$add_formatter","$deprecation_stream","$is_a?","$flatten","$command","$running_in_drb?","$default_path","$files_to_run=","$get_files_to_run","$build_hash_from","$alias_example_to","$alias_it_behaves_like_to","$include_with_low_priority","$filter_manager","$include!","$inclusions","$exclude_with_low_priority","$exclude!","$exclusions","$include_or_extend_modules","$any_apply?","$select","$directory?","$add_to_load_path","$to_f","$extend","$include?","$included_modules","$mock_framework","$expectation_frameworks","$load","$expand_path","$uniq","$files_to_run","$lambda","$__send__","$to_proc","$delegate_to_ordering_manager","$module_eval","$let","$deprecation_stream=","$private","$sort","$flat_map","$gsub","$gather_directories","$extract_location","$pattern","$=~","$escape","$split","$add_location","$last","$example_groups","$world","$tty?","$string_const?","$inject","$const_get","$path_for","$retry","$underscore_with_fix_for_non_standard_rspec_naming","$sub","$underscore","$dup","$gsub!","$tr!","$downcase!","$mkdir_p","$dirname"]),a.$require("fileutils"),a.$require("rspec/core/backtrace_formatter"),a.$require("rspec/core/ruby_project"),a.$require("rspec/core/formatters/deprecation_formatter"),function(a){{var f=u(a,"RSpec");f.$$proto,f.$$scope}!function(a){{var f=u(a,"Core");f.$$proto,f.$$scope}!function(a,$super){function f(){}var h,m,g,v,b,y,x=f=l(a,$super,"Configuration",f),w=x.$$proto,k=x.$$scope;return w.reporter=w.output_stream=w.spec_files_loaded=w.preferred_options=w.formatters=w.mock_framework=w.backtrace_formatter=w.expectation_frameworks=w.color=w.requires=w.profile_examples=w.format_docstrings_block=i,x.$include(k.get("RSpec").$$scope.get("Core").$$scope.get("Hooks")),function(e,$super){function t(){}{var n=t=l(e,$super,"MustBeConfiguredBeforeExampleGroupsError",t);n.$$proto,n.$$scope}return i}(x,k.get("StandardError")),e.defs(x,"$define_reader",function(e){var t,n,r,$=this;return(t=(n=$).$define_method,t.$$p=(r=function(){var t,n=r.$$s||this,$=i;return $=function(){return(t=n["$instance_variable_defined?"]("@"+e))===i||t.$$is_boolean&&1!=t?i:n.$instance_variable_get("@"+e)}(),n.$value_for(e,$)},r.$$s=$,r),t).call(n,e)}),e.defs(x,"$deprecate_alias_key",function(){return k.get("RSpec").$deprecate("add_setting with :alias option",_(["replacement"],{replacement:":alias_with"}))}),e.defs(x,"$define_aliases",function(e,t){var n=this;return n.$alias_method(t,e),n.$alias_method(""+t+"=",""+e+"="),n.$define_predicate_for(t)}),e.defs(x,"$define_predicate_for",function(e){var t,n,r,$=this;return e=c.call(arguments,0),(t=(n=e).$each,t.$$p=(r=function(e){var t=r.$$s||this;return null==e&&(e=i),t.$alias_method(""+e+"?",e)},r.$$s=$,r),t).call(n)}),e.defs(x,"$add_setting",function(e,t){var n,r,$,o=this;return null==t&&(t=_([],{})),(n=t["$has_key?"]("default"))===i||n.$$is_boolean&&1!=n||o.$raise("Use the instance add_setting method if you want to set a default"),(n=t["$[]"]("alias"))===i||n.$$is_boolean&&1!=n?(o.$attr_writer(e),o.$define_reader(e),o.$define_predicate_for(e)):(o.$deprecate_alias_key(),o.$define_aliases(t["$[]"]("alias"),e)),(n=(r=o.$Array(t["$[]"]("alias_with"))).$each,n.$$p=($=function(t){var n=$.$$s||this;return null==t&&(t=i),n.$define_aliases(e,t)},$.$$s=o,$),n).call(r)}),x.$add_setting("default_path"),x.$add_setting("drb"),x.$add_setting("drb_port"),x.$add_setting("error_stream"),x.$add_setting("deprecation_stream"),x.$add_setting("fail_fast"),x.$add_setting("dry_run"),x.$add_setting("failure_exit_code"),x.$define_reader("requires"),x.$define_reader("libs"),x.$define_reader("output_stream"),w["$output_stream="]=function(e){var n,r,$=this;return r=$.reporter,(n=r!==!1&&r!==i?e["$equal?"]($.output_stream)["$!"]():r)===i||n.$$is_boolean&&1!=n?$.output_stream=e:$.$warn(t(t(t("RSpec's reporter has already been initialized with ",""+$.$output_stream().$inspect()+" as the output stream, so your change to "),"`output_stream` will be ignored. You should configure it earlier for "),"it to take effect. (Called from "+k.get("CallerFilter").$first_non_rspec_line()+")"))},x.$add_setting("pattern",_(["alias_with"],{alias_with:"filename_pattern"})),w["$pattern="]=function(e){var t,n=this;return(t=n.spec_files_loaded)===i||t.$$is_boolean&&1!=t||k.get("RSpec").$warning("Configuring `pattern` to "+e+" has no effect since RSpec has already loaded the spec files."),n.pattern=e},e.defn(x,"$filename_pattern=",w["$pattern="]),x.$add_setting("profile_examples"),x.$add_setting("run_all_when_everything_filtered"),x.$add_setting("success_color"),x.$add_setting("pending_color"),x.$add_setting("failure_color"),x.$add_setting("default_color"),x.$add_setting("fixed_color"),x.$add_setting("detail_color"),x.$add_setting("show_failures_in_pending_blocks"),w["$treat_symbols_as_metadata_keys_with_true_values="]=function(){return k.get("RSpec").$deprecate("RSpec::Core::Configuration#treat_symbols_as_metadata_keys_with_true_values=")},x.$add_setting("tty"),x.$add_setting("include_or_extend_modules"),x.$add_setting("files_to_run"),x.$add_setting("expecting_with_rspec"),x.$attr_accessor("filter_manager"),x.$attr_reader("backtrace_formatter","ordering_manager"),e.defn(x,"$backtrace_cleaner",w.$backtrace_formatter),w.$initialize=function(){var e=this;return null==p.stderr&&(p.stderr=i),null==p.stdout&&(p.stdout=i),e.expectation_frameworks=[],e.include_or_extend_modules=[],e.mock_framework=i,e.files_to_run=[],e.formatters=[],e.color=!1,e.pattern="**/*_spec.rb",e.failure_exit_code=1,e.spec_files_loaded=!1,e.backtrace_formatter=k.get("BacktraceFormatter").$new(),e.default_path="spec",e.deprecation_stream=p.stderr,e.output_stream=p.stdout,e.reporter=i,e.filter_manager=k.get("FilterManager").$new(),e.ordering_manager=k.get("Ordering").$$scope.get("ConfigurationManager").$new(),e.preferred_options=_([],{}),e.failure_color="red",e.success_color="green",e.pending_color="yellow",e.default_color="white",e.fixed_color="blue",e.detail_color="cyan",e.profile_examples=!1,e.requires=[],e.libs=[]},w.$force=function(e){var t,n,r=this;return r.$ordering_manager().$force(e),r.preferred_options["$merge!"](e),t=[r.$value_for("warnings",i)],n=r,n["$warnings="].apply(n,t),t[t.length-1]},w.$reset=function(){var e=this;return e.spec_files_loaded=!1,e.reporter=i,e.formatters.$clear()},w.$add_setting=function(e,t){var n,r,$,o=this,a=i;return null==t&&(t=_([],{})),a=t.$delete("default"),(n=(r=function(e){e.$$scope,e.$$proto;return e}(o.$singleton_class())).$class_eval,n.$$p=($=function(){var n=$.$$s||this;return n.$add_setting(e,t)},$.$$s=o,$),n).call(r),a!==!1&&a!==i?o.$send(""+e+"=",a):i},w.$mock_framework=function(){var e,t=this;return((e=t.mock_framework)===i||e.$$is_boolean&&1!=e)&&t.$mock_with("rspec"),t.mock_framework},w["$mock_framework="]=function(e){var t=this;return t.$mock_with(e)},w.$backtrace_exclusion_patterns=function(){var e=this;return e.backtrace_formatter.$exclusion_patterns()},w["$backtrace_exclusion_patterns="]=function(e){var t,n,r=this;return t=[e],n=r.backtrace_formatter,n["$exclusion_patterns="].apply(n,t),t[t.length-1]},w.$backtrace_inclusion_patterns=function(){var e=this;return e.backtrace_formatter.$inclusion_patterns()},w["$backtrace_inclusion_patterns="]=function(e){var t,n,r=this;return t=[e],n=r.backtrace_formatter,n["$inclusion_patterns="].apply(n,t),t[t.length-1]},w.$mock_with=h=function(t){var n,r,$,o,a=this,c=h.$$p,u=c||i,l=i,_=i,p=i,d=i;return h.$$p=null,l=function(){return _=t,k.get("Module")["$==="](_)?t:k.get("String")["$==="](_)||k.get("Symbol")["$==="](_)?(a.$require(function(){return _=t.$to_s(),/rspec/i["$==="](_)?"rspec/core/mocking/with_rspec":/mocha/i["$==="](_)?"rspec/core/mocking/with_mocha":/rr/i["$==="](_)?"rspec/core/mocking/with_rr":/flexmock/i["$==="](_)?"rspec/core/mocking/with_flexmock":"rspec/core/mocking/with_absolutely_nothing"}()),k.get("RSpec").$$scope.get("Core").$$scope.get("MockFrameworkAdapter")):i}(),n=e.to_ary((r=($=[l,a.mock_framework]).$map,r.$$p=(o=function(e){{var t;o.$$s||this}return null==e&&(e=i),(t=e["$respond_to?"]("framework_name"))===i||t.$$is_boolean&&1!=t?"unnamed":e.$framework_name()},o.$$s=a,o),r).call($)),p=null==n[0]?i:n[0],d=null==n[1]?i:n[1],p["$=="](d)||a.$assert_no_example_groups_defined("mock_framework"),u!==i&&(((n=l["$respond_to?"]("configuration"))===i||n.$$is_boolean&&1!=n)&&a.$raise(""+l+" must respond to `configuration` so that mock_with can yield it."),e.yield1(u,l.$configuration())===s)?s.$v:a.mock_framework=l},w.$expectation_frameworks=function(){var e,t=this;return(e=t.expectation_frameworks["$empty?"]())===i||e.$$is_boolean&&1!=e||t.$expect_with("rspec"),t.expectation_frameworks},w["$expectation_framework="]=function(e){var t=this;return t.$expect_with(e)},w.$expect_with=m=function(t){var $,o,a,u=this,l=m.$$p,_=l||i,p=i;return t=c.call(arguments,0),m.$$p=null,p=($=(o=t).$map,$.$$p=(a=function(t){var n,r,$=a.$$s||this,o=i;return null==t&&(t=i),function(){return o=t,k.get("Module")["$==="](o)?t:"rspec"["$==="](o)?($.$require("rspec/expectations"),n=[!0],r=$,r["$expecting_with_rspec="].apply(r,n),n[n.length-1],e.get("RSpec").$$scope.get("Matchers")):"stdlib"["$==="](o)?($.$require("test/unit/assertions"),e.get("Test").$$scope.get("Unit").$$scope.get("Assertions")):$.$raise(k.get("ArgumentError"),""+t.$inspect()+" is not supported")}()},a.$$s=u,a),$).call(o),($=n(p,u.expectation_frameworks)["$any?"]())===i||$.$$is_boolean&&1!=$||u.$assert_no_example_groups_defined("expect_with"),_!==i&&(r(p.$length(),1)&&u.$raise("expect_with only accepts a block with a single argument. Call expect_with "+p.$length()+" times, once with each argument, instead."),(($=p.$first()["$respond_to?"]("configuration"))===i||$.$$is_boolean&&1!=$)&&u.$raise(""+p.$first()+" must respond to `configuration` so that expect_with can yield it."),e.yield1(_,p.$first().$configuration())===s)?s.$v:($=u.expectation_frameworks).$push.apply($,[].concat(p))},w["$full_backtrace?"]=function(){var e=this;return e.backtrace_formatter["$full_backtrace?"]()},w["$full_backtrace="]=function(e){var t,n,r=this;return t=[e],n=r.backtrace_formatter,n["$full_backtrace="].apply(n,t),t[t.length-1]},w.$color=function(e){var t,n=this;return null==e&&(e=n.$output_stream()),(t=n["$output_to_tty?"](e))===i||t.$$is_boolean&&1!=t?!1:n.$value_for("color",n.color)},w["$color="]=function(e){var t,n,r=this;return e!==!1&&e!==i?(n=k.get("RSpec")["$windows_os?"](),(t=n!==!1&&n!==i?k.get("ENV")["$[]"]("ANSICON")["$!"]():n)===i||t.$$is_boolean&&1!=t?r.color=!0:(k.get("RSpec").$warning("You must use ANSICON 1.31 or later (http://adoxa.3eeweb.com/ansicon/) to use colour on Windows"),r.color=!1)):i},x.$alias_method("color_enabled","color"),x.$alias_method("color_enabled=","color="),x.$define_predicate_for("color_enabled","color"),w["$libs="]=function(e){var t,n,r,$=this;return(t=(n=e).$map,t.$$p=(r=function(e){var t=r.$$s||this;return null==t.libs&&(t.libs=i),null==p.LOAD_PATH&&(p.LOAD_PATH=i),null==e&&(e=i),t.libs.$unshift(e),p.LOAD_PATH.$unshift(e)},r.$$s=$,r),t).call(n)},w["$requires="]=function(e){var n,r,$,o=this;return k.get("RSpec").$deprecate("RSpec::Core::Configuration#requires=(paths)",_(["replacement"],{replacement:"paths.each {|path| require path}"})),(n=(r=e).$map,n.$$p=($=function(e){var t=$.$$s||this;return null==e&&(e=i),t.$require(e)},$.$$s=o,$),n).call(r),o.requires=t(o.requires,e)},w["$line_numbers="]=function(e){var t,n,r,$=this;return $.$filter_run(_(["line_numbers"],{line_numbers:(t=(n=e).$map,t.$$p=(r=function(e){r.$$s||this;return null==e&&(e=i),e.$to_i()},r.$$s=$,r),t).call(n)}))},w.$line_numbers=function(){var e=this;return e.$filter().$fetch("line_numbers",[])},w["$full_description="]=function(e){var t,n,r,$,o=this;return o.$filter_run(_(["full_description"],{full_description:(t=k.get("Regexp")).$union.apply(t,[].concat((n=(r=o.$Array(e)).$map,n.$$p=($=function(e){$.$$s||this;return null==e&&(e=i),k.get("Regexp").$new(e)},$.$$s=o,$),n).call(r)))}))},w.$full_description=function(){var e=this;return e.$filter().$fetch("full_description",i)},w.$add_formatter=function(e,t){var n,r,$,o,a=this,s=i;return t=c.call(arguments,1),s=(n=(r=a.$built_in_formatter(e))!==!1&&r!==i?r:a.$custom_formatter(e))!==!1&&n!==i?n:a.$raise(k.get("ArgumentError"),"Formatter '"+e+"' unknown - maybe you meant 'documentation' or 'progress'?."),(n=t["$empty?"]())===i||n.$$is_boolean&&1!=n||t["$<<"](a.$output_stream()),a.$formatters()["$<<"]((n=s).$new.apply(n,[].concat((r=($=t).$map,r.$$p=(o=function(e){var t,n=o.$$s||this;return null==e&&(e=i),(t=k.get("String")["$==="](e))===i||t.$$is_boolean&&1!=t?e:n.$file_at(e)},o.$$s=a,o),r).call($))))},x.$alias_method("formatter=","add_formatter"),w.$formatters=function(){var e,t=this;return(e=t.formatters)!==!1&&e!==i?e:t.formatters=[]},w.$reporter=function(){var e,t,n=this;return(e=n.reporter)!==!1&&e!==i?e:n.reporter=function(){return(t=n.$formatters()["$empty?"]())===i||t.$$is_boolean&&1!=t||n.$add_formatter("progress"),n.$add_formatter(k.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("DeprecationFormatter"),n.$deprecation_stream(),n.$output_stream()),(t=k.get("Reporter")).$new.apply(t,[n].concat(n.$formatters()))}()},w.$profile_examples=function(){var e,t,n=this,r=i;return r=n.$value_for("profile_examples",n.profile_examples),(e=(t=r!==!1&&r!==i)?r["$is_a?"](k.get("Integer"))["$!"]():t)===i||e.$$is_boolean&&1!=e?r:10},w["$files_or_directories_to_run="]=function(e){var t,n,r,$,o=this;return e=c.call(arguments,0),e=e.$flatten(),r=($=o.$command()["$=="]("rspec"))!==!1&&$!==i?$:k.get("Runner")["$running_in_drb?"](),n=r!==!1&&r!==i?o.$default_path():r,(t=n!==!1&&n!==i?e["$empty?"]():n)===i||t.$$is_boolean&&1!=t||e["$<<"](o.$default_path()),t=[o.$get_files_to_run(e)],n=o,n["$files_to_run="].apply(n,t),t[t.length-1]},w.$alias_example_to=function(e,t){var n=i;return t=c.call(arguments,1),n=k.get("Metadata").$build_hash_from(t),k.get("RSpec").$$scope.get("Core").$$scope.get("ExampleGroup").$alias_example_to(e,n)},w.$alias_it_behaves_like_to=function(e,t){return null==t&&(t=""),k.get("RSpec").$$scope.get("Core").$$scope.get("ExampleGroup").$alias_it_behaves_like_to(e,t)},x.$alias_method("alias_it_should_behave_like_to","alias_it_behaves_like_to"),w.$filter_run_including=function(e){var t=this;return e=c.call(arguments,0),t.$filter_manager().$include_with_low_priority(k.get("Metadata").$build_hash_from(e))},x.$alias_method("filter_run","filter_run_including"),w["$inclusion_filter="]=function(e){var t=this;return t.$filter_manager()["$include!"](k.get("Metadata").$build_hash_from([e]))},x.$alias_method("filter=","inclusion_filter="),w.$inclusion_filter=function(){var e=this;return e.$filter_manager().$inclusions()},x.$alias_method("filter","inclusion_filter"),w.$filter_run_excluding=function(e){var t=this;return e=c.call(arguments,0),t.$filter_manager().$exclude_with_low_priority(k.get("Metadata").$build_hash_from(e))},w["$exclusion_filter="]=function(e){var t=this;return t.$filter_manager()["$exclude!"](k.get("Metadata").$build_hash_from([e]))},w.$exclusion_filter=function(){var e=this;return e.$filter_manager().$exclusions()},w.$include=function(e,t){var n=this;return t=c.call(arguments,1),n.$include_or_extend_modules()["$<<"](["include",e,k.get("Metadata").$build_hash_from(t)])},w.$extend=function(e,t){var n=this;return t=c.call(arguments,1),n.$include_or_extend_modules()["$<<"](["extend",e,k.get("Metadata").$build_hash_from(t)])},w.$configure_group=function(e){var t,n,r,$=this;return(t=(n=$.$include_or_extend_modules()).$each,t.$$p=(r=function(t,n,$){var o,a,s=r.$$s||this;return null==t&&(t=i),null==n&&(n=i),null==$&&($=i),(o=(a=$["$empty?"]())!==!1&&a!==i?a:e["$any_apply?"]($))===i||o.$$is_boolean&&1!=o?i:s.$send("safe_"+t,n,e)},r.$$s=$,r),t).call(n)},w.$safe_include=function(e,t){return $(t,e)?i:t.$send("include",e)},w.$setup_load_path_and_require=function(e){var n,r,$,o,a,s,c=this,u=i;return u=(n=(r=["lib",c.$default_path()]).$select,n.$$p=($=function(e){$.$$s||this;return null==e&&(e=i),k.get("File")["$directory?"](e)},$.$$s=c,$),n).call(r),(n=k.get("RSpec").$$scope.get("Core").$$scope.get("RubyProject")).$add_to_load_path.apply(n,[].concat(u)),(o=(a=e).$each,o.$$p=(s=function(e){var t=s.$$s||this;return null==e&&(e=i),t.$require(e)},s.$$s=c,s),o).call(a),c.requires=t(c.requires,e)},w.$safe_extend=o(k.get("RUBY_VERSION").$to_f(),1.9)?function(e,t){return $(function(e){e.$$scope,e.$$proto;return e}(t.$singleton_class()),e)?i:t.$extend(e)}:function(e,t){var n;return(n=function(e){e.$$scope,e.$$proto;return e}(t.$singleton_class()).$included_modules()["$include?"](e))===i||n.$$is_boolean&&1!=n?t.$extend(e):i},w.$configure_mock_framework=function(){var e=this;return k.get("RSpec").$$scope.get("Core").$$scope.get("ExampleGroup").$send("include",e.$mock_framework())},w.$configure_expectation_framework=function(){var e,t,n,r=this;return(e=(t=r.$expectation_frameworks()).$each,e.$$p=(n=function(e){n.$$s||this;return null==e&&(e=i),k.get("RSpec").$$scope.get("Core").$$scope.get("ExampleGroup").$send("include",e)},n.$$s=r,n),e).call(t)},w.$load_spec_files=function(){var e,t,n,r=this;return(e=(t=r.$files_to_run().$uniq()).$each,e.$$p=(n=function(e){var t=n.$$s||this;return null==e&&(e=i),t.$load(k.get("File").$expand_path(e))},n.$$s=r,n),e).call(t),r.spec_files_loaded=!0},e.cdecl(k,"DEFAULT_FORMATTER",(g=(v=x).$lambda,g.$$p=(b=function(e){b.$$s||this;return null==e&&(e=i),e},b.$$s=x,b),g).call(v)),w.$format_docstrings=y=function(){var e=this,t=y.$$p,n=t||i;return y.$$p=null,e.format_docstrings_block=function(){return n!==i?n:k.get("DEFAULT_FORMATTER")}()},w.$format_docstrings_block=function(){var e,t=this;return(e=t.format_docstrings_block)!==!1&&e!==i?e:t.format_docstrings_block=k.get("DEFAULT_FORMATTER")},e.defs(x,"$delegate_to_ordering_manager",function(e){var t,n,r,$=this;return e=c.call(arguments,0),(t=(n=e).$each,t.$$p=(r=function(e){var t,n,$,o=r.$$s||this;return null==e&&(e=i),(t=(n=o).$define_method,t.$$p=($=function(t){var n,r,o,a=$.$$s||this;return t=c.call(arguments,0),n=$.$$p||i,$.$$p=null,(r=(o=a.$ordering_manager()).$__send__,r.$$p=n.$to_proc(),r).apply(o,[e].concat(t))},$.$$s=o,$),t).call(n,e)},r.$$s=$,r),t).call(n)}),x.$delegate_to_ordering_manager("seed="),x.$delegate_to_ordering_manager("seed"),x.$delegate_to_ordering_manager("order="),x.$delegate_to_ordering_manager("register_ordering"),x.$delegate_to_ordering_manager("seed_used?","ordering_registry"),w["$warnings="]=function(e){return p.VERBOSE=e["$!"]()["$!"]()},w.$warnings=function(){return null==p.VERBOSE&&(p.VERBOSE=i),p.VERBOSE},w.$expose_current_running_example_as=function(e){var t,n,r,$=this;return(t=(n=k.get("ExposeCurrentExample")).$module_eval,t.$$p=(r=function(){var t,n,$,o=r.$$s||this;return o.$extend(k.get("RSpec").$$scope.get("SharedContext")),(t=(n=o).$let,t.$$p=($=function(e){$.$$s||this;return null==e&&(e=i),e},$.$$s=o,$),t).call(n,e)},r.$$s=$,r),t).call(n),$.$include(k.get("ExposeCurrentExample"))},function(e){{var t=u(e,"ExposeCurrentExample");t.$$proto,t.$$scope}}(x),w["$raise_errors_for_deprecations!"]=function(){var e,t,n=this;return e=[k.get("Formatters").$$scope.get("DeprecationFormatter").$$scope.get("RaiseErrorStream").$new()],t=n,t["$deprecation_stream="].apply(t,e),e[e.length-1]},x.$private(),w.$get_files_to_run=function(e){var t,n,r,$=this;return(t=(n=k.get("FlatMap")).$flat_map,t.$$p=(r=function(e){var t,n=r.$$s||this;return null==e&&(e=i),(t=k.get("File").$$scope.get("ALT_SEPARATOR"))===i||t.$$is_boolean&&1!=t||(e=e.$gsub(k.get("File").$$scope.get("ALT_SEPARATOR"),k.get("File").$$scope.get("SEPARATOR"))),(t=k.get("File")["$directory?"](e))===i||t.$$is_boolean&&1!=t?n.$extract_location(e):n.$gather_directories(e)},r.$$s=$,r),t).call(n,e).$sort()},w.$gather_directories=function(e){var t,n=this,r=i,$=i;return r="{"+n.$pattern().$gsub(/\s*,\s*/,",")+"}",$=function(){return k.get("Dir")["$[]"]((t=n.$pattern()["$=~"](new RegExp("^"+k.get("Regexp").$escape(e))))===i||t.$$is_boolean&&1!=t?""+e+"/"+r:r)}(),$.$sort()},w.$extract_location=function(e){var t,n,r,$,o,a=this,s=i;return(t=e["$=~"](/^(.*?)((?:\:\d+)+)$/))===i||t.$$is_boolean&&1!=t||(t=[(n=p["~"])===i?i:n["$[]"](1),(n=(r=((o=p["~"])===i?i:o["$[]"](2))["$[]"](d(1,-1,!1)).$split(":")).$map,n.$$p=($=function(e){$.$$s||this;return null==e&&(e=i),e.$to_i()},$.$$s=a,$),n).call(r)],e=t[0],s=t[1],a.$filter_manager().$add_location(e,s)),e},w.$command=function(){return null==p[0]&&(p[0]=i),p[0].$split(k.get("File").$$scope.get("SEPARATOR")).$last()},w.$value_for=function(e,t){var n,r=this;return null==t&&(t=i),(n=r.preferred_options["$has_key?"](e))===i||n.$$is_boolean&&1!=n?t:r.preferred_options["$[]"](e)},w.$assert_no_example_groups_defined=function(e){var n,r=this;return(n=k.get("RSpec").$world().$example_groups()["$any?"]())===i||n.$$is_boolean&&1!=n?i:r.$raise(k.get("MustBeConfiguredBeforeExampleGroupsError").$new(t("RSpec's "+e+" configuration option must be configured before ","any example groups are defined, but you have already defined a group.")))},w["$output_to_tty?"]=function(e){var t,n,r=this;return null==e&&(e=r.$output_stream()),(t=r["$tty?"]())!==!1&&t!==i?t:(n=e["$respond_to?"]("tty?"),n!==!1&&n!==i?e["$tty?"]():n)},w.$built_in_formatter=function(e){var t=this,n=i;return function(){return n=e.$to_s(),"d"["$==="](n)||"doc"["$==="](n)||"documentation"["$==="](n)||"s"["$==="](n)||"n"["$==="](n)||"spec"["$==="](n)||"nested"["$==="](n)?(t.$require("rspec/core/formatters/documentation_formatter"),k.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("DocumentationFormatter")):"h"["$==="](n)||"html"["$==="](n)?(t.$require("rspec/core/formatters/html_formatter"),k.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("HtmlFormatter")):"p"["$==="](n)||"progress"["$==="](n)?(t.$require("rspec/core/formatters/progress_formatter"),k.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("ProgressFormatter")):"j"["$==="](n)||"json"["$==="](n)?(t.$require("rspec/core/formatters/json_formatter"),k.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("JsonFormatter")):i
}()},w.$custom_formatter=function(t){var n,r,$,o=this;if(!((n=k.get("Class")["$==="](t))===i||n.$$is_boolean&&1!=n))return t;if((n=o["$string_const?"](t))===i||n.$$is_boolean&&1!=n)return i;try{return(n=(r=t.$gsub(/^::/,"").$split("::")).$inject,n.$$p=($=function(e,t){$.$$s||this;return null==e&&(e=i),null==t&&(t=i),e.$const_get(t)},$.$$s=o,$),n).call(r,k.get("Object"))}catch(a){if(e.rescue(a,[k.get("NameError")]))return(n=o.$require(o.$path_for(t)))===i||n.$$is_boolean&&1!=n?o.$raise():o.$retry();throw a}},w["$string_const?"]=function(e){var t;return t=e["$is_a?"](k.get("String")),t!==!1&&t!==i?/\A[A-Z][a-zA-Z0-9_:]*\z/["$=~"](e):t},w.$path_for=function(e){var t=this;return t.$underscore_with_fix_for_non_standard_rspec_naming(e)},w.$underscore_with_fix_for_non_standard_rspec_naming=function(e){var t=this;return t.$underscore(e).$sub(/(^|\/)r_spec($|\/)/,"\\1rspec\\2")},w.$underscore=function(e){var t=i;return t=e.$to_s().$dup(),t["$gsub!"](/::/,"/"),t["$gsub!"](/([A-Z]+)([A-Z][a-z])/,"\\1_\\2"),t["$gsub!"](/([a-z\d])([A-Z])/,"\\1_\\2"),t["$tr!"]("-","_"),t["$downcase!"](),t},w.$file_at=function(e){return k.get("FileUtils").$mkdir_p(k.get("File").$dirname(e)),k.get("File").$new(e,"w")},i&&"file_at"}(f,null)}(f)}(a)},Opal.modules["rspec/core/project_initializer"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$create_spec_helper_file","$create_dot_rspec_file","$delete_if_confirmed","$exist?","$report_exists","$report_creating","$open","$write","$mkdir_p","$puts","$=~","$gets","$rm_rf"]),function(e){{var t=r(e,"RSpec");t.$$proto,t.$$scope}!function(e){{var t=r(e,"Core");t.$$proto,t.$$scope}!function(e,$super){function t(){}var r=t=$(e,$super,"ProjectInitializer",t),o=r.$$proto,a=r.$$scope;return o.$initialize=function(e){var t=this;return null==e&&(e=n),t.arg=e},o.$run=function(){var e=this;return e.$create_spec_helper_file(),e.$create_dot_rspec_file(),e.$delete_if_confirmed("lib/tasks/rspec.rake","  If the file in lib/tasks/rspec.rake is the one generated by rspec-rails-1x,\n  you can get rid of it, as it is no longer needed with rspec-2.\n")},o.$create_dot_rspec_file=function(){var e,t,r,$=this;return(e=a.get("File")["$exist?"](".rspec"))===n||e.$$is_boolean&&1!=e?($.$report_creating(".rspec"),(e=(t=a.get("File")).$open,e.$$p=(r=function(e){r.$$s||this;return null==e&&(e=n),e.$write("--color\n--format progress\n")},r.$$s=$,r),e).call(t,".rspec","w")):$.$report_exists(".rspec")},o.$create_spec_helper_file=function(){var e,t,r,$=this;return(e=a.get("File")["$exist?"]("spec/spec_helper.rb"))===n||e.$$is_boolean&&1!=e?($.$report_creating("spec/spec_helper.rb"),a.get("FileUtils").$mkdir_p("spec"),(e=(t=a.get("File")).$open,e.$$p=(r=function(e){r.$$s||this;return null==e&&(e=n),e.$write("# This file was generated by the `rspec --init` command. Conventionally, all\n# specs live under a `spec` directory, which RSpec adds to the `$LOAD_PATH`.\n# Require this file using `require \"spec_helper\"` to ensure that it is only\n# loaded once.\n#\n# See http://rubydoc.info/gems/rspec-core/RSpec/Core/Configuration\nRSpec.configure do |config|\n  # Limit the spec run to only specs with the focus metadata. If no specs have\n  # the filtering metadata and `run_all_when_everything_filtered = true` then\n  # all specs will run.\n  #config.filter_run :focus\n\n  # Run all specs when none match the provided filter. This works well in\n  # conjunction with `config.filter_run :focus`, as it will run the entire\n  # suite when no specs have `:filter` metadata.\n  #config.run_all_when_everything_filtered = true\n\n  # Run specs in random order to surface order dependencies. If you find an\n  # order dependency and want to debug it, you can fix the order by providing\n  # the seed, which is printed after each run.\n  #     --seed 1234\n  #config.order = 'random'\nend\n")},r.$$s=$,r),e).call(t,"spec/spec_helper.rb","w")):$.$report_exists("spec/spec_helper.rb")},o.$delete_if_confirmed=function(e,t){var r,$=this;return(r=a.get("File")["$exist?"](e))===n||r.$$is_boolean&&1!=r?n:($.$puts(),$.$puts(t),$.$puts(),$.$puts("  delete   "+e+"? [y/n]"),(r=$.$gets()["$=~"](/y/i))===n||r.$$is_boolean&&1!=r?n:a.get("FileUtils").$rm_rf(e))},o.$report_exists=function(e){var t=this;return t.$puts("   exist   "+e)},o.$report_creating=function(e){var t=this;return t.$puts("  create   "+e)},n&&"report_creating"}(t,null)}(t)}(t)},Opal.modules["rspec/core/option_parser"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="warning";var n=e.top,r=e,$=e.nil,o=(e.breaker,e.slice,e.module),a=e.klass,i=e.hash2,s=e.range;return e.add_stubs(["$require","$parse!","$new","$alias_method","$empty?","$convert_deprecated_args","$delete","$parser","$abort","$message","$map!","$===","$deprecate","$banner=","$on","$[]","$[]=","$<<","$to_i","$run","$exit","$warning","$separator","$last","$nil?","$==","$Integer","$compile","$escape","$=~","$split","$gsub","$to_sym","$Float","$puts","$on_tail"]),n.$require("optparse"),function(n){{var r=o(n,"Core");r.$$proto,r.$$scope}!function(n,$super){function r(){}var o=r=a(n,$super,"Parser",r),c=o.$$proto,u=o.$$scope;return e.defs(o,"$parse!",function(e){var t=this;return t.$new()["$parse!"](e)}),function(e){e.$$scope,e.$$proto;return e.$alias_method("parse","parse!")}(o.$singleton_class()),c["$parse!"]=function(t){var n,r=this,o=$,a=$;if((n=t["$empty?"]())!==$&&(!n.$$is_boolean||1==n))return i([],{});r.$convert_deprecated_args(t),o=function(){return(n=t.$delete("--tty"))===$||n.$$is_boolean&&1!=n?i([],{}):i(["tty"],{tty:!0})}();try{r.$parser(o)["$parse!"](t)}catch(s){if(!e.rescue(s,[u.get("OptionParser").$$scope.get("InvalidOption")]))throw s;a=s,r.$abort(""+a.$message()+"\n\nPlease use --help for a listing of valid options")}return o},c.$convert_deprecated_args=function(e){var t,n,r,o=this;return(t=(n=e)["$map!"],t.$$p=(r=function(e){var t=(r.$$s||this,$);return null==e&&(e=$),function(){return t=e,"--formatter"["$==="](t)?(u.get("RSpec").$deprecate("the --formatter option",i(["replacement"],{replacement:"-f or --format"})),"--format"):"--default_path"["$==="](t)?"--default-path":"--line_number"["$==="](t)?"--line-number":e}()},r.$$s=o,r),t).call(n)},o.$alias_method("parse","parse!"),c.$parser=function(n){var r,o,a,c=this;return(r=(o=u.get("OptionParser")).$new,r.$$p=(a=function(r){var o,c,l,_,p,d,f,h,m,g,v,b,y,x,w,k,E,S,R,O,A,M,q,C,I,T,j,z,N,F,P,B,D,H,L,U,G,Y,V,X,K,W,Z,J,Q,et,tt,nt,rt,$t,ot,at,it,st=a.$$s||this;return null==r&&(r=$),o=["Usage: rspec [options] [files or directories]\n\n"],c=r,c["$banner="].apply(c,o),o[o.length-1],(o=(c=r).$on,o.$$p=(l=function(e){{var t,r,o;l.$$s||this}return null==e&&(e=$),t="libs",r=n,(o=r["$[]"](t))!==!1&&o!==$?o:r["$[]="](t,[]),n["$[]"]("libs")["$<<"](e)},l.$$s=st,l),o).call(c,"-I PATH","Specify PATH to add to $LOAD_PATH (may be used more than once)."),(o=(_=r).$on,o.$$p=(p=function(e){{var t,r,o;p.$$s||this}return null==e&&(e=$),t="requires",r=n,(o=r["$[]"](t))!==!1&&o!==$?o:r["$[]="](t,[]),n["$[]"]("requires")["$<<"](e)},p.$$s=st,p),o).call(_,"-r","--require PATH","Require a file."),(o=(d=r).$on,o.$$p=(f=function(e){f.$$s||this;return null==e&&(e=$),n["$[]="]("custom_options_file",e)},f.$$s=st,f),o).call(d,"-O","--options PATH","Specify the path to a custom options file."),(o=(h=r).$on,o.$$p=(m=function(e){m.$$s||this;return null==e&&(e=$),n["$[]="]("order",e)},m.$$s=st,m),o).call(h,"--order TYPE[:SEED]","Run examples by the specified order type.","  [defined] examples and groups are run in the order they are defined","  [rand]    randomize the order of groups and examples","  [random]  alias for rand","  [random:SEED] e.g. --order random:123"),(o=(g=r).$on,o.$$p=(v=function(e){v.$$s||this;return null==e&&(e=$),n["$[]="]("order","rand:"+e)},v.$$s=st,v),o).call(g,"--seed SEED",u.get("Integer"),"Equivalent of --order rand:SEED."),(o=(b=r).$on,o.$$p=(y=function(e){y.$$s||this;return null==e&&(e=$),n["$[]="]("fail_fast",!0)},y.$$s=st,y),o).call(b,"--fail-fast","Abort the run on first failure."),(o=(x=r).$on,o.$$p=(w=function(e){w.$$s||this;return null==e&&(e=$),n["$[]="]("fail_fast",!1)},w.$$s=st,w),o).call(x,"--no-fail-fast","Do not abort the run on first failure."),(o=(k=r).$on,o.$$p=(E=function(e){E.$$s||this;return null==e&&(e=$),n["$[]="]("failure_exit_code",e)},E.$$s=st,E),o).call(k,"--failure-exit-code CODE",u.get("Integer"),"Override the exit code used when there are failing specs."),(o=(S=r).$on,o.$$p=(R=function(e){R.$$s||this;return null==e&&(e=$),n["$[]="]("dry_run",!0)},R.$$s=st,R),o).call(S,"--dry-run","Print the formatter output of your suite without","  running any examples or hooks"),(o=(O=r).$on,o.$$p=(A=function(e){A.$$s||this;return null==e&&(e=$),n["$[]="]("drb",e)},A.$$s=st,A),o).call(O,"-X","--[no-]drb","Run examples via DRb."),(o=(M=r).$on,o.$$p=(q=function(e){q.$$s||this;return null==e&&(e=$),n["$[]="]("drb_port",e.$to_i())},q.$$s=st,q),o).call(M,"--drb-port PORT","Port to connect to the DRb server."),(o=(C=r).$on,o.$$p=(I=function(e){var t=I.$$s||this;return null==e&&(e=$),t.$require("rspec/core/project_initializer"),u.get("ProjectInitializer").$new(e).$run(),t.$exit()},I.$$s=st,I),o).call(C,"--init","Initialize your project with RSpec."),(o=(T=r).$on,o.$$p=(j=function(e){var t=j.$$s||this;return null==e&&(e=$),u.get("RSpec").$warning("--configure is deprecated with no effect. Use --init instead.",i(["call_site"],{call_site:$})),t.$exit()},j.$$s=st,j),o).call(T,"--configure","Deprecated. Use --init instead."),r.$separator("\n  **** Output ****\n\n"),(o=(z=r).$on,o.$$p=(N=function(e){{var t,r,o;N.$$s||this}return null==e&&(e=$),t="formatters",r=n,(o=r["$[]"](t))!==!1&&o!==$?o:r["$[]="](t,[]),n["$[]"]("formatters")["$<<"]([e])},N.$$s=st,N),o).call(z,"-f","--format FORMATTER","Choose a formatter.","  [p]rogress (default - dots)","  [d]ocumentation (group and example names)","  [h]tml","  [j]son","  custom formatter class name"),(o=(F=r).$on,o.$$p=(P=function(e){{var t,r,o;P.$$s||this}return null==e&&(e=$),t="formatters",r=n,(o=r["$[]"](t))!==!1&&o!==$?o:r["$[]="](t,[["progress"]]),n["$[]"]("formatters").$last()["$<<"](e)},P.$$s=st,P),o).call(F,"-o","--out FILE","Write output to a file instead of $stdout. This option applies","  to the previously specified --format, or the default format","  if no format is specified."),(o=(B=r).$on,o.$$p=(D=function(e){D.$$s||this;return null==e&&(e=$),n["$[]="]("full_backtrace",!0)},D.$$s=st,D),o).call(B,"-b","--backtrace","Enable full backtrace."),(o=(H=r).$on,o.$$p=(L=function(e){L.$$s||this;return null==e&&(e=$),n["$[]="]("color",e)},L.$$s=st,L),o).call(H,"-c","--[no-]color","--[no-]colour","Enable color in the output."),(o=(U=r).$on,o.$$p=(G=function(r){var o,a=G.$$s||this;return null==r&&(r=$),n["$[]="]("profile_examples",function(){if(!((o=r["$nil?"]())===$||o.$$is_boolean&&1!=o))return!0;if(r["$=="](!1))return!1;try{return a.$Integer(r)}catch(n){if(e.rescue(n,[u.get("ArgumentError")]))return u.get("RSpec").$warning(t(t("Non integer specified as profile count, seperate ","your path from options with -- e.g. "),"`rspec --profile -- "+r+"`"),i(["call_site"],{call_site:$})),!0;throw n}return $}())},G.$$s=st,G),o).call(U,"-p","--[no-]profile [COUNT]","Enable profiling of examples and list the slowest examples (default: 10)."),(o=(Y=r).$on,o.$$p=(V=function(){V.$$s||this;return n["$[]="]("warnings",!0)},V.$$s=st,V),o).call(Y,"-w","--warnings","Enable ruby warnings"),r.$separator("\n  **** Filtering/tags ****\n\n    In addition to the following options for selecting specific files, groups,\n    or examples, you can select a single example by appending the line number to\n    the filename:\n\n      rspec path/to/a_spec.rb:37\n\n"),(o=(X=r).$on,o.$$p=(K=function(e){K.$$s||this;return null==e&&(e=$),n["$[]="]("pattern",e)},K.$$s=st,K),o).call(X,"-P","--pattern PATTERN",'Load files matching pattern (default: "spec/**/*_spec.rb").'),(o=(W=r).$on,o.$$p=(Z=function(e){{var t,r,o;Z.$$s||this}return null==e&&(e=$),(t="full_description",r=n,(o=r["$[]"](t))!==!1&&o!==$?o:r["$[]="](t,[]))["$<<"](u.get("Regexp").$compile(u.get("Regexp").$escape(e)))},Z.$$s=st,Z),o).call(W,"-e","--example STRING","Run examples whose full nested names include STRING (may be","  used more than once)"),(o=(J=r).$on,o.$$p=(Q=function(e){{var t,r,o;Q.$$s||this}return null==e&&(e=$),(t="line_numbers",r=n,(o=r["$[]"](t))!==!1&&o!==$?o:r["$[]="](t,[]))["$<<"](e)},Q.$$s=st,Q),o).call(J,"-l","--line-number LINE","Specify line number of an example or group (may be","  used more than once)."),(o=(et=r).$on,o.$$p=(tt=function(t){var r,o,a,c=tt.$$s||this,u=$,l=$,_=$,p=$;return null==t&&(t=$),u=function(){return(r=t["$=~"](/^~/))===$||r.$$is_boolean&&1!=r?"inclusion_filter":"exclusion_filter"}(),r=e.to_ary(t.$gsub(/^(~@|~|@)/,"").$split(":",2)),l=null==r[0]?$:r[0],_=null==r[1]?$:r[1],l=l.$to_sym(),r=u,o=n,(a=o["$[]"](r))!==!1&&a!==$?a:o["$[]="](r,i([],{})),n["$[]"](u)["$[]="](l,function(){return p=_,$["$==="](p)?!0:"true"["$==="](p)?!0:"false"["$==="](p)?!1:"nil"["$==="](p)?$:/^:/["$==="](p)?_["$[]"](s(1,-1,!1)).$to_sym():/^\d+$/["$==="](p)?c.$Integer(_):/^\d+.\d+$/["$==="](p)?c.$Float(_):_}())},tt.$$s=st,tt),o).call(et,"-t","--tag TAG[:VALUE]","Run examples with the specified tag, or exclude examples","by adding ~ before the tag.","  - e.g. ~slow","  - TAG is always converted to a symbol"),(o=(nt=r).$on,o.$$p=(rt=function(e){rt.$$s||this;return null==e&&(e=$),n["$[]="]("default_path",e)},rt.$$s=st,rt),o).call(nt,"--default-path PATH","Set the default path where RSpec looks for examples (can","  be a path to a file or a directory)."),r.$separator("\n  **** Utility ****\n\n"),(o=($t=r).$on,o.$$p=(ot=function(){var e=ot.$$s||this;return e.$puts(u.get("RSpec").$$scope.get("Core").$$scope.get("Version").$$scope.get("STRING")),e.$exit()},ot.$$s=st,ot),o).call($t,"-v","--version","Display the version."),(o=(at=r).$on_tail,o.$$p=(it=function(){var e=it.$$s||this;return e.$puts(r),e.$exit()},it.$$s=st,it),o).call(at,"-h","--help","You're looking at it.")},a.$$s=c,a),r).call(o)},$&&"parser"}(r,null)}(r.get("RSpec"))},Opal.modules["rspec/core/configuration_options"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="warning";var n=e.top,r=e.nil,$=(e.breaker,e.slice),o=e.module,a=e.klass,i=e.hash,s=e.hash2;return e.add_stubs(["$require","$attr_reader","$map","$sub","$filter_manager=","$filter_manager","$libs=","$[]","$options","$setup_load_path_and_require","$process_options_into","$load_formatters_into","$inject","$merge","$include?","$each","$has_key?","$include","$delete","$exclude","$<<","$file_options","$command_line_options","$env_options","$new","$configuration","$private","$to_set","$!","$unshift","$reverse","$reject","$force?","$force","$send","$order","$keys","$add_formatter","$custom_options_file","$custom_options","$global_options","$project_options","$local_options","$parse!","$split","$options_from","$local_options_file","$project_options_file","$global_options_file","$parse","$args_from_options_file","$exist?","$options_file_as_erb_string","$flat_map","$to_proc","$result","$read","$binding","$join","$expand_path","$warning"]),n.$require("erb"),n.$require("shellwords"),function(n){{var c=o(n,"RSpec");c.$$proto,c.$$scope}!function(n){{var c=o(n,"Core");c.$$proto,c.$$scope}!function(n,$super){function o(){}var c=o=a(n,$super,"ConfigurationOptions",o),u=c.$$proto,l=c.$$scope;return u.filter_manager=u.command_line_options=u.args=u.local_options=u.project_options=u.global_options=r,c.$attr_reader("options"),u.$initialize=function(e){var t,n,$,o=this;return o.args=(t=(n=e).$map,t.$$p=($=function(e){$.$$s||this;return null==e&&(e=r),e.$sub("default_path","default-path").$sub("line_number","line-number")},$.$$s=o,$),t).call(n)},u.$configure=function(e){var t,n,$,o=this;return t=[o.$filter_manager()],n=e,n["$filter_manager="].apply(n,t),t[t.length-1],t=[($=o.$options()["$[]"]("libs"))!==!1&&$!==r?$:[]],n=e,n["$libs="].apply(n,t),t[t.length-1],e.$setup_load_path_and_require((t=o.$options()["$[]"]("requires"))!==!1&&t!==r?t:[]),o.$process_options_into(e),o.$load_formatters_into(e)},u.$parse_options=function(){var e,n,$,o,a,i,s=this;return s.options=(e=(n=(o=(a=s.$file_options()["$<<"](s.$command_line_options())["$<<"](s.$env_options())).$each,o.$$p=(i=function(e){var t,n=i.$$s||this;return null==e&&(e=r),(t=e["$has_key?"]("inclusion_filter"))===r||t.$$is_boolean&&1!=t||n.$filter_manager().$include(e.$delete("inclusion_filter")),(t=e["$has_key?"]("exclusion_filter"))===r||t.$$is_boolean&&1!=t?r:n.$filter_manager().$exclude(e.$delete("exclusion_filter"))},i.$$s=s,i),o).call(a)).$inject,e.$$p=($=function(e,n){var o,a,i,s=$.$$s||this;return null==e&&(e=r),null==n&&(n=r),(o=(a=e).$merge,o.$$p=(i=function(e,n,$){{var o;i.$$s||this}return null==e&&(e=r),null==n&&(n=r),null==$&&($=r),(o=["libs","requires"]["$include?"](e))===r||o.$$is_boolean&&1!=o?$:t(n,$)},i.$$s=s,i),o).call(a,n)},$.$$s=s,$),e).call(n)},u.$drb_argv=function(){var e=this;return l.get("DrbOptions").$new(e.$options(),e.$filter_manager()).$options()},u.$filter_manager=function(){var e,t=this;return(e=t.filter_manager)!==!1&&e!==r?e:t.filter_manager=l.get("RSpec").$configuration().$filter_manager()},c.$private(),e.cdecl(l,"UNFORCED_OPTIONS",["requires","profile","drb","libs","files_or_directories_to_run","line_numbers","full_description","full_backtrace","tty"].$to_set()),e.cdecl(l,"UNPROCESSABLE_OPTIONS",["libs","formatters","requires"].$to_set()),u["$force?"]=function(e){return l.get("UNFORCED_OPTIONS")["$include?"](e)["$!"]()},u.$order=function(e,t){var n,o,a,i=this;return t=$.call(arguments,1),(n=(o=t.$reverse()).$each,n.$$p=(a=function(t){{var n;a.$$s||this}return null==t&&(t=r),(n=e.$delete(t))===r||n.$$is_boolean&&1!=n?r:e.$unshift(t)},a.$$s=i,a),n).call(o),e},u.$process_options_into=function(e){var t,n,$,o,a,s=this,c=r;return c=(t=(n=s.$options()).$reject,t.$$p=($=function(e,t){$.$$s||this;return null==e&&(e=r),null==t&&(t=r),l.get("UNPROCESSABLE_OPTIONS")["$include?"](e)},$.$$s=s,$),t).call(n),(t=(o=s.$order(c.$keys(),"default_path","pattern")).$each,t.$$p=(a=function(t){var n,$=a.$$s||this;return null==t&&(t=r),(n=$["$force?"](t))===r||n.$$is_boolean&&1!=n?e.$send(""+t+"=",c["$[]"](t)):e.$force(i(t,c["$[]"](t)))},a.$$s=s,a),t).call(o)},u.$load_formatters_into=function(e){var t,n,$,o=this;return(t=o.$options()["$[]"]("formatters"))===r||t.$$is_boolean&&1!=t?r:(t=(n=o.$options()["$[]"]("formatters")).$each,t.$$p=($=function(t){{var n;$.$$s||this}return null==t&&(t=r),(n=e).$add_formatter.apply(n,[].concat(t))},$.$$s=o,$),t).call(n)},u.$file_options=function(){var e,t=this;return(e=t.$custom_options_file())===r||e.$$is_boolean&&1!=e?[t.$global_options(),t.$project_options(),t.$local_options()]:[t.$custom_options()]},u.$env_options=function(){var e;return(e=l.get("ENV")["$[]"]("SPEC_OPTS"))===r||e.$$is_boolean&&1!=e?s([],{}):l.get("Parser")["$parse!"](l.get("Shellwords").$split(l.get("ENV")["$[]"]("SPEC_OPTS")))},u.$command_line_options=function(){var e,t=this;return(e=t.command_line_options)!==!1&&e!==r?e:t.command_line_options=l.get("Parser")["$parse!"](t.args).$merge(s(["files_or_directories_to_run"],{files_or_directories_to_run:t.args}))},u.$custom_options=function(){var e=this;return e.$options_from(e.$custom_options_file())},u.$local_options=function(){var e,t=this;return(e=t.local_options)!==!1&&e!==r?e:t.local_options=t.$options_from(t.$local_options_file())},u.$project_options=function(){var e,t=this;return(e=t.project_options)!==!1&&e!==r?e:t.project_options=t.$options_from(t.$project_options_file())},u.$global_options=function(){var e,t=this;return(e=t.global_options)!==!1&&e!==r?e:t.global_options=t.$options_from(t.$global_options_file())},u.$options_from=function(e){var t=this;return l.get("Parser").$parse(t.$args_from_options_file(e))},u.$args_from_options_file=function(e){var t,n,$=this,o=r;return(t=(n=e!==!1&&e!==r)?l.get("File")["$exist?"](e):n)===r||t.$$is_boolean&&1!=t?[]:(o=$.$options_file_as_erb_string(e),(t=(n=l.get("FlatMap")).$flat_map,t.$$p="shellsplit".$to_proc(),t).call(n,o.$split(/\n+/)))},u.$options_file_as_erb_string=function(e){var t=this;return l.get("ERB").$new(l.get("File").$read(e),r,"-").$result(t.$binding())},u.$custom_options_file=function(){var e=this;return e.$command_line_options()["$[]"]("custom_options_file")},u.$project_options_file=function(){return".rspec"},u.$local_options_file=function(){return".rspec-local"},u.$global_options_file=function(){try{return l.get("File").$join(l.get("File").$expand_path("~"),".rspec")}catch(t){if(e.rescue(t,[l.get("ArgumentError")]))return l.get("RSpec").$warning("Unable to find ~/.rspec because the HOME environment variable is not set"),r;throw t}},r&&"global_options_file"}(c,null)}(c)}(n)},Opal.modules["rspec/core/command_line"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass,o=e.gvars;return e.add_stubs(["$===","$new","$parse_options","$configuration","$world","$error_stream=","$==","$output_stream","$output_stream=","$configure","$load_spec_files","$announce_filters","$report","$run_hook","$all?","$map","$run","$ordered_example_groups","$failure_exit_code","$reporter","$example_count"]),function(e){{var t=r(e,"RSpec");t.$$proto,t.$$scope}!function(e){{var t=r(e,"Core");t.$$proto,t.$$scope}!function(e,$super){function t(){}var r=t=$(e,$super,"CommandLine",t),a=r.$$proto,i=r.$$scope;return a.configuration=a.options=a.world=n,a.$initialize=function(e,t,r){var $,o=this;return null==t&&(t=i.get("RSpec").$configuration()),null==r&&(r=i.get("RSpec").$world()),($=i.get("Array")["$==="](e))===n||$.$$is_boolean&&1!=$||(e=i.get("ConfigurationOptions").$new(e),e.$parse_options()),o.options=e,o.configuration=t,o.world=r},a.$run=function(e,t){var r,$,a,i=this;return null==o.stdout&&(o.stdout=n),r=[e],$=i.configuration,$["$error_stream="].apply($,r),r[r.length-1],i.configuration.$output_stream()["$=="](o.stdout)&&(r=[t],$=i.configuration,$["$output_stream="].apply($,r),r[r.length-1]),i.options.$configure(i.configuration),i.configuration.$load_spec_files(),i.world.$announce_filters(),(r=($=i.configuration.$reporter()).$report,r.$$p=(a=function(e){var t,r,$,o,i=a.$$s||this;null==i.configuration&&(i.configuration=n),null==i.world&&(i.world=n),null==e&&(e=n);try{return i.configuration.$run_hook("before","suite"),(t=(r=($=i.world.$ordered_example_groups()).$map,r.$$p=(o=function(t){o.$$s||this;return null==t&&(t=n),t.$run(e)},o.$$s=i,o),r).call($)["$all?"]())===n||t.$$is_boolean&&1!=t?i.configuration.$failure_exit_code():0}finally{i.configuration.$run_hook("after","suite")}},a.$$s=i,a),r).call($,i.world.$example_count())},n&&"run"}(t,null)}(t)}(t)},Opal.modules["rspec/core/drb_options"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="warning";var n=(e.top,e),r=e.nil,$=(e.breaker,e.slice,e.module),o=e.klass;return e.add_stubs(["$[]","$<<","$add_failure_exit_code","$add_full_description","$add_line_numbers","$add_filter","$inclusions","$exclusions","$add_formatters","$add_libs","$add_requires","$to_s","$each","$delete","$source","$push","$inject","$empty?","$each_pair","$include?","$==","$is_a?"]),function(n){{var a=$(n,"Core");a.$$proto,a.$$scope}!function(n,$super){function $(){}var a=$=o(n,$super,"DrbOptions",$),i=a.$$proto,s=a.$$scope;return i.submitted_options=i.filter_manager=r,i.$initialize=function(e,t){var n=this;return n.submitted_options=e,n.filter_manager=t},i.$options=function(){var e,n=this,$=r;return $=[],(e=n.submitted_options["$[]"]("color"))===r||e.$$is_boolean&&1!=e||$["$<<"]("--color"),(e=n.submitted_options["$[]"]("profile_examples"))===r||e.$$is_boolean&&1!=e||$["$<<"]("--profile"),(e=n.submitted_options["$[]"]("full_backtrace"))===r||e.$$is_boolean&&1!=e||$["$<<"]("--backtrace"),(e=n.submitted_options["$[]"]("tty"))===r||e.$$is_boolean&&1!=e||$["$<<"]("--tty"),(e=n.submitted_options["$[]"]("fail_fast"))===r||e.$$is_boolean&&1!=e||$["$<<"]("--fail-fast"),(e=n.submitted_options["$[]"]("custom_options_file"))===r||e.$$is_boolean&&1!=e||$["$<<"]("--options")["$<<"](n.submitted_options["$[]"]("custom_options_file")),(e=n.submitted_options["$[]"]("order"))===r||e.$$is_boolean&&1!=e||$["$<<"]("--order")["$<<"](n.submitted_options["$[]"]("order")),n.$add_failure_exit_code($),n.$add_full_description($),n.$add_line_numbers($),n.$add_filter($,"inclusion",n.filter_manager.$inclusions()),n.$add_filter($,"exclusion",n.filter_manager.$exclusions()),n.$add_formatters($),n.$add_libs($),n.$add_requires($),t($,n.submitted_options["$[]"]("files_or_directories_to_run"))},i.$add_failure_exit_code=function(e){var t,n=this;return(t=n.submitted_options["$[]"]("failure_exit_code"))===r||t.$$is_boolean&&1!=t?r:e["$<<"]("--failure-exit-code")["$<<"](n.submitted_options["$[]"]("failure_exit_code").$to_s())},i.$add_full_description=function(e){var t,n,$,o=this;return(t=o.submitted_options["$[]"]("full_description"))===r||t.$$is_boolean&&1!=t?r:(t=(n=o.submitted_options["$[]"]("full_description")).$each,t.$$p=($=function(t){$.$$s||this;return null==t&&(t=r),e["$<<"]("--example")["$<<"](t.$source().$delete("\\"))},$.$$s=o,$),t).call(n)},i.$add_line_numbers=function(e){var t,n,$,o,a=this;return(t=a.submitted_options["$[]"]("line_numbers"))===r||t.$$is_boolean&&1!=t?r:(t=e).$push.apply(t,[].concat((n=($=a.submitted_options["$[]"]("line_numbers")).$inject,n.$$p=(o=function(e,t){o.$$s||this;return null==e&&(e=r),null==t&&(t=r),e["$<<"]("--line_number")["$<<"](t)},o.$$s=a,o),n).call($,[])))},e.cdecl(s,"CONDITIONAL_FILTERS",["if","unless"]),i.$add_filter=function(e,t,n){var $,o,a,i=this;return($=n["$empty?"]())===r||$.$$is_boolean&&1!=$?($=(o=n).$each_pair,$.$$p=(a=function(n,$){var o,i=(a.$$s||this,r);return null==n&&(n=r),null==$&&($=r),(o=s.get("CONDITIONAL_FILTERS")["$include?"](n))===r||o.$$is_boolean&&1!=o?(i=function(){return t["$=="]("inclusion")?n.$to_s():"~"+n}(),(o=$["$is_a?"](s.get("String")))===r||o.$$is_boolean&&1!=o||i["$<<"](":"+$),e["$<<"]("--tag")["$<<"](i)):r},a.$$s=i,a),$).call(o):r},i.$add_formatters=function(e){var t,n,$,o=this;return(t=o.submitted_options["$[]"]("formatters"))===r||t.$$is_boolean&&1!=t?r:(t=(n=o.submitted_options["$[]"]("formatters")).$each,t.$$p=($=function(t){{var n;$.$$s||this}return null==t&&(t=r),e["$<<"]("--format")["$<<"](t["$[]"](0)),(n=t["$[]"](1))===r||n.$$is_boolean&&1!=n?r:e["$<<"]("--out")["$<<"](t["$[]"](1))},$.$$s=o,$),t).call(n)},i.$add_libs=function(e){var t,n,$,o=this;return(t=o.submitted_options["$[]"]("libs"))===r||t.$$is_boolean&&1!=t?r:(t=(n=o.submitted_options["$[]"]("libs")).$each,t.$$p=($=function(t){$.$$s||this;return null==t&&(t=r),e["$<<"]("-I")["$<<"](t)},$.$$s=o,$),t).call(n)},i.$add_requires=function(e){var t,n,$,o=this;return(t=o.submitted_options["$[]"]("requires"))===r||t.$$is_boolean&&1!=t?r:(t=(n=o.submitted_options["$[]"]("requires")).$each,t.$$p=($=function(t){$.$$s||this;return null==t&&(t=r),e["$<<"]("--require")["$<<"](t)},$.$$s=o,$),t).call(n)},r&&"add_requires"}(a,null)}(n.get("RSpec"))},Opal.modules["rspec/core/drb_command_line"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$require","$[]","$options","$start_service","$new_with_uri","$drb_port","$run","$drb_argv"]),t.$require("drb/drb"),t.$require("rspec/core/drb_options"),function(t){{var o=r(t,"RSpec");o.$$proto,o.$$scope}!function(t){{var o=r(t,"Core");o.$$proto,o.$$scope}!function(t,$super){function r(){}var o=r=$(t,$super,"DRbCommandLine",r),a=o.$$proto,i=o.$$scope;return a.options=n,a.$initialize=function(e){var t=this;return t.options=e},a.$drb_port=function(){var e,t,r=this;return(e=(t=r.options.$options()["$[]"]("drb_port"))!==!1&&t!==n?t:i.get("ENV")["$[]"]("RSPEC_DRB"))!==!1&&e!==n?e:8989},a.$run=function(t,r){var $=this,o=n;try{i.get("DRb").$start_service("druby://localhost:0")}catch(a){if(!e.rescue(a,[i.get("SocketError"),i.get("Errno").$$scope.get("EADDRNOTAVAIL")]))throw a;i.get("DRb").$start_service("druby://:0")}return o=i.get("DRbObject").$new_with_uri("druby://127.0.0.1:"+$.$drb_port()),o.$run($.options.$drb_argv(),t,r)},n&&"run"}(o,null)}(o)}(t)},Opal.modules["rspec/core/runner"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.dynamic_require_severity="warning";var n=e.top,r=e.nil,$=(e.breaker,e.slice,e.module),o=e.klass,a=e.gvars;return e.add_stubs(["$autorun_disabled?","$installed_at_exit?","$running_in_drb?","$at_exit","$nil?","$kind_of?","$to_i","$run","$!","$==","$exit","$current_server","$require","$getaddress","$gethostname","$any?","$host","$URI","$uri","$trap","$wants_to_quit","$exit!","$wants_to_quit=","$puts","$trap_interrupt","$new","$parse_options","$[]","$options","$reset"]),function(n){{var i=$(n,"RSpec");i.$$proto,i.$$scope}!function(n){{var i=$(n,"Core");i.$$proto,i.$$scope}!function(n,$super){function $(){}var i=$=o(n,$super,"Runner",$),s=(i.$$proto,i.$$scope);return e.defs(i,"$autorun",function(){var e,t,n,$,o=this;return(e=(t=(n=o["$autorun_disabled?"]())!==!1&&n!==r?n:o["$installed_at_exit?"]())!==!1&&t!==r?t:o["$running_in_drb?"]())===r||e.$$is_boolean&&1!=e?((e=(t=o).$at_exit,e.$$p=($=function(){var e,t,n=$.$$s||this,o=r;return null==a["!"]&&(a["!"]=r),null==a.stderr&&(a.stderr=r),null==a.stdout&&(a.stdout=r),(e=(t=a["!"]["$nil?"]())!==!1&&t!==r?t:a["!"]["$kind_of?"](s.get("SystemExit")))===r||e.$$is_boolean&&1!=e?r:(o=n.$run(s.get("ARGV"),a.stderr,a.stdout).$to_i(),(e=o["$=="](0)["$!"]())===r||e.$$is_boolean&&1!=e?r:n.$exit(o))},$.$$s=o,$),e).call(t),o.installed_at_exit=!0):r}),e.cdecl(s,"AT_EXIT_HOOK_BACKTRACE_LINE","rspec/core/runner:"+t(22,2)+":in `autorun'"),e.defs(i,"$disable_autorun!",function(){var e=this;return e.autorun_disabled=!0}),e.defs(i,"$autorun_disabled?",function(){var e,t=this;return null==t.autorun_disabled&&(t.autorun_disabled=r),(e=t.autorun_disabled)!==!1&&e!==r?e:t.autorun_disabled=!1}),e.defs(i,"$installed_at_exit?",function(){var e,t=this;return null==t.installed_at_exit&&(t.installed_at_exit=r),(e=t.installed_at_exit)!==!1&&e!==r?e:t.installed_at_exit=!1}),e.defs(i,"$running_in_drb?",function(){var t,n,$,o=this,a=r,i=r;try{try{return n=null!=s.DRb,(t=n!==!1&&n!==r?s.get("DRb").$current_server():n)===r||t.$$is_boolean&&1!=t?r:(o.$require("socket"),o.$require("uri"),a=s.get("IPSocket").$getaddress(s.get("Socket").$gethostname()),i=(t=(n=["127.0.0.1","localhost",a])["$any?"],t.$$p=($=function(e){var t=$.$$s||this;return null==e&&(e=r),e["$=="](t.$URI(s.get("DRb").$current_server().$uri()).$host())},$.$$s=o,$),t).call(n))}catch(c){if(e.rescue(c,[s.get("DRb").$$scope.get("DRbServerNotFound")]))return r;throw c}}finally{return(t=i)!==!1&&t!==r?t:!1}}),e.defs(i,"$trap_interrupt",function(){var e,t,n,$=this;return(e=(t=$).$trap,e.$$p=(n=function(){var e,t,$=n.$$s||this;return(e=s.get("RSpec").$wants_to_quit())===r||e.$$is_boolean&&1!=e||$["$exit!"](1),e=[!0],t=s.get("RSpec"),t["$wants_to_quit="].apply(t,e),e[e.length-1],s.get("STDERR").$puts("\nExiting... Interrupt again to exit immediately.")},n.$$s=$,n),e).call(t,"INT")}),e.defs(i,"$run",function(t,n,$){var o,i=this,c=r;null==a.stderr&&(a.stderr=r),null==a.stdout&&(a.stdout=r),null==n&&(n=a.stderr),null==$&&($=a.stdout);try{if(i.$trap_interrupt(),c=s.get("ConfigurationOptions").$new(t),c.$parse_options(),(o=c.$options()["$[]"]("drb"))===r||o.$$is_boolean&&1!=o)return s.get("CommandLine").$new(c).$run(n,$);i.$require("rspec/core/drb_command_line");try{return s.get("DRbCommandLine").$new(c).$run(n,$)}catch(u){if(e.rescue(u,[s.get("DRb").$$scope.get("DRbConnError")]))return n.$puts("No DRb server is running. Running in local process instead ..."),s.get("CommandLine").$new(c).$run(n,$);throw u}}finally{s.get("RSpec").$reset()}}),r&&"run"}(i,null)}(i)}(n)},Opal.modules["rspec/core/example"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.dynamic_require_severity="warning";var n=e.top,r=e.nil,$=e.breaker,o=e.slice,a=e.module,i=e.klass,s=e.hash2;return e.add_stubs(["$each","$define_method","$[]","$delegate_to_metadata","$empty?","$to_s","$metadata","$location","$call","$format_docstrings_block","$configuration","$attr_reader","$for_example","$alias_method","$current_example=","$start","$pending","$dry_run?","$with_around_each_hooks","$run_before_each","$instance_exec","$to_proc","$message","$set_exception","$run_after_each","$instance_variable_set","$instance_variables","$assign_generated_description","$finish","$__send__","$public_instance_methods","$new","$class","$any_apply?","$all_apply?","$around_each_hooks_for","$example_group","$!","$==","$first","$backtrace","$reporter","$instance_exec_with_rescue","$private","$around_each_hooks","$run_around_each_hooks","$example_started","$record","$now","$record_finished","$example_failed","$example_pending","$===","$example_passed","$merge","$to_f","$execution_result","$setup_mocks_for_rspec","$run_before_each_hooks","$run_after_each_hooks","$verify_mocks","$teardown_mocks_for_rspec","$verify_mocks_for_rspec","$expecting_with_rspec?","$pending?","$<<","$generated_description","$clear_generated_description","$update"]),function(n){{var c=a(n,"RSpec");
c.$$proto,c.$$scope}!function(n){{var c=a(n,"Core");c.$$proto,c.$$scope}!function(n,$super){function a(){}var c,u,l,_=a=i(n,$super,"Example",a),p=_.$$proto,d=_.$$scope;return p.example_group_class=p.options=p.example_group_instance=p.metadata=p.around_each_hooks=p.exception=p.pending_declared_in_example=r,e.defs(_,"$delegate_to_metadata",function(e){var t,n,$,a=this;return e=o.call(arguments,0),(t=(n=e).$each,t.$$p=($=function(e){var t,n,o,a=$.$$s||this;return null==e&&(e=r),(t=(n=a).$define_method,t.$$p=(o=function(){var t=o.$$s||this;return null==t.metadata&&(t.metadata=r),t.metadata["$[]"](e)},o.$$s=a,o),t).call(n,e)},$.$$s=a,$),t).call(n)}),_.$delegate_to_metadata("full_description","execution_result","file_path","pending","location"),p.$description=function(){var e,t=this,n=r;return n=function(){return(e=t.$metadata()["$[]"]("description").$to_s()["$empty?"]())===r||e.$$is_boolean&&1!=e?t.$metadata()["$[]"]("description"):"example at "+t.$location()}(),d.get("RSpec").$configuration().$format_docstrings_block().$call(n)},_.$attr_reader("exception"),_.$attr_reader("metadata"),_.$attr_reader("example_group_instance"),p.$initialize=function(e,t,n,$){var o,a=this;return null==$&&($=r),o=[e,n,$],a.example_group_class=o[0],a.options=o[1],a.example_block=o[2],a.metadata=a.example_group_class.$metadata().$for_example(t,n),a.example_group_instance=a.exception=r,a.pending_declared_in_example=!1},p.$options=function(){var e=this;return e.options},p.$example_group=function(){var e=this;return e.example_group_class},_.$alias_method("pending?","pending"),p.$run=function(t,n){var $,o,a,i,s,c,u=this,l=r;try{u.example_group_instance=t,$=[u],o=d.get("RSpec"),o["$current_example="].apply(o,$),$[$.length-1],u.$start(n);try{try{(($=(o=u.$pending())!==!1&&o!==r?o:d.get("RSpec").$configuration()["$dry_run?"]())===r||$.$$is_boolean&&1!=$)&&($=(o=u).$with_around_each_hooks,$.$$p=(a=function(){var t,n,$=a.$$s||this,o=r;null==$.example_block&&($.example_block=r),null==$.example_group_instance&&($.example_group_instance=r);try{try{return $.$run_before_each(),(t=(n=$.example_group_instance).$instance_exec,t.$$p=$.example_block.$to_proc(),t).call(n,$)}catch(i){if(e.rescue(i,[d.get("Pending").$$scope.get("PendingDeclaredInExample")]))return o=i,$.pending_declared_in_example=o.$message();if(!e.rescue(i,[d.get("Exception")]))throw i;o=i,$.$set_exception(o)}}finally{$.$run_after_each()}},a.$$s=u,a),$).call(o)}catch(_){if(!e.rescue(_,[d.get("Exception")]))throw _;l=_,u.$set_exception(l)}}finally{($=(i=u.example_group_instance.$instance_variables()).$each,$.$$p=(s=function(e){var t=s.$$s||this;return null==t.example_group_instance&&(t.example_group_instance=r),null==e&&(e=r),t.example_group_instance.$instance_variable_set(e,r)},s.$$s=u,s),$).call(i),u.example_group_instance=r;try{u.$assign_generated_description()}catch(_){if(!e.rescue(_,[d.get("Exception")]))throw _;l=_,u.$set_exception(l,"while assigning the example description")}}return u.$finish(n)}finally{$=[r],c=d.get("RSpec"),c["$current_example="].apply(c,$),$[$.length-1]}},function(t,$super){function n(){}var $,a,s,c,u,l=n=i(t,$super,"Procsy",n),_=l.$$proto,p=l.$$scope;return l.$attr_reader("metadata"),($=(a=p.get("Proc").$public_instance_methods(!1)).$each,$.$$p=(s=function(e){var t,n,$,a=s.$$s||this;return null==e&&(e=r),(t=(n=a).$define_method,t.$$p=($=function(t){var n,a,i,s=$.$$s||this;return null==s.proc&&(s.proc=r),t=o.call(arguments,0),n=$.$$p||r,$.$$p=null,(a=(i=s.proc).$__send__,a.$$p=n.$to_proc(),a).apply(i,[e].concat(t))},$.$$s=a,$),t).call(n,e)},s.$$s=l,s),$).call(a),e.defn(l,"$run",_.$call),_.$initialize=c=function(e){var t=this,n=c.$$p,$=n||r;return c.$$p=null,t.metadata=e,t.proc=$},_.$wrap=u=function(){var e,t,n=this,$=u.$$p,o=$||r;return u.$$p=null,(e=(t=n.$class()).$new,e.$$p=o.$to_proc(),e).call(t,n.$metadata())},r&&"wrap"}(_,null),p["$any_apply?"]=function(e){var t=this;return t.$metadata()["$any_apply?"](e)},p["$all_apply?"]=function(e){var t,n=this;return(t=n.metadata["$all_apply?"](e))!==!1&&t!==r?t:n.example_group_class["$all_apply?"](e)},p.$around_each_hooks=function(){var e,t=this;return(e=t.around_each_hooks)!==!1&&e!==r?e:t.around_each_hooks=t.$example_group().$around_each_hooks_for(t)},p.$set_exception=function(e,t){var n,$,o=this,a=r;return null==t&&(t=r),$=o.exception,(n=$!==!1&&$!==r?t["$=="]("dont_print")["$!"]():$)===r||n.$$is_boolean&&1!=n||(a="\nAn error occurred "+t+"\n  "+e.$class()+": "+e.$message()+"\n  occurred at "+e.$backtrace().$first()+"\n\n",d.get("RSpec").$configuration().$reporter().$message(a)),(n=o.exception)!==!1&&n!==r?n:o.exception=e},p.$fail_with_exception=function(e,t){var n=this;return n.$start(e),n.$set_exception(t),n.$finish(e)},p.$instance_exec_with_rescue=c=function(e){var t,n,$=this,o=c.$$p,a=o||r;return null==e&&(e=r),c.$$p=null,(t=(n=$.example_group_instance).$instance_exec_with_rescue,t.$$p=a.$to_proc(),t).call(n,$,e)},p.$instance_exec=u=function(e){var t,n,$=this,a=u.$$p,i=a||r;return e=o.call(arguments,0),u.$$p=null,(t=(n=$.example_group_instance).$instance_exec,t.$$p=i.$to_proc(),t).apply(n,[].concat(e))},_.$private(),p.$with_around_each_hooks=l=function(){var t,n,o=this,a=l.$$p,i=a||r,s=r;l.$$p=null;try{return(t=o.$around_each_hooks()["$empty?"]())===r||t.$$is_boolean&&1!=t?o.example_group_class.$run_around_each_hooks(o,(t=(n=d.get("Procsy")).$new,t.$$p=i.$to_proc(),t).call(n,o.$metadata())):(t=e.yieldX(i,[]),t===$?t:t)}catch(c){if(e.rescue(c,[d.get("Exception")]))return s=c,o.$set_exception(s,"in an around(:each) hook");throw c}},p.$start=function(e){var t=this;return e.$example_started(t),t.$record(s(["started_at"],{started_at:d.get("RSpec").$$scope.get("Core").$$scope.get("Time").$now()}))},p.$finish=function(e){var t,n=this;return(t=n.exception)===r||t.$$is_boolean&&1!=t?(t=n.pending_declared_in_example)===r||t.$$is_boolean&&1!=t?(t=n.$pending())===r||t.$$is_boolean&&1!=t?(n.$record_finished("passed"),e.$example_passed(n),!0):(n.$record_finished("pending",s(["pending_message"],{pending_message:function(){return(t=d.get("String")["$==="](n.$pending()))===r||t.$$is_boolean&&1!=t?d.get("Pending").$$scope.get("NO_REASON_GIVEN"):n.$pending()}()})),e.$example_pending(n),!0):(n.$record_finished("pending",s(["pending_message"],{pending_message:n.pending_declared_in_example})),e.$example_pending(n),!0):(n.$record_finished("failed",s(["exception"],{exception:n.exception})),e.$example_failed(n),!1)},p.$record_finished=function(e,n){var $=this,o=r;return null==n&&(n=s([],{})),o=d.get("RSpec").$$scope.get("Core").$$scope.get("Time").$now(),$.$record(n.$merge(s(["status","finished_at","run_time"],{status:e,finished_at:o,run_time:t(o,$.$execution_result()["$[]"]("started_at")).$to_f()})))},p.$run_before_each=function(){var e=this;return e.example_group_instance.$setup_mocks_for_rspec(),e.example_group_class.$run_before_each_hooks(e)},p.$run_after_each=function(){var t=this,n=r;try{try{return t.example_group_class.$run_after_each_hooks(t),t.$verify_mocks()}catch($){if(e.rescue($,[d.get("Exception")]))return n=$,t.$set_exception(n,"in an after(:each) hook");throw $}}finally{t.example_group_instance.$teardown_mocks_for_rspec()}},p.$verify_mocks=function(){var t=this,n=r;try{return t.example_group_instance.$verify_mocks_for_rspec()}catch($){if(e.rescue($,[d.get("Exception")]))return n=$,t.$set_exception(n,"dont_print");throw $}},p.$assign_generated_description=function(){var e,t,n=this;return(e=d.get("RSpec").$configuration()["$expecting_with_rspec?"]())===r||e.$$is_boolean&&1!=e?r:(t=n.$metadata()["$[]"]("description_args")["$empty?"](),(e=t!==!1&&t!==r?n["$pending?"]()["$!"]():t)===r||e.$$is_boolean&&1!=e||n.$metadata()["$[]"]("description_args")["$<<"](d.get("RSpec").$$scope.get("Matchers").$generated_description()),d.get("RSpec").$$scope.get("Matchers").$clear_generated_description())},p.$record=function(e){var t=this;return null==e&&(e=s([],{})),t.$execution_result().$update(e)},r&&"record"}(c,null)}(c)}(n)},Opal.modules["rspec/core/shared_example_group/collection"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$fetch_examples","$private","$[]","$source_for","$find","$has_key?","$reverse"]),function(e){{var t=r(e,"RSpec");t.$$proto,t.$$scope}!function(e){{var t=r(e,"Core");t.$$proto,t.$$scope}!function(e){{var t=r(e,"SharedExampleGroup");t.$$proto,t.$$scope}!function(e,$super){function t(){}{var r=t=$(e,$super,"Collection",t),o=r.$$proto;r.$$scope}return o.examples=o.sources=n,o.$initialize=function(e,t){var n,r=this;return n=[e,t],r.sources=n[0],r.examples=n[1]},o["$[]"]=function(e){var t=this;return t.$fetch_examples(e)},r.$private(),o.$fetch_examples=function(e){var t=this;return t.examples["$[]"](t.$source_for(e))["$[]"](e)},o.$source_for=function(e){var t,r,$,o=this;return(t=(r=o.sources.$reverse()).$find,t.$$p=($=function(t){var r=$.$$s||this;return null==r.examples&&(r.examples=n),null==t&&(t=n),r.examples["$[]"](t)["$has_key?"](e)},$.$$s=o,$),t).call(r)},n&&"source_for"}(t,null)}(t)}(t)}(t)},Opal.modules["rspec/core/shared_example_group"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e,r=e.nil,$=(e.breaker,e.slice),o=e.module,a=e.range,i=e.klass,s=e.hash2;return e.add_stubs(["$add_group","$to_proc","$registry","$alias_method","$shared_example_groups_for","$[]","$ancestors","$new","$ensure_block_has_source_location","$first_non_rspec_line","$key?","$first","$shift","$warn_if_key_taken","$add_shared_example_group","$empty?","$send","$class_eval","$extend","$configuration","$shared_example_groups","$[]=","$clear","$private","$any?","$===","$example_block_for","$warn_with","$gsub","$formatted_location","$join","$source_location","$method_defined?","$define_method","$split"]),function(t){{var n=o(t,"RSpec");n.$$proto,n.$$scope}!function(t){{var n=o(t,"Core");n.$$proto,n.$$scope}!function(t){var n,c=o(t,"SharedExampleGroup"),u=(c.$$proto,c.$$scope);e.defn(c,"$shared_examples",n=function(e){var t,o,a=this,i=n.$$p,s=i||r;return e=$.call(arguments,0),n.$$p=null,(t=(o=u.get("SharedExampleGroup").$registry()).$add_group,t.$$p=s.$to_proc(),t).apply(o,[a].concat(e))}),c.$alias_method("shared_context","shared_examples"),c.$alias_method("share_examples_for","shared_examples"),c.$alias_method("shared_examples_for","shared_examples"),e.defn(c,"$shared_example_groups",function(){var e,t=this;return(e=u.get("SharedExampleGroup").$registry()).$shared_example_groups_for.apply(e,["main"].concat(t.$ancestors()["$[]"](a(0,-1,!1))))}),function(t){var n,a=o(t,"TopLevelDSL"),i=(a.$$proto,a.$$scope);e.defn(a,"$shared_examples",n=function(e){var t,o,a=n.$$p,s=a||r;return e=$.call(arguments,0),n.$$p=null,(t=(o=i.get("SharedExampleGroup").$registry()).$add_group,t.$$p=s.$to_proc(),t).apply(o,["main"].concat(e))}),a.$alias_method("shared_context","shared_examples"),a.$alias_method("share_examples_for","shared_examples"),a.$alias_method("shared_examples_for","shared_examples"),e.defn(a,"$shared_example_groups",function(){return i.get("SharedExampleGroup").$registry().$shared_example_groups_for("main")})}(c),e.defs(c,"$registry",function(){var e,t=this;return null==t.registry&&(t.registry=r),(e=t.registry)!==!1&&e!==r?e:t.registry=u.get("Registry").$new()}),function(e,$super){function t(){}var n,o,a=t=i(e,$super,"Registry",t),c=a.$$proto,u=a.$$scope;return c.shared_example_groups=r,c.$add_group=n=function(e,t){var o,a,i,s=this,c=n.$$p,l=c||r,_=r,p=r;return t=$.call(arguments,1),n.$$p=null,s.$ensure_block_has_source_location(l,u.get("CallerFilter").$first_non_rspec_line()),(o=s["$key?"](t.$first()))===r||o.$$is_boolean&&1!=o||(_=t.$shift(),s.$warn_if_key_taken(e,_,l),s.$add_shared_example_group(e,_,l)),(o=t["$empty?"]())===r||o.$$is_boolean&&1!=o?(p=u.get("Module").$new(),(o=(a=function(e){e.$$scope,e.$$proto;return e}(p.$singleton_class())).$send,o.$$p=(i=function(e){{var t,n;i.$$s||this}return null==e&&(e=r),(t=(n=e).$class_eval,t.$$p=l.$to_proc(),t).call(n)},i.$$s=s,i),o).call(a,"define_method","extended"),(o=u.get("RSpec").$configuration()).$extend.apply(o,[p].concat(t))):r},c.$shared_example_groups_for=function(e){var t=this;return e=$.call(arguments,0),u.get("Collection").$new(e,t.$shared_example_groups())},c.$shared_example_groups=function(){var e,t,n,$,o=this;return(e=o.shared_example_groups)!==!1&&e!==r?e:o.shared_example_groups=(t=(n=u.get("Hash")).$new,t.$$p=($=function(e,t){$.$$s||this;return null==e&&(e=r),null==t&&(t=r),e["$[]="](t,u.get("Hash").$new())},$.$$s=o,$),t).call(n)},c.$clear=function(){var e=this;return e.$shared_example_groups().$clear()},a.$private(),c.$add_shared_example_group=function(e,t,n){var r=this;return r.$shared_example_groups()["$[]"](e)["$[]="](t,n)},c["$key?"]=function(e){var t,n,$,o=this;return(t=(n=[u.get("String"),u.get("Symbol"),u.get("Module")])["$any?"],t.$$p=($=function(t){$.$$s||this;return null==t&&(t=r),t["$==="](e)},$.$$s=o,$),t).call(n)},c.$warn_if_key_taken=function(e,t,n){var $,o=this,a=r;return($=a=o.$example_block_for(e,t))===r||$.$$is_boolean&&1!=$?r:u.get("RSpec").$warn_with(("            |WARNING: Shared example group '"+t+"' has been previously defined at:\n            |  "+o.$formatted_location(a)+"\n            |...and you are now defining it at:\n            |  "+o.$formatted_location(n)+"\n            |The new definition will overwrite the original one.\n").$gsub(/^ +\|/,""),s(["call_site"],{call_site:r}))},c.$formatted_location=function(e){return e.$source_location().$join(":")},c.$example_block_for=function(e,t){var n=this;return n.$shared_example_groups()["$[]"](e)["$[]"](t)},(o=u.get("Proc")["$method_defined?"]("source_location"))===r||o.$$is_boolean&&1!=o?(c.$ensure_block_has_source_location=function(e,t){var n,r,$,o=this;return e.$extend((n=(r=u.get("Module")).$new,n.$$p=($=function(){var e,n,r,o=$.$$s||this;return(e=(n=o).$define_method,e.$$p=(r=function(){r.$$s||this;return t.$split(":")},r.$$s=o,r),e).call(n,"source_location")},$.$$s=o,$),n).call(r))},r&&"ensure_block_has_source_location"):(c.$ensure_block_has_source_location=function(){return r},r&&"ensure_block_has_source_location")}(c,null)}(n)}(n)}(t),t.$extend(n.get("RSpec").$$scope.get("Core").$$scope.get("SharedExampleGroup").$$scope.get("TopLevelDSL")),n.get("Module").$send("include",n.get("RSpec").$$scope.get("Core").$$scope.get("SharedExampleGroup").$$scope.get("TopLevelDSL"))},Opal.modules["rspec/core/example_group"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}e.dynamic_require_severity="warning";var r=e.top,$=e.nil,o=(e.breaker,e.slice),a=e.module,i=e.klass,s=e.hash2,c=e.gvars;return e.add_stubs(["$extend","$include","$world","$register","$each","$define_method","$[]","$metadata","$call","$format_docstrings_block","$configuration","$delegate_to_metadata","$alias_method","$build_hash_from","$update","$<<","$examples","$new","$last","$define_example_method","$describe","$find_and_eval_shared","$to_proc","$[]=","$define_nested_shared_group_method","$shared_example_groups","$raise","$inspect","$module_exec","$module_eval","$filtered_examples","$inject","$descendant_filtered_examples","$children","$respond_to?","$superclass","$is_a?","$subclass","$set_it_up","$assign_const","$define_helpers_on","$descendants","$select","$ancestors","$==","$configure_mock_framework","$configure_expectation_framework","$ensure_example_groups_are_configured","$first","$shift","$unshift","$process","$superclass_metadata","$register_globals","$hooks","$configure_group","$empty?","$instance_variables","$before_all_ivars","$instance_variable_get","$instance_variable_set","$assign_before_all_ivars","$isolate_for_all_hook","$run_hook","$store_before_all_ivars","$wants_to_quit","$top_level?","$clear_remaining_example_groups","$example_group_started","$run_before_all_hooks","$run_examples","$all?","$map","$run","$order","$ordering_strategy","$fail_fast?","$wants_to_quit=","$fail_filtered_examples","$run_after_all_hooks","$clear","$example_group_finished","$fetch","$ordering_registry","$warn","$gsub","$set_ivars","$!","$fail_with_exception","$any_apply?","$all_apply?","$collect","$declaration_line_numbers","$description","$parent_groups","$described_class","$class","$instance_exec","$current_example","$set_exception","$base_name_for","$constant_scope_for","$disambiguate","$const_set","$gsub!","$upcase","$lstrip!","$const_defined?","$next!"]),function(r){{var u=a(r,"RSpec");u.$$proto,u.$$scope}!function(r){{var c=a(r,"Core");c.$$proto,c.$$scope}!function(r,$super){function a(){}var c,u,l,_,p,d,f=a=i(r,$super,"ExampleGroup",a),h=f.$$proto,m=f.$$scope;return f.$extend(m.get("Hooks")),f.$include(m.get("MemoizedHelpers")),f.$include(m.get("Pending")),f.$extend(m.get("SharedExampleGroup")),e.defs(f,"$world",function(){return m.get("RSpec").$world()}),e.defs(f,"$register",function(){var e=this;return e.$world().$register(e)}),function(t){{var n=t.$$scope;t.$$proto}return e.defs(t,"$delegate_to_metadata",function(e){var t,n,r,a=this;return e=o.call(arguments,0),(t=(n=e).$each,t.$$p=(r=function(e){var t,n,o,a=r.$$s||this;return null==e&&(e=$),(t=(n=a).$define_method,t.$$p=(o=function(){var t=o.$$s||this;return t.$metadata()["$[]"]("example_group")["$[]"](e)},o.$$s=a,o),t).call(n,e)},r.$$s=a,r),t).call(n)}),t.$$proto.$description=function(){var e=this,t=$;return t=e.$metadata()["$[]"]("example_group")["$[]"]("description"),n.get("RSpec").$configuration().$format_docstrings_block().$call(t)},t.$delegate_to_metadata("described_class","file_path"),t.$alias_method("display_name","description"),t.$alias_method("describes","described_class"),e.defs(t,"$define_example_method",function(e,t){var r,a,i,c=this;return null==t&&(t=s([],{})),(r=(a=c).$define_method,r.$$p=(i=function(e){var r,a,c=i.$$s||this,u=$,l=$,_=$;return e=o.call(arguments,0),r=i.$$p||$,i.$$p=null,(a=e).$to_a&&!a.$to_a.$$stub?a=a.$to_a():a.$$is_array?a:a=[a],u=null==a[0]?$:a[0],l=o.call(a,1),_=n.get("Metadata").$build_hash_from(l),r!==!1&&r!==$||_.$update(s(["pending"],{pending:n.get("RSpec").$$scope.get("Core").$$scope.get("Pending").$$scope.get("NOT_YET_IMPLEMENTED")})),_.$update(t),c.$examples()["$<<"](n.get("RSpec").$$scope.get("Core").$$scope.get("Example").$new(c,u,_,r)),c.$examples().$last()},i.$$s=c,i),r).call(a,e)}),t.$define_example_method("example"),t.$define_example_method("it"),t.$define_example_method("specify"),t.$define_example_method("focus",s(["focused","focus"],{focused:!0,focus:!0})),t.$define_example_method("focused",s(["focused","focus"],{focused:!0,focus:!0})),t.$define_example_method("fit",s(["focused","focus"],{focused:!0,focus:!0})),t.$define_example_method("pending",s(["pending"],{pending:!0})),t.$define_example_method("xexample",s(["pending"],{pending:"Temporarily disabled with xexample"})),t.$define_example_method("xit",s(["pending"],{pending:"Temporarily disabled with xit"})),t.$define_example_method("xspecify",s(["pending"],{pending:"Temporarily disabled with xspecify"})),t.$$proto.$alias_example_to=function(e,t){var n=this;return null==t&&(t=s([],{})),function(e){e.$$scope,e.$$proto;return e}(n.$singleton_class()).$define_example_method(e,t)},e.defs(t,"$define_nested_shared_group_method",function(e,t){var n,r,a,i=this;return null==t&&(t="it should behave like"),(n=(r=i).$define_method,n.$$p=(a=function(e,n){var r,i,s,c,u=a.$$s||this,l=$;return null==e&&(e=$),n=o.call(arguments,1),r=a.$$p||$,a.$$p=null,l=(i=(s=u).$describe,i.$$p=(c=function(){var t,$,o=c.$$s||this;return(t=($=o).$find_and_eval_shared,t.$$p=r.$to_proc(),t).apply($,["examples",e].concat(n))},c.$$s=u,c),i).call(s,""+t+" "+e),l.$metadata()["$[]="]("shared_group_name",e),l},a.$$s=i,a),n).call(r,e)}),t.$define_nested_shared_group_method("it_behaves_like","behaves like"),t.$define_nested_shared_group_method("it_should_behave_like"),t.$$proto.$alias_it_behaves_like_to=TMP_6=function(e,t){var n,r,a=this,i=TMP_6.$$p,s=i||$;return t=o.call(arguments,1),TMP_6.$$p=null,(n=(r=function(e){e.$$scope,e.$$proto;return e}(a.$singleton_class())).$define_nested_shared_group_method,n.$$p=s.$to_proc(),n).apply(r,[e].concat(t))},$&&"alias_it_behaves_like_to"}(f.$singleton_class()),e.defs(f,"$include_context",c=function(e,t){var n,r,a=this,i=c.$$p,s=i||$;return t=o.call(arguments,1),c.$$p=null,(n=(r=a).$find_and_eval_shared,n.$$p=s.$to_proc(),n).apply(r,["context",e].concat(t))}),e.defs(f,"$include_examples",u=function(e,t){var n,r,a=this,i=u.$$p,s=i||$;return t=o.call(arguments,1),u.$$p=null,(n=(r=a).$find_and_eval_shared,n.$$p=s.$to_proc(),n).apply(r,["examples",e].concat(t))}),e.defs(f,"$find_and_eval_shared",l=function(e,t,n){var r,a,i,s=this,c=l.$$p,u=c||$,_=$;return n=o.call(arguments,2),l.$$p=null,((r=_=s.$shared_example_groups()["$[]"](t))===$||r.$$is_boolean&&1!=r)&&s.$raise(m.get("ArgumentError"),"Could not find shared "+e+" "+t.$inspect()),(r=(a=s).$module_exec,r.$$p=_.$to_proc(),r).apply(a,[].concat(n)),u!==!1&&u!==$?(r=(i=s).$module_eval,r.$$p=u.$to_proc(),r).call(i):$}),e.defs(f,"$examples",function(){var e,t=this;return null==t.examples&&(t.examples=$),(e=t.examples)!==!1&&e!==$?e:t.examples=[]}),e.defs(f,"$filtered_examples",function(){var e=this;return e.$world().$filtered_examples()["$[]"](e)}),e.defs(f,"$descendant_filtered_examples",function(){var e,n,r,o,a=this;return null==a.descendant_filtered_examples&&(a.descendant_filtered_examples=$),(e=a.descendant_filtered_examples)!==!1&&e!==$?e:a.descendant_filtered_examples=t(a.$filtered_examples(),(n=(r=a.$children()).$inject,n.$$p=(o=function(e,n){o.$$s||this;return null==e&&(e=$),null==n&&(n=$),t(e,n.$descendant_filtered_examples())},o.$$s=a,o),n).call(r,[]))}),e.defs(f,"$metadata",function(){var e,t,n=this;return null==n.metadata&&(n.metadata=$),t=n.metadata,(e=null!=t&&t!==$?"instance-variable":$)===$||e.$$is_boolean&&1!=e?$:n.metadata}),e.defs(f,"$superclass_metadata",function(){var e,t,n=this;return null==n.superclass_metadata&&(n.superclass_metadata=$),(e=n.superclass_metadata)!==!1&&e!==$?e:n.superclass_metadata=function(){return(t=n.$superclass()["$respond_to?"]("metadata"))===$||t.$$is_boolean&&1!=t?$:n.$superclass().$metadata()}()}),e.defs(f,"$describe",_=function(e){var t,n,r=this,a=_.$$p,i=a||$,c=$;return e=o.call(arguments,0),_.$$p=null,((t=e.$last()["$is_a?"](m.get("Hash")))===$||t.$$is_boolean&&1!=t)&&e["$<<"](s([],{})),e.$last().$update(s(["example_group_block"],{example_group_block:i})),c=(t=(n=r).$subclass,t.$$p=i.$to_proc(),t).call(n,r,e),r.$children()["$<<"](c),c}),function(e){e.$$scope,e.$$proto;return e.$alias_method("context","describe")}(f.$singleton_class()),e.defs(f,"$subclass",p=function(e,t){var n,r,o,a=p.$$p,i=a||$,s=$;return p.$$p=null,s=m.get("Class").$new(e),(n=s).$set_it_up.apply(n,[].concat(t)),m.get("ExampleGroups").$assign_const(s),i!==!1&&i!==$&&(r=(o=s).$module_eval,r.$$p=i.$to_proc(),r).call(o),m.get("MemoizedHelpers").$define_helpers_on(s),s}),e.defs(f,"$children",function(){var e,t=this;return null==t.children&&(t.children=$),(e=t.children)!==!1&&e!==$?e:t.children=[]}),e.defs(f,"$descendants",function(){var e,n,r,o,a=this;return null==a._descendants&&(a._descendants=$),(e=a._descendants)!==!1&&e!==$?e:a._descendants=t([a],(n=(r=a.$children()).$inject,n.$$p=(o=function(e,n){o.$$s||this;return null==e&&(e=$),null==n&&(n=$),t(e,n.$descendants())},o.$$s=a,o),n).call(r,[]))}),e.defs(f,"$parent_groups",function(){var e,t,r,o,a=this;return null==a.parent_groups&&(a.parent_groups=$),(e=a.parent_groups)!==!1&&e!==$?e:a.parent_groups=(t=(r=a.$ancestors()).$select,t.$$p=(o=function(e){o.$$s||this;return null==e&&(e=$),n(e,m.get("RSpec").$$scope.get("Core").$$scope.get("ExampleGroup"))},o.$$s=a,o),t).call(r)}),e.defs(f,"$top_level?",function(){var e,t=this;return null==t.top_level&&(t.top_level=$),(e=t.top_level)!==!1&&e!==$?e:t.top_level=t.$superclass()["$=="](m.get("ExampleGroup"))}),e.defs(f,"$ensure_example_groups_are_configured",function(){var t;return(t=null!=e.cvars["@@example_groups_configured"]?"class variable":$)===$||t.$$is_boolean&&1!=t?(m.get("RSpec").$configuration().$configure_mock_framework(),m.get("RSpec").$configuration().$configure_expectation_framework(),e.cvars["@@example_groups_configured"]=!0):$}),e.defs(f,"$set_it_up",function(e){var t,n=this,r=$;return e=o.call(arguments,0),n.$ensure_example_groups_are_configured(),(t=e.$first()["$is_a?"](m.get("Symbol")))===$||t.$$is_boolean&&1!=t||(r=e.$shift()),e["$<<"](m.get("Metadata").$build_hash_from(e)),r!==!1&&r!==$&&e.$unshift(r),n.metadata=(t=m.get("RSpec").$$scope.get("Core").$$scope.get("Metadata").$new(n.$superclass_metadata())).$process.apply(t,[].concat(e)),n.order=$,n.$hooks().$register_globals(n,m.get("RSpec").$configuration().$hooks()),n.$world().$configure_group(n)}),e.defs(f,"$before_all_ivars",function(){var e,t=this;return null==t.before_all_ivars&&(t.before_all_ivars=$),(e=t.before_all_ivars)!==!1&&e!==$?e:t.before_all_ivars=s([],{})}),e.defs(f,"$store_before_all_ivars",function(e){var t,n,r,o=this;return(t=e.$instance_variables()["$empty?"]())===$||t.$$is_boolean&&1!=t?(t=(n=e.$instance_variables()).$each,t.$$p=(r=function(t){var n=r.$$s||this;return null==t&&(t=$),n.$before_all_ivars()["$[]="](t,e.$instance_variable_get(t))},r.$$s=o,r),t).call(n):$}),e.defs(f,"$assign_before_all_ivars",function(e,t){var n,r,o,a=this;return(n=(r=e).$each,n.$$p=(o=function(e,n){o.$$s||this;return null==e&&(e=$),null==n&&(n=$),t.$instance_variable_set(e,n)},o.$$s=a,o),n).call(r)}),e.defs(f,"$run_before_all_hooks",function(e){var t,n,r,o=this;if((t=o.$descendant_filtered_examples()["$empty?"]())!==$&&(!t.$$is_boolean||1==t))return $;try{return o.$assign_before_all_ivars(o.$superclass().$before_all_ivars(),e),(t=(n=m.get("AllHookMemoizedHash").$$scope.get("Before")).$isolate_for_all_hook,t.$$p=(r=function(){var t=r.$$s||this;return t.$run_hook("before","all",e)},r.$$s=o,r),t).call(n,e)}finally{o.$store_before_all_ivars(e)}}),e.defs(f,"$run_around_each_hooks",function(e,t){var n=this;return n.$run_hook("around","each",e,t)}),e.defs(f,"$run_before_each_hooks",function(e){var t=this;return t.$run_hook("before","each",e)}),e.defs(f,"$run_after_each_hooks",function(e){var t=this;return t.$run_hook("after","each",e)}),e.defs(f,"$run_after_all_hooks",function(e){var t,n,r,o=this;return(t=o.$descendant_filtered_examples()["$empty?"]())===$||t.$$is_boolean&&1!=t?(o.$assign_before_all_ivars(o.$before_all_ivars(),e),(t=(n=m.get("AllHookMemoizedHash").$$scope.get("After")).$isolate_for_all_hook,t.$$p=(r=function(){var t=r.$$s||this;return t.$run_hook("after","all",e)},r.$$s=o,r),t).call(n,e)):$}),e.defs(f,"$run",function(t){var n,r,o,a,i=this,s=$,c=$,u=$;if((n=m.get("RSpec").$wants_to_quit())!==$&&(!n.$$is_boolean||1==n))return(n=i["$top_level?"]())===$||n.$$is_boolean&&1!=n||m.get("RSpec").$clear_remaining_example_groups(),$;t.$example_group_started(i);try{try{return i.$run_before_all_hooks(i.$new()),s=i.$run_examples(t),c=(n=(r=i.$ordering_strategy().$order(i.$children())).$map,n.$$p=(o=function(e){o.$$s||this;return null==e&&(e=$),e.$run(t)},o.$$s=i,o),n).call(r)["$all?"](),(n=s!==!1&&s!==$)?c:n}catch(l){if(e.rescue(l,[m.get("Exception")]))return u=l,(n=i["$fail_fast?"]())===$||n.$$is_boolean&&1!=n||(n=[!0],a=m.get("RSpec"),a["$wants_to_quit="].apply(a,n),n[n.length-1]),i.$fail_filtered_examples(u,t);throw l}}finally{i.$run_after_all_hooks(i.$new()),i.$before_all_ivars().$clear(),t.$example_group_finished(i)}}),e.defs(f,"$ordering_strategy",function(){var e,t,n,r=this,o=$,a=$;return o=r.$metadata().$fetch("order","global"),a=m.get("RSpec").$configuration().$ordering_registry(),(e=(t=a).$fetch,e.$$p=(n=function(){var e=n.$$s||this;return e.$warn(("            |WARNING: Ignoring unknown ordering specified using `:order => "+o.$inspect()+"` metadata.\n            |         Falling back to configured global ordering.\n            |         Unrecognized ordering specified at: "+e.$metadata()["$[]"]("example_group")["$[]"]("location")+"\n").$gsub(/^ +\|/,"")),a.$fetch("global")},n.$$s=r,n),e).call(t,o)}),e.defs(f,"$run_examples",function(e){var t,n,r,o=this;return(t=(n=o.$ordering_strategy().$order(o.$filtered_examples())).$map,t.$$p=(r=function(t){var n,o,a=r.$$s||this,i=$,s=$;return null==t&&(t=$),(n=m.get("RSpec").$wants_to_quit())===$||n.$$is_boolean&&1!=n?(i=a.$new(),a.$set_ivars(i,a.$before_all_ivars()),s=t.$run(i,e),o=a["$fail_fast?"](),(n=o!==!1&&o!==$?s["$!"]():o)===$||n.$$is_boolean&&1!=n||(n=[!0],o=m.get("RSpec"),o["$wants_to_quit="].apply(o,n),n[n.length-1]),s):$},r.$$s=o,r),t).call(n)["$all?"]()}),e.defs(f,"$fail_filtered_examples",function(e,t){var n,r,o,a,i,s=this;return(n=(r=s.$filtered_examples()).$each,n.$$p=(o=function(n){o.$$s||this;return null==n&&(n=$),n.$fail_with_exception(t,e)},o.$$s=s,o),n).call(r),(n=(a=s.$children()).$each,n.$$p=(i=function(n){i.$$s||this;return null==n&&(n=$),t.$example_group_started(n),n.$fail_filtered_examples(e,t),t.$example_group_finished(n)},i.$$s=s,i),n).call(a),!1}),e.defs(f,"$fail_fast?",function(){return m.get("RSpec").$configuration()["$fail_fast?"]()}),e.defs(f,"$any_apply?",function(e){var t=this;return t.$metadata()["$any_apply?"](e)}),e.defs(f,"$all_apply?",function(e){var t=this;return t.$metadata()["$all_apply?"](e)}),e.defs(f,"$declaration_line_numbers",function(){var e,n,r,o,a,i,s=this;return null==s.declaration_line_numbers&&(s.declaration_line_numbers=$),(e=s.declaration_line_numbers)!==!1&&e!==$?e:s.declaration_line_numbers=t(t([s.$metadata()["$[]"]("example_group")["$[]"]("line_number")],(n=(r=s.$examples()).$collect,n.$$p=(o=function(e){o.$$s||this;return null==e&&(e=$),e.$metadata()["$[]"]("line_number")},o.$$s=s,o),n).call(r)),(n=(a=s.$children()).$inject,n.$$p=(i=function(e,n){i.$$s||this;return null==e&&(e=$),null==n&&(n=$),t(e,n.$declaration_line_numbers())},i.$$s=s,i),n).call(a,[]))}),e.defs(f,"$top_level_description",function(){var e=this;return e.$parent_groups().$last().$description()}),e.defs(f,"$set_ivars",function(e,t){var n,r,o,a=this;return(n=(r=t).$each,n.$$p=(o=function(t,n){o.$$s||this;return null==t&&(t=$),null==n&&(n=$),e.$instance_variable_set(t,n)},o.$$s=a,o),n).call(r)}),h.$described_class=function(){var e=this;return e.$class().$described_class()},h.$instance_exec_with_rescue=d=function(t,n){var r,o,a=this,i=d.$$p,s=i||$,c=$;null==n&&(n=$),d.$$p=null;try{return(r=(o=a).$instance_exec,r.$$p=s.$to_proc(),r).call(o,t)}catch(u){if(e.rescue(u,[m.get("Exception")]))return c=u,(r=m.get("RSpec").$current_example())===$||r.$$is_boolean&&1!=r?a.$raise():m.get("RSpec").$current_example().$set_exception(c,n);throw u}},$&&"instance_exec_with_rescue"}(c,null)}(u),function(n){var r=a(n,"ExampleGroups"),o=(r.$$proto,r.$$scope);e.defs(r,"$assign_const",function(e){var t=this,n=$,r=$,o=$;return n=t.$base_name_for(e),r=t.$constant_scope_for(e),o=t.$disambiguate(n,r),r.$const_set(o,e)}),e.defs(r,"$constant_scope_for",function(e){var t=this,n=$;return n=e.$superclass(),n["$=="](o.get("Core").$$scope.get("ExampleGroup"))&&(n=t),n}),e.defs(r,"$base_name_for",function(e){var n,r,o,a=this,i=$;return(n=e.$description()["$empty?"]())===$||n.$$is_boolean&&1!=n?(i=t(" ",e.$description()),(n=(r=i)["$gsub!"],n.$$p=(o=function(){{var e;o.$$s||this}return((e=c["~"])===$?$:e["$[]"](1)).$upcase()},o.$$s=a,o),n).call(r,/[^0-9a-zA-Z]+([0-9a-zA-Z])/),i["$lstrip!"](),i["$gsub!"](/\W/,""),i["$gsub!"](/\A([^A-Z]|\z)/,"Nested\\1"),i):"Anonymous"}),e.defs(r,"$disambiguate",function(e,t){var n,r;if((n=t["$const_defined?"](e))===$||n.$$is_boolean&&1!=n)return e;for(e["$<<"]("_2");(r=t["$const_defined?"](e))!==$&&(!r.$$is_boolean||1==r);)e["$next!"]();return e})}(u)}(r)},Opal.modules["rspec/mocks/instance_method_stasher"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}e.dynamic_require_severity="warning";var n=e.top,r=e.nil,$=(e.breaker,e.slice,e.module),o=e.klass;return e.add_stubs(["$attr_reader","$to_f","$!","$method_defined_directly_on_klass?","$__send__","$stashed_method_name","$private","$method_handle_for","$method_defined_on_klass?","$method_owned_by_klass?","$method_defined?","$private_method_defined?","$owner","$instance_method","$===","$class","$=="]),function(n){{var a=$(n,"RSpec");a.$$proto,a.$$scope}!function(n){{var a=$(n,"Mocks");a.$$proto,a.$$scope}!function(n,$super){function $(){}var a=$=o(n,$super,"InstanceMethodStasher",$),i=a.$$proto,s=a.$$scope;return i.method_is_stashed=i.klass=i.method=i.original_method=i.object=r,i.$initialize=function(e,t){var n=this;return n.object=e,n.method=t,n.klass=function(e){e.$$scope,e.$$proto;return e}(e.$singleton_class()),n.original_method=r,n.method_is_stashed=!1},a.$attr_reader("original_method"),t(s.get("RUBY_VERSION").$to_f(),1.9)?(i["$method_is_stashed?"]=function(){var e=this;return e.method_is_stashed},i.$stash=function(){var e,t,n=this;return(e=(t=n["$method_defined_directly_on_klass?"]()["$!"]())!==!1&&t!==r?t:n.method_is_stashed)===r||e.$$is_boolean&&1!=e?(n.klass.$__send__("alias_method",n.$stashed_method_name(),n.method),n.method_is_stashed=!0):r
},i.$stashed_method_name=function(){var e=this;return"obfuscated_by_rspec_mocks__"+e.method},a.$private("stashed_method_name"),i.$restore=function(){var e,t=this;return(e=t.method_is_stashed)===r||e.$$is_boolean&&1!=e?r:((e=t.klass.$__send__("method_defined?",t.method))===r||e.$$is_boolean&&1!=e||t.klass.$__send__("undef_method",t.method),t.klass.$__send__("alias_method",t.method,t.$stashed_method_name()),t.klass.$__send__("remove_method",t.$stashed_method_name()),t.method_is_stashed=!1)}):(i["$method_is_stashed?"]=function(){var e=this;return e.original_method["$!"]()["$!"]()},i.$stash=function(){var t,n=this;return(t=n["$method_defined_directly_on_klass?"]()["$!"]())===r||t.$$is_boolean&&1!=t?(t=n.original_method)!==!1&&t!==r?t:n.original_method=e.get("RSpec").$$scope.get("Mocks").$method_handle_for(n.object,n.method):r},i.$restore=function(){var e,t=this;return(e=t.original_method)===r||e.$$is_boolean&&1!=e?r:((e=t.klass.$__send__("method_defined?",t.method))===r||e.$$is_boolean&&1!=e||t.klass.$__send__("undef_method",t.method),t.klass.$__send__("define_method",t.method,t.original_method),t.original_method=r)}),a.$private(),i["$method_defined_directly_on_klass?"]=function(){var e,t=this;return e=t["$method_defined_on_klass?"](),e!==!1&&e!==r?t["$method_owned_by_klass?"]():e},i["$method_defined_on_klass?"]=function(e){var t,n=this;return null==e&&(e=n.klass),(t=e["$method_defined?"](n.method))!==!1&&t!==r?t:e["$private_method_defined?"](n.method)},i["$method_owned_by_klass?"]=function(){var e,t=this,n=r;return n=t.klass.$instance_method(t.method).$owner(),((e=s.get("Module")["$==="](n))===r||e.$$is_boolean&&1!=e)&&(n=n.$class()),(e=n["$=="](t.klass))!==!1&&e!==r?e:t["$method_defined_on_klass?"](n)["$!"]()},r&&"method_owned_by_klass?"}(a,null)}(a)}(n)},Opal.modules["rspec/mocks/method_double"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass,a=e.hash2;return e.add_stubs(["$attr_reader","$new","$original_method","$method_handle_for","$method_name","$__send__","$to_proc","$alias_method","$===","$private_method_defined?","$object_singleton_class","$protected_method_defined?","$visibility","$stash","$define_proxy_method","$save_original_method!","$class_exec","$define_method","$proxy_method_invoked","$message_received","$method_is_stashed?","$restore","$restore_original_visibility","$method_defined?","$each","$verify_messages_received","$expectations","$restore_original_method","$clear","$stubs","$configure_method","$message_expectation_class","$<<","$unshift","$setup_simple_method_double","$any?","$add_stub","$empty?","$raise_method_not_stubbed_error","$reset","$delete","$raise"]),function(t){{var i=$(t,"RSpec");i.$$proto,i.$$scope}!function(t){{var i=$(t,"Mocks");i.$$proto,i.$$scope}!function(t,$super){function $(){}var i,s,c,u,l=$=o(t,$super,"MethodDouble",$),_=l.$$proto,p=l.$$scope;return _.original_method=_.method_stasher=_.proxy=_.object=_.method_name=_.method_is_proxied=_.original_visibility=n,l.$attr_reader("method_name","object","expectations","stubs"),_.$initialize=function(e,t,r){var $=this;return $.method_name=t,$.object=e,$.proxy=r,$.original_visibility=n,$.method_stasher=p.get("InstanceMethodStasher").$new(e,t),$.method_is_proxied=!1,$.expectations=[],$.stubs=[]},_.$original_method=function(){var e,t,$,o,a,i=this;return(e=i.original_method)!==!1&&e!==n?e:i.original_method=(t=($=i.method_stasher.$original_method())!==!1&&$!==n?$:i.proxy.$method_handle_for(i.$method_name()))!==!1&&t!==n?t:($=(o=p.get("Proc")).$new,$.$$p=(a=function(e){var t,$,o,i=a.$$s||this;return null==i.object&&(i.object=n),null==i.method_name&&(i.method_name=n),e=r.call(arguments,0),t=a.$$p||n,a.$$p=null,($=(o=i.object).$__send__,$.$$p=t.$to_proc(),$).apply(o,["method_missing",i.method_name].concat(e))},a.$$s=i,a),$).call(o)},l.$alias_method("save_original_method!","original_method"),_.$visibility=function(){var e,t=this;return(e=p.get("TestDouble")["$==="](t.object))===n||e.$$is_boolean&&1!=e?(e=t.$object_singleton_class()["$private_method_defined?"](t.method_name))===n||e.$$is_boolean&&1!=e?(e=t.$object_singleton_class()["$protected_method_defined?"](t.method_name))===n||e.$$is_boolean&&1!=e?"public":"protected":"private":"public"},_.$object_singleton_class=function(){var e=this;return function(e){e.$$scope,e.$$proto;return e}(e.object.$singleton_class())},_.$configure_method=function(){var e,t=this;return t.original_visibility=[t.$visibility(),t.$method_name()],((e=t.method_is_proxied)===n||e.$$is_boolean&&1!=e)&&t.method_stasher.$stash(),t.$define_proxy_method()},_.$define_proxy_method=function(){var e,t,$,o=this;return(e=o.method_is_proxied)===n||e.$$is_boolean&&1!=e?(o["$save_original_method!"](),(e=(t=o.$object_singleton_class()).$class_exec,e.$$p=($=function(e,t,o){var a,i,s,c=$.$$s||this;return null==e&&(e=n),null==t&&(t=n),null==o&&(o=n),(a=(i=c).$define_method,a.$$p=(s=function(t){var $,o,a,i=s.$$s||this;return t=r.call(arguments,0),$=s.$$p||n,s.$$p=null,(o=(a=e).$proxy_method_invoked,o.$$p=$.$to_proc(),o).apply(a,[i].concat(t))},s.$$s=c,s),a).call(i,t),c.$__send__(o,t)},$.$$s=o,$),e).call(t,o,o.$method_name(),o.$visibility()),o.method_is_proxied=!0):n},_.$proxy_method_invoked=i=function(e,t){var $,o,a=this,s=i.$$p,c=s||n;return t=r.call(arguments,1),i.$$p=null,($=(o=a.proxy).$message_received,$.$$p=c.$to_proc(),$).apply(o,[a.$method_name()].concat(t))},_.$restore_original_method=function(){var e,t=this;return(e=t.method_is_proxied)===n||e.$$is_boolean&&1!=e?n:(t.$object_singleton_class().$__send__("remove_method",t.method_name),(e=t.method_stasher["$method_is_stashed?"]())===n||e.$$is_boolean&&1!=e||t.method_stasher.$restore(),t.$restore_original_visibility(),t.method_is_proxied=!1)},_.$restore_original_visibility=function(){var e,t,r,$=this;return t=$.original_visibility,(e=t!==!1&&t!==n?(r=$.$object_singleton_class()["$method_defined?"]($.method_name))!==!1&&r!==n?r:$.$object_singleton_class()["$private_method_defined?"]($.method_name):t)===n||e.$$is_boolean&&1!=e?n:(e=$.$object_singleton_class()).$__send__.apply(e,[].concat($.original_visibility))},_.$verify=function(){var e,t,r,$=this;return(e=(t=$.$expectations()).$each,e.$$p=(r=function(e){r.$$s||this;return null==e&&(e=n),e.$verify_messages_received()},r.$$s=$,r),e).call(t)},_.$reset=function(){var e=this;return e.$restore_original_method(),e.$clear()},_.$clear=function(){var e=this;return e.$expectations().$clear(),e.$stubs().$clear()},_.$message_expectation_class=function(){return p.get("MessageExpectation")},_.$add_expectation=s=function(e,t,r,$){var o,a,i=this,c=s.$$p,u=c||n,l=n;return s.$$p=null,i.$configure_method(),l=(o=(a=i.$message_expectation_class()).$new,o.$$p=u.$to_proc(),o).call(a,e,t,r,i,1,$),i.$expectations()["$<<"](l),l},_.$build_expectation=function(e,t){var r=this,$=n;return $=p.get("IGNORED_BACKTRACE_LINE"),r.$message_expectation_class().$new(e,t,$,r)},_.$add_stub=c=function(e,t,r,$){var o,i,s=this,u=c.$$p,l=u||n,_=n;return null==$&&($=a([],{})),c.$$p=null,s.$configure_method(),_=(o=(i=s.$message_expectation_class()).$new,o.$$p=l.$to_proc(),o).call(i,e,t,r,s,"any",$),s.$stubs().$unshift(_),_},_.$add_simple_stub=function(e,t){var n=this;return n.$setup_simple_method_double(e,t,n.$stubs())},_.$add_simple_expectation=function(e,t,n,r){var $=this;return $.$setup_simple_method_double(e,t,$.$expectations(),n,r)},_.$setup_simple_method_double=function(e,t,r,$,o){var a=this,i=n;return null==$&&($=n),null==o&&(o=n),a.$define_proxy_method(),i=p.get("SimpleMessageExpectation").$new(e,t,$,o),r.$unshift(i),i},_.$add_default_stub=u=function(e){var t,$,o=this,a=u.$$p,i=a||n;return e=r.call(arguments,0),u.$$p=null,(t=o.$stubs()["$any?"]())===n||t.$$is_boolean&&1!=t?(t=($=o).$add_stub,t.$$p=i.$to_proc(),t).apply($,[].concat(e)):n},_.$remove_stub=function(){var e,t=this;return(e=t.$stubs()["$empty?"]())===n||e.$$is_boolean&&1!=e||t.$raise_method_not_stubbed_error(),(e=t.$expectations()["$empty?"]())===n||e.$$is_boolean&&1!=e?t.$stubs().$clear():t.$reset()},_.$remove_single_stub=function(e){var t,r,$=this;return $.$stubs().$delete(e),r=$.$stubs()["$empty?"](),(t=r!==!1&&r!==n?$.$expectations()["$empty?"]():r)===n||t.$$is_boolean&&1!=t?n:$.$restore_original_method()},_.$raise_method_not_stubbed_error=function(){var e=this;return e.$raise(p.get("MockExpectationError"),"The method `"+e.$method_name()+"` was not stubbed or was already unstubbed")},e.cdecl(p,"IGNORED_BACKTRACE_LINE","this backtrace line is ignored")}(i,null)}(i)}(t)},Opal.modules["rspec/mocks/argument_matchers"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass,a=e.hash2;return e.add_stubs(["$===","$==","$=~","$include?","$all?","$has_key?","$[]","$sub","$inspect","$none?","$superset?","$new","$join","$respond_to?","$matches?","$instance_of?","$kind_of?","$anythingize_lonely_keys","$first","$count","$alias_method","$private","$class","$last","$delete_at","$each","$[]=","$anything"]),function(t){{var i=$(t,"RSpec");i.$$proto,i.$$scope}!function(t){{var i=$(t,"Mocks");i.$$proto,i.$$scope}!function(t){var i=$(t,"ArgumentMatchers"),s=(i.$$proto,i.$$scope);!function(e,$super){function t(){}{var r=t=o(e,$super,"AnyArgsMatcher",t),$=r.$$proto;r.$$scope}return $.$description=function(){return"any args"},n&&"description"}(i,null),function(e,$super){function t(){}{var r=t=o(e,$super,"AnyArgMatcher",t),$=r.$$proto;r.$$scope}return $.$initialize=function(){return n},$["$=="]=function(){return!0},n&&"=="}(i,null),function(e,$super){function t(){}{var r=t=o(e,$super,"NoArgsMatcher",t),$=r.$$proto;r.$$scope}return $.$description=function(){return"no args"},n&&"description"}(i,null),function(e,$super){function t(){}var r=t=o(e,$super,"RegexpMatcher",t),$=r.$$proto,a=r.$$scope;return $.regexp=n,$.$initialize=function(e){var t=this;return t.regexp=e},$["$=="]=function(e){var t,r=this;return(t=a.get("Regexp")["$==="](e))===n||t.$$is_boolean&&1!=t?e["$=~"](r.regexp):e["$=="](r.regexp)},n&&"=="}(i,null),function(e,$super){function t(){}{var r=t=o(e,$super,"BooleanMatcher",t),$=r.$$proto;r.$$scope}return $.$initialize=function(){return n},$["$=="]=function(e){return[!0,!1]["$include?"](e)},n&&"=="}(i,null),function(t,$super){function r(){}var $=r=o(t,$super,"HashIncludingMatcher",r),a=$.$$proto,i=$.$$scope;return a.expected=n,a.$initialize=function(e){var t=this;return t.expected=e},a["$=="]=function(t){var r,$,o,a=this;try{return(r=($=a.expected)["$all?"],r.$$p=(o=function(e,r){{var $;o.$$s||this}return null==e&&(e=n),null==r&&(r=n),$=t["$has_key?"](e),$!==!1&&$!==n?r["$=="](t["$[]"](e)):$},o.$$s=a,o),r).call($)}catch(s){if(e.rescue(s,[i.get("NoMethodError")]))return!1;throw s}},a.$description=function(){var e=this;return"hash_including("+e.expected.$inspect().$sub(/^\{/,"").$sub(/\}$/,"")+")"},n&&"description"}(i,null),function(t,$super){function r(){}var $=r=o(t,$super,"HashExcludingMatcher",r),a=$.$$proto,i=$.$$scope;return a.expected=n,a.$initialize=function(e){var t=this;return t.expected=e},a["$=="]=function(t){var r,$,o,a=this;try{return(r=($=a.expected)["$none?"],r.$$p=(o=function(e,r){{var $;o.$$s||this}return null==e&&(e=n),null==r&&(r=n),$=t["$has_key?"](e),$!==!1&&$!==n?r["$=="](t["$[]"](e)):$},o.$$s=a,o),r).call($)}catch(s){if(e.rescue(s,[i.get("NoMethodError")]))return!1;throw s}},a.$description=function(){var e=this;return"hash_not_including("+e.expected.$inspect().$sub(/^\{/,"").$sub(/\}$/,"")+")"},n&&"description"}(i,null),function(e,$super){function t(){}var r=t=o(e,$super,"ArrayIncludingMatcher",t),$=r.$$proto,a=r.$$scope;return $.expected=n,$.$initialize=function(e){var t=this;return t.expected=e},$["$=="]=function(e){var t=this;return a.get("Set").$new(e)["$superset?"](a.get("Set").$new(t.expected))},$.$description=function(){var e=this;return"array_including("+e.expected.$join(",")+")"},n&&"description"}(i,null),function(e,$super){function t(){}{var $=t=o(e,$super,"DuckTypeMatcher",t),a=$.$$proto;$.$$scope}return a.methods_to_respond_to=n,a.$initialize=function(e){var t=this;return e=r.call(arguments,0),t.methods_to_respond_to=e},a["$=="]=function(e){var t,r,$,o=this;return(t=(r=o.methods_to_respond_to)["$all?"],t.$$p=($=function(t){$.$$s||this;return null==t&&(t=n),e["$respond_to?"](t)},$.$$s=o,$),t).call(r)},n&&"=="}(i,null),function(e,$super){function t(){}{var r=t=o(e,$super,"MatcherMatcher",t),$=r.$$proto;r.$$scope}return $.matcher=n,$.$initialize=function(e){var t=this;return t.matcher=e},$["$=="]=function(e){var t=this;return t.matcher["$matches?"](e)},n&&"=="}(i,null),function(e,$super){function t(){}{var r=t=o(e,$super,"EqualityProxy",t),$=r.$$proto;r.$$scope}return $.given=n,$.$initialize=function(e){var t=this;return t.given=e},$["$=="]=function(e){var t=this;return t.given["$=="](e)},n&&"=="}(i,null),function(e,$super){function t(){}{var r=t=o(e,$super,"InstanceOf",t),$=r.$$proto;r.$$scope}return $.klass=n,$.$initialize=function(e){var t=this;return t.klass=e},$["$=="]=function(e){var t=this;return e["$instance_of?"](t.klass)},n&&"=="}(i,null),function(e,$super){function t(){}{var r=t=o(e,$super,"KindOf",t),$=r.$$proto;r.$$scope}return $.klass=n,$.$initialize=function(e){var t=this;return t.klass=e},$["$=="]=function(e){var t=this;return e["$kind_of?"](t.klass)},n&&"=="}(i,null),e.defn(i,"$any_args",function(){return s.get("AnyArgsMatcher").$new()}),e.defn(i,"$anything",function(){return s.get("AnyArgMatcher").$new(n)}),e.defn(i,"$no_args",function(){return s.get("NoArgsMatcher").$new()}),e.defn(i,"$duck_type",function(e){var t;return e=r.call(arguments,0),(t=s.get("DuckTypeMatcher")).$new.apply(t,[].concat(e))}),e.defn(i,"$boolean",function(){return s.get("BooleanMatcher").$new(n)}),e.defn(i,"$hash_including",function(e){var t,n=this;return e=r.call(arguments,0),s.get("HashIncludingMatcher").$new((t=n).$anythingize_lonely_keys.apply(t,[].concat(e)))}),e.defn(i,"$array_including",function(e){var t,$,o=n;return e=r.call(arguments,0),o=function(){return $=s.get("Array")["$==="](e.$first()),(t=$!==!1&&$!==n?e.$count()["$=="](1):$)===n||t.$$is_boolean&&1!=t?e:e.$first()}(),s.get("ArrayIncludingMatcher").$new(o)}),e.defn(i,"$hash_excluding",function(e){var t,n=this;return e=r.call(arguments,0),s.get("HashExcludingMatcher").$new((t=n).$anythingize_lonely_keys.apply(t,[].concat(e)))}),i.$alias_method("hash_not_including","hash_excluding"),e.defn(i,"$instance_of",function(e){return s.get("InstanceOf").$new(e)}),i.$alias_method("an_instance_of","instance_of"),e.defn(i,"$kind_of",function(e){return s.get("KindOf").$new(e)}),i.$alias_method("a_kind_of","kind_of"),i.$private(),e.defn(i,"$anythingize_lonely_keys",function(e){var t,$,o,i=this,c=n;return e=r.call(arguments,0),c=function(){return e.$last().$class()["$=="](s.get("Hash"))?e.$delete_at(-1):a([],{})}(),(t=($=e).$each,t.$$p=(o=function(e){var t=o.$$s||this;return null==e&&(e=n),c["$[]="](e,t.$anything())},o.$$s=i,o),t).call($),c})}(i)}(i)}(t)},Opal.modules["rspec/mocks/object_reference"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=e.breaker,$=(e.slice,e.module),o=e.klass;return e.add_stubs(["$===","$new","$raise","$inspect","$name","$!","$object","$private","$original_value","$original"]),function(t){{var a=$(t,"RSpec");a.$$proto,a.$$scope}!function(t){var a=$(t,"Mocks"),i=(a.$$proto,a.$$scope);!function(t,$super){function r(){}var $=r=o(t,$super,"ObjectReference",r),a=($.$$proto,$.$$scope);return e.defs($,"$for",function(e,t){var r=this,$=n;return null==t&&(t=!1),function(){return $=e,a.get("Module")["$==="]($)?a.get("DirectModuleReference").$new(e):a.get("String")["$==="]($)?a.get("NamedObjectReference").$new(e):t!==!1&&t!==n?a.get("DirectObjectReference").$new(e):r.$raise(a.get("ArgumentError"),"Module or String expected, got "+e.$inspect())}()}),n&&"for"}(a,null),function(t,$super){function $(){}var a,i=$=o(t,$super,"DirectObjectReference",$),s=i.$$proto,c=i.$$scope;return s.object=n,s.$initialize=function(e){var t=this;return t.object=e},s.$description=function(){var e=this;return e.object.$inspect()},s.$const_to_replace=function(){var e=this;return e.$raise(c.get("ArgumentError"),"Can not perform constant replacement with an object.")},s["$defined?"]=function(){return!0},s.$when_loaded=a=function(){var t,$=this,o=a.$$p,i=o||n;return a.$$p=null,t=e.yield1(i,$.object),t===r?t:t},n&&"when_loaded"}(a,null),function(t,$super){function r(){}{var $=r=o(t,$super,"DirectModuleReference",r),a=$.$$proto;$.$$scope}return a.object=n,a.$const_to_replace=function(){var e=this;return e.object.$name()},e.defn($,"$description",a.$const_to_replace)}(a,i.get("DirectObjectReference")),function(t,$super){function $(){}var a,i=$=o(t,$super,"NamedObjectReference",$),s=i.$$proto,c=i.$$scope;return s.const_name=s.object=n,s.$initialize=function(e){var t=this;return t.const_name=e},s["$defined?"]=function(){var e=this;return e.$object()["$!"]()["$!"]()},s.$const_to_replace=function(){var e=this;return e.const_name},e.defn(i,"$description",s.$const_to_replace),s.$when_loaded=a=function(){var t,$=this,o=a.$$p,i=o||n;return a.$$p=null,(t=$.$object())===n||t.$$is_boolean&&1!=t?n:(t=e.yield1(i,$.$object()),t===r?t:t)},i.$private(),s.$object=function(){var e,t=this;return(e=t.object)!==!1&&e!==n?e:t.object=c.get("Constant").$original(t.const_name).$original_value()},n&&"object"}(a,null)}(a)}(t)},Opal.modules["rspec/mocks/example_methods"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="warning";var n=e.top,r=e.nil,$=(e.breaker,e.slice),o=e.module,a=e.hash2;return e.add_stubs(["$require","$include","$declare_double","$for","$declare_verifying_double","$warn_about_expectations=","$proxy_for","$space","$stub","$hide","$new","$to_proc","$class_exec","$method_defined?","$private","$verify_doubled_constant_names?","$configuration","$!","$defined?","$raise","$name","$===","$last","$<<"]),n.$require("rspec/mocks/object_reference"),function(n){{var i=o(n,"RSpec");i.$$proto,i.$$scope}!function(n){{var i=o(n,"Mocks");i.$$proto,i.$$scope}!function(n){var i,s=o(n,"ExampleMethods"),c=(s.$$proto,s.$$scope);s.$include(c.get("RSpec").$$scope.get("Mocks").$$scope.get("ArgumentMatchers")),e.defn(s,"$double",function(e){var t,n=this;return e=$.call(arguments,0),(t=n).$declare_double.apply(t,[c.get("Mock")].concat(e))}),e.defn(s,"$instance_double",function(e,t){var n,o=this,a=r;return t=$.call(arguments,1),a=c.get("ObjectReference").$for(e),(n=o).$declare_verifying_double.apply(n,[c.get("InstanceVerifyingDouble"),a].concat(t))}),e.defn(s,"$class_double",function(e,t){var n,o=this,a=r;return t=$.call(arguments,1),a=c.get("ObjectReference").$for(e),(n=o).$declare_verifying_double.apply(n,[c.get("ClassVerifyingDouble"),a].concat(t))}),e.defn(s,"$object_double",function(e,t){var n,o=this,a=r;return t=$.call(arguments,1),a=c.get("ObjectReference").$for(e,"allow_direct_object_refs"),(n=o).$declare_verifying_double.apply(n,[c.get("ObjectVerifyingDouble"),a].concat(t))}),e.defn(s,"$allow_message_expectations_on_nil",function(){var e,t;return e=[!1],t=c.get("RSpec").$$scope.get("Mocks").$space().$proxy_for(r),t["$warn_about_expectations="].apply(t,e),e[e.length-1]}),e.defn(s,"$stub_const",function(e,t,n){return null==n&&(n=a([],{})),c.get("ConstantMutator").$stub(e,t,n)}),e.defn(s,"$hide_const",function(e){return c.get("ConstantMutator").$hide(e)}),e.defn(s,"$have_received",i=function(e){var t,n,$=i.$$p,o=$||r;return i.$$p=null,(t=(n=c.get("Matchers").$$scope.get("HaveReceived")).$new,t.$$p=o.$to_proc(),t).call(n,e)}),e.defs(s,"$included",function(e){var t,n,$,o=this;return(t=(n=e).$class_exec,t.$$p=($=function(){var e,t=$.$$s||this;return(e=t["$method_defined?"]("expect"))===r||e.$$is_boolean&&1!=e?t.$include(c.get("ExpectHost")):r},$.$$s=o,$),t).call(n)}),s.$private(),e.defn(s,"$declare_verifying_double",function(e,n,o){var a,i,s=this;return o=$.call(arguments,2),i=c.get("RSpec").$$scope.get("Mocks").$configuration()["$verify_doubled_constant_names?"](),(a=i!==!1&&i!==r?n["$defined?"]()["$!"]():i)===r||a.$$is_boolean&&1!=a||s.$raise(c.get("NameError"),t(t(""+n.$name()+" is not a defined constant. ","Perhaps you misspelt it? "),"Disable check with verify_doubled_constant_names configuration option.")),(a=s).$declare_double.apply(a,[e,n].concat(o))}),e.defn(s,"$declare_double",function(e,t){var n;return t=$.call(arguments,1),((n=c.get("Hash")["$==="](t.$last()))===r||n.$$is_boolean&&1!=n)&&t["$<<"](a([],{})),(n=e).$new.apply(n,[].concat(t))}),function(e){{var t=o(e,"ExpectHost");t.$$proto,t.$$scope}}(s)}(i)}(i)}(n)},Opal.modules["rspec/mocks/proxy"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=e.breaker,$=e.slice,o=e.module,a=e.klass,i=e.hash2;return e.add_stubs(["$new","$==","$orig_object","$object","$message","$expectation_ordering","$space","$[]=","$attr_reader","$method_double_for","$null_object?","$!","$add_default_stub","$add_expectation","$to_proc","$add_simple_expectation","$build_expectation","$any?","$expectations","$raise_expectation_on_mocked_method","$stubs","$raise_expectation_on_unstubbed_method","$each","$matches?","$invoke","$call","$matches_name_but_not_args","$raise_unexpected_message_args_error","$add_stub","$add_simple_stub","$remove_stub","$remove_single_stub","$each_value","$verify","$reset","$clear","$detect","$negative_expectation_for?","$invoked","$<<","$record_message_received","$find_matching_expectation","$find_matching_method_stub","$called_max_times?","$actual_received_count_matters?","$increase_actual_received_count!","$find_almost_matching_expectation","$expected_messages_received?","$advise","$has_negative_expectation?","$find_almost_matching_stub","$raise_missing_default_stub_error","$===","$__send__","$superclass","$raise_unexpected_message_error","$private","$[]","$to_sym","$find_best_matching_expectation_for","$find","$any_instance_class_recorder_observing_method?","$class","$build_alias_method_name","$any_instance_recorder_for","$method_handle_for","$configure_method","$already_observing?","$nil?"]),function(t){{var s=o(t,"RSpec");s.$$proto,s.$$scope}!function(t){var s=o(t,"Mocks"),c=(s.$$proto,s.$$scope);!function(t,$super){function o(){}var s,c,u,l,_,p,d,f,h,m,g=o=a(t,$super,"Proxy",o),v=g.$$proto,b=g.$$scope;return v.null_object=v.object=v.error_generator=v.expectation_ordering=v.messages_received=v.method_doubles=v.order_group=n,e.cdecl(b,"SpecificMessage",(s=(c=b.get("Struct")).$new,s.$$p=(u=function(){var t=u.$$s||this;return e.defn(t,"$==",function(e){var t,n=this;return(t=e.$orig_object()["$=="](n.$object()))?e.$message()["$=="](n.$message()):t}),n&&"=="},u.$$s=g,u),s).call(c,"object","message")),v.$initialize=function(e,t,r,$){var o,a,s,c=this;return null==r&&(r=n),null==$&&($=i([],{})),c.object=e,c.order_group=t,c.name=r,c.error_generator=b.get("ErrorGenerator").$new(e,r),c.expectation_ordering=b.get("RSpec").$$scope.get("Mocks").$space().$expectation_ordering(),c.messages_received=[],c.options=$,c.null_object=!1,c.method_doubles=(o=(a=b.get("Hash")).$new,o.$$p=(s=function(e,t){var r=s.$$s||this;return null==r.object&&(r.object=n),null==e&&(e=n),null==t&&(t=n),e["$[]="](t,b.get("MethodDouble").$new(r.object,t,r))},s.$$s=c,s),o).call(a)},g.$attr_reader("object"),v["$null_object?"]=function(){var e=this;return e.null_object},v.$as_null_object=function(){var e=this;return e.null_object=!0,e.object},v.$method_handle_for=function(){return n},v.$add_message_expectation=l=function(e,t,r){var $,o,a,s,c=this,u=l.$$p,_=u||n,p=n;return null==r&&(r=i([],{})),l.$$p=null,p=c.$method_double_for(t),o=c["$null_object?"](),($=o!==!1&&o!==n?_["$!"]():o)===n||$.$$is_boolean&&1!=$||($=(o=p).$add_default_stub,$.$$p=(a=function(){var e=a.$$s||this;return null==e.object&&(e.object=n),e.object},a.$$s=c,a),$).call(o,c.error_generator,c.expectation_ordering,e,r),($=(s=p).$add_expectation,$.$$p=_.$to_proc(),$).call(s,c.error_generator,c.expectation_ordering,e,r)},v.$add_simple_expectation=function(e,t,n){var r=this;return r.$method_double_for(e).$add_simple_expectation(e,t,r.error_generator,n)},v.$build_expectation=function(e){var t=this,r=n;return r=t.$method_double_for(e),r.$build_expectation(t.error_generator,t.expectation_ordering)},v.$replay_received_message_on=_=function(e){var t,r,$,o=this,a=_.$$p,i=a||n,s=n,c=n;return _.$$p=null,s=e.$message(),c=o.$method_double_for(s),(t=c.$expectations()["$any?"]())===n||t.$$is_boolean&&1!=t||o.error_generator.$raise_expectation_on_mocked_method(s),((t=(r=o["$null_object?"]())!==!1&&r!==n?r:c.$stubs()["$any?"]())===n||t.$$is_boolean&&1!=t)&&o.error_generator.$raise_expectation_on_unstubbed_method(s),(t=(r=o.messages_received).$each,t.$$p=($=function(t,r,o){{var a,s;$.$$s||this}return null==t&&(t=n),null==r&&(r=n),null==o&&(o=n),(a=(s=e)["$matches?"].apply(s,[t].concat(r)))===n||a.$$is_boolean&&1!=a?n:(e.$invoke(n),i!==!1&&i!==n?(a=i).$call.apply(a,[].concat(r)):n)},$.$$s=o,$),t).call(r)},v.$check_for_unexpected_arguments=function(e){var t,r,$,o=this;return(t=(r=o.messages_received).$each,t.$$p=($=function(t,r,o){var a,i,s=$.$$s||this;return null==t&&(t=n),null==r&&(r=n),null==o&&(o=n),(a=(i=e).$matches_name_but_not_args.apply(i,[t].concat(r)))===n||a.$$is_boolean&&1!=a?n:(a=s).$raise_unexpected_message_args_error.apply(a,[e].concat(r))},$.$$s=o,$),t).call(r)},v.$add_stub=p=function(e,t,r){var $,o,a=this,s=p.$$p,c=s||n;return null==r&&(r=i([],{})),p.$$p=null,($=(o=a.$method_double_for(t)).$add_stub,$.$$p=c.$to_proc(),$).call(o,a.error_generator,a.expectation_ordering,e,r)},v.$add_simple_stub=function(e,t){var n=this;return n.$method_double_for(e).$add_simple_stub(e,t)},v.$remove_stub=function(e){var t=this;return t.$method_double_for(e).$remove_stub()},v.$remove_single_stub=function(e,t){var n=this;return n.$method_double_for(e).$remove_single_stub(t)},v.$verify=function(){var e,t,r,$=this;try{return(e=(t=$.method_doubles).$each_value,e.$$p=(r=function(e){r.$$s||this;return null==e&&(e=n),e.$verify()},r.$$s=$,r),e).call(t)}finally{$.$reset()}},v.$reset=function(){var e,t,r,$=this;return(e=(t=$.method_doubles).$each_value,e.$$p=(r=function(e){r.$$s||this;return null==e&&(e=n),e.$reset()},r.$$s=$,r),e).call(t),$.messages_received.$clear()},v["$received_message?"]=d=function(e,t){var r,o,a,i=this,s=d.$$p,c=s||n;return t=$.call(arguments,1),d.$$p=null,(r=(o=i.messages_received)["$any?"],r.$$p=(a=function(r){a.$$s||this;return null==r&&(r=n),r["$=="]([e,t,c])},a.$$s=i,a),r).call(o)},v["$has_negative_expectation?"]=function(e){var t,r,$,o=this;return(t=(r=o.$method_double_for(e).$expectations()).$detect,t.$$p=($=function(t){$.$$s||this;return null==t&&(t=n),t["$negative_expectation_for?"](e)},$.$$s=o,$),t).call(r)},v.$record_message_received=f=function(e,t){var r=this,o=f.$$p,a=o||n;return t=$.call(arguments,1),f.$$p=null,r.order_group.$invoked(b.get("SpecificMessage").$new(r.$object(),e)),r.messages_received["$<<"]([e,t,a])},v.$message_received=h=function(e,t){var r,o,a,i,s,c,u,l,_,p,d,f,m,g,v,y,x=this,w=h.$$p,k=w||n,E=n,S=n;return t=$.call(arguments,1),h.$$p=null,(r=(o=x).$record_message_received,r.$$p=k.$to_proc(),r).apply(o,[e].concat(t)),E=(r=x).$find_matching_expectation.apply(r,[e].concat(t)),S=(a=x).$find_matching_method_stub.apply(a,[e].concat(t)),c=(u=S!==!1&&S!==n)?E:u,(i=(s=c!==!1&&c!==n?E["$called_max_times?"]():c)!==!1&&s!==n?s:(c=S!==!1&&S!==n)?E["$!"]():c)===n||i.$$is_boolean&&1!=i?E!==!1&&E!==n?(c=(l=E).$invoke,c.$$p=k.$to_proc(),c).apply(l,[S].concat(t)):(c=E=(_=x).$find_almost_matching_expectation.apply(_,[e].concat(t)))===n||c.$$is_boolean&&1!=c?(d=S=(f=x).$find_almost_matching_stub.apply(f,[e].concat(t)))===n||d.$$is_boolean&&1!=d?(g=b.get("Class")["$==="](x.object))===n||g.$$is_boolean&&1!=g?(g=(y=x.object).$__send__,g.$$p=k.$to_proc(),g).apply(y,["method_missing",e].concat(t)):(g=(v=x.object.$superclass()).$__send__,g.$$p=k.$to_proc(),g).apply(v,[e].concat(t)):((d=S).$advise.apply(d,[].concat(t)),(m=x).$raise_missing_default_stub_error.apply(m,[S].concat(t))):(((c=E["$expected_messages_received?"]())===n||c.$$is_boolean&&1!=c)&&((c=x["$null_object?"]())===n||c.$$is_boolean&&1!=c||(c=E).$advise.apply(c,[].concat(t))),(p=(d=x["$has_negative_expectation?"](e))!==!1&&d!==n?d:x["$null_object?"]())===n||p.$$is_boolean&&1!=p?(p=x).$raise_unexpected_message_args_error.apply(p,[E].concat(t)):n):((i=(s=E!==!1&&E!==n)?E["$actual_received_count_matters?"]():s)===n||i.$$is_boolean&&1!=i||E["$increase_actual_received_count!"](),(i=E=(s=x).$find_almost_matching_expectation.apply(s,[e].concat(t)))===n||i.$$is_boolean&&1!=i||((i=E["$expected_messages_received?"]())===n||i.$$is_boolean&&1!=i)&&(i=E).$advise.apply(i,[].concat(t)),(c=(u=S).$invoke,c.$$p=k.$to_proc(),c).apply(u,[n].concat(t)))},v.$raise_unexpected_message_error=function(e,t){var n,r=this;return t=$.call(arguments,1),(n=r.error_generator).$raise_unexpected_message_error.apply(n,[e].concat(t))},v.$raise_unexpected_message_args_error=function(e,t){var n,r=this;return t=$.call(arguments,1),(n=r.error_generator).$raise_unexpected_message_args_error.apply(n,[e].concat(t))},v.$raise_missing_default_stub_error=function(e,t){var n,r=this;return t=$.call(arguments,1),(n=r.error_generator).$raise_missing_default_stub_error.apply(n,[e].concat(t))},g.$private(),v.$method_double_for=function(e){var t=this;return t.method_doubles["$[]"](e.$to_sym())},v.$find_matching_expectation=function(e,t){var r,o,a,i=this;return t=$.call(arguments,1),(r=(o=i).$find_best_matching_expectation_for,r.$$p=(a=function(r){{var $;a.$$s||this}return null==r&&(r=n),($=r)["$matches?"].apply($,[e].concat(t))},a.$$s=i,a),r).call(o,e)},v.$find_almost_matching_expectation=function(e,t){var r,o,a,i=this;return t=$.call(arguments,1),(r=(o=i).$find_best_matching_expectation_for,r.$$p=(a=function(r){{var $;a.$$s||this}return null==r&&(r=n),($=r).$matches_name_but_not_args.apply($,[e].concat(t))},a.$$s=i,a),r).call(o,e)},v.$find_best_matching_expectation_for=m=function(t){try{var $,o,a,i=this,s=m.$$p,c=s||n,u=n;return m.$$p=null,u=n,($=(o=i.$method_double_for(t).$expectations()).$each,$.$$p=(a=function(t){{var $,o;a.$$s||this}return null==t&&(t=n),($=(o=e.yield1(c,t))===r?r.$v:o)===n||$.$$is_boolean&&1!=$?n:((($=t["$called_max_times?"]())===n||$.$$is_boolean&&1!=$)&&e.ret(t),($=u)!==!1&&$!==n?$:u=t)},a.$$s=i,a),$).call(o),u}catch(l){if(l===e.returner)return l.$v;throw l}},v.$find_matching_method_stub=function(e,t){var r,o,a,i=this;return t=$.call(arguments,1),(r=(o=i.$method_double_for(e).$stubs()).$find,r.$$p=(a=function(r){{var $;a.$$s||this}return null==r&&(r=n),($=r)["$matches?"].apply($,[e].concat(t))},a.$$s=i,a),r).call(o)},v.$find_almost_matching_stub=function(e,t){var r,o,a,i=this;return t=$.call(arguments,1),(r=(o=i.$method_double_for(e).$stubs()).$find,r.$$p=(a=function(r){{var $;a.$$s||this}return null==r&&(r=n),($=r).$matches_name_but_not_args.apply($,[e].concat(t))},a.$$s=i,a),r).call(o)},n&&"find_almost_matching_stub"}(s,null),function(t,$super){function r(){}var o,i,s=r=a(t,$super,"PartialMockProxy",r),c=s.$$proto,u=s.$$scope;return c.object=n,c.$method_handle_for=function(t){var r,$=this;try{return(r=$["$any_instance_class_recorder_observing_method?"]($.object.$class(),t))===n||r.$$is_boolean&&1!=r||(t=e.get("RSpec").$$scope.get("Mocks").$any_instance_recorder_for($.object.$class()).$build_alias_method_name(t)),e.get("RSpec").$$scope.get("Mocks").$method_handle_for($.object,t)}catch(o){if(e.rescue(o,[u.get("NameError")]))return n;throw o}},c.$add_simple_expectation=o=function(t){var n=$.call(arguments,0),r=this,a=o.$$p;return o.$$p=null,r.$method_double_for(t).$configure_method(),e.find_super_dispatcher(r,"add_simple_expectation",o,a).apply(r,n)},c.$add_simple_stub=i=function(t){var n=$.call(arguments,0),r=this,o=i.$$p;return i.$$p=null,r.$method_double_for(t).$configure_method(),e.find_super_dispatcher(r,"add_simple_stub",i,o).apply(r,n)},s.$private(),c["$any_instance_class_recorder_observing_method?"]=function(t,r){var $,o=this,a=n;return($=e.get("RSpec").$$scope.get("Mocks").$any_instance_recorder_for(t)["$already_observing?"](r))===n||$.$$is_boolean&&1!=$?(a=t.$superclass(),($=a["$nil?"]())===n||$.$$is_boolean&&1!=$?o["$any_instance_class_recorder_observing_method?"](a,r):!1):!0},n&&"any_instance_class_recorder_observing_method?"}(s,c.get("Proxy"))}(s)}(t)},Opal.modules["rspec/mocks/proxy_for_nil"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass,a=e.hash2;return e.add_stubs(["$attr_accessor","$warn_about_expectations?","$warn","$private","$first_non_rspec_line"]),function(t){{var i=$(t,"RSpec");i.$$proto,i.$$scope}!function(t){var i=$(t,"Mocks"),s=(i.$$proto,i.$$scope);!function(t,$super){function $(){}var i,s,c,u,l=$=o(t,$super,"ProxyForNil",$),_=l.$$proto,p=l.$$scope;return _.$initialize=i=function(t){{var r=this;
i.$$p}return i.$$p=null,r.warn_about_expectations=!0,e.find_super_dispatcher(r,"initialize",i,null).apply(r,[n,t])},l.$attr_accessor("warn_about_expectations"),e.defn(l,"$warn_about_expectations?",_.$warn_about_expectations),_.$add_message_expectation=s=function(t,$,o){var i,c=r.call(arguments,0),u=this,l=s.$$p;return null==o&&(o=a([],{})),s.$$p=null,(i=u["$warn_about_expectations?"]())===n||i.$$is_boolean&&1!=i||u.$warn($),e.find_super_dispatcher(u,"add_message_expectation",s,l).apply(u,c)},_.$add_negative_message_expectation=c=function(t,$){var o,a=r.call(arguments,0),i=this,s=c.$$p;return c.$$p=null,(o=i["$warn_about_expectations?"]())===n||o.$$is_boolean&&1!=o||i.$warn($),e.find_super_dispatcher(i,"add_negative_message_expectation",c,s).apply(i,a)},_.$add_stub=u=function(t,$,o){var i,s=r.call(arguments,0),c=this,l=u.$$p;return null==o&&(o=a([],{})),u.$$p=null,(i=c["$warn_about_expectations?"]())===n||i.$$is_boolean&&1!=i||c.$warn($),e.find_super_dispatcher(c,"add_stub",u,l).apply(c,s)},l.$private(),_.$warn=function(e){var t=n;return t=p.get("CallerFilter").$first_non_rspec_line(),p.get("Kernel").$warn("An expectation of :"+e+" was set on nil. Called from "+t+". Use allow_message_expectations_on_nil to disable warnings.")},n&&"warn"}(i,s.get("Proxy"))}(i)}(t)},Opal.modules["rspec/mocks/test_double"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.hash2;return e.add_stubs(["$extend","$send","$__initialize_as_test_double","$as_null_object","$__mock_proxy","$null_object?","$==","$class","$sprintf","$object_id","$inspect","$gsub","$alias_method","$new","$private","$===","$empty?","$assign_stubs","$record_message_received","$to_proc","$include?","$raise","$raise_unexpected_message_error","$each_pair","$add_simple_stub","$proxy_for"]),function(t){{var a=$(t,"RSpec");a.$$proto,a.$$scope}!function(t){{var a=$(t,"Mocks");a.$$proto,a.$$scope}!function(t){var a,i,s=$(t,"TestDouble"),c=(s.$$proto,s.$$scope);e.defs(s,"$extend_onto",function(e,t,r){var $=this;return null==t&&(t=n),null==r&&(r=o([],{})),e.$extend($),e.$send("__initialize_as_test_double",t,r)}),e.defn(s,"$initialize",function(e,t){var r=this;return null==e&&(e=n),null==t&&(t=o([],{})),r.$__initialize_as_test_double(e,t)}),e.defn(s,"$as_null_object",function(){var e=this;return e.$__mock_proxy().$as_null_object()}),e.defn(s,"$null_object?",function(){var e=this;return e.$__mock_proxy()["$null_object?"]()}),e.defn(s,"$==",function(e){var t=this;return e["$=="](t.$__mock_proxy())}),e.defn(s,"$inspect",function(){var e=this;return null==e.name&&(e.name=n),"#<"+e.$class()+":"+e.$sprintf("0x%x",e.$object_id())+" @name="+e.name.$inspect()+">"}),e.defn(s,"$to_s",function(){var e=this;return e.$inspect().$gsub("<","[").$gsub(">","]")}),s.$alias_method("to_str","to_s"),e.defn(s,"$respond_to?",a=function(t,$){var o,i=r.call(arguments,0),s=this,c=a.$$p;return null==$&&($=!1),a.$$p=null,(o=s.$__mock_proxy()["$null_object?"]())===n||o.$$is_boolean&&1!=o?e.find_super_dispatcher(s,"respond_to?",a,c).apply(s,i):!0}),e.defn(s,"$__build_mock_proxy",function(e){var t=this;return null==t.name&&(t.name=n),c.get("Proxy").$new(t,e,t.name)}),s.$private(),e.defn(s,"$__initialize_as_test_double",function(e,t){var r,$,a=this;return null==e&&(e=n),null==t&&(t=o([],{})),$=c.get("Hash")["$==="](e),(r=$!==!1&&$!==n?t["$empty?"]():$)===n||r.$$is_boolean&&1!=r?a.name=e:(t=e,a.name=n),a.$assign_stubs(t)}),e.defn(s,"$method_missing",i=function(t,$){var o,a,s=r.call(arguments,0),u=this,l=i.$$p,_=l||n,p=n;if($=r.call(arguments,1),i.$$p=null,(o=u.$__mock_proxy()["$null_object?"]())!==n&&(!o.$$is_boolean||1==o)){if(p=t,"to_int"["$==="](p))return 0;if("to_a"["$==="](p)||"to_ary"["$==="](p))return n}(o=(a=u.$__mock_proxy()).$record_message_received,o.$$p=_.$to_proc(),o).apply(a,[t].concat($));try{return(o=u.$__mock_proxy()["$null_object?"]())===n||o.$$is_boolean&&1!=o?e.find_super_dispatcher(u,"method_missing",i,l).apply(u,s):u}catch(d){if(e.rescue(d,[c.get("NameError")]))return(o=["to_a","to_ary"]["$include?"](t))===n||o.$$is_boolean&&1!=o||u.$raise(c.get("NoMethodError")),(o=u.$__mock_proxy()).$raise_unexpected_message_error.apply(o,[t].concat($));throw d}}),e.defn(s,"$assign_stubs",function(e){var t,r,$,o=this;return(t=(r=e).$each_pair,t.$$p=($=function(e,t){var r=$.$$s||this;return null==e&&(e=n),null==t&&(t=n),r.$__mock_proxy().$add_simple_stub(e,t)},$.$$s=o,$),t).call(r)}),e.defn(s,"$__mock_proxy",function(){var t=this;return e.get("RSpec").$$scope.get("Mocks").$proxy_for(t)})}(a)}(a)}(t)},Opal.modules["rspec/mocks/mock"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=(e.nil,e.breaker,e.slice,e.module),r=e.klass;return e.add_stubs(["$include"]),function(e){{var t=n(e,"RSpec");t.$$proto,t.$$scope}!function(e){{var t=n(e,"Mocks");t.$$proto,t.$$scope}!function(e,$super){function t(){}var n=t=r(e,$super,"Mock",t),$=(n.$$proto,n.$$scope);return n.$include($.get("TestDouble"))}(t,null)}(t)}(t)},Opal.modules["rspec/mocks/argument_list_matcher"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass;return e.add_stubs(["$require","$attr_reader","$empty?","$first","$===","$collect","$matcher_for","$match_any_args?","$block_passes?","$matchers_match?","$private","$is_matcher?","$new","$respond_to?","$any?","$call","$=="]),t.$require("rspec/mocks/argument_matchers"),function(t){{var a=$(t,"RSpec");a.$$proto,a.$$scope}!function(t){{var a=$(t,"Mocks");a.$$proto,a.$$scope}!function(t,$super){function $(){}var a,i=$=o(t,$super,"ArgumentListMatcher",$),s=i.$$proto,c=i.$$scope;return s.block=s.matchers=s.match_any_args=n,i.$attr_reader("expected_args"),s.$initialize=a=function(e){var t,$,o,i=this,s=a.$$p,u=s||n,l=n;return e=r.call(arguments,0),a.$$p=null,i.expected_args=e,i.block=function(){return(t=e["$empty?"]())===n||t.$$is_boolean&&1!=t?n:u}(),i.match_any_args=!1,i.matchers=n,function(){return l=e.$first(),c.get("ArgumentMatchers").$$scope.get("AnyArgsMatcher")["$==="](l)?i.match_any_args=!0:i.matchers=c.get("ArgumentMatchers").$$scope.get("NoArgsMatcher")["$==="](l)?[]:(t=($=e).$collect,t.$$p=(o=function(e){var t=o.$$s||this;return null==e&&(e=n),t.$matcher_for(e)},o.$$s=i,o),t).call($)}()},s["$args_match?"]=function(e){var t,$,o,a=this;return e=r.call(arguments,0),(t=($=a["$match_any_args?"]())!==!1&&$!==n?$:(o=a)["$block_passes?"].apply(o,[].concat(e)))!==!1&&t!==n?t:($=a)["$matchers_match?"].apply($,[].concat(e))},i.$private(),s.$matcher_for=function(e){var t,r=this;return(t=r["$is_matcher?"](e))===n||t.$$is_boolean&&1!=t?(t=c.get("Regexp")["$==="](e))===n||t.$$is_boolean&&1!=t?c.get("ArgumentMatchers").$$scope.get("EqualityProxy").$new(e):c.get("ArgumentMatchers").$$scope.get("RegexpMatcher").$new(e):c.get("ArgumentMatchers").$$scope.get("MatcherMatcher").$new(e)},s["$is_matcher?"]=function(e){var t,r,$,o,a=this;return(t=e["$respond_to?"]("i_respond_to_everything_so_im_not_really_a_matcher"))===n||t.$$is_boolean&&1!=t?(t=(r=($=["failure_message_for_should","failure_message"])["$any?"],r.$$p=(o=function(t){o.$$s||this;return null==t&&(t=n),e["$respond_to?"](t)},o.$$s=a,o),r).call($),t!==!1&&t!==n?e["$respond_to?"]("matches?"):t):!1},s["$block_passes?"]=function(e){var t,$=this;return e=r.call(arguments,0),(t=$.block)===n||t.$$is_boolean&&1!=t?n:(t=$.block).$call.apply(t,[].concat(e))},s["$matchers_match?"]=function(e){var t=this;return e=r.call(arguments,0),t.matchers["$=="](e)},s["$match_any_args?"]=function(){var e=this;return e.match_any_args},e.cdecl(c,"MATCH_ALL",i.$new(c.get("ArgumentMatchers").$$scope.get("AnyArgsMatcher").$new()))}(a,null)}(a)}(t)},Opal.modules["rspec/mocks/message_expectation"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e>=t:e["$>="](t)}function $(e,t){return"number"==typeof e&&"number"==typeof t?t>=e:e["$<="](t)}e.dynamic_require_severity="warning";var o=e.top,a=e.nil,i=e.breaker,s=e.slice,c=e.module,u=e.klass,l=e.hash2;return e.add_stubs(["$==","$line","$raise_expectation_error","$attr_accessor","$attr_reader","$attr_writer","$protected","$opts=","$object","$method_name","$register","$new","$inner_implementation_action=","$expected_args","$negative?","$raise","$ignoring_args?","$max","$size","$terminal_implementation_action=","$===","$raise_only_valid_on_a_partial_mock","$inner_action","$implementation","$warning","$original_method","$respond_to?","$exception","$throw","$<<","$initial_implementation_action=","$args_match?","$yield_receiver_to_implementation_block?","$unshift","$orig_object","$expectation_count_type","$handle_order_constraint","$present?","$call","$to_proc","$invoke","$!","$expected_messages_received?","$failed_fast?","$generate_error","$matches_exact_count?","$matches_at_least_count?","$matches_at_most_count?","$verify_invocation_order","$similar_messages","$empty?","$raise_similar_message_args_error","$describe_expectation","$raise_out_of_order_error","$set_expected_received_count","$raise_double_negation_error","$private","$initial_action=","$inner_action=","$terminal_action=","$nil?","$raise_missing_block_error","$each","$arity","$length","$raise_wrong_arity_error","$instance_exec","$shift","$first","$last","$map","$actions","$any?","$compact","$initial_action","$terminal_action","$cannot_modify_further_error","$insert","$backtrace"]),function(o){{var _=c(o,"RSpec");_.$$proto,_.$$scope}!function(o){{var _=c(o,"Mocks");_.$$proto,_.$$scope}!function(e,$super){function t(){}var n=t=u(e,$super,"SimpleMessageExpectation",t),r=n.$$proto,$=n.$$scope;return r.response=r.message=r.backtrace_line=a,r.$initialize=function(e,t,n,r){var $,o=this;return null==r&&(r=a),$=[e,t,n,r],o.message=$[0],o.response=$[1],o.error_generator=$[2],o.backtrace_line=$[3],o.received=!1},r.$invoke=function(e){var t=this;return e=s.call(arguments,0),t.received=!0,t.response},r["$matches?"]=function(e,t){var n=this;return t=s.call(arguments,1),n.message["$=="](e)},r["$called_max_times?"]=function(){return!1},r.$verify_messages_received=function(){var e,t,n,r=this;return(e=(t=$.get("InsertOntoBacktrace")).$line,e.$$p=(n=function(){var e,t=n.$$s||this;return null==t.received&&(t.received=a),null==t.error_generator&&(t.error_generator=a),null==t.message&&(t.message=a),(e=t.received)===a||e.$$is_boolean&&1!=e?t.error_generator.$raise_expectation_error(t.message,1,$.get("ArgumentListMatcher").$$scope.get("MATCH_ALL"),0,a):a},n.$$s=r,n),e).call(t,r.backtrace_line)},a&&"verify_messages_received"}(_,null),function(o,$super){function c(){}var _,p,d,f,h,m,g,v,b,y,x,w,k=c=u(o,$super,"MessageExpectation",c),E=k.$$proto,S=k.$$scope;return E.error_generator=E.method_double=E.order_group=E.argument_list_matcher=E.expected_received_count=E.at_least=E.yield_receiver_to_implementation_block=E.args_to_yield=E.eval_context=E.message=E.exactly=E.at_most=E.actual_received_count=E.expected_from=E.ordered=E.similar_messages=E.failed_fast=a,k.$attr_accessor("error_generator","implementation"),k.$attr_reader("message"),k.$attr_reader("orig_object"),k.$attr_writer("expected_received_count","expected_from","argument_list_matcher"),k.$protected("expected_received_count=","expected_from=","error_generator","error_generator=","implementation="),E.$initialize=_=function(e,t,n,r,$,o){var i,s,c=this,u=_.$$p,p=u||a;return null==$&&($=1),null==o&&(o=l([],{})),_.$$p=null,c.error_generator=e,i=[o],s=c.error_generator,s["$opts="].apply(s,i),i[i.length-1],c.expected_from=n,c.method_double=r,c.orig_object=c.method_double.$object(),c.message=c.method_double.$method_name(),c.actual_received_count=0,c.expected_received_count=$,c.argument_list_matcher=S.get("ArgumentListMatcher").$$scope.get("MATCH_ALL"),c.order_group=t,c.order_group.$register(c),c.ordered=!1,c.at_least=c.at_most=c.exactly=a,c.args_to_yield=[],c.failed_fast=a,c.eval_context=a,c.yield_receiver_to_implementation_block=!1,c.implementation=S.get("Implementation").$new(),i=[p],s=c,s["$inner_implementation_action="].apply(s,i),i[i.length-1]},E.$expected_args=function(){var e=this;return e.argument_list_matcher.$expected_args()},E.$and_return=p=function(e){var t,n,r,$=this,o=p.$$p,i=o||a;return e=s.call(arguments,0),p.$$p=null,(t=$["$negative?"]())===a||t.$$is_boolean&&1!=t?(((t=(n=$["$ignoring_args?"]())!==!1&&n!==a?n:(r=$.expected_received_count["$=="](0))?$.at_least:r)===a||t.$$is_boolean&&1!=t)&&($.expected_received_count=[$.expected_received_count,e.$size()].$max()),i!==!1&&i!==a?(t=[i],n=$,n["$inner_implementation_action="].apply(n,t),t[t.length-1]):(t=[S.get("AndReturnImplementation").$new(e)],n=$,n["$terminal_implementation_action="].apply(n,t),t[t.length-1]),a):$.$raise("`and_return` is not supported with negative message expectations")},E.$and_yield_receiver_to_implementation=function(){var e=this;return e.yield_receiver_to_implementation_block=!0,e},E["$yield_receiver_to_implementation_block?"]=function(){var e=this;return e.yield_receiver_to_implementation_block},E.$and_call_original=function(){var e,t=this;return(e=S.get("RSpec").$$scope.get("Mocks").$$scope.get("TestDouble")["$==="](t.method_double.$object()))===a||e.$$is_boolean&&1!=e?((e=t.$implementation().$inner_action())===a||e.$$is_boolean&&1!=e||S.get("RSpec").$warning("You're overriding a previous implementation for this stub"),t.implementation=S.get("AndCallOriginalImplementation").$new(t.method_double.$original_method()),t.yield_receiver_to_implementation_block=!1):t.error_generator.$raise_only_valid_on_a_partial_mock("and_call_original")},E.$and_raise=function(e,t){var n,r,$,o,i,s=this;return null==e&&(e=S.get("RuntimeError")),null==t&&(t=a),(n=e["$respond_to?"]("exception"))===a||n.$$is_boolean&&1!=n||(e=function(){return t!==!1&&t!==a?e.$exception(t):e.$exception()}()),n=[($=(o=S.get("Proc")).$new,$.$$p=(i=function(){var t=i.$$s||this;return t.$raise(e)},i.$$s=s,i),$).call(o)],r=s,r["$terminal_implementation_action="].apply(r,n),n[n.length-1],a},E.$and_throw=function(e){var t,n,r,$,o,i=this;return e=s.call(arguments,0),t=[(r=($=S.get("Proc")).$new,r.$$p=(o=function(){var t,n=o.$$s||this;return(t=n).$throw.apply(t,[].concat(e))},o.$$s=i,o),r).call($)],n=i,n["$terminal_implementation_action="].apply(n,t),t[t.length-1],a},E.$and_yield=d=function(t){var n,r,$=this,o=d.$$p,c=o||a;return t=s.call(arguments,0),d.$$p=null,c!==!1&&c!==a&&e.yield1(c,$.eval_context=S.get("Object").$new())===i?i.$v:($.args_to_yield["$<<"](t),n=[S.get("AndYieldImplementation").$new($.args_to_yield,$.eval_context,$.error_generator)],r=$,r["$initial_implementation_action="].apply(r,n),n[n.length-1],$)},E["$matches?"]=function(e,t){var n,r,$=this;return t=s.call(arguments,1),(n=$.message["$=="](e))?(r=$.argument_list_matcher)["$args_match?"].apply(r,[].concat(t)):n},E.$invoke=f=function(e,n){var r,$,o,i,c=this,u=f.$$p,l=u||a;n=s.call(arguments,1),f.$$p=null,(r=c["$yield_receiver_to_implementation_block?"]())===a||r.$$is_boolean&&1!=r||n.$unshift(c.$orig_object()),(r=($=c["$negative?"]())!==!1&&$!==a?$:(o=(i=c.exactly)!==!1&&i!==a?i:c.at_most,o!==!1&&o!==a?c.actual_received_count["$=="](c.expected_received_count):o))===a||r.$$is_boolean&&1!=r||(c.actual_received_count=t(c.actual_received_count,1),c.failed_fast=!0,(r=c.error_generator).$raise_expectation_error.apply(r,[c.message,c.expected_received_count,c.argument_list_matcher,c.actual_received_count,c.$expectation_count_type()].concat(n))),c.order_group.$handle_order_constraint(c);try{return($=c.$implementation()["$present?"]())===a||$.$$is_boolean&&1!=$?e!==!1&&e!==a?($=(i=e).$invoke,$.$$p=l.$to_proc(),$).apply(i,[a].concat(n)):a:($=(o=c.$implementation()).$call,$.$$p=l.$to_proc(),$).apply(o,[].concat(n))}finally{c.actual_received_count=t(c.actual_received_count,1)}},E["$negative?"]=function(){var e,t=this;return(e=t.expected_received_count["$=="](0))?t.at_least["$!"]():e},E["$called_max_times?"]=function(){var e,t,$,o=this;return $=o.expected_received_count["$=="]("any")["$!"](),t=$!==!1&&$!==a?o.at_least["$!"]():$,e=t!==!1&&t!==a?n(o.expected_received_count,0):t,e!==!1&&e!==a?r(o.actual_received_count,o.expected_received_count):e},E.$matches_name_but_not_args=function(e,t){var n,r,$=this;return t=s.call(arguments,1),(n=$.message["$=="](e))?(r=$.argument_list_matcher)["$args_match?"].apply(r,[].concat(t))["$!"]():n},E.$verify_messages_received=function(){var e,t,n,r=this;return(e=(t=S.get("InsertOntoBacktrace")).$line,e.$$p=(n=function(){var e,t,r=n.$$s||this;return(e=(t=r["$expected_messages_received?"]())!==!1&&t!==a?t:r["$failed_fast?"]())===a||e.$$is_boolean&&1!=e?r.$generate_error():a},n.$$s=r,n),e).call(t,r.expected_from)},E["$expected_messages_received?"]=function(){var e,t,n,r=this;return(e=(t=(n=r["$ignoring_args?"]())!==!1&&n!==a?n:r["$matches_exact_count?"]())!==!1&&t!==a?t:r["$matches_at_least_count?"]())!==!1&&e!==a?e:r["$matches_at_most_count?"]()},E["$ensure_expected_ordering_received!"]=function(){var e,t=this;return(e=t.ordered)===a||e.$$is_boolean&&1!=e||t.order_group.$verify_invocation_order(t),!0},E["$ignoring_args?"]=function(){var e=this;return e.expected_received_count["$=="]("any")},E["$matches_at_least_count?"]=function(){var e,t=this;return e=t.at_least,e!==!1&&e!==a?r(t.actual_received_count,t.expected_received_count):e},E["$matches_at_most_count?"]=function(){var e,t=this;return e=t.at_most,e!==!1&&e!==a?$(t.actual_received_count,t.expected_received_count):e},E["$matches_exact_count?"]=function(){var e=this;return e.expected_received_count["$=="](e.actual_received_count)},E.$similar_messages=function(){var e,t=this;return(e=t.similar_messages)!==!1&&e!==a?e:t.similar_messages=[]},E.$advise=function(e){var t=this;return e=s.call(arguments,0),t.$similar_messages()["$<<"](e)},E.$generate_error=function(){var e,t,n=this;return(e=n.$similar_messages()["$empty?"]())===a||e.$$is_boolean&&1!=e?(t=n.error_generator).$raise_similar_message_args_error.apply(t,[n].concat(n.similar_messages)):(e=n.error_generator).$raise_expectation_error.apply(e,[n.message,n.expected_received_count,n.argument_list_matcher,n.actual_received_count,n.$expectation_count_type()].concat(n.$expected_args()))},E.$expectation_count_type=function(){var e,t=this;return(e=t.at_least)===a||e.$$is_boolean&&1!=e?(e=t.at_most)===a||e.$$is_boolean&&1!=e?a:"at_most":"at_least"},E.$description=function(){var e,t=this;return(e=t.error_generator).$describe_expectation.apply(e,[t.message,t.expected_received_count,t.actual_received_count].concat(t.$expected_args()))},E.$raise_out_of_order_error=function(){var e=this;return e.error_generator.$raise_out_of_order_error(e.message)},E.$with=h=function(e){var t,n,r=this,$=h.$$p,o=$||a;return e=s.call(arguments,0),h.$$p=null,(t=e["$empty?"]())===a||t.$$is_boolean&&1!=t||r.$raise(S.get("ArgumentError"),"`with` must have at least one argument. Use `no_args` matcher to set the expectation of receiving no arguments."),t=[o],n=r,n["$inner_implementation_action="].apply(n,t),t[t.length-1],r.argument_list_matcher=(t=S.get("ArgumentListMatcher")).$new.apply(t,[].concat(e)),r},E.$exactly=m=function(e){var t,n,r=this,$=m.$$p,o=$||a;return m.$$p=null,t=[o],n=r,n["$inner_implementation_action="].apply(n,t),t[t.length-1],r.$set_expected_received_count("exactly",e),r},E.$at_least=g=function(e){var t,n,r=this,$=g.$$p,o=$||a;return g.$$p=null,r.$set_expected_received_count("at_least",e),e["$=="](0)&&r.$raise("at_least(0) has been removed, use allow(...).to receive(:message) instead"),t=[o],n=r,n["$inner_implementation_action="].apply(n,t),t[t.length-1],r},E.$at_most=v=function(e){var t,n,r=this,$=v.$$p,o=$||a;return v.$$p=null,t=[o],n=r,n["$inner_implementation_action="].apply(n,t),t[t.length-1],r.$set_expected_received_count("at_most",e),r},E.$times=b=function(){var e,t,n=this,r=b.$$p,$=r||a;return b.$$p=null,e=[$],t=n,t["$inner_implementation_action="].apply(t,e),e[e.length-1],n},E.$never=function(){var e,t=this;return(e=t["$negative?"]())===a||e.$$is_boolean&&1!=e||S.get("ErrorGenerator").$raise_double_negation_error("expect(obj)"),t.expected_received_count=0,t},E.$once=y=function(){var e,t,n=this,r=y.$$p,$=r||a;return y.$$p=null,e=[$],t=n,t["$inner_implementation_action="].apply(t,e),e[e.length-1],n.$set_expected_received_count("exactly",1),n},E.$twice=x=function(){var e,t,n=this,r=x.$$p,$=r||a;return x.$$p=null,e=[$],t=n,t["$inner_implementation_action="].apply(t,e),e[e.length-1],n.$set_expected_received_count("exactly",2),n},E.$ordered=w=function(){var e,t,n=this,r=w.$$p,$=r||a;return w.$$p=null,e=[$],t=n,t["$inner_implementation_action="].apply(t,e),e[e.length-1],n.ordered=!0,n},E["$ordered?"]=function(){var e=this;return e.ordered},E["$negative_expectation_for?"]=function(e){var t,n=this;return(t=n.message["$=="](e))?n["$negative?"]():t},E["$actual_received_count_matters?"]=function(){var e,t,n=this;return(e=(t=n.at_least)!==!1&&t!==a?t:n.at_most)!==!1&&e!==a?e:n.exactly},E["$increase_actual_received_count!"]=function(){var e=this;return e.actual_received_count=t(e.actual_received_count,1)},k.$private(),E["$failed_fast?"]=function(){var e=this;return e.failed_fast},E.$set_expected_received_count=function(e,t){var n=this,r=a;return n.at_least=e["$=="]("at_least"),n.at_most=e["$=="]("at_most"),n.exactly=e["$=="]("exactly"),n.expected_received_count=function(){return r=t,S.get("Numeric")["$==="](r)?t:"once"["$==="](r)?1:"twice"["$==="](r)?2:a}()},E["$initial_implementation_action="]=function(e){var t,n,r=this;return t=[e],n=r.$implementation(),n["$initial_action="].apply(n,t),t[t.length-1]},E["$inner_implementation_action="]=function(e){var t,n,r=this;return(t=r.$implementation().$inner_action())===a||t.$$is_boolean&&1!=t||S.get("RSpec").$warning("You're overriding a previous implementation for this stub"),e!==!1&&e!==a?(t=[e],n=r.$implementation(),n["$inner_action="].apply(n,t),t[t.length-1]):a},E["$terminal_implementation_action="]=function(e){var t,n,r=this;return t=[e],n=r.$implementation(),n["$terminal_action="].apply(n,t),t[t.length-1]},a&&"terminal_implementation_action="}(_,null),function(e,$super){function t(){}{var r,$=t=u(e,$super,"AndYieldImplementation",t),o=$.$$proto;$.$$scope}return o.args_to_yield=o.eval_context=o.error_generator=a,o.$initialize=function(e,t,n){var r=this;return r.args_to_yield=e,r.eval_context=t,r.error_generator=n},o.$call=r=function(e){var t,$,o,i=this,c=r.$$p,u=c||a,l=a;return e=s.call(arguments,0),r.$$p=null,$=i.args_to_yield["$empty?"](),(t=$!==!1&&$!==a?i.eval_context["$nil?"]():$)===a||t.$$is_boolean&&1!=t?(u!==!1&&u!==a||i.error_generator.$raise_missing_block_error(i.args_to_yield),l=a,(t=($=i.args_to_yield).$each,t.$$p=(o=function(e){var t,r,$=o.$$s||this;return null==$.error_generator&&($.error_generator=a),null==$.eval_context&&($.eval_context=a),null==e&&(e=a),(t=(r=n(u.$arity(),-1))?e.$length()["$=="](u.$arity())["$!"]():r)===a||t.$$is_boolean&&1!=t||$.error_generator.$raise_wrong_arity_error(e,u.$arity()),l=function(){return(t=$.eval_context)===a||t.$$is_boolean&&1!=t?(t=u).$call.apply(t,[].concat(e)):(t=(r=$.eval_context).$instance_exec,t.$$p=u.$to_proc(),t).apply(r,[].concat(e))}()},o.$$s=i,o),t).call($),l):a},a&&"call"}(_,null),function(e,$super){function t(){}{var r,$=t=u(e,$super,"AndReturnImplementation",t),o=$.$$proto;$.$$scope}return o.values_to_return=a,o.$initialize=function(e){var t=this;return t.values_to_return=e},o.$call=r=function(e){{var t=this;r.$$p}return e=s.call(arguments,0),r.$$p=null,n(t.values_to_return.$size(),1)?t.values_to_return.$shift():t.values_to_return.$first()},a&&"call"}(_,null),function(e,$super){function t(){}{var n,r=t=u(e,$super,"Implementation",t),$=r.$$proto;r.$$scope}return r.$attr_accessor("initial_action","inner_action","terminal_action"),$.$call=n=function(e){var t,r,$,o=this,i=n.$$p,c=i||a;return e=s.call(arguments,0),n.$$p=null,(t=(r=o.$actions()).$map,t.$$p=($=function(t){{var n,r;$.$$s||this}return null==t&&(t=a),(n=(r=t).$call,n.$$p=c.$to_proc(),n).apply(r,[].concat(e))},$.$$s=o,$),t).call(r).$last()},$["$present?"]=function(){var e=this;return e.$actions()["$any?"]()},r.$private(),$.$actions=function(){var e=this;return[e.$initial_action(),e.$inner_action(),e.$terminal_action()].$compact()},a&&"actions"}(_,null),function(n,$super){function r(){}var $,o=r=u(n,$super,"AndCallOriginalImplementation",r),i=o.$$proto,c=o.$$scope;return i.method=a,i.$initialize=function(e){var t=this;return t.method=e},e.cdecl(c,"CannotModifyFurtherError",c.get("Class").$new(c.get("StandardError"))),i["$initial_action="]=function(){var e=this;return e.$raise(e.$cannot_modify_further_error())},i["$inner_action="]=function(){var e=this;return e.$raise(e.$cannot_modify_further_error())},i["$terminal_action="]=function(){var e=this;return e.$raise(e.$cannot_modify_further_error())},i["$present?"]=function(){return!0},i.$inner_action=function(){return!0},i.$call=$=function(e){var t,n,r=this,o=$.$$p,i=o||a;return e=s.call(arguments,0),$.$$p=null,(t=(n=r.method).$call,t.$$p=i.$to_proc(),t).apply(n,[].concat(e))},o.$private(),i.$cannot_modify_further_error=function(){return c.get("CannotModifyFurtherError").$new(t("This method has already been configured ","to call the original implementation, and cannot be modified further."))},a&&"cannot_modify_further_error"}(_,null),function(t,$super){function n(){}var r,$=n=u(t,$super,"InsertOntoBacktrace",n),o=($.$$proto,$.$$scope);return e.defs($,"$line",r=function(t){var n,$=r.$$p,s=$||a,c=a;r.$$p=null;try{return n=e.yieldX(s,[]),n===i?n:n}catch(u){if(e.rescue(u,[o.get("RSpec").$$scope.get("Mocks").$$scope.get("MockExpectationError")]))return c=u,c.$backtrace().$insert(0,t),o.get("Kernel").$raise(c);throw u}}),a&&"line"}(_,null)}(_)}(o)},Opal.modules["rspec/mocks/order_group"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="warning";var n=e.top,r=e.nil,$=(e.breaker,e.slice,e.module),o=e.klass,a=e.range;return e.add_stubs(["$<<","$==","$find","$to_proc","$remaining_expectations","$each_with_index","$ordered?","$include?","$ready_for?","$consume","$raise_out_of_order_error","$expectations_invoked_in_order?","$clear","$empty?","$private","$[]","$invoked_expectations","$expected_invocations","$select","$compact","$map","$expectation_for"]),function(n){{var i=$(n,"RSpec");i.$$proto,i.$$scope}!function(n){{var i=$(n,"Mocks");i.$$proto,i.$$scope}!function(n,$super){function $(){}{var i=$=o(n,$super,"OrderGroup",$),s=i.$$proto;i.$$scope}return s.expectations=s.invocation_order=s.index=r,s.$initialize=function(){var e=this;return e.expectations=[],e.invocation_order=[],e.index=0},s.$register=function(e){var t=this;return t.expectations["$<<"](e)},s.$invoked=function(e){var t=this;return t.invocation_order["$<<"](e)},s["$ready_for?"]=function(e){var t,n,r=this;return(t=(n=r.$remaining_expectations()).$find,t.$$p="ordered?".$to_proc(),t).call(n)["$=="](e)},s.$consume=function(){try{var n,$,o,a=this;return(n=($=a.$remaining_expectations()).$each_with_index,n.$$p=(o=function(n,$){var a,i=o.$$s||this;return null==i.index&&(i.index=r),null==n&&(n=r),null==$&&($=r),(a=n["$ordered?"]())===r||a.$$is_boolean&&1!=a?r:(i.index=t(i.index,t($,1)),void e.ret(n))},o.$$s=a,o),n).call($),r}catch(i){if(i===e.returner)return i.$v;throw i}},s.$handle_order_constraint=function(e){var t,n,$=this;return n=e["$ordered?"](),(t=n!==!1&&n!==r?$.$remaining_expectations()["$include?"](e):n)===r||t.$$is_boolean&&1!=t?r:(t=$["$ready_for?"](e))===r||t.$$is_boolean&&1!=t?e.$raise_out_of_order_error():$.$consume()},s.$verify_invocation_order=function(e){var t,n=this;return((t=n["$expectations_invoked_in_order?"]())===r||t.$$is_boolean&&1!=t)&&e.$raise_out_of_order_error(),!0},s.$clear=function(){var e=this;return e.index=0,e.invocation_order.$clear(),e.expectations.$clear()},s["$empty?"]=function(){var e=this;return e.expectations["$empty?"]()},i.$private(),s.$remaining_expectations=function(){var e,t=this;return(e=t.expectations["$[]"](a(t.index,-1,!1)))!==!1&&e!==r?e:[]},s["$expectations_invoked_in_order?"]=function(){var e=this;return e.$invoked_expectations()["$=="](e.$expected_invocations())},s.$invoked_expectations=function(){var e,t,n,$=this;return(e=(t=$.expectations).$select,e.$$p=(n=function(e){var t,$=n.$$s||this;return null==$.invocation_order&&($.invocation_order=r),null==e&&(e=r),t=e["$ordered?"](),t!==!1&&t!==r?$.invocation_order["$include?"](e):t},n.$$s=$,n),e).call(t)},s.$expected_invocations=function(){var e,t,n,$=this;return(e=(t=$.invocation_order).$map,e.$$p=(n=function(e){var t=n.$$s||this;return null==e&&(e=r),t.$expectation_for(e)},n.$$s=$,n),e).call(t).$compact()},s.$expectation_for=function(e){var t,n,$,o=this;return(t=(n=o.expectations).$find,t.$$p=($=function(t){$.$$s||this;return null==t&&(t=r),e["$=="](t)},$.$$s=o,$),t).call(n)},r&&"expectation_for"}(i,null)}(i)}(n)},Opal.modules["rspec/mocks/errors"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass;return function(e){{var t=r(e,"RSpec");t.$$proto,t.$$scope}!function(e){var t=r(e,"Mocks"),o=(t.$$proto,t.$$scope);!function(e,$super){function t(){}{var r=t=$(e,$super,"MockExpectationError",t);r.$$proto,r.$$scope}return n}(t,o.get("Exception")),function(e,$super){function t(){}{var r=t=$(e,$super,"AmbiguousReturnError",t);r.$$proto,r.$$scope}return n}(t,o.get("StandardError"))}(t)}(t)},Opal.modules["rspec/mocks/error_generator"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}e.dynamic_require_severity="warning";var $=e.top,o=e.nil,a=(e.breaker,e.slice),i=e.module,s=e.klass,c=e.hash2;return e.add_stubs(["$attr_writer","$__raise","$intro","$arg_message","$format_args","$expected_args","$format_received_args","$inspect","$message","$join","$collect","$expected_part_of_expectation_error","$received_part_of_expectation_error","$%","$description","$range_description","$count_message","$method_call_args_description","$first","$===","$length","$gsub","$arg_list","$raise","$private","$nil?","$[]","$opts","$empty?","$arg_has_valid_description","$respond_to?","$!","$received_arg_list","$to_proc","$==","$pretty_print","$abs"]),function($){{var u=i($,"RSpec");u.$$proto,u.$$scope}!function($){{var u=i($,"Mocks");u.$$proto,u.$$scope}!function($,$super){function i(){}var u=i=s($,$super,"ErrorGenerator",i),l=u.$$proto,_=u.$$scope;return l.opts=l.name=l.target=o,u.$attr_writer("opts"),l.$initialize=function(e,t){var n=this;return n.target=e,n.name=t},l.$opts=function(){var e,t=this;return(e=t.opts)!==!1&&e!==o?e:t.opts=c([],{})},l.$raise_unexpected_message_error=function(e,t){var n,r=this;return t=a.call(arguments,1),r.$__raise(""+r.$intro()+" received unexpected message :"+e+(n=r).$arg_message.apply(n,[].concat(t)))},l.$raise_unexpected_message_args_error=function(e,t){var n,r,$=this,i=o,s=o;return t=a.call(arguments,1),i=(n=$).$format_args.apply(n,[].concat(e.$expected_args())),s=(r=$).$format_received_args.apply(r,[].concat(t)),$.$__raise(""+$.$intro()+" received "+e.$message().$inspect()+" with unexpected arguments\n  expected: "+i+"\n       got: "+s)},l.$raise_missing_default_stub_error=function(e,t){var n,r,$=this,i=o,s=o;return t=a.call(arguments,1),i=(n=$).$format_args.apply(n,[].concat(e.$expected_args())),s=(r=$).$format_received_args.apply(r,[].concat(t)),$.$__raise(""+$.$intro()+" received "+e.$message().$inspect()+" with unexpected arguments\n  expected: "+i+"\n       got: "+s+"\n Please stub a default value first if message might be received with other args as well. \n")},l.$raise_similar_message_args_error=function(e,t){var n,r,$,i,s=this,c=o,u=o;return t=a.call(arguments,1),c=(n=s).$format_args.apply(n,[].concat(e.$expected_args())),u=(r=($=t).$collect,r.$$p=(i=function(e){var t,n=i.$$s||this;return null==e&&(e=o),(t=n).$format_received_args.apply(t,[].concat(e))},i.$$s=s,i),r).call($).$join(", "),s.$__raise(""+s.$intro()+" received "+e.$message().$inspect()+" with unexpected arguments\n  expected: "+c+"\n       got: "+u)},l.$raise_expectation_error=function(e,t,n,r,$,i){var s,c,u=this,l=o,_=o;return i=a.call(arguments,5),l=u.$expected_part_of_expectation_error(t,$,n),_=(s=u).$received_part_of_expectation_error.apply(s,[r].concat(i)),u.$__raise("("+u.$intro()+")."+e+(c=u).$format_args.apply(c,[].concat(i))+"\n    "+l+"\n    "+_)},l.$raise_unimplemented_error=function(e,t){var n=this;return n.$__raise("%s does not implement:\n  %s"["$%"]([e.$description(),t]))},l.$raise_arity_error=function(e,t){var n=this;return n.$__raise("Wrong number of arguments. Expected %s, got %s."["$%"]([e.$range_description(),t]))},l.$received_part_of_expectation_error=function(e,n){var r=this;
return n=a.call(arguments,1),t("received: "+r.$count_message(e),r.$method_call_args_description(n))},l.$expected_part_of_expectation_error=function(e,n,r){var $=this;return t("expected: "+$.$count_message(e,n),$.$method_call_args_description(r.$expected_args()))},l.$method_call_args_description=function(e){var t=o;return t=e.$first(),_.get("ArgumentMatchers").$$scope.get("AnyArgsMatcher")["$==="](t)?" with any arguments":_.get("ArgumentMatchers").$$scope.get("NoArgsMatcher")["$==="](t)?" with no arguments":n(e.$length(),0)?" with arguments: "+e.$inspect().$gsub(/\A\[(.+)\]\z/,"(\\1)"):""},l.$describe_expectation=function(e,t,n,r){var $,o=this;return r=a.call(arguments,3),"have received "+e+($=o).$format_args.apply($,[].concat(r))+" "+o.$count_message(t)},l.$raise_out_of_order_error=function(e){var t=this;return t.$__raise(""+t.$intro()+" received :"+e+" out of order")},l.$raise_block_failed_error=function(e,t){var n=this;return n.$__raise(""+n.$intro()+" received :"+e+" but passed block failed with: "+t)},l.$raise_missing_block_error=function(e){var t,n=this;return n.$__raise(""+n.$intro()+" asked to yield |"+(t=n).$arg_list.apply(t,[].concat(e))+"| but no block was passed")},l.$raise_wrong_arity_error=function(e,t){var n,r=this;return r.$__raise(""+r.$intro()+" yielded |"+(n=r).$arg_list.apply(n,[].concat(e))+"| to block with arity of "+t)},l.$raise_only_valid_on_a_partial_mock=function(e){var n=this;return n.$__raise(t(""+n.$intro()+" is a pure mock object. `"+e+"` is only ","available on a partial mock object."))},l.$raise_expectation_on_unstubbed_method=function(e){var n=this;return n.$__raise(t(""+n.$intro()+" expected to have received "+e+", but that ","method has not been stubbed."))},l.$raise_expectation_on_mocked_method=function(e){var n=this;return n.$__raise(t(""+n.$intro()+" expected to have received "+e+", but that ","method has been mocked instead of stubbed."))},e.defs(u,"$raise_double_negation_error",function(e){var n=this;return n.$raise(t(t(t("Isn't life confusing enough? You've already set a ","negative message expectation and now you are trying to "),"negate it again with `never`. What does an expression like "),"`"+e+".not_to receive(:msg).never` even mean?"))}),u.$private(),l.$intro=function(){var e,t=this;return(e=t.name)===o||e.$$is_boolean&&1!=e?(e=_.get("TestDouble")["$==="](t.target))===o||e.$$is_boolean&&1!=e?(e=_.get("Class")["$==="](t.target))===o||e.$$is_boolean&&1!=e?(e=t.target)===o||e.$$is_boolean&&1!=e?"nil":t.target:"<"+t.target.$inspect()+" (class)>":"Double":"Double "+t.name.$inspect()},l.$__raise=function(e){var t,n=this;return((t=n.$opts()["$[]"]("message")["$nil?"]())===o||t.$$is_boolean&&1!=t)&&(e=n.$opts()["$[]"]("message")),_.get("Kernel").$raise(_.get("RSpec").$$scope.get("Mocks").$$scope.get("MockExpectationError"),e)},l.$arg_message=function(e){var n,r=this;return e=a.call(arguments,0),t(" with ",(n=r).$format_args.apply(n,[].concat(e)))},l.$format_args=function(e){var n,r=this;return e=a.call(arguments,0),(n=e["$empty?"]())===o||n.$$is_boolean&&1!=n?t(t("(",(n=r).$arg_list.apply(n,[].concat(e))),")"):"(no args)"},l.$arg_list=function(e){var t,n,r,$=this;return e=a.call(arguments,0),(t=(n=e).$collect,t.$$p=(r=function(e){var t,n=r.$$s||this;return null==e&&(e=o),(t=n.$arg_has_valid_description(e))===o||t.$$is_boolean&&1!=t?e.$inspect():e.$description()},r.$$s=$,r),t).call(n).$join(", ")},l.$arg_has_valid_description=function(e){var t;return(t=e["$respond_to?"]("description"))===o||t.$$is_boolean&&1!=t?!1:(t=e.$description()["$nil?"]()["$!"](),t!==!1&&t!==o?e.$description()["$empty?"]()["$!"]():t)},l.$format_received_args=function(e){var n,r=this;return e=a.call(arguments,0),(n=e["$empty?"]())===o||n.$$is_boolean&&1!=n?t(t("(",(n=r).$received_arg_list.apply(n,[].concat(e))),")"):"(no args)"},l.$received_arg_list=function(e){var t,n;return e=a.call(arguments,0),(t=(n=e).$collect,t.$$p="inspect".$to_proc(),t).call(n).$join(", ")},l.$count_message=function(e,t){var n,$,a=this;return null==t&&(t=o),(n=($=r(e,0))!==!1&&$!==o?$:t["$=="]("at_least"))===o||n.$$is_boolean&&1!=n?t["$=="]("at_most")?"at most "+a.$pretty_print(e):a.$pretty_print(e):"at least "+a.$pretty_print(e.$abs())},l.$pretty_print=function(e){return""+e+" time"+function(){return e["$=="](1)?"":"s"}()},o&&"pretty_print"}(u,null)}(u)}($)},Opal.modules.securerandom=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module);return e.add_stubs(["$gsub"]),function(t){{var $=r(t,"SecureRandom");$.$$proto,$.$$scope}e.defs($,"$uuid",function(){var e,t,r,$=this;return(e=(t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx").$gsub,e.$$p=(r=function(e){r.$$s||this;null==e&&(e=n);var t=16*Math.random()|0,$="x"==e?t:3&t|8;return $.toString(16)},r.$$s=$,r),e).call(t,/[xy]/)})}(t)},Opal.modules["rspec/mocks/space"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass,o=e.hash2;return e.add_stubs(["$attr_reader","$each_value","$verify","$proxies","$any_instance_recorders","$reset_all","$reset","$clear","$expectation_ordering","$new","$__id__","$fetch","$[]=","$delete","$select","$===","$object","$values","$id_for","$__build_mock_proxy","$verify_partial_doubles?","$configuration","$has_key?","$!","$method_defined?","$require","$equal?","$_id2ref","$instance_exec","$uuid"]),function(t){{var a=r(t,"RSpec");a.$$proto,a.$$scope}!function(t){{var a=r(t,"Mocks");a.$$proto,a.$$scope}!function(t,$super){function r(){}var a,i,s=r=$(t,$super,"Space",r),c=s.$$proto,u=s.$$scope;return c.expectation_ordering=n,s.$attr_reader("proxies","any_instance_recorders"),c.$initialize=function(){var e=this;return e.proxies=o([],{}),e.any_instance_recorders=o([],{})},c.$verify_all=function(){var e,t,r,$,o,a=this;return(e=(t=a.$proxies()).$each_value,e.$$p=(r=function(e){r.$$s||this;return null==e&&(e=n),e.$verify()},r.$$s=a,r),e).call(t),(e=($=a.$any_instance_recorders()).$each_value,e.$$p=(o=function(e){o.$$s||this;return null==e&&(e=n),e.$verify()},o.$$s=a,o),e).call($)},c.$reset_all=function(){var e,t,r,$=this;return u.get("ConstantMutator").$reset_all(),(e=(t=$.$proxies()).$each_value,e.$$p=(r=function(e){r.$$s||this;return null==e&&(e=n),e.$reset()},r.$$s=$,r),e).call(t),$.$proxies().$clear(),$.$any_instance_recorders().$clear(),$.$expectation_ordering().$clear()},c.$expectation_ordering=function(){var e,t=this;return(e=t.expectation_ordering)!==!1&&e!==n?e:t.expectation_ordering=u.get("OrderGroup").$new()},c.$any_instance_recorder_for=function(e){var t,r,$,o=this,a=n;return a=e.$__id__(),(t=(r=o.$any_instance_recorders()).$fetch,t.$$p=($=function(){var t=$.$$s||this;return t.$any_instance_recorders()["$[]="](a,u.get("AnyInstance").$$scope.get("Recorder").$new(e))},$.$$s=o,$),t).call(r,a)},c.$remove_any_instance_recorder_for=function(e){var t=this;return t.$any_instance_recorders().$delete(e.$__id__())},c.$proxies_of=function(e){var t,r,$,o=this;return(t=(r=o.$proxies().$values()).$select,t.$$p=($=function(t){$.$$s||this;return null==t&&(t=n),e["$==="](t.$object())},$.$$s=o,$),t).call(r)},c.$proxy_for=function(e){var t,r,$,o=this,a=n;return a=o.$id_for(e),(t=(r=o.$proxies()).$fetch,t.$$p=($=function(){var t,r=$.$$s||this,o=n;return r.$proxies()["$[]="](a,function(){return o=e,u.get("NilClass")["$==="](o)?u.get("ProxyForNil").$new(r.$expectation_ordering()):u.get("TestDouble")["$==="](o)?e.$__build_mock_proxy(r.$expectation_ordering()):(t=u.get("RSpec").$$scope.get("Mocks").$configuration()["$verify_partial_doubles?"]())===n||t.$$is_boolean&&1!=t?u.get("PartialMockProxy").$new(e,r.$expectation_ordering()):u.get("VerifyingPartialMockProxy").$new(e,r.$expectation_ordering())}())},$.$$s=o,$),t).call(r,a)},e.defn(s,"$ensure_registered",c.$proxy_for),c["$registered?"]=function(e){var t=this;return t.$proxies()["$has_key?"](t.$id_for(e))},i=null==e.Object.$$scope.BasicObject?n:"constant",(a=i!==!1&&i!==n?e.get("BasicObject")["$method_defined?"]("__id__")["$!"]():i)===n||a.$$is_boolean&&1!=a?(c.$id_for=function(e){return e.$__id__()},n&&"id_for"):(s.$require("securerandom"),c.$id_for=function(t){var r,$,o,a=this,i=n;return i=t.$__id__(),(r=t["$equal?"](e.get("ObjectSpace").$_id2ref(i)))===n||r.$$is_boolean&&1!=r?(r=($=t).$instance_exec,r.$$p=(o=function(){var t,r=o.$$s||this;return null==r.__id_for_rspec_mocks_space&&(r.__id_for_rspec_mocks_space=n),(t=r.__id_for_rspec_mocks_space)!==!1&&t!==n?t:r.__id_for_rspec_mocks_space=e.get("SecureRandom").$uuid()},o.$$s=a,o),r).call($):i},n&&"id_for")}(a,null)}(a)}(t)},Opal.modules["rspec/mocks/extensions/marshal"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module;return e.add_stubs(["$nil?","$space","$!","$registered?","$===","$dump_without_mocks","$dup","$alias_method","$undef_method"]),function(t){{var o=$(t,"Marshal");o.$$proto,o.$$scope}!function(t){{var $=t.$$scope;t.$$proto}return t.$$proto.$dump_with_mocks=function(t,o){var a,i,s,c=this;return o=r.call(arguments,1),(a=(i=(s=e.get("RSpec").$$scope.get("Mocks").$space()["$nil?"]())!==!1&&s!==n?s:e.get("RSpec").$$scope.get("Mocks").$space()["$registered?"](t)["$!"]())!==!1&&i!==n?i:$.get("NilClass")["$==="](t))===n||a.$$is_boolean&&1!=a?(i=c).$dump_without_mocks.apply(i,[t.$dup()].concat(o)):(a=c).$dump_without_mocks.apply(a,[t].concat(o))},t.$alias_method("dump_without_mocks","dump"),t.$undef_method("dump"),t.$alias_method("dump","dump_with_mocks")}(o.$singleton_class())}(t)},Opal.modules["rspec/mocks/any_instance/chain"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass;return e.add_stubs(["$define_method","$record","$to_proc","$include","$create_message_expectation_on","$inject","$__send__","$last","$first","$messages","$any?","$==","$negated?","$raise_double_negation_error","$private","$empty?","$verify_invocation_order","$<<","$unshift"]),function(t){{var a=$(t,"RSpec");a.$$proto,a.$$scope}!function(t){{var a=$(t,"Mocks");a.$$proto,a.$$scope}!function(t){{var a=$(t,"AnyInstance");a.$$proto,a.$$scope}!function(t,$super){function a(){}var i,s,c,u=a=o(t,$super,"Chain",a),l=u.$$proto,_=u.$$scope;return l.messages=n,l.$initialize=i=function(e,t){var $=this,o=i.$$p,a=o||n;return t=r.call(arguments,1),i.$$p=null,$.recorder=e,$.expectation_args=t,$.expectation_block=a},function(t){{var o=$(t,"Customizations");o.$$proto,o.$$scope}e.defs(o,"$record",function(e){var t,$,o,a=this;return(t=($=a).$define_method,t.$$p=(o=function(t){var $,a,i,s=o.$$s||this;return t=r.call(arguments,0),$=o.$$p||n,o.$$p=null,(a=(i=s).$record,a.$$p=$.$to_proc(),a).apply(i,[e].concat(t))},o.$$s=a,o),t).call($,e)}),o.$record("and_return"),o.$record("and_raise"),o.$record("and_throw"),o.$record("and_yield"),o.$record("and_call_original"),o.$record("with"),o.$record("once"),o.$record("twice"),o.$record("any_number_of_times"),o.$record("exactly"),o.$record("times"),o.$record("never"),o.$record("at_least"),o.$record("at_most")}(u),u.$include(_.get("Customizations")),l["$playback!"]=function(e){var t,r,$,o=this,a=n;return a=o.$create_message_expectation_on(e),(t=(r=o.$messages()).$inject,t.$$p=($=function(e,t){{var r,o;$.$$s||this}return null==e&&(e=n),null==t&&(t=n),(r=(o=e).$__send__,r.$$p=t.$last().$to_proc(),r).apply(o,[].concat(t.$first()))},$.$$s=o,$),t).call(r,a)},l["$constrained_to_any_of?"]=function(e){var t,$,o,a=this;return e=r.call(arguments,0),(t=($=e)["$any?"],t.$$p=(o=function(e){var t,r,$,a=o.$$s||this;return null==e&&(e=n),(t=(r=a.$messages())["$any?"],t.$$p=($=function(t){$.$$s||this;return null==t&&(t=n),t.$first().$first()["$=="](e)},$.$$s=a,$),t).call(r)},o.$$s=a,o),t).call($)},l["$expectation_fulfilled!"]=function(){var e=this;return e.expectation_fulfilled=!0},l.$never=s=function(){var t,$=r.call(arguments,0),o=this,a=s.$$p;return s.$$p=null,(t=o["$negated?"]())===n||t.$$is_boolean&&1!=t||_.get("ErrorGenerator").$raise_double_negation_error("expect_any_instance_of(MyClass)"),e.find_super_dispatcher(o,"never",s,a).apply(o,$)},u.$private(),l["$negated?"]=function(){var e,t,r,$=this;return(e=(t=$.$messages())["$any?"],e.$$p=(r=function(e,t){r.$$s||this;return message=e[0],null==t&&(t=n),message["$=="]("never")},r.$$s=$,r),e).call(t)},l.$messages=function(){var e,t=this;return(e=t.messages)!==!1&&e!==n?e:t.messages=[]},l.$last_message=function(){var e,t=this;return(e=t.$messages()["$empty?"]())===n||e.$$is_boolean&&1!=e?t.$messages().$last().$first().$first():n},l.$record=c=function(e,t){var $,o,a=this,i=c.$$p,s=i||n;return t=r.call(arguments,1),c.$$p=null,($=(o=a).$verify_invocation_order,$.$$p=s.$to_proc(),$).apply(o,[e].concat(t)),a.$messages()["$<<"]([t.$unshift(e),s]),a},n&&"record"}(a,null)}(a)}(a)}(t)},Opal.modules["rspec/mocks/any_instance/stub_chain"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass,a=e.hash2;return e.add_stubs(["$private","$proxy_for","$add_stub","$to_proc","$<<","$[]","$stubs","$message","$yield_receiver_to_any_instance_implementation_blocks?","$configuration","$and_yield_receiver_to_implementation","$include?","$invocation_order","$last_message","$raise"]),function(t){{var i=$(t,"RSpec");i.$$proto,i.$$scope}!function(t){{var i=$(t,"Mocks");i.$$proto,i.$$scope}!function(t){var i=$(t,"AnyInstance"),s=(i.$$proto,i.$$scope);!function(t,$super){function $(){}var i,s=$=o(t,$super,"StubChain",$),c=s.$$proto,u=s.$$scope;return c.expectation_block=c.expectation_args=c.recorder=c.invocation_order=n,c["$expectation_fulfilled?"]=function(){return!0},s.$private(),c.$create_message_expectation_on=function(t){var r,$,o=this,a=n,i=n,s=n;return a=e.get("RSpec").$$scope.get("Mocks").$proxy_for(t),i=u.get("IGNORED_BACKTRACE_LINE"),s=(r=($=a).$add_stub,r.$$p=o.expectation_block.$to_proc(),r).apply($,[i].concat(o.expectation_args)),o.recorder.$stubs()["$[]"](s.$message())["$<<"](s),(r=u.get("RSpec").$$scope.get("Mocks").$configuration()["$yield_receiver_to_any_instance_implementation_blocks?"]())===n||r.$$is_boolean&&1!=r||s.$and_yield_receiver_to_implementation(),s},c.$invocation_order=function(){var e,t=this;return(e=t.invocation_order)!==!1&&e!==n?e:t.invocation_order=a(["with","and_return","and_raise","and_yield","and_call_original"],{"with":[n],and_return:["with",n],and_raise:["with",n],and_yield:["with",n],and_call_original:["with",n]})},c.$verify_invocation_order=i=function(e,t){{var $,o=this;i.$$p}return t=r.call(arguments,1),i.$$p=null,($=o.$invocation_order()["$[]"](e)["$include?"](o.$last_message()))===n||$.$$is_boolean&&1!=$?o.$raise(u.get("NoMethodError"),"Undefined method "+e):n},n&&"verify_invocation_order"}(i,s.get("Chain"))}(i)}(i)}(t)},Opal.modules["rspec/mocks/any_instance/stub_chain_chain"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass,o=e.hash2;return e.add_stubs(["$private","$stub_chain_on","$to_proc"]),function(t){{var a=r(t,"RSpec");a.$$proto,a.$$scope}!function(t){{var a=r(t,"Mocks");a.$$proto,a.$$scope}!function(t){var a=r(t,"AnyInstance"),i=(a.$$proto,a.$$scope);!function(t,$super){function r(){}{var a=r=$(t,$super,"StubChainChain",r),i=a.$$proto;a.$$scope}return i.expectation_block=i.expectation_args=i.invocation_order=n,a.$private(),i.$create_message_expectation_on=function(t){var n,r,$=this;return(n=(r=e.get("RSpec").$$scope.get("Mocks").$$scope.get("StubChain")).$stub_chain_on,n.$$p=$.expectation_block.$to_proc(),n).apply(r,[t].concat($.expectation_args))},i.$invocation_order=function(){var e,t=this;return(e=t.invocation_order)!==!1&&e!==n?e:t.invocation_order=o(["and_return","and_raise","and_yield"],{and_return:[n],and_raise:[n],and_yield:[n]})},n&&"invocation_order"}(a,i.get("StubChain"))}(a)}(a)}(t)},Opal.modules["rspec/mocks/any_instance/expectation_chain"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass,a=e.hash2;return e.add_stubs(["$constrained_to_any_of?","$private","$proxy_for","$add_message_expectation","$to_proc","$yield_receiver_to_any_instance_implementation_blocks?","$configuration","$and_yield_receiver_to_implementation"]),function(t){{var i=$(t,"RSpec");i.$$proto,i.$$scope}!function(t){{var i=$(t,"Mocks");i.$$proto,i.$$scope}!function(t){var i=$(t,"AnyInstance"),s=(i.$$proto,i.$$scope);!function(t,$super){function $(){}{var a,i,s=$=o(t,$super,"ExpectationChain",$),c=s.$$proto;s.$$scope}return c.expectation_fulfilled=n,c["$expectation_fulfilled?"]=function(){var e,t=this;return(e=t.expectation_fulfilled)!==!1&&e!==n?e:t["$constrained_to_any_of?"]("never","any_number_of_times")},c.$initialize=a=function(t){var n=r.call(arguments,0),$=this,o=a.$$p;return t=r.call(arguments,0),a.$$p=null,$.expectation_fulfilled=!1,e.find_super_dispatcher($,"initialize",a,o).apply($,n)},s.$private(),c.$verify_invocation_order=i=function(e,t){i.$$p;return t=r.call(arguments,1),i.$$p=null,n},n&&"verify_invocation_order"}(i,s.get("Chain")),function(t,$super){function r(){}var $=r=o(t,$super,"PositiveExpectationChain",r),i=$.$$proto,s=$.$$scope;return i.expectation_block=i.expectation_args=i.invocation_order=n,$.$private(),i.$create_message_expectation_on=function(t){var r,$,o=this,a=n,i=n,c=n;return a=e.get("RSpec").$$scope.get("Mocks").$proxy_for(t),i=s.get("IGNORED_BACKTRACE_LINE"),c=(r=($=a).$add_message_expectation,r.$$p=o.expectation_block.$to_proc(),r).apply($,[i].concat(o.expectation_args)),(r=s.get("RSpec").$$scope.get("Mocks").$configuration()["$yield_receiver_to_any_instance_implementation_blocks?"]())===n||r.$$is_boolean&&1!=r||c.$and_yield_receiver_to_implementation(),c},i.$invocation_order=function(){var e,t=this;return(e=t.invocation_order)!==!1&&e!==n?e:t.invocation_order=a(["with","and_return","and_raise"],{"with":[n],and_return:["with",n],and_raise:["with",n]})},n&&"invocation_order"}(i,s.get("ExpectationChain"))}(i)}(i)}(t)},Opal.modules["rspec/mocks/any_instance/message_chains"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$new","$[]=","$[]","$<<","$reject!","$===","$find","$all?","$expectation_fulfilled?","$compact","$map","$last","$to_s","$each","$expectation_fulfilled!","$raise_if_second_instance_to_receive_message","$playback!","$private","$!","$equal?","$raise","$join","$sort","$unfulfilled_expectations"]),function(e){{var t=r(e,"RSpec");t.$$proto,t.$$scope}!function(e){{var t=r(e,"Mocks");t.$$proto,t.$$scope}!function(e){{var t=r(e,"AnyInstance");t.$$proto,t.$$scope}!function(e,$super){function t(){}var r=t=$(e,$super,"MessageChains",t),o=r.$$proto,a=r.$$scope;return o.chains_by_method_name=o.instance_with_expectation=n,o.$initialize=function(){var e,t,r,$=this;return $.chains_by_method_name=(e=(t=a.get("Hash")).$new,e.$$p=(r=function(e,t){r.$$s||this;return null==e&&(e=n),null==t&&(t=n),e["$[]="](t,[])},r.$$s=$,r),e).call(t)},o["$[]"]=function(e){var t=this;return t.chains_by_method_name["$[]"](e)},o.$add=function(e,t){var n=this;return n.chains_by_method_name["$[]"](e)["$<<"](t),t},o["$remove_stub_chains_for!"]=function(e){var t,r,$,o=this;return(t=(r=o.chains_by_method_name["$[]"](e))["$reject!"],t.$$p=($=function(e){$.$$s||this;return null==e&&(e=n),a.get("StubChain")["$==="](e)},$.$$s=o,$),t).call(r)},o["$has_expectation?"]=function(e){var t,r,$,o=this;return(t=(r=o.chains_by_method_name["$[]"](e)).$find,t.$$p=($=function(e){$.$$s||this;return null==e&&(e=n),a.get("ExpectationChain")["$==="](e)},$.$$s=o,$),t).call(r)},o["$all_expectations_fulfilled?"]=function(){var e,t,r,$=this;return(e=(t=$.chains_by_method_name)["$all?"],e.$$p=(r=function(e,t){var $,o,a,i=r.$$s||this;return null==e&&(e=n),null==t&&(t=n),($=(o=t)["$all?"],$.$$p=(a=function(e){a.$$s||this;return null==e&&(e=n),e["$expectation_fulfilled?"]()},a.$$s=i,a),$).call(o)},r.$$s=$,r),e).call(t)},o.$unfulfilled_expectations=function(){var e,t,r,$=this;return(e=(t=$.chains_by_method_name).$map,e.$$p=(r=function(e,t){{var $;r.$$s||this}return null==e&&(e=n),null==t&&(t=n),($=t.$last()["$expectation_fulfilled?"]())===n||$.$$is_boolean&&1!=$?($=a.get("ExpectationChain")["$==="](t.$last()))===n||$.$$is_boolean&&1!=$?n:e.$to_s():n},r.$$s=$,r),e).call(t).$compact()},o["$received_expected_message!"]=function(e){var t,r,$,o=this;return(t=(r=o.chains_by_method_name["$[]"](e)).$each,t.$$p=($=function(e){$.$$s||this;return null==e&&(e=n),e["$expectation_fulfilled!"]()},$.$$s=o,$),t).call(r)},o["$playback!"]=function(e,t){var r,$,o,a=this;return a.$raise_if_second_instance_to_receive_message(e),(r=($=a.chains_by_method_name["$[]"](t)).$each,r.$$p=(o=function(t){o.$$s||this;return null==t&&(t=n),t["$playback!"](e)},o.$$s=a,o),r).call($)},r.$private(),o.$raise_if_second_instance_to_receive_message=function(e){var t,r,$=this;return(t=a.get("ExpectationChain")["$==="](e))===n||t.$$is_boolean&&1!=t||((t=$.instance_with_expectation)!==!1&&t!==n?t:$.instance_with_expectation=e),r=a.get("ExpectationChain")["$==="](e),(t=r!==!1&&r!==n?$.instance_with_expectation["$equal?"](e)["$!"]():r)===n||t.$$is_boolean&&1!=t?n:$.$raise(a.get("RSpec").$$scope.get("Mocks").$$scope.get("MockExpectationError"),"Exactly one instance should have received the following message(s) but didn't: "+$.$unfulfilled_expectations().$sort().$join(", "))},n&&"raise_if_second_instance_to_receive_message"}(t,null)}(t)}(t)}(t)},Opal.modules["rspec/mocks/any_instance/recorder"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=e.breaker,$=e.slice,o=e.module,a=e.klass,i=e.hash2;return e.add_stubs(["$attr_reader","$new","$[]=","$===","$each","$and_return","$stub","$observe!","$add","$message_chains","$to_proc","$normalize_chain","$never","$should_receive","$include?","$to_sym","$raise","$remove_stub_chains_for!","$remove_single_stub","$[]","$stubs","$proxies_of","$clear","$has_expectation?","$stop_observing!","$!","$all_expectations_fulfilled?","$join","$sort","$unfulfilled_expectations","$stop_all_observation!","$remove_any_instance_recorder_for","$space","$restore_method!","$ensure_registered","$playback!","$received_expected_message!","$private","$unshift","$reverse","$map","$split","$to_s","$shift","$first","$mark_invoked!","$public_protected_or_private_method_defined?","$build_alias_method_name","$restore_original_method!","$remove_dummy_method!","$class_exec","$remove_method","$alias_method","$method_defined?","$private_method_defined?","$delete","$verify_partial_doubles?","$configuration","$already_observing?","$<<","$backup_method!","$__send__","$owner","$method_handle_for","$any_instance_recorder_for","$instance_that_received","$inspect"]),function(t){{var s=o(t,"RSpec");s.$$proto,s.$$scope}!function(t){{var s=o(t,"Mocks");s.$$proto,s.$$scope}!function(t){{var s=o(t,"AnyInstance");s.$$proto,s.$$scope}!function(t,$super){function o(){}var s,c,u,l,_,p=o=a(t,$super,"Recorder",o),d=p.$$proto,f=p.$$scope;return d.observed_methods=d.klass=d.expectation_set=d.played_methods=n,p.$attr_reader("message_chains","stubs","klass"),d.$initialize=function(e){var t,r,$,o=this;return o.message_chains=f.get("MessageChains").$new(),o.stubs=(t=(r=f.get("Hash")).$new,t.$$p=($=function(e,t){$.$$s||this;return null==e&&(e=n),null==t&&(t=n),e["$[]="](t,[])},$.$$s=o,$),t).call(r),o.observed_methods=[],o.played_methods=i([],{}),o.klass=e,o.expectation_set=!1},d.$stub=s=function(e){var t,r,$,o,a=this,i=s.$$p,c=i||n;return s.$$p=null,(t=f.get("Hash")["$==="](e))===n||t.$$is_boolean&&1!=t?(a["$observe!"](e),a.$message_chains().$add(e,(t=(o=f.get("StubChain")).$new,t.$$p=c.$to_proc(),t).call(o,a,e))):(t=(r=e).$each,t.$$p=($=function(e,t){var r=$.$$s||this;return null==e&&(e=n),null==t&&(t=n),r.$stub(e).$and_return(t)},$.$$s=a,$),t).call(r)},d.$stub_chain=c=function(e){var t,r,o,a=this,i=c.$$p,s=i||n;return e=$.call(arguments,0),c.$$p=null,(t=(r=a).$normalize_chain,t.$$p=(o=function(e,t){var r,$,a=o.$$s||this;return null==e&&(e=n),null==t&&(t=n),a["$observe!"](e),a.$message_chains().$add(e,(r=($=f.get("StubChainChain")).$new,r.$$p=s.$to_proc(),r).apply($,[a].concat(t)))},o.$$s=a,o),t).apply(r,[].concat(e))},d.$should_receive=u=function(e){var t,r,$=this,o=u.$$p,a=o||n;return u.$$p=null,$.expectation_set=!0,$["$observe!"](e),$.$message_chains().$add(e,(t=(r=f.get("PositiveExpectationChain")).$new,t.$$p=a.$to_proc(),t).call(r,$,e))},d.$should_not_receive=l=function(e){var t,r,$=this,o=l.$$p,a=o||n;return l.$$p=null,(t=(r=$).$should_receive,t.$$p=a.$to_proc(),t).call(r,e).$never()},d.$unstub=function(t){var r,$,o,a=this;return((r=a.observed_methods["$include?"](t.$to_sym()))===n||r.$$is_boolean&&1!=r)&&a.$raise(f.get("RSpec").$$scope.get("Mocks").$$scope.get("MockExpectationError"),"The method `"+t+"` was not stubbed or was already unstubbed"),a.$message_chains()["$remove_stub_chains_for!"](t),(r=($=e.get("RSpec").$$scope.get("Mocks").$proxies_of(a.klass)).$each,r.$$p=(o=function(e){var r,$,a,i=o.$$s||this;return null==e&&(e=n),(r=($=i.$stubs()["$[]"](t)).$each,r.$$p=(a=function(r){a.$$s||this;return null==r&&(r=n),e.$remove_single_stub(t,r)},a.$$s=i,a),r).call($)},o.$$s=a,o),r).call($),a.$stubs()["$[]"](t).$clear(),(r=a.$message_chains()["$has_expectation?"](t))===n||r.$$is_boolean&&1!=r?a["$stop_observing!"](t):n},d.$verify=function(){var t,r,$=this;try{return r=$.expectation_set,(t=r!==!1&&r!==n?$.$message_chains()["$all_expectations_fulfilled?"]()["$!"]():r)===n||t.$$is_boolean&&1!=t?n:$.$raise(f.get("RSpec").$$scope.get("Mocks").$$scope.get("MockExpectationError"),"Exactly one instance should have received the following message(s) but didn't: "+$.$message_chains().$unfulfilled_expectations().$sort().$join(", "))}finally{$["$stop_all_observation!"](),e.get("RSpec").$$scope.get("Mocks").$space().$remove_any_instance_recorder_for($.klass)}},d["$stop_all_observation!"]=function(){var e,t,r,$=this;return(e=(t=$.observed_methods).$each,e.$$p=(r=function(e){var t=r.$$s||this;return null==e&&(e=n),t["$restore_method!"](e)},r.$$s=$,r),e).call(t)},d["$playback!"]=function(e,t){var r,$=this;return f.get("RSpec").$$scope.get("Mocks").$space().$ensure_registered(e),$.$message_chains()["$playback!"](e,t),$.played_methods["$[]="](t,e),(r=$.$message_chains()["$has_expectation?"](t))===n||r.$$is_boolean&&1!=r?n:$["$received_expected_message!"](t)},d.$instance_that_received=function(e){var t=this;return t.played_methods["$[]"](e)},d.$build_alias_method_name=function(e){return"__"+e+"_without_any_instance__"},d["$already_observing?"]=function(e){var t=this;return t.observed_methods["$include?"](e)},p.$private(),d.$normalize_chain=_=function(t){var o,a,i,s,c,u,l=this,p=_.$$p,d=p||n;return t=$.call(arguments,0),_.$$p=null,(o=(a=(s=(c=t.$shift().$to_s().$split(".")).$map,s.$$p=(u=function(e){u.$$s||this;return null==e&&(e=n),e.$to_sym()},u.$$s=l,u),s).call(c).$reverse()).$each,o.$$p=(i=function(e){i.$$s||this;return null==e&&(e=n),t.$unshift(e)},i.$$s=l,i),o).call(a),o=e.yieldX(d,[t.$first(),t]),o===r?o:o},d["$received_expected_message!"]=function(e){var t=this;return t.$message_chains()["$received_expected_message!"](e),t["$restore_method!"](e),t["$mark_invoked!"](e)},d["$restore_method!"]=function(e){var t,r=this;return(t=r["$public_protected_or_private_method_defined?"](r.$build_alias_method_name(e)))===n||t.$$is_boolean&&1!=t?r["$remove_dummy_method!"](e):r["$restore_original_method!"](e)},d["$restore_original_method!"]=function(e){var t,r,$,o=this,a=n;return a=o.$build_alias_method_name(e),(t=(r=o.klass).$class_exec,t.$$p=($=function(){var t=$.$$s||this;return t.$remove_method(e),t.$alias_method(e,a),t.$remove_method(a)},$.$$s=o,$),t).call(r)},d["$remove_dummy_method!"]=function(e){var t,n,r,$=this;return(t=(n=$.klass).$class_exec,t.$$p=(r=function(){var t=r.$$s||this;return t.$remove_method(e)},r.$$s=$,r),t).call(n)},d["$backup_method!"]=function(e){var t,r,$,o=this,a=n;return a=o.$build_alias_method_name(e),(t=o["$public_protected_or_private_method_defined?"](e))===n||t.$$is_boolean&&1!=t?n:(t=(r=o.klass).$class_exec,t.$$p=($=function(){var t=$.$$s||this;return t.$alias_method(a,e)},$.$$s=o,$),t).call(r)},d["$public_protected_or_private_method_defined?"]=function(e){var t,r=this;return(t=r.klass["$method_defined?"](e))!==!1&&t!==n?t:r.klass["$private_method_defined?"](e)},d["$stop_observing!"]=function(e){var t=this;return t["$restore_method!"](e),t.observed_methods.$delete(e)},d["$observe!"]=function(t){var r,o,a,i=this;return(r=f.get("RSpec").$$scope.get("Mocks").$configuration()["$verify_partial_doubles?"]())===n||r.$$is_boolean&&1!=r||((r=i.klass["$method_defined?"](t))===n||r.$$is_boolean&&1!=r)&&i.$raise(f.get("MockExpectationError")),(r=i["$already_observing?"](t))===n||r.$$is_boolean&&1!=r||i["$stop_observing!"](t),i.observed_methods["$<<"](t),i["$backup_method!"](t),(r=(o=i.klass).$__send__,r.$$p=(a=function(r){var o,i,s,c=a.$$s||this,u=n;return r=$.call(arguments,0),o=a.$$p||n,a.$$p=null,u=e.get("RSpec").$$scope.get("Mocks").$method_handle_for(c,t).$owner(),e.get("RSpec").$$scope.get("Mocks").$any_instance_recorder_for(u)["$playback!"](c,t),(i=(s=c).$__send__,i.$$p=o.$to_proc(),i).apply(s,[t].concat(r))},a.$$s=i,a),r).call(o,"define_method",t)},d["$mark_invoked!"]=function(t){var r,o,a,i=this;return i["$backup_method!"](t),(r=(o=i.klass).$__send__,r.$$p=(a=function(r){var o,i=a.$$s||this,s=n,c=n;return r=$.call(arguments,0),o=a.$$p||n,a.$$p=null,s=e.get("RSpec").$$scope.get("Mocks").$method_handle_for(i,t).$owner(),c=e.get("RSpec").$$scope.get("Mocks").$any_instance_recorder_for(s).$instance_that_received(t),i.$raise(f.get("RSpec").$$scope.get("Mocks").$$scope.get("MockExpectationError"),"The message '"+t+"' was received by "+i.$inspect()+" but has already been received by "+c)},a.$$s=i,a),r).call(o,"define_method",t)},n&&"mark_invoked!"}(s,null)}(s)}(s)}(t)},Opal.modules["rspec/mocks/mutate_const"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.dynamic_require_severity="warning";var r=e.top,$=e.nil,o=e.breaker,a=e.slice,i=e.module,s=e.klass,c=e.hash2,u=e.hash;return e.add_stubs(["$==","$arity","$method","$const_defined?","$const_defined_on?","$const_get","$raise","$name","$select","$constants","$inject","$get_const_defined_on","$split","$normalize_const_name","$!","$===","$join","$sub","$extend","$attr_reader","$attr_accessor","$attr_writer","$class","$new","$previously_defined=","$recursive_const_defined?","$stubbed=","$hidden=","$previously_defined?","$original_value=","$recursive_const_get","$private_class_method","$find","$to_constant","$unmutated","$to_proc","$raise_on_invalid_const","$mutate","$fetch","$transfer_nested_constants?","$configuration","$include","$pop","$full_constant_name","$original_value","$__send__","$const_set","$verify_constants_to_transfer!","$transfer_nested_constants","$each","$respond_to?","$map","$constants_defined_on","$any?","$dup","$shift","$first","$register_mutator","$rspec_reset","$reverse","$mutators","$clear","$<<","$lambda"]),function(r){{var l=i(r,"RSpec");l.$$proto,l.$$scope}!function(r){var l=i(r,"Mocks"),_=(l.$$proto,l.$$scope);!function(t){var n,r=i(t,"RecursiveConstMethods"),a=(r.$$proto,r.$$scope);a.get("Module").$method("const_defined?").$arity()["$=="](1)?(e.defn(r,"$const_defined_on?",function(e,t){return e["$const_defined?"](t)}),e.defn(r,"$get_const_defined_on",function(e,t){var n,r=this;return(n=r["$const_defined_on?"](e,t))===$||n.$$is_boolean&&1!=n?r.$raise(a.get("NameError"),"uninitialized constant "+e.$name()+"::"+t):e.$const_get(t)}),e.defn(r,"$constants_defined_on",function(e){var t,n,r,o=this;return(t=(n=e.$constants()).$select,t.$$p=(r=function(t){var n=r.$$s||this;return null==t&&(t=$),n["$const_defined_on?"](e,t)},r.$$s=o,r),t).call(n)})):(e.defn(r,"$const_defined_on?",function(e,t){return e["$const_defined?"](t,!1)}),e.defn(r,"$get_const_defined_on",function(e,t){return e.$const_get(t,!1)}),e.defn(r,"$constants_defined_on",function(e){return e.$constants(!1)})),e.defn(r,"$recursive_const_get",function(e){var t,n,r,o=this;return(t=(n=o.$normalize_const_name(e).$split("::")).$inject,t.$$p=(r=function(e,t){var n=r.$$s||this;return null==e&&(e=$),null==t&&(t=$),n.$get_const_defined_on(e,t)},r.$$s=o,r),t).call(n,a.get("Object"))}),e.defn(r,"$recursive_const_defined?",n=function(t){try{var r,i,s,c=this,u=n.$$p,l=u||$;return n.$$p=null,(r=(i=c.$normalize_const_name(t).$split("::")).$inject,r.$$p=(s=function(t,n){var r,i,c=s.$$s||this;return mod=t[0],full_name=t[1],null==n&&(n=$),(r=(i=l!==$)?a.get("Module")["$==="](mod)["$!"]():i)===$||r.$$is_boolean&&1!=r||e.yieldX(l,[full_name,n])!==o?(((r=c["$const_defined_on?"](mod,n))===$||r.$$is_boolean&&1!=r)&&e.ret(!1),[c.$get_const_defined_on(mod,n),[mod,n].$join("::")]):o.$v},s.$$s=c,s),r).call(i,[a.get("Object"),""])}catch(_){if(_===e.returner)return _.$v;
throw _}}),e.defn(r,"$normalize_const_name",function(e){return e.$sub(/\A::/,"")})}(l),function(t,$super){function n(){}var r=n=s(t,$super,"Constant",n),o=r.$$proto,a=r.$$scope;return o.previously_defined=o.stubbed=o.hidden=$,r.$extend(a.get("RecursiveConstMethods")),o.$initialize=function(e){var t=this;return t.name=e,t.previously_defined=!1,t.stubbed=!1,t.hidden=!1},r.$attr_reader("name"),r.$attr_accessor("original_value"),r.$attr_writer("previously_defined","stubbed","hidden"),o["$previously_defined?"]=function(){var e=this;return e.previously_defined},o["$mutated?"]=function(){var e,t=this;return(e=t.stubbed)!==!1&&e!==$?e:t.hidden},o["$stubbed?"]=function(){var e=this;return e.stubbed},o["$hidden?"]=function(){var e=this;return e.hidden},o.$to_s=function(){var e=this;return"#<"+e.$class().$name()+" "+e.$name()+">"},e.defn(r,"$inspect",o.$to_s),e.defs(r,"$unmutated",function(e){var t,n,r=this,o=$;return o=r.$new(e),t=[r["$recursive_const_defined?"](e)],n=o,n["$previously_defined="].apply(n,t),t[t.length-1],t=[!1],n=o,n["$stubbed="].apply(n,t),t[t.length-1],t=[!1],n=o,n["$hidden="].apply(n,t),t[t.length-1],(t=o["$previously_defined?"]())===$||t.$$is_boolean&&1!=t||(t=[r.$recursive_const_get(e)],n=o,n["$original_value="].apply(n,t),t[t.length-1]),o}),r.$private_class_method("unmutated"),e.defs(r,"$original",function(e){var t=this,n=$;return n=a.get("ConstantMutator").$find(e),n!==!1&&n!==$?n.$to_constant():t.$unmutated(e)}),$&&"original"}(l,null),function(r,$super){function i(){}var l=i=s(r,$super,"ConstantMutator",i),_=(l.$$proto,l.$$scope);return l.$extend(_.get("RecursiveConstMethods")),e.defs(l,"$stub",function(e,t,n){var r,o,a,i=this,s=$;return null==n&&(n=c([],{})),s=function(){return _.get((r=(o=(a=i)["$recursive_const_defined?"],o.$$p=i.$raise_on_invalid_const().$to_proc(),o).call(a,e))===$||r.$$is_boolean&&1!=r?"UndefinedConstantSetter":"DefinedConstantReplacer")}(),i.$mutate(s.$new(e,t,n.$fetch("transfer_nested_constants",_.get("RSpec").$$scope.get("Mocks").$configuration()["$transfer_nested_constants?"]()))),t}),e.defs(l,"$hide",function(e){var t,n=this;return(t=n["$recursive_const_defined?"](e))===$||t.$$is_boolean&&1!=t?$:(n.$mutate(_.get("ConstantHider").$new(e,$,c([],{}))),$)}),function(e,$super){function t(){}var n=t=s(e,$super,"BaseMutator",t),r=n.$$proto,o=n.$$scope;return r.full_constant_name=r.context_parts=$,n.$include(o.get("RecursiveConstMethods")),n.$attr_reader("original_value","full_constant_name"),r.$initialize=function(e,t,n){var r=this;return r.full_constant_name=r.$normalize_const_name(e),r.mutated_value=t,r.transfer_nested_constants=n,r.context_parts=r.full_constant_name.$split("::"),r.const_name=r.context_parts.$pop()},r.$to_constant=function(){var e,t,n=this,r=$;return r=o.get("Constant").$new(n.$full_constant_name()),e=[n.$original_value()],t=r,t["$original_value="].apply(t,e),e[e.length-1],r},$&&"to_constant"}(l,null),function(t,$super){function n(){}{var r,o=n=s(t,$super,"ConstantHider",n),i=o.$$proto;o.$$scope}return i.context_parts=i.context=i.const_name=i.original_value=$,i.$mutate=function(){var e=this;return e.context=e.$recursive_const_get(e.context_parts.$join("::")),e.original_value=e.$get_const_defined_on(e.context,e.const_name),e.context.$__send__("remove_const",e.const_name)},i.$to_constant=r=function(){var t,n,o=a.call(arguments,0),i=this,s=r.$$p,c=$;return r.$$p=null,c=e.find_super_dispatcher(i,"to_constant",r,s).apply(i,o),t=[!0],n=c,n["$hidden="].apply(n,t),t[t.length-1],t=[!0],n=c,n["$previously_defined="].apply(n,t),t[t.length-1],c},i.$rspec_reset=function(){var e=this;return e.context.$const_set(e.const_name,e.original_value)},$&&"rspec_reset"}(l,_.get("BaseMutator")),function(r,$super){function o(){}var i,c=o=s(r,$super,"DefinedConstantReplacer",o),l=c.$$proto,_=c.$$scope;return l.context_parts=l.context=l.const_name=l.mutated_value=l.original_value=l.transfer_nested_constants=l.full_constant_name=$,l.$mutate=function(){var e=this,t=$;return e.context=e.$recursive_const_get(e.context_parts.$join("::")),e.original_value=e.$get_const_defined_on(e.context,e.const_name),t=e["$verify_constants_to_transfer!"](),e.context.$__send__("remove_const",e.const_name),e.context.$const_set(e.const_name,e.mutated_value),e.$transfer_nested_constants(t)},l.$to_constant=i=function(){var t,n,r=a.call(arguments,0),o=this,s=i.$$p,c=$;return i.$$p=null,c=e.find_super_dispatcher(o,"to_constant",i,s).apply(o,r),t=[!0],n=c,n["$stubbed="].apply(n,t),t[t.length-1],t=[!0],n=c,n["$previously_defined="].apply(n,t),t[t.length-1],c},l.$rspec_reset=function(){var e=this;return e.context.$__send__("remove_const",e.const_name),e.context.$const_set(e.const_name,e.original_value)},l.$transfer_nested_constants=function(e){var t,n,r,o=this;return(t=(n=e).$each,t.$$p=(r=function(e){var t=r.$$s||this;return null==t.mutated_value&&(t.mutated_value=$),null==e&&(e=$),t.mutated_value.$const_set(e,t.$get_const_defined_on(t.$original_value(),e))},r.$$s=o,r),t).call(n)},l["$verify_constants_to_transfer!"]=function(){var e,r,o,a,i=this,s=$,c=$;return(e=i.transfer_nested_constants)===$||e.$$is_boolean&&1!=e?[]:((e=(r=u(i.original_value,"the original value",i.mutated_value,"the stubbed value")).$each,e.$$p=(o=function(e,n){var r,a=o.$$s||this;return null==a.full_constant_name&&(a.full_constant_name=$),null==e&&(e=$),null==n&&(n=$),(r=e["$respond_to?"]("constants"))===$||r.$$is_boolean&&1!=r?a.$raise(_.get("ArgumentError"),t(t("Cannot transfer nested constants for "+a.full_constant_name+" ","since "+n+" is not a class or module and only classes "),"and modules support nested constants.")):$},o.$$s=i,o),e).call(r),(e=_.get("Array")["$==="](i.transfer_nested_constants))===$||e.$$is_boolean&&1!=e?i.$constants_defined_on(i.original_value):(_.get("RUBY_VERSION")["$=="]("1.8.7")&&(i.transfer_nested_constants=(e=(a=i.transfer_nested_constants).$map,e.$$p="to_s".$to_proc(),e).call(a)),s=n(i.transfer_nested_constants,i.$constants_defined_on(i.original_value)),(e=s["$any?"]())===$||e.$$is_boolean&&1!=e||(c=n(i.$constants_defined_on(i.original_value),i.transfer_nested_constants),i.$raise(_.get("ArgumentError"),t(t("Cannot transfer nested constant(s) "+s.$join(" and ")+" ","for "+i.full_constant_name+" since they are not defined. Did you mean "),""+c.$join(" or ")+"?"))),i.transfer_nested_constants))},$&&"verify_constants_to_transfer!"}(l,_.get("BaseMutator")),function(t,$super){function n(){}var r,i=n=s(t,$super,"UndefinedConstantSetter",n),c=i.$$proto,u=i.$$scope;return c.context_parts=c.deepest_defined_const=c.const_name=c.mutated_value=c.const_to_remove=$,c.$mutate=function(){var e,t,n,r,a,i=this,s=$,c=$;return s=i.context_parts.$dup(),i.deepest_defined_const=(e=(t=i.context_parts).$inject,e.$$p=(n=function(e,t){var r,a=n.$$s||this;return null==e&&(e=$),null==t&&(t=$),(r=a["$const_defined_on?"](e,t))===$||r.$$is_boolean&&1!=r?(o.$v=e,o):(s.$shift(),a.$get_const_defined_on(e,t))},n.$$s=i,n),e).call(t,u.get("Object")),c=(e=(r=s).$inject,e.$$p=(a=function(e,t){a.$$s||this;return null==e&&(e=$),null==t&&(t=$),e.$const_set(t,u.get("Module").$new())},a.$$s=i,a),e).call(r,i.deepest_defined_const),i.const_to_remove=(e=s.$first())!==!1&&e!==$?e:i.const_name,c.$const_set(i.const_name,i.mutated_value)},c.$to_constant=r=function(){var t,n,o=a.call(arguments,0),i=this,s=r.$$p,c=$;return r.$$p=null,c=e.find_super_dispatcher(i,"to_constant",r,s).apply(i,o),t=[!0],n=c,n["$stubbed="].apply(n,t),t[t.length-1],t=[!1],n=c,n["$previously_defined="].apply(n,t),t[t.length-1],c},c.$rspec_reset=function(){var e=this;return e.deepest_defined_const.$__send__("remove_const",e.const_to_remove)},$&&"rspec_reset"}(l,_.get("BaseMutator")),e.defs(l,"$mutate",function(e){var t=this;return t.$register_mutator(e),e.$mutate()}),e.defs(l,"$reset_all",function(){var e,t,n,r=this;return(e=(t=r.$mutators().$reverse()).$each,e.$$p=(n=function(e){n.$$s||this;return null==e&&(e=$),e.$rspec_reset()},n.$$s=r,n),e).call(t),r.$mutators().$clear()}),e.defs(l,"$mutators",function(){var e,t=this;return null==t.mutators&&(t.mutators=$),(e=t.mutators)!==!1&&e!==$?e:t.mutators=[]}),e.defs(l,"$register_mutator",function(e){var t=this;return t.$mutators()["$<<"](e)}),e.defs(l,"$find",function(e){var t,n,r,o=this;return(t=(n=o.$mutators()).$find,t.$$p=(r=function(t){r.$$s||this;return null==t&&(t=$),t.$full_constant_name()["$=="](e)},r.$$s=o,r),t).call(n)}),e.defs(l,"$raise_on_invalid_const",function(){var e,n,r,o=this;return(e=(n=o).$lambda,e.$$p=(r=function(e,n){var o=r.$$s||this;return null==e&&(e=$),null==n&&(n=$),o.$raise(t("Cannot stub constant "+n+" on "+e+" ","since "+e+" is not a module."))},r.$$s=o,r),e).call(n)}),$&&"raise_on_invalid_const"}(l,null),e.cdecl(_,"ConstantStubber",_.get("ConstantMutator"))}(l)}(r)},Opal.modules["rspec/mocks/matchers/have_received"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="warning";var n=e.top,r=e.nil,$=(e.breaker,e.slice),o=e.module,a=e.klass;return e.add_stubs(["$expect","$expected_messages_received_in_order?","$ensure_count_unconstrained","$never","$generate_failure_message","$description","$each","$define_method","$<<","$private","$build_expectation","$mock_proxy","$apply_constraints_to","$send","$count_constraint","$raise","$detect","$include?","$map","$to_proc","$check_for_unexpected_arguments","$generate_error","$message","$replay_received_message_on","$expected_messages_received?","$ensure_expected_ordering_received!","$proxy_for"]),function(n){{var i=o(n,"RSpec");i.$$proto,i.$$scope}!function(n){{var i=o(n,"Mocks");i.$$proto,i.$$scope}!function(n){{var i=o(n,"Matchers");i.$$proto,i.$$scope}!function(n,$super){function o(){}var i,s,c,u,l,_=o=a(n,$super,"HaveReceived",o),p=_.$$proto,d=_.$$scope;return p.block=p.method_name=p.constraints=p.expectation=p.subject=r,e.cdecl(d,"COUNT_CONSTRAINTS",["exactly","at_least","at_most","times","once","twice"]),e.cdecl(d,"ARGS_CONSTRAINTS",["with"]),e.cdecl(d,"CONSTRAINTS",t(t(d.get("COUNT_CONSTRAINTS"),d.get("ARGS_CONSTRAINTS")),["ordered"])),p.$initialize=i=function(e){var t=this,n=i.$$p,$=n||r;return i.$$p=null,t.method_name=e,t.block=$,t.constraints=[],t.subject=r},p.$name=function(){return"have_received"},p["$matches?"]=s=function(e){var t,n=this,$=s.$$p,o=$||r;return s.$$p=null,(t=n.block)!==!1&&t!==r?t:n.block=o,n.subject=e,n.expectation=n.$expect(),n["$expected_messages_received_in_order?"]()},p["$does_not_match?"]=function(e){var t=this;return t.subject=e,t.$ensure_count_unconstrained(),t.expectation=t.$expect().$never(),t["$expected_messages_received_in_order?"]()},p.$failure_message=function(){var e=this;return e.$generate_failure_message()},p.$negative_failure_message=function(){var e=this;return e.$generate_failure_message()},p.$description=function(){var e=this;return e.$expect().$description()},(c=(u=d.get("CONSTRAINTS")).$each,c.$$p=(l=function(e){var t,n,o,a=l.$$s||this;return null==e&&(e=r),(t=(n=a).$define_method,t.$$p=(o=function(t){var n=o.$$s||this;return null==n.constraints&&(n.constraints=r),t=$.call(arguments,0),n.constraints["$<<"]([e].concat(t)),n},o.$$s=a,o),t).call(n,e)},l.$$s=_,l),c).call(u),_.$private(),p.$expect=function(){var e=this,t=r;return t=e.$mock_proxy().$build_expectation(e.method_name),e.$apply_constraints_to(t),t},p.$apply_constraints_to=function(e){var t,n,$,o=this;return(t=(n=o.constraints).$each,t.$$p=($=function(t){{var n;$.$$s||this}return null==t&&(t=r),(n=e).$send.apply(n,[].concat(t))},$.$$s=o,$),t).call(n)},p.$ensure_count_unconstrained=function(){var e,t=this;return(e=t.$count_constraint())===r||e.$$is_boolean&&1!=e?r:t.$raise(d.get("RSpec").$$scope.get("Mocks").$$scope.get("MockExpectationError"),"can't use "+t.$count_constraint()+" when negative")},p.$count_constraint=function(){var e,t,n,$,o,a=this;return(e=(t=($=(o=a.constraints).$map,$.$$p="first".$to_proc(),$).call(o)).$detect,e.$$p=(n=function(e){n.$$s||this;return null==e&&(e=r),d.get("COUNT_CONSTRAINTS")["$include?"](e)},n.$$s=a,n),e).call(t)},p.$generate_failure_message=function(){var t=this,n=r;try{return t.$mock_proxy().$check_for_unexpected_arguments(t.expectation),t.expectation.$generate_error()}catch($){if(e.rescue($,[d.get("RSpec").$$scope.get("Mocks").$$scope.get("MockExpectationError")]))return n=$,n.$message();throw $}},p["$expected_messages_received_in_order?"]=function(){var e,t,n=this;return(e=(t=n.$mock_proxy()).$replay_received_message_on,e.$$p=n.block.$to_proc(),e).call(t,n.expectation),e=n.expectation["$expected_messages_received?"](),e!==!1&&e!==r?n.expectation["$ensure_expected_ordering_received!"]():e},p.$mock_proxy=function(){var e=this;return d.get("RSpec").$$scope.get("Mocks").$proxy_for(e.subject)},r&&"mock_proxy"}(i,null)}(i)}(i)}(n)},Opal.modules["rspec/mocks/matchers/receive"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass;return e.add_stubs(["$first_non_rspec_line","$warn_if_any_instance","$setup_mock_proxy_method_substitute","$unshift","$new","$setup_expectation","$to_proc","$setup_any_instance_method_substitute","$each","$method_defined?","$define_method","$<<","$public_instance_methods","$private","$===","$warning","$klass","$proxy_for","$setup_method_substitute","$any_instance_recorder_for","$to_sym","$__send__","$playback_onto"]),function(t){{var a=$(t,"RSpec");a.$$proto,a.$$scope}!function(t){{var a=$(t,"Mocks");a.$$proto,a.$$scope}!function(t){{var a=$(t,"Matchers");a.$$proto,a.$$scope}!function(t,$super){function $(){}var a,i,s,c,u,l,_,p,d,f=$=o(t,$super,"Receive",$),h=f.$$proto,m=f.$$scope;return h.recorded_customizations=h.backtrace_line=h.message=h.block=n,h.$initialize=function(e,t){var n=this;return n.message=e,n.block=t,n.recorded_customizations=[],n.backtrace_line=m.get("CallerFilter").$first_non_rspec_line()},h.$name=function(){return"receive"},h.$setup_expectation=a=function(e){var t=this,r=a.$$p,$=r||n;return a.$$p=null,t.$warn_if_any_instance("expect",e),t.$setup_mock_proxy_method_substitute(e,"add_message_expectation",$)},e.defn(f,"$matches?",h.$setup_expectation),h.$setup_negative_expectation=i=function(e){var t,r,$=this,o=i.$$p,a=o||n;return i.$$p=null,$.recorded_customizations.$unshift(m.get("Customization").$new("never",[],n)),$.$warn_if_any_instance("expect",e),(t=(r=$).$setup_expectation,t.$$p=a.$to_proc(),t).call(r,e)},e.defn(f,"$does_not_match?",h.$setup_negative_expectation),h.$setup_allowance=s=function(e){var t=this,r=s.$$p,$=r||n;return s.$$p=null,t.$warn_if_any_instance("allow",e),t.$setup_mock_proxy_method_substitute(e,"add_stub",$)},h.$setup_any_instance_expectation=c=function(e){var t=this,r=c.$$p,$=r||n;return c.$$p=null,t.$setup_any_instance_method_substitute(e,"should_receive",$)},h.$setup_any_instance_negative_expectation=u=function(e){var t=this,r=u.$$p,$=r||n;return u.$$p=null,t.$setup_any_instance_method_substitute(e,"should_not_receive",$)},h.$setup_any_instance_allowance=l=function(e){var t=this,r=l.$$p,$=r||n;return l.$$p=null,t.$setup_any_instance_method_substitute(e,"stub",$)},(_=(p=m.get("MessageExpectation").$public_instance_methods(!1)).$each,_.$$p=(d=function(e){var t,$,o,a=d.$$s||this;return null==e&&(e=n),(t=a["$method_defined?"](e))===n||t.$$is_boolean&&1!=t?(t=($=a).$define_method,t.$$p=(o=function(t){var $,a=o.$$s||this;return null==a.recorded_customizations&&(a.recorded_customizations=n),t=r.call(arguments,0),$=o.$$p||n,o.$$p=null,a.recorded_customizations["$<<"](m.get("Customization").$new(e,t,$)),a},o.$$s=a,o),t).call($,e):n},d.$$s=f,d),_).call(p),f.$private(),h.$warn_if_any_instance=function(e,t){var r;return(r=m.get("AnyInstance").$$scope.get("Recorder")["$==="](t))===n||r.$$is_boolean&&1!=r?n:m.get("RSpec").$warning(("`"+e+"("+t.$klass()+".any_instance).to` ")["$<<"]("is probably not what you meant, it does not operate on ")["$<<"]("any instance of `"+t.$klass()+"`. ")["$<<"]("Use `"+e+"_any_instance_of("+t.$klass()+").to` instead."))},h.$setup_mock_proxy_method_substitute=function(t,r,$){var o=this,a=n;return a=e.get("RSpec").$$scope.get("Mocks").$proxy_for(t),o.$setup_method_substitute(a,r,$,o.backtrace_line)},h.$setup_any_instance_method_substitute=function(t,r,$){var o=this,a=n;return a=e.get("RSpec").$$scope.get("Mocks").$any_instance_recorder_for(t),o.$setup_method_substitute(a,r,$)},h.$setup_method_substitute=function(e,t,$,o){var a,i,s,c,u=this,l=n;return o=r.call(arguments,3),o["$<<"](u.message.$to_sym()),l=(a=(i=e).$__send__,a.$$p=((s=u.block)!==!1&&s!==n?s:$).$to_proc(),a).apply(i,[t].concat(o)),(a=(s=u.recorded_customizations).$each,a.$$p=(c=function(e){c.$$s||this;return null==e&&(e=n),e.$playback_onto(l)},c.$$s=u,c),a).call(s),l},function(e,$super){function t(){}{var r=t=o(e,$super,"Customization",t),$=r.$$proto;r.$$scope}return $.block=$.method_name=$.args=n,$.$initialize=function(e,t,n){var r=this;return r.method_name=e,r.args=t,r.block=n},$.$playback_onto=function(e){var t,n,r=this;return(t=(n=e).$__send__,t.$$p=r.block.$to_proc(),t).apply(n,[r.method_name].concat(r.args))},n&&"playback_onto"}(f,null)}(a,null)}(a)}(a)}(t)},Opal.modules["rspec/mocks/matchers/receive_messages"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="warning";var n=e.top,r=e.nil,$=e.breaker,o=(e.slice,e.module),a=e.klass;return e.add_stubs(["$first_non_rspec_line","$warn_about_block","$each_message_on","$add_simple_expectation","$proxy_on","$raise","$add_simple_stub","$and_return","$should_receive","$any_instance_of","$stub","$private","$proxy_for","$any_instance_recorder_for","$each"]),function(n){{var i=o(n,"RSpec");i.$$proto,i.$$scope}!function(n){{var i=o(n,"Mocks");i.$$proto,i.$$scope}!function(n){{var i=o(n,"Matchers");i.$$proto,i.$$scope}!function(n,$super){function o(){}var i,s,c,u,l,_=o=a(n,$super,"ReceiveMessages",o),p=_.$$proto,d=_.$$scope;return p.message_return_value_hash=r,p.$initialize=function(e){var t=this;return t.message_return_value_hash=e,t.backtrace_line=d.get("CallerFilter").$first_non_rspec_line()},p.$name=function(){return"receive_messages"},p.$setup_expectation=i=function(e){var t,n,$,o=this,a=i.$$p,s=a||r;return i.$$p=null,s!==r&&o.$warn_about_block(),(t=(n=o).$each_message_on,t.$$p=($=function(e,t,n){var o=$.$$s||this;return null==o.backtrace_line&&(o.backtrace_line=r),null==e&&(e=r),null==t&&(t=r),null==n&&(n=r),e.$add_simple_expectation(t,n,o.backtrace_line)},$.$$s=o,$),t).call(n,o.$proxy_on(e))},e.defn(_,"$matches?",p.$setup_expectation),p.$setup_negative_expectation=function(){var e=this;return e.$raise(d.get("NegationUnsupportedError"),t("`expect(...).to_not receive_messages` is not supported since it ","doesn't really make sense. What would it even mean?"))},e.defn(_,"$does_not_match?",p.$setup_negative_expectation),p.$setup_allowance=s=function(e){var t,n,$,o=this,a=s.$$p,i=a||r;return s.$$p=null,i!==r&&o.$warn_about_block(),(t=(n=o).$each_message_on,t.$$p=($=function(e,t,n){$.$$s||this;return null==e&&(e=r),null==t&&(t=r),null==n&&(n=r),e.$add_simple_stub(t,n)},$.$$s=o,$),t).call(n,o.$proxy_on(e))},p.$setup_any_instance_expectation=c=function(e){var t,n,$,o=this,a=c.$$p,i=a||r;return c.$$p=null,i!==r&&o.$warn_about_block(),(t=(n=o).$each_message_on,t.$$p=($=function(e,t,n){$.$$s||this;return null==e&&(e=r),null==t&&(t=r),null==n&&(n=r),e.$should_receive(t).$and_return(n)},$.$$s=o,$),t).call(n,o.$any_instance_of(e))},p.$setup_any_instance_allowance=u=function(e){var t=this,n=u.$$p,$=n||r;return u.$$p=null,$!==r&&t.$warn_about_block(),t.$any_instance_of(e).$stub(t.message_return_value_hash)},p.$warn_about_block=function(){var e=this;return e.$raise("Implementation blocks aren't supported with `receive_messages`")},_.$private(),p.$proxy_on=function(t){return e.get("RSpec").$$scope.get("Mocks").$proxy_for(t)},p.$any_instance_of=function(t){return e.get("RSpec").$$scope.get("Mocks").$any_instance_recorder_for(t)},p.$each_message_on=l=function(t){var n,o,a,i=this,s=l.$$p,c=s||r;return l.$$p=null,(n=(o=i.message_return_value_hash).$each,n.$$p=(a=function(n,o){{var i;a.$$s||this}return null==n&&(n=r),null==o&&(o=r),i=e.yieldX(c,[t,n,o]),i===$?i:i},a.$$s=i,a),n).call(o)},r&&"each_message_on"}(i,null)}(i)}(i)}(n)},Opal.modules["rspec/mocks/stub_chain"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.dynamic_require_severity="warning";var n=e.top,r=e.nil,$=(e.breaker,e.slice),o=e.module,a=e.klass;return e.add_stubs(["$stub_chain","$new","$to_proc","$attr_reader","$format_chain","$length","$chain","$find_matching_stub","$shift","$block","$invoke","$stub","$object","$stub_chain_on","$private","$===","$last","$pop","$each","$<<","$lambda","$split","$join","$__send__","$proxy_for","$to_sym","$first"]),function(n){{var i=o(n,"RSpec");i.$$proto,i.$$scope}!function(n){{var i=o(n,"Mocks");i.$$proto,i.$$scope}!function(n,$super){function o(){}var i,s,c,u=o=a(n,$super,"StubChain",o),l=u.$$proto,_=u.$$scope;return e.defs(u,"$stub_chain_on",i=function(e,t){var n,o,a=this,s=i.$$p,c=s||r;return t=$.call(arguments,1),i.$$p=null,(n=(o=a).$new,n.$$p=c.$to_proc(),n).apply(o,[e].concat(t)).$stub_chain()}),u.$attr_reader("object","chain","block"),l.$initialize=s=function(t,n){var o,a,i,c=this,u=s.$$p,l=u||r;return n=$.call(arguments,1),s.$$p=null,c.object=t,o=e.to_ary((a=(i=c).$format_chain,a.$$p=l.$to_proc(),a).apply(i,[].concat(n))),c.chain=null==o[0]?r:o[0],c.block=null==o[1]?r:o[1]},l.$stub_chain=function(){var e,n,$,o,a,i,s=this,c=r,u=r;return t(s.$chain().$length(),1)?(e=c=s.$find_matching_stub())===r||e.$$is_boolean&&1!=e?(u=_.get("Mock").$new(),(e=($=s.$object()).$stub,e.$$p=(o=function(){o.$$s||this;return u},o.$$s=s,o),e).call($,s.$chain().$shift()),(e=(a=_.get("StubChain")).$stub_chain_on,e.$$p=s.$block().$to_proc(),e).apply(a,[u].concat(s.$chain()))):(s.$chain().$shift(),(e=(n=c.$invoke(r)).$stub_chain,e.$$p=s.$block().$to_proc(),e).apply(n,[].concat(s.$chain()))):(e=(i=s.$object()).$stub,e.$$p=s.$block().$to_proc(),e).call(i,s.$chain().$shift())},u.$private(),l.$format_chain=c=function(e){var t,n,o,a=this,i=c.$$p,s=i||r,u=r;return e=$.call(arguments,0),c.$$p=null,(t=_.get("Hash")["$==="](e.$last()))===r||t.$$is_boolean&&1!=t||(u=e.$pop(),(t=(n=u).$each,t.$$p=(o=function(t,n){var $,a,i,c=o.$$s||this;return null==t&&(t=r),null==n&&(n=r),e["$<<"](t),s=($=(a=c).$lambda,$.$$p=(i=function(){i.$$s||this;return n},i.$$s=c,i),$).call(a)},o.$$s=a,o),t).call(n)),[e.$join(".").$split("."),s]},l.$find_matching_stub=function(){var t=this;return e.get("RSpec").$$scope.get("Mocks").$proxy_for(t.$object()).$__send__("find_matching_method_stub",t.$chain().$first().$to_sym())},r&&"find_matching_stub"}(i,null)}(i)}(n)},Opal.modules["rspec/mocks/targets"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="warning";var n=e.top,r=e.nil,$=(e.breaker,e.slice),o=e.module,a=e.klass,i=e.hash2;return e.add_stubs(["$new","$define_method","$===","$raise_unsupported_matcher","$define_matcher","$to_proc","$fetch","$raise_negation_unsupported","$private","$__send__","$raise","$expression","$name","$class","$delegate_to","$disallow_negation","$delegate_not_to"]),function(n){{var s=o(n,"RSpec");s.$$proto,s.$$scope}!function(n){var s=o(n,"Mocks"),c=(s.$$proto,s.$$scope);e.cdecl(c,"UnsupportedMatcherError",c.get("Class").$new(c.get("StandardError"))),e.cdecl(c,"NegationUnsupportedError",c.get("Class").$new(c.get("StandardError"))),function(n,$super){function o(){}var s,c=o=a(n,$super,"TargetBase",o),u=c.$$proto,l=c.$$scope;return u.target=r,u.$initialize=function(e){var t=this;return t.target=e},e.defs(c,"$delegate_to",function(e){var t,n,$,o=this;return(t=(n=o).$define_method,t.$$p=($=function(t){var n,o,a,i=$.$$s||this;return null==t&&(t=r),n=$.$$p||r,$.$$p=null,((o=(a=l.get("Matchers").$$scope.get("Receive")["$==="](t))!==!1&&a!==r?a:l.get("Matchers").$$scope.get("ReceiveMessages")["$==="](t))===r||o.$$is_boolean&&1!=o)&&i.$raise_unsupported_matcher("to",t),(o=(a=i).$define_matcher,o.$$p=n.$to_proc(),o).call(a,t,e)},$.$$s=o,$),t).call(n,"to")}),e.defs(c,"$delegate_not_to",function(e,t){var n,$,o,a=this,s=r;return null==t&&(t=i([],{})),s=t.$fetch("from"),(n=($=a).$define_method,n.$$p=(o=function(t){var n,$,a,i=o.$$s||this,c=r;return null==t&&(t=r),n=o.$$p||r,o.$$p=null,function(){return c=t,l.get("Matchers").$$scope.get("Receive")["$==="](c)?($=(a=i).$define_matcher,$.$$p=n.$to_proc(),$).call(a,t,e):l.get("Matchers").$$scope.get("ReceiveMessages")["$==="](c)?i.$raise_negation_unsupported(s,t):i.$raise_unsupported_matcher(s,t)}()},o.$$s=a,o),n).call($,s)}),e.defs(c,"$disallow_negation",function(e){var t,n,o,a=this;return(t=(n=a).$define_method,t.$$p=(o=function(t,n){var a=o.$$s||this;return null==t&&(t=r),n=$.call(arguments,1),a.$raise_negation_unsupported(e,t)},o.$$s=a,o),t).call(n,e)}),c.$private(),u.$define_matcher=s=function(e,t){var n,$,o=this,a=s.$$p,i=a||r;return s.$$p=null,(n=($=e).$__send__,n.$$p=i.$to_proc(),n).call($,t,o.target)},u.$raise_unsupported_matcher=function(e,n){var r=this;return r.$raise(l.get("UnsupportedMatcherError"),t("only the `receive` or `receive_messages` matchers are supported ","with `"+r.$expression()+"(...)."+e+"`, but you have provided: "+n))},u.$raise_negation_unsupported=function(e,n){var r=this;return r.$raise(l.get("NegationUnsupportedError"),t("`"+r.$expression()+"(...)."+e+" "+n.$name()+"` is not supported since it ","doesn't really make sense. What would it even mean?"))},u.$expression=function(){var e=this;return e.$class().$$scope.get("EXPRESSION")},r&&"expression"}(s,null),function(t,$super){function n(){}var r=n=a(t,$super,"AllowanceTarget",n),$=(r.$$proto,r.$$scope);return e.cdecl($,"EXPRESSION","allow"),r.$delegate_to("setup_allowance"),r.$disallow_negation("not_to"),r.$disallow_negation("to_not")}(s,c.get("TargetBase")),function(t,$super){function n(){}var r=n=a(t,$super,"ExpectationTarget",n),$=(r.$$proto,r.$$scope);return e.cdecl($,"EXPRESSION","expect"),r.$delegate_to("setup_expectation"),r.$delegate_not_to("setup_negative_expectation",i(["from"],{from:"not_to"})),r.$delegate_not_to("setup_negative_expectation",i(["from"],{from:"to_not"}))}(s,c.get("TargetBase")),function(t,$super){function n(){}var r=n=a(t,$super,"AnyInstanceAllowanceTarget",n),$=(r.$$proto,r.$$scope);return e.cdecl($,"EXPRESSION","allow_any_instance_of"),r.$delegate_to("setup_any_instance_allowance"),r.$disallow_negation("not_to"),r.$disallow_negation("to_not")}(s,c.get("TargetBase")),function(t,$super){function n(){}var r=n=a(t,$super,"AnyInstanceExpectationTarget",n),$=(r.$$proto,r.$$scope);return e.cdecl($,"EXPRESSION","expect_any_instance_of"),r.$delegate_to("setup_any_instance_expectation"),r.$delegate_not_to("setup_any_instance_negative_expectation",i(["from"],{from:"not_to"})),r.$delegate_not_to("setup_any_instance_negative_expectation",i(["from"],{from:"to_not"}))}(s,c.get("TargetBase"))}(s)}(n)},Opal.modules["rspec/mocks/syntax"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.dynamic_require_severity="warning";var n=e.top,r=e.nil,$=(e.breaker,e.slice),o=e.module,a=e.hash2;return e.add_stubs(["$deprecate","$should_enabled?","$class_exec","$warn_unless_should_configured","$[]","$[]=","$first_non_rspec_line","$expect_message","$to_proc","$never","$===","$each","$and_return","$stub","$allow_message","$remove_stub","$proxy_for","$space","$stub_chain_on","$as_null_object","$received_message?","$respond_to?","$any_instance_recorder_for","$default_should_syntax_host","$expect_enabled?","$new","$warn_about_block","$method_defined?","$==","$to_f","$last","$ancestors"]),function(n){{var i=o(n,"RSpec");i.$$proto,i.$$scope}!function(n){{var i=o(n,"Mocks");i.$$proto,i.$$scope}!function(n){var i=o(n,"Syntax"),s=i.$$proto,c=i.$$scope;e.defs(i,"$warn_about_should!",function(){var e=this;return e.warn_about_should=!0}),e.defs(i,"$warn_unless_should_configured",function(e){var t,n=this;return null==n.warn_about_should&&(n.warn_about_should=r),(t=n.warn_about_should)===r||t.$$is_boolean&&1!=t?r:(c.get("RSpec").$deprecate("Using `"+e+"` from rspec-mocks' old `:should` syntax without explicitly enabling the syntax",a(["replacement"],{replacement:"the new `:expect` syntax or explicitly enable `:should`"})),n.warn_about_should=!1)}),e.defs(i,"$enable_should",function(t){var n,o,i,s=this;return null==t&&(t=s.$default_should_syntax_host()),s.warn_about_should=!1,(n=s["$should_enabled?"](t))===r||n.$$is_boolean&&1!=n?(n=(o=t).$class_exec,n.$$p=(i=function(){var t,n,o,s,u,l,_,p,d=i.$$s||this;return e.defn(d,"$should_receive",t=function(n,$){var o,i,s,u=this,l=t.$$p,_=l||r;return null==$&&($=a([],{})),t.$$p=null,e.get("RSpec").$$scope.get("Mocks").$$scope.get("Syntax").$warn_unless_should_configured("should_receive"),o="expected_from",i=$,(s=i["$[]"](o))!==!1&&s!==r?s:i["$[]="](o,c.get("CallerFilter").$first_non_rspec_line()),(o=(i=e.get("RSpec").$$scope.get("Mocks")).$expect_message,o.$$p=_.$to_proc(),o).call(i,u,n,$)}),e.defn(d,"$should_not_receive",n=function(t){var $,o,i=this,s=n.$$p,u=s||r,l=r;return n.$$p=null,e.get("RSpec").$$scope.get("Mocks").$$scope.get("Syntax").$warn_unless_should_configured("should_not_receive"),l=a(["expected_from"],{expected_from:c.get("CallerFilter").$first_non_rspec_line()}),($=(o=e.get("RSpec").$$scope.get("Mocks")).$expect_message,$.$$p=u.$to_proc(),$).call(o,i,t,l).$never()}),e.defn(d,"$stub",o=function(t,n){var $,i,s,u,l=this,_=o.$$p,p=_||r;return null==n&&(n=a([],{})),o.$$p=null,e.get("RSpec").$$scope.get("Mocks").$$scope.get("Syntax").$warn_unless_should_configured("stub"),($=e.get("Hash")["$==="](t))===r||$.$$is_boolean&&1!=$?(n["$[]="]("expected_from",c.get("CallerFilter").$first_non_rspec_line()),($=(u=e.get("RSpec").$$scope.get("Mocks")).$allow_message,$.$$p=p.$to_proc(),$).call(u,l,t,n)):($=(i=t).$each,$.$$p=(s=function(e,t){var n=s.$$s||this;return null==e&&(e=r),null==t&&(t=r),n.$stub(e).$and_return(t)},s.$$s=l,s),$).call(i)}),e.defn(d,"$unstub",function(t){var n=this;return e.get("RSpec").$$scope.get("Mocks").$$scope.get("Syntax").$warn_unless_should_configured("unstub"),e.get("RSpec").$$scope.get("Mocks").$space().$proxy_for(n).$remove_stub(t)}),e.defn(d,"$stub_chain",s=function(t){var n,o,a=this,i=s.$$p,c=i||r;return t=$.call(arguments,0),s.$$p=null,e.get("RSpec").$$scope.get("Mocks").$$scope.get("Syntax").$warn_unless_should_configured("stub_chain"),(n=(o=e.get("RSpec").$$scope.get("Mocks").$$scope.get("StubChain")).$stub_chain_on,n.$$p=c.$to_proc(),n).apply(o,[a].concat(t))}),e.defn(d,"$as_null_object",function(){var t=this;return e.get("RSpec").$$scope.get("Mocks").$$scope.get("Syntax").$warn_unless_should_configured("as_null_object"),t._null_object=!0,e.get("RSpec").$$scope.get("Mocks").$proxy_for(t).$as_null_object()}),e.defn(d,"$null_object?",function(){var t,n=this;return e.get("RSpec").$$scope.get("Mocks").$$scope.get("Syntax").$warn_unless_should_configured("null_object?"),t=n._null_object,null!=t&&t!==r?"instance-variable":r}),e.defn(d,"$received_message?",u=function(t,n){var o,a,i=this,s=u.$$p,c=s||r;return n=$.call(arguments,1),u.$$p=null,e.get("RSpec").$$scope.get("Mocks").$$scope.get("Syntax").$warn_unless_should_configured("received_message?"),(o=(a=e.get("RSpec").$$scope.get("Mocks").$proxy_for(i))["$received_message?"],o.$$p=c.$to_proc(),o).apply(a,[t].concat(n))}),(l=c.get("Class")["$respond_to?"]("any_instance"))===r||l.$$is_boolean&&1!=l?(l=(_=c.get("Class")).$class_exec,l.$$p=(p=function(){var t=p.$$s||this;return e.defn(t,"$any_instance",function(){var t=this;return e.get("RSpec").$$scope.get("Mocks").$$scope.get("Syntax").$warn_unless_should_configured("any_instance"),e.get("RSpec").$$scope.get("Mocks").$any_instance_recorder_for(t)}),r&&"any_instance"},p.$$s=d,p),l).call(_):r},i.$$s=s,i),n).call(o):r}),e.defs(i,"$disable_should",function(e){var t,n,$,o,a,i=this;return null==e&&(e=i.$default_should_syntax_host()),(t=i["$should_enabled?"](e))===r||t.$$is_boolean&&1!=t?r:((t=(n=e).$class_exec,t.$$p=($=function(){$.$$s||this;return delete s.$should_receive,delete s.$should_not_receive,delete s.$stub,delete s.$unstub,delete s.$stub_chain,delete s.$as_null_object,delete s["$null_object?"],delete s["$received_message?"]},$.$$s=i,$),t).call(n),(t=(o=c.get("Class")).$class_exec,t.$$p=(a=function(){a.$$s||this;return delete s.$any_instance},a.$$s=i,a),t).call(o))}),e.defs(i,"$enable_expect",function(t){var n,$,o,a,i,s=this;return null==t&&(t=e.get("RSpec").$$scope.get("Mocks").$$scope.get("ExampleMethods")),(n=s["$expect_enabled?"](t))===r||n.$$is_boolean&&1!=n?((n=($=t).$class_exec,n.$$p=(o=function(){var t,n,$=o.$$s||this;return e.defn($,"$receive",t=function(e){var n=t.$$p,$=n||r;return t.$$p=null,c.get("Matchers").$$scope.get("Receive").$new(e,$)}),e.defn($,"$receive_messages",n=function(e){var t=n.$$p,$=t||r,o=r;return n.$$p=null,o=c.get("Matchers").$$scope.get("ReceiveMessages").$new(e),$!==r&&o.$warn_about_block(),o
}),e.defn($,"$allow",function(e){return c.get("AllowanceTarget").$new(e)}),e.defn($,"$expect_any_instance_of",function(e){return c.get("AnyInstanceExpectationTarget").$new(e)}),e.defn($,"$allow_any_instance_of",function(e){return c.get("AnyInstanceAllowanceTarget").$new(e)}),r&&"allow_any_instance_of"},o.$$s=s,o),n).call($),(n=(a=c.get("RSpec").$$scope.get("Mocks").$$scope.get("ExampleMethods").$$scope.get("ExpectHost")).$class_exec,n.$$p=(i=function(){var t=i.$$s||this;return e.defn(t,"$expect",function(e){return c.get("ExpectationTarget").$new(e)}),r&&"expect"},i.$$s=s,i),n).call(a)):r}),e.defs(i,"$disable_expect",function(t){var n,$,o,a,i,u=this;return null==t&&(t=e.get("RSpec").$$scope.get("Mocks").$$scope.get("ExampleMethods")),(n=u["$expect_enabled?"](t))===r||n.$$is_boolean&&1!=n?r:((n=($=t).$class_exec,n.$$p=(o=function(){o.$$s||this;return delete s.$receive,delete s.$receive_messages,delete s.$allow,delete s.$expect_any_instance_of,delete s.$allow_any_instance_of},o.$$s=u,o),n).call($),(n=(a=c.get("RSpec").$$scope.get("Mocks").$$scope.get("ExampleMethods").$$scope.get("ExpectHost")).$class_exec,n.$$p=(i=function(){i.$$s||this;return delete s.$expect},i.$$s=u,i),n).call(a))}),e.defs(i,"$should_enabled?",function(e){var t=this;return null==e&&(e=t.$default_should_syntax_host()),e["$method_defined?"]("should_receive")}),e.defs(i,"$expect_enabled?",function(t){return null==t&&(t=e.get("RSpec").$$scope.get("Mocks").$$scope.get("ExampleMethods")),t["$method_defined?"]("allow")}),e.defs(i,"$default_should_syntax_host",function(){var n,$,o;return o=null!=c.JRUBY_VERSION,$=o!==!1&&o!==r?c.get("JRUBY_VERSION")["$=="]("1.7.4"):o,(n=$!==!1&&$!==r?t(c.get("RUBY_VERSION").$to_f(),1.8):$)===r||n.$$is_boolean&&1!=n?(n=null==e.Object.$$scope.BasicObject?r:"constant")===r||n.$$is_boolean&&1!=n?c.get("Object"):c.get("Object").$ancestors().$last()["$=="](e.get("BasicObject"))?e.get("BasicObject"):c.get("Object"):e.get("BasicObject")})}(i)}(i)}(n)},Opal.modules["rspec/mocks/configuration"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass;return e.add_stubs(["$each","$enable_should","$include?","$Array","$enable_expect","$disable_expect","$disable_should","$should_enabled?","$<<","$expect_enabled?","$!","$syntax=","$warn_about_should!","$new","$reset_syntaxes_to_default","$configuration"]),function(t){{var a=$(t,"RSpec");a.$$proto,a.$$scope}!function(t){var a=$(t,"Mocks"),i=(a.$$proto,a.$$scope);!function(e,$super){function t(){}var $=t=o(e,$super,"Configuration",t),a=$.$$proto,i=$.$$scope;return a.yield_receiver_to_any_instance_implementation_blocks=a.verify_doubled_constant_names=a.transfer_nested_constants=a.verify_partial_doubles=n,a.$initialize=function(){var e=this;return e.yield_receiver_to_any_instance_implementation_blocks=!0,e.verify_doubled_constant_names=!1,e.transfer_nested_constants=!1,e.verify_partial_doubles=!1},a["$yield_receiver_to_any_instance_implementation_blocks?"]=function(){var e=this;return e.yield_receiver_to_any_instance_implementation_blocks},a["$yield_receiver_to_any_instance_implementation_blocks="]=function(e){var t=this;return t.yield_receiver_to_any_instance_implementation_blocks=e},a.$add_stub_and_should_receive_to=function(e){var t,$,o,a=this;return e=r.call(arguments,0),(t=($=e).$each,t.$$p=(o=function(e){o.$$s||this;return null==e&&(e=n),i.get("Syntax").$enable_should(e)},o.$$s=a,o),t).call($)},a["$syntax="]=function(e){var t,r=this;return(t=r.$Array(e)["$include?"]("expect"))===n||t.$$is_boolean&&1!=t?i.get("Syntax").$disable_expect():i.get("Syntax").$enable_expect(),(t=r.$Array(e)["$include?"]("should"))===n||t.$$is_boolean&&1!=t?i.get("Syntax").$disable_should():i.get("Syntax").$enable_should()},a.$syntax=function(){var e,t=n;return t=[],(e=i.get("Syntax")["$should_enabled?"]())===n||e.$$is_boolean&&1!=e||t["$<<"]("should"),(e=i.get("Syntax")["$expect_enabled?"]())===n||e.$$is_boolean&&1!=e||t["$<<"]("expect"),t},a["$verify_doubled_constant_names?"]=function(){var e=this;return e.verify_doubled_constant_names["$!"]()["$!"]()},a["$verify_doubled_constant_names="]=function(e){var t=this;return t.verify_doubled_constant_names=e},a["$transfer_nested_constants?"]=function(){var e=this;return e.transfer_nested_constants["$!"]()["$!"]()},a["$transfer_nested_constants="]=function(e){var t=this;return t.transfer_nested_constants=e},a["$verify_partial_doubles="]=function(e){var t=this;return t.verify_partial_doubles=e["$!"]()["$!"]()},a["$verify_partial_doubles?"]=function(){var e=this;return e.verify_partial_doubles},a.$reset_syntaxes_to_default=function(){var e,t,n=this;return e=[["should","expect"]],t=n,t["$syntax="].apply(t,e),e[e.length-1],i.get("RSpec").$$scope.get("Mocks").$$scope.get("Syntax")["$warn_about_should!"]()},n&&"reset_syntaxes_to_default"}(a,null),e.defs(a,"$configuration",function(){var e,t=this;return null==t.configuration&&(t.configuration=n),(e=t.configuration)!==!1&&e!==n?e:t.configuration=i.get("Configuration").$new()}),a.$configuration().$reset_syntaxes_to_default()}(a)}(t)},Opal.modules["rspec/mocks/arity_calculator"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?t>=e:e["$<="](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>=t:e["$>="](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}function $(e,t){return"number"==typeof e&&"number"==typeof t?e/t:e["$/"](t)}e.dynamic_require_severity="warning";var o=e.top,a=e.nil,i=(e.breaker,e.slice,e.module),s=e.klass;return e.add_stubs(["$min_arity","$max_arity","$==","$to_s","$private","$method_defined?","$arity","$method","$~","$supports_optional_and_splat_args?","$parameters","$any?","$count","$!"]),function(o){{var c=i(o,"RSpec");c.$$proto,c.$$scope}!function(o){{var c=i(o,"Mocks");c.$$proto,c.$$scope}!function(o,$super){function i(){}var c,u=i=s(o,$super,"ArityCalculator",i),l=u.$$proto,_=u.$$scope;return l.method=a,l.$initialize=function(e){var t=this;return t.method=e},l["$within_range?"]=function(e){var n,r=this;return(n=t(r.$min_arity(),e))?t(e,r.$max_arity()):n},l.$range_description=function(){var e=this;return e.$min_arity()["$=="](e.$max_arity())?e.$min_arity().$to_s():e.$max_arity()["$=="](_.get("INFINITY"))?""+e.$min_arity()+" or more":""+e.$min_arity()+" to "+e.$max_arity()},u.$private(),l.$method=function(){var e=this;return e.method},e.defs(u,"$supports_optional_and_splat_args?",function(){return _.get("Method")["$method_defined?"]("parameters")}),l.$min_arity=function(){var e=this;return n(e.$method().$arity(),0)?e.$method().$arity():e.$method().$arity()["$~"]()},l.$max_arity=(c=u["$supports_optional_and_splat_args?"]())===a||c.$$is_boolean&&1!=c?function(){var e=this;return r(e.$method().$arity(),0)?_.get("INFINITY"):e.$method().$arity()}:function(){var e,t,n,r,$,o=this,i=a;return i=o.$method().$parameters(),(e=(t=(n=i)["$any?"],t.$$p=(r=function(e,t){r.$$s||this;return null==e&&(e=a),null==t&&(t=a),e["$=="]("rest")},r.$$s=o,r),t).call(n))===a||e.$$is_boolean&&1!=e?(e=(t=i).$count,e.$$p=($=function(e,t){$.$$s||this;return null==e&&(e=a),null==t&&(t=a),e["$=="]("block")["$!"]()},$.$$s=o,$),e).call(t):_.get("INFINITY")},e.cdecl(_,"INFINITY",$(1,0))}(c,null)}(c)}(o)},Opal.modules["rspec/mocks/verifying_message_expecation"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.dynamic_require_severity="warning";var n=e.top,r=e.nil,$=(e.breaker,e.slice),o=e.module,a=e.klass;return e.add_stubs(["$require","$attr_accessor","$===","$first","$length","$ensure_arity!","$private","$nil?","$method_reference","$when_defined","$new","$within_range?","$raise_arity_error"]),n.$require("rspec/mocks/arity_calculator"),function(n){{var i=o(n,"RSpec");i.$$proto,i.$$scope}!function(n){var i=o(n,"Mocks"),s=(i.$$proto,i.$$scope);!function(n,$super){function o(){}var i,s,c=o=a(n,$super,"VerifyingMessageExpectation",o),u=c.$$proto,l=c.$$scope;return c.$attr_accessor("method_reference"),u.$initialize=i=function(t){var n=$.call(arguments,0),r=this,o=i.$$p;return t=$.call(arguments,0),i.$$p=null,e.find_super_dispatcher(r,"initialize",i,o).apply(r,n)},u.$with=s=function(n){var o,a=$.call(arguments,0),i=this,c=s.$$p,u=r;return n=$.call(arguments,0),s.$$p=null,((o=l.get("ArgumentMatchers").$$scope.get("AnyArgsMatcher")["$==="](n.$first()))===r||o.$$is_boolean&&1!=o)&&(u=function(){return(o=l.get("ArgumentMatchers").$$scope.get("NoArgsMatcher")["$==="](n.$first()))===r||o.$$is_boolean&&1!=o?t(n.$length(),0)?n.$length():e.find_super_dispatcher(i,"with",s,c).apply(i,a):0}(),i["$ensure_arity!"](u)),e.find_super_dispatcher(i,"with",s,c).apply(i,a)},c.$private(),u["$ensure_arity!"]=function(e){var t,n,$,o=this;return(t=o.$method_reference()["$nil?"]())===r||t.$$is_boolean&&1!=t?(t=(n=o.$method_reference()).$when_defined,t.$$p=($=function(t){var n,o=$.$$s||this,a=r;return null==o.error_generator&&(o.error_generator=r),null==t&&(t=r),a=l.get("ArityCalculator").$new(t),(n=a["$within_range?"](e))===r||n.$$is_boolean&&1!=n?(o.failed_fast=!0,o.error_generator.$raise_arity_error(a,e)):r},$.$$s=o,$),t).call(n):r},r&&"ensure_arity!"}(i,s.get("MessageExpectation"))}(i)}(n)},Opal.modules["rspec/mocks/method_reference"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?t>e:e["$<"](t)}e.dynamic_require_severity="warning";var n=e.top,r=e.nil,$=e.breaker,o=(e.slice,e.module),a=e.klass;return e.add_stubs(["$when_loaded","$method_implemented?","$method_defined?","$original_method","$implemented?","$private","$defined?","$find_method","$==","$to_i","$[]","$split","$instance_method","$dup","$respond_to?","$method"]),function(n){{var i=o(n,"RSpec");i.$$proto,i.$$scope}!function(n){var i=o(n,"Mocks"),s=(i.$$proto,i.$$scope);!function(t,$super){function n(){}{var o,i,s=n=a(t,$super,"MethodReference",n),c=s.$$proto;s.$$scope}return c.module_reference=r,c.$initialize=function(e,t){var n=this;return n.module_reference=e,n.method_name=t},c["$implemented?"]=function(){var e,t,n,$=this;return(e=(t=$.module_reference).$when_loaded,e.$$p=(n=function(e){var t=n.$$s||this;return null==e&&(e=r),t["$method_implemented?"](e)},n.$$s=$,n),e).call(t)},c["$defined?"]=function(){var e,t,n,$=this;return(e=(t=$.module_reference).$when_loaded,e.$$p=(n=function(e){var t=n.$$s||this;return null==e&&(e=r),t["$method_defined?"](e)},n.$$s=$,n),e).call(t)},c.$when_defined=o=function(){var t,n=this,a=o.$$p,i=a||r,s=r;return o.$$p=null,(t=s=n.$original_method())===r||t.$$is_boolean&&1!=t?r:(t=e.yield1(i,s),t===$?t:t)},c.$when_unimplemented=i=function(){var t,n=this,o=i.$$p,a=o||r;return i.$$p=null,(t=n["$implemented?"]())===r||t.$$is_boolean&&1!=t?(t=e.yieldX(a,[]),t===$?t:t):r},s.$private(),c.$original_method=function(){var e,t,n,$=this;return(e=(t=$.module_reference).$when_loaded,e.$$p=(n=function(e){var t,$=n.$$s||this;return null==e&&(e=r),t=$["$defined?"](),t!==!1&&t!==r?$.$find_method(e):t},n.$$s=$,n),e).call(t)},r&&"original_method"}(i,null),function(n,$super){function $(){}var o,i,s=$=a(n,$super,"InstanceMethodReference",$),c=s.$$proto,u=s.$$scope;return c.method_name=r,s.$private(),c["$method_implemented?"]=function(e){var t=this;return e["$method_defined?"](t.method_name)},e.defn(s,"$method_defined?",c["$method_implemented?"]),(o=(i=u.get("RUBY_PLATFORM")["$=="]("java"))?t(u.get("JRUBY_VERSION").$split(".")["$[]"](-1).$to_i(),5):i)===r||o.$$is_boolean&&1!=o?(c.$find_method=function(e){var t=this;return e.$instance_method(t.method_name)},r&&"find_method"):(c.$find_method=function(e){var t=this;return e.$dup().$instance_method(t.method_name)},r&&"find_method")}(i,s.get("MethodReference")),function(e,$super){function t(){}{var n=t=a(e,$super,"ObjectMethodReference",t),$=n.$$proto;n.$$scope}return $.method_name=r,n.$private(),$["$method_implemented?"]=function(e){var t=this;return e["$respond_to?"](t.method_name)},$["$method_defined?"]=function(e){var t=this;return function(e){e.$$scope,e.$$proto;return e}(e.$singleton_class())["$method_defined?"](t.method_name)},$.$find_method=function(e){var t=this;return e.$method(t.method_name)},r&&"find_method"}(i,s.get("MethodReference"))}(i)}(n)},Opal.modules["rspec/mocks/verifying_proxy"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=e.breaker,$=e.slice,o=e.module,a=e.hash2,i=e.klass;return e.add_stubs(["$require","$ensure_implemented","$defined?","$when_unimplemented","$raise_unimplemented_error","$[]","$method_reference","$include","$new","$[]=","$tap","$method_reference=","$ensure_arity!","$length","$private","$when_defined","$within_range?","$raise","$arity","$respond_to?","$save_original_method!","$original_method"]),t.$require("rspec/mocks/verifying_message_expecation"),t.$require("rspec/mocks/method_reference"),function(t){{var s=o(t,"RSpec");s.$$proto,s.$$scope}!function(t){var s=o(t,"Mocks"),c=(s.$$proto,s.$$scope);!function(t){{var r,i,s,c=o(t,"VerifyingProxyMethods");c.$$proto,c.$$scope}e.defn(c,"$add_stub",r=function(t,n,o){var i=$.call(arguments,0),s=this,c=r.$$p;return null==o&&(o=a([],{})),r.$$p=null,s.$ensure_implemented(n),e.find_super_dispatcher(s,"add_stub",r,c).apply(s,i)}),e.defn(c,"$add_simple_stub",i=function(t,n){var r=$.call(arguments,0),o=this,a=i.$$p;return n=$.call(arguments,1),i.$$p=null,o.$ensure_implemented(t),e.find_super_dispatcher(o,"add_simple_stub",i,a).apply(o,r)}),e.defn(c,"$add_message_expectation",s=function(t,n,r){var o=$.call(arguments,0),i=this,c=s.$$p;return null==r&&(r=a([],{})),s.$$p=null,i.$ensure_implemented(n),e.find_super_dispatcher(i,"add_message_expectation",s,c).apply(i,o)}),e.defn(c,"$ensure_implemented",function(e){var t,r,$,o=this;return null==o.doubled_module&&(o.doubled_module=n),(t=o.doubled_module["$defined?"]())===n||t.$$is_boolean&&1!=t?n:(t=(r=o.$method_reference()["$[]"](e)).$when_unimplemented,t.$$p=($=function(){var t=$.$$s||this;return null==t.error_generator&&(t.error_generator=n),null==t.doubled_module&&(t.doubled_module=n),t.error_generator.$raise_unimplemented_error(t.doubled_module,e)},$.$$s=o,$),t).call(r)})}(s),function(t,$super){function r(){}var $,o=r=i(t,$super,"VerifyingProxy",r),a=o.$$proto,s=o.$$scope;return a.method_reference=n,o.$include(s.get("VerifyingProxyMethods")),a.$initialize=$=function(t,r,o,a){{var i,c,u,l=this;$.$$p}return $.$$p=null,e.find_super_dispatcher(l,"initialize",$,null).apply(l,[t,r]),l.object=t,l.doubled_module=o,l.method_reference_class=a,l.method_doubles=(i=(c=s.get("Hash")).$new,i.$$p=(u=function(e,t){var r=u.$$s||this;return null==r.object&&(r.object=n),null==e&&(e=n),null==t&&(t=n),e["$[]="](t,s.get("VerifyingMethodDouble").$new(r.object,t,r,r.$method_reference()["$[]"](t)))},u.$$s=l,u),i).call(c)},a.$method_reference=function(){var e,t,r,$,o=this;return(e=o.method_reference)!==!1&&e!==n?e:o.method_reference=(t=(r=s.get("Hash")).$new,t.$$p=($=function(e,t){var r=$.$$s||this;return null==r.method_reference_class&&(r.method_reference_class=n),null==r.doubled_module&&(r.doubled_module=n),null==e&&(e=n),null==t&&(t=n),e["$[]="](t,r.method_reference_class.$new(r.doubled_module,t))},$.$$s=o,$),t).call(r)},n&&"method_reference"}(s,c.get("Proxy")),function(t,$super){function r(){}var $,o=r=i(t,$super,"VerifyingPartialMockProxy",r),a=o.$$proto,s=o.$$scope;return a.method_doubles=n,o.$include(s.get("VerifyingProxyMethods")),a.$initialize=$=function(t,r){{var o,a,i,c=this;$.$$p}return $.$$p=null,e.find_super_dispatcher(c,"initialize",$,null).apply(c,[t,r]),c.doubled_module=s.get("DirectObjectReference").$new(t),c.method_doubles=(o=(a=s.get("Hash")).$new,o.$$p=(i=function(e,r){var $=i.$$s||this;return null==e&&(e=n),null==r&&(r=n),e["$[]="](r,s.get("VerifyingExistingMethodDouble").$new(t,r,$))},i.$$s=c,i),o).call(a)},a.$method_reference=function(){var e=this;return e.method_doubles},n&&"method_reference"}(s,c.get("PartialMockProxy")),function(t,$super){function r(){}var o,a,s,c=r=i(t,$super,"VerifyingMethodDouble",r),u=c.$$proto,l=c.$$scope;return u.method_reference=n,u.$initialize=o=function(t,n,r,$){{var a=this;o.$$p}return o.$$p=null,e.find_super_dispatcher(a,"initialize",o,null).apply(a,[t,n,r]),a.method_reference=$},u.$message_expectation_class=function(){return l.get("VerifyingMessageExpectation")},u.$add_expectation=a=function(t){var r,o,i,s=$.call(arguments,0),c=this,u=a.$$p;return t=$.call(arguments,0),a.$$p=null,(r=(o=e.find_super_dispatcher(c,"add_expectation",a,u).apply(c,s)).$tap,r.$$p=(i=function(e){var t,r,$=i.$$s||this;return null==$.method_reference&&($.method_reference=n),null==e&&(e=n),t=[$.method_reference],r=e,r["$method_reference="].apply(r,t),t[t.length-1]},i.$$s=c,i),r).call(o)},u.$proxy_method_invoked=s=function(t,n){var r=$.call(arguments,0),o=this,a=s.$$p;return n=$.call(arguments,1),s.$$p=null,o["$ensure_arity!"](n.$length()),e.find_super_dispatcher(o,"proxy_method_invoked",s,a).apply(o,r)},c.$private(),u["$ensure_arity!"]=function(e){var t,r,$,o=this;return(t=(r=o.method_reference).$when_defined,t.$$p=($=function(t){var r,o=$.$$s||this,a=n;return null==t&&(t=n),a=l.get("ArityCalculator").$new(t),(r=a["$within_range?"](e))===n||r.$$is_boolean&&1!=r?o.$raise(l.get("ArgumentError"),"wrong number of arguments ("+e+" for "+t.$arity()+")"):n},$.$$s=o,$),t).call(r)},n&&"ensure_arity!"}(s,c.get("MethodDouble")),function(t,$super){function $(){}{var o,a,s,c=$=i(t,$super,"VerifyingExistingMethodDouble",$),u=c.$$proto;c.$$scope}return u.valid_method=n,u.$initialize=o=function(t,n,r){{var $=this;o.$$p}return o.$$p=null,e.find_super_dispatcher($,"initialize",o,null).apply($,[t,n,r,$]),$.valid_method=t["$respond_to?"](n),$["$save_original_method!"]()},u.$when_defined=a=function(){var t,$=this,o=a.$$p,i=o||n;return a.$$p=null,t=e.yield1(i,$.$original_method()),t===r?t:t},u.$when_unimplemented=s=function(){var t,$=this,o=s.$$p,a=o||n;return s.$$p=null,(t=$.valid_method)===n||t.$$is_boolean&&1!=t?(t=e.yieldX(a,[]),t===r?t:t):n},n&&"when_unimplemented"}(s,c.get("VerifyingMethodDouble"))}(s)}(t)},Opal.modules["rspec/mocks/verifying_double"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass,a=e.hash2;return e.add_stubs(["$require","$null_object?","$ensure_implemented","$__mock_proxy","$include","$__initialize_as_test_double","$new","$stub","$const_to_replace"]),t.$require("rspec/mocks/mock"),t.$require("rspec/mocks/verifying_proxy"),function(t){{var i=$(t,"RSpec");i.$$proto,i.$$scope}!function(t){var i=$(t,"Mocks"),s=(i.$$proto,i.$$scope);!function(t){{var o,a=$(t,"VerifyingDouble");a.$$proto,a.$$scope}e.defn(a,"$method_missing",o=function(t,$){var a,i=r.call(arguments,0),s=this,c=o.$$p;return $=r.call(arguments,1),o.$$p=null,(a=s["$null_object?"]())===n||a.$$is_boolean&&1!=a||s.$__mock_proxy().$ensure_implemented(t),e.find_super_dispatcher(s,"method_missing",o,c).apply(s,i)})}(i),function(e,$super){function t(){}var $=t=o(e,$super,"InstanceVerifyingDouble",t),a=$.$$proto,i=$.$$scope;return a.doubled_module=n,$.$include(i.get("TestDouble")),$.$include(i.get("VerifyingDouble")),a.$initialize=function(e,t){var n,$=this;return t=r.call(arguments,1),$.doubled_module=e,(n=$).$__initialize_as_test_double.apply(n,[e].concat(t))},a.$__build_mock_proxy=function(e){var t=this;return i.get("VerifyingProxy").$new(t,e,t.doubled_module,i.get("InstanceMethodReference"))},n&&"__build_mock_proxy"}(i,null),function(t){var o=$(t,"ObjectVerifyingDoubleMethods"),i=(o.$$proto,o.$$scope);o.$include(i.get("TestDouble")),o.$include(i.get("VerifyingDouble")),e.defn(o,"$initialize",function(e,t){var n,$=this;return t=r.call(arguments,1),$.doubled_module=e,(n=$).$__initialize_as_test_double.apply(n,[e].concat(t))}),e.defn(o,"$__build_mock_proxy",function(e){var t=this;return null==t.doubled_module&&(t.doubled_module=n),i.get("VerifyingProxy").$new(t,e,t.doubled_module,i.get("ObjectMethodReference"))}),e.defn(o,"$as_stubbed_const",function(e){var t=this;return null==t.doubled_module&&(t.doubled_module=n),null==e&&(e=a([],{})),i.get("ConstantMutator").$stub(t.doubled_module.$const_to_replace(),t,e),t})}(i),function(e,$super){function t(){}var n=t=o(e,$super,"ObjectVerifyingDouble",t),r=(n.$$proto,n.$$scope);return n.$include(r.get("ObjectVerifyingDoubleMethods"))}(i,null),function(e,$super){function t(){}var n=t=o(e,$super,"ClassVerifyingDouble",t),r=(n.$$proto,n.$$scope);return n.$include(r.get("ObjectVerifyingDoubleMethods"))}(i,s.get("Module"))}(i)}(t)},Opal.modules["rspec/mocks/framework"]=function(e){e.dynamic_require_severity="warning";{var t=e.top;e.nil,e.breaker,e.slice}return e.add_stubs(["$require"]),t.$require("rspec/support/caller_filter"),t.$require("rspec/support/warnings"),t.$require("rspec/mocks/instance_method_stasher"),t.$require("rspec/mocks/method_double"),t.$require("rspec/mocks/argument_matchers"),t.$require("rspec/mocks/example_methods"),t.$require("rspec/mocks/proxy"),t.$require("rspec/mocks/proxy_for_nil"),t.$require("rspec/mocks/test_double"),t.$require("rspec/mocks/mock"),t.$require("rspec/mocks/argument_list_matcher"),t.$require("rspec/mocks/message_expectation"),t.$require("rspec/mocks/order_group"),t.$require("rspec/mocks/errors"),t.$require("rspec/mocks/error_generator"),t.$require("rspec/mocks/space"),t.$require("rspec/mocks/extensions/marshal"),t.$require("rspec/mocks/any_instance/chain"),t.$require("rspec/mocks/any_instance/stub_chain"),t.$require("rspec/mocks/any_instance/stub_chain_chain"),t.$require("rspec/mocks/any_instance/expectation_chain"),t.$require("rspec/mocks/any_instance/message_chains"),t.$require("rspec/mocks/any_instance/recorder"),t.$require("rspec/mocks/mutate_const"),t.$require("rspec/mocks/matchers/have_received"),t.$require("rspec/mocks/matchers/receive"),t.$require("rspec/mocks/matchers/receive_messages"),t.$require("rspec/mocks/stub_chain"),t.$require("rspec/mocks/targets"),t.$require("rspec/mocks/syntax"),t.$require("rspec/mocks/configuration"),t.$require("rspec/mocks/verifying_double")},Opal.modules["rspec/mocks/version"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=(e.nil,e.breaker,e.slice,e.module);return function(t){{var r=n(t,"RSpec");r.$$proto,r.$$scope}!function(t){{var r=n(t,"Mocks");r.$$proto,r.$$scope}!function(t){var r=n(t,"Version"),$=(r.$$proto,r.$$scope);e.cdecl($,"STRING","3.0.0.beta1")}(r)}(r)}(t)},Opal.modules["rspec/mocks"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.hash2;return e.add_stubs(["$require","$attr_accessor","$class_exec","$include","$space","$space=","$new","$verify_all","$reset_all","$proxy_for","$proxies_of","$any_instance_recorder_for","$fetch","$first_non_rspec_line","$add_stub","$to_proc","$add_message_expectation","$instance_method","$===","$call","$bind","$method"]),t.$require("rspec/mocks/framework"),t.$require("rspec/mocks/version"),function(t){{var o=r(t,"RSpec");o.$$proto,o.$$scope}!function(t){var o=r(t,"Mocks"),a=(o.$$proto,o.$$scope);!function(t){{var r=t.$$scope;t.$$proto}return t.$attr_accessor("space"),t.$$proto.$setup=function(e){var t,$,o,a,i=this;return(t=($=function(e){e.$$scope,e.$$proto;return e}(e.$singleton_class())).$class_exec,t.$$p=(o=function(){var e=o.$$s||this;return e.$include(r.get("RSpec").$$scope.get("Mocks").$$scope.get("ExampleMethods"))},o.$$s=i,o),t).call($),t=i,(a=t.$space())!==!1&&a!==n?a:t["$space="](r.get("RSpec").$$scope.get("Mocks").$$scope.get("Space").$new())},t.$$proto.$verify=function(){var e=this;return e.$space().$verify_all()},t.$$proto.$teardown=function(){var e=this;return e.$space().$reset_all()},t.$$proto.$proxy_for=function(e){var t=this;return t.$space().$proxy_for(e)},t.$$proto.$proxies_of=function(e){var t=this;return t.$space().$proxies_of(e)},t.$$proto.$any_instance_recorder_for=function(e){var t=this;return t.$space().$any_instance_recorder_for(e)},t.$$proto.$allow_message=TMP_2=function(t,o,a){var i,s,c,u,l=this,_=TMP_2.$$p,p=_||n,d=n;return null==a&&(a=$([],{})),TMP_2.$$p=null,d=(i=(s=a).$fetch,i.$$p=(c=function(){c.$$s||this;return r.get("CallerFilter").$first_non_rspec_line()},c.$$s=l,c),i).call(s,"expected_from"),(i=(u=e.get("RSpec").$$scope.get("Mocks").$proxy_for(t)).$add_stub,i.$$p=p.$to_proc(),i).call(u,d,o,a)},t.$$proto.$expect_message=TMP_4=function(t,o,a){var i,s,c,u,l=this,_=TMP_4.$$p,p=_||n,d=n;return null==a&&(a=$([],{})),TMP_4.$$p=null,d=(i=(s=a).$fetch,i.$$p=(c=function(){c.$$s||this;return r.get("CallerFilter").$first_non_rspec_line()},c.$$s=l,c),i).call(s,"expected_from"),(i=(u=e.get("RSpec").$$scope.get("Mocks").$proxy_for(t)).$add_message_expectation,i.$$p=p.$to_proc(),i).call(u,d,o,a)},e.cdecl(r,"KERNEL_METHOD_METHOD",e.get("Kernel").$instance_method("method")),t.$$proto.$method_handle_for=function(t,$){var o;return(o=e.get("Kernel")["$==="](t))===n||o.$$is_boolean&&1!=o?t.$method($):r.get("KERNEL_METHOD_METHOD").$bind(t).$call($)},n&&"method_handle_for"}(o.$singleton_class()),e.cdecl(a,"IGNORED_BACKTRACE_LINE","this backtrace line is ignored")}(o)}(t)},Opal.modules["rspec/core/mocking/with_rspec"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=(e.nil,e.breaker,e.slice,e.module);return e.add_stubs(["$require","$configuration","$setup","$verify","$teardown"]),t.$require("rspec/mocks"),function(t){{var r=n(t,"RSpec");r.$$proto,r.$$scope}!function(t){{var r=n(t,"Core");r.$$proto,r.$$scope}!function(t){var r=n(t,"MockFrameworkAdapter"),$=(r.$$proto,r.$$scope);e.defs(r,"$framework_name",function(){return"rspec"}),e.defs(r,"$configuration",function(){return $.get("RSpec").$$scope.get("Mocks").$configuration()}),e.defn(r,"$setup_mocks_for_rspec",function(){var e=this;return $.get("RSpec").$$scope.get("Mocks").$setup(e)}),e.defn(r,"$verify_mocks_for_rspec",function(){return $.get("RSpec").$$scope.get("Mocks").$verify()}),e.defn(r,"$teardown_mocks_for_rspec",function(){return $.get("RSpec").$$scope.get("Mocks").$teardown()})}(r)}(r)}(t)},Opal.modules["rspec/support/version"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=(e.nil,e.breaker,e.slice,e.module);return function(t){{var r=n(t,"RSpec");r.$$proto,r.$$scope}!function(t){{var r=n(t,"Support");r.$$proto,r.$$scope}!function(t){var r=n(t,"Version"),$=(r.$$proto,r.$$scope);e.cdecl($,"STRING","3.0.0.beta1")}(r)}(r)}(t)},Opal.modules["rspec/support"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=(e.nil,e.breaker,e.slice,e.module);return e.add_stubs(["$require"]),t.$require("rspec/support/version"),function(e){{var t=n(e,"RSpec");t.$$proto,t.$$scope}!function(e){{var t=n(e,"Support");t.$$proto,t.$$scope}}(t)}(t)},Opal.modules["rspec/core/warnings"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=(e.nil,e.breaker,e.slice,e.module),r=e.hash2;return e.add_stubs(["$deprecation","$reporter","$configuration","$merge","$first_non_rspec_line"]),function(t){var $=n(t,"RSpec"),o=($.$$proto,$.$$scope);e.defs($,"$deprecate",function(e,t){return null==t&&(t=r([],{})),o.get("RSpec").$configuration().$reporter().$deprecation(r(["deprecated","call_site"],{deprecated:e,call_site:o.get("CallerFilter").$first_non_rspec_line()}).$merge(t))}),e.defs($,"$warn_deprecation",function(e){return o.get("RSpec").$configuration().$reporter().$deprecation(r(["message"],{message:e}))})}(t)},Opal.modules["rspec/core/shared_context"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="warning";var n=e.top,r=e.nil,$=(e.breaker,e.slice),o=e.module;return e.add_stubs(["$each","$playback_onto","$__shared_context_recordings","$new","$__send__","$to_proc","$block","$method_name","$args","$define_method","$<<","$record","$instance_methods"]),function(n){var a=o(n,"RSpec"),i=(a.$$proto,a.$$scope);!function(n){{var a=o(n,"Core");a.$$proto,a.$$scope}!function(n){var a,i,s,c=o(n,"SharedContext"),u=(c.$$proto,c.$$scope);e.defn(c,"$included",function(e){var t,n,$,o=this;return(t=(n=o.$__shared_context_recordings()).$each,t.$$p=($=function(t){$.$$s||this;return null==t&&(t=r),t.$playback_onto(e)},$.$$s=o,$),t).call(n)}),e.defn(c,"$__shared_context_recordings",function(){var e,t=this;return null==t.__shared_context_recordings&&(t.__shared_context_recordings=r),(e=t.__shared_context_recordings)!==!1&&e!==r?e:t.__shared_context_recordings=[]}),e.cdecl(u,"Recording",(a=(i=u.get("Struct")).$new,a.$$p=(s=function(){var t=s.$$s||this;return e.defn(t,"$playback_onto",function(e){var t,n,r=this;return(t=(n=e).$__send__,t.$$p=r.$block().$to_proc(),t).apply(n,[r.$method_name()].concat(r.$args()))}),r&&"playback_onto"},s.$$s=c,s),a).call(i,"method_name","args","block")),e.defs(c,"$record",function(e){var t,n,o,a=this;return(t=(n=e).$each,t.$$p=(o=function(e){var t,n,a,i=o.$$s||this;return null==e&&(e=r),(t=(n=i).$define_method,t.$$p=(a=function(t){var n,o=a.$$s||this;return t=$.call(arguments,0),n=a.$$p||r,a.$$p=null,o.$__shared_context_recordings()["$<<"](u.get("Recording").$new(e,t,n))},a.$$s=i,a),t).call(n,e)},o.$$s=a,o),t).call(n)}),c.$record(t(t(["describe","context"],u.get("Hooks").$instance_methods(!1)),u.get("MemoizedHelpers").$$scope.get("ClassMethods").$instance_methods(!1)))}(a)}(a),e.cdecl(i,"SharedContext",i.get("Core").$$scope.get("SharedContext"))}(n)},Opal.modules["rspec/core"]=function(e){e.dynamic_require_severity="warning";var t,n,r,$,o,a=e.top,i=e.nil,s=e.breaker,c=e.slice,u=e.module,l=e.klass,_=e.hash2,p=i;return e.add_stubs(["$lambda","$require","$[]","$autoload","$wants_to_quit","$world","$wants_to_quit=","$new","$warn_deprecation","$first_non_rspec_line","$configuration","$clear","$example_groups","$current","$[]=","$=~","$define_method","$to_proc","$method","$expand_path","$fetch","$const_get"]),p=function(){return(t=(n=a.$require_relative)&&!n.$$stub||a["$respond_to_missing?"]("require_relative")?"method":i)===i||t.$$is_boolean&&1!=t?(t=($=a).$lambda,t.$$p=(o=function(e){var t=o.$$s||this;return null==e&&(e=i),t.$require("rspec/"+e)},o.$$s=a,o),t).call($):(t=(n=a).$lambda,t.$$p=(r=function(e){var t=r.$$s||this;return null==e&&(e=i),t.$require("rspec/core/../"+e)},r.$$s=a,r),t).call(n)}(),a.$require("set"),a.$require("time"),a.$require("rbconfig"),p["$[]"]("core/version"),a.$require("rspec/support/caller_filter"),a.$require("rspec/core/warnings"),a.$require("rspec/support/warnings"),p["$[]"]("core/flat_map"),p["$[]"]("core/filter_manager"),p["$[]"]("core/dsl"),p["$[]"]("core/reporter"),p["$[]"]("core/hooks"),p["$[]"]("core/memoized_helpers"),p["$[]"]("core/metadata"),p["$[]"]("core/pending"),p["$[]"]("core/formatters"),p["$[]"]("core/ordering"),p["$[]"]("core/world"),p["$[]"]("core/configuration"),p["$[]"]("core/option_parser"),p["$[]"]("core/configuration_options"),p["$[]"]("core/command_line"),p["$[]"]("core/runner"),p["$[]"]("core/example"),p["$[]"]("core/shared_example_group/collection"),p["$[]"]("core/shared_example_group"),p["$[]"]("core/example_group"),function(r){var $,o,a,p=u(r,"RSpec"),d=(p.$$proto,p.$$scope);p.$autoload("SharedContext","rspec/core/shared_context"),e.defs(p,"$wants_to_quit",function(){var e=this;return e.$world().$wants_to_quit()}),e.defs(p,"$wants_to_quit=",function(e){var t,n,r=this;return t=[e],n=r.$world(),n["$wants_to_quit="].apply(n,t),t[t.length-1]}),e.defs(p,"$world",function(){var e,t=this;return null==t.world&&(t.world=i),(e=t.world)!==!1&&e!==i?e:t.world=d.get("RSpec").$$scope.get("Core").$$scope.get("World").$new()}),e.defs(p,"$world=",function(e){var t=this;return t.world=e}),e.defs(p,"$reset",function(){var e=this;return e.world=i,e.configuration=i}),e.defs(p,"$configuration",$=function(){var e,t=this,n=$.$$p,r=n||i;return null==t.configuration&&(t.configuration=i),$.$$p=null,r!==i&&d.get("RSpec").$warn_deprecation("\n*****************************************************************\nDEPRECATION WARNING\n\n* RSpec.configuration with a block is deprecated and has no effect.\n* please use RSpec.configure with a block instead.\n\nCalled from "+d.get("CallerFilter").$first_non_rspec_line()+"\n*****************************************************************\n\n"),(e=t.configuration)!==!1&&e!==i?e:t.configuration=d.get("RSpec").$$scope.get("Core").$$scope.get("Configuration").$new()}),e.defs(p,"$configuration=",function(e){var t=this;return t.configuration=e}),e.defs(p,"$configure",o=function(){var t,n=this,r=o.$$p,$=r||i;return o.$$p=null,$!==i?(t=e.yield1($,n.$configuration()),t===s?t:t):i}),e.defs(p,"$clear_remaining_example_groups",function(){var e=this;return e.$world().$example_groups().$clear()}),e.defs(p,"$current_example",function(){return d.get("Thread").$current()["$[]"]("_rspec_current_example")}),e.defs(p,"$current_example=",function(e){return d.get("Thread").$current()["$[]="]("_rspec_current_example",e)}),e.defs(p,"$windows_os?",function(){return d.get("RbConfig").$$scope.get("CONFIG")["$[]"]("host_os")["$=~"](/cygwin|mswin|mingw|bccwin|wince|emx/)}),function(r){var $=u(r,"Core"),o=($.$$proto,$.$$scope);
!function(r,$super){function $(){}{var o=$=l(r,$super,"Time",$);o.$$proto,o.$$scope}return function(r){r.$$scope,r.$$proto;return(t=(n=r).$define_method,t.$$p=e.get("Time").$method("now").$to_proc(),t).call(n,"now")}(o.$singleton_class())}($,null),e.defs($,"$path_to_executable",function(){var e,t=this;return null==t.path_to_executable&&(t.path_to_executable=i),(e=t.path_to_executable)!==!1&&e!==i?e:t.path_to_executable=o.get("File").$expand_path("../../../exe/rspec","rspec/core")})}(p),e.cdecl(d,"MODULES_TO_AUTOLOAD",_(["Matchers","Expectations","Mocks"],{Matchers:"rspec/expectations",Expectations:"rspec/expectations",Mocks:"rspec/mocks"})),e.defs(p,"$const_missing",a=function(t){try{{var n,r,$,o=this;a.$$p}return a.$$p=null,o.$require((n=(r=d.get("MODULES_TO_AUTOLOAD")).$fetch,n.$$p=($=function(){var t=$.$$s||this;e.ret(e.find_iter_super_dispatcher(t,"const_missing",$.$$def||a,null).apply(t,c.call(arguments)))},$.$$s=o,$),n).call(r,t)),e.get("RSpec").$const_get(t)}catch(i){if(i===e.returner)return i.$v;throw i}})}(a)},Opal.modules["rspec/version"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=(e.nil,e.breaker,e.slice,e.module);return function(t){{var r=n(t,"RSpec");r.$$proto,r.$$scope}!function(t){var r=n(t,"Version"),$=(r.$$proto,r.$$scope);e.cdecl($,"STRING","3.0.0.beta1")}(r)}(t)},Opal.modules.rspec=function(e){e.dynamic_require_severity="warning";{var t=e.top;e.nil,e.breaker,e.slice}return e.add_stubs(["$require"]),t.$require("rspec/core"),t.$require("rspec/version")},Opal.modules["opal/rspec/requires"]=function(e){e.dynamic_require_severity="warning";{var t=e.top;e.nil,e.breaker,e.slice}return e.add_stubs(["$require"]),t.$require("corelib/dir"),t.$require("thread"),t.$require("set"),t.$require("time"),t.$require("rbconfig"),t.$require("pathname"),t.$require("rspec/core/version"),t.$require("rspec/core/flat_map"),t.$require("rspec/core/filter_manager"),t.$require("rspec/core/dsl"),t.$require("rspec/core/reporter"),t.$require("rspec/core/hooks"),t.$require("rspec/core/memoized_helpers"),t.$require("rspec/core/metadata"),t.$require("rspec/core/pending"),t.$require("rspec/core/formatters"),t.$require("rspec/core/ordering"),t.$require("rspec/core/world"),t.$require("rspec/core/configuration"),t.$require("rspec/core/option_parser"),t.$require("rspec/core/configuration_options"),t.$require("rspec/core/command_line"),t.$require("rspec/core/runner"),t.$require("rspec/core/example"),t.$require("rspec/core/shared_example_group/collection"),t.$require("rspec/core/shared_example_group"),t.$require("rspec/core/example_group"),t.$require("rspec/core/mocking/with_rspec"),t.$require("rspec/support"),t.$require("rspec/core"),t.$require("rspec/expectations"),t.$require("rspec/mocks"),t.$require("rspec"),t.$require("rspec/core/formatters/base_text_formatter"),t.$require("rspec/core/formatters/html_printer"),t.$require("rspec/matchers/pretty"),t.$require("rspec/matchers/built_in/base_matcher"),t.$require("rspec/matchers/built_in/be")},Opal.modules["opal/rspec/fixes"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.dynamic_require_severity="warning";var n=e.top,r=e,$=e.nil,o=(e.breaker,e.slice,e.klass),a=e.module;return e.add_stubs(["$to_s","$gsub","$tr","$downcase","$empty?","$description","$upcase","$[]","$lstrip","$const_defined?","$next","$__id__","$original_method","$expect","$subject"]),function(t,$super){function n(){}{var r=n=o(t,$super,"CallerFilter",n);r.$$proto,r.$$scope}return e.defs(r,"$first_non_rspec_line",function(){return""}),$&&"first_non_rspec_line"}(r.get("RSpec"),null),function(t){{var n=a(t,"RSpec");n.$$proto,n.$$scope}!function(t){{var n=a(t,"Matchers");n.$$proto,n.$$scope}!function(t){{var n=a(t,"Pretty");n.$$proto,n.$$scope}e.defn(n,"$underscore",function(e){var t=$;return t=e.$to_s(),t=t.$gsub(/([A-Z]+)([A-Z][a-z])/,"\\1_\\2"),t=t.$gsub(/([a-z\d])([A-Z])/,"\\1_\\2"),t=t.$tr("-","_"),t=t.$downcase()})}(n)}(n)}(n),function(n){{var r=a(n,"ExampleGroups");r.$$proto,r.$$scope}e.defs(r,"$base_name_for",function(e){var n,r,o,a=this,i=$;return(n=e.$description()["$empty?"]())===$||n.$$is_boolean&&1!=n?(i=t(" ",e.$description()),i=(n=(r=i).$gsub,n.$$p=(o=function(e){o.$$s||this;return null==e&&(e=$),e["$[]"](1).$upcase()},o.$$s=a,o),n).call(r,/[^0-9a-zA-Z]+([0-9a-zA-Z])/),i=i.$lstrip(),i=i.$gsub(/\W/,""),i=i.$gsub(/^([^A-Z]|$)/,"Nested\\1")):"Anonymous"}),e.defs(r,"$disambiguate",function(e,n){var r,o;if((r=n["$const_defined?"](e))===$||r.$$is_boolean&&1!=r)return e;for(e=t(e,"_2");(o=n["$const_defined?"](e))!==$&&(!o.$$is_boolean||1==o);)e=e.$next();return e})}(r.get("RSpec")),function(e,$super){function t(){}{var n=t=o(e,$super,"Space",t),r=n.$$proto;n.$$scope}return r.$id_for=function(e){return e.$__id__()},$&&"id_for"}(r.get("RSpec").$$scope.get("Mocks"),null),function(e,$super){function t(){}{var n=t=o(e,$super,"MethodDouble",t),r=n.$$proto;n.$$scope}return r.original_method=r.method_stasher=$,r["$save_original_method!"]=function(){var e,t=this;return(e=t.original_method)!==!1&&e!==$?e:t.original_method=t.method_stasher.$original_method()},$&&"save_original_method!"}(r.get("RSpec").$$scope.get("Mocks"),null),function(t){{var n=a(t,"RSpec");n.$$proto,n.$$scope}!function(t){{var n=a(t,"Core");n.$$proto,n.$$scope}!function(t){{var n=a(t,"MemoizedHelpers");n.$$proto,n.$$scope}e.defn(n,"$is_expected",function(){var e=this;return e.$expect(e.$subject())})}(n)}(n)}(n)},Opal.modules["opal/rspec/text_formatter"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$empty?","$failed_examples","$puts","$each_with_index","$dump_failure","$short_padding","$next","$full_description","$dump_failure_info","$[]","$execution_result","$to_s","$name","$class","$red","$long_padding","$each","$split","$message","$==","$green","$finish_with_code"]),function(t){{var o=r(t,"Opal");o.$$proto,o.$$scope}!function(t){{var o=r(t,"RSpec");o.$$proto,o.$$scope}!function(t,$super){function r(){}{var o=r=$(t,$super,"TextFormatter",r),a=o.$$proto;o.$$scope}return a.$dump_failures=function(){var e,t,r,$=this;return(e=$.$failed_examples()["$empty?"]())===n||e.$$is_boolean&&1!=e?($.$puts("\nFailures:"),(e=(t=$.$failed_examples()).$each_with_index,e.$$p=(r=function(e,t){var $=r.$$s||this;return null==e&&(e=n),null==t&&(t=n),$.$puts("\n"),$.$dump_failure(e,t)},r.$$s=$,r),e).call(t)):$.$puts("\nFinished")},a.$dump_failure=function(e,t){var n=this;return n.$puts(""+n.$short_padding()+t.$next()+") "+e.$full_description()),n.$dump_failure_info(e)},a.$dump_failure_info=function(e){var t,r,$,o=this,a=n,i=n;return a=e.$execution_result()["$[]"]("exception"),i=a.$class().$name().$to_s(),o.$red(""+o.$long_padding()+i+":"),(t=(r=a.$message().$to_s().$split("\n")).$each,t.$$p=($=function(e){var t=$.$$s||this;return null==e&&(e=n),t.$red(""+t.$long_padding()+"  "+e)},$.$$s=o,$),t).call(r)},a.$dump_summary=function(e,t,r,$){var o=this,a=n;return o.duration=e,o.example_count=t,o.failure_count=r,o.pending_count=$,a="\n"+t+" examples, "+r+" failures (time taken: "+e+")",r["$=="](0)?(o.$green(a),o.$finish_with_code(0)):(o.$red(a),o.$finish_with_code(1))},a.$finish_with_code=function(t){"undefined"!=typeof phantom?phantom.exit(t):e.global.OPAL_SPEC_CODE=t},a.$green=function(e){return console.log("[32m"+e+"[0m")},a.$red=function(e){return console.log("[31m"+e+"[0m")},a.$short_padding=function(){return"  "},a.$long_padding=function(){return"     "},n&&"long_padding"}(o,e.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("BaseFormatter"))}(o)}(t)},Opal.modules["opal/rspec/browser_formatter"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.dynamic_require_severity="warning";var $=e.top,o=e.nil,a=(e.breaker,e.slice),i=e.module,s=e.klass,c=e.hash2;return e.add_stubs(["$require","$include","$new","$<<","$id","$append_to_head","$size","$parent_groups","$description","$style","$class_name=","$sprintf","$[]","$execution_result","$to_s","$name","$class","$short_padding","$each","$long_padding","$split","$message","$h","$html=","$add_scripts","$attr_reader","$===","$__send__","$gsub","$native"]),$.$require("erb"),function($){{var u=i($,"Opal");u.$$proto,u.$$scope}!function($){{var u=i($,"RSpec");u.$$proto,u.$$scope}!function($,$super){function i(){}var u,l,_,p,d,f,h=i=s($,$super,"BrowserFormatter",i),m=h.$$proto,g=h.$$scope;return m.rspec_group=m.rspec_dl=m.rspec_dt=m.rspec_results=m.example_group_failed=o,h.$include(g.get("ERB").$$scope.get("Util")),e.cdecl(g,"CSS_STYLES",e.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("HtmlPrinter").$$scope.get("GLOBAL_STYLES")),m.$start=u=function(){var n=a.call(arguments,0),r=this,$=u.$$p,i=o,s=o,l=o;return u.$$p=null,e.find_super_dispatcher(r,"start",u,$).apply(r,n),i=g.get("Element").$new(document.body),i["$<<"](g.get("Element").$new("div",c(["html"],{html:g.get("REPORT_TEMPLATE")}))),r.rspec_results=g.get("Element").$id("rspec-results"),s=t(g.get("CSS_STYLES"),"\n body { padding: 0; margin: 0 }"),l=g.get("Element").$new("style",c(["type","css_text"],{type:"text/css",css_text:s})),l.$append_to_head()},m.$example_group_started=l=function(t){var $=a.call(arguments,0),i=this,s=l.$$p,u=o;return l.$$p=null,e.find_super_dispatcher(i,"example_group_started",l,s).apply(i,$),i.example_group_failed=!1,u=t.$parent_groups().$size(),i.rspec_group=g.get("Element").$new("div",c(["class_name"],{class_name:"example_group passed"})),i.rspec_dl=g.get("Element").$new("dl"),i.rspec_dt=g.get("Element").$new("dt",c(["class_name","text"],{class_name:"passed",text:t.$description()})),i.rspec_group["$<<"](i.rspec_dl),i.rspec_dl["$<<"](i.rspec_dt),i.rspec_dl.$style("margin-left",""+n(r(u,2),15)+"px"),i.rspec_results["$<<"](i.rspec_group)},m.$example_group_finished=_=function(){var t,n,r=a.call(arguments,0),$=this,i=_.$$p;return _.$$p=null,e.find_super_dispatcher($,"example_group_finished",_,i).apply($,r),(t=$.example_group_failed)===o||t.$$is_boolean&&1!=t?o:(t=["example_group failed"],n=$.rspec_group,n["$class_name="].apply(n,t),t[t.length-1],t=["failed"],n=$.rspec_dt,n["$class_name="].apply(n,t),t[t.length-1],t=["failed"],n=g.get("Element").$id("rspec-header"),n["$class_name="].apply(n,t),t[t.length-1])},m.$example_failed=p=function(n){var r,$,i,s=a.call(arguments,0),u=this,l=p.$$p,_=o,d=o,f=o,h=o;return p.$$p=null,e.find_super_dispatcher(u,"example_failed",p,l).apply(u,s),_=u.$sprintf("%0.5f",n.$execution_result()["$[]"]("run_time")),d=n.$execution_result()["$[]"]("exception"),f=d.$class().$name().$to_s(),h=""+u.$short_padding()+f+":\n",(r=($=d.$message().$to_s().$split("\n")).$each,r.$$p=(i=function(e){var n=i.$$s||this;return null==e&&(e=o),h=t(h,""+n.$long_padding()+"  "+e+"\n")},i.$$s=u,i),r).call($),u.example_group_failed=!0,u.rspec_dl["$<<"](g.get("Element").$new("dd",c(["class_name","html"],{class_name:"example failed",html:'          <span class="failed_spec_name">'+u.$h(n.$description())+'</span>\n          <span class="duration">'+_+'s</span>\n          <div class="failure">\n            <div class="message"><pre>'+u.$h(h)+"</pre></div>\n          </div>\n"})))},m.$example_passed=d=function(t){var n=a.call(arguments,0),r=this,$=d.$$p,i=o;return d.$$p=null,e.find_super_dispatcher(r,"example_passed",d,$).apply(r,n),i=r.$sprintf("%0.5f",t.$execution_result()["$[]"]("run_time")),r.rspec_dl["$<<"](g.get("Element").$new("dd",c(["class_name","html"],{class_name:"example passed",html:'          <span class="passed_spec_name">'+r.$h(t.$description())+'</span>\n          <span class="duration">'+i+"s</span>\n"})))},m.$dump_summary=f=function(t,n,r){var $,i,s=a.call(arguments,0),c=this,u=f.$$p,l=o;return f.$$p=null,e.find_super_dispatcher(c,"dump_summary",f,u).apply(c,s),l=""+n+" examples, "+r+" failures",$=[l],i=g.get("Element").$id("totals"),i["$html="].apply(i,$),$[$.length-1],t="Finished in <strong>"+c.$sprintf("%.5f",t)+" seconds</strong>",$=[t],i=g.get("Element").$id("duration"),i["$html="].apply(i,$),$[$.length-1],c.$add_scripts()},m.$add_scripts=function(){var t=o;return t=e.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("HtmlPrinter").$$scope.get("GLOBAL_SCRIPTS"),window.eval(t)},m.$short_padding=function(){return"  "},m.$long_padding=function(){return"     "},function(t,$super){function n(){}var r=n=s(t,$super,"Element",n),$=r.$$proto,a=r.$$scope;return $["native"]=o,r.$attr_reader("native"),e.defs(r,"$id",function(e){var t=this;return t.$new(document.getElementById(e))}),$.$initialize=function(e,t){var n,r,$,i=this;return null==t&&(t=c([],{})),i["native"]=(n=a.get("String")["$==="](e))===o||n.$$is_boolean&&1!=n?e:document.createElement(e),(n=(r=t).$each,n.$$p=($=function(e,t){var n=$.$$s||this;return null==e&&(e=o),null==t&&(t=o),n.$__send__(""+e+"=",t)},$.$$s=i,$),n).call(r)},$["$class_name="]=function(e){var t=this;return t["native"].className=e},$["$html="]=function(e){var t=this;return t["native"].innerHTML=e},$["$text="]=function(e){var t,n,r=this;return t=[e.$gsub(/</,"&lt").$gsub(/>/,"&gt")],n=r,n["$html="].apply(n,t),t[t.length-1]},$["$type="]=function(e){var t=this;return t["native"].type=e},$.$append=function(e){var t=this;return t["native"].appendChild(e.$native())},e.defn(r,"$<<",$.$append),$["$css_text="]=function(e){var t=this;t["native"].styleSheet?t["native"].styleSheet.cssText=e:t["native"].appendChild(document.createTextNode(e))},$.$style=function(e,t){var n=this;return n["native"].style[e]=t},$.$append_to_head=function(){var e=this;return document.getElementsByTagName("head")[0].appendChild(e["native"])},o&&"append_to_head"}(h,null),e.cdecl(g,"REPORT_TEMPLATE",'<div class="rspec-report">\n\n  <div id="rspec-header">\n    <div id="label">\n      <h1>RSpec Code Examples</h1>\n    </div>\n\n    <div id="display-filters">\n      <input id="passed_checkbox"  name="passed_checkbox"  type="checkbox" checked="checked" onchange="apply_filters()" value="1" /> <label for="passed_checkbox">Passed</label>\n      <input id="failed_checkbox"  name="failed_checkbox"  type="checkbox" checked="checked" onchange="apply_filters()" value="2" /> <label for="failed_checkbox">Failed</label>\n      <input id="pending_checkbox" name="pending_checkbox" type="checkbox" checked="checked" onchange="apply_filters()" value="3" /> <label for="pending_checkbox">Pending</label>\n    </div>\n\n    <div id="summary">\n      <p id="totals">&#160;</p>\n      <p id="duration">&#160;</p>\n    </div>\n  </div>\n\n  <div id="rspec-results" class="results">\n  </div>\n</div>\n')}(u,e.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("BaseFormatter"))}(u)}($)},Opal.modules["opal/rspec/runner"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass,o=e.hash2,a=e.gvars;return e.add_stubs(["$phantom?","$browser?","$run","$new","$world","$configuration","$error_stream=","$output_stream","$output_stream=","$start","$run_examples","$run_async_examples","$finish","$all?","$map","$example_groups","$reporter","$example_count","$run_hook"]),function(t){{var i=r(t,"Opal");i.$$proto,i.$$scope}!function(t){{var i=r(t,"RSpec");i.$$proto,i.$$scope}!function(t,$super){function r(){}var i,s=r=$(t,$super,"Runner",r),c=s.$$proto,u=s.$$scope;return c.configuration=c.world=c.reporter=n,function(e){{var t=e.$$scope;e.$$proto}return e.$$proto["$browser?"]=function(){return"undefined"!=typeof document},e.$$proto["$phantom?"]=function(){return"undefined"!=typeof phantom||"undefined"!=typeof OPAL_SPEC_PHANTOM},e.$$proto.$default_formatter=function(){var e,r=this;return t.get((e=r["$phantom?"]())===n||e.$$is_boolean&&1!=e?"BrowserFormatter":"TextFormatter")},e.$$proto.$autorun=function(){var e,r=this;return(e=r["$browser?"]())===n||e.$$is_boolean&&1!=e?t.get("Runner").$new().$run():setTimeout(function(){t.get("Runner").$new().$run()},0)},n&&"autorun"}(s.$singleton_class()),c.$initialize=function(t){var n=this;return null==t&&(t=o([],{})),n.options=t,n.world=e.get("RSpec").$world(),n.configuration=e.get("RSpec").$configuration()},c.$run=function(e,t){var r,$,o,i=this;return null==a.stdout&&(a.stdout=n),null==e&&(e=a.stdout),null==t&&(t=a.stdout),r=[e],$=i.configuration,$["$error_stream="].apply($,r),r[r.length-1],r=i.configuration,($=r.$output_stream())!==!1&&$!==n?$:r["$output_stream="](t),i.$start(),i.$run_examples(),(r=($=i).$run_async_examples,r.$$p=(o=function(){var e=o.$$s||this;return e.$finish()},o.$$s=i,o),r).call($)},c.$run_examples=function(){var e,t,r,$=this;return(e=(t=$.world.$example_groups()).$map,e.$$p=(r=function(e){var t=r.$$s||this;return null==t.reporter&&(t.reporter=n),null==e&&(e=n),e.$run(t.reporter)},r.$$s=$,r),e).call(t)["$all?"]()},c.$run_async_examples=i=function(){var e=this,t=i.$$p,r=t||n;return i.$$p=null,u.get("AsyncRunner").$new(e,e.reporter,r).$run()},c.$start=function(){var e=this;return e.reporter=e.configuration.$reporter(),e.reporter.$start(e.world.$example_count()),e.configuration.$run_hook("before","suite")},c.$finish=function(){var e=this;return e.configuration.$run_hook("after","suite"),e.reporter.$finish()},n&&"finish"}(i,null)}(i)}(t)},Opal.modules["opal/rspec/async"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass;return e.add_stubs(["$build_hash_from","$register","$extend","$continue_async","$async","$to_proc","$delay","$clone","$examples","$run_next_example","$empty?","$finish","$run_example","$pop","$example_group","$example_group_started","$new","$run","$example_finished","$example_group_finished","$call","$include","$<<","$current_example=","$instance_variable_set","$start","$run_before_each","$instance_exec","$set_exception","$finished?","$async_example_finished","$[]","$options","$run_after_each","$each","$instance_variables","$assign_generated_description"]),function(t){{var a=$(t,"Opal");a.$$proto,a.$$scope}!function(t){{var a=$(t,"RSpec");a.$$proto,a.$$scope}!function(t){var o,a,i,s,c=$(t,"AsyncHelpers"),u=(c.$$proto,c.$$scope);!function(t){var o,a=$(t,"ClassMethods"),i=(a.$$proto,a.$$scope);e.defn(a,"$async",o=function(t,$){var a=this,s=o.$$p,c=s||n,u=n;return $=r.call(arguments,1),o.$$p=null,u=e.get("RSpec").$$scope.get("Core").$$scope.get("Metadata").$build_hash_from($),i.get("Opal").$$scope.get("RSpec").$$scope.get("AsyncExample").$register(a,t,u,c)})}(c),e.defs(c,"$included",function(e){return e.$extend(u.get("ClassMethods"))}),e.defn(c,"$async",o=function(){var e=this,t=o.$$p,r=t||n;return null==e.example&&(e.example=n),o.$$p=null,e.example.$continue_async(r)}),e.defn(c,"$delay",a=function(e){var t=this,r=a.$$p,$=r||n;return a.$$p=null,setTimeout($,1e3*e),t}),e.defn(c,"$run_async",i=function(){var e,t,r=this,$=i.$$p,o=$||n;return i.$$p=null,(e=(t=r).$async,e.$$p=o.$to_proc(),e).call(t)}),e.defn(c,"$set_timeout",s=function(e){var t,$,o=this,a=s.$$p,i=a||n;return e=r.call(arguments,0),s.$$p=null,(t=($=o).$delay,t.$$p=i.$to_proc(),t).apply($,[].concat(e))})}(a),function(e,$super){function t(){}var r=t=o(e,$super,"AsyncRunner",t),$=r.$$proto,a=r.$$scope;return $.examples=$.reporter=$.finish_block=n,$.$initialize=function(e,t,n){var r=this;return r.runner=e,r.reporter=t,r.finish_block=n},$.$run=function(){var e=this;return e.examples=a.get("AsyncExample").$examples().$clone(),e.$run_next_example()},$.$run_next_example=function(){var e,t=this;return(e=t.examples["$empty?"]())===n||e.$$is_boolean&&1!=e?t.$run_example(t.examples.$pop()):t.$finish()},$.$run_example=function(e){var t,r,$,o=this,a=n,i=n;return a=e.$example_group(),o.reporter.$example_group_started(a),i=a.$new(),(t=(r=e).$run,t.$$p=($=function(){var t=$.$$s||this;return t.$example_finished(e)},$.$$s=o,$),t).call(r,i,o.reporter)},$.$example_finished=function(e){var t=this;return t.reporter.$example_group_finished(e.$example_group()),t.$run_next_example()},$.$finish=function(){var e=this;return e.finish_block.$call()},n&&"finish"}(a,null),function(t,$super){function $(){}var a,i=$=o(t,$super,"AsyncExample",$),s=i.$$proto,c=i.$$scope;return s.example_block=s.example_group_instance=s.finished=s.reporter=s.after_run_block=n,i.$include(c.get("AsyncHelpers")),e.defs(i,"$register",function(e){var t,n=this;return e=r.call(arguments,0),n.$examples()["$<<"]((t=n).$new.apply(t,[].concat(e)))}),e.defs(i,"$examples",function(){var e,t=this;return null==t.examples&&(t.examples=n),(e=t.examples)!==!1&&e!==n?e:t.examples=[]}),s.$run=a=function(t,r){var $,o,i,s,u,l=this,_=a.$$p,p=_||n,d=n,f=n;a.$$p=null,l.example_group_instance=t,l.reporter=r,l.after_run_block=p,l.finished=!1,d=!0,$=[l],o=e.get("RSpec"),o["$current_example="].apply(o,$),$[$.length-1],t.$instance_variable_set("@example",l),l.$start(r);try{l.$run_before_each(),($=(o=l.example_group_instance).$instance_exec,$.$$p=l.example_block.$to_proc(),$).call(o,l)}catch(h){if(!e.rescue(h,[c.get("Exception")]))throw h;f=h,l.$set_exception(f),d=!1}return d!==!1&&d!==n?($=(i=l).$delay,$.$$p=(s=function(){var e,t=s.$$s||this;return(e=t["$finished?"]())===n||e.$$is_boolean&&1!=e?(t.$set_exception(c.get("RuntimeError").$new("timeout")),t.$async_example_finished()):n},s.$$s=l,s),$).call(i,(u=l.$options()["$[]"]("timeout"))!==!1&&u!==n?u:10):l.$async_example_finished()},s.$continue_async=function(t){var r,$=this,o=n;if((r=$["$finished?"]())!==n&&(!r.$$is_boolean||1==r))return n;try{t.$call()}catch(a){if(!e.rescue(a,[c.get("Exception")]))throw a;o=a,$.$set_exception(o)}return $.$async_example_finished()},s["$finished?"]=function(){var e=this;return e.finished},s.$async_example_finished=function(){var t,r,$,o,a=this,i=n;a.finished=!0;try{try{a.$run_after_each()}catch(s){if(!e.rescue(s,[c.get("Exception")]))throw s;i=s,a.$set_exception(i)}}finally{(t=(r=a.example_group_instance.$instance_variables()).$each,t.$$p=($=function(e){var t=$.$$s||this;return null==t.example_group_instance&&(t.example_group_instance=n),null==e&&(e=n),t.example_group_instance.$instance_variable_set(e,n)},$.$$s=a,$),t).call(r),a.example_group_instance=n;try{a.$assign_generated_description()}catch(s){if(!e.rescue(s,[c.get("Exception")]))throw s;i=s,a.$set_exception(i,"while assigning the example description")}}return a.$finish(a.reporter),t=[n],o=e.get("RSpec"),o["$current_example="].apply(o,t),t[t.length-1],a.after_run_block.$call()},n&&"async_example_finished"}(a,e.get("RSpec").$$scope.get("Core").$$scope.get("Example"))}(a)}(t)},Opal.modules["opal/rspec"]=function(e){e.dynamic_require_severity="warning";var t,n,r,$=e.top,o=e,a=e.nil,i=(e.breaker,e.slice,e.klass);return e.add_stubs(["$require","$configure","$formatter=","$default_formatter","$include","$expect_with","$syntax="]),function(e,$super){function t(){}{var n=t=i(e,$super,"MiniTest",t);n.$$proto,n.$$scope}return function(e,$super){function t(){}{var n=t=i(e,$super,"Unit",t);n.$$proto,n.$$scope}return a}(n,null)}($,null),e.cdecl(o,"Test",o.get("MiniTest")),$.$require("opal/rspec/requires"),$.$require("opal/rspec/fixes"),$.$require("opal/rspec/text_formatter"),$.$require("opal/rspec/browser_formatter"),$.$require("opal/rspec/runner"),$.$require("opal/rspec/async"),(t=(n=o.get("RSpec")).$configure,t.$$p=(r=function(e){var t,n,$,i=r.$$s||this;return null==e&&(e=a),t=[o.get("Opal").$$scope.get("RSpec").$$scope.get("Runner").$default_formatter()],n=e,n["$formatter="].apply(n,t),t[t.length-1],e.$include(o.get("Opal").$$scope.get("RSpec").$$scope.get("AsyncHelpers")),(t=(n=e).$expect_with,t.$$p=($=function(e){{var t,n;$.$$s||this}return null==e&&(e=a),t=[["should","expect"]],n=e,n["$syntax="].apply(n,t),t[t.length-1]},$.$$s=i,$),t).call(n,"rspec")},r.$$s=$,r),t).call(n)},Opal.modules["opal-rspec"]=function(e){e.dynamic_require_severity="warning";{var t=e.top;e.nil,e.breaker,e.slice}return e.add_stubs(["$require"]),t.$require("opal/rspec")},Opal.modules["rspec_results.js"]=function(e){e.dynamic_require_severity="warning";{var t=e.top;e.nil,e.breaker,e.slice}return e.add_stubs(["$require"]),t.$require("opal"),t.$require("opal-rspec")};