(function(){function e(e,t,n){var r=function(){},$=r.prototype=new e.constructor;t.$$scope=$,t.$$base_module=e.base,$.base=t,$.constructor=r,$.constants=[],n&&(t.$$orig_scope=e,e[n]=e.constructor[n]=t,e.constants.push(n))}function t(e,t){var r=i(null,t,e);return n(e,r)}function n(e,t){function n(){}var $=function(){};$.prototype=e.constructor.prototype,n.prototype=new $;var o=new n;return r(o,n,e,t.prototype),o.$$alloc=t,o.$$proto.$$class=o,o}function r(e,t,n,r){e.$$id=S++,e.$$proto=r,e.constructor=t,e.$$is_class=!0,e.$$super=n,e.$$parent=n,e.$$methods=[],e.$$inc=[]}function $(){function e(){}var t=function(){};t.prototype=O.constructor.prototype,e.prototype=new t;var n=new e,$={};return r(n,e,O,$),n.$$is_mod=!0,n.$$dep=[],n}function o(e){var t=new b.Class.$$alloc;return t.$$class=b.Class,t.$$proto=e.constructor.prototype,t.$$is_singleton=!0,t.$$inc=[],t.$$methods=[],t.$$scope=e.$$scope,e.$$meta=t}function a(e){var t=e.$$class,n="#<Class:#<"+t.$$name+":"+t.$$id+">>",r=function(){},$=b.boot(t,r);return $.$$name=n,$.$$proto=e,$.$$class=t.$$class,$.$$scope=t.$$scope,$.$$parent=t,e.$$meta=$}function i(e,t,n){if(n){var r=function(){};r.prototype=n.$$proto||n.prototype,e&&(r.displayName=e),t.prototype=new r}return t.prototype.constructor=t,t}function s(e,t,n){var $=function(){};$.prototype=n.prototype;var o=function(){};o.prototype=new $,o.displayName="#<Class:"+e+">";var a=new o;return r(a,o,n,t.prototype),a.$$alloc=t,a.$$name=e,t.prototype.$$class=a,b[e]=a,b.constants.push(e),a}function c(t,r){var $=n(R,r);$.$$name=t,e(b,$,t),y.push($);for(var o=E.$$methods.concat(R.$$methods),a=0,i=o.length;i>a;a++){var s=o[a];r.prototype[s]=R.$$proto[s]}return l(r.prototype),$}function l(e){b.stub_subscribers.push(e)}function u(e,t){var n=_(t);e[t]=n}function _(e){function t(){return this.$method_missing.$$p=t.$$p,t.$$p=null,this.$method_missing.apply(this,[e.slice(1)].concat(k.call(arguments)))}return t.$$stub=!0,t}function p(e,t,n){var r=e.$$meta||e.$$class;for(t="$"+t;r&&r.$$proto[t]!==n;)r=r.$$parent;if(!r)throw new Error("could not find current class for super()");for(r=r.$$parent;r;){var $=r.$$proto[t];if($&&$!==n)break;r=r.$$parent}return r.$$proto}function d(e,t){E.$$methods.push(e);for(var n=0,r=y.length;r>n;n++)y[n].$$proto[e]=t}function f(){}function h(){}function m(){}function g(){}function v(){}if("undefined"!=typeof this.Opal)return console.warn("Opal already loaded. Loading twice can cause troubles, please fix your setup."),this.Opal;var b=this.Opal={},y=b.bridged_classes=[],x=function(){};x.prototype=b,b.constructor=x,b.constants=[],b.global=this;var w=b.hasOwnProperty,k=b.slice=Array.prototype.slice,S=0;b.uid=function(){return S++},b.cvars={},b.gvars={},b.get=function(e){var t=this[e];return null==t?this.base.$const_missing(e):t},b.create_scope=e,b.klass=function(n,r,$,o){n.$$is_class||(n=n.$$class),null===r&&(r=R);var a=n.$$scope[$];if(w.call(n.$$scope,$)&&a.$$orig_scope===n.$$scope){if(!a.$$is_class)throw b.TypeError.$new($+" is not a class");if(r!==a.$$super&&r!==R)throw b.TypeError.$new("superclass mismatch for class "+$)}else{if("function"==typeof r)return c($,r);a=t(r,o),a.$$name=$,e(n.$$scope,a,$),n[$]=n.$$scope[$]=a,r!==R&&r!==E&&b.donate_constants(r,a),r.$inherited&&r.$inherited(a)}return a},b.boot=t,b.module=function(t,n){var r;if(t.$$is_class||(t=t.$$class),w.call(t.$$scope,n)){if(r=t.$$scope[n],!r.$$is_mod&&r!==R)throw b.TypeError.$new(n+" is not a module")}else r=$(),r.$$name=n,e(t.$$scope,r,n),t[n]=t.$$scope[n]=r;return r},b.get_singleton_class=function(e){return e.$$meta?e.$$meta:e.$$is_class?o(e):a(e)},b.append_features=function(e,t){for(var n=t.$$inc,r=0,$=n.length;$>r;r++)if(n[r]===e)return;n.push(e),e.$$dep.push(t);var o={$$name:e.$$name,$$proto:e.$$proto,$$parent:t.$$parent,$$module:e,$$iclass:!0};t.$$parent=o;for(var a=e.$$proto,i=t.$$proto,s=e.$$methods,c=0,l=s.length;l>c;c++){var u,_=s[c];(!i.hasOwnProperty(_)||(u=i[_]).$$donated||u.$$stub)&&(i[_]=a[_],i[_].$$donated=!0)}t.$$dep&&b.donate(t,s.slice(),!0),b.donate_constants(e,t)},b.casgn=function(e,t,n){var r=e.$$scope;return n.$$is_class&&n.$$name===A&&(n.$$name=t),n.$$is_class&&(n.$$base_module=e),r.constants.push(t),r[t]=n},b.cdecl=function(e,t,n){return e.constants.push(t),e[t]=n},b.cget=function(e,t){null==t&&(t=e,e=b.Object);var n=e;for(t=t.split("::");0!==t.length;)n=n.$const_get(t.shift());return n},b.donate_constants=function(e,t){for(var n=e.$$scope.constants,r=t.$$scope,$=r.constants,o=0,a=n.length;a>o;o++)$.push(n[o]),r[n[o]]=e.$$scope[n[o]]},b.add_stubs=function(e){for(var t,n=b.stub_subscribers,r=0,$=e.length;$>r;r++)for(var o=e[r],a=_(o),i=0;i<n.length;i++)t=n[i],o in t||(t[o]=a)},b.stub_subscribers=[f.prototype],b.add_stub_for=u,b.ac=function(e,t,n,r){var $=(n.$$is_class?n.$$name+".":n.$$class.$$name+"#")+r,o="["+$+"] wrong number of arguments("+e+" for "+t+")";throw b.ArgumentError.$new(o)},b.find_super_dispatcher=function(e,t,n,r,$){var o;return o=$?e.$$is_class?$.$$super:e.$$class.$$proto:e.$$is_class?e.$$super:p(e,t,n),o=o["$"+t],o.$$p=r,o},b.find_iter_super_dispatcher=function(e,t,n,r,$){return n.$$def?b.find_super_dispatcher(e,n.$$jsid,n,r,$):b.find_super_dispatcher(e,t,n,r,$)},b.ret=function(e){throw b.returner.$v=e,b.returner},b.yield1=function(e,t){if("function"!=typeof e)throw b.LocalJumpError.$new("no block given");return e.length>1&&t.$$is_array?e.apply(null,t):e(t)},b.yieldX=function(e,t){if("function"!=typeof e)throw b.LocalJumpError.$new("no block given");return e.length>1&&1==t.length&&t[0].$$is_array?e.apply(null,t[0]):(t.$$is_array||(t=k.call(t)),e.apply(null,t))},b.rescue=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];if(r.$$is_array){var $=b.rescue(e,r);if($)return $}else if(r["$==="](e))return r}return null},b.is_a=function(e,t){if(e.$$meta===t)return!0;for(var n=e.$$class;n;){if(n===t)return!0;for(var r=0,$=n.$$inc.length;$>r;r++)if(n.$$inc[r]==t)return!0;n=n.$$super}return!1},b.to_ary=function(e){return e.$$is_array?e:e.$to_ary&&!e.$to_ary.$$stub?e.$to_ary():[e]},b.send=function(e,t){var n=k.call(arguments,2),r=e["$"+t];return r?r.apply(e,n):e.$method_missing.apply(e,[t].concat(n))},b.block_send=function(e,t,n){var r=k.call(arguments,3),$=e["$"+t];return $?($.$$p=n,$.apply(e,r)):e.$method_missing.apply(e,[t].concat(r))},b.donate=function(e,t){var n=e.$$methods,r=e.$$dep;if(e.$$methods=n.concat(t),r)for(var $=0,o=r.length;o>$;$++){for(var a=r[$],i=a.$$proto,s=0,c=t.length;c>s;s++){var l=t[s];i[l]=e.$$proto[l],i[l].$$donated=!0}a.$$dep&&b.donate(a,t,!0)}},b.defn=function(e,t,n){return e.$$is_mod?(e.$$proto[t]=n,b.donate(e,[t])):e.$$is_class?(e.$$proto[t]=n,e===E?d(t,n):e===R&&b.donate(e,[t])):e[t]=n,A},b.defs=function(e,t,n){e.$$is_class||e.$$is_mod?e.constructor.prototype[t]=n:e[t]=n},b.hash=function(){if(1==arguments.length&&arguments[0].$$class==b.Hash)return arguments[0];var e,t,n,r,$=new b.Hash.$$alloc,o=[],a={};if($.map=a,$.keys=o,1==arguments.length)if(arguments[0].$$is_array)for(var i=arguments[0],s=0,c=i.length;c>s;s++){var l=i[s];if(2!==l.length)throw b.ArgumentError.$new("value not of length 2: "+l.$inspect());e=l[0],t=l[1],r=e.$hash(),null==a[r]&&o.push(e),a[r]=t}else{t=arguments[0];for(e in t)r=e.$hash(),a[r]=t[r],o.push(e)}else{if(n=arguments.length,n%2!==0)throw b.ArgumentError.$new("odd number of arguments for Hash");for(var u=0;n>u;u++)e=arguments[u],t=arguments[++u],r=e.$hash(),null==a[r]&&o.push(e),a[r]=t}return $},b.hash2=function(e,t){var n=new b.Hash.$$alloc;return n.keys=e,n.map=t,n},b.range=function(e,t,n){var r=new b.Range.$$alloc;return r.begin=e,r.end=t,r.exclude=n,r},function(e){function t(e){return a[e]?!1:(o.push(e),a[e]=!0,!0)}function n(e){var t,n,r=[],$="/";"."!==s&&(e=s.replace(/\/*$/,"/")+e),t=e.split($);for(var o=0,a=t.length;a>o;o++)n=t[o],""!=n&&(".."===n?r.pop():r.push(n));return r.join($)}function r(n){t(n);var r=i[n];if(r)r(e);else{var $=e.dynamic_require_severity||"warning",o="cannot load such file -- "+n;"error"===$?e.LoadError?e.LoadError.$new(o):function(){throw o}():"warning"===$&&console.warn("WARNING: LoadError: "+o)}return!0}function $(e){return a[e]?!1:r(e)}var o=["corelib/runtime.js"],a={"corelib/runtime.js":!0},i={},s=".";e.modules=i,e.loaded_features=o,e.normalize_loadable_path=n,e.mark_as_loaded=t,e.load=r,e.require=$}(b);var E,R,O,M;i("BasicObject",f),i("Object",h,f),i("Module",g,h),i("Class",m,g),E=s("BasicObject",f,m),R=s("Object",h,E.constructor),O=s("Module",g,R.constructor),M=s("Class",m,O.constructor),E.$$class=M,R.$$class=M,O.$$class=M,M.$$class=M,E.$$super=null,R.$$super=E,O.$$super=R,M.$$super=O,E.$$parent=null,R.$$parent=E,O.$$parent=R,M.$$parent=O,R.$$dep=y,b.base=R,E.$$scope=R.$$scope=b,E.$$orig_scope=R.$$orig_scope=b,b.Kernel=R,O.$$scope=R.$$scope,O.$$orig_scope=R.$$orig_scope,M.$$scope=R.$$scope,M.$$orig_scope=R.$$orig_scope,R.$$proto.toString=function(){return this.$to_s()},R.$$proto.$require=b.require,b.top=new R.$$alloc;var q=b.uid();b.klass(R,R,"NilClass",v);var A=b.nil=new v;A.$$id=q,A.call=A.apply=function(){throw b.LocalJumpError.$new("no block given")},b.breaker=new Error("unexpected break"),b.returner=new Error("unexpected return"),c("Array",Array),c("Boolean",Boolean),c("Numeric",Number),c("String",String),c("Proc",Function),c("Exception",Error),c("Regexp",RegExp),c("Time",Date),TypeError.$$super=Error}).call(this),"undefined"!=typeof global&&(global.Opal=this.Opal,Opal.global=global),"undefined"!=typeof window&&(window.Opal=this.Opal,Opal.global=window),Opal.mark_as_loaded(Opal.normalize_loadable_path("corelib/runtime")),Opal.modules["corelib/helpers"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module;return e.add_stubs(["$new","$class","$===","$respond_to?","$raise","$type_error","$__send__","$coerce_to","$nil?","$<=>","$inspect"]),function(t){var o=$(t,"Opal"),a=(o.$$proto,o.$$scope);e.defs(o,"$type_error",function(e,t,r,$){var o,i;return null==r&&(r=n),null==$&&($=n),a.get("TypeError").$new((o=(i=r!==!1&&r!==n)?$:i)===n||o.$$is_boolean&&1!=o?"no implicit conversion of "+e.$class()+" into "+t:"can't convert "+e.$class()+" into "+t+" ("+e.$class()+"#"+r+" gives "+$.$class())}),e.defs(o,"$coerce_to",function(e,t,r){var $,o=this;return($=t["$==="](e))===n||$.$$is_boolean&&1!=$?((($=e["$respond_to?"](r))===n||$.$$is_boolean&&1!=$)&&o.$raise(o.$type_error(e,t)),e.$__send__(r)):e}),e.defs(o,"$coerce_to!",function(e,t,r){var $,o=this,a=n;return a=o.$coerce_to(e,t,r),(($=t["$==="](a))===n||$.$$is_boolean&&1!=$)&&o.$raise(o.$type_error(e,t,r,a)),a}),e.defs(o,"$coerce_to?",function(e,t,r){var $,o=this,a=n;return($=e["$respond_to?"](r))===n||$.$$is_boolean&&1!=$?n:(a=o.$coerce_to(e,t,r),($=a["$nil?"]())===n||$.$$is_boolean&&1!=$?((($=t["$==="](a))===n||$.$$is_boolean&&1!=$)&&o.$raise(o.$type_error(e,t,r,a)),a):n)}),e.defs(o,"$try_convert",function(e,t,r){var $;return($=t["$==="](e))===n||$.$$is_boolean&&1!=$?($=e["$respond_to?"](r))===n||$.$$is_boolean&&1!=$?n:e.$__send__(r):e}),e.defs(o,"$compare",function(e,t){var r,$=this,o=n;return o=e["$<=>"](t),(r=o===n)===n||r.$$is_boolean&&1!=r||$.$raise(a.get("ArgumentError"),"comparison of "+e.$class()+" with "+t.$class()+" failed"),o}),e.defs(o,"$destructure",function(e){return 1==e.length?e[0]:e.$$is_array?e:r.call(e)}),e.defs(o,"$respond_to?",function(e,t){return null!=e&&e.$$class?e["$respond_to?"](t):!1}),e.defs(o,"$inspect",function(e){return void 0===e?"undefined":null===e?"null":e.$$class?e.$inspect():e.toString()})}(t)},Opal.modules["corelib/module"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.klass;return e.add_stubs(["$attr_reader","$attr_writer","$=~","$raise","$const_missing","$const_get","$to_str","$to_proc","$append_features","$included","$name","$new","$to_s","$__id__"]),function(t,$super){function o(){}var a,i,s,c,l=o=$(t,$super,"Module",o),u=l.$$proto,_=l.$$scope;return e.defs(l,"$new",a=function(){function t(){}var r=a.$$p,$=r||n;a.$$p=null;var o=e.boot(e.Module,t);if(o.$$name=n,o.$$class=e.Module,o.$$dep=[],o.$$is_mod=!0,o.$$proto={},e.create_scope(e.Module.$$scope,o),$!==n){var i=$.$$s;$.$$s=null,$.call(o),$.$$s=i}return o}),u["$==="]=function(t){var r,$=this;return(r=null==t)===n||r.$$is_boolean&&1!=r?e.is_a(t,$):!1},u["$<"]=function(e){for(var t=this,n=t;n;){if(n===e)return!0;n=n.$$parent}return!1},u.$alias_method=function(t,n){var r=this;return r.$$proto["$"+t]=r.$$proto["$"+n],r.$$methods&&e.donate(r,["$"+t]),r},u.$alias_native=function(e,t){var n=this;return null==t&&(t=e),n.$$proto["$"+e]=n.$$proto[t]},u.$ancestors=function(){for(var e=this,t=e,n=[];t;)n.push(t),n=n.concat(t.$$inc),t=t.$$super;return n},u.$append_features=function(t){var n=this;return e.append_features(n,t),n},u.$attr_accessor=function(e){var t,n,$=this;return e=r.call(arguments,0),(t=$).$attr_reader.apply(t,[].concat(e)),(n=$).$attr_writer.apply(n,[].concat(e))},u.$attr_reader=function(t){var $=this;t=r.call(arguments,0);for(var o=$.$$proto,a=$,i=0,s=t.length;s>i;i++)!function(t){o[t]=n;var r=function(){return this[t]};a.$$is_singleton?o.constructor.prototype["$"+t]=r:(o["$"+t]=r,e.donate($,["$"+t]))}(t[i]);return n},u.$attr_writer=function(t){var $=this;t=r.call(arguments,0);for(var o=$.$$proto,a=$,i=0,s=t.length;s>i;i++)!function(t){o[t]=n;var r=function(e){return this[t]=e};a.$$is_singleton?o.constructor.prototype["$"+t+"="]=r:(o["$"+t+"="]=r,e.donate($,["$"+t+"="]))}(t[i]);return n},e.defn(l,"$attr",u.$attr_accessor),u.$autoload=function(e,t){var r,$=this;return(r=$.$$autoload)||(r=$.$$autoload={}),r[e]=t,n},u.$constants=function(){var e=this;return e.$$scope.constants},u["$const_defined?"]=function(t,r){var $,o=this;if(null==r&&(r=!0),(($=t["$=~"](/^[A-Z]\w*$/))===n||$.$$is_boolean&&1!=$)&&o.$raise(_.get("NameError"),"wrong constant name "+t),scopes=[o.$$scope],r||o===e.Object)for(var a=o.$$super;a!==e.BasicObject;)scopes.push(a.$$scope),a=a.$$super;for(var i=0,s=scopes.length;s>i;i++)if(scopes[i].hasOwnProperty(t))return!0;return!1},u.$const_get=function(t,r){var $,o=this;null==r&&(r=!0),(($=t["$=~"](/^[A-Z]\w*$/))===n||$.$$is_boolean&&1!=$)&&o.$raise(_.get("NameError"),"wrong constant name "+t);var a=[o.$$scope];if(r||o==e.Object)for(var i=o.$$super;i!==e.BasicObject;)a.push(i.$$scope),i=i.$$super;for(var s=0,c=a.length;c>s;s++)if(a[s].hasOwnProperty(t))return a[s][t];return o.$const_missing(t)},u.$const_missing=function(e){var t=this;if(t.$$autoload){var n=t.$$autoload[e];if(n)return t.$require(n),t.$const_get(e)}return t.$raise(_.get("NameError"),"uninitialized constant "+t+"::"+e)},u.$const_set=function(t,r){var $,o=this;(($=t["$=~"](/^[A-Z]\w*$/))===n||$.$$is_boolean&&1!=$)&&o.$raise(_.get("NameError"),"wrong constant name "+t);try{t=t.$to_str()}catch(a){o.$raise(_.get("TypeError"),"conversion with #to_str failed")}return e.casgn(o,t,r),r},u.$define_method=i=function(t,r){var $=this,o=i.$$p,a=o||n;if(i.$$p=null,r&&(a=r.$to_proc()),a===n)throw new Error("no block given");var s="$"+t;return a.$$jsid=t,a.$$s=null,a.$$def=a,$.$$proto[s]=a,e.donate($,[s]),t},u.$remove_method=function(e){{var t=this,n="$"+e;t.$$proto[n]}return delete t.$$proto[n],t},u.$include=function(e){var t=this;e=r.call(arguments,0);for(var n=e.length-1;n>=0;n--){var $=e[n];$!==t&&($.$append_features(t),$.$included(t))}return t},u["$include?"]=function(e){for(var t=this,n=t;n;n=n.parent)for(var r=0;r!=n.$$inc.length;r++){var $=n.$$inc[r];if(e===$)return!0}return!1},u.$instance_method=function(e){var t=this,n=t.$$proto["$"+e];return(!n||n.$$stub)&&t.$raise(_.get("NameError"),"undefined method `"+e+"' for class `"+t.$name()+"'"),_.get("UnboundMethod").$new(t,n,e)},u.$instance_methods=function(t){var n=this;null==t&&(t=!1);var r=[],$=n.$$proto;for(var o in $)if("$"!==!o.charAt(0)&&"function"==typeof $[o]&&!$[o].$$stub){if(!n.$$is_mod){if(n!==e.BasicObject&&$[o]===e.BasicObject.$$proto[o])continue;if(!t&&!$.hasOwnProperty(o))continue;if(!t&&$[o].$$donated)continue}r.push(o.substr(1))}return r},u.$included=function(){return n},u.$extended=function(){return n},u.$module_eval=s=function(){var e=this,t=s.$$p,r=t||n;s.$$p=null,r!==!1&&r!==n||e.$raise(_.get("ArgumentError"),"no block given");var $,o=r.$$s;return r.$$s=null,$=r.call(e),r.$$s=o,$},e.defn(l,"$class_eval",u.$module_eval),u.$module_exec=c=function(){var e=this,t=c.$$p,$=t||n;if(c.$$p=null,$===n)throw new Error("no block given");var o,a=$.$$s;return $.$$s=null,o=$.apply(e,r.call(arguments)),$.$$s=a,o},e.defn(l,"$class_exec",u.$module_exec),u["$method_defined?"]=function(e){var t=this,n=t.$$proto["$"+e];return!!n&&!n.$$stub},u.$module_function=function(e){var t=this;e=r.call(arguments,0);for(var n=0,$=e.length;$>n;n++){var o=e[n],a=t.$$proto["$"+o];t.constructor.prototype["$"+o]=a}return t},u.$name=function(){var t=this;if(t.$$full_name)return t.$$full_name;for(var r=[],$=t;$;){if($.$$name===n)return 0===r.length?n:r.join("::");if(r.unshift($.$$name),$=$.$$base_module,$===e.Object)break}return 0===r.length?n:t.$$full_name=r.join("::")},u.$public=function(){return n},e.defn(l,"$private",u.$public),e.defn(l,"$protected",u.$public),e.defn(l,"$nesting",u.$public),u.$private_class_method=function(e){var t=this;return t["$"+e]||n},e.defn(l,"$public_class_method",u.$private_class_method),u["$private_method_defined?"]=function(){return!1},u.$private_constant=function(){return n},e.defn(l,"$protected_method_defined?",u["$private_method_defined?"]),e.defn(l,"$public_instance_methods",u.$instance_methods),e.defn(l,"$public_method_defined?",u["$method_defined?"]),u.$remove_class_variable=function(){return n},u.$remove_const=function(e){var t=this,n=t.$$scope[e];return delete t.$$scope[e],n},u.$to_s=function(){var e,t=this;return(e=t.$name())!==!1&&e!==n?e:"#<"+(t.$$is_mod?"Module":"Class")+":0x"+t.$__id__().$to_s(16)+">"},u.$undef_method=function(t){var n=this;return e.add_stub_for(n.$$proto,"$"+t),n},n&&"undef_method"}(t,null)},Opal.modules["corelib/class"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.klass;return e.add_stubs(["$require","$raise","$allocate"]),t.$require("corelib/module"),function(t,$super){function o(){}var a,i,s=o=$(t,$super,"Class",o),c=s.$$proto,l=s.$$scope;return e.defs(s,"$new",a=function(t){function r(){}var $=this,o=a.$$p,i=o||n;null==t&&(t=l.get("Object")),a.$$p=null,(!t.$$is_class||t.$$is_mod)&&$.$raise(l.get("TypeError"),"superclass must be a Class");var s=e.boot(t,r);if(s.$$name=n,s.$$parent=t,e.create_scope(t.$$scope,s),t.$inherited(s),i!==n){var c=i.$$s;i.$$s=null,i.call(s),i.$$s=c}return s}),c.$allocate=function(){var t=this,n=new t.$$alloc;return n.$$id=e.uid(),n},c.$inherited=function(){return n},c.$new=i=function(e){var t=this,$=i.$$p,o=$||n;e=r.call(arguments,0),i.$$p=null;var a=t.$allocate();return a.$initialize.$$p=o,a.$initialize.apply(a,e),a},c.$superclass=function(){var e=this;return e.$$super||n},n&&"superclass"}(t,null)},Opal.modules["corelib/basic_object"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.klass;return e.add_stubs(["$raise","$inspect"]),function(t,$super){function o(){}var a,i,s,c,l=o=$(t,$super,"BasicObject",o),u=l.$$proto,_=l.$$scope;return e.defn(l,"$initialize",function(){return n}),e.defn(l,"$==",function(e){var t=this;return t===e}),e.defn(l,"$__id__",function(){var t=this;return t.$$id||(t.$$id=e.uid())}),e.defn(l,"$__send__",a=function(e,t){var $=this,o=a.$$p,i=o||n;t=r.call(arguments,1),a.$$p=null;var s=$["$"+e];return s?(i!==n&&(s.$$p=i),s.apply($,t)):(i!==n&&($.$method_missing.$$p=i),$.$method_missing.apply($,[e].concat(t)))}),e.defn(l,"$!",function(){return!1}),e.defn(l,"$eql?",u["$=="]),e.defn(l,"$equal?",u["$=="]),e.defn(l,"$instance_eval",i=function(){var e=this,t=i.$$p,r=t||n;i.$$p=null,r!==!1&&r!==n||_.get("Kernel").$raise(_.get("ArgumentError"),"no block given");var $,o=r.$$s;return r.$$s=null,$=r.call(e,e),r.$$s=o,$}),e.defn(l,"$instance_exec",s=function(e){var t=this,$=s.$$p,o=$||n;e=r.call(arguments,0),s.$$p=null,o!==!1&&o!==n||_.get("Kernel").$raise(_.get("ArgumentError"),"no block given");var a,i=o.$$s;return o.$$s=null,a=o.apply(t,e),o.$$s=i,a}),e.defn(l,"$method_missing",c=function(e,t){{var $,o=this;c.$$p}return t=r.call(arguments,1),c.$$p=null,_.get("Kernel").$raise(_.get("NoMethodError"),function(){return($=o.$inspect&&!o.$inspect.$$stub)===n||$.$$is_boolean&&1!=$?"undefined method `"+e+"' for "+o.$$class:"undefined method `"+e+"' for "+o.$inspect()+":"+o.$$class}())}),n&&"method_missing"}(t,null)},Opal.modules["corelib/kernel"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=e.breaker,$=e.slice,o=e.module,a=e.gvars;return e.add_stubs(["$raise","$inspect","$==","$class","$new","$respond_to?","$to_ary","$to_a","$allocate","$copy_instance_variables","$initialize_clone","$initialize_copy","$singleton_class","$initialize_dup","$for","$to_proc","$append_features","$extended","$to_i","$to_s","$to_f","$*","$__id__","$===","$empty?","$ArgumentError","$nan?","$infinite?","$to_int","$>","$length","$print","$format","$puts","$each","$<=","$[]","$nil?","$is_a?","$rand","$coerce_to","$respond_to_missing?","$expand_path","$join","$start_with?"]),function(t){var i,s,c,l,u,_,p,d,f=o(t,"Kernel"),h=f.$$proto,m=f.$$scope;h.$method_missing=i=function(e,t){{var n=this;i.$$p}return t=$.call(arguments,1),i.$$p=null,n.$raise(m.get("NoMethodError"),"undefined method `"+e+"' for "+n.$inspect())},h["$=~"]=function(){return!1},h["$==="]=function(e){var t=this;return t["$=="](e)},h["$<=>"]=function(e){var t=this;return t["$=="](e)?0:n},h.$method=function(e){var t=this,n=t["$"+e];return(!n||n.$$stub)&&t.$raise(m.get("NameError"),"undefined method `"+e+"' for class `"+t.$class()+"'"),m.get("Method").$new(t,n,e)},h.$methods=function(t){var r=this;null==t&&(t=!0);var $=[];for(var o in r)if("$"==o[0]&&"function"==typeof r[o]){if((0==t||t===n)&&!e.hasOwnProperty.call(r,o))continue;void 0===r[o].$$stub&&$.push(o.substr(1))}return $},h.$Array=s=function(e,t){s.$$p;return t=$.call(arguments,1),s.$$p=null,null==e||e===n?[]:e["$respond_to?"]("to_ary")?e.$to_ary():e["$respond_to?"]("to_a")?e.$to_a():[e]},h.$caller=function(){return[]},h.$class=function(){var e=this;return e.$$class},h.$copy_instance_variables=function(e){var t=this;for(var n in e)"$"!==n.charAt(0)&&(t[n]=e[n])},h.$clone=function(){var e=this,t=n;return t=e.$class().$allocate(),t.$copy_instance_variables(e),t.$initialize_clone(e),t},h.$initialize_clone=function(e){var t=this;return t.$initialize_copy(e)},h.$define_singleton_method=c=function(e){var t=this,r=c.$$p,$=r||n;c.$$p=null,$!==!1&&$!==n||t.$raise(m.get("ArgumentError"),"tried to create Proc object without a block");var o="$"+e;return $.$$jsid=e,$.$$s=null,$.$$def=$,t.$singleton_class().$$proto[o]=$,t},h.$dup=function(){var e=this,t=n;return t=e.$class().$allocate(),t.$copy_instance_variables(e),t.$initialize_dup(e),t},h.$initialize_dup=function(e){var t=this;return t.$initialize_copy(e)},h.$enum_for=l=function(e,t){var r,o,a=this,i=l.$$p,s=i||n;return t=$.call(arguments,1),null==e&&(e="each"),l.$$p=null,(r=(o=m.get("Enumerator")).$for,r.$$p=s.$to_proc(),r).apply(o,[a,e].concat(t))},e.defn(f,"$to_enum",h.$enum_for),h["$equal?"]=function(e){var t=this;return t===e},h.$extend=function(e){var t=this;e=$.call(arguments,0);for(var n=t.$singleton_class(),r=e.length-1;r>=0;r--){var o=e[r];o.$append_features(n),o.$extended(t)}return t},h.$format=function(e,t){t=$.call(arguments,1);var n=0;return e.replace(/%(\d+\$)?([-+ 0]*)(\d*|\*(\d+\$)?)(?:\.(\d*|\*(\d+\$)?))?([cspdiubBoxXfgeEG])|(%%)/g,function(e,r,$,o,a,i,s,c,l){if(l)return"%";var u,_,p,d=-1!="diubBoxX".indexOf(c),f=-1!="eEfgG".indexOf(c),h="";if(void 0===o)u=void 0;else if("*"==o.charAt(0)){var m=n++;a&&(m=parseInt(a,10)-1),u=t[m].$to_i()}else u=parseInt(o,10);if(i)if("*"==i.charAt(0)){var g=n++;s&&(g=parseInt(s,10)-1),_=t[g].$to_i()}else _=parseInt(i,10);else _=f?6:void 0;switch(r&&(n=parseInt(r,10)-1),c){case"c":p=t[n],e=p.$$is_string?p.charAt(0):String.fromCharCode(p.$to_i());break;case"s":e=t[n].$to_s(),void 0!==_&&(e=e.substr(0,_));break;case"p":e=t[n].$inspect(),void 0!==_&&(e=e.substr(0,_));break;case"d":case"i":case"u":e=t[n].$to_i().toString();break;case"b":case"B":e=t[n].$to_i().toString(2);break;case"o":e=t[n].$to_i().toString(8);break;case"x":case"X":e=t[n].$to_i().toString(16);break;case"e":case"E":e=t[n].$to_f().toExponential(_);break;case"f":e=t[n].$to_f().toFixed(_);break;case"g":case"G":e=t[n].$to_f().toPrecision(_)}n++,(d||f)&&("-"==e.charAt(0)?(h="-",e=e.substr(1)):-1!=$.indexOf("+")?h="+":-1!=$.indexOf(" ")&&(h=" ")),d&&void 0!==_&&e.length<_&&(e="0"["$*"](_-e.length)+e);var v=h.length+e.length;if(void 0!==u&&u>v)if(-1!=$.indexOf("-"))e+=" "["$*"](u-v);else{-1!=$.indexOf("0")?e="0"["$*"](u-v)+e:h=" "["$*"](u-v)+h}var b=h+e;return-1!="XEG".indexOf(c)&&(b=b.toUpperCase()),b})},h.$freeze=function(){var e=this;return e.___frozen___=!0,e},h["$frozen?"]=function(){var e,t=this;return null==t.___frozen___&&(t.___frozen___=n),(e=t.___frozen___)!==!1&&e!==n?e:!1},h.$hash=function(){var e=this;return[e.$$class.$$name,e.$$class.$__id__(),e.$__id__()].join(":")},h.$initialize_copy=function(){return n},h.$inspect=function(){var e=this;return e.$to_s()},h["$instance_of?"]=function(e){var t=this;return t.$$class===e},h["$instance_variable_defined?"]=function(t){var n=this;return e.hasOwnProperty.call(n,t.substr(1))},h.$instance_variable_get=function(e){var t=this,r=t[e.substr(1)];return null==r?n:r},h.$instance_variable_set=function(e,t){var n=this;return n[e.substr(1)]=t},h.$instance_variables=function(){var e=this,t=[];for(var n in e)"$"!==n.charAt(0)&&"$$class"!==n&&"$$id"!==n&&t.push("@"+n);return t},h.$Integer=function(e,t){var r,$,o=this,a=n;return null==t&&(t=n),(r=m.get("String")["$==="](e))===n||r.$$is_boolean&&1!=r?(t!==!1&&t!==n&&o.$raise(o.$ArgumentError("base is only valid for String values")),function(){return a=e,m.get("Integer")["$==="](a)?e:m.get("Float")["$==="](a)?((r=($=e["$nan?"]())!==!1&&$!==n?$:e["$infinite?"]())===n||r.$$is_boolean&&1!=r||o.$raise(m.get("FloatDomainError"),"unable to coerce "+e+" to Integer"),e.$to_int()):m.get("NilClass")["$==="](a)?o.$raise(m.get("TypeError"),"can't convert nil into Integer"):(r=e["$respond_to?"]("to_int"))===n||r.$$is_boolean&&1!=r?(r=e["$respond_to?"]("to_i"))===n||r.$$is_boolean&&1!=r?o.$raise(m.get("TypeError"),"can't convert "+e.$class()+" into Integer"):e.$to_i():e.$to_int()}()):((r=e["$empty?"]())===n||r.$$is_boolean&&1!=r||o.$raise(m.get("ArgumentError"),"invalid value for Integer: (empty string)"),parseInt(e,(r=t)!==!1&&r!==n?r:void 0))},h.$Float=function(e){var t,r=this;return(t=m.get("String")["$==="](e))===n||t.$$is_boolean&&1!=t?(t=e["$respond_to?"]("to_f"))===n||t.$$is_boolean&&1!=t?r.$raise(m.get("TypeError"),"can't convert "+e.$class()+" into Float"):e.$to_f():parseFloat(e)},h["$is_a?"]=function(t){var n=this;return e.is_a(n,t)},e.defn(f,"$kind_of?",h["$is_a?"]),h.$lambda=u=function(){var e=u.$$p,t=e||n;return u.$$p=null,t.$$is_lambda=!0,t},h.$load=function(t){return e.load(e.normalize_loadable_path(t))},h.$loop=_=function(){var e=this,t=_.$$p,$=t||n;for(_.$$p=null;;)if($()===r)return r.$v;return e},h["$nil?"]=function(){return!1},e.defn(f,"$object_id",h.$__id__),h.$printf=function(e){var t,r=this;return e=$.call(arguments,0),e.$length()["$>"](0)&&r.$print((t=r).$format.apply(t,[].concat(e))),n},h.$private_methods=function(){return[]},e.defn(f,"$private_instance_methods",h.$private_methods),h.$proc=p=function(){var e=this,t=p.$$p,r=t||n;return p.$$p=null,r!==!1&&r!==n||e.$raise(m.get("ArgumentError"),"tried to create Proc object without a block"),r.$$is_lambda=!1,r},h.$puts=function(e){var t;return null==a.stdout&&(a.stdout=n),e=$.call(arguments,0),(t=a.stdout).$puts.apply(t,[].concat(e))},h.$p=function(e){var t,r,o,i=this;return e=$.call(arguments,0),(t=(r=e).$each,t.$$p=(o=function(e){o.$$s||this;return null==a.stdout&&(a.stdout=n),null==e&&(e=n),a.stdout.$puts(e.$inspect())},o.$$s=i,o),t).call(r),e.$length()["$<="](1)?e["$[]"](0):e},h.$print=function(e){var t;return null==a.stdout&&(a.stdout=n),e=$.call(arguments,0),(t=a.stdout).$print.apply(t,[].concat(e))},h.$warn=function(e){var t,r;return null==a.VERBOSE&&(a.VERBOSE=n),null==a.stderr&&(a.stderr=n),e=$.call(arguments,0),(t=(r=a.VERBOSE["$nil?"]())!==!1&&r!==n?r:e["$empty?"]())===n||t.$$is_boolean&&1!=t?(t=a.stderr).$puts.apply(t,[].concat(e)):n},h.$raise=function(e,t){throw null==a["!"]&&(a["!"]=n),null==e&&a["!"]?e=a["!"]:e.$$is_string?e=m.get("RuntimeError").$new(e):e["$is_a?"](m.get("Exception"))||(e=e.$new(t)),a["!"]=e,e},e.defn(f,"$fail",h.$raise),h.$rand=function(e){var t=this;if(void 0===e)return Math.random();if(e.$$is_range){var n=e.$to_a();return n[t.$rand(n.length)]}return Math.floor(Math.random()*Math.abs(m.get("Opal").$coerce_to(e,m.get("Integer"),"to_int")))},h["$respond_to?"]=function(e,t){var r,$=this;if(null==t&&(t=!1),(r=$["$respond_to_missing?"](e))!==n&&(!r.$$is_boolean||1==r))return!0;var o=$["$"+e];return"function"!=typeof o||o.$$stub?!1:!0},h["$respond_to_missing?"]=function(){return!1},h.$require=function(t){return e.require(e.normalize_loadable_path(t))},h.$require_relative=function(t){return t=m.get("File").$expand_path(m.get("File").$join(e.current_file,"..",t)),e.require(e.normalize_loadable_path(t))},h.$require_tree=function(t){t=m.get("File").$expand_path(t);for(var r in e.modules)r["$start_with?"](t)&&e.require(r);return n},e.defn(f,"$send",h.$__send__),e.defn(f,"$public_send",h.$__send__),h.$singleton_class=function(){var t=this;return e.get_singleton_class(t)},e.defn(f,"$sprintf",h.$format),e.defn(f,"$srand",h.$rand),h.$String=function(e){return String(e)},h.$taint=function(){var e=this;return e},h["$tainted?"]=function(){return!1},h.$tap=d=function(){var t=this,$=d.$$p,o=$||n;return d.$$p=null,e.yield1(o,t)===r?r.$v:t},h.$to_proc=function(){var e=this;return e},h.$to_s=function(){var e=this;return"#<"+e.$class()+":0x"+e.$__id__().$to_s(16)+">"},e.defn(f,"$untaint",h.$taint),e.donate(f,["$method_missing","$=~","$===","$<=>","$method","$methods","$Array","$caller","$class","$copy_instance_variables","$clone","$initialize_clone","$define_singleton_method","$dup","$initialize_dup","$enum_for","$to_enum","$equal?","$extend","$format","$freeze","$frozen?","$hash","$initialize_copy","$inspect","$instance_of?","$instance_variable_defined?","$instance_variable_get","$instance_variable_set","$instance_variables","$Integer","$Float","$is_a?","$kind_of?","$lambda","$load","$loop","$nil?","$object_id","$printf","$private_methods","$private_instance_methods","$proc","$puts","$p","$print","$warn","$raise","$fail","$rand","$respond_to?","$respond_to_missing?","$require","$require_relative","$require_tree","$send","$public_send","$singleton_class","$sprintf","$srand","$String","$taint","$tainted?","$tap","$to_proc","$to_s","$untaint"])}(t)},Opal.modules["corelib/nil_class"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e,r=e.nil,$=(e.breaker,e.slice,e.klass);return e.add_stubs(["$raise"]),function(t,$super){function n(){}var o=n=$(t,$super,"NilClass",n),a=o.$$proto,i=o.$$scope;return a["$!"]=function(){return!0},a["$&"]=function(){return!1},a["$|"]=function(e){return e!==!1&&e!==r},a["$^"]=function(e){return e!==!1&&e!==r},a["$=="]=function(e){return e===r},a.$dup=function(){var e=this;return e.$raise(i.get("TypeError"))},a.$inspect=function(){return"nil"},a["$nil?"]=function(){return!0},a.$singleton_class=function(){return i.get("NilClass")},a.$to_a=function(){return[]},a.$to_h=function(){return e.hash()},a.$to_i=function(){return 0},e.defn(o,"$to_f",a.$to_i),a.$to_s=function(){return""},r&&"to_s"}(t,null),e.cdecl(n,"NIL",r)},Opal.modules["corelib/boolean"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e,r=e.nil,$=(e.breaker,e.slice,e.klass);return e.add_stubs(["$undef_method"]),function(t,$super){function n(){}{var o=n=$(t,$super,"Boolean",n),a=o.$$proto;o.$$scope}return a.$$is_boolean=!0,function(e){e.$$scope,e.$$proto;return e.$undef_method("new")}(o.$singleton_class()),a["$!"]=function(){var e=this;return 1!=e},a["$&"]=function(e){var t=this;return 1==t?e!==!1&&e!==r:!1},a["$|"]=function(e){var t=this;return 1==t?!0:e!==!1&&e!==r},a["$^"]=function(e){var t=this;return 1==t?e===!1||e===r:e!==!1&&e!==r},a["$=="]=function(e){var t=this;return 1==t===e.valueOf()},e.defn(o,"$equal?",a["$=="]),e.defn(o,"$singleton_class",a.$class),a.$to_s=function(){var e=this;return 1==e?"true":"false"},r&&"to_s"}(t,null),e.cdecl(n,"TrueClass",n.get("Boolean")),e.cdecl(n,"FalseClass",n.get("Boolean")),e.cdecl(n,"TRUE",!0),e.cdecl(n,"FALSE",!1)},Opal.modules["corelib/error"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e,r=e.nil,$=(e.breaker,e.slice,e.klass),o=e.module;return e.add_stubs(["$attr_reader","$class"]),function(t,$super){function n(){}{var o=n=$(t,$super,"Exception",n),a=o.$$proto;
o.$$scope}return a.message=r,o.$attr_reader("message"),e.defs(o,"$new",function(e){var t=this;null==e&&(e="");var n=new t.$$alloc(e);return Error.captureStackTrace&&Error.captureStackTrace(n,t.$$alloc),n.name=t.$$name,n.$initialize(e),n}),a.$initialize=function(e){var t=this;return t.message=e},a.$backtrace=function(){var e=this,t=e.stack;return"string"==typeof t?t.split("\n").slice(0,15):t?t.slice(0,15):[]},a.$inspect=function(){var e=this;return"#<"+e.$class()+": '"+e.message+"'>"},e.defn(o,"$to_s",a.$message)}(t,null),function(e,$super){function t(){}{var n=t=$(e,$super,"ScriptError",t);n.$$proto,n.$$scope}return r}(t,n.get("Exception")),function(e,$super){function t(){}{var n=t=$(e,$super,"SyntaxError",t);n.$$proto,n.$$scope}return r}(t,n.get("ScriptError")),function(e,$super){function t(){}{var n=t=$(e,$super,"LoadError",t);n.$$proto,n.$$scope}return r}(t,n.get("ScriptError")),function(e,$super){function t(){}{var n=t=$(e,$super,"NotImplementedError",t);n.$$proto,n.$$scope}return r}(t,n.get("ScriptError")),function(e,$super){function t(){}{var n=t=$(e,$super,"SystemExit",t);n.$$proto,n.$$scope}return r}(t,n.get("Exception")),function(e,$super){function t(){}{var n=t=$(e,$super,"StandardError",t);n.$$proto,n.$$scope}return r}(t,n.get("Exception")),function(e,$super){function t(){}{var n=t=$(e,$super,"NameError",t);n.$$proto,n.$$scope}return r}(t,n.get("StandardError")),function(e,$super){function t(){}{var n=t=$(e,$super,"NoMethodError",t);n.$$proto,n.$$scope}return r}(t,n.get("NameError")),function(e,$super){function t(){}{var n=t=$(e,$super,"RuntimeError",t);n.$$proto,n.$$scope}return r}(t,n.get("StandardError")),function(e,$super){function t(){}{var n=t=$(e,$super,"LocalJumpError",t);n.$$proto,n.$$scope}return r}(t,n.get("StandardError")),function(e,$super){function t(){}{var n=t=$(e,$super,"TypeError",t);n.$$proto,n.$$scope}return r}(t,n.get("StandardError")),function(e,$super){function t(){}{var n=t=$(e,$super,"ArgumentError",t);n.$$proto,n.$$scope}return r}(t,n.get("StandardError")),function(e,$super){function t(){}{var n=t=$(e,$super,"IndexError",t);n.$$proto,n.$$scope}return r}(t,n.get("StandardError")),function(e,$super){function t(){}{var n=t=$(e,$super,"StopIteration",t);n.$$proto,n.$$scope}return r}(t,n.get("IndexError")),function(e,$super){function t(){}{var n=t=$(e,$super,"KeyError",t);n.$$proto,n.$$scope}return r}(t,n.get("IndexError")),function(e,$super){function t(){}{var n=t=$(e,$super,"RangeError",t);n.$$proto,n.$$scope}return r}(t,n.get("StandardError")),function(e,$super){function t(){}{var n=t=$(e,$super,"FloatDomainError",t);n.$$proto,n.$$scope}return r}(t,n.get("RangeError")),function(e,$super){function t(){}{var n=t=$(e,$super,"IOError",t);n.$$proto,n.$$scope}return r}(t,n.get("StandardError")),function(e,$super){function t(){}{var n=t=$(e,$super,"SystemCallError",t);n.$$proto,n.$$scope}return r}(t,n.get("StandardError")),function(t){var n=o(t,"Errno"),a=(n.$$proto,n.$$scope);!function(t,$super){function n(){}{var o,a=n=$(t,$super,"EINVAL",n);a.$$proto,a.$$scope}return e.defs(a,"$new",o=function(){{var t=this;o.$$p}return o.$$p=null,e.find_super_dispatcher(t,"new",o,null,n).apply(t,["Invalid argument"])}),r&&"new"}(n,a.get("SystemCallError"))}(t)},Opal.modules["corelib/regexp"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.klass,o=e.gvars;return e.add_stubs(["$nil?","$[]","$respond_to?","$to_str","$to_s","$coerce_to","$new","$raise","$class","$call"]),function(t,$super){function a(){}var i,s=a=$(t,$super,"Regexp",a),c=s.$$proto,l=s.$$scope;return c.$$is_regexp=!0,function(e){e.$$scope,e.$$proto;return e.$$proto.$escape=function(e){return e.replace(/([-[\]/{}()*+?.^$\\| ])/g,"\\$1").replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r").replace(/[\f]/g,"\\f").replace(/[\t]/g,"\\t")},e.$$proto.$last_match=function(e){var t;return null==o["~"]&&(o["~"]=n),null==e&&(e=n),(t=e["$nil?"]())===n||t.$$is_boolean&&1!=t?o["~"]["$[]"](e):o["~"]},e.$$proto.$quote=e.$$proto.$escape,e.$$proto.$union=function(e){return e=r.call(arguments,0),new RegExp(e.join(""))},e.$$proto.$new=function(e,t){return new RegExp(e,t)},n&&"new"}(s.$singleton_class()),c["$=="]=function(e){var t=this;return e.constructor==RegExp&&t.toString()===e.toString()},c["$==="]=function(e){var t=this;return!e.$$is_string&&e["$respond_to?"]("to_str")&&(e=e.$to_str()),e.$$is_string?t.test(e):!1},c["$=~"]=function(e){var t,r=this;if((t=e===n)!==n&&(!t.$$is_boolean||1==t))return o["~"]=n,n;e=l.get("Opal").$coerce_to(e,l.get("String"),"to_str").$to_s();var $=r;$.global?$.lastIndex=0:$=new RegExp($.source,"g"+($.multiline?"m":"")+($.ignoreCase?"i":""));var a=$.exec(e);return a?(o["~"]=l.get("MatchData").$new($,a),a.index):(o["~"]=n,n)},e.defn(s,"$eql?",c["$=="]),c.$inspect=function(){var e=this;return e.toString()},c.$match=i=function(e){var t,r=this,$=i.$$p,a=$||n;if(i.$$p=null,(t=e===n)!==n&&(!t.$$is_boolean||1==t))return o["~"]=n,n;(t=null==e.$$is_string)===n||t.$$is_boolean&&1!=t||(((t=e["$respond_to?"]("to_str"))===n||t.$$is_boolean&&1!=t)&&r.$raise(l.get("TypeError"),"no implicit conversion of "+e.$class()+" into String"),e=e.$to_str());var s=r;s.global?s.lastIndex=0:s=new RegExp(s.source,"g"+(s.multiline?"m":"")+(s.ignoreCase?"i":""));var c=s.exec(e);return c?(c=o["~"]=l.get("MatchData").$new(s,c),a===n?c:a.$call(c)):o["~"]=n},c.$source=function(){var e=this;return e.source},e.defn(s,"$to_s",c.$source)}(t,null)},Opal.modules["corelib/comparable"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module);return e.add_stubs(["$===","$>","$<","$equal?","$<=>","$normalize","$raise","$class"]),function(t){var $=r(t,"Comparable"),o=$.$$proto,a=$.$$scope;e.defs($,"$normalize",function(e){var t;return(t=a.get("Integer")["$==="](e))===n||t.$$is_boolean&&1!=t?e["$>"](0)?1:e["$<"](0)?-1:0:e}),o["$=="]=function(t){var r,$=this,o=n;try{return(r=$["$equal?"](t))===n||r.$$is_boolean&&1!=r?(r=o=$["$<=>"](t))===n||r.$$is_boolean&&1!=r?!1:0==a.get("Comparable").$normalize(o):!0}catch(i){if(e.rescue(i,[a.get("StandardError")]))return!1;throw i}},o["$>"]=function(e){var t,r=this,$=n;return((t=$=r["$<=>"](e))===n||t.$$is_boolean&&1!=t)&&r.$raise(a.get("ArgumentError"),"comparison of "+r.$class()+" with "+e.$class()+" failed"),a.get("Comparable").$normalize($)>0},o["$>="]=function(e){var t,r=this,$=n;return((t=$=r["$<=>"](e))===n||t.$$is_boolean&&1!=t)&&r.$raise(a.get("ArgumentError"),"comparison of "+r.$class()+" with "+e.$class()+" failed"),a.get("Comparable").$normalize($)>=0},o["$<"]=function(e){var t,r=this,$=n;return((t=$=r["$<=>"](e))===n||t.$$is_boolean&&1!=t)&&r.$raise(a.get("ArgumentError"),"comparison of "+r.$class()+" with "+e.$class()+" failed"),a.get("Comparable").$normalize($)<0},o["$<="]=function(e){var t,r=this,$=n;return((t=$=r["$<=>"](e))===n||t.$$is_boolean&&1!=t)&&r.$raise(a.get("ArgumentError"),"comparison of "+r.$class()+" with "+e.$class()+" failed"),a.get("Comparable").$normalize($)<=0},o["$between?"]=function(e,t){var n=this;return n["$<"](e)?!1:n["$>"](t)?!1:!0},e.donate($,["$==","$>","$>=","$<","$<=","$between?"])}(t)},Opal.modules["corelib/enumerable"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=e.breaker,$=e.slice,o=e.module;return e.add_stubs(["$raise","$enum_for","$flatten","$map","$==","$destructure","$nil?","$coerce_to!","$coerce_to","$===","$new","$<<","$[]","$[]=","$inspect","$__send__","$yield","$enumerator_size","$respond_to?","$size","$private","$compare","$<=>","$dup","$sort","$call","$first","$zip","$to_a"]),function(t){var a,i,s,c,l,u,_,p,d,f,h,m,g,v,b,y,x,w,k,S,E,R,O,M,q,A,C,T,j,z,I,N,F,B,P,D=o(t,"Enumerable"),H=D.$$proto,L=D.$$scope;H["$all?"]=a=function(){var t,$=this,o=a.$$p,i=o||n;a.$$p=null;var s=!0;return $.$each.$$p=i!==n?function(){var $=e.yieldX(i,arguments);return $===r?(s=r.$v,r):(t=$)===n||t.$$is_boolean&&0==t?(s=!1,r):void 0}:function(e){return 1==arguments.length&&((t=e)===n||t.$$is_boolean&&0==t)?(s=!1,r):void 0},$.$each(),s},H["$any?"]=i=function(){var t,$=this,o=i.$$p,a=o||n;i.$$p=null;var s=!1;return $.$each.$$p=a!==n?function(){var $=e.yieldX(a,arguments);return $===r?(s=r.$v,r):(t=$)===n||t.$$is_boolean&&1!=t?void 0:(s=!0,r)}:function(e){return 1==arguments.length&&((t=e)===n||t.$$is_boolean&&1!=t)?void 0:(s=!0,r)},$.$each(),s},H.$chunk=s=function(){{var e=this;s.$$p}return s.$$p=null,e.$raise(L.get("NotImplementedError"))},H.$collect=c=function(){var t=this,$=c.$$p,o=$||n;if(c.$$p=null,o===n)return t.$enum_for("collect");var a=[];return t.$each.$$p=function(){var t=e.yieldX(o,arguments);return t===r?(a=r.$v,r):void a.push(t)},t.$each(),a},H.$collect_concat=l=function(){var t,$,o,a=this,i=l.$$p,s=i||n;return l.$$p=null,s===n?a.$enum_for("collect_concat"):(t=($=a).$map,t.$$p=(o=function(t){{var $;o.$$s||this}return null==t&&(t=n),$=e.yield1(s,t),$===r?$:$},o.$$s=a,o),t).call($).$flatten(1)},H.$count=u=function(t){var $,o=this,a=u.$$p,i=a||n;u.$$p=null;var s=0;return null!=t?i=function(){return L.get("Opal").$destructure(arguments)["$=="](t)}:i===n&&(i=function(){return!0}),o.$each.$$p=function(){var t=e.yieldX(i,arguments);return t===r?(s=r.$v,r):void(($=t)===n||$.$$is_boolean&&1!=$||s++)},o.$each(),s},H.$cycle=_=function(t){var $,o=this,a=_.$$p,i=a||n;if(null==t&&(t=n),_.$$p=null,i===!1||i===n)return o.$enum_for("cycle",t);if(($=t["$nil?"]())===n||$.$$is_boolean&&1!=$){if(t=L.get("Opal")["$coerce_to!"](t,L.get("Integer"),"to_int"),($=0>=t)!==n&&(!$.$$is_boolean||1==$))return n}else;var s,c=[];if(o.$each.$$p=function(){var t=L.get("Opal").$destructure(arguments),n=e.yield1(i,t);return n===r?(s=r.$v,r):void c.push(t)},o.$each(),void 0!==s)return s;if(0===c.length)return n;if(($=t["$nil?"]())===n||$.$$is_boolean&&1!=$)for(;t>1;){for(var l=0,u=c.length;u>l;l++){var p=e.yield1(i,c[l]);if(p===r)return r.$v}t--}else for(;;)for(var l=0,u=c.length;u>l;l++){var p=e.yield1(i,c[l]);if(p===r)return r.$v}},H.$detect=p=function(t){var $,o=this,a=p.$$p,i=a||n;if(p.$$p=null,i===n)return o.$enum_for("detect",t);var s=void 0;return o.$each.$$p=function(){var t=L.get("Opal").$destructure(arguments),o=e.yield1(i,t);return o===r?(s=r.$v,r):($=o)===n||$.$$is_boolean&&1!=$?void 0:(s=t,r)},o.$each(),void 0===s&&void 0!==t&&(s="function"==typeof t?t():t),void 0===s?n:s},H.$drop=function(e){var t,r=this;e=L.get("Opal").$coerce_to(e,L.get("Integer"),"to_int"),(t=0>e)===n||t.$$is_boolean&&1!=t||r.$raise(L.get("ArgumentError"),"attempt to drop negative size");var $=[],o=0;return r.$each.$$p=function(){o>=e&&$.push(L.get("Opal").$destructure(arguments)),o++},r.$each(),$},H.$drop_while=d=function(){var t,$=this,o=d.$$p,a=o||n;if(d.$$p=null,a===n)return $.$enum_for("drop_while");var i=[],s=!0;return $.$each.$$p=function(){var $=L.get("Opal").$destructure(arguments);if(s){var o=e.yield1(a,$);if(o===r)return i=r.$v,r;((t=o)===n||t.$$is_boolean&&0==t)&&(s=!1,i.push($))}else i.push($)},$.$each(),i},H.$each_cons=f=function(){{var e=this;f.$$p}return f.$$p=null,e.$raise(L.get("NotImplementedError"))},H.$each_entry=h=function(){{var e=this;h.$$p}return h.$$p=null,e.$raise(L.get("NotImplementedError"))},H.$each_slice=m=function(t){var $,o=this,a=m.$$p,i=a||n;if(m.$$p=null,t=L.get("Opal").$coerce_to(t,L.get("Integer"),"to_int"),($=0>=t)===n||$.$$is_boolean&&1!=$||o.$raise(L.get("ArgumentError"),"invalid slice size"),i===n)return o.$enum_for("each_slice",t);var s,c=[];return o.$each.$$p=function(){var n=L.get("Opal").$destructure(arguments);if(c.push(n),c.length===t){if(e.yield1(i,c)===r)return s=r.$v,r;c=[]}},o.$each(),void 0!==s?s:c.length>0&&e.yield1(i,c)===r?r.$v:n},H.$each_with_index=g=function(e){var t,o=this,a=g.$$p,i=a||n;if(e=$.call(arguments,0),g.$$p=null,i===n)return(t=o).$enum_for.apply(t,["each_with_index"].concat(e));var s,c=0;return o.$each.$$p=function(){var e=L.get("Opal").$destructure(arguments),t=i(e,c);return t===r?(s=r.$v,r):void c++},o.$each.apply(o,e),void 0!==s?s:o},H.$each_with_object=v=function(e){var t=this,$=v.$$p,o=$||n;if(v.$$p=null,o===n)return t.$enum_for("each_with_object",e);var a;return t.$each.$$p=function(){var t=L.get("Opal").$destructure(arguments),n=o(t,e);return n===r?(a=r.$v,r):void 0},t.$each(),void 0!==a?a:e},H.$entries=function(e){var t=this;e=$.call(arguments,0);var n=[];return t.$each.$$p=function(){n.push(L.get("Opal").$destructure(arguments))},t.$each.apply(t,e),n},e.defn(D,"$find",H.$detect),H.$find_all=b=function(){var t,$=this,o=b.$$p,a=o||n;if(b.$$p=null,a===n)return $.$enum_for("find_all");var i=[];return $.$each.$$p=function(){var $=L.get("Opal").$destructure(arguments),o=e.yield1(a,$);return o===r?(i=r.$v,r):void((t=o)===n||t.$$is_boolean&&1!=t||i.push($))},$.$each(),i},H.$find_index=y=function(t){var $,o=this,a=y.$$p,i=a||n;if(y.$$p=null,($=void 0===t&&i===n)!==n&&(!$.$$is_boolean||1==$))return o.$enum_for("find_index");var s=n,c=0;return null!=t?o.$each.$$p=function(){var e=L.get("Opal").$destructure(arguments);return e["$=="](t)?(s=c,r):void(c+=1)}:i!==n&&(o.$each.$$p=function(){var t=e.yieldX(i,arguments);return t===r?(s=r.$v,r):($=t)===n||$.$$is_boolean&&1!=$?void(c+=1):(s=c,r)}),o.$each(),s},H.$first=function(e){var t,$=this,o=n;if((t=void 0===e)===n||t.$$is_boolean&&1!=t){if(o=[],e=L.get("Opal").$coerce_to(e,L.get("Integer"),"to_int"),(t=0>e)===n||t.$$is_boolean&&1!=t||$.$raise(L.get("ArgumentError"),"attempt to take negative size"),(t=0==e)!==n&&(!t.$$is_boolean||1==t))return[];var a=0,e=L.get("Opal").$coerce_to(e,L.get("Integer"),"to_int");$.$each.$$p=function(){return o.push(L.get("Opal").$destructure(arguments)),e<=++a?r:void 0},$.$each()}else o=n,$.$each.$$p=function(){return o=L.get("Opal").$destructure(arguments),r},$.$each();return o},e.defn(D,"$flat_map",H.$collect_concat),H.$grep=x=function(t){var $,o=this,a=x.$$p,i=a||n;x.$$p=null;var s=[];return o.$each.$$p=i!==n?function(){var o=L.get("Opal").$destructure(arguments),a=t["$==="](o);if(($=a)!==n&&(!$.$$is_boolean||1==$)){if(a=e.yield1(i,o),a===r)return s=r.$v,r;s.push(a)}}:function(){var e=L.get("Opal").$destructure(arguments),r=t["$==="](e);($=r)===n||$.$$is_boolean&&1!=$||s.push(e)},o.$each(),s},H.$group_by=w=function(){var t,$,o,a=this,i=w.$$p,s=i||n,c=n;if(w.$$p=null,s===n)return a.$enum_for("group_by");c=L.get("Hash").$new();var l;return a.$each.$$p=function(){var a=L.get("Opal").$destructure(arguments),i=e.yield1(s,a);return i===r?(l=r.$v,r):void(t=i,$=c,(o=$["$[]"](t))!==!1&&o!==n?o:$["$[]="](t,[]))["$<<"](a)},a.$each(),void 0!==l?l:c},H["$include?"]=function(e){var t=this,n=!1;return t.$each.$$p=function(){var t=L.get("Opal").$destructure(arguments);return t["$=="](e)?(n=!0,r):void 0},t.$each(),n},H.$inject=k=function(t,$){var o=this,a=k.$$p,i=a||n;k.$$p=null;var s=t;return i!==n&&void 0===$?o.$each.$$p=function(){var t=L.get("Opal").$destructure(arguments);return void 0===s?void(s=t):(t=e.yieldX(i,[s,t]),t===r?(s=r.$v,r):void(s=t))}:(void 0===$&&(L.get("Symbol")["$==="](t)||o.$raise(L.get("TypeError"),""+t.$inspect()+" is not a Symbol"),$=t,s=void 0),o.$each.$$p=function(){var e=L.get("Opal").$destructure(arguments);return void 0===s?void(s=e):void(s=s.$__send__($,e))}),o.$each(),void 0==s?n:s},H.$lazy=function(){var e,t,r,o=this;return(e=(t=L.get("Enumerator").$$scope.get("Lazy")).$new,e.$$p=(r=function(e,t){{var o;r.$$s||this}return null==e&&(e=n),t=$.call(arguments,1),(o=e).$yield.apply(o,[].concat(t))},r.$$s=o,r),e).call(t,o,o.$enumerator_size())},H.$enumerator_size=function(){var e,t=this;return(e=t["$respond_to?"]("size"))===n||e.$$is_boolean&&1!=e?n:t.$size()},D.$private("enumerator_size"),e.defn(D,"$map",H.$collect),H.$max=S=function(){var e=this,t=S.$$p,$=t||n;S.$$p=null;var o;return e.$each.$$p=$!==n?function(){var t=L.get("Opal").$destructure(arguments);if(void 0===o)return void(o=t);var a=$(t,o);return a===r?(o=r.$v,r):(a===n&&e.$raise(L.get("ArgumentError"),"comparison failed"),void(a>0&&(o=t)))}:function(){var e=L.get("Opal").$destructure(arguments);return void 0===o?void(o=e):void(L.get("Opal").$compare(e,o)>0&&(o=e))},e.$each(),void 0===o?n:o},H.$max_by=E=function(){var t=this,$=E.$$p,o=$||n;if(E.$$p=null,o===!1||o===n)return t.$enum_for("max_by");var a,i;return t.$each.$$p=function(){var t=L.get("Opal").$destructure(arguments),n=e.yield1(o,t);return void 0===a?(a=t,void(i=n)):n===r?(a=r.$v,r):void(n["$<=>"](i)>0&&(a=t,i=n))},t.$each(),void 0===a?n:a},e.defn(D,"$member?",H["$include?"]),H.$min=R=function(){var e=this,t=R.$$p,$=t||n;R.$$p=null;var o;return e.$each.$$p=$!==n?function(){var t=L.get("Opal").$destructure(arguments);if(void 0===o)return void(o=t);var a=$(t,o);return a===r?(o=r.$v,r):(a===n&&e.$raise(L.get("ArgumentError"),"comparison failed"),void(0>a&&(o=t)))}:function(){var e=L.get("Opal").$destructure(arguments);return void 0===o?void(o=e):void(L.get("Opal").$compare(e,o)<0&&(o=e))},e.$each(),void 0===o?n:o},H.$min_by=O=function(){var t=this,$=O.$$p,o=$||n;if(O.$$p=null,o===!1||o===n)return t.$enum_for("min_by");var a,i;return t.$each.$$p=function(){var t=L.get("Opal").$destructure(arguments),n=e.yield1(o,t);return void 0===a?(a=t,void(i=n)):n===r?(a=r.$v,r):void(n["$<=>"](i)<0&&(a=t,i=n))},t.$each(),void 0===a?n:a},H.$minmax=M=function(){{var e=this;M.$$p}return M.$$p=null,e.$raise(L.get("NotImplementedError"))},H.$minmax_by=q=function(){{var e=this;q.$$p}return q.$$p=null,e.$raise(L.get("NotImplementedError"))},H["$none?"]=A=function(){var t,$=this,o=A.$$p,a=o||n;A.$$p=null;var i=!0;return $.$each.$$p=a!==n?function(){var $=e.yieldX(a,arguments);return $===r?(i=r.$v,r):(t=$)===n||t.$$is_boolean&&1!=t?void 0:(i=!1,r)}:function(){var e=L.get("Opal").$destructure(arguments);return(t=e)===n||t.$$is_boolean&&1!=t?void 0:(i=!1,r)},$.$each(),i},H["$one?"]=C=function(){var t,$=this,o=C.$$p,a=o||n;C.$$p=null;var i=!1;return $.$each.$$p=a!==n?function(){var $=e.yieldX(a,arguments);if($===r)return i=r.$v,r;if((t=$)!==n&&(!t.$$is_boolean||1==t)){if(i===!0)return i=!1,r;i=!0}}:function(){var e=L.get("Opal").$destructure(arguments);if((t=e)!==n&&(!t.$$is_boolean||1==t)){if(i===!0)return i=!1,r;i=!0}},$.$each(),i},H.$partition=T=function(){var t,$=this,o=T.$$p,a=o||n;if(T.$$p=null,a===n)return $.$enum_for("partition");var i=[],s=[];return $.$each.$$p=function(){var $=L.get("Opal").$destructure(arguments),o=e.yield1(a,$);return o===r?(result=r.$v,r):void((t=o)===n||t.$$is_boolean&&1!=t?s.push($):i.push($))},$.$each(),[i,s]},e.defn(D,"$reduce",H.$inject),H.$reject=j=function(){var t,$=this,o=j.$$p,a=o||n;if(j.$$p=null,a===n)return $.$enum_for("reject");var i=[];return $.$each.$$p=function(){var $=L.get("Opal").$destructure(arguments),o=e.yield1(a,$);return o===r?(i=r.$v,r):void(((t=o)===n||t.$$is_boolean&&0==t)&&i.push($))},$.$each(),i},H.$reverse_each=z=function(){var t=this,r=z.$$p,$=r||n;if(z.$$p=null,$===n)return t.$enum_for("reverse_each");var o=[];t.$each.$$p=function(){o.push(arguments)},t.$each();for(var a=o.length-1;a>=0;a--)e.yieldX($,o[a]);return o},e.defn(D,"$select",H.$find_all),H.$slice_before=I=function(t){var r,$,o,a=this,i=I.$$p,s=i||n;return I.$$p=null,(r=void 0===t&&s===n||arguments.length>1)===n||r.$$is_boolean&&1!=r||a.$raise(L.get("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 1)"),(r=($=L.get("Enumerator")).$new,r.$$p=(o=function(r){var $,a=o.$$s||this;null==r&&(r=n);var i=[];a.$each.$$p=s!==n?void 0===t?function(){var t=L.get("Opal").$destructure(arguments),o=e.yield1(s,t);($=o)!==n&&(!$.$$is_boolean||1==$)&&i.length>0&&(r["$<<"](i),i=[]),i.push(t)}:function(){var e=L.get("Opal").$destructure(arguments),o=s(e,t.$dup());($=o)!==n&&(!$.$$is_boolean||1==$)&&i.length>0&&(r["$<<"](i),i=[]),i.push(e)}:function(){var e=L.get("Opal").$destructure(arguments),o=t["$==="](e);($=o)!==n&&(!$.$$is_boolean||1==$)&&i.length>0&&(r["$<<"](i),i=[]),i.push(e)},a.$each(),i.length>0&&r["$<<"](i)},o.$$s=a,o),r).call($)},H.$sort=N=function(){{var e=this;N.$$p}return N.$$p=null,e.$raise(L.get("NotImplementedError"))},H.$sort_by=F=function(){var e,t,r,$,o,a,i,s,c,l=this,u=F.$$p,_=u||n;return F.$$p=null,_===n?l.$enum_for("sort_by"):(e=(t=($=(o=(i=(s=l).$map,i.$$p=(c=function(){c.$$s||this;return arg=L.get("Opal").$destructure(arguments),[_.$call(arg),arg]},c.$$s=l,c),i).call(s)).$sort,$.$$p=(a=function(e,t){a.$$s||this;return null==e&&(e=n),null==t&&(t=n),e["$[]"](0)["$<=>"](t["$[]"](0))},a.$$s=l,a),$).call(o)).$map,e.$$p=(r=function(e){r.$$s||this;return null==e&&(e=n),e[1]},r.$$s=l,r),e).call(t)},H.$take=function(e){var t=this;return t.$first(e)},H.$take_while=B=function(){var t,$=this,o=B.$$p,a=o||n;if(B.$$p=null,a===!1||a===n)return $.$enum_for("take_while");var i=[];return $.$each.$$p=function(){var $=L.get("Opal").$destructure(arguments),o=e.yield1(a,$);return o===r?(i=r.$v,r):(t=o)===n||t.$$is_boolean&&0==t?r:void i.push($)},$.$each(),i},e.defn(D,"$to_a",H.$entries),H.$zip=P=function(e){{var t,n=this;P.$$p}return e=$.call(arguments,0),P.$$p=null,(t=n.$to_a()).$zip.apply(t,[].concat(e))},e.donate(D,["$all?","$any?","$chunk","$collect","$collect_concat","$count","$cycle","$detect","$drop","$drop_while","$each_cons","$each_entry","$each_slice","$each_with_index","$each_with_object","$entries","$find","$find_all","$find_index","$first","$flat_map","$grep","$group_by","$include?","$inject","$lazy","$enumerator_size","$map","$max","$max_by","$member?","$min","$min_by","$minmax","$minmax_by","$none?","$one?","$partition","$reduce","$reject","$reverse_each","$select","$slice_before","$sort","$sort_by","$take","$take_while","$to_a","$zip"])}(t)},Opal.modules["corelib/enumerator"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=e.breaker,$=e.slice,o=e.klass;return e.add_stubs(["$require","$include","$allocate","$new","$to_proc","$coerce_to","$nil?","$empty?","$+","$class","$__send__","$===","$call","$enum_for","$destructure","$inspect","$[]","$raise","$yield","$each","$enumerator_size","$respond_to?","$try_convert","$<","$for"]),t.$require("corelib/enumerable"),function(t,$super){function a(){}var i,s,c,l,u=a=o(t,$super,"Enumerator",a),_=u.$$proto,p=u.$$scope;return _.size=_.args=_.object=_.method=n,u.$include(p.get("Enumerable")),e.defs(u,"$for",i=function(e,t,r){var o=this,a=i.$$p,s=a||n;r=$.call(arguments,2),null==t&&(t="each"),i.$$p=null;var c=o.$allocate();return c.object=e,c.size=s,c.method=t,c.args=r,c}),_.$initialize=s=function(){var e,t,r=this,o=s.$$p,a=o||n;return s.$$p=null,a!==!1&&a!==n?(r.object=(e=(t=p.get("Generator")).$new,e.$$p=a.$to_proc(),e).call(t),r.method="each",r.args=[],r.size=arguments[0]||n,(e=r.size)===n||e.$$is_boolean&&1!=e?n:r.size=p.get("Opal").$coerce_to(r.size,p.get("Integer"),"to_int")):(r.object=arguments[0],r.method=arguments[1]||"each",r.args=$.call(arguments,2),r.size=n)},_.$each=c=function(e){var t,r,o,a=this,i=c.$$p,s=i||n;return e=$.call(arguments,0),c.$$p=null,r=s["$nil?"](),(t=r!==!1&&r!==n?e["$empty?"]():r)===n||t.$$is_boolean&&1!=t?(e=a.args["$+"](e),(t=s["$nil?"]())===n||t.$$is_boolean&&1!=t?(r=(o=a.object).$__send__,r.$$p=s.$to_proc(),r).apply(o,[a.method].concat(e)):(t=a.$class()).$new.apply(t,[a.object,a.method].concat(e))):a},_.$size=function(){var e,t=this;return(e=p.get("Proc")["$==="](t.size))===n||e.$$is_boolean&&1!=e?t.size:(e=t.size).$call.apply(e,[].concat(t.args))},_.$with_index=l=function(e){var t=this,$=l.$$p,o=$||n;if(null==e&&(e=0),l.$$p=null,e=e!==!1&&e!==n?p.get("Opal").$coerce_to(e,p.get("Integer"),"to_int"):0,o===!1||o===n)return t.$enum_for("with_index",e);var a,i=0;return t.$each.$$p=function(){var e=p.get("Opal").$destructure(arguments),t=o(e,i);return t===r?(a=r.$v,r):void i++},t.$each(),void 0!==a?a:n},e.defn(u,"$with_object",_.$each_with_object),_.$inspect=function(){var e,t=this,r=n;return r="#<"+t.$class()+": "+t.object.$inspect()+":"+t.method,((e=t.args["$empty?"]())===n||e.$$is_boolean&&1!=e)&&(r=r["$+"]("("+t.args.$inspect()["$[]"](p.get("Range").$new(1,-2))+")")),r["$+"](">")},function(t,$super){function a(){}var i,s,c=a=o(t,$super,"Generator",a),l=c.$$proto,u=c.$$scope;return l.block=n,c.$include(u.get("Enumerable")),l.$initialize=i=function(){var e=this,t=i.$$p,r=t||n;return i.$$p=null,r!==!1&&r!==n||e.$raise(u.get("LocalJumpError"),"no block given"),e.block=r},l.$each=s=function(t){var o,a,i=this,c=s.$$p,l=c||n,_=n;t=$.call(arguments,0),s.$$p=null,_=(o=(a=u.get("Yielder")).$new,o.$$p=l.$to_proc(),o).call(a);try{if(t.unshift(_),e.yieldX(i.block,t)===r)return r.$v}catch(p){if(p===r)return r.$v;throw p}return i},n&&"each"}(u,null),function(t,$super){function a(){}{var i,s=a=o(t,$super,"Yielder",a),c=s.$$proto;s.$$scope}return c.block=n,c.$initialize=i=function(){var e=this,t=i.$$p,r=t||n;return i.$$p=null,e.block=r},c.$yield=function(t){var n=this;t=$.call(arguments,0);var o=e.yieldX(n.block,t);if(o===r)throw r;return o},c["$<<"]=function(e){var t,n=this;return e=$.call(arguments,0),(t=n).$yield.apply(t,[].concat(e)),n},n&&"<<"}(u,null),function(t,$super){function a(){}var i,s,c,l,u,_,p,d,f,h=a=o(t,$super,"Lazy",a),m=h.$$proto,g=h.$$scope;return m.enumerator=n,function(e,$super){function t(){}{var r=t=o(e,$super,"StopLazyError",t);r.$$proto,r.$$scope}return n}(h,g.get("Exception")),m.$initialize=i=function(t,o){var a,s=this,c=i.$$p,l=c||n;return null==o&&(o=n),i.$$p=null,l!==n||s.$raise(g.get("ArgumentError"),"tried to call lazy new without a block"),s.enumerator=t,e.find_super_dispatcher(s,"initialize",i,(a=function(o,i){var s,c,u,_=a.$$s||this;null==o&&(o=n),i=$.call(arguments,1);try{return(s=(c=t).$each,s.$$p=(u=function(t){u.$$s||this;return t=$.call(arguments,0),t.unshift(o),e.yieldX(l,t)===r?r:void 0},u.$$s=_,u),s).apply(c,[].concat(i))}catch(p){if(e.rescue(p,[g.get("Exception")]))return n;throw p}},a.$$s=s,a)).apply(s,[o])},e.defn(h,"$force",m.$to_a),m.$lazy=function(){var e=this;return e},m.$collect=s=function(){var t,o,a,i=this,c=s.$$p,l=c||n;return s.$$p=null,l!==!1&&l!==n||i.$raise(g.get("ArgumentError"),"tried to call lazy map without a block"),(t=(o=g.get("Lazy")).$new,t.$$p=(a=function(t,o){a.$$s||this;null==t&&(t=n),o=$.call(arguments,1);var i=e.yieldX(l,o);return i===r?r:void t.$yield(i)},a.$$s=i,a),t).call(o,i,i.$enumerator_size())},m.$collect_concat=c=function(){var t,o,a,i=this,s=c.$$p,l=s||n;return c.$$p=null,l!==!1&&l!==n||i.$raise(g.get("ArgumentError"),"tried to call lazy map without a block"),(t=(o=g.get("Lazy")).$new,t.$$p=(a=function(t,o){var i,s,c,u,_,p=a.$$s||this;null==t&&(t=n),o=$.call(arguments,1);var d=e.yieldX(l,o);if(d===r)return r;if(d["$respond_to?"]("force")&&d["$respond_to?"]("each"))(i=(s=d).$each,i.$$p=(c=function(e){c.$$s||this;return null==e&&(e=n),t.$yield(e)},c.$$s=p,c),i).call(s);else{var f=g.get("Opal").$try_convert(d,g.get("Array"),"to_ary");f===n?t.$yield(d):(i=(u=d).$each,i.$$p=(_=function(e){_.$$s||this;return null==e&&(e=n),t.$yield(e)},_.$$s=p,_),i).call(u)}},a.$$s=i,a),t).call(o,i,n)},m.$drop=function(e){var t,r,o,a=this,i=n,s=n,c=n;return e=g.get("Opal").$coerce_to(e,g.get("Integer"),"to_int"),e["$<"](0)&&a.$raise(g.get("ArgumentError"),"attempt to drop negative size"),i=a.$enumerator_size(),s=function(){return(t=g.get("Integer")["$==="](i))===n||t.$$is_boolean&&1!=t?i:e["$<"](i)?e:i}(),c=0,(t=(r=g.get("Lazy")).$new,t.$$p=(o=function(t,r){{var a;o.$$s||this}return null==t&&(t=n),r=$.call(arguments,1),c["$<"](e)?c=c["$+"](1):(a=t).$yield.apply(a,[].concat(r))},o.$$s=a,o),t).call(r,a,s)},m.$drop_while=l=function(){var t,o,a,i=this,s=l.$$p,c=s||n,u=n;return l.$$p=null,c!==!1&&c!==n||i.$raise(g.get("ArgumentError"),"tried to call lazy drop_while without a block"),u=!0,(t=(o=g.get("Lazy")).$new,t.$$p=(a=function(t,o){{var i,s;a.$$s||this}if(null==t&&(t=n),o=$.call(arguments,1),u===!1||u===n)return(s=t).$yield.apply(s,[].concat(o));var l=e.yieldX(c,o);return l===r?r:void(((i=l)===n||i.$$is_boolean&&0==i)&&(u=!1,(i=t).$yield.apply(i,[].concat(o))))},a.$$s=i,a),t).call(o,i,n)},m.$enum_for=u=function(e,t){var r,o,a=this,i=u.$$p,s=i||n;return t=$.call(arguments,1),null==e&&(e="each"),u.$$p=null,(r=(o=a.$class()).$for,r.$$p=s.$to_proc(),r).apply(o,[a,e].concat(t))},m.$find_all=_=function(){var t,o,a,i=this,s=_.$$p,c=s||n;return _.$$p=null,c!==!1&&c!==n||i.$raise(g.get("ArgumentError"),"tried to call lazy select without a block"),(t=(o=g.get("Lazy")).$new,t.$$p=(a=function(t,o){{var i;a.$$s||this}null==t&&(t=n),o=$.call(arguments,1);var s=e.yieldX(c,o);return s===r?r:void((i=s)===n||i.$$is_boolean&&1!=i||(i=t).$yield.apply(i,[].concat(o)))},a.$$s=i,a),t).call(o,i,n)},e.defn(h,"$flat_map",m.$collect_concat),m.$grep=p=function(t){var o,a,i,s,c,l=this,u=p.$$p,_=u||n;return p.$$p=null,_!==!1&&_!==n?(o=(a=g.get("Lazy")).$new,o.$$p=(i=function(o,a){{var s;i.$$s||this}null==o&&(o=n),a=$.call(arguments,1);var c=g.get("Opal").$destructure(a),l=t["$==="](c);if((s=l)!==n&&(!s.$$is_boolean||1==s)){if(l=e.yield1(_,c),l===r)return r;o.$yield(e.yield1(_,c))}},i.$$s=l,i),o).call(a,l,n):(o=(s=g.get("Lazy")).$new,o.$$p=(c=function(e,r){{var o;c.$$s||this}null==e&&(e=n),r=$.call(arguments,1);var a=g.get("Opal").$destructure(r),i=t["$==="](a);(o=i)===n||o.$$is_boolean&&1!=o||e.$yield(a)},c.$$s=l,c),o).call(s,l,n)},e.defn(h,"$map",m.$collect),e.defn(h,"$select",m.$find_all),m.$reject=d=function(){var t,o,a,i=this,s=d.$$p,c=s||n;return d.$$p=null,c!==!1&&c!==n||i.$raise(g.get("ArgumentError"),"tried to call lazy reject without a block"),(t=(o=g.get("Lazy")).$new,t.$$p=(a=function(t,o){{var i;a.$$s||this}null==t&&(t=n),o=$.call(arguments,1);var s=e.yieldX(c,o);return s===r?r:void(((i=s)===n||i.$$is_boolean&&0==i)&&(i=t).$yield.apply(i,[].concat(o)))},a.$$s=i,a),t).call(o,i,n)},m.$take=function(e){var t,r,o,a=this,i=n,s=n,c=n;return e=g.get("Opal").$coerce_to(e,g.get("Integer"),"to_int"),e["$<"](0)&&a.$raise(g.get("ArgumentError"),"attempt to take negative size"),i=a.$enumerator_size(),s=function(){return(t=g.get("Integer")["$==="](i))===n||t.$$is_boolean&&1!=t?i:e["$<"](i)?e:i}(),c=0,(t=(r=g.get("Lazy")).$new,t.$$p=(o=function(t,r){var a,i=o.$$s||this;return null==t&&(t=n),r=$.call(arguments,1),c["$<"](e)?((a=t).$yield.apply(a,[].concat(r)),c=c["$+"](1)):i.$raise(g.get("StopLazyError"))},o.$$s=a,o),t).call(r,a,s)},m.$take_while=f=function(){var t,o,a,i=this,s=f.$$p,c=s||n;return f.$$p=null,c!==!1&&c!==n||i.$raise(g.get("ArgumentError"),"tried to call lazy take_while without a block"),(t=(o=g.get("Lazy")).$new,t.$$p=(a=function(t,o){var i,s=a.$$s||this;null==t&&(t=n),o=$.call(arguments,1);var l=e.yieldX(c,o);return l===r?r:void((i=l)===n||i.$$is_boolean&&1!=i?s.$raise(g.get("StopLazyError")):(i=t).$yield.apply(i,[].concat(o)))},a.$$s=i,a),t).call(o,i,n)},e.defn(h,"$to_enum",m.$enum_for),m.$inspect=function(){var e=this;return"#<"+e.$class()+": "+e.enumerator.$inspect()+">"},n&&"inspect"}(u,u)}(t,null)},Opal.modules["corelib/array"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=e.breaker,$=e.slice,o=e.klass,a=e.gvars,i=e.range;return e.add_stubs(["$require","$include","$new","$class","$raise","$===","$to_a","$respond_to?","$to_ary","$coerce_to","$coerce_to?","$==","$to_str","$clone","$hash","$<=>","$inspect","$empty?","$enum_for","$nil?","$coerce_to!","$initialize_clone","$initialize_dup","$replace","$eql?","$length","$begin","$end","$exclude_end?","$flatten","$__id__","$[]","$to_s","$join","$delete_if","$to_proc","$each","$reverse","$!","$map","$rand","$keep_if","$shuffle!","$>","$<","$sort","$times","$[]=","$<<","$at"]),t.$require("corelib/enumerable"),function(t,$super){function s(){}var c,l,u,_,p,d,f,h,m,g,v,b,y,x,w,k,S,E,R,O,M,q=s=o(t,$super,"Array",s),A=q.$$proto,C=q.$$scope;return A.length=n,q.$include(C.get("Enumerable")),A.$$is_array=!0,e.defs(q,"$[]",function(e){return e=$.call(arguments,0)}),A.$initialize=function(e){var t,n=this;return e=$.call(arguments,0),(t=n.$class()).$new.apply(t,[].concat(e))},e.defs(q,"$new",c=function(e,t){var $,o=this,a=c.$$p,i=a||n;if(null==e&&(e=n),null==t&&(t=n),c.$$p=null,($=arguments.length>2)===n||$.$$is_boolean&&1!=$||o.$raise(C.get("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..2)"),($=0===arguments.length)!==n&&(!$.$$is_boolean||1==$))return[];if(($=1===arguments.length)!==n&&(!$.$$is_boolean||1==$)){if(!(($=C.get("Array")["$==="](e))===n||$.$$is_boolean&&1!=$))return e.$to_a();if(($=e["$respond_to?"]("to_ary"))!==n&&(!$.$$is_boolean||1==$))return e.$to_ary()}e=C.get("Opal").$coerce_to(e,C.get("Integer"),"to_int"),($=0>e)===n||$.$$is_boolean&&1!=$||o.$raise(C.get("ArgumentError"),"negative array size");var s=[];if(i===n)for(var l=0;e>l;l++)s.push(t);else for(var u,l=0;e>l;l++){if(u=i(l),u===r)return r.$v;s[l]=u}return s}),e.defs(q,"$try_convert",function(e){return C.get("Opal")["$coerce_to?"](e,C.get("Array"),"to_ary")}),A["$&"]=function(e){var t,r=this;e=(t=C.get("Array")["$==="](e))===n||t.$$is_boolean&&1!=t?C.get("Opal").$coerce_to(e,C.get("Array"),"to_ary").$to_a():e.$to_a();for(var $=[],o={},a=0,i=r.length;i>a;a++){var s=r[a];if(!o[s])for(var c=0,l=e.length;l>c;c++){var u=e[c];
!o[u]&&s["$=="](u)&&(o[s]=!0,$.push(s))}}return $},A["$|"]=function(e){var t,r=this;e=(t=C.get("Array")["$==="](e))===n||t.$$is_boolean&&1!=t?C.get("Opal").$coerce_to(e,C.get("Array"),"to_ary").$to_a():e.$to_a();for(var $=[],o={},a=0,i=r.length;i>a;a++){var s=r[a];o[s]||(o[s]=!0,$.push(s))}for(var a=0,i=e.length;i>a;a++){var s=e[a];o[s]||(o[s]=!0,$.push(s))}return $},A["$*"]=function(e){var t,r=this;if((t=e["$respond_to?"]("to_str"))!==n&&(!t.$$is_boolean||1==t))return r.join(e.$to_str());((t=e["$respond_to?"]("to_int"))===n||t.$$is_boolean&&1!=t)&&r.$raise(C.get("TypeError"),"no implicit conversion of "+e.$class()+" into Integer"),e=C.get("Opal").$coerce_to(e,C.get("Integer"),"to_int"),(t=0>e)===n||t.$$is_boolean&&1!=t||r.$raise(C.get("ArgumentError"),"negative argument");for(var $=[],o=0;e>o;o++)$=$.concat(r);return $},A["$+"]=function(e){var t,r=this;return e=(t=C.get("Array")["$==="](e))===n||t.$$is_boolean&&1!=t?C.get("Opal").$coerce_to(e,C.get("Array"),"to_ary").$to_a():e.$to_a(),r.concat(e)},A["$-"]=function(e){var t,r=this;if(e=(t=C.get("Array")["$==="](e))===n||t.$$is_boolean&&1!=t?C.get("Opal").$coerce_to(e,C.get("Array"),"to_ary").$to_a():e.$to_a(),(t=0===r.length)!==n&&(!t.$$is_boolean||1==t))return[];if((t=0===e.length)!==n&&(!t.$$is_boolean||1==t))return r.$clone();for(var $={},o=[],a=0,i=e.length;i>a;a++)$[e[a]]=!0;for(var a=0,i=r.length;i>a;a++){var s=r[a];$[s]||o.push(s)}return o},A["$<<"]=function(e){var t=this;return t.push(e),t},A["$<=>"]=function(e){var t,r=this;if((t=C.get("Array")["$==="](e))===n||t.$$is_boolean&&1!=t){if((t=e["$respond_to?"]("to_ary"))===n||t.$$is_boolean&&1!=t)return n;e=e.$to_ary().$to_a()}else e=e.$to_a();if(r.$hash()===e.$hash())return 0;if(r.length!=e.length)return r.length>e.length?1:-1;for(var $=0,o=r.length;o>$;$++){var a=r[$]["$<=>"](e[$]);if(0!==a)return a}return 0},A["$=="]=function(e){var t,r=this;if((t=r===e)!==n&&(!t.$$is_boolean||1==t))return!0;if((t=C.get("Array")["$==="](e))===n||t.$$is_boolean&&1!=t)return(t=e["$respond_to?"]("to_ary"))===n||t.$$is_boolean&&1!=t?!1:e["$=="](r);if(e=e.$to_a(),(t=r.length===e.length)===n||t.$$is_boolean&&1!=t)return!1;for(var $=0,o=r.length;o>$;$++){var a=r[$],i=e[$];if(!(a.$$is_array&&i.$$is_array&&a===r||a["$=="](i)))return!1}return!0},A["$[]"]=function(e,t){var r,$=this;if((r=C.get("Range")["$==="](e))===n||r.$$is_boolean&&1!=r){e=C.get("Opal").$coerce_to(e,C.get("Integer"),"to_int");var o=$.length;return 0>e&&(e+=o,0>e)?n:void 0===t?e>=o||0>e?n:$[e]:(t=C.get("Opal").$coerce_to(t,C.get("Integer"),"to_int"),0>t||e>o||0>e?n:$.slice(e,e+t))}var o=$.length,a=e.exclude,i=C.get("Opal").$coerce_to(e.begin,C.get("Integer"),"to_int"),s=C.get("Opal").$coerce_to(e.end,C.get("Integer"),"to_int");return 0>i&&(i+=o,0>i)?n:i>o?n:0>s&&(s+=o,0>s)?[]:(a||(s+=1),$.slice(i,s))},A["$[]="]=function(e,t,r){var $,o=this,a=n,i=n;if(($=C.get("Range")["$==="](e))===n||$.$$is_boolean&&1!=$){($=void 0===r)===n||$.$$is_boolean&&1!=$?(i=t,t=r,a=($=C.get("Array")["$==="](t))===n||$.$$is_boolean&&1!=$?($=t["$respond_to?"]("to_ary"))===n||$.$$is_boolean&&1!=$?[t]:t.$to_ary().$to_a():t.$to_a()):i=1;var s,c=o.length,e=C.get("Opal").$coerce_to(e,C.get("Integer"),"to_int"),i=C.get("Opal").$coerce_to(i,C.get("Integer"),"to_int");if(0>e&&(s=e,e+=c,0>e&&o.$raise(C.get("IndexError"),"index "+s+" too small for array; minimum "+-o.length)),0>i&&o.$raise(C.get("IndexError"),"negative length ("+i+")"),e>c)for(var l=c;e>l;l++)o[l]=n;return void 0===r?o[e]=t:o.splice.apply(o,[e,i].concat(a)),t}a=($=C.get("Array")["$==="](t))===n||$.$$is_boolean&&1!=$?($=t["$respond_to?"]("to_ary"))===n||$.$$is_boolean&&1!=$?[t]:t.$to_ary().$to_a():t.$to_a();var c=o.length,u=e.exclude,_=C.get("Opal").$coerce_to(e.begin,C.get("Integer"),"to_int"),p=C.get("Opal").$coerce_to(e.end,C.get("Integer"),"to_int");if(0>_&&(_+=c,0>_&&o.$raise(C.get("RangeError"),""+e.$inspect()+" out of range")),0>p&&(p+=c),u||(p+=1),_>c)for(var l=c;_>l;l++)o[l]=n;return 0>p?o.splice.apply(o,[_,0].concat(a)):o.splice.apply(o,[_,p-_].concat(a)),t},A.$assoc=function(e){for(var t,r=this,$=0,o=r.length;o>$;$++)if(t=r[$],t.length&&t[0]["$=="](e))return t;return n},A.$at=function(e){var t=this;return e=C.get("Opal").$coerce_to(e,C.get("Integer"),"to_int"),0>e&&(e+=t.length),0>e||e>=t.length?n:t[e]},A.$cycle=l=function(t){var $,o,a=this,i=l.$$p,s=i||n;if(null==t&&(t=n),l.$$p=null,($=(o=a["$empty?"]())!==!1&&o!==n?o:t["$=="](0))!==n&&(!$.$$is_boolean||1==$))return n;if(s===!1||s===n)return a.$enum_for("cycle",t);if(($=t["$nil?"]())===n||$.$$is_boolean&&1!=$){if(t=C.get("Opal")["$coerce_to!"](t,C.get("Integer"),"to_int"),0>=t)return a;for(;t>0;){for(var c=0,u=a.length;u>c;c++){var _=e.yield1(s,a[c]);if(_===r)return r.$v}t--}}else for(;;)for(var c=0,u=a.length;u>c;c++){var _=e.yield1(s,a[c]);if(_===r)return r.$v}return a},A.$clear=function(){var e=this;return e.splice(0,e.length),e},A.$clone=function(){var e=this,t=n;return t=[],t.$initialize_clone(e),t},A.$dup=function(){var e=this,t=n;return t=[],t.$initialize_dup(e),t},A.$initialize_copy=function(e){var t=this;return t.$replace(e)},A.$collect=u=function(){var t=this,$=u.$$p,o=$||n;if(u.$$p=null,o===n)return t.$enum_for("collect");for(var a=[],i=0,s=t.length;s>i;i++){var c=e.yield1(o,t[i]);if(c===r)return r.$v;a.push(c)}return a},A["$collect!"]=_=function(){var t=this,$=_.$$p,o=$||n;if(_.$$p=null,o===n)return t.$enum_for("collect!");for(var a=0,i=t.length;i>a;a++){var s=e.yield1(o,t[a]);if(s===r)return r.$v;t[a]=s}return t},A.$compact=function(){for(var e,t=this,r=[],$=0,o=t.length;o>$;$++)(e=t[$])!==n&&r.push(e);return r},A["$compact!"]=function(){for(var e=this,t=e.length,r=0,$=e.length;$>r;r++)e[r]===n&&(e.splice(r,1),$--,r--);return e.length===t?n:e},A.$concat=function(e){var t,r=this;e=(t=C.get("Array")["$==="](e))===n||t.$$is_boolean&&1!=t?C.get("Opal").$coerce_to(e,C.get("Array"),"to_ary").$to_a():e.$to_a();for(var $=0,o=e.length;o>$;$++)r.push(e[$]);return r},A.$delete=function(e){for(var t=this,r=t.length,$=0,o=r;o>$;$++)t[$]["$=="](e)&&(t.splice($,1),o--,$--);return t.length===r?n:e},A.$delete_at=function(e){var t=this;if(e=C.get("Opal").$coerce_to(e,C.get("Integer"),"to_int"),0>e&&(e+=t.length),0>e||e>=t.length)return n;var r=t[e];return t.splice(e,1),r},A.$delete_if=p=function(){var e=this,t=p.$$p,$=t||n;if(p.$$p=null,$===n)return e.$enum_for("delete_if");for(var o,a=0,i=e.length;i>a;a++){if((o=$(e[a]))===r)return r.$v;o!==!1&&o!==n&&(e.splice(a,1),i--,a--)}return e},A.$drop=function(e){var t=this;return 0>e&&t.$raise(C.get("ArgumentError")),t.slice(e)},e.defn(q,"$dup",A.$clone),A.$each=d=function(){var t=this,$=d.$$p,o=$||n;if(d.$$p=null,o===n)return t.$enum_for("each");for(var a=0,i=t.length;i>a;a++){var s=e.yield1(o,t[a]);if(s==r)return r.$v}return t},A.$each_index=f=function(){var t=this,$=f.$$p,o=$||n;if(f.$$p=null,o===n)return t.$enum_for("each_index");for(var a=0,i=t.length;i>a;a++){var s=e.yield1(o,a);if(s===r)return r.$v}return t},A["$empty?"]=function(){var e=this;return 0===e.length},A["$eql?"]=function(e){var t,r=this;if((t=r===e)!==n&&(!t.$$is_boolean||1==t))return!0;if((t=C.get("Array")["$==="](e))===n||t.$$is_boolean&&1!=t)return!1;if(e=e.$to_a(),(t=r.length===e.length)===n||t.$$is_boolean&&1!=t)return!1;for(var $=0,o=r.length;o>$;$++){var a=r[$],i=e[$];if(!(a.$$is_array&&i.$$is_array&&a===r||a["$eql?"](i)))return!1}return!0},A.$fetch=h=function(e,t){var r=this,$=h.$$p,o=$||n;h.$$p=null;var a=e;return e=C.get("Opal").$coerce_to(e,C.get("Integer"),"to_int"),0>e&&(e+=r.length),e>=0&&e<r.length?r[e]:o!==n?o(a):null!=t?t:void(0===r.length?r.$raise(C.get("IndexError"),"index "+a+" outside of array bounds: 0...0"):r.$raise(C.get("IndexError"),"index "+a+" outside of array bounds: -"+r.length+"..."+r.length))},A.$fill=m=function(t){var o,a=this,i=m.$$p,s=i||n,c=n,l=n,u=n,_=n,p=n;if(t=$.call(arguments,0),m.$$p=null,s!==!1&&s!==n?((o=t.length>2)===n||o.$$is_boolean&&1!=o||a.$raise(C.get("ArgumentError"),"wrong number of arguments ("+t.$length()+" for 0..2)"),o=e.to_ary(t),c=null==o[0]?n:o[0],l=null==o[1]?n:o[1]):((o=0==t.length)===n||o.$$is_boolean&&1!=o?(o=t.length>3)===n||o.$$is_boolean&&1!=o||a.$raise(C.get("ArgumentError"),"wrong number of arguments ("+t.$length()+" for 1..3)"):a.$raise(C.get("ArgumentError"),"wrong number of arguments (0 for 1..3)"),o=e.to_ary(t),u=null==o[0]?n:o[0],c=null==o[1]?n:o[1],l=null==o[2]?n:o[2]),(o=C.get("Range")["$==="](c))===n||o.$$is_boolean&&1!=o)if(c!==!1&&c!==n)if(_=C.get("Opal").$coerce_to(c,C.get("Integer"),"to_int"),(o=0>_)===n||o.$$is_boolean&&1!=o||(_+=a.length),(o=0>_)===n||o.$$is_boolean&&1!=o||(_=0),l!==!1&&l!==n){if(p=C.get("Opal").$coerce_to(l,C.get("Integer"),"to_int"),(o=0==p)!==n&&(!o.$$is_boolean||1==o))return a;p+=_}else p=a.length;else _=0,p=a.length;else if(l!==!1&&l!==n&&a.$raise(C.get("TypeError"),"length invalid with range"),_=C.get("Opal").$coerce_to(c.$begin(),C.get("Integer"),"to_int"),(o=0>_)===n||o.$$is_boolean&&1!=o||(_+=a.length),(o=0>_)===n||o.$$is_boolean&&1!=o||a.$raise(C.get("RangeError"),""+c.$inspect()+" out of range"),p=C.get("Opal").$coerce_to(c.$end(),C.get("Integer"),"to_int"),(o=0>p)===n||o.$$is_boolean&&1!=o||(p+=a.length),((o=c["$exclude_end?"]())===n||o.$$is_boolean&&1!=o)&&(p+=1),(o=_>=p)!==n&&(!o.$$is_boolean||1==o))return a;if((o=_>a.length)!==n&&(!o.$$is_boolean||1==o))for(var d=a.length;p>d;d++)a[d]=n;if((o=p>a.length)===n||o.$$is_boolean&&1!=o||(a.length=p),s!==!1&&s!==n){for(a.length;p>_;_++){var f=s(_);if(f===r)return r.$v;a[_]=f}}else{for(a.length;p>_;_++)a[_]=u}return a},A.$first=function(e){var t=this;return null==e?0===t.length?n:t[0]:(e=C.get("Opal").$coerce_to(e,C.get("Integer"),"to_int"),0>e&&t.$raise(C.get("ArgumentError"),"negative array size"),t.slice(0,e))},A.$flatten=function(e){for(var t=this,n=[],r=0,$=t.length;$>r;r++){var o=t[r];C.get("Opal")["$respond_to?"](o,"to_ary")?(o=o.$to_ary(),null==e?n.push.apply(n,o.$flatten().$to_a()):0==e?n.push(o):n.push.apply(n,o.$flatten(e-1).$to_a())):n.push(o)}return n},A["$flatten!"]=function(e){var t=this,r=t.$flatten(e);if(t.length==r.length){for(var $=0,o=t.length;o>$&&t[$]===r[$];$++);if($==o)return n}return t.$replace(r),t},A.$hash=function(){for(var e,t,n=this,r=["A"],$=0,o=n.length;o>$;$++)e=n[$],t=n===e?"self":e.$hash(),r.push(t);return r.join(",")},A["$include?"]=function(e){for(var t=this,n=0,r=t.length;r>n;n++)if(t[n]["$=="](e))return!0;return!1},A.$index=g=function(e){var t=this,$=g.$$p,o=$||n;if(g.$$p=null,null!=e){for(var a=0,i=t.length;i>a;a++)if(t[a]["$=="](e))return a}else{if(o===n)return t.$enum_for("index");for(var s,a=0,i=t.length;i>a;a++){if((s=o(t[a]))===r)return r.$v;if(s!==!1&&s!==n)return a}}return n},A.$insert=function(e,t){var r=this;if(t=$.call(arguments,1),e=C.get("Opal").$coerce_to(e,C.get("Integer"),"to_int"),t.length>0){if(0>e&&(e+=r.length+1,0>e&&r.$raise(C.get("IndexError"),""+e+" is out of bounds")),e>r.length)for(var o=r.length;e>o;o++)r.push(n);r.splice.apply(r,[e,0].concat(t))}return r},A.$inspect=function(){for(var e=this,t=[],n=e.$__id__(),r=0,$=e.length;$>r;r++){var o=e["$[]"](r);t.push(o.$__id__()===n?"[...]":o.$inspect())}return"["+t.join(", ")+"]"},A.$join=function(e){var t,r=this;if(null==a[","]&&(a[","]=n),null==e&&(e=n),(t=0===r.length)!==n&&(!t.$$is_boolean||1==t))return"";(t=e===n)===n||t.$$is_boolean&&1!=t||(e=a[","]);for(var $=[],o=0,i=r.length;i>o;o++){var s=r[o];if(C.get("Opal")["$respond_to?"](s,"to_str")){var c=s.$to_str();if(c!==n){$.push(c.$to_s());continue}}if(C.get("Opal")["$respond_to?"](s,"to_ary")){var c=s.$to_ary();if(c!==n){$.push(c.$join(e));continue}}if(C.get("Opal")["$respond_to?"](s,"to_s")){var c=s.$to_s();if(c!==n){$.push(c);continue}}r.$raise(C.get("NoMethodError"),""+C.get("Opal").$inspect(s)+" doesn't respond to #to_str, #to_ary or #to_s")}return $.join(e===n?"":C.get("Opal")["$coerce_to!"](e,C.get("String"),"to_str").$to_s())},A.$keep_if=v=function(){var e=this,t=v.$$p,$=t||n;if(v.$$p=null,$===n)return e.$enum_for("keep_if");for(var o,a=0,i=e.length;i>a;a++){if((o=$(e[a]))===r)return r.$v;(o===!1||o===n)&&(e.splice(a,1),i--,a--)}return e},A.$last=function(e){var t=this;return null==e?0===t.length?n:t[t.length-1]:(e=C.get("Opal").$coerce_to(e,C.get("Integer"),"to_int"),0>e&&t.$raise(C.get("ArgumentError"),"negative array size"),e>t.length&&(e=t.length),t.slice(t.length-e,t.length))},A.$length=function(){var e=this;return e.length},e.defn(q,"$map",A.$collect),e.defn(q,"$map!",A["$collect!"]),A.$pop=function(e){var t,r=this;return(t=void 0===e)===n||t.$$is_boolean&&1!=t?(e=C.get("Opal").$coerce_to(e,C.get("Integer"),"to_int"),(t=0>e)===n||t.$$is_boolean&&1!=t||r.$raise(C.get("ArgumentError"),"negative array size"),(t=0===r.length)===n||t.$$is_boolean&&1!=t?(t=e>r.length)===n||t.$$is_boolean&&1!=t?r.splice(r.length-e,r.length):r.splice(0,r.length):[]):(t=0===r.length)===n||t.$$is_boolean&&1!=t?r.pop():n},A.$push=function(e){var t=this;e=$.call(arguments,0);for(var n=0,r=e.length;r>n;n++)t.push(e[n]);return t},A.$rassoc=function(e){for(var t,r=this,$=0,o=r.length;o>$;$++)if(t=r[$],t.length&&void 0!==t[1]&&t[1]["$=="](e))return t;return n},A.$reject=b=function(){var e=this,t=b.$$p,$=t||n;if(b.$$p=null,$===n)return e.$enum_for("reject");for(var o,a=[],i=0,s=e.length;s>i;i++){if((o=$(e[i]))===r)return r.$v;(o===!1||o===n)&&a.push(e[i])}return a},A["$reject!"]=y=function(){var e,t,r=this,$=y.$$p,o=$||n,a=n;return y.$$p=null,o===n?r.$enum_for("reject!"):(a=r.$length(),(e=(t=r).$delete_if,e.$$p=o.$to_proc(),e).call(t),r.$length()["$=="](a)?n:r)},A.$replace=function(e){var t,r=this;return e=(t=C.get("Array")["$==="](e))===n||t.$$is_boolean&&1!=t?C.get("Opal").$coerce_to(e,C.get("Array"),"to_ary").$to_a():e.$to_a(),r.splice(0,r.length),r.push.apply(r,e),r},A.$reverse=function(){var e=this;return e.slice(0).reverse()},A["$reverse!"]=function(){var e=this;return e.reverse()},A.$reverse_each=x=function(){var e,t,r=this,$=x.$$p,o=$||n;return x.$$p=null,o===n?r.$enum_for("reverse_each"):((e=(t=r.$reverse()).$each,e.$$p=o.$to_proc(),e).call(t),r)},A.$rindex=w=function(e){var t=this,$=w.$$p,o=$||n;if(w.$$p=null,null!=e){for(var a=t.length-1;a>=0;a--)if(t[a]["$=="](e))return a}else if(o!==n)for(var i,a=t.length-1;a>=0;a--){if((i=o(t[a]))===r)return r.$v;if(i!==!1&&i!==n)return a}else if(null==e)return t.$enum_for("rindex");return n},A.$sample=function(e){var t,r,$,o=this;return null==e&&(e=n),r=e["$!"](),(t=r!==!1&&r!==n?o["$empty?"]():r)===n||t.$$is_boolean&&1!=t?(t=(r=e!==!1&&e!==n)?o["$empty?"]():r)===n||t.$$is_boolean&&1!=t?e!==!1&&e!==n?(t=(r=i(1,e,!1)).$map,t.$$p=($=function(){var e=$.$$s||this;return e["$[]"](e.$rand(e.$length()))},$.$$s=o,$),t).call(r):o["$[]"](o.$rand(o.$length())):[]:n},A.$select=k=function(){var t=this,$=k.$$p,o=$||n;if(k.$$p=null,o===n)return t.$enum_for("select");for(var a,i,s=[],c=0,l=t.length;l>c;c++){if(a=t[c],(i=e.yield1(o,a))===r)return r.$v;i!==!1&&i!==n&&s.push(a)}return s},A["$select!"]=S=function(){var e,t,r=this,$=S.$$p,o=$||n;if(S.$$p=null,o===n)return r.$enum_for("select!");var a=r.length;return(e=(t=r).$keep_if,e.$$p=o.$to_proc(),e).call(t),r.length===a?n:r},A.$shift=function(e){var t,r=this;return(t=void 0===e)===n||t.$$is_boolean&&1!=t?(e=C.get("Opal").$coerce_to(e,C.get("Integer"),"to_int"),(t=0>e)===n||t.$$is_boolean&&1!=t||r.$raise(C.get("ArgumentError"),"negative array size"),(t=0===r.length)===n||t.$$is_boolean&&1!=t?r.splice(0,e):[]):(t=0===r.length)===n||t.$$is_boolean&&1!=t?r.shift():n},e.defn(q,"$size",A.$length),A.$shuffle=function(){var e=this;return e.$clone()["$shuffle!"]()},A["$shuffle!"]=function(){for(var e=this,t=e.length-1;t>0;t--){var n=e[t],r=Math.floor(Math.random()*(t+1));e[t]=e[r],e[r]=n}return e},e.defn(q,"$slice",A["$[]"]),A["$slice!"]=function(e,t){var r=this;return 0>e&&(e+=r.length),null!=t?r.splice(e,t):0>e||e>=r.length?n:r.splice(e,1)[0]},A.$sort=E=function(){var e,t=this,$=E.$$p,o=$||n;if(E.$$p=null,(e=t.length>1)===n||e.$$is_boolean&&1!=e)return t;o===n&&(o=function(e,t){return e["$<=>"](t)});try{return t.slice().sort(function(e,$){var a=o(e,$);if(a===r)throw r;return a===n&&t.$raise(C.get("ArgumentError"),"comparison of "+e.$inspect()+" with "+$.$inspect()+" failed"),a["$>"](0)?1:a["$<"](0)?-1:0})}catch(a){if(a===r)return r.$v;throw a}},A["$sort!"]=R=function(){var e,t,r=this,$=R.$$p,o=$||n;R.$$p=null;var a;a=o!==n?(e=(t=r.slice()).$sort,e.$$p=o.$to_proc(),e).call(t):r.slice().$sort(),r.length=0;for(var i=0,s=a.length;s>i;i++)r.push(a[i]);return r},A.$take=function(e){var t=this;return 0>e&&t.$raise(C.get("ArgumentError")),t.slice(0,e)},A.$take_while=O=function(){var e=this,t=O.$$p,$=t||n;O.$$p=null;for(var o,a,i=[],s=0,c=e.length;c>s;s++){if(o=e[s],(a=$(o))===r)return r.$v;if(a===!1||a===n)return i;i.push(o)}return i},A.$to_a=function(){var e=this;return e},e.defn(q,"$to_ary",A.$to_a),e.defn(q,"$to_s",A.$inspect),A.$transpose=function(){var e,t,r,$=this,o=n,a=n;return(e=$["$empty?"]())===n||e.$$is_boolean&&1!=e?(o=[],a=n,(e=(t=$).$each,e.$$p=(r=function(e){var t,$,i,s=r.$$s||this;return null==e&&(e=n),e=(t=C.get("Array")["$==="](e))===n||t.$$is_boolean&&1!=t?C.get("Opal").$coerce_to(e,C.get("Array"),"to_ary").$to_a():e.$to_a(),(t=a)!==!1&&t!==n?t:a=e.length,(t=e.length["$=="](a)["$!"]())===n||t.$$is_boolean&&1!=t||s.$raise(C.get("IndexError"),"element size differs ("+e.length+" should be "+a),(t=($=e.length).$times,t.$$p=(i=function(t){var r,$,a,s=(i.$$s||this,n);return null==t&&(t=n),r=t,$=o,s=(a=$["$[]"](r))!==!1&&a!==n?a:$["$[]="](r,[]),s["$<<"](e.$at(t))},i.$$s=s,i),t).call($)},r.$$s=$,r),e).call(t),o):[]},A.$uniq=function(){for(var e,t,n=this,r=[],$={},o=0,a=n.length;a>o;o++)e=n[o],t=e,$[t]||($[t]=!0,r.push(e));return r},A["$uniq!"]=function(){for(var e,t,r=this,$=r.length,o={},a=0,i=$;i>a;a++)e=r[a],t=e,o[t]?(r.splice(a,1),i--,a--):o[t]=!0;return r.length===$?n:r},A.$unshift=function(e){var t=this;e=$.call(arguments,0);for(var n=e.length-1;n>=0;n--)t.unshift(e[n]);return t},A.$zip=M=function(e){var t=this,r=M.$$p,o=r||n;e=$.call(arguments,0),M.$$p=null;for(var a,i,s=[],c=t.length,l=0;c>l;l++){a=[t[l]];for(var u=0,_=e.length;_>u;u++)i=e[u][l],null==i&&(i=n),a[u+1]=i;s[l]=a}if(o!==n){for(var l=0;c>l;l++)o(s[l]);return n}return s},n&&"zip"}(t,null)},Opal.modules["corelib/array/inheritance"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e,r=e.nil,$=(e.breaker,e.slice),o=e.klass;return e.add_stubs(["$new","$allocate","$initialize","$to_proc","$__send__","$clone","$respond_to?","$==","$eql?","$inspect","$*","$class","$slice","$uniq","$flatten"]),function(t,$super){function n(){}var $=n=o(t,$super,"Array",n),a=($.$$proto,$.$$scope);return e.defs($,"$inherited",function(e){var t=r;t=a.get("Class").$new(a.get("Array").$$scope.get("Wrapper")),e.$$proto=t.$$proto,e.$$proto.$$class=e,e.$$alloc=t.$$alloc,e.$$parent=a.get("Array").$$scope.get("Wrapper"),e.$allocate=t.$allocate,e.$new=t.$new,e["$[]"]=t["$[]"]}),r&&"inherited"}(t,null),function(t,$super){function n(){}var a,i,s,c,l,u=n=o(t,$super,"Wrapper",n),_=u.$$proto,p=u.$$scope;return _.literal=r,e.defs(u,"$allocate",a=function(t){var $=this,o=(a.$$p,r);return null==t&&(t=[]),a.$$p=null,o=e.find_super_dispatcher($,"allocate",a,null,n).apply($,[]),o.literal=t,o}),e.defs(u,"$new",i=function(e){var t,n,o=this,a=i.$$p,s=a||r,c=r;return e=$.call(arguments,0),i.$$p=null,c=o.$allocate(),(t=(n=c).$initialize,t.$$p=s.$to_proc(),t).apply(n,[].concat(e)),c}),e.defs(u,"$[]",function(e){var t=this;return e=$.call(arguments,0),t.$allocate(e)}),_.$initialize=s=function(e){var t,n,o=this,a=s.$$p,i=a||r;return e=$.call(arguments,0),s.$$p=null,o.literal=(t=(n=p.get("Array")).$new,t.$$p=i.$to_proc(),t).apply(n,[].concat(e))},_.$method_missing=c=function(e){var t,n,o=this,a=c.$$p,i=a||r,s=r;return e=$.call(arguments,0),c.$$p=null,s=(t=(n=o.literal).$__send__,t.$$p=i.$to_proc(),t).apply(n,[].concat(e)),(t=s===o.literal)===r||t.$$is_boolean&&1!=t?s:o},_.$initialize_copy=function(e){var t=this;return t.literal=e.literal.$clone()},_["$respond_to?"]=l=function(t){var n,o=$.call(arguments,0),a=this,i=l.$$p;return l.$$p=null,(n=e.find_super_dispatcher(a,"respond_to?",l,i).apply(a,o))!==!1&&n!==r?n:a.literal["$respond_to?"](t)},_["$=="]=function(e){var t=this;return t.literal["$=="](e)},_["$eql?"]=function(e){var t=this;return t.literal["$eql?"](e)},_.$to_a=function(){var e=this;return e.literal},_.$to_ary=function(){var e=this;return e},_.$inspect=function(){var e=this;return e.literal.$inspect()},_["$*"]=function(e){var t=this,n=t.literal["$*"](e);return n.$$is_array?t.$class().$allocate(n):n},_["$[]"]=function(e,t){var n=this,r=n.literal.$slice(e,t);return r.$$is_array&&(e.$$is_range||void 0!==t)?n.$class().$allocate(r):r},e.defn(u,"$slice",_["$[]"]),_.$uniq=function(){var e=this;return e.$class().$allocate(e.literal.$uniq())},_.$flatten=function(e){var t=this;return t.$class().$allocate(t.literal.$flatten(e))},r&&"flatten"}(n.get("Array"),null)},Opal.modules["corelib/hash"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=e.breaker,$=e.slice,o=e.klass;return e.add_stubs(["$require","$include","$!","$==","$call","$coerce_to!","$lambda?","$abs","$arity","$raise","$enum_for","$flatten","$eql?","$object_id","$===","$clone","$merge!","$to_proc","$alias_method"]),t.$require("corelib/enumerable"),function(t,$super){function a(){}var i,s,c,l,u,_,p,d,f,h,m,g,v,b=a=o(t,$super,"Hash",a),y=b.$$proto,x=b.$$scope;y.proc=y.none=n,b.$include(x.get("Enumerable")),e.defs(b,"$[]",function(t){return t=$.call(arguments,0),e.hash.apply(null,t)}),e.defs(b,"$allocate",function(){var e=this,t=new e.$$alloc;return t.map={},t.keys=[],t.none=n,t.proc=n,t}),y.$initialize=i=function(e){var t=this,r=i.$$p,$=r||n;return i.$$p=null,t.none=void 0===e?n:e,t.proc=$,t},y["$=="]=function(e){var t=this;if(t===e)return!0;if(!e.map||!e.keys)return!1;if(t.keys.length!==e.keys.length)return!1;for(var n=t.map,r=e.map,$=0,o=t.keys.length;o>$;$++){var a=t.keys[$],i=a.$hash(),s=n[i],c=r[i];if(void 0===c||s["$=="](c)["$!"]())return!1}return!0},y["$[]"]=function(t){var r=this,$=r.map,o=t.$hash();if(e.hasOwnProperty.call($,o))return $[o];var a=r.proc;return a!==n?a.$call(r,t):r.none},y["$[]="]=function(t,n){var r=this,$=r.map,o=t.$hash();return e.hasOwnProperty.call($,o)||r.keys.push(t),$[o]=n,n},y.$assoc=function(e){for(var t,r=this,$=r.keys,o=0,a=$.length;a>o;o++)if(t=$[o],t["$=="](e))return[t,r.map[t.$hash()]];return n},y.$clear=function(){var e=this;return e.map={},e.keys=[],e},y.$clone=function(){for(var e,t,n,r=this,$={},o=[],a=0,i=r.keys.length;i>a;a++)t=r.keys[a],e=t.$hash(),n=r.map[e],o.push(t),$[e]=n;var s=new r.$$class.$$alloc;return s.map=$,s.keys=o,s.none=r.none,s.proc=r.proc,s},y.$default=function(e){var t=this;return void 0!==e&&t.proc!==n?t.proc.$call(t,e):t.none},y["$default="]=function(e){var t=this;return t.proc=n,t.none=e},y.$default_proc=function(){var e=this;return e.proc},y["$default_proc="]=function(e){var t=this;return e!==n&&(e=x.get("Opal")["$coerce_to!"](e,x.get("Proc"),"to_proc"),e["$lambda?"]()&&2!=e.$arity().$abs()&&t.$raise(x.get("TypeError"),"default_proc takes two arguments")),t.none=n,t.proc=e},y.$delete=s=function(e){var t=this,r=s.$$p,$=r||n;s.$$p=null;var o=t.map,a=e.$hash(),i=o[a];return null!=i?(delete o[a],t.keys.$delete(e),i):$!==n?$.$call(e):n},y.$delete_if=c=function(){var e=this,t=c.$$p,$=t||n;if(c.$$p=null,$===!1||$===n)return e.$enum_for("delete_if");for(var o,a,i,s,l=e.map,u=e.keys,_=0,p=u.length;p>_;_++){if(o=u[_],s=o.$hash(),i=l[s],(a=$(o,i))===r)return r.$v;a!==!1&&a!==n&&(u.splice(_,1),delete l[s],p--,_--)}return e},e.defn(b,"$dup",y.$clone),y.$each=l=function(){var t=this,$=l.$$p,o=$||n;if(l.$$p=null,o===!1||o===n)return t.$enum_for("each");for(var a,i,s,c=t.map,u=t.keys,_=0,p=u.length;p>_;_++)if(a=u[_],s=a.$hash(),i=e.yield1(o,[a,c[s]]),i===r)return r.$v;return t},y.$each_key=u=function(){var e=this,t=u.$$p,$=t||n;if(u.$$p=null,$===!1||$===n)return e.$enum_for("each_key");for(var o,a=e.keys,i=0,s=a.length;s>i;i++)if(o=a[i],$(o)===r)return r.$v;return e},e.defn(b,"$each_pair",y.$each),y.$each_value=_=function(){var e=this,t=_.$$p,$=t||n;if(_.$$p=null,$===!1||$===n)return e.$enum_for("each_value");for(var o=e.map,a=e.keys,i=0,s=a.length;s>i;i++)if($(o[a[i].$hash()])===r)return r.$v;return e},y["$empty?"]=function(){var e=this;return 0===e.keys.length},e.defn(b,"$eql?",y["$=="]),y.$fetch=p=function(e,t){var $=this,o=p.$$p,a=o||n;p.$$p=null;var i=e.$hash(),s=$.map[i];if(null!=s)return s;if(a!==n){var s;return(s=a(e))===r?r.$v:s}return null!=t?t:void $.$raise(x.get("KeyError"),"key not found")},y.$flatten=function(e){for(var t,n,r,$=this,o=$.map,a=$.keys,i=[],s=0,c=a.length;c>s;s++)t=a[s],n=t.$hash(),r=o[n],i.push(t),r.$$is_array?null==e||1===e?i.push(r):i=i.concat(r.$flatten(e-1)):i.push(r);return i},y["$has_key?"]=function(t){var n=this,r=(n.map,n.keys),$=t.$hash();if(e.hasOwnProperty.call(n.map,$))for(var o=0,a=r.length;a>o;o++)if(!t["$eql?"](r[o])["$!"]())return!0;return!1},y["$has_value?"]=function(e){var t=this;for(var n in t.map)if(t.map[n]["$=="](e))return!0;return!1},e.defn(b,"$include?",y["$has_key?"]),y.$index=function(e){for(var t,r,$=this,o=$.map,a=$.keys,i=0,s=a.length;s>i;i++)if(t=a[i],r=t.$hash(),o[r]["$=="](e))return t;return n},y.$indexes=function(e){var t=this;e=$.call(arguments,0);for(var n,r,o,a=[],i=t.map,s=0,c=e.length;c>s;s++)n=e[s],r=n.$hash(),o=i[r],a.push(null!=o?o:t.none);return a},e.defn(b,"$indices",y.$indexes);var w={};return y.$inspect=function(){var e=this;try{var t=[],n=e.keys;if(map=e.map,top=!!w,id=e.$object_id(),seen="{...}",w.hasOwnProperty(id))return seen;w[id]=!0;for(var r=0,$=n.length;$>r;r++){var o=n[r],a=map[o.$hash()];a=a.$inspect(),o=o.$inspect(),t.push(o+"=>"+a)}return"{"+t.join(", ")+"}"}finally{top&&(w={})}},y.$invert=function(){for(var t=this,n=e.hash(),r=t.keys,$=t.map,o=n.keys,a=n.map,i=0,s=r.length;s>i;i++){var c=r[i],l=c.$hash(),u=$[l];o.push(u),a[u.$hash()]=c}return n},y.$keep_if=d=function(){var e=this,t=d.$$p,$=t||n;if(d.$$p=null,$===!1||$===n)return e.$enum_for("keep_if");for(var o,a=e.map,i=e.keys,s=0,c=i.length;c>s;s++){var l=i[s],u=a[l.$hash()];if((o=$(l,u))===r)return r.$v;(o===!1||o===n)&&(i.splice(s,1),delete a[l.$hash()],c--,s--)}return e},e.defn(b,"$key",y.$index),e.defn(b,"$key?",y["$has_key?"]),y.$keys=function(){var e=this;return e.keys.slice(0)},y.$length=function(){var e=this;return e.keys.length},e.defn(b,"$member?",y["$has_key?"]),y.$merge=f=function(e){var t,r,$=this,o=f.$$p,a=o||n,i=n;return f.$$p=null,((t=x.get("Hash")["$==="](e))===n||t.$$is_boolean&&1!=t)&&(e=x.get("Opal")["$coerce_to!"](e,x.get("Hash"),"to_hash")),i=$.$clone(),(t=(r=i)["$merge!"],t.$$p=a.$to_proc(),t).call(r,e),i},y["$merge!"]=h=function(e){var t=this,r=h.$$p,$=r||n;h.$$p=null,x.get("Hash")["$==="](e)||(e=x.get("Opal")["$coerce_to!"](e,x.get("Hash"),"to_hash"));var o=t.keys,a=t.map,i=e.keys,s=e.map;if($===n)for(var c=0,l=i.length;l>c;c++){var u=i[c],_=u.$hash();null==a[_]&&o.push(u),a[_]=s[_]}else for(var c=0,l=i.length;l>c;c++){var u=i[c],_=u.$hash(),p=a[_],d=s[_];null==p?(o.push(u),a[_]=d):a[_]=$(u,p,d)}return t},y.$rassoc=function(e){for(var t=this,r=t.keys,$=t.map,o=0,a=r.length;a>o;o++){var i=r[o],s=$[i.$hash()];if(s["$=="](e))return[i,s]}return n},y.$reject=m=function(){var t=this,$=m.$$p,o=$||n;if(m.$$p=null,o===!1||o===n)return t.$enum_for("reject");for(var a=t.keys,i=t.map,s=e.hash(),c=s.map,l=s.keys,u=0,_=a.length;_>u;u++){var p,d=a[u],f=d.$hash(),h=i[f];if((p=o(d,h))===r)return r.$v;(p===!1||p===n)&&(l.push(d),c[f]=h)}return s},y.$replace=function(e){for(var t=this,n=t.map={},r=t.keys=[],$=0,o=e.keys.length;o>$;$++){var a=e.keys[$],i=a.$hash();r.push(a),n[i]=e.map[i]}return t},y.$select=g=function(){var t=this,$=g.$$p,o=$||n;if(g.$$p=null,o===!1||o===n)return t.$enum_for("select");for(var a=t.keys,i=t.map,s=e.hash(),c=s.map,l=s.keys,u=0,_=a.length;_>u;u++){var p,d=a[u],f=d.$hash(),h=i[f];if((p=o(d,h))===r)return r.$v;p!==!1&&p!==n&&(l.push(d),c[f]=h)}return s},y["$select!"]=v=function(){var e=this,t=v.$$p,$=t||n;if(v.$$p=null,$===!1||$===n)return e.$enum_for("select!");for(var o,a=e.map,i=e.keys,s=n,c=0,l=i.length;l>c;c++){var u=i[c],_=u.$hash(),p=a[_];if((o=$(u,p))===r)return r.$v;(o===!1||o===n)&&(i.splice(c,1),delete a[_],l--,c--,s=e)}return s},y.$shift=function(){var e=this,t=e.keys,r=e.map;if(t.length){var $=t[0],o=$.$hash(),a=r[o];return delete r[o],t.splice(0,1),[$,a]}return n},e.defn(b,"$size",y.$length),b.$alias_method("store","[]="),y.$to_a=function(){for(var e=this,t=e.keys,n=e.map,r=[],$=0,o=t.length;o>$;$++){var a=t[$],i=a.$hash();r.push([a,n[i]])}return r},y.$to_h=function(){var t=this;if(t.$$class===e.Hash)return t;var n=new e.Hash.$$alloc,r=t.$clone();return n.map=r.map,n.keys=r.keys,n.none=r.none,n.proc=r.proc,n},y.$to_hash=function(){var e=this;return e},e.defn(b,"$to_s",y.$inspect),e.defn(b,"$update",y["$merge!"]),e.defn(b,"$value?",y["$has_value?"]),e.defn(b,"$values_at",y.$indexes),y.$values=function(){var e=this,t=e.map,n=[];for(var r in t)n.push(t[r.$hash()]);return n},n&&"values"}(t,null)},Opal.modules["corelib/string"]=function(Opal){Opal.dynamic_require_severity="warning";var self=Opal.top,$scope=Opal,nil=Opal.nil,$breaker=Opal.breaker,$slice=Opal.slice,$klass=Opal.klass,$gvars=Opal.gvars;return Opal.add_stubs(["$require","$include","$to_str","$===","$format","$coerce_to","$to_s","$respond_to?","$<=>","$raise","$=~","$empty?","$ljust","$ceil","$/","$+","$rjust","$floor","$to_a","$each_char","$to_proc","$coerce_to!","$initialize_clone","$initialize_dup","$enum_for","$split","$chomp","$escape","$class","$to_i","$!","$each_line","$match","$new","$try_convert","$chars","$&","$join","$is_a?","$[]","$str","$value","$proc","$shift","$send"]),self.$require("corelib/comparable"),function($base,$super){function $String(){}function convertReplace(e){return e.replace(/(^|[^\\])\\\\(\d)/g,"$1\\$2").replace(/(^|[^\\])(\\\\)+\\\\(\d)/g,"$1$2\\$3").replace(/(^|[^\\])(?:(\\)\\)+([^\\]|$)/g,"$1$2$3")}var self=$String=$klass($base,$super,"String",$String),def=self.$$proto,$scope=self.$$scope,TMP_1,TMP_2,TMP_3,TMP_4,TMP_5,TMP_6,TMP_7;return def.length=nil,self.$include($scope.get("Comparable")),def.$$is_string=!0,Opal.defs(self,"$try_convert",function(e){try{return e.$to_str()}catch(t){return nil}}),Opal.defs(self,"$new",function(e){return null==e&&(e=""),new String(e)}),def["$%"]=function(e){var t,n=this;return(t=$scope.get("Array")["$==="](e))===nil||t.$$is_boolean&&1!=t?n.$format(n,e):(t=n).$format.apply(t,[n].concat(e))},def["$*"]=function(e){var t=this;if(1>e)return"";for(var n="",r=t;e>0;)1&e&&(n+=r),e>>=1,r+=r;return n},def["$+"]=function(e){var t=this;return e=$scope.get("Opal").$coerce_to(e,$scope.get("String"),"to_str"),t+e.$to_s()},def["$<=>"]=function(e){var t,n=this;if((t=e["$respond_to?"]("to_str"))===nil||t.$$is_boolean&&1!=t){var r=e["$<=>"](n);return r===nil?nil:r>0?-1:0>r?1:0}return e=e.$to_str().$to_s(),n>e?1:e>n?-1:0},def["$<<"]=function(){var e=this;return e.$raise($scope.get("NotImplementedError"),"Mutable String methods are not supported in Opal.")},def["$=="]=function(e){var t,n=this;return(t=$scope.get("String")["$==="](e))===nil||t.$$is_boolean&&1!=t?!1:n.$to_s()==e.$to_s()},Opal.defn(self,"$eql?",def["$=="]),Opal.defn(self,"$===",def["$=="]),def["$=~"]=function(e){var t=this;return e.$$is_string&&t.$raise($scope.get("TypeError"),"type mismatch: String given"),e["$=~"](t)},def["$[]"]=function(e,t){var n=this,r=n.length;if(e.$$is_range){var $=e.exclude,t=e.end,e=e.begin;return 0>e&&(e+=r),0>t&&(t+=r),$||(t+=1),e>r?nil:(t-=e,0>t&&(t=0),n.substr(e,t))}return 0>e&&(e+=n.length),null==t?e>=n.length||0>e?nil:n.substr(e,1):e>n.length||0>e?nil:n.substr(e,t)},def.$capitalize=function(){var e=this;return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()},Opal.defn(self,"$capitalize!",def["$<<"]),def.$casecmp=function(e){var t=this;return e=$scope.get("Opal").$coerce_to(e,$scope.get("String"),"to_str").$to_s(),t.toLowerCase()["$<=>"](e.toLowerCase())},def.$center=function(e,t){var n,r=this;if(null==t&&(t=" "),e=$scope.get("Opal").$coerce_to(e,$scope.get("Integer"),"to_int"),t=$scope.get("Opal").$coerce_to(t,$scope.get("String"),"to_str").$to_s(),(n=t["$empty?"]())===nil||n.$$is_boolean&&1!=n||r.$raise($scope.get("ArgumentError"),"zero width padding"),(n=e<=r.length)!==nil&&(!n.$$is_boolean||1==n))return r;var $=r.$ljust(e["$+"](r.length)["$/"](2).$ceil(),t),o=r.$rjust(e["$+"](r.length)["$/"](2).$floor(),t);return o+$.slice(r.length)},def.$chars=TMP_1=function(){var e,t,n=this,r=TMP_1.$$p,$=r||nil;return TMP_1.$$p=null,$===!1||$===nil?n.$each_char().$to_a():(e=(t=n).$each_char,e.$$p=$.$to_proc(),e).call(t)},def.$chomp=function(e){var t,n=this;if(null==$gvars["/"]&&($gvars["/"]=nil),null==e&&(e=$gvars["/"]),(t=e===nil||0===n.length)!==nil&&(!t.$$is_boolean||1==t))return n;if(e=$scope.get("Opal")["$coerce_to!"](e,$scope.get("String"),"to_str").$to_s(),"\n"===e)return n.replace(/\r?\n?$/,"");
if(""===e)return n.replace(/(\r?\n)+$/,"");if(n.length>e.length){var r=n.substr(n.length-e.length,e.length);if(r===e)return n.substr(0,n.length-e.length)}return n},Opal.defn(self,"$chomp!",def["$<<"]),def.$chop=function(){var e=this,t=e.length;return 1>=t?"":"\n"===e.charAt(t-1)&&"\r"===e.charAt(t-2)?e.substr(0,t-2):e.substr(0,t-1)},Opal.defn(self,"$chop!",def["$<<"]),def.$chr=function(){var e=this;return e.charAt(0)},def.$clone=function(){var e=this,t=nil;return t=e.slice(),t.$initialize_clone(e),t},def.$dup=function(){var e=this,t=nil;return t=e.slice(),t.$initialize_dup(e),t},def.$count=function(e){var t=this;return(t.length-t.replace(new RegExp(e,"g"),"").length)/e.length},Opal.defn(self,"$dup",def.$clone),def.$downcase=function(){var e=this;return e.toLowerCase()},Opal.defn(self,"$downcase!",def["$<<"]),def.$each_char=TMP_2=function(){var e,t=this,n=TMP_2.$$p,r=n||nil;if(TMP_2.$$p=null,r===nil)return t.$enum_for("each_char");for(var $=0,o=t.length;o>$;$++)(e=Opal.yield1(r,t.charAt($)))===$breaker?$breaker.$v:e;return t},def.$each_line=TMP_3=function(e){var t,n=this,r=TMP_3.$$p,$=r||nil;if(null==$gvars["/"]&&($gvars["/"]=nil),null==e&&(e=$gvars["/"]),TMP_3.$$p=null,$===nil)return n.$split(e);for(var o=n.$chomp(),a=n.length!=o.length,i=o.split(e),s=0,c=i.length;c>s;s++)c-1>s||a?(t=Opal.yield1($,i[s]+e))===$breaker?$breaker.$v:t:(t=Opal.yield1($,i[s]))===$breaker?$breaker.$v:t;return n},def["$empty?"]=function(){var e=this;return 0===e.length},def["$end_with?"]=function(e){var t=this;e=$slice.call(arguments,0);for(var n=0,r=e.length;r>n;n++){var $=$scope.get("Opal").$coerce_to(e[n],$scope.get("String"),"to_str").$to_s();if(t.length>=$.length&&t.substr(t.length-$.length,$.length)==$)return!0}return!1},Opal.defn(self,"$eql?",def["$=="]),Opal.defn(self,"$equal?",def["$==="]),def.$gsub=TMP_4=function(e,t){var n,r,$=this,o=TMP_4.$$p,a=o||nil;TMP_4.$$p=null,(n=(r=$scope.get("String")["$==="](e))!==!1&&r!==nil?r:e["$respond_to?"]("to_str"))===nil||n.$$is_boolean&&1!=n||(e=new RegExp(""+$scope.get("Regexp").$escape(e.$to_str()))),((n=$scope.get("Regexp")["$==="](e))===nil||n.$$is_boolean&&1!=n)&&$.$raise($scope.get("TypeError"),"wrong argument type "+e.$class()+" (expected Regexp)");var e=e.toString(),i=e.substr(e.lastIndexOf("/")+1)+"g",s=e.substr(1,e.lastIndexOf("/")-1);return $.$sub.$$p=a,$.$sub(new RegExp(s,i),t)},Opal.defn(self,"$gsub!",def["$<<"]),def.$hash=function(){var e=this;return e.toString()},def.$hex=function(){var e=this;return e.$to_i(16)},def["$include?"]=function(e){var t,n=this;return e.$$is_string?-1!==n.indexOf(e):(((t=e["$respond_to?"]("to_str"))===nil||t.$$is_boolean&&1!=t)&&n.$raise($scope.get("TypeError"),"no implicit conversion of "+e.$class()+" into String"),-1!==n.indexOf(e.$to_str()))},def.$index=function(e,t){var n,r=this,$=nil;if(null==t&&(t=nil),(n=$scope.get("String")["$==="](e))===nil||n.$$is_boolean&&1!=n?(n=e["$respond_to?"]("to_str"))===nil||n.$$is_boolean&&1!=n?(n=$scope.get("Regexp")["$==="](e)["$!"]())===nil||n.$$is_boolean&&1!=n||r.$raise($scope.get("TypeError"),"type mismatch: "+e.$class()+" given"):e=e.$to_str().$to_s():e=e.$to_s(),$=-1,t!==!1&&t!==nil){t=$scope.get("Opal").$coerce_to(t,$scope.get("Integer"),"to_int");var o=r.length;if(0>t&&(t+=o),t>o)return nil;$=(n=$scope.get("Regexp")["$==="](e))===nil||n.$$is_boolean&&1!=n?r.substr(t).indexOf(e):(n=e["$=~"](r.substr(t)))!==!1&&n!==nil?n:-1,-1!==$&&($+=t)}else $=(n=$scope.get("Regexp")["$==="](e))===nil||n.$$is_boolean&&1!=n?r.indexOf(e):(n=e["$=~"](r))!==!1&&n!==nil?n:-1;return(n=-1===$)===nil||n.$$is_boolean&&1!=n?$:nil},def.$inspect=function(){var e=this,t=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return t.lastIndex=0,t.test(e)?'"'+e.replace(t,function(e){var t=n[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'},def.$intern=function(){var e=this;return e},def.$lines=function(e){var t=this;return null==$gvars["/"]&&($gvars["/"]=nil),null==e&&(e=$gvars["/"]),t.$each_line(e).$to_a()},def.$length=function(){var e=this;return e.length},def.$ljust=function(e,t){var n,r=this;if(null==t&&(t=" "),e=$scope.get("Opal").$coerce_to(e,$scope.get("Integer"),"to_int"),t=$scope.get("Opal").$coerce_to(t,$scope.get("String"),"to_str").$to_s(),(n=t["$empty?"]())===nil||n.$$is_boolean&&1!=n||r.$raise($scope.get("ArgumentError"),"zero width padding"),(n=e<=r.length)!==nil&&(!n.$$is_boolean||1==n))return r;var $=-1,o="";for(e-=r.length;++$<e;)o+=t;return r+o.slice(0,e)},def.$lstrip=function(){var e=this;return e.replace(/^\s*/,"")},Opal.defn(self,"$lstrip!",def["$<<"]),def.$match=TMP_5=function(e,t){var n,r,$=this,o=TMP_5.$$p,a=o||nil;return TMP_5.$$p=null,(n=(r=$scope.get("String")["$==="](e))!==!1&&r!==nil?r:e["$respond_to?"]("to_str"))===nil||n.$$is_boolean&&1!=n||(e=new RegExp(""+$scope.get("Regexp").$escape(e.$to_str()))),((n=$scope.get("Regexp")["$==="](e))===nil||n.$$is_boolean&&1!=n)&&$.$raise($scope.get("TypeError"),"wrong argument type "+e.$class()+" (expected Regexp)"),(n=(r=e).$match,n.$$p=a.$to_proc(),n).call(r,$,t)},def.$next=function(){var e=this;if(0===e.length)return"";var t=e.substr(0,e.length-1),n=String.fromCharCode(e.charCodeAt(e.length-1)+1);return t+n},Opal.defn(self,"$next!",def["$<<"]),def.$ord=function(){var e=this;return e.charCodeAt(0)},def.$partition=function(e){var t=this,n=t.split(e),r=n[0].length===t.length?"":e;return[n[0],r,n.slice(1).join(e.toString())]},def.$reverse=function(){var e=this;return e.split("").reverse().join("")},Opal.defn(self,"$reverse!",def["$<<"]),def.$rindex=function(e,t){var n=this,r=null==e?Opal.NilClass:e.constructor;if(r!=String&&r!=RegExp){var $="type mismatch: "+r+" given";n.$raise($scope.get("TypeError").$new($))}if(0==n.length)return 0==e.length?0:nil;var o=-1;return null!=t?(0>t&&(t=n.length+t),r==String?o=n.lastIndexOf(e,t):(o=n.substr(0,t+1).$reverse().search(e),-1!==o&&(o=t-o))):r==String?o=n.lastIndexOf(e):(o=n.$reverse().search(e),-1!==o&&(o=n.length-1-o)),-1===o?nil:o},def.$rjust=function(e,t){var n,r=this;if(null==t&&(t=" "),e=$scope.get("Opal").$coerce_to(e,$scope.get("Integer"),"to_int"),t=$scope.get("Opal").$coerce_to(t,$scope.get("String"),"to_str").$to_s(),(n=t["$empty?"]())===nil||n.$$is_boolean&&1!=n||r.$raise($scope.get("ArgumentError"),"zero width padding"),(n=e<=r.length)!==nil&&(!n.$$is_boolean||1==n))return r;var $=Math.floor(e-r.length),o=Math.floor($/t.length),a=Array(o+1).join(t),i=$-a.length;return a+t.slice(0,i)+r},def.$rstrip=function(){var e=this;return e.replace(/\s*$/,"")},def.$scan=TMP_6=function(e){var t=this,n=TMP_6.$$p,r=n||nil;TMP_6.$$p=null,e.global?e.lastIndex=0:e=new RegExp(e.source,"g"+(e.multiline?"m":"")+(e.ignoreCase?"i":""));for(var $,o=[];null!=($=e.exec(t));){{$scope.get("MatchData").$new(e,$)}r===nil?o.push(1==$.length?$[0]:$.slice(1)):1==$.length?r($[0]):r.apply(t,$.slice(1))}return r!==nil?t:o},Opal.defn(self,"$size",def.$length),Opal.defn(self,"$slice",def["$[]"]),Opal.defn(self,"$slice!",def["$<<"]),def.$split=function(pattern,limit){var self=this,$a;null==$gvars[";"]&&($gvars[";"]=nil),null==pattern&&(pattern=($a=$gvars[";"])!==!1&&$a!==nil?$a:" "),(pattern===nil||void 0===pattern)&&(pattern=$gvars[";"]);var result=[];if(void 0!==limit&&(limit=$scope.get("Opal")["$coerce_to!"](limit,$scope.get("Integer"),"to_int")),0===self.length)return[];if(1===limit)return[self];if(pattern&&pattern.$$is_regexp){var pattern_str=pattern.toString(),blank_pattern="/^/"==pattern_str.substr(0,3)||"/(?:)/"==pattern_str.substr(0,6);if(void 0===limit||0===limit)result=self.split(blank_pattern?/(?:)/:pattern);else{pattern.global||(pattern=eval(pattern_str+"g"));var match_data,prev_index=0;for(pattern.lastIndex=0;null!==(match_data=pattern.exec(self));){var segment=self.slice(prev_index,match_data.index);if(result.push(segment),prev_index=pattern.lastIndex,0===match_data[0].length){blank_pattern&&(pattern=/(?:)/),result=self.split(pattern),void 0!==limit&&0>limit&&blank_pattern&&result.push(""),prev_index=void 0;break}if(void 0!==limit&&limit>1&&result.length+1==limit)break}void 0!==prev_index&&result.push(self.slice(prev_index,self.length))}}else{var splitted=0,start=0,lim=0;pattern=pattern===nil||void 0===pattern?" ":$scope.get("Opal").$try_convert(pattern,$scope.get("String"),"to_str").$to_s();for(var string=" "==pattern?self.replace(/[\r\n\t\v]\s+/g," "):self,cursor=-1;(cursor=string.indexOf(pattern,start))>-1&&cursor<string.length&&splitted+1!==limit;)" "!=pattern||cursor!=start?(result.push(string.substr(start,pattern.length?cursor-start:1)),splitted++,start=cursor+(pattern.length?pattern.length:1)):start=cursor+1;string.length>0&&(0>limit||string.length>start)&&result.push(string.length==start?"":string.substr(start,string.length))}if(void 0===limit||0===limit)for(;""===result[result.length-1];)result.length=result.length-1;if(limit>0){var tail=result.slice(limit-1).join("");result.splice(limit-1,result.length-1,tail)}return result},def.$squeeze=function(e){var t=this;if(e=$slice.call(arguments,0),0===e.length)return t.replace(/(.)\1+/g,"$1");for(var n=$scope.get("Opal").$coerce_to(e[0],$scope.get("String"),"to_str").$chars(),r=1,$=e.length;$>r;r++)n=n["$&"]($scope.get("Opal").$coerce_to(e[r],$scope.get("String"),"to_str").$chars());return 0===n.length?t:t.replace(new RegExp("(["+$scope.get("Regexp").$escape(n.$join())+"])\\1+","g"),"$1")},Opal.defn(self,"$squeeze!",def["$<<"]),def["$start_with?"]=function(e){var t=this;e=$slice.call(arguments,0);for(var n=0,r=e.length;r>n;n++){var $=$scope.get("Opal").$coerce_to(e[n],$scope.get("String"),"to_str").$to_s();if(0===t.indexOf($))return!0}return!1},def.$strip=function(){var e=this;return e.replace(/^\s*/,"").replace(/\s*$/,"")},Opal.defn(self,"$strip!",def["$<<"]),def.$sub=TMP_7=function(e,t){var n=this,r=TMP_7.$$p,$=r||nil;return TMP_7.$$p=null,"string"==typeof e||e.$$is_regexp||(e=$scope.get("Opal")["$coerce_to!"](e,$scope.get("String"),"to_str")),void 0!==t?t["$is_a?"]($scope.get("Hash"))?n.replace(e,function(){var e=t["$[]"](n.$str());return null==e?nil:n.$value().$to_s()}):("string"!=typeof t&&(t=$scope.get("Opal")["$coerce_to!"](t,$scope.get("String"),"to_str")),t=convertReplace(t),n.replace(e,t)):null!=$&&$!==nil?n.replace(e,function(){for(var e=[],t=0,n=arguments.length;n>t;t++){var r=arguments[t];e.push(void 0==r?nil:r)}for(var o=(e.pop(),e.pop(),e.length),t=1;o>t;t++)Opal.gvars[String(t)]=e[t];return $gvars["&"]=e[0],$gvars["~"]=e,$(e[0])}):void n.$raise($scope.get("ArgumentError"),"wrong number of arguments (1 for 2)")},Opal.defn(self,"$sub!",def["$<<"]),Opal.defn(self,"$succ",def.$next),Opal.defn(self,"$succ!",def["$<<"]),def.$sum=function(e){var t=this;null==e&&(e=16);for(var n=0,r=0,$=t.length;$>r;r++)n+=t.charCodeAt(r)%((1<<e)-1);return n},def.$swapcase=function(){var e=this,t=e.replace(/([a-z]+)|([A-Z]+)/g,function(e,t){return t?e.toUpperCase():e.toLowerCase()});return e.constructor===String?t:e.$class().$new(t)},Opal.defn(self,"$swapcase!",def["$<<"]),def.$to_f=function(){var e=this;if("_"===e.charAt(0))return 0;var t=parseFloat(e.replace(/_/g,""));return isNaN(t)||1/0==t||t==-1/0?0:t},def.$to_i=function(e){var t=this;null==e&&(e=10);var n=parseInt(t,e);return isNaN(n)?0:n},def.$to_proc=function(){var e,t,n,r=this,$=nil;return $=r,(e=(t=r).$proc,e.$$p=(n=function(e){var t,r,o,a=n.$$s||this,i=nil;return e=$slice.call(arguments,0),t=n.$$p||nil,n.$$p=null,(r=e["$empty?"]())===nil||r.$$is_boolean&&1!=r||a.$raise($scope.get("ArgumentError"),"no receiver given"),i=e.$shift(),(r=(o=i).$send,r.$$p=t.$to_proc(),r).apply(o,[$].concat(e))},n.$$s=r,n),e).call(t)},def.$to_s=function(){var e=this;return e.toString()},Opal.defn(self,"$to_str",def.$to_s),Opal.defn(self,"$to_sym",def.$intern),def.$tr=function(e,t){var n=this;if(0==e.length||e===t)return n;var r={},$=e.split(""),o=$.length,a=t.split(""),i=a.length,s=!1,c=null;"^"===$[0]&&(s=!0,$.shift(),c=a[i-1],o-=1);for(var l=[],u=null,_=!1,p=0;o>p;p++){var d=$[p];if(null==u)u=d,l.push(d);else if("-"===d)"-"===u?(l.push("-"),l.push("-")):p==o-1?l.push("-"):_=!0;else if(_){for(var f=u.charCodeAt(0)+1,h=d.charCodeAt(0),m=f;h>m;m++)l.push(String.fromCharCode(m));l.push(d),_=null,u=null}else l.push(d)}if($=l,o=$.length,s)for(var p=0;o>p;p++)r[$[p]]=!0;else{if(i>0){for(var g=[],v=null,_=!1,p=0;i>p;p++){var d=a[p];if(null==u)u=d,g.push(d);else if("-"===d)"-"===v?(g.push("-"),g.push("-")):p==i-1?g.push("-"):_=!0;else if(_){for(var f=u.charCodeAt(0)+1,h=d.charCodeAt(0),m=f;h>m;m++)g.push(String.fromCharCode(m));g.push(d),_=null,u=null}else g.push(d)}a=g,i=a.length}var b=o-i;if(b>0)for(var y=i>0?a[i-1]:"",p=0;b>p;p++)a.push(y);for(var p=0;o>p;p++)r[$[p]]=a[p]}for(var x="",p=0,w=n.length;w>p;p++){var d=n.charAt(p),k=r[d];x+=s?null==k?c:d:null!=k?k:d}return x},Opal.defn(self,"$tr!",def["$<<"]),def.$tr_s=function(e,t){var n=this;if(0==e.length)return n;var r={},$=e.split(""),o=$.length,a=t.split(""),i=a.length,s=!1,c=null;"^"===$[0]&&(s=!0,$.shift(),c=a[i-1],o-=1);for(var l=[],u=null,_=!1,p=0;o>p;p++){var d=$[p];if(null==u)u=d,l.push(d);else if("-"===d)"-"===u?(l.push("-"),l.push("-")):p==o-1?l.push("-"):_=!0;else if(_){for(var f=u.charCodeAt(0)+1,h=d.charCodeAt(0),m=f;h>m;m++)l.push(String.fromCharCode(m));l.push(d),_=null,u=null}else l.push(d)}if($=l,o=$.length,s)for(var p=0;o>p;p++)r[$[p]]=!0;else{if(i>0){for(var g=[],v=null,_=!1,p=0;i>p;p++){var d=a[p];if(null==u)u=d,g.push(d);else if("-"===d)"-"===v?(g.push("-"),g.push("-")):p==i-1?g.push("-"):_=!0;else if(_){for(var f=u.charCodeAt(0)+1,h=d.charCodeAt(0),m=f;h>m;m++)g.push(String.fromCharCode(m));g.push(d),_=null,u=null}else g.push(d)}a=g,i=a.length}var b=o-i;if(b>0)for(var y=i>0?a[i-1]:"",p=0;b>p;p++)a.push(y);for(var p=0;o>p;p++)r[$[p]]=a[p]}for(var x="",w=null,p=0,k=n.length;k>p;p++){var d=n.charAt(p),S=r[d];s?null==S?null==w&&(x+=c,w=!0):(x+=d,w=null):null!=S?(null==w||w!==S)&&(x+=S,w=S):(x+=d,w=null)}return x},Opal.defn(self,"$tr_s!",def["$<<"]),def.$upcase=function(){var e=this;return e.toUpperCase()},Opal.defn(self,"$upcase!",def["$<<"]),def.$freeze=function(){var e=this;return e},def["$frozen?"]=function(){return!0},nil&&"frozen?"}(self,null),Opal.cdecl($scope,"Symbol",$scope.get("String"))},Opal.modules["corelib/string/inheritance"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e,r=e.nil,$=(e.breaker,e.slice),o=e.klass;return e.add_stubs(["$new","$allocate","$initialize","$to_proc","$__send__","$class","$clone","$respond_to?","$==","$inspect"]),function(t,$super){function n(){}var $=n=o(t,$super,"String",n),a=($.$$proto,$.$$scope);return e.defs($,"$inherited",function(e){var t=r;t=a.get("Class").$new(a.get("String").$$scope.get("Wrapper")),e.$$proto=t.$$proto,e.$$proto.$$class=e,e.$$alloc=t.$$alloc,e.$$parent=a.get("String").$$scope.get("Wrapper"),e.$allocate=t.$allocate,e.$new=t.$new}),r&&"inherited"}(t,null),function(t,$super){function n(){}{var a,i,s,c,l=n=o(t,$super,"Wrapper",n),u=l.$$proto;l.$$scope}return u.literal=r,e.defs(l,"$allocate",a=function(t){var $=this,o=(a.$$p,r);return null==t&&(t=""),a.$$p=null,o=e.find_super_dispatcher($,"allocate",a,null,n).apply($,[]),o.literal=t,o}),e.defs(l,"$new",i=function(e){var t,n,o=this,a=i.$$p,s=a||r,c=r;return e=$.call(arguments,0),i.$$p=null,c=o.$allocate(),(t=(n=c).$initialize,t.$$p=s.$to_proc(),t).apply(n,[].concat(e)),c}),e.defs(l,"$[]",function(e){var t=this;return e=$.call(arguments,0),t.$allocate(e)}),u.$initialize=function(e){var t=this;return null==e&&(e=""),t.literal=e},u.$method_missing=s=function(e){var t,n,o=this,a=s.$$p,i=a||r,c=r;return e=$.call(arguments,0),s.$$p=null,c=(t=(n=o.literal).$__send__,t.$$p=i.$to_proc(),t).apply(n,[].concat(e)),(t=null!=c.$$is_string)===r||t.$$is_boolean&&1!=t?c:(t=c==o.literal)===r||t.$$is_boolean&&1!=t?o.$class().$allocate(c):o},u.$initialize_copy=function(e){var t=this;return t.literal=e.literal.$clone()},u["$respond_to?"]=c=function(t){var n,o=$.call(arguments,0),a=this,i=c.$$p;return c.$$p=null,(n=e.find_super_dispatcher(a,"respond_to?",c,i).apply(a,o))!==!1&&n!==r?n:a.literal["$respond_to?"](t)},u["$=="]=function(e){var t=this;return t.literal["$=="](e)},e.defn(l,"$eql?",u["$=="]),e.defn(l,"$===",u["$=="]),u.$to_s=function(){var e=this;return e.literal},u.$to_str=function(){var e=this;return e},u.$inspect=function(){var e=this;return e.literal.$inspect()},r&&"inspect"}(n.get("String"),null)},Opal.modules["corelib/match_data"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.klass,o=e.gvars;return e.add_stubs(["$attr_reader","$[]","$===","$!","$==","$raise","$inspect"]),function(t,$super){function a(){}var i=a=$(t,$super,"MatchData",a),s=i.$$proto,c=i.$$scope;return s.string=s.matches=s.begin=n,i.$attr_reader("post_match","pre_match","regexp","string"),s.$initialize=function(e,t){var r=this;o["~"]=r,r.regexp=e,r.begin=t.index,r.string=t.input,r.pre_match=r.string.substr(0,e.lastIndex-t[0].length),r.post_match=r.string.substr(e.lastIndex),r.matches=[];for(var $=0,a=t.length;a>$;$++){var i=t[$];r.matches.push(null==i?n:i)}},s["$[]"]=function(e){var t,n=this;return e=r.call(arguments,0),(t=n.matches)["$[]"].apply(t,[].concat(e))},s["$=="]=function(e){var t,r,$,o,a=this;return(t=c.get("MatchData")["$==="](e))===n||t.$$is_boolean&&1!=t?!1:(o=a.string==e.string,$=o!==!1&&o!==n?a.regexp==e.regexp:o,r=$!==!1&&$!==n?a.pre_match==e.pre_match:$,t=r!==!1&&r!==n?a.post_match==e.post_match:r,t!==!1&&t!==n?a.begin==e.begin:t)},s.$begin=function(e){var t,r,$=this;return r=e["$=="](0)["$!"](),(t=r!==!1&&r!==n?e["$=="](1)["$!"]():r)===n||t.$$is_boolean&&1!=t||$.$raise(c.get("ArgumentError"),"MatchData#begin only supports 0th element"),$.begin},s.$captures=function(){var e=this;return e.matches.slice(1)},s.$inspect=function(){for(var e=this,t="#<MatchData "+e.matches[0].$inspect(),n=1,r=e.matches.length;r>n;n++)t+=" "+n+":"+e.matches[n].$inspect();return t+">"},s.$length=function(){var e=this;return e.matches.length},e.defn(i,"$size",s.$length),s.$to_a=function(){var e=this;return e.matches},s.$to_s=function(){var e=this;return e.matches[0]},s.$values_at=function(e){var t=this;e=r.call(arguments,0);for(var $=[],o=t.matches.length,a=0,i=e.length;i>a;a++){var s=e[a];s>=0?$.push(t.matches[s]):(s+=o,$.push(s>0?t.matches[s]:n))}return $},n&&"values_at"}(t,null)},Opal.modules["corelib/numeric"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e,r=e.nil,$=e.breaker,o=e.slice,a=e.klass;return e.add_stubs(["$require","$include","$coerce","$===","$raise","$class","$__send__","$send_coerced","$coerce_to!","$-@","$**","$-","$respond_to?","$==","$enum_for","$gcd","$lcm","$<","$>","$floor","$/","$%"]),t.$require("corelib/comparable"),function(t,$super){function n(){}var i,s,c,l,u,_,p=n=a(t,$super,"Numeric",n),d=p.$$proto,f=p.$$scope;return p.$include(f.get("Comparable")),d.$$is_number=!0,d.$coerce=function(e,t){var n=this,$=r;null==t&&(t="operation");try{return e.$$is_number?[n,e]:e.$coerce(n)}catch(o){return function(){return $=t,"operation"["$==="]($)?n.$raise(f.get("TypeError"),""+e.$class()+" can't be coerced into Numeric"):"comparison"["$==="]($)?n.$raise(f.get("ArgumentError"),"comparison of "+n.$class()+" with "+e.$class()+" failed"):r}()}},d.$send_coerced=function(t,n){var $,o=this,a=r,i=r,s=r,c=r;return a=function(){return i=t,"+"["$==="](i)||"-"["$==="](i)||"*"["$==="](i)||"/"["$==="](i)||"%"["$==="](i)||"&"["$==="](i)||"|"["$==="](i)||"^"["$==="](i)||"**"["$==="](i)?"operation":">"["$==="](i)||">="["$==="](i)||"<"["$==="](i)||"<="["$==="](i)||"<=>"["$==="](i)?"comparison":r}(),$=e.to_ary(o.$coerce(n,a)),s=null==$[0]?r:$[0],c=null==$[1]?r:$[1],s.$__send__(t,c)},d["$+"]=function(e){var t=this;return e.$$is_number?t+e:t.$send_coerced("+",e)},d["$-"]=function(e){var t=this;return e.$$is_number?t-e:t.$send_coerced("-",e)},d["$*"]=function(e){var t=this;return e.$$is_number?t*e:t.$send_coerced("*",e)},d["$/"]=function(e){var t=this;return e.$$is_number?t/e:t.$send_coerced("/",e)},d["$%"]=function(e){var t=this;return e.$$is_number?0>e||0>t?(t%e+e)%e:t%e:t.$send_coerced("%",e)},d["$&"]=function(e){var t=this;return e.$$is_number?t&e:t.$send_coerced("&",e)},d["$|"]=function(e){var t=this;return e.$$is_number?t|e:t.$send_coerced("|",e)},d["$^"]=function(e){var t=this;return e.$$is_number?t^e:t.$send_coerced("^",e)},d["$<"]=function(e){var t=this;return e.$$is_number?e>t:t.$send_coerced("<",e)},d["$<="]=function(e){var t=this;return e.$$is_number?e>=t:t.$send_coerced("<=",e)},d["$>"]=function(e){var t=this;return e.$$is_number?t>e:t.$send_coerced(">",e)},d["$>="]=function(e){var t=this;return e.$$is_number?t>=e:t.$send_coerced(">=",e)},d["$<=>"]=function(t){var n=this;try{return t.$$is_number?n>t?1:t>n?-1:0:n.$send_coerced("<=>",t)}catch($){if(e.rescue($,[f.get("ArgumentError")]))return r;throw $}},d["$<<"]=function(e){var t=this;return e=f.get("Opal")["$coerce_to!"](e,f.get("Integer"),"to_int"),e>0?t<<e:t>>-e},d["$>>"]=function(e){var t=this;return e=f.get("Opal")["$coerce_to!"](e,f.get("Integer"),"to_int"),e>0?t>>e:t<<-e},d["$[]"]=function(e){var t=this,n=r,$=r;return e=f.get("Opal")["$coerce_to!"](e,f.get("Integer"),"to_int"),n=2["$**"](30)["$-@"](),$=2["$**"](30)["$-"](1),n>e||e>$?0:(t>>e)%2},d["$+@"]=function(){var e=this;return+e},d["$-@"]=function(){var e=this;return-e},d["$~"]=function(){var e=this;return~e},d["$**"]=function(e){var t=this;return e.$$is_number?Math.pow(t,e):t.$send_coerced("**",e)},d["$=="]=function(e){var t=this;return e.$$is_number?t==Number(e):e["$respond_to?"]("==")?e["$=="](t):!1},d.$abs=function(){var e=this;return Math.abs(e)},d.$ceil=function(){var e=this;return Math.ceil(e)},d.$chr=function(){var e=this;return String.fromCharCode(e)},d.$conj=function(){var e=this;return e},e.defn(p,"$conjugate",d.$conj),d.$downto=i=function(e){var t=this,n=i.$$p,o=n||r;if(i.$$p=null,o===!1||o===r)return t.$enum_for("downto",e);for(var a=t;a>=e;a--)if(o(a)===$)return $.$v;return t},e.defn(p,"$eql?",d["$=="]),e.defn(p,"$equal?",d["$=="]),d["$even?"]=function(){var e=this;return e%2===0},d.$floor=function(){var e=this;return Math.floor(e)},d.$gcd=function(e){var t,n=this;((t=f.get("Integer")["$==="](e))===r||t.$$is_boolean&&1!=t)&&n.$raise(f.get("TypeError"),"not an integer");for(var $=Math.abs(n),o=Math.abs(e);$>0;){var a=$;$=o%$,o=a}return o},d.$gcdlcm=function(){var e=this;return[e.$gcd(),e.$lcm()]},d.$hash=function(){var e=this;return"Numeric:"+e.toString()},d["$integer?"]=function(){var e=this;return e%1===0},d["$is_a?"]=s=function(t){var n,$,a=o.call(arguments,0),i=this,c=s.$$p;return s.$$p=null,((n=($=t["$=="](f.get("Fixnum")))?f.get("Integer")["$==="](i):$)===r||n.$$is_boolean&&1!=n)&&((n=($=t["$=="](f.get("Integer")))?f.get("Integer")["$==="](i):$)===r||n.$$is_boolean&&1!=n)&&((n=($=t["$=="](f.get("Float")))?f.get("Float")["$==="](i):$)===r||n.$$is_boolean&&1!=n)?e.find_super_dispatcher(i,"is_a?",s,c).apply(i,a):!0},e.defn(p,"$kind_of?",d["$is_a?"]),d["$instance_of?"]=c=function(t){var n,$,a=o.call(arguments,0),i=this,s=c.$$p;return c.$$p=null,((n=($=t["$=="](f.get("Fixnum")))?f.get("Integer")["$==="](i):$)===r||n.$$is_boolean&&1!=n)&&((n=($=t["$=="](f.get("Integer")))?f.get("Integer")["$==="](i):$)===r||n.$$is_boolean&&1!=n)&&((n=($=t["$=="](f.get("Float")))?f.get("Float")["$==="](i):$)===r||n.$$is_boolean&&1!=n)?e.find_super_dispatcher(i,"instance_of?",c,s).apply(i,a):!0},d.$lcm=function(e){var t,n=this;return((t=f.get("Integer")["$==="](e))===r||t.$$is_boolean&&1!=t)&&n.$raise(f.get("TypeError"),"not an integer"),0==n||0==e?0:Math.abs(n*e/n.$gcd(e))},e.defn(p,"$magnitude",d.$abs),e.defn(p,"$modulo",d["$%"]),d.$next=function(){var e=this;return e+1},d["$nonzero?"]=function(){var e=this;return 0==e?r:e},d["$odd?"]=function(){var e=this;return e%2!==0},d.$ord=function(){var e=this;return e},d.$pred=function(){var e=this;return e-1},d.$round=function(e){var t=this;null==e&&(e=0);var n=Math.pow(10,e);return Math.round(t*n)/n},d.$step=l=function(e,t){var n,$=this,o=l.$$p,a=o||r;if(null==t&&(t=1),l.$$p=null,a===!1||a===r)return $.$enum_for("step",e,t);(n=0==t)===r||n.$$is_boolean&&1!=n||$.$raise(f.get("ArgumentError"),"step cannot be 0");var i=$;if(t>0)for(;e>=i;)a(i),i+=t;else for(;i>=e;)a(i),i+=t;return $},e.defn(p,"$succ",d.$next),d.$times=u=function(){var e=this,t=u.$$p,n=t||r;if(u.$$p=null,n===!1||n===r)return e.$enum_for("times");for(var o=0;e>o;o++)if(n(o)===$)return $.$v;return e},d.$to_f=function(){var e=this;return e},d.$to_i=function(){var e=this;return parseInt(e)},e.defn(p,"$to_int",d.$to_i),d.$to_s=function(e){var t,n,$=this;return null==e&&(e=10),(t=(n=e["$<"](2))!==!1&&n!==r?n:e["$>"](36))===r||t.$$is_boolean&&1!=t||$.$raise(f.get("ArgumentError"),"base must be between 2 and 36"),$.toString(e)},e.defn(p,"$inspect",d.$to_s),d.$divmod=function(e){var t=this,n=r,$=r;return n=t["$/"](e).$floor(),$=t["$%"](e),[n,$]},d.$upto=_=function(e){var t=this,n=_.$$p,o=n||r;if(_.$$p=null,o===!1||o===r)return t.$enum_for("upto",e);for(var a=t;e>=a;a++)if(o(a)===$)return $.$v;return t},d["$zero?"]=function(){var e=this;return 0==e},d.$size=function(){return 4},d["$nan?"]=function(){var e=this;return isNaN(e)},d["$finite?"]=function(){var e=this;return 1/0!=e&&e!=-1/0},d["$infinite?"]=function(){var e=this;return 1/0==e?1:e==-1/0?-1:r},d["$positive?"]=function(){var e=this;return 1/e>0},d["$negative?"]=function(){var e=this;return 0>1/e},r&&"negative?"}(t,null),e.cdecl(n,"Fixnum",n.get("Numeric")),function(t,$super){function n(){}{var $=n=a(t,$super,"Integer",n);$.$$proto,$.$$scope}return e.defs($,"$===",function(e){return e.$$is_number?e%1===0:!1}),r&&"==="}(t,n.get("Numeric")),function(t,$super){function n(){}var $,o=n=a(t,$super,"Float",n),i=(o.$$proto,o.$$scope);return e.defs(o,"$===",function(e){return!!e.$$is_number}),e.cdecl(i,"INFINITY",1/0),e.cdecl(i,"NAN",0/0),($="undefined"!=typeof Number.EPSILON)===r||$.$$is_boolean&&1!=$?e.cdecl(i,"EPSILON",2.220446049250313e-16):e.cdecl(i,"EPSILON",Number.EPSILON)}(t,n.get("Numeric"))},Opal.modules["corelib/complex"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e,r=e.nil,$=(e.breaker,e.slice,e.klass);return function(e,$super){function t(){}{var n=t=$(e,$super,"Complex",t);n.$$proto,n.$$scope}return r}(t,n.get("Numeric"))},Opal.modules["corelib/rational"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e,r=e.nil,$=(e.breaker,e.slice,e.klass);return function(e,$super){function t(){}{var n=t=$(e,$super,"Rational",t);n.$$proto,n.$$scope}return r}(t,n.get("Numeric"))},Opal.modules["corelib/proc"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=e.breaker,$=e.slice,o=e.klass;return e.add_stubs(["$raise"]),function(t,$super){function a(){}var i,s,c=a=o(t,$super,"Proc",a),l=c.$$proto,u=c.$$scope;return l.$$is_proc=!0,l.$$is_lambda=!1,e.defs(c,"$new",i=function(){var e=this,t=i.$$p,r=t||n;return i.$$p=null,r!==!1&&r!==n||e.$raise(u.get("ArgumentError"),"tried to create a Proc object without a block"),r}),l.$call=s=function(t){var o=this,a=s.$$p,i=a||n;t=$.call(arguments,0),s.$$p=null,i!==n&&(o.$$p=i);var c;return c=o.$$is_lambda?o.apply(null,t):e.yieldX(o,t),c===r?r.$v:c},e.defn(c,"$[]",l.$call),l.$to_proc=function(){var e=this;return e},l["$lambda?"]=function(){var e=this;return!!e.$$is_lambda},l.$arity=function(){var e=this;return e.length},n&&"arity"}(t,null)},Opal.modules["corelib/method"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.klass;return e.add_stubs(["$attr_reader","$class","$arity","$new","$name"]),function(t,$super){function o(){}var a,i=o=$(t,$super,"Method",o),s=i.$$proto,c=i.$$scope;return s.method=s.receiver=s.owner=s.name=s.obj=n,i.$attr_reader("owner","receiver","name"),s.$initialize=function(e,t,n){var r=this;return r.receiver=e,r.owner=e.$class(),r.name=n,r.method=t},s.$arity=function(){var e=this;return e.method.$arity()},s.$call=a=function(e){var t=this,$=a.$$p,o=$||n;return e=r.call(arguments,0),a.$$p=null,t.method.$$p=o,t.method.apply(t.receiver,e)},e.defn(i,"$[]",s.$call),s.$unbind=function(){var e=this;return c.get("UnboundMethod").$new(e.owner,e.method,e.name)},s.$to_proc=function(){var e=this;return e.method},s.$inspect=function(){var e=this;return"#<Method: "+e.obj.$class()+"#"+e.name+"}>"},n&&"inspect"}(t,null),function(e,$super){function t(){}var r=t=$(e,$super,"UnboundMethod",t),o=r.$$proto,a=r.$$scope;return o.method=o.name=o.owner=n,r.$attr_reader("owner","name"),o.$initialize=function(e,t,n){var r=this;return r.owner=e,r.method=t,r.name=n},o.$arity=function(){var e=this;return e.method.$arity()},o.$bind=function(e){var t=this;return a.get("Method").$new(e,t.method,t.name)},o.$inspect=function(){var e=this;return"#<UnboundMethod: "+e.owner.$name()+"#"+e.name+">"},n&&"inspect"}(t,null)},Opal.modules["corelib/range"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=e.breaker,$=e.slice,o=e.klass;return e.add_stubs(["$require","$include","$attr_reader","$<=>","$raise","$include?","$<=","$<","$enum_for","$succ","$!","$==","$===","$exclude_end?","$eql?","$begin","$end","$-","$abs","$to_i","$inspect"]),t.$require("corelib/enumerable"),function(t,$super){function a(){}var i,s,c,l=a=o(t,$super,"Range",a),u=l.$$proto,_=l.$$scope;return u.begin=u.exclude=u.end=n,l.$include(_.get("Enumerable")),u.$$is_range=!0,l.$attr_reader("begin","end"),u.$initialize=function(e,t,r){var $,o=this;return null==r&&(r=!1),(($=e["$<=>"](t))===n||$.$$is_boolean&&1!=$)&&o.$raise(_.get("ArgumentError")),o.begin=e,o.end=t,o.exclude=r},u["$=="]=function(e){var t=this;return e.$$is_range?t.exclude===e.exclude&&t.begin==e.begin&&t.end==e.end:!1},u["$==="]=function(e){var t=this;return t["$include?"](e)},u["$cover?"]=function(e){var t,r,$=this;return(t=$.begin["$<="](e))?function(){return(r=$.exclude)===n||r.$$is_boolean&&1!=r?e["$<="]($.end):e["$<"]($.end)}():t},u.$each=i=function(){var t,$,o=this,a=i.$$p,s=a||n,c=n,l=n;if(i.$$p=null,s===n)return o.$enum_for("each");for(c=o.begin,l=o.end;c["$<"](l);){if(e.yield1(s,c)===r)return r.$v;c=c.$succ()}return $=o.exclude["$!"](),(t=$!==!1&&$!==n?c["$=="](l):$)===n||t.$$is_boolean&&1!=t||e.yield1(s,c)!==r?o:r.$v},u["$eql?"]=function(e){var t,r,$=this;return(t=_.get("Range")["$==="](e))===n||t.$$is_boolean&&1!=t?!1:(r=$.exclude["$==="](e["$exclude_end?"]()),t=r!==!1&&r!==n?$.begin["$eql?"](e.$begin()):r,t!==!1&&t!==n?$.end["$eql?"](e.$end()):t)},u["$exclude_end?"]=function(){var e=this;return e.exclude},e.defn(l,"$first",u.$begin),e.defn(l,"$include?",u["$cover?"]),e.defn(l,"$last",u.$end),u.$max=s=function(){var t=$.call(arguments,0),r=this,o=s.$$p,a=o||n;return s.$$p=null,a!==n?e.find_super_dispatcher(r,"max",s,o).apply(r,t):r.exclude?r.end-1:r.end},e.defn(l,"$member?",u["$cover?"]),u.$min=c=function(){var t=$.call(arguments,0),r=this,o=c.$$p,a=o||n;return c.$$p=null,a!==n?e.find_super_dispatcher(r,"min",c,o).apply(r,t):r.begin},e.defn(l,"$member?",u["$include?"]),u.$size=function(){var e,t,r=this,$=n,o=n,a=n;return $=r.begin,o=r.end,(e=r.exclude)===n||e.$$is_boolean&&1!=e||(o=o["$-"](1)),t=_.get("Numeric")["$==="]($),(e=t!==!1&&t!==n?_.get("Numeric")["$==="](o):t)===n||e.$$is_boolean&&1!=e?n:o["$<"]($)?0:(a=_.get("Float").$$scope.get("INFINITY"),(e=(t=a["$=="]($.$abs()))!==!1&&t!==n?t:o.$abs()["$=="](a))===n||e.$$is_boolean&&1!=e?(Math.abs(o-$)+1).$to_i():a)},u.$step=function(e){var t=this;return null==e&&(e=1),t.$raise(_.get("NotImplementedError"))},u.$to_s=function(){var e=this;return e.begin.$inspect()+(e.exclude?"...":"..")+e.end.$inspect()},e.defn(l,"$inspect",u.$to_s)}(t,null)},Opal.modules["corelib/time"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.klass;return e.add_stubs(["$require","$include","$kind_of?","$to_i","$coerce_to","$between?","$raise","$new","$compact","$nil?","$===","$<=>","$to_f","$strftime","$is_a?","$zero?","$wday","$utc?","$warn","$year","$mon","$day","$yday","$hour","$min","$sec","$rjust","$ljust","$zone","$month","$isdst"]),t.$require("corelib/comparable"),function(t,$super){function o(){}var a=o=$(t,$super,"Time",o),i=a.$$proto,s=a.$$scope;i.tz_offset=n,a.$include(s.get("Comparable"));var c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],l=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],u=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],_=["January","February","March","April","May","June","July","August","September","October","November","December"];return e.defs(a,"$at",function(e,t){return null==t&&(t=0),new Date(1e3*e+t)}),e.defs(a,"$new",function(e,t,n,r,$,o){switch(arguments.length){case 1:return new Date(e,0);case 2:return new Date(e,t-1);case 3:return new Date(e,t-1,n);case 4:return new Date(e,t-1,n,r);case 5:return new Date(e,t-1,n,r,$);
case 6:return new Date(e,t-1,n,r,$,o);case 7:return new Date(e,t-1,n,r,$,o);default:return new Date}}),e.defs(a,"$local",function(e,t,$,o,a,i,c){var l,u=this;if(null==t&&(t=n),null==$&&($=n),null==o&&(o=n),null==a&&(a=n),null==i&&(i=n),null==c&&(c=n),(l=10===arguments.length)!==n&&(!l.$$is_boolean||1==l)){var _=r.call(arguments).reverse();i=_[9],a=_[8],o=_[7],$=_[6],t=_[5],e=_[4]}return e=function(){return(l=e["$kind_of?"](s.get("String")))===n||l.$$is_boolean&&1!=l?s.get("Opal").$coerce_to(e,s.get("Integer"),"to_int"):e.$to_i()}(),t=function(){return(l=t["$kind_of?"](s.get("String")))===n||l.$$is_boolean&&1!=l?s.get("Opal").$coerce_to((l=t)!==!1&&l!==n?l:1,s.get("Integer"),"to_int"):t.$to_i()}(),((l=t["$between?"](1,12))===n||l.$$is_boolean&&1!=l)&&u.$raise(s.get("ArgumentError"),"month out of range: "+t),$=function(){return(l=$["$kind_of?"](s.get("String")))===n||l.$$is_boolean&&1!=l?s.get("Opal").$coerce_to((l=$)!==!1&&l!==n?l:1,s.get("Integer"),"to_int"):$.$to_i()}(),((l=$["$between?"](1,31))===n||l.$$is_boolean&&1!=l)&&u.$raise(s.get("ArgumentError"),"day out of range: "+$),o=function(){return(l=o["$kind_of?"](s.get("String")))===n||l.$$is_boolean&&1!=l?s.get("Opal").$coerce_to((l=o)!==!1&&l!==n?l:0,s.get("Integer"),"to_int"):o.$to_i()}(),((l=o["$between?"](0,24))===n||l.$$is_boolean&&1!=l)&&u.$raise(s.get("ArgumentError"),"hour out of range: "+o),a=function(){return(l=a["$kind_of?"](s.get("String")))===n||l.$$is_boolean&&1!=l?s.get("Opal").$coerce_to((l=a)!==!1&&l!==n?l:0,s.get("Integer"),"to_int"):a.$to_i()}(),((l=a["$between?"](0,59))===n||l.$$is_boolean&&1!=l)&&u.$raise(s.get("ArgumentError"),"minute out of range: "+a),i=function(){return(l=i["$kind_of?"](s.get("String")))===n||l.$$is_boolean&&1!=l?s.get("Opal").$coerce_to((l=i)!==!1&&l!==n?l:0,s.get("Integer"),"to_int"):i.$to_i()}(),((l=i["$between?"](0,59))===n||l.$$is_boolean&&1!=l)&&u.$raise(s.get("ArgumentError"),"second out of range: "+i),(l=u).$new.apply(l,[].concat([e,t,$,o,a,i].$compact()))}),e.defs(a,"$gm",function(e,t,r,$,o,a){var i,c=this;(i=e["$nil?"]())===n||i.$$is_boolean&&1!=i||c.$raise(s.get("TypeError"),"missing year (got nil)"),(t>12||r>31||$>24||o>59||a>59)&&c.$raise(s.get("ArgumentError"));var l=new Date(Date.UTC(e,(t||1)-1,r||1,$||0,o||0,a||0));return l.tz_offset=0,l}),function(e){e.$$scope,e.$$proto;return e.$$proto.$mktime=e.$$proto.$local,e.$$proto.$utc=e.$$proto.$gm}(a.$singleton_class()),e.defs(a,"$now",function(){return new Date}),i["$+"]=function(e){var t,r=this;(t=s.get("Time")["$==="](e))===n||t.$$is_boolean&&1!=t||r.$raise(s.get("TypeError"),"time + time?"),e=s.get("Opal").$coerce_to(e,s.get("Integer"),"to_int");var $=new Date(r.getTime()+1e3*e);return $.tz_offset=r.tz_offset,$},i["$-"]=function(e){var t,r=this;if((t=s.get("Time")["$==="](e))!==n&&(!t.$$is_boolean||1==t))return(r.getTime()-e.getTime())/1e3;e=s.get("Opal").$coerce_to(e,s.get("Integer"),"to_int");var $=new Date(r.getTime()-1e3*e);return $.tz_offset=r.tz_offset,$},i["$<=>"]=function(e){var t=this;return t.$to_f()["$<=>"](e.$to_f())},i["$=="]=function(e){var t=this;return t.$to_f()===e.$to_f()},i.$asctime=function(){var e=this;return e.$strftime("%a %b %e %H:%M:%S %Y")},e.defn(a,"$ctime",i.$asctime),i.$day=function(){var e=this;return 0===e.tz_offset?e.getUTCDate():e.getDate()},i.$yday=function(){var e=this,t=new Date(e.getFullYear(),0,1);return Math.ceil((e-t)/864e5)},i.$isdst=function(){var e=this;return e.$raise(s.get("NotImplementedError"))},i["$eql?"]=function(e){var t,r=this;return t=e["$is_a?"](s.get("Time")),t!==!1&&t!==n?r["$<=>"](e)["$zero?"]():t},i["$friday?"]=function(){var e=this;return 5==e.$wday()},i.$hour=function(){var e=this;return 0===e.tz_offset?e.getUTCHours():e.getHours()},i.$inspect=function(){var e,t=this;return t.$strftime((e=t["$utc?"]())===n||e.$$is_boolean&&1!=e?"%Y-%m-%d %H:%M:%S %z":"%Y-%m-%d %H:%M:%S UTC")},e.defn(a,"$mday",i.$day),i.$min=function(){var e=this;return 0===e.tz_offset?e.getUTCMinutes():e.getMinutes()},i.$mon=function(){var e=this;return 0===e.tz_offset?e.getUTCMonth()+1:e.getMonth()+1},i["$monday?"]=function(){var e=this;return 1==e.$wday()},e.defn(a,"$month",i.$mon),i["$saturday?"]=function(){var e=this;return 6==e.$wday()},i.$sec=function(){var e=this;return 0===e.tz_offset?e.getUTCSeconds():e.getSeconds()},i.$usec=function(){var e=this;return e.$warn("Microseconds are not supported"),0},i.$zone=function(){var e,t=this,n=t.toString();return e=-1==n.indexOf("(")?n.match(/[A-Z]{3,4}/)[0]:n.match(/\([^)]+\)/)[0].match(/[A-Z]/g).join(""),"GMT"==e&&/(GMT\W*\d{4})/.test(n)?RegExp.$1:e},i.$getgm=function(){var e=this,t=new Date(e.getTime());return t.tz_offset=0,t},i["$gmt?"]=function(){var e=this;return 0===e.tz_offset},i.$gmt_offset=function(){var e=this;return 60*-e.getTimezoneOffset()},i.$strftime=function(e){var t=this;return e.replace(/%([\-_#^0]*:{0,2})(\d+)?([EO]*)(.)/g,function(e,n,r,$,o){var a="",r=parseInt(r),i=-1!==n.indexOf("0"),s=-1===n.indexOf("-"),p=-1!==n.indexOf("_"),d=-1!==n.indexOf("^"),f=-1!==n.indexOf("#"),h=(n.match(":")||[]).length;switch(i&&p&&(n.indexOf("0")<n.indexOf("_")?i=!1:p=!1),o){case"Y":a+=t.$year();break;case"C":i=!p,a+=Match.round(t.$year()/100);break;case"y":i=!p,a+=t.$year()%100;break;case"m":i=!p,a+=t.$mon();break;case"B":a+=_[t.$mon()-1];break;case"b":case"h":p=!i,a+=u[t.$mon()-1];break;case"d":i=!p,a+=t.$day();break;case"e":p=!i,a+=t.$day();break;case"j":a+=t.$yday();break;case"H":i=!p,a+=t.$hour();break;case"k":p=!i,a+=t.$hour();break;case"I":i=!p,a+=t.$hour()%12||12;break;case"l":p=!i,a+=t.$hour()%12||12;break;case"P":a+=t.$hour()>=12?"pm":"am";break;case"p":a+=t.$hour()>=12?"PM":"AM";break;case"M":i=!p,a+=t.$min();break;case"S":i=!p,a+=t.$sec();break;case"L":i=!p,r=isNaN(r)?3:r,a+=t.getMilliseconds();break;case"N":r=isNaN(r)?9:r,a+=t.getMilliseconds().toString().$rjust(3,"0"),a=a.$ljust(r,"0");break;case"z":var m=t.getTimezoneOffset(),g=Math.floor(Math.abs(m)/60),v=Math.abs(m)%60;a+=0>m?"+":"-",a+=10>g?"0":"",a+=g,h>0&&(a+=":"),a+=10>v?"0":"",a+=v,h>1&&(a+=":00");break;case"Z":a+=t.$zone();break;case"A":a+=c[t.$wday()];break;case"a":a+=l[t.$wday()];break;case"u":a+=t.$wday()+1;break;case"w":a+=t.$wday();break;case"s":a+=t.$to_i();break;case"n":a+="\n";break;case"t":a+="	";break;case"%":a+="%";break;case"c":a+=t.$strftime("%a %b %e %T %Y");break;case"D":case"x":a+=t.$strftime("%m/%d/%y");break;case"F":a+=t.$strftime("%Y-%m-%d");break;case"v":a+=t.$strftime("%e-%^b-%4Y");break;case"r":a+=t.$strftime("%I:%M:%S %p");break;case"R":a+=t.$strftime("%H:%M");break;case"T":case"X":a+=t.$strftime("%H:%M:%S");break;default:return e}return d&&(a=a.toUpperCase()),f&&(a=a.replace(/[A-Z]/,function(e){e.toLowerCase()}).replace(/[a-z]/,function(e){e.toUpperCase()})),s&&(i||p)&&(a=a.$rjust(isNaN(r)?2:r,p?" ":"0")),a})},i["$sunday?"]=function(){var e=this;return 0==e.$wday()},i["$thursday?"]=function(){var e=this;return 4==e.$wday()},i.$to_a=function(){var e=this;return[e.$sec(),e.$min(),e.$hour(),e.$day(),e.$month(),e.$year(),e.$wday(),e.$yday(),e.$isdst(),e.$zone()]},i.$to_f=function(){var e=this;return e.getTime()/1e3},i.$to_i=function(){var e=this;return parseInt(e.getTime()/1e3)},e.defn(a,"$to_s",i.$inspect),i["$tuesday?"]=function(){var e=this;return 2==e.$wday()},e.defn(a,"$utc?",i["$gmt?"]),e.defn(a,"$utc_offset",i.$gmt_offset),i.$wday=function(){var e=this;return 0===e.tz_offset?e.getUTCDay():e.getDay()},i["$wednesday?"]=function(){var e=this;return 3==e.$wday()},i.$year=function(){var e=this;return 0===e.tz_offset?e.getUTCFullYear():e.getFullYear()},n&&"year"}(t,null)},Opal.modules["corelib/struct"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=e.breaker,$=e.slice,o=e.klass;return e.add_stubs(["$==","$[]","$upcase","$const_set","$new","$unshift","$each","$define_struct_attribute","$instance_eval","$to_proc","$raise","$<<","$members","$define_method","$instance_variable_get","$instance_variable_set","$include","$each_with_index","$class","$===","$>=","$size","$include?","$to_sym","$enum_for","$hash","$all?","$length","$map","$+","$join","$inspect","$each_pair"]),function(t,$super){function a(){}var i,s,c,l=a=o(t,$super,"Struct",a),u=l.$$proto,_=l.$$scope;return e.defs(l,"$new",i=function(t,r){var o,s,c,l,u=$.call(arguments,0),p=this,d=i.$$p,f=d||n;return r=$.call(arguments,1),i.$$p=null,p["$=="](_.get("Struct"))?t["$[]"](0)["$=="](t["$[]"](0).$upcase())?_.get("Struct").$const_set(t,(o=p).$new.apply(o,[].concat(r))):(r.$unshift(t),(s=(c=_.get("Class")).$new,s.$$p=(l=function(){var e,t,$,o,a=l.$$s||this;return(e=(t=r).$each,e.$$p=($=function(e){var t=$.$$s||this;return null==e&&(e=n),t.$define_struct_attribute(e)},$.$$s=a,$),e).call(t),f!==!1&&f!==n?(e=(o=a).$instance_eval,e.$$p=f.$to_proc(),e).call(o):n},l.$$s=p,l),s).call(c,p)):e.find_super_dispatcher(p,"new",i,d,a).apply(p,u)}),e.defs(l,"$define_struct_attribute",function(e){var t,r,$,o,a,i=this;return i["$=="](_.get("Struct"))&&i.$raise(_.get("ArgumentError"),"you cannot define attributes to the Struct class"),i.$members()["$<<"](e),(t=(r=i).$define_method,t.$$p=($=function(){var t=$.$$s||this;return t.$instance_variable_get("@"+e)},$.$$s=i,$),t).call(r,e),(t=(o=i).$define_method,t.$$p=(a=function(t){var r=a.$$s||this;return null==t&&(t=n),r.$instance_variable_set("@"+e,t)},a.$$s=i,a),t).call(o,""+e+"=")}),e.defs(l,"$members",function(){var e,t=this;return null==t.members&&(t.members=n),t["$=="](_.get("Struct"))&&t.$raise(_.get("ArgumentError"),"the Struct class has no members"),(e=t.members)!==!1&&e!==n?e:t.members=[]}),e.defs(l,"$inherited",function(e){var t,r,$,o=this,a=n;return null==o.members&&(o.members=n),o["$=="](_.get("Struct"))?n:(a=o.members,(t=(r=e).$instance_eval,t.$$p=($=function(){var e=$.$$s||this;return e.members=a},$.$$s=o,$),t).call(r))}),function(e){e.$$scope,e.$$proto;return e.$$proto["$[]"]=e.$$proto.$new}(l.$singleton_class()),l.$include(_.get("Enumerable")),u.$initialize=function(e){var t,r,o,a=this;return e=$.call(arguments,0),(t=(r=a.$members()).$each_with_index,t.$$p=(o=function(t,r){var $=o.$$s||this;return null==t&&(t=n),null==r&&(r=n),$.$instance_variable_set("@"+t,e["$[]"](r))},o.$$s=a,o),t).call(r)},u.$members=function(){var e=this;return e.$class().$members()},u["$[]"]=function(e){var t,r=this;return(t=_.get("Integer")["$==="](e))===n||t.$$is_boolean&&1!=t?((t=r.$members()["$include?"](e.$to_sym()))===n||t.$$is_boolean&&1!=t)&&r.$raise(_.get("NameError"),"no member '"+e+"' in struct"):(e["$>="](r.$members().$size())&&r.$raise(_.get("IndexError"),"offset "+e+" too large for struct(size:"+r.$members().$size()+")"),e=r.$members()["$[]"](e)),r.$instance_variable_get("@"+e)},u["$[]="]=function(e,t){var r,$=this;return(r=_.get("Integer")["$==="](e))===n||r.$$is_boolean&&1!=r?((r=$.$members()["$include?"](e.$to_sym()))===n||r.$$is_boolean&&1!=r)&&$.$raise(_.get("NameError"),"no member '"+e+"' in struct"):(e["$>="]($.$members().$size())&&$.$raise(_.get("IndexError"),"offset "+e+" too large for struct(size:"+$.$members().$size()+")"),e=$.$members()["$[]"](e)),$.$instance_variable_set("@"+e,t)},u.$each=s=function(){var t,$,o,a=this,i=s.$$p,c=i||n;return s.$$p=null,c===n?a.$enum_for("each"):((t=($=a.$members()).$each,t.$$p=(o=function(t){var $,a=o.$$s||this;return null==t&&(t=n),$=e.yield1(c,a["$[]"](t)),$===r?$:$},o.$$s=a,o),t).call($),a)},u.$each_pair=c=function(){var t,$,o,a=this,i=c.$$p,s=i||n;return c.$$p=null,s===n?a.$enum_for("each_pair"):((t=($=a.$members()).$each,t.$$p=(o=function(t){var $,a=o.$$s||this;return null==t&&(t=n),$=e.yieldX(s,[t,a["$[]"](t)]),$===r?$:$},o.$$s=a,o),t).call($),a)},u["$eql?"]=function(e){var t,r,$,o,a=this;return(t=a.$hash()["$=="](e.$hash()))!==!1&&t!==n?t:(r=($=e.$each_with_index())["$all?"],r.$$p=(o=function(e,t){var r=o.$$s||this;return null==e&&(e=n),null==t&&(t=n),r["$[]"](r.$members()["$[]"](t))["$=="](e)},o.$$s=a,o),r).call($)},u.$length=function(){var e=this;return e.$members().$length()},e.defn(l,"$size",u.$length),u.$to_a=function(){var e,t,r,$=this;return(e=(t=$.$members()).$map,e.$$p=(r=function(e){var t=r.$$s||this;return null==e&&(e=n),t["$[]"](e)},r.$$s=$,r),e).call(t)},e.defn(l,"$values",u.$to_a),u.$inspect=function(){var e,t,r,$=this,o=n;return o="#<struct ",$.$class()["$=="](_.get("Struct"))&&(o=o["$+"](""+$.$class()+" ")),o=o["$+"]((e=(t=$.$each_pair()).$map,e.$$p=(r=function(e,t){r.$$s||this;return null==e&&(e=n),null==t&&(t=n),""+e+"="+t.$inspect()},r.$$s=$,r),e).call(t).$join(", ")),o=o["$+"](">")},e.defn(l,"$to_s",u.$inspect)}(t,null)},Opal.modules["corelib/io"]=function(e){e.dynamic_require_severity="warning";var t,n,r=e.top,$=e,o=e.nil,a=(e.breaker,e.slice),i=e.klass,s=e.module,c=e.gvars;return null==c.stdout&&(c.stdout=o),null==c.stderr&&(c.stderr=o),e.add_stubs(["$attr_accessor","$size","$write","$join","$map","$String","$concat","$chomp","$getbyte","$getc","$raise","$new","$write_proc=","$extend"]),function(t,$super){function n(){}var r=n=i(t,$super,"IO",n),$=r.$$proto,l=r.$$scope;return e.cdecl(l,"SEEK_SET",0),e.cdecl(l,"SEEK_CUR",1),e.cdecl(l,"SEEK_END",2),r.$attr_accessor("write_proc"),$.$write=function(e){var t=this;return t.write_proc(e),e.$size()},function(t){{var n=s(t,"Writable"),r=n.$$proto;n.$$scope}r["$<<"]=function(e){var t=this;return t.$write(e),t},r.$print=function(e){var t,n,r,$=this;return null==c[","]&&(c[","]=o),e=a.call(arguments,0),$.$write((t=(n=e).$map,t.$$p=(r=function(e){var t=r.$$s||this;return null==e&&(e=o),t.$String(e)},r.$$s=$,r),t).call(n).$join(c[","])),o},r.$puts=function(e){var t,n,r,$=this,i=o;return null==c["/"]&&(c["/"]=o),e=a.call(arguments,0),i=c["/"],$.$write((t=(n=e).$map,t.$$p=(r=function(e){var t=r.$$s||this;return null==e&&(e=o),t.$String(e).$chomp()},r.$$s=$,r),t).call(n).$concat([o]).$join(i)),o},e.donate(n,["$<<","$print","$puts"])}(r),function(t){var n=s(t,"Readable"),r=n.$$proto,$=n.$$scope;r.$readbyte=function(){var e=this;return e.$getbyte()},r.$readchar=function(){var e=this;return e.$getc()},r.$readline=function(e){var t=this;return null==c["/"]&&(c["/"]=o),null==e&&(e=c["/"]),t.$raise($.get("NotImplementedError"))},r.$readpartial=function(e,t){var n=this;return null==t&&(t=o),n.$raise($.get("NotImplementedError"))},e.donate(n,["$readbyte","$readchar","$readline","$readpartial"])}(r)}(r,null),e.cdecl($,"STDERR",c.stderr=$.get("IO").$new()),e.cdecl($,"STDIN",c.stdin=$.get("IO").$new()),e.cdecl($,"STDOUT",c.stdout=$.get("IO").$new()),t=["object"==typeof process?function(e){process.stdout.write(e)}:function(e){console.log(e)}],n=c.stdout,n["$write_proc="].apply(n,t),t[t.length-1],t=["object"==typeof process?function(e){process.stderr.write(e)}:function(e){console.warn(e)}],n=c.stderr,n["$write_proc="].apply(n,t),t[t.length-1],c.stdout.$extend($.get("IO").$$scope.get("Writable")),c.stderr.$extend($.get("IO").$$scope.get("Writable"))},Opal.modules["corelib/main"]=function(e){e.dynamic_require_severity="warning";{var t=e.top,n=e,r=e.nil;e.breaker,e.slice}return e.add_stubs(["$include"]),e.defs(t,"$to_s",function(){return"main"}),e.defs(t,"$include",function(e){return n.get("Object").$include(e)}),r&&"include"},Opal.modules["corelib/variables"]=function(e){e.dynamic_require_severity="warning";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.gvars),$=e.hash2;return e.add_stubs(["$new"]),r["&"]=r["~"]=r["`"]=r["'"]=n,r.LOADED_FEATURES=r['"']=e.loaded_features,r.LOAD_PATH=r[":"]=[],r["/"]="\n",r[","]=n,e.cdecl(t,"ARGV",[]),e.cdecl(t,"ARGF",t.get("Object").$new()),e.cdecl(t,"ENV",$([],{})),r.VERBOSE=!1,r.DEBUG=!1,r.SAFE=0,e.cdecl(t,"RUBY_PLATFORM","opal"),e.cdecl(t,"RUBY_ENGINE","opal"),e.cdecl(t,"RUBY_VERSION","2.1.1"),e.cdecl(t,"RUBY_ENGINE_VERSION","0.6.1"),e.cdecl(t,"RUBY_RELEASE_DATE","2014-04-15")},Opal.modules["corelib/dir"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=e.breaker,$=(e.slice,e.klass);return e.add_stubs(["$[]"]),function(t,$super){function o(){}{var a=o=$(t,$super,"Dir",o);a.$$proto,a.$$scope}return function(t){{var $=t.$$scope;t.$$proto}return t.$$proto.$chdir=TMP_1=function(t){var $,o=TMP_1.$$p,a=o||n,i=n;TMP_1.$$p=null;try{return i=e.current_dir,e.current_dir=t,$=e.yieldX(a,[]),$===r?$:$}finally{e.current_dir=i}},t.$$proto.$pwd=function(){var t;return(t=e.current_dir)!==!1&&t!==n?t:"."},t.$$proto.$getwd=t.$$proto.$pwd,t.$$proto.$home=function(){var e;return(e=$.get("ENV")["$[]"]("HOME"))!==!1&&e!==n?e:"."},n&&"home"}(a.$singleton_class())}(t,null)},Opal.modules["corelib/file"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e,r=e.nil,$=(e.breaker,e.slice),o=e.klass,a=e.range;return e.add_stubs(["$join","$compact","$split","$==","$first","$[]=","$home","$each","$pop","$<<","$[]","$gsub","$find","$=~"]),function(t,$super){function n(){}var i=n=o(t,$super,"File",n),s=(i.$$proto,i.$$scope);return e.cdecl(s,"Separator",e.cdecl(s,"SEPARATOR","/")),function(t){{var n=t.$$scope;t.$$proto}return t.$$proto.$expand_path=function(e,t){var $,o,a,i=this,s=r,c=r;return null==t&&(t=r),e=[t,e].$compact().$join(n.get("SEPARATOR")),s=e.$split(n.get("SEPARATOR")),c=[],s.$first()["$=="]("~")&&s["$[]="](0,n.get("Dir").$home()),($=(o=s).$each,$.$$p=(a=function(e){a.$$s||this;return null==e&&(e=r),e["$=="]("..")?c.$pop():c["$<<"](e)},a.$$s=i,a),$).call(o),c.$join(n.get("SEPARATOR"))},t.$$proto.$dirname=function(e){var t=this;return t.$split(e)["$[]"](a(0,-2,!1))},t.$$proto.$basename=function(e){var t=this;return t.$split(e)["$[]"](-1)},t.$$proto["$exist?"]=function(t){return null!=e.modules[t]},t.$$proto["$exists?"]=t.$$proto["$exist?"],t.$$proto["$directory?"]=function(t){var $,o,a,i=this,s=r,c=r;s=[];for(var l in e.modules)s.push(l);return t=t.$gsub(new RegExp("(^."+n.get("SEPARATOR")+"+|"+n.get("SEPARATOR")+"+$)")),c=($=(o=s).$find,$.$$p=(a=function(e){a.$$s||this;return null==e&&(e=r),e["$=~"](new RegExp("^"+t))},a.$$s=i,a),$).call(o)},t.$$proto.$join=function(e){return e=$.call(arguments,0),e.$join(n.get("SEPARATOR")).$gsub(new RegExp(""+n.get("SEPARATOR")+"+"),n.get("SEPARATOR"))},t.$$proto.$split=function(e){return e.$split(n.get("SEPARATOR"))},r&&"split"}(i.$singleton_class())}(t,n.get("IO"))},Opal.modules.opal=function(e){e.dynamic_require_severity="warning";{var t=e.top;e.nil,e.breaker,e.slice}return e.add_stubs(["$require"]),t.$require("corelib/runtime"),t.$require("corelib/helpers"),t.$require("corelib/module"),t.$require("corelib/class"),t.$require("corelib/basic_object"),t.$require("corelib/kernel"),t.$require("corelib/nil_class"),t.$require("corelib/boolean"),t.$require("corelib/error"),t.$require("corelib/regexp"),t.$require("corelib/comparable"),t.$require("corelib/enumerable"),t.$require("corelib/enumerator"),t.$require("corelib/array"),t.$require("corelib/array/inheritance"),t.$require("corelib/hash"),t.$require("corelib/string"),t.$require("corelib/string/inheritance"),t.$require("corelib/match_data"),t.$require("corelib/numeric"),t.$require("corelib/complex"),t.$require("corelib/rational"),t.$require("corelib/proc"),t.$require("corelib/method"),t.$require("corelib/range"),t.$require("corelib/time"),t.$require("corelib/struct"),t.$require("corelib/io"),t.$require("corelib/main"),t.$require("corelib/variables"),t.$require("corelib/dir"),t.$require("corelib/file")},Opal.modules.thread=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e,r=e.nil,$=e.breaker,o=e.slice,a=e.klass,i=e.hash2;return e.add_stubs(["$allocate","$core_initialize!","$current","$fail","$[]","$coerce_key_name","$[]=","$key?","$keys","$private","$coerce_to!","$public","$clear","$empty?","$size","$shift","$push","$locked?","$lock","$unlock"]),function(e,$super){function t(){}{var n=t=a(e,$super,"ThreadError",t);n.$$proto,n.$$scope}return r}(t,n.get("StandardError")),function(t,$super){function n(){}var $=n=a(t,$super,"Thread",n),s=$.$$proto,c=$.$$scope;return s.fiber_locals=s.thread_locals=r,e.defs($,"$current",function(){var e,t=this;return null==t.current&&(t.current=r),((e=t.current)===r||e.$$is_boolean&&1!=e)&&(t.current=t.$allocate(),t.current["$core_initialize!"]()),t.current}),e.defs($,"$list",function(){var e=this;return[e.$current()]}),s.$initialize=function(e){var t=this;return e=o.call(arguments,0),t.$fail(c.get("NotImplementedError"),"Thread creation not available")},s["$[]"]=function(e){var t=this;return t.fiber_locals["$[]"](t.$coerce_key_name(e))},s["$[]="]=function(e,t){var n=this;return n.fiber_locals["$[]="](n.$coerce_key_name(e),t)},s["$key?"]=function(e){var t=this;return t.fiber_locals["$key?"](t.$coerce_key_name(e))},s.$keys=function(){var e=this;return e.fiber_locals.$keys()},s.$thread_variable_get=function(e){var t=this;return t.thread_locals["$[]"](t.$coerce_key_name(e))},s.$thread_variable_set=function(e,t){var n=this;return n.thread_locals["$[]="](n.$coerce_key_name(e),t)},s["$thread_variable?"]=function(e){var t=this;return t.thread_locals["$key?"](t.$coerce_key_name(e))},s.$thread_variables=function(){var e=this;return e.thread_locals.$keys()},$.$private(),s["$core_initialize!"]=function(){var e=this;return e.thread_locals=i([],{}),e.fiber_locals=i([],{})},s.$coerce_key_name=function(e){return c.get("Opal")["$coerce_to!"](e,c.get("String"),"to_s")},$.$public(),function(t,$super){function n(){}var $=n=a(t,$super,"Queue",n),o=$.$$proto,i=$.$$scope;return o.storage=r,o.$initialize=function(){var e=this;return e.$clear()},o.$clear=function(){var e=this;return e.storage=[]},o["$empty?"]=function(){var e=this;return e.storage["$empty?"]()},o.$size=function(){var e=this;return e.storage.$size()},e.defn($,"$length",o.$size),o.$pop=function(e){var t,n=this;return null==e&&(e=!1),(t=n["$empty?"]())===r||t.$$is_boolean&&1!=t||(e!==!1&&e!==r&&n.$fail(i.get("ThreadError"),"Queue empty"),n.$fail(i.get("ThreadError"),"Deadlock")),n.storage.$shift()},e.defn($,"$shift",o.$pop),e.defn($,"$deq",o.$pop),o.$push=function(e){var t=this;return t.storage.$push(e)},e.defn($,"$<<",o.$push),e.defn($,"$enq",o.$push)}($,null)}(t,null),e.cdecl(n,"Queue",n.get("Thread").$$scope.get("Queue")),function(t,$super){function n(){}var o,i=n=a(t,$super,"Mutex",n),s=i.$$proto,c=i.$$scope;return s.locked=r,s.$initialize=function(){var e=this;return e.locked=!1},s.$lock=function(){var e,t=this;return(e=t.locked)===r||e.$$is_boolean&&1!=e||t.$fail(c.get("ThreadError"),"Deadlock"),t.locked=!0,t},s["$locked?"]=function(){var e=this;return e.locked},s["$owned?"]=function(){var e=this;return e.locked},s.$try_lock=function(){var e,t=this;return(e=t["$locked?"]())===r||e.$$is_boolean&&1!=e?(t.$lock(),!0):!1},s.$unlock=function(){var e,t=this;return((e=t.locked)===r||e.$$is_boolean&&1!=e)&&t.$fail(c.get("ThreadError"),"Mutex not locked"),t.locked=!1,t},s.$synchronize=o=function(){var t,n=this,a=o.$$p,i=a||r;o.$$p=null,n.$lock();try{return t=e.yieldX(i,[]),t===$?t:t}finally{n.$unlock()}},r&&"synchronize"}(t,null)},Opal.modules.set=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=e.breaker,$=e.slice,o=e.klass,a=e.module;return e.add_stubs(["$include","$new","$nil?","$===","$raise","$do_with_enum","$add","$[]","$merge","$join","$to_a","$equal?","$instance_of?","$class","$==","$instance_variable_get","$is_a?","$size","$all?","$include?","$[]=","$delete","$enum_for","$each","$select","$each_key","$to_proc","$empty?","$clear","$keys"]),function(t,$super){function a(){}var i,s,c,l,u=a=o(t,$super,"Set",a),_=u.$$proto,p=u.$$scope;return _.hash=n,u.$include(p.get("Enumerable")),e.defs(u,"$[]",function(e){var t=this;return e=$.call(arguments,0),t.$new(e)}),_.$initialize=i=function(e){var t,r,$,o=this,a=i.$$p,s=a||n;return null==e&&(e=n),i.$$p=null,o.hash=p.get("Hash").$new(),(t=e["$nil?"]())===n||t.$$is_boolean&&1!=t?(((t=p.get("Enumerable")["$==="](e))===n||t.$$is_boolean&&1!=t)&&o.$raise(p.get("ArgumentError"),"value must be enumerable"),s!==!1&&s!==n?(t=(r=o).$do_with_enum,t.$$p=($=function(e){var t=$.$$s||this;return null==e&&(e=n),t.$add(s["$[]"](e))},$.$$s=o,$),t).call(r,e):o.$merge(e)):n},_.$inspect=function(){var e=this;return"#<Set: {"+e.$to_a().$join(",")+"}>"},_["$=="]=function(e){var t,r,$,o=this;return(t=o["$equal?"](e))===n||t.$$is_boolean&&1!=t?(t=e["$instance_of?"](o.$class()))===n||t.$$is_boolean&&1!=t?(r=e["$is_a?"](p.get("Set")),(t=r!==!1&&r!==n?o.$size()["$=="](e.$size()):r)===n||t.$$is_boolean&&1!=t?!1:(t=(r=e)["$all?"],t.$$p=($=function(e){var t=$.$$s||this;return null==t.hash&&(t.hash=n),null==e&&(e=n),t.hash["$include?"](e)},$.$$s=o,$),t).call(r)):o.hash["$=="](e.$instance_variable_get("@hash")):!0},_.$add=function(e){var t=this;return t.hash["$[]="](e,!0),t},e.defn(u,"$<<",_.$add),_.$delete=function(e){var t=this;return t.hash.$delete(e),t},_["$delete?"]=function(e){var t,r=this;return(t=r["$include?"](e))===n||t.$$is_boolean&&1!=t?n:(r.$delete(e),r)},_.$delete_if=s=function(){try{var t,$,o,a,i,c,l=this,u=s.$$p,_=u||n;return s.$$p=null,(t=_!==n)!=!1&&t!==n?t:e.ret(l.$enum_for("delete_if")),(t=($=(a=(i=l).$select,a.$$p=(c=function(t){{var $;c.$$s||this}return null==t&&(t=n),$=e.yield1(_,t),$===r?$:$},c.$$s=l,c),a).call(i)).$each,t.$$p=(o=function(e){var t=o.$$s||this;return null==t.hash&&(t.hash=n),null==e&&(e=n),t.hash.$delete(e)},o.$$s=l,o),t).call($),l}catch(p){if(p===e.returner)return p.$v;throw p}},_["$add?"]=function(e){var t,r=this;return(t=r["$include?"](e))===n||t.$$is_boolean&&1!=t?r.$add(e):n},_.$each=c=function(){var e,t,r=this,$=c.$$p,o=$||n;return c.$$p=null,o===n?r.$enum_for("each"):((e=(t=r.hash).$each_key,e.$$p=o.$to_proc(),e).call(t),r)},_["$empty?"]=function(){var e=this;return e.hash["$empty?"]()},_.$clear=function(){var e=this;return e.hash.$clear(),e},_["$include?"]=function(e){var t=this;return t.hash["$include?"](e)},e.defn(u,"$member?",_["$include?"]),_.$merge=function(e){var t,r,$,o=this;return(t=(r=o).$do_with_enum,t.$$p=($=function(e){var t=$.$$s||this;return null==e&&(e=n),t.$add(e)},$.$$s=o,$),t).call(r,e),o},_.$do_with_enum=l=function(e){var t,r,$=l.$$p,o=$||n;return l.$$p=null,(t=(r=e).$each,t.$$p=o.$to_proc(),t).call(r)},_.$size=function(){var e=this;return e.hash.$size()},e.defn(u,"$length",_.$size),_.$to_a=function(){var e=this;return e.hash.$keys()},n&&"to_a"}(t,null),function(t){var r,o=a(t,"Enumerable"),i=o.$$proto,s=o.$$scope;i.$to_set=r=function(e,t){var o,a,i=this,c=r.$$p,l=c||n;return t=$.call(arguments,1),null==e&&(e=s.get("Set")),r.$$p=null,(o=(a=e).$new,o.$$p=l.$to_proc(),o).apply(a,[i].concat(t))},e.donate(o,["$to_set"])}(t)},Opal.modules.time=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.klass);return e.add_stubs(["$strftime"]),function(t,$super){function $(){}{var o=$=r(t,$super,"Time",$),a=o.$$proto;o.$$scope}return e.defs(o,"$parse",function(e){return new Date(Date.parse(e))}),a.$iso8601=function(){var e=this;return e.$strftime("%FT%T%z")},n&&"iso8601"}(t,null)},Opal.modules.rbconfig=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e,r=e.nil,$=(e.breaker,e.slice,e.module),o=e.hash2;return e.add_stubs(["$split","$[]"]),function(t){var n=$(t,"RbConfig"),a=(n.$$proto,n.$$scope),i=r;i=a.get("RUBY_VERSION").$split("."),e.cdecl(a,"CONFIG",o(["ruby_version","MAJOR","MINOR","TEENY","RUBY","RUBY_INSTALL_NAME","RUBY_SO_NAME","target_os","host_os","PATH_SEPARATOR"],{ruby_version:a.get("RUBY_VERSION"),MAJOR:i["$[]"](0),MINOR:i["$[]"](1),TEENY:i["$[]"](2),RUBY:a.get("RUBY_ENGINE"),RUBY_INSTALL_NAME:a.get("RUBY_ENGINE"),RUBY_SO_NAME:a.get("RUBY_ENGINE"),target_os:"ECMA-262",host_os:"ECMA-262",PATH_SEPARATOR:":"}))}(t),e.cdecl(n,"RUBY_NAME","opal"),e.cdecl(n,"RUBY_EXE","opal"),e.cdecl(n,"RUBY_PATCHLEVEL","327")},Opal.modules.pathname=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.klass,o=e.module;return e.add_stubs(["$==","$raise","$attr_reader","$path","$start_with?","$!","$absolute?","$sub","$new"]),function(t,$super){function o(){}var a=o=$(t,$super,"Pathname",o),i=a.$$proto,s=a.$$scope;return i.path=n,i.$initialize=function(e){var t=this;return e["$=="]("\x00")&&t.$raise(s.get("ArgumentError")),t.path=e},a.$attr_reader("path"),i["$=="]=function(e){var t=this;return e.$path()["$=="](t.path)},i["$absolute?"]=function(){var e=this;return e.path["$start_with?"]("/")},i["$relative?"]=function(){var e=this;return e["$absolute?"]()["$!"]()},i["$root?"]=function(){var e=this;return e.path["$=="]("/")},i.$parent=function(){var e,t=this,r=n;return r=t.path.$sub(/\/([^\/]+\/?$)/,""),r["$=="]("")&&(r=function(){return(e=t["$absolute?"]())===n||e.$$is_boolean&&1!=e?".":"/"}()),s.get("Pathname").$new(r)},i.$sub=function(e){var t,n=this;return e=r.call(arguments,0),s.get("Pathname").$new((t=n.path).$sub.apply(t,[].concat(e)))},i.$cleanpath=function(){var t=this;return e.normalize_loadable_path(t.path)},i.$to_path=function(){var e=this;return e.path},i.$hash=function(){var e=this;return e.path},e.defn(a,"$to_str",i.$to_path),e.defn(a,"$to_s",i.$to_path)}(t,null),function(t){var n=o(t,"Kernel"),r=n.$$proto,$=n.$$scope;r.$Pathname=function(e){return $.get("Pathname").$new(e)},e.donate(n,["$Pathname"])}(t)},Opal.modules["rspec/core/version"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=(e.nil,e.breaker,e.slice,e.module);return function(t){{var r=n(t,"RSpec");r.$$proto,r.$$scope}!function(t){{var r=n(t,"Core");r.$$proto,r.$$scope}!function(t){var r=n(t,"Version"),$=(r.$$proto,r.$$scope);e.cdecl($,"STRING","3.0.0.beta1")}(r)}(r)}(t)},Opal.modules["rspec/core/flat_map"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=e.breaker,$=(e.slice,e.module);return e.add_stubs(["$respond_to?","$flat_map","$flatten","$map","$module_function"]),function(t){{var o=$(t,"RSpec");o.$$proto,o.$$scope}!function(t){{var o=$(t,"Core");o.$$proto,o.$$scope}!function(t){{var o,a,i,s=$(t,"FlatMap"),c=s.$$proto;s.$$scope}c.$flat_map=(o=[]["$respond_to?"]("flat_map"))===n||o.$$is_boolean&&1!=o?i=function(t){var $,o,a,s=this,c=i.$$p,l=c||n;return i.$$p=null,($=(o=t).$map,$.$$p=(a=function(t){{var $;a.$$s||this}return null==t&&(t=n),$=e.yield1(l,t),$===r?$:$},a.$$s=s,a),$).call(o).$flatten()}:a=function(t){var $,o,i,s=this,c=a.$$p,l=c||n;return a.$$p=null,($=(o=t).$flat_map,$.$$p=(i=function(t){{var $;i.$$s||this}return null==t&&(t=n),$=e.yield1(l,t),$===r?$:$},i.$$s=s,i),$).call(o)},s.$module_function("flat_map"),e.donate(s,["$flat_map","$flat_map"])}(o)}(o)}(t)},Opal.modules["rspec/core/filter_manager"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=e.breaker,$=e.slice,o=e.module,a=e.klass,i=e.hash2;return e.add_stubs(["$expand_path","$gsub","$inspect","$inspect_filter_hash","$lambda","$!","$each","$store","$without_conditional_filters","$empty?","$private","$reject","$==","$[]","$_warn_deprecated_keys","$last","$has_key?","$_warn_deprecated_key","$deprecate","$[]=","$delete","$attr_reader","$new","$extend","$push","$replace","$clear","$inclusions","$empty_without_conditional_filters?","$exclusions","$select","$exclude?","$include?","$merge","$reverse_merge","$any_apply?","$unless_standalone","$already_set_standalone_filter?","$is_standalone_filter?","$each_key","$merge!","$each_pair","$any?"]),function(t){{var s=o(t,"RSpec");s.$$proto,s.$$scope}!function(t){{var s=o(t,"Core");s.$$proto,s.$$scope}!function(t,$super){function s(){}var c,l=s=a(t,$super,"FilterManager",s),u=l.$$proto,_=l.$$scope;return u.inclusions=u.exclusions=n,e.cdecl(_,"STANDALONE_FILTERS",["locations","line_numbers","full_description"]),e.cdecl(_,"PROC_HEX_NUMBER",/0x[0-9a-f]+@/),e.cdecl(_,"PROJECT_DIR",_.get("File").$expand_path(".")),e.defs(l,"$inspect_filter_hash",function(e){return e.$inspect().$gsub(_.get("PROC_HEX_NUMBER"),"").$gsub(_.get("PROJECT_DIR"),".").$gsub(" (lambda)","")}),function(e,$super){function t(){}var r=t=a(e,$super,"InclusionFilterHash",t),$=r.$$proto,o=r.$$scope;return $.$description=function(){var e=this;return o.get("FilterManager").$inspect_filter_hash(e)},n&&"description"}(l,_.get("Hash")),function(t,$super){function r(){}var o,s,c,l,u,_,p=r=a(t,$super,"ExclusionFilterHash",r),d=p.$$proto,f=p.$$scope;return e.cdecl(f,"CONDITIONAL_FILTERS",i(["if","unless"],{"if":(o=(s=p).$lambda,o.$$p=(c=function(e){c.$$s||this;return null==e&&(e=n),e["$!"]()},c.$$s=p,c),o).call(s),unless:(o=(l=p).$lambda,o.$$p=(u=function(e){u.$$s||this;return null==e&&(e=n),e},u.$$s=p,u),o).call(l)})),d.$initialize=_=function(){var t,r,o,a=$.call(arguments,0),i=this,s=_.$$p;return _.$$p=null,e.find_super_dispatcher(i,"initialize",_,s).apply(i,a),(t=(r=f.get("CONDITIONAL_FILTERS")).$each,t.$$p=(o=function(e,t){var r=o.$$s||this;return null==e&&(e=n),null==t&&(t=n),r.$store(e,t)},o.$$s=i,o),t).call(r)},d.$description=function(){var e=this;return f.get("FilterManager").$inspect_filter_hash(e.$without_conditional_filters())},d["$empty_without_conditional_filters?"]=function(){var e=this;return e.$without_conditional_filters()["$empty?"]()},p.$private(),d.$without_conditional_filters=function(){var e,t,r,$=this;return(e=(t=$).$reject,e.$$p=(r=function(e,t){r.$$s||this;
return null==e&&(e=n),null==t&&(t=n),f.get("CONDITIONAL_FILTERS")["$[]"](e)["$=="](t)},r.$$s=$,r),e).call(t)},n&&"without_conditional_filters"}(l,_.get("Hash")),function(t){var r,a,i=o(t,"BackwardCompatibility"),s=i.$$proto,c=i.$$scope;s.$merge=r=function(t,n,o){var a=$.call(arguments,0),i=this,s=r.$$p;return o=$.call(arguments,2),r.$$p=null,i.$_warn_deprecated_keys(o.$last()),e.find_super_dispatcher(i,"merge",r,s).apply(i,a)},s.$reverse_merge=a=function(t,n,r){var o=$.call(arguments,0),i=this,s=a.$$p;return r=$.call(arguments,2),a.$$p=null,i.$_warn_deprecated_keys(r.$last()),e.find_super_dispatcher(i,"reverse_merge",a,s).apply(i,o)},s.$_warn_deprecated_keys=function(e){var t,r=this;return(t=e["$has_key?"]("unless"))===n||t.$$is_boolean&&1!=t||r.$_warn_deprecated_key("unless",e),(t=e["$has_key?"]("if"))===n||t.$$is_boolean&&1!=t?n:r.$_warn_deprecated_key("if",e)},s.$_warn_deprecated_key=function(e,t){var r=this;return null==r.exclusions&&(r.exclusions=n),c.get("RSpec").$deprecate("FilterManager#exclude("+e.$inspect()+" => "+t["$[]"](e).$inspect()+")"),r.exclusions["$[]="](e,t.$delete(e))},e.donate(i,["$merge","$reverse_merge","$_warn_deprecated_keys","$_warn_deprecated_key"])}(l),l.$attr_reader("exclusions","inclusions"),u.$initialize=function(){var e=this;return e.exclusions=_.get("ExclusionFilterHash").$new(),e.inclusions=_.get("InclusionFilterHash").$new(),e.$extend(_.get("BackwardCompatibility"))},u.$add_location=function(e,t){var r,$,o,a,s=this,c=n;return c=(r=s.inclusions.$delete("locations"))!==!1&&r!==n?r:($=(o=_.get("Hash")).$new,$.$$p=(a=function(e,t){a.$$s||this;return null==e&&(e=n),null==t&&(t=n),e["$[]="](t,[])},a.$$s=s,a),$).call(o),(r=c["$[]"](_.get("File").$expand_path(e))).$push.apply(r,[].concat(t)),s.inclusions.$replace(i(["locations"],{locations:c})),s.exclusions.$clear()},u["$empty?"]=function(){var e,t=this;return e=t.$inclusions()["$empty?"](),e!==!1&&e!==n?t.$exclusions()["$empty_without_conditional_filters?"]():e},u.$prune=function(e){var t,r,$,o=this;return(t=(r=e).$select,t.$$p=($=function(e){var t,r=$.$$s||this;return null==e&&(e=n),t=r["$exclude?"](e)["$!"](),t!==!1&&t!==n?r["$include?"](e):t},$.$$s=o,$),t).call(r)},u.$exclude=function(e){var t,n=this;return e=$.call(arguments,0),(t=n).$merge.apply(t,[n.exclusions,n.inclusions].concat(e))},u["$exclude!"]=function(e){var t,n=this;return e=$.call(arguments,0),(t=n).$replace.apply(t,[n.exclusions,n.inclusions].concat(e))},u.$exclude_with_low_priority=function(e){var t,n=this;return e=$.call(arguments,0),(t=n).$reverse_merge.apply(t,[n.exclusions,n.inclusions].concat(e))},u["$exclude?"]=function(e){var t,r=this;return(t=r.exclusions["$empty?"]())===n||t.$$is_boolean&&1!=t?e["$any_apply?"](r.exclusions):!1},u.$include=function(e){var t,r,o,a=this;return e=$.call(arguments,0),(t=(r=a).$unless_standalone,t.$$p=(o=function(){var t,r=o.$$s||this;return null==r.inclusions&&(r.inclusions=n),null==r.exclusions&&(r.exclusions=n),(t=r).$merge.apply(t,[r.inclusions,r.exclusions].concat(e))},o.$$s=a,o),t).apply(r,[].concat(e))},u["$include!"]=function(e){var t,r,o,a=this;return e=$.call(arguments,0),(t=(r=a).$unless_standalone,t.$$p=(o=function(){var t,r=o.$$s||this;return null==r.inclusions&&(r.inclusions=n),null==r.exclusions&&(r.exclusions=n),(t=r).$replace.apply(t,[r.inclusions,r.exclusions].concat(e))},o.$$s=a,o),t).apply(r,[].concat(e))},u.$include_with_low_priority=function(e){var t,r,o,a=this;return e=$.call(arguments,0),(t=(r=a).$unless_standalone,t.$$p=(o=function(){var t,r=o.$$s||this;return null==r.inclusions&&(r.inclusions=n),null==r.exclusions&&(r.exclusions=n),(t=r).$reverse_merge.apply(t,[r.inclusions,r.exclusions].concat(e))},o.$$s=a,o),t).apply(r,[].concat(e))},u["$include?"]=function(e){var t,r=this;return(t=r.inclusions["$empty?"]())===n||t.$$is_boolean&&1!=t?e["$any_apply?"](r.inclusions):!0},l.$private(),u.$unless_standalone=c=function(t){var o,a=this,i=c.$$p,s=i||n;return t=$.call(arguments,0),c.$$p=null,(o=a["$already_set_standalone_filter?"]())===n||o.$$is_boolean&&1!=o?(o=a["$is_standalone_filter?"](t.$last()))===n||o.$$is_boolean&&1!=o?(o=e.yieldX(s,[]),o===r?o:o):a.inclusions.$replace(t.$last()):n},u.$merge=function(e,t,r){var o,a,i,s=this;return r=$.call(arguments,2),(o=(a=e["$merge!"](r.$last())).$each_key,o.$$p=(i=function(e){i.$$s||this;return null==e&&(e=n),t.$delete(e)},i.$$s=s,i),o).call(a)},u.$replace=function(e,t,r){var o,a,i,s=this;return r=$.call(arguments,2),(o=(a=r.$last()).$each_key,o.$$p=(i=function(e){i.$$s||this;return null==e&&(e=n),t.$delete(e)},i.$$s=s,i),o).call(a),e.$replace(r.$last())},u.$reverse_merge=function(e,t,r){var o,a,i,s=this,c=n;return r=$.call(arguments,2),c=r.$last().$merge(e),(o=(a=t).$each_pair,o.$$p=(i=function(e,t){i.$$s||this;return null==e&&(e=n),null==t&&(t=n),c["$[]"](e)["$=="](t)?c.$delete(e):n},i.$$s=s,i),o).call(a),e.$replace(c)},u["$already_set_standalone_filter?"]=function(){var e=this;return e["$is_standalone_filter?"](e.$inclusions())},u["$is_standalone_filter?"]=function(e){var t,r,$,o=this;return(t=(r=_.get("STANDALONE_FILTERS"))["$any?"],t.$$p=($=function(t){$.$$s||this;return null==t&&(t=n),e["$has_key?"](t)},$.$$s=o,$),t).call(r)},n&&"is_standalone_filter?"}(s,null)}(s)}(t)},Opal.modules["rspec/core/dsl"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e,r=e.nil,$=(e.breaker,e.slice),o=e.module;return e.add_stubs(["$register","$describe","$to_proc","$extend","$send"]),function(t){{var n=o(t,"RSpec");n.$$proto,n.$$scope}!function(t){{var n=o(t,"Core");n.$$proto,n.$$scope}!function(t){var n,a=o(t,"DSL"),i=a.$$proto,s=a.$$scope;i.$describe=n=function(e){var t,o,a=n.$$p,i=a||r;return e=$.call(arguments,0),n.$$p=null,(t=(o=s.get("RSpec").$$scope.get("Core").$$scope.get("ExampleGroup")).$describe,t.$$p=i.$to_proc(),t).apply(o,[].concat(e)).$register()},e.donate(a,["$describe"])}(n)}(n)}(t),t.$extend(n.get("RSpec").$$scope.get("Core").$$scope.get("DSL")),n.get("Module").$send("include",n.get("RSpec").$$scope.get("Core").$$scope.get("DSL"))},Opal.modules["rspec/core/reporter"]=function(e){e.dynamic_require_severity="warning";var t=(e.top,e),n=e.nil,r=e.breaker,$=e.slice,o=e.module,a=e.klass;return e.add_stubs(["$map","$to_proc","$new","$[]=","$each","$register_listener","$respond_to?","$<<","$[]","$to_sym","$start","$finish","$now","$notify","$empty?","$descendant_filtered_examples","$+","$stop","$seed_used?","$seed","$alias_method","$to_f","$-","$send","$registered_listeners","$private"]),function(t){{var i=o(t,"Core");i.$$proto,i.$$scope}!function(t,$super){function o(){}var i,s,c,l,u=o=a(t,$super,"Reporter",o),_=u.$$proto,p=u.$$scope;return _.listeners=_.example_count=_.failure_count=_.pending_count=_.duration=_.configuration=_.start=n,e.cdecl(p,"NOTIFICATIONS",(i=(s=["start","message","example_group_started","example_group_finished","example_started","example_passed","example_failed","example_pending","start_dump","dump_pending","dump_failures","dump_summary","seed","close","stop","deprecation","deprecation_summary"]).$map,i.$$p="to_sym".$to_proc(),i).call(s)),_.$initialize=function(e,t){var r,o,a,i,s,c=this;return t=$.call(arguments,1),c.configuration=e,c.listeners=(r=(o=p.get("Hash")).$new,r.$$p=(a=function(e,t){a.$$s||this;return null==e&&(e=n),null==t&&(t=n),e["$[]="](t,[])},a.$$s=c,a),r).call(o),(r=(i=t).$each,r.$$p=(s=function(e){var t,r=s.$$s||this;return null==e&&(e=n),(t=r).$register_listener.apply(t,[e].concat(p.get("NOTIFICATIONS")))},s.$$s=c,s),r).call(i),c.example_count=c.failure_count=c.pending_count=0,c.duration=c.start=n},_.$register_listener=function(e,t){var r,o,a,i=this;return t=$.call(arguments,1),(r=(o=t).$each,r.$$p=(a=function(t){var r,$=a.$$s||this;return null==$.listeners&&($.listeners=n),null==t&&(t=n),(r=e["$respond_to?"](t))===n||r.$$is_boolean&&1!=r?n:$.listeners["$[]"](t.$to_sym())["$<<"](e)},a.$$s=i,a),r).call(o),!0},_.$registered_listeners=function(e){var t=this;return t.listeners["$[]"](e)},_.$report=c=function(t){var $,o=this,a=c.$$p,i=a||n;c.$$p=null,o.$start(t);try{return $=e.yield1(i,o),$===r?$:$}finally{o.$finish()}},_.$start=function(e){var t=this;return t.start=p.get("RSpec").$$scope.get("Core").$$scope.get("Time").$now(),t.$notify("start",e)},_.$message=function(e){var t=this;return t.$notify("message",e)},_.$example_group_started=function(e){var t,r=this;return(t=e.$descendant_filtered_examples()["$empty?"]())===n||t.$$is_boolean&&1!=t?r.$notify("example_group_started",e):n},_.$example_group_finished=function(e){var t,r=this;return(t=e.$descendant_filtered_examples()["$empty?"]())===n||t.$$is_boolean&&1!=t?r.$notify("example_group_finished",e):n},_.$example_started=function(e){var t=this;return t.example_count=t.example_count["$+"](1),t.$notify("example_started",e)},_.$example_passed=function(e){var t=this;return t.$notify("example_passed",e)},_.$example_failed=function(e){var t=this;return t.failure_count=t.failure_count["$+"](1),t.$notify("example_failed",e)},_.$example_pending=function(e){var t=this;return t.pending_count=t.pending_count["$+"](1),t.$notify("example_pending",e)},_.$deprecation=function(e){var t=this;return t.$notify("deprecation",e)},_.$finish=function(){var e,t=this;try{return t.$stop(),t.$notify("start_dump"),t.$notify("dump_pending"),t.$notify("dump_failures"),t.$notify("dump_summary",t.duration,t.example_count,t.failure_count,t.pending_count),t.$notify("deprecation_summary"),(e=t["$seed_used?"]())===n||e.$$is_boolean&&1!=e?n:t.$notify("seed",t.configuration.$seed())}finally{t.$notify("close")}},u.$alias_method("abort","finish"),_.$stop=function(){var e,t=this;return(e=t.start)===n||e.$$is_boolean&&1!=e||(t.duration=p.get("RSpec").$$scope.get("Core").$$scope.get("Time").$now()["$-"](t.start).$to_f()),t.$notify("stop")},_.$notify=l=function(e,t){var r,o,a,i=this,s=l.$$p,c=s||n;return t=$.call(arguments,1),l.$$p=null,(r=(o=i.$registered_listeners(e)).$each,r.$$p=(a=function(r){{var $,o;a.$$s||this}return null==r&&(r=n),($=(o=r).$send,$.$$p=c.$to_proc(),$).apply(o,[e].concat(t))},a.$$s=i,a),r).call(o)},u.$private(),_["$seed_used?"]=function(){var e,t=this;return e=t.configuration.$seed(),e!==!1&&e!==n?t.configuration["$seed_used?"]():e},n&&"seed_used?"}(i,null)}(t.get("RSpec"))},Opal.modules["rspec/core/hooks"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass,a=e.hash2;return e.add_stubs(["$attr_reader","$all_apply?","$options","$instance_exec","$to_proc","$block","$instance_exec_with_rescue","$message","$reporter","$configuration","$class","$first","$backtrace","$each","$define_method","$__send__","$hooks","$public_instance_methods","$protected","$with","$new","$select","$options_apply?","$run","$call","$reduce","$wrap","$empty?","$shift","$[]","$process","$private","$==","$any?","$include?","$parent_groups","$<<","$register_hook","$alias_method","$dry_run?","$find_hook","$for","$flat_map","$[]=","$reverse","$scope_and_options_from","$send","$===","$before_all_hooks_for","$after_all_hooks_for","$around_each_hooks_for","$before_each_hooks_for","$after_each_hooks_for","$extract_scope_from","$build_hash_from","$is_a?","$raise"]),function(t){{var i=$(t,"RSpec");i.$$proto,i.$$scope}!function(t){{var i=$(t,"Core");i.$$proto,i.$$scope}!function(t){var i,s,c,l,u,_,p,d,f,h,m,g,v,b=$(t,"Hooks"),y=b.$$proto,x=b.$$scope;!function(e,$super){function t(){}{var r=t=o(e,$super,"Hook",t),$=r.$$proto;r.$$scope}return r.$attr_reader("block","options"),$.$initialize=function(e,t){var n=this;return n.block=e,n.options=t},$["$options_apply?"]=function(e){var t=this;return e["$all_apply?"](t.$options())},n&&"options_apply?"}(b,null),function(e,$super){function t(){}{var r=t=o(e,$super,"BeforeHook",t),$=r.$$proto;r.$$scope}return $.$run=function(e){var t,n,r=this;return(t=(n=e).$instance_exec,t.$$p=r.$block().$to_proc(),t).call(n,e)},$.$display_name=function(){return"before hook"},n&&"display_name"}(b,x.get("Hook")),function(e,$super){function t(){}{var r=t=o(e,$super,"AfterHook",t),$=r.$$proto;r.$$scope}return $.$run=function(e){var t,n,r=this;return(t=(n=e).$instance_exec_with_rescue,t.$$p=r.$block().$to_proc(),t).call(n,"in an after hook")},$.$display_name=function(){return"after hook"},n&&"display_name"}(b,x.get("Hook")),function(t,$super){function r(){}var $=r=o(t,$super,"AfterAllHook",r),a=$.$$proto,i=$.$$scope;return a.$run=function(t){var r,$,o=this,a=n;try{return(r=($=t).$instance_exec,r.$$p=o.$block().$to_proc(),r).call($,t)}catch(s){if(e.rescue(s,[i.get("Exception")]))return a=s,i.get("RSpec").$configuration().$reporter().$message("\nAn error occurred in an after(:all) hook.\n  "+a.$class()+": "+a.$message()+"\n  occurred at "+a.$backtrace().$first()+"\n\n");throw s}},a.$display_name=function(){return"after(:all) hook"},n&&"display_name"}(b,x.get("Hook")),function(e,$super){function t(){}{var r=t=o(e,$super,"AroundHook",t),$=r.$$proto;r.$$scope}return $.$display_name=function(){return"around hook"},n&&"display_name"}(b,x.get("Hook")),function(t,$super){function $(){}var a,i,s,c=$=o(t,$super,"BaseHookCollection",$),l=c.$$proto,u=c.$$scope;return(a=(i=u.get("Array").$public_instance_methods(!1)).$each,a.$$p=(s=function(e){var t,$,o,a=s.$$s||this;return null==e&&(e=n),(t=($=a).$define_method,t.$$p=(o=function(t){var $,a,i,s=o.$$s||this;return t=r.call(arguments,0),$=o.$$p||n,o.$$p=null,(a=(i=s.$hooks()).$__send__,a.$$p=$.$to_proc(),a).apply(i,[e].concat(t))},o.$$s=a,o),t).call($,e)},s.$$s=c,s),a).call(i),c.$attr_reader("hooks"),c.$protected("hooks"),e.defn(c,"$append",l.$push),e.defn(c,"$prepend",l.$unshift),l.$initialize=function(e){var t=this;return null==e&&(e=[]),t.hooks=e},n&&"initialize"}(b,null),function(e,$super){function t(){}{var r=t=o(e,$super,"HookCollection",t),$=r.$$proto;r.$$scope}return $.$for=function(e){var t,r,$,o=this;return o.$class().$new((t=(r=o.$hooks()).$select,t.$$p=($=function(t){$.$$s||this;return null==t&&(t=n),t["$options_apply?"](e)},$.$$s=o,$),t).call(r)).$with(e)},$.$with=function(e){var t=this;return t.example=e,t},$.$run=function(){var e,t,r,$=this;return(e=(t=$.$hooks()).$each,e.$$p=(r=function(e){var t=r.$$s||this;return null==t.example&&(t.example=n),null==e&&(e=n),e.$run(t.example)},r.$$s=$,r),e).call(t)},n&&"run"}(b,x.get("BaseHookCollection")),function(e,$super){function t(){}{var r=t=o(e,$super,"AroundHookCollection",t),$=r.$$proto;r.$$scope}return $.initial_procsy=n,$.$for=function(e,t){var r,$,o,a=this;return null==t&&(t=n),a.$class().$new((r=($=a.$hooks()).$select,r.$$p=(o=function(t){o.$$s||this;return null==t&&(t=n),t["$options_apply?"](e)},o.$$s=a,o),r).call($)).$with(e,t)},$.$with=function(e,t){var n=this;return n.example=e,n.initial_procsy=t,n},$.$run=function(){var e,t,r,$=this;return(e=(t=$.$hooks()).$reduce,e.$$p=(r=function(e,t){var $,o,a,i=r.$$s||this;return null==e&&(e=n),null==t&&(t=n),($=(o=e).$wrap,$.$$p=(a=function(){var r,$,o=a.$$s||this;return null==o.example&&(o.example=n),(r=($=o.example).$instance_exec,r.$$p=t.$block().$to_proc(),r).call($,e)},a.$$s=i,a),$).call(o)},r.$$s=$,r),e).call(t,$.initial_procsy).$call()},n&&"run"}(b,x.get("BaseHookCollection")),function(e,$super){function t(){}{var r=t=o(e,$super,"GroupHookCollection",t),$=r.$$proto;r.$$scope}return $.group=n,$.$for=function(e){var t=this;return t.group=e,t},$.$run=function(){var e,t=this;return function(){for(;(e=t.$hooks()["$empty?"]())===n||e.$$is_boolean&&1!=e;)t.$hooks().$shift().$run(t.group);return n}()},n&&"run"}(b,x.get("BaseHookCollection")),function(e,$super){function t(){}{var r=t=o(e,$super,"HookCollections",t),$=r.$$proto;r.$$scope}return $.data=n,$.$initialize=function(e){var t=this;return t.data=e},$["$[]"]=function(e){var t=this;return t.data["$[]"](e)},$.$register_globals=function(e,t){var n=this;return n.$process(e,t,"before","each"),n.$process(e,t,"after","each"),n.$process(e,t,"around","each"),n.$process(e,t,"before","all"),n.$process(e,t,"after","all")},r.$private(),$.$process=function(e,t,r,$){var o,a,i,s=this;return(o=(a=t["$[]"](r)["$[]"]($)).$each,o.$$p=(i=function(t){var o,a,s,c,l=i.$$s||this;return null==t&&(t=n),(o=(a=$["$=="]("each"))!==!1&&a!==n?a:t["$options_apply?"](e))===n||o.$$is_boolean&&1!=o?n:(o=(a=(s=e.$parent_groups())["$any?"],a.$$p=(c=function(e){c.$$s||this;return null==e&&(e=n),e.$hooks()["$[]"](r)["$[]"]($)["$include?"](t)},c.$$s=l,c),a).call(s))===n||o.$$is_boolean&&1!=o?l["$[]"](r)["$[]"]($)["$<<"](t):n},i.$$s=s,i),o).call(a)},n&&"process"}(b,null),y.$hooks=function(){var e,t=this;return null==t.hooks&&(t.hooks=n),(e=t.hooks)!==!1&&e!==n?e:t.hooks=x.get("HookCollections").$new(a(["around","before","after"],{around:a(["each"],{each:x.get("AroundHookCollection").$new()}),before:a(["each","all","suite"],{each:x.get("HookCollection").$new(),all:x.get("HookCollection").$new(),suite:x.get("HookCollection").$new()}),after:a(["each","all","suite"],{each:x.get("HookCollection").$new(),all:x.get("HookCollection").$new(),suite:x.get("HookCollection").$new()})}))},y.$before=i=function(e){var t,$,o=this,a=i.$$p,s=a||n;return e=r.call(arguments,0),i.$$p=null,(t=($=o).$register_hook,t.$$p=s.$to_proc(),t).apply($,["append","before"].concat(e))},b.$alias_method("append_before","before"),y.$prepend_before=s=function(e){var t,$,o=this,a=s.$$p,i=a||n;return e=r.call(arguments,0),s.$$p=null,(t=($=o).$register_hook,t.$$p=i.$to_proc(),t).apply($,["prepend","before"].concat(e))},y.$after=c=function(e){var t,$,o=this,a=c.$$p,i=a||n;return e=r.call(arguments,0),c.$$p=null,(t=($=o).$register_hook,t.$$p=i.$to_proc(),t).apply($,["prepend","after"].concat(e))},b.$alias_method("prepend_after","after"),y.$append_after=l=function(e){var t,$,o=this,a=l.$$p,i=a||n;return e=r.call(arguments,0),l.$$p=null,(t=($=o).$register_hook,t.$$p=i.$to_proc(),t).apply($,["append","after"].concat(e))},y.$around=u=function(e){var t,$,o=this,a=u.$$p,i=a||n;return e=r.call(arguments,0),u.$$p=null,(t=($=o).$register_hook,t.$$p=i.$to_proc(),t).apply($,["prepend","around"].concat(e))},y.$run_hook=function(e,t,r,$){var o,a=this;return null==r&&(r=x.get("ExampleGroup").$new()),null==$&&($=n),(o=x.get("RSpec").$configuration()["$dry_run?"]())===n||o.$$is_boolean&&1!=o?a.$find_hook(e,t,r,$).$run():n},y.$around_each_hooks_for=function(e,t){var r,$,o,a=this;return null==t&&(t=n),x.get("AroundHookCollection").$new((r=($=x.get("FlatMap")).$flat_map,r.$$p=(o=function(e){o.$$s||this;return null==e&&(e=n),e.$hooks()["$[]"]("around")["$[]"]("each")},o.$$s=a,o),r).call($,a.$parent_groups())).$for(e,t)},b.$private(),e.cdecl(x,"SCOPES",["each","all","suite"]),e.cdecl(x,"HOOK_TYPES",a(["before","after","around"],{before:(_=(p=x.get("Hash")).$new,_.$$p=(d=function(){d.$$s||this;return x.get("BeforeHook")},d.$$s=b,d),_).call(p),after:(_=(f=x.get("Hash")).$new,_.$$p=(h=function(){h.$$s||this;return x.get("AfterHook")},h.$$s=b,h),_).call(f),around:(_=(m=x.get("Hash")).$new,_.$$p=(g=function(){g.$$s||this;return x.get("AroundHook")},g.$$s=b,g),_).call(m)})),x.get("HOOK_TYPES")["$[]"]("after")["$[]="]("all",x.get("AfterAllHook")),y.$before_all_hooks_for=function(e){var t=this;return x.get("GroupHookCollection").$new(t.$hooks()["$[]"]("before")["$[]"]("all")).$for(e)},y.$after_all_hooks_for=function(e){var t=this;return x.get("GroupHookCollection").$new(t.$hooks()["$[]"]("after")["$[]"]("all")).$for(e)},y.$before_each_hooks_for=function(e){var t,r,$,o=this;return x.get("HookCollection").$new((t=(r=x.get("FlatMap")).$flat_map,t.$$p=($=function(e){$.$$s||this;return null==e&&(e=n),e.$hooks()["$[]"]("before")["$[]"]("each")},$.$$s=o,$),t).call(r,o.$parent_groups().$reverse())).$for(e)},y.$after_each_hooks_for=function(e){var t,r,$,o=this;return x.get("HookCollection").$new((t=(r=x.get("FlatMap")).$flat_map,t.$$p=($=function(e){$.$$s||this;return null==e&&(e=n),e.$hooks()["$[]"]("after")["$[]"]("each")},$.$$s=o,$),t).call(r,o.$parent_groups())).$for(e)},y.$register_hook=v=function(t,$,o){var a,i,s=this,c=v.$$p,l=c||n,u=n,_=n;return o=r.call(arguments,2),v.$$p=null,a=e.to_ary((i=s).$scope_and_options_from.apply(i,[].concat(o))),u=null==a[0]?n:a[0],_=null==a[1]?n:a[1],s.$hooks()["$[]"]($)["$[]"](u).$send(t,x.get("HOOK_TYPES")["$[]"]($)["$[]"](u).$new(l,_))},y.$find_hook=function(e,t,r,$){var o=this,a=n;return function(){return a=[e,t],["before","all"]["$==="](a)?o.$before_all_hooks_for(r):["after","all"]["$==="](a)?o.$after_all_hooks_for(r):["around","each"]["$==="](a)?o.$around_each_hooks_for(r,$):["before","each"]["$==="](a)?o.$before_each_hooks_for(r):["after","each"]["$==="](a)?o.$after_each_hooks_for(r):["before","suite"]["$==="](a)||["after","suite"]["$==="](a)?o.$hooks()["$[]"](e)["$[]"]("suite").$with(r):n}()},y.$scope_and_options_from=function(e){var t=this;return e=r.call(arguments,0),[t.$extract_scope_from(e),x.get("Metadata").$build_hash_from(e)]},y.$extract_scope_from=function(e){var t,r,$,o,a=this;return(t=x.get("SCOPES")["$include?"](e.$first()))===n||t.$$is_boolean&&1!=t?(t=(r=($=e)["$any?"],r.$$p=(o=function(e){o.$$s||this;return null==e&&(e=n),e["$is_a?"](x.get("Symbol"))},o.$$s=a,o),r).call($))===n||t.$$is_boolean&&1!=t?"each":a.$raise(x.get("ArgumentError").$new("You must explicitly give a scope (:each, :all, or :suite) when using symbols as metadata for a hook.")):e.$shift()},e.donate(b,["$hooks","$before","$prepend_before","$after","$append_after","$around","$run_hook","$around_each_hooks_for","$before_all_hooks_for","$after_all_hooks_for","$before_each_hooks_for","$after_each_hooks_for","$register_hook","$find_hook","$scope_and_options_from","$extract_scope_from"])}(i)}(i)}(t)},Opal.modules["rspec/core/memoized_helpers"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=e.breaker,$=(e.slice,e.module),o=e.hash2,a=e.klass;return e.add_stubs(["$fetch","$[]=","$__memoized","$described_class","$description","$class","$===","$new","$handle_matcher","$subject","$private","$instance_eval","$==","$raise","$article","$hook_expression","$first_non_rspec_line","$hook_intention","$extend","$nil?","$send","$to_proc","$module_for","$arity","$define_method","$current_example","$let","$before","$__send__","$alias_method","$get_constant_or_yield","$include","$const_set","$method","$const_defined?","$const_get"]),function(t){{var i=$(t,"RSpec");i.$$proto,i.$$scope}!function(t){{var i=$(t,"Core");i.$$proto,i.$$scope}!function(t){var i,s,c=$(t,"MemoizedHelpers"),l=c.$$proto,u=c.$$scope;l.$subject=function(){var e,t,r,$=this;return(e=(t=$.$__memoized()).$fetch,e.$$p=(r=function(){var e,t=r.$$s||this,$=n;return t.$__memoized()["$[]="]("subject",function(){return $=(e=t.$described_class())!==!1&&e!==n?e:t.$class().$description(),(e=u.get("Class")["$==="]($))===n||e.$$is_boolean&&1!=e?$:$.$new()}())},r.$$s=$,r),e).call(t,"subject")},l.$should=function(e,t){var r=this;return null==e&&(e=n),null==t&&(t=n),u.get("RSpec").$$scope.get("Expectations").$$scope.get("PositiveExpectationHandler").$handle_matcher(r.$subject(),e,t)},l.$should_not=function(e,t){var r=this;return null==e&&(e=n),null==t&&(t=n),u.get("RSpec").$$scope.get("Expectations").$$scope.get("NegativeExpectationHandler").$handle_matcher(r.$subject(),e,t)},c.$private(),l.$__memoized=function(){var e,t=this;return null==t.__memoized&&(t.__memoized=n),(e=t.__memoized)!==!1&&e!==n?e:t.__memoized=o([],{})},function(t,$super){function $(){}var o,i,s=$=a(t,$super,"AllHookMemoizedHash",$),c=(s.$$proto,s.$$scope);return e.defs(s,"$isolate_for_all_hook",o=function(t){var $,a,i,s=this,c=o.$$p,l=c||n,u=n;return o.$$p=null,u=s,($=(a=t).$instance_eval,$.$$p=(i=function(){var t,$=i.$$s||this;$.__memoized=u;try{return t=e.yieldX(l,[]),t===r?t:t}finally{$.__memoized=n}},i.$$s=s,i),$).call(a)}),e.defs(s,"$fetch",i=function(e){var t=this,r=(i.$$p,n);return i.$$p=null,r=function(){return e["$=="]("subject")?"subject":"let declaration `"+e+"`"}(),t.$raise(""+r+" accessed in "+t.$article()+" "+t.$hook_expression()+" hook at:\n  "+c.get("CallerFilter").$first_non_rspec_line()+"\n\n`let` and `subject` declarations are not intended to be called\nin "+t.$article()+" "+t.$hook_expression()+" hook, as they exist to define state that\nis reset between each example, while "+t.$hook_expression()+" exists to\n"+t.$hook_intention()+".\n")}),function(t,$super){function r(){}{var $=r=a(t,$super,"Before",r);$.$$proto,$.$$scope}return e.defs($,"$hook_expression",function(){return"`before(:all)`"}),e.defs($,"$article",function(){return"a"}),e.defs($,"$hook_intention",function(){return"define state that is shared across examples in an example group"}),n&&"hook_intention"}(s,s),function(t,$super){function r(){}{var $=r=a(t,$super,"After",r);$.$$proto,$.$$scope}return e.defs($,"$hook_expression",function(){return"`after(:all)`"}),e.defs($,"$article",function(){return"an"}),e.defs($,"$hook_intention",function(){return"cleanup state that is shared across examples in an example group"}),n&&"hook_intention"}(s,s)}(c,null),e.defs(c,"$included",function(e){return e.$extend(u.get("ClassMethods"))}),function(t){var r,o,a,i,s=$(t,"ClassMethods"),c=s.$$proto,l=s.$$scope;c.$let=r=function(t){var $,o,a,i,s,c,u=this,_=r.$$p,p=_||n;return r.$$p=null,($=p["$nil?"]())===n||$.$$is_boolean&&1!=$||u.$raise("#let or #subject called without a block"),($=(o=l.get("MemoizedHelpers").$module_for(u)).$send,$.$$p=p.$to_proc(),$).call(o,"define_method",t),p.$arity()["$=="](1)?($=(a=u).$define_method,$.$$p=(i=function(){var $,o,a,s=i.$$s||this;return($=(o=s.$__memoized()).$fetch,$.$$p=(a=function(t){var $=a.$$s||this;return null==t&&(t=n),$.$__memoized()["$[]="](t,e.find_iter_super_dispatcher($,"let",a.$$def||i.$$def||r,null).apply($,[l.get("RSpec").$current_example(),n.$to_proc()]))},a.$$s=s,a),$).call(o,t)},i.$$s=u,i),$).call(a,t):($=(s=u).$define_method,$.$$p=(c=function(){var $,o,a,i=c.$$s||this;return($=(o=i.$__memoized()).$fetch,$.$$p=(a=function(t){var $=a.$$s||this;return null==t&&(t=n),$.$__memoized()["$[]="](t,e.find_iter_super_dispatcher($,"let",a.$$def||c.$$def||r,null).apply($,[n.$to_proc()]))},a.$$s=i,a),$).call(o,t)},c.$$s=u,c),$).call(s,t)},c["$let!"]=o=function(e){var t,r,$,a,i=this,s=o.$$p,c=s||n;return o.$$p=null,(t=(r=i).$let,t.$$p=c.$to_proc(),t).call(r,e),(t=($=i).$before,t.$$p=(a=function(){var t=a.$$s||this;return t.$__send__(e)},a.$$s=i,a),t).call($)},c.$subject=a=function(e){var t,r,$,o,i,s=this,c=a.$$p,u=c||n;return null==e&&(e=n),a.$$p=null,e!==!1&&e!==n?((t=(r=s).$let,t.$$p=u.$to_proc(),t).call(r,e),s.$alias_method("subject",e),(t=($=s.$$scope.get("NamedSubjectPreventSuper")).$send,t.$$p=(o=function(){var e=o.$$s||this;return e.$raise(l.get("NotImplementedError"),"`super` in named subjects is not supported")},o.$$s=s,o),t).call($,"define_method",e)):(t=(i=s).$let,t.$$p=u.$to_proc(),t).call(i,"subject")},c["$subject!"]=i=function(e){var t,r,$,o,a=this,s=i.$$p,c=s||n;return null==e&&(e=n),i.$$p=null,(t=(r=a).$subject,t.$$p=c.$to_proc(),t).call(r,e),(t=($=a).$before,t.$$p=(o=function(){var e=o.$$s||this;return e.$subject()},o.$$s=a,o),t).call($)},e.donate(s,["$let","$let!","$subject","$subject!"])}(c),e.defs(c,"$module_for",function(e){var t,r,$,o=this;return(t=(r=o).$get_constant_or_yield,t.$$p=($=function(){var t,r,o,a=$.$$s||this,i=n;return i=(t=(r=u.get("Module")).$new,t.$$p=(o=function(){var t,n,r,$=o.$$s||this;return $.$include((t=(n=u.get("Module")).$new,t.$$p=(r=function(){var t=r.$$s||this;return e.$const_set("NamedSubjectPreventSuper",t)},r.$$s=$,r),t).call(n))},o.$$s=a,o),t).call(r),e.$const_set("LetDefinitions",i),i},$.$$s=o,$),t).call(r,e,"LetDefinitions")}),e.defs(c,"$define_helpers_on",function(e){var t=this;return e.$send("include",t.$module_for(e))}),u.get("Module").$method("const_defined?").$arity()["$=="](1)?e.defs(c,"$get_constant_or_yield",i=function(t,$){var o,a=i.$$p,s=a||n;return i.$$p=null,(o=t["$const_defined?"]($))===n||o.$$is_boolean&&1!=o?(o=e.yieldX(s,[]),o===r?o:o):t.$const_get($)}):e.defs(c,"$get_constant_or_yield",s=function(t,$){var o,a=s.$$p,i=a||n,c=n;return s.$$p=null,(o=t["$const_defined?"]($,c=!1))===n||o.$$is_boolean&&1!=o?(o=e.yieldX(i,[]),o===r?o:o):t.$const_get($,c)}),e.donate(c,["$subject","$should","$should_not","$__memoized"])}(i)}(i)}(t)},Opal.modules["rspec/core/metadata"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=e.breaker,$=e.slice,o=e.module,a=e.klass,i=e.hash2,s=e.gvars,c=e.hash;return e.add_stubs(["$sub","$expand_path","$==","$is_a?","$last","$pop","$[]=","$has_key?","$store_computed","$private","$===","$store","$location","$file_and_line_number","$described_class","$full_description","$build_description_from","$[]","$=~","$first_caller_from_outside_rspec","$relative_path","$to_i","$detect","$inject","$to_s","$method_description_after_module?","$+","$include","$each","$nil?","$container_stack","$first","$reverse","$flat_map","$<<","$update","$extend","$ensure_valid_keys","$delete","$caller","$configure_for_example","$dup","$any?","$filter_applies?","$all?","$!","$filter_applies_to_any_value?","$line_number_filter_applies?","$location_filter_applies?","$filters_apply?","$arity","$call","$example_group_declaration_line","$map","$preceding_declaration_line","$world","$empty?","$&","$relevant_line_numbers","$protected","$raise","$*","$first_non_rspec_line","$join"]),function(t){{var l=o(t,"RSpec");l.$$proto,l.$$scope}!function(t){var l=o(t,"Core"),u=(l.$$proto,l.$$scope);!function(t,$super){function l(){}var u,_=l=a(t,$super,"Metadata",l),p=_.$$proto,d=_.$$scope;return e.defs(_,"$relative_path",function(t){try{return t=t.$sub(d.get("File").$expand_path("."),"."),t=t.$sub(/\A([^:]+:\d+)$/,"\\1"),t["$=="]("-e:1")?n:t}catch(r){if(e.rescue(r,[d.get("SecurityError")]))return n;throw r}}),e.defs(_,"$build_hash_from",function(e){var t,r,$=n;for($=function(){return(t=e.$last()["$is_a?"](d.get("Hash")))===n||t.$$is_boolean&&1!=t?i([],{}):e.$pop()}();(r=e.$last()["$is_a?"](d.get("Symbol")))!==n&&(!r.$$is_boolean||1==r);)$["$[]="](e.$pop(),!0);return $}),function(t){var r,a,c=o(t,"MetadataHash"),l=c.$$proto,u=c.$$scope;l["$[]"]=r=function(t){var o,a=$.call(arguments,0),i=this,s=r.$$p;return r.$$p=null,((o=i["$has_key?"](t))===n||o.$$is_boolean&&1!=o)&&i.$store_computed(t),e.find_super_dispatcher(i,"[]",r,s).apply(i,a)},l.$fetch=a=function(t,r){var o,i=$.call(arguments,0),s=this,c=a.$$p;return r=$.call(arguments,1),a.$$p=null,((o=s["$has_key?"](t))===n||o.$$is_boolean&&1!=o)&&s.$store_computed(t),e.find_super_dispatcher(s,"fetch",a,c).apply(s,i)},c.$private(),l.$store_computed=function(t){var r,$=this,o=n,a=n,s=n,c=n;return function(){return o=t,"location"["$==="](o)?$.$store("location",$.$location()):"file_path"["$==="](o)||"line_number"["$==="](o)?(r=e.to_ary($.$file_and_line_number()),a=null==r[0]?n:r[0],s=null==r[1]?n:r[1],$.$store("file_path",a),$.$store("line_number",s)):"execution_result"["$==="](o)?$.$store("execution_result",i([],{})):"describes"["$==="](o)||"described_class"["$==="](o)?(c=$.$described_class(),$.$store("described_class",c),$.$store("describes",c)):"full_description"["$==="](o)?$.$store("full_description",$.$full_description()):"description"["$==="](o)?$.$store("description",(r=$).$build_description_from.apply(r,[].concat($["$[]"]("description_args")))):"description_args"["$==="](o)?$.$store("description_args",[]):n}()},l.$location=function(){var e=this;return""+e["$[]"]("file_path")+":"+e["$[]"]("line_number")},l.$file_and_line_number=function(){var e,t=this;return t.$first_caller_from_outside_rspec()["$=~"](/(.+?):(\d+)(|:\d+)/),[u.get("Metadata").$relative_path((e=s["~"])===n?n:e["$[]"](1)),((e=s["~"])===n?n:e["$[]"](2)).$to_i()]},l.$first_caller_from_outside_rspec=function(){var e,t,r,$=this;return(e=(t=$["$[]"]("caller")).$detect,e.$$p=(r=function(e){{var t;r.$$s||this}return null==e&&(e=n),t=e["$=~"](/\/lib\/rspec\/core/),t===n||t===!1},r.$$s=$,r),e).call(t)},l["$method_description_after_module?"]=function(e,t){var r;return(r=e["$is_a?"](u.get("Module")))===n||r.$$is_boolean&&1!=r?!1:t["$=~"](/^(#|::|\.)/)},l.$build_description_from=function(t,r){var o,a,i,s,c=this,l=n,u=n;return r=$.call(arguments,1),null==t&&(t=""),o=e.to_ary((a=(i=r).$inject,a.$$p=(s=function(e,t){var r,$=s.$$s||this;return desc=e[0],last_part=e[1],null==t&&(t=n),t=t.$to_s(),((r=$["$method_description_after_module?"](last_part,t))===n||r.$$is_boolean&&1!=r)&&(t=" "["$+"](t)),[desc["$+"](t),t]},s.$$s=c,s),a).call(i,[t.$to_s(),t])),l=null==o[0]?n:o[0],u=null==o[1]?n:o[1],l},e.donate(c,["$[]","$fetch","$store_computed","$location","$file_and_line_number","$first_caller_from_outside_rspec","$method_description_after_module?","$build_description_from"])}(_),function(t){var n=o(t,"ExampleMetadataHash"),r=n.$$proto,$=n.$$scope;n.$include($.get("MetadataHash")),r.$described_class=function(){var e=this;return e["$[]"]("example_group").$described_class()},r.$full_description=function(){var e,t=this;return(e=t).$build_description_from.apply(e,[t["$[]"]("example_group")["$[]"]("full_description")].concat(t["$[]"]("description_args")))
},e.donate(n,["$described_class","$full_description"])}(_),function(t){var r=o(t,"GroupMetadataHash"),$=r.$$proto,a=r.$$scope;r.$include(a.get("MetadataHash")),$.$described_class=function(){try{var t,r,$,o,i,s=this;return(t=(r=s.$container_stack()).$each,t.$$p=($=function(t){var r,o,a,i=$.$$s||this;return null==t&&(t=n),(r=(o=["described_class","describes"]).$each,r.$$p=(a=function(r){var $,o=(a.$$s||this,n);return null==r&&(r=n),($=t["$has_key?"](r))===n||$.$$is_boolean&&1!=$?n:(o=t["$[]"](r),($=o["$nil?"]())===n||$.$$is_boolean&&1!=$?void e.ret(o):n)},a.$$s=i,a),r).call(o)},$.$$s=s,$),t).call(r),(t=(o=s.$container_stack().$reverse()).$each,t.$$p=(i=function(t){var r,$,o=(i.$$s||this,n);return null==t&&(t=n),o=t["$[]"]("description_args").$first(),(r=($=a.get("String")["$==="](o))!==!1&&$!==n?$:a.get("Symbol")["$==="](o))===n||r.$$is_boolean&&1!=r?void e.ret(o):n},i.$$s=s,i),t).call(o),n}catch(c){if(c===e.returner)return c.$v;throw c}},$.$full_description=function(){var e,t,r,$,o=this;return(e=o).$build_description_from.apply(e,[].concat((t=(r=a.get("FlatMap")).$flat_map,t.$$p=($=function(e){$.$$s||this;return null==e&&(e=n),e["$[]"]("description_args")},$.$$s=o,$),t).call(r,o.$container_stack().$reverse())))},$.$container_stack=function(){var e,t,r=this,$=n,o=n;return null==r.container_stack&&(r.container_stack=n),(e=r.container_stack)!==!1&&e!==n?e:r.container_stack=function(){for($=[o=r];(t=o["$has_key?"]("example_group"))!==n&&(!t.$$is_boolean||1==t);)$["$<<"](o["$[]"]("example_group")),o=o["$[]"]("example_group");return $}()},e.donate(r,["$described_class","$full_description","$container_stack"])}(_),p.$initialize=u=function(t){var $,o=this,a=u.$$p,s=a||n;return null==t&&(t=n),u.$$p=null,t!==!1&&t!==n?(o.$update(t),o.$store("example_group",i(["example_group"],{example_group:t["$[]"]("example_group").$extend(d.get("GroupMetadataHash"))}).$extend(d.get("GroupMetadataHash")))):o.$store("example_group",i([],{}).$extend(d.get("GroupMetadataHash"))),s!==n?($=e.yield1(s,o),$===r?$:$):n},p.$process=function(e){var t,r=this,o=n;return e=$.call(arguments,0),o=function(){return(t=e.$last()["$is_a?"](d.get("Hash")))===n||t.$$is_boolean&&1!=t?i([],{}):e.$pop()}(),r.$ensure_valid_keys(o),r["$[]"]("example_group").$store("description_args",e),r["$[]"]("example_group").$store("caller",(t=o.$delete("caller"))!==!1&&t!==n?t:r.$caller()),r.$update(o)},p.$for_example=function(e,t){var n=this;return n.$dup().$extend(d.get("ExampleMetadataHash")).$configure_for_example(e,t)},p["$any_apply?"]=function(e){var t,r,$,o=this;return(t=(r=e)["$any?"],t.$$p=($=function(e,t){var r=$.$$s||this;return null==e&&(e=n),null==t&&(t=n),r["$filter_applies?"](e,t)},$.$$s=o,$),t).call(r)},p["$all_apply?"]=function(e){var t,r,$,o=this;return(t=(r=e)["$all?"],t.$$p=($=function(e,t){var r=$.$$s||this;return null==e&&(e=n),null==t&&(t=n),r["$filter_applies?"](e,t)},$.$$s=o,$),t).call(r)},p["$filter_applies?"]=function(e,t,r){var $,o,a=this,i=n;return null==r&&(r=a),o=d.get("Array")["$==="](r["$[]"](e)),($=o!==!1&&o!==n?d.get("Proc")["$==="](t)["$!"]():o)===n||$.$$is_boolean&&1!=$?e["$=="]("line_numbers")?r["$line_number_filter_applies?"](t):e["$=="]("locations")?r["$location_filter_applies?"](t):($=d.get("Hash")["$==="](t))===n||$.$$is_boolean&&1!=$?($=r["$has_key?"](e))===n||$.$$is_boolean&&1!=$?!1:function(){return i=t,d.get("Regexp")["$==="](i)?r["$[]"](e)["$=~"](t):d.get("Proc")["$==="](i)?function(){return i=t.$arity(),0["$==="](i)?t.$call():2["$==="](i)?t.$call(r["$[]"](e),r):t.$call(r["$[]"](e))}():r["$[]"](e).$to_s()["$=="](t.$to_s())}():r["$filters_apply?"](e,t):r["$filter_applies_to_any_value?"](e,t)},p["$filters_apply?"]=function(e,t){var r,$,o,a=this;return(r=($=t)["$all?"],r.$$p=(o=function(t,r){var $=o.$$s||this;return null==t&&(t=n),null==r&&(r=n),$["$filter_applies?"](t,r,$["$[]"](e))},o.$$s=a,o),r).call($)},p["$filter_applies_to_any_value?"]=function(e,t){var r,$,o,a=this;return(r=($=a["$[]"](e))["$any?"],r.$$p=(o=function(r){var $=o.$$s||this;return null==r&&(r=n),$["$filter_applies?"](e,r,c(e,t))},o.$$s=a,o),r).call($)},p["$location_filter_applies?"]=function(e){var t=this,r=n;return r=t.$example_group_declaration_line(e),r!==!1&&r!==n?t["$line_number_filter_applies?"](r):!0},p["$line_number_filter_applies?"]=function(e){var t,r,$,o=this,a=n;return a=(t=(r=e).$map,t.$$p=($=function(e){$.$$s||this;return null==e&&(e=n),d.get("RSpec").$world().$preceding_declaration_line(e)},$.$$s=o,$),t).call(r),o.$relevant_line_numbers()["$&"](a)["$empty?"]()["$!"]()},_.$protected(),p.$configure_for_example=function(e,t){var r,$=this;return e!==!1&&e!==n&&$.$store("description_args",[e]),$.$store("caller",(r=t.$delete("caller"))!==!1&&r!==n?r:$.$caller()),$.$update(t)},_.$private(),e.cdecl(d,"RESERVED_KEYS",["description","example_group","execution_result","file_path","full_description","line_number","location"]),p.$ensure_valid_keys=function(e){var t,r,$,o=this;return(t=(r=d.get("RESERVED_KEYS")).$each,t.$$p=($=function(t){var r,o=$.$$s||this;return null==t&&(t=n),(r=e["$has_key?"](t))===n||r.$$is_boolean&&1!=r?n:o.$raise("            "+"*"["$*"](50)+"\n:"+t+" is not allowed\n\nRSpec reserves some hash keys for its own internal use,\nincluding :"+t+", which is used on:\n\n            "+d.get("CallerFilter").$first_non_rspec_line()+".\n\nHere are all of RSpec's reserved hash keys:\n\n            "+d.get("RESERVED_KEYS").$join("\n  ")+"\n            "+"*"["$*"](50)+"\n")},$.$$s=o,$),t).call(r)},p.$example_group_declaration_line=function(e){var t,r=this;return(t=r["$[]"]("example_group"))===n||t.$$is_boolean&&1!=t?n:e["$[]"](d.get("File").$expand_path(r["$[]"]("example_group")["$[]"]("file_path")))},p.$relevant_line_numbers=function(e){var t,r=this;return null==e&&(e=r),[e["$[]"]("line_number")]["$+"](function(){return(t=e["$[]"]("example_group"))===n||t.$$is_boolean&&1!=t?[]:r.$relevant_line_numbers(e["$[]"]("example_group"))}())},n&&"relevant_line_numbers"}(l,u.get("Hash"))}(l)}(t)},Opal.modules["rspec/core/pending"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=e.breaker,$=e.slice,o=e.module,a=e.klass,i=e.hash2;return e.add_stubs(["$current_example","$before","$pending","$class","$is_a?","$last","$pop","$first","$[]","$has_key?","$!","$[]=","$metadata","$execution_result","$instance_eval","$verify_mocks_for_rspec","$example_group_instance","$teardown_mocks_for_rspec","$raise","$new"]),function(t){{var s=o(t,"RSpec");s.$$proto,s.$$scope}!function(t){{var s=o(t,"Core");s.$$proto,s.$$scope}!function(t){var s,c=o(t,"Pending"),l=c.$$proto,u=c.$$scope;!function(e,$super){function t(){}{var r=t=a(e,$super,"PendingDeclaredInExample",t);r.$$proto,r.$$scope}return n}(c,u.get("StandardError"));try{!function(e,$super){function t(){}{var r=t=a(e,$super,"PendingExampleFixedError",t);r.$$proto,r.$$scope}return n}(c,u.get("Test").$$scope.get("Unit").$$scope.get("AssertionFailedError"))}catch(_){!function(e,$super){function t(){}{var r=t=a(e,$super,"PendingExampleFixedError",t);r.$$proto,r.$$scope}return n}(c,u.get("StandardError"))}e.cdecl(u,"NO_REASON_GIVEN","No reason given"),e.cdecl(u,"NOT_YET_IMPLEMENTED","Not yet implemented"),l.$pending=s=function(t){var o,a,c,l,_,p,d=this,f=s.$$p,h=f||n,m=n,g=n,v=n,b=n,y=n;if(t=$.call(arguments,0),s.$$p=null,m=u.get("RSpec").$current_example(),m===!1||m===n)return(o=(a=d.$class()).$before,o.$$p=(c=function(){var e,n=c.$$s||this;return(e=n).$pending.apply(e,[].concat(t))},c.$$s=d,c),o).call(a,"each");if(g=function(){return(o=t.$last()["$is_a?"](u.get("Hash")))===n||o.$$is_boolean&&1!=o?i([],{}):t.$pop()}(),v=(o=t.$first())!==!1&&o!==n?o:u.get("NO_REASON_GIVEN"),(o=(l=g["$[]"]("unless"))!==!1&&l!==n?l:(_=g["$has_key?"]("if"),_!==!1&&_!==n?g["$[]"]("if")["$!"]():_))!==n&&(!o.$$is_boolean||1==o))return function(){return h!==n?(o=e.yieldX(h,[]),o===r?o:o):n}();if(m.$metadata()["$[]="]("pending",!0),m.$metadata()["$[]"]("execution_result")["$[]="]("pending_message",v),m.$execution_result()["$[]="]("pending_fixed",!1),h!==n){try{try{b=function(){return e.yieldX(h,[])===r?r.$v:(o=(l=m.$example_group_instance()).$instance_eval,o.$$p=(p=function(){var e=p.$$s||this;return e.$verify_mocks_for_rspec()},p.$$s=d,p),o).call(l)}(),m.$metadata()["$[]="]("pending",!1)}catch(x){if(!e.rescue(x,[u.get("Exception")]))throw x;y=x,m.$execution_result()["$[]="]("exception",y)}}finally{d.$teardown_mocks_for_rspec()}b!==!1&&b!==n&&(m.$execution_result()["$[]="]("pending_fixed",!0),d.$raise(u.get("PendingExampleFixedError").$new()))}return d.$raise(u.get("PendingDeclaredInExample").$new(v))},e.donate(c,["$pending"])}(s)}(s)}(t)},Opal.modules["rspec/core/formatters"]=function(e){e.dynamic_require_severity="warning";var t=(e.top,e),n=(e.nil,e.breaker,e.slice,e.module);return function(e){{var t=n(e,"Formatters");t.$$proto,t.$$scope}}(t.get("RSpec").$$scope.get("Core"))},Opal.modules["rspec/core/backport_random"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=e.breaker,$=(e.slice,e.module),o=e.klass,a=e.range;return e.add_stubs(["$kind_of?","$__send__","$raise","$inspect","$message","$class","$coerce_to","$new","$-","$seed=","$times","$|","$&","$[]","$+","$[]=","$^","$>>","$odd?","$===","$each","$*","$>=","$size","$max","$next_state","$<<","$/","$random_32_bits","$>","$mask_32_bits","$<","$map","$pack","$each_with_index","$state_as_bignum","$left","$abs","$==","$pop","$first","$convert_seed","$private","$attr_reader","$seed_rand","$coerce_to_int","$nonzero?","$new_seed","$random_float","$<=","$_rand_range","$random_integer","$random_bytes","$is_a?","$seed","$send","$state","$marshal_dump","$allocate","$marshal_load","$end","$begin","$!","$respond_to?","$exclude_end?","$loop","$**","$rand","$include"]),function(t){{var s=$(t,"RSpec");s.$$proto,s.$$scope}!function(t){{var s=$(t,"Core");s.$$proto,s.$$scope}!function(t){var s=$(t,"Backports"),c=(s.$$proto,s.$$scope);e.defs(s,"$coerce_to",function(t,r,$){var o,a=this,i=n,s=n;if((o=t["$kind_of?"](r))!==n&&(!o.$$is_boolean||1==o))return t;try{i=t.$__send__($)}catch(l){if(!e.rescue(l,[c.get("Exception")]))throw l;s=l,a.$raise(c.get("TypeError"),"Coercion error: "+t.$inspect()+"."+$+" => "+r+" failed:\n"+("("+s.$message()+")"))}return((o=i["$kind_of?"](r))===n||o.$$is_boolean&&1!=o)&&a.$raise(c.get("TypeError"),"Coercion error: obj."+$+" did NOT return a "+r+" (was "+i.$class()+")"),i}),e.defs(s,"$coerce_to_int",function(e){var t=this;return t.$coerce_to(e,c.get("Integer"),"to_int")}),e.cdecl(c,"Undefined",c.get("Object").$new()),function(t,$super){function s(){}var c=s=o(t,$super,"Random",s),l=(c.$$proto,c.$$scope);return function(t,$super){function r(){}var $=r=o(t,$super,"MT19937",r),s=$.$$proto,c=$.$$scope;return s.state=s.last_read=n,e.cdecl(c,"STATE_SIZE",624),e.cdecl(c,"LAST_STATE",c.get("STATE_SIZE")["$-"](1)),e.cdecl(c,"PAD_32_BITS",4294967295),s.$initialize=function(e){var t,n,r=this;return t=[e],n=r,n["$seed="].apply(n,t),t[t.length-1]},e.cdecl(c,"LAST_31_BITS",2147483647),e.cdecl(c,"OFFSET",397),s.$next_state=function(){var e,t,r,$=this;return(e=(t=c.get("STATE_SIZE")).$times,e.$$p=(r=function(e){var t,$,o=r.$$s||this,a=n;return null==o.state&&(o.state=n),null==e&&(e=n),a=o.state["$[]"](e)["$&"](2147483648)["$|"](o.state["$[]"](e["$+"](1)["$-"](c.get("STATE_SIZE")))["$&"](2147483647)),o.state["$[]="](e,o.state["$[]"](e["$+"](c.get("OFFSET"))["$-"](c.get("STATE_SIZE")))["$^"](a["$>>"](1))),(t=a["$odd?"]())===n||t.$$is_boolean&&1!=t?n:(t=e,$=o.state,$["$[]="](t,$["$[]"](t)["$^"](2567483615)))},r.$$s=$,r),e).call(t),$.last_read=-1},s["$seed="]=function(e){var t,r,$,o,s,l,u,_=this,p=n,d=n;return function(){return p=e,c.get("Integer")["$==="](p)?(_.state=c.get("Array").$new(c.get("STATE_SIZE")),_.state["$[]="](0,e["$&"](c.get("PAD_32_BITS"))),(t=(r=a(1,c.get("LAST_STATE"),!1)).$each,t.$$p=($=function(e){var t=$.$$s||this;return null==t.state&&(t.state=n),null==e&&(e=n),t.state["$[]="](e,1812433253["$*"](t.state["$[]"](e["$-"](1))["$^"](t.state["$[]"](e["$-"](1))["$>>"](30)))["$+"](e)["$&"](c.get("PAD_32_BITS")))},$.$$s=_,$),t).call(r),_.last_read=c.get("LAST_STATE")):c.get("Array")["$==="](p)?(t=[19650218],o=_,o["$seed="].apply(o,t),t[t.length-1],i=1,d=0,(t=(o=[c.get("STATE_SIZE"),e.$size()].$max()).$times,t.$$p=(s=function(){var t=s.$$s||this;return null==t.state&&(t.state=n),t.state["$[]="](i,t.state["$[]"](i)["$^"](t.state["$[]"](i["$-"](1))["$^"](t.state["$[]"](i["$-"](1))["$>>"](30))["$*"](1664525))["$+"](d)["$+"](e["$[]"](d))["$&"](c.get("PAD_32_BITS"))),(i=i["$+"](1))["$>="](c.get("STATE_SIZE"))&&(t.state["$[]="](0,t.state["$[]"](-1)),i=1),(d=d["$+"](1))["$>="](e.$size())?d=0:n},s.$$s=_,s),t).call(o),(t=(l=c.get("STATE_SIZE")["$-"](1)).$times,t.$$p=(u=function(){var e=u.$$s||this;return null==e.state&&(e.state=n),e.state["$[]="](i,e.state["$[]"](i)["$^"](e.state["$[]"](i["$-"](1))["$^"](e.state["$[]"](i["$-"](1))["$>>"](30))["$*"](1566083941))["$-"](i)["$&"](c.get("PAD_32_BITS"))),(i=i["$+"](1))["$>="](c.get("STATE_SIZE"))?(e.state["$[]="](0,e.state["$[]"](-1)),i=1):n},u.$$s=_,u),t).call(l),_.state["$[]="](0,2147483648)):_.$raise(c.get("ArgumentError"),"Seed must be an Integer or an Array")}()},s.$random_32_bits=function(){var e=this,t=n;return e.last_read["$>="](c.get("LAST_STATE"))&&e.$next_state(),e.last_read=e.last_read["$+"](1),t=e.state["$[]"](e.last_read),t=t["$^"](t["$>>"](11)),t=t["$^"](t["$<<"](7)["$&"](2636928640)),t=t["$^"](t["$<<"](15)["$&"](4022730752)),t=t["$^"](t["$>>"](18))},e.cdecl(c,"FLOAT_FACTOR",1["$/"](9007199254740992)),s.$random_float=function(){var e=this;return e.$random_32_bits()["$>>"](5)["$*"](67108864)["$+"](e.$random_32_bits()["$>>"](6))["$*"](c.get("FLOAT_FACTOR"))},s.$random_integer=function(e){var t,r,$,o=this,a=n,i=n,s=n,l=n;for(a=e["$-"](1),i=0;a["$>"](c.get("PAD_32_BITS"));)a=a["$>>"](32),i=i["$+"](1);for(s=o.$mask_32_bits(a);!l["$<"](e);)l=o.$random_32_bits()["$&"](s),(t=(r=i).$times,t.$$p=($=function(){var e=$.$$s||this;return l=l["$<<"](32),l=l["$|"](e.$random_32_bits())},$.$$s=o,$),t).call(r);return l},s.$random_bytes=function(e){var t,r,$,o=this,a=n,i=n;return a=e["$+"](3)["$/"](4),i=(t=(r=a.$times()).$map,t.$$p=($=function(){var e=$.$$s||this;return e.$random_32_bits()},$.$$s=o,$),t).call(r),i.$pack("L"["$*"](a))["$[]"](0,e)},s.$state_as_bignum=function(){var e,t,r,$=this,o=n;return o=0,(e=(t=$.state).$each_with_index,e.$$p=(r=function(e,t){r.$$s||this;return null==e&&(e=n),null==t&&(t=n),o=o["$|"](e["$<<"](32["$*"](t)))},r.$$s=$,r),e).call(t),o},s.$left=function(){var e=this;return c.get("MT19937").$$scope.get("STATE_SIZE")["$-"](e.last_read)},s.$marshal_dump=function(){var e=this;return[e.$state_as_bignum(),e.$left()]},s.$marshal_load=function(t){var r,$,o,a=this,i=n,s=n;return r=e.to_ary(t),i=null==r[0]?n:r[0],s=null==r[1]?n:r[1],a.last_read=c.get("MT19937").$$scope.get("STATE_SIZE")["$-"](s),a.state=c.get("Array").$new(c.get("STATE_SIZE")),(r=($=c.get("STATE_SIZE")).$times,r.$$p=(o=function(e){var t=o.$$s||this;return null==t.state&&(t.state=n),null==e&&(e=n),t.state["$[]="](e,i["$&"](c.get("PAD_32_BITS"))),i=i["$>>"](32)},o.$$s=a,o),r).call($)},e.defs($,"$convert_seed",function(e){var t,r,$=n;for(e=e.$abs(),$=[];!e["$=="](0);)$["$<<"](e["$&"](c.get("PAD_32_BITS"))),e=e["$>>"](32);return(t=(r=$["$[]"](-1)["$=="](1))?$.$size()["$>"](1):r)===n||t.$$is_boolean&&1!=t||$.$pop(),$.$size()["$>"](1)?$:$.$first()}),e.defs($,"$[]",function(e){var t=this;return t.$new(t.$convert_seed(e))}),$.$private(),e.cdecl(c,"MASK_BY",[1,2,4,8,16]),s.$mask_32_bits=function(e){var t,r,$,o=this;return(t=(r=c.get("MASK_BY")).$each,t.$$p=($=function(t){$.$$s||this;return null==t&&(t=n),e=e["$|"](e["$>>"](t))},$.$$s=o,$),t).call(r),e},n&&"mask_32_bits"}(c,null),function(t){var o,a=$(t,"Implementation"),i=a.$$proto,s=a.$$scope;a.$attr_reader("seed"),i.$initialize=o=function(t){{var n=this;o.$$p}return null==t&&(t=0),o.$$p=null,e.find_super_dispatcher(n,"initialize",o,null).apply(n,[]),n.$seed_rand(t)},i.$seed_rand=function(e){var t,r,$=this,o=n;return null==$.seed&&($.seed=n),null==e&&(e=0),e=s.get("Backports").$coerce_to_int(e),r=$.seed,((t=null!=r&&r!==n?"instance-variable":n)===n||t.$$is_boolean&&1!=t)&&($.seed=n),t=[$.seed,(r=e["$nonzero?"]())!==!1&&r!==n?r:s.get("Random").$new_seed()],o=t[0],$.seed=t[1],$.mt=s.get("MT19937")["$[]"]($.seed),o},i.$rand=function(e){var t,r=this,$=n;return null==r.mt&&(r.mt=n),null==e&&(e=s.get("Backports").$$scope.get("Undefined")),(t=function(){return $=e,s.get("Backports").$$scope.get("Undefined")["$==="]($)?r.mt.$random_float():s.get("Float")["$==="]($)?e["$<="](0)?n:e["$*"](r.mt.$random_float()):s.get("Range")["$==="]($)?r.$_rand_range(e):(e=s.get("Backports").$coerce_to_int(e),e["$<="](0)?n:r.mt.$random_integer(e))}())!==!1&&t!==n?t:r.$raise(s.get("ArgumentError"),"invalid argument "+e)},i.$bytes=function(e){var t=this;return null==t.mt&&(t.mt=n),e=s.get("Backports").$coerce_to_int(e),e["$<"](0)&&t.$raise(s.get("ArgumentError"),"negative size"),t.mt.$random_bytes(e)},i["$=="]=function(e){var t,r,$,o=this;return $=e["$is_a?"](s.get("Random")),r=$!==!1&&$!==n?o.$seed()["$=="](e.$seed()):$,t=r!==!1&&r!==n?o.$left()["$=="](e.$send("left")):r,t!==!1&&t!==n?o.$state()["$=="](e.$send("state")):t},i.$marshal_dump=function(){var e=this;return null==e.mt&&(e.mt=n),null==e.seed&&(e.seed=n),e.mt.$marshal_dump()["$<<"](e.seed)},i.$marshal_load=function(e){var t=this;return null==t.mt&&(t.mt=n),t.seed=e.$pop(),t.mt=s.get("MT19937").$allocate(),t.mt.$marshal_load(e)},a.$private(),i.$state=function(){var e=this;return null==e.mt&&(e.mt=n),e.mt.$state_as_bignum()},i.$left=function(){var e=this;return null==e.mt&&(e.mt=n),e.mt.$left()},i.$_rand_range=function(e){var t,$,o,a,i=this,c=n;return null==i.mt&&(i.mt=n),c=e.$end()["$-"](e.$begin()),o=c["$is_a?"](s.get("Float"))["$!"](),$=o!==!1&&o!==n?c["$respond_to?"]("to_int"):o,(t=$!==!1&&$!==n?c=s.get("Backports").$coerce_to_int(c):$)===n||t.$$is_boolean&&1!=t?(t=c=s.get("Backports").$coerce_to(c,s.get("Float"),"to_f"))===n||t.$$is_boolean&&1!=t?n:c["$<"](0)?n:(t=e["$exclude_end?"]())===n||t.$$is_boolean&&1!=t?(t=($=i).$loop,t.$$p=(a=function(){var t=a.$$s||this,$=n;return null==t.mt&&(t.mt=n),$=t.mt.$random_float()["$*"](c)["$*"](1.0001),$["$>"](c)?n:(r.$v=e.$begin()["$+"]($),r)},a.$$s=i,a),t).call($):c["$<="](0)?n:e.$begin()["$+"](i.mt.$random_float()["$*"](c)):(((t=e["$exclude_end?"]())===n||t.$$is_boolean&&1!=t)&&(c=c["$+"](1)),c["$<="](0)?n:e.$begin()["$+"](i.mt.$random_integer(c)))},e.donate(a,["$initialize","$seed_rand","$rand","$bytes","$==","$marshal_dump","$marshal_load","$state","$left","$_rand_range"])}(c),e.defs(c,"$new_seed",function(){return 2["$**"](62)["$+"](l.get("Kernel").$rand(2["$**"](62)))}),n&&"new_seed"}(s,null),function(e,$super){function t(){}var n=t=o(e,$super,"Random",t),r=(n.$$proto,n.$$scope);return n.$include(r.get("Implementation")),function(e){{var t=e.$$scope;e.$$proto}return e.$include(t.get("Implementation"))}(n.$singleton_class())}(s,null)}(s)}(s)}(t)},Opal.modules["rspec/core/ordering"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=e.breaker,$=(e.slice,e.module),o=e.klass,a=e.hash2;return e.add_stubs(["$require","$new","$seed","$shuffle","$>","$dup","$times","$+","$rand","$-","$size","$==","$[]","$[]=","$call","$register","$fetch","$to_proc","$used?","$attr_reader","$used_random_seed?","$ordering_registry","$register_ordering","$to_i","$split","$to_s","$include?","$has_key?","$seed=","$order="]),function(t){{var i=$(t,"RSpec");i.$$proto,i.$$scope}!function(t){var i,s=$(t,"Core"),c=(s.$$proto,s.$$scope);(i=null==e.Object.$$scope.Random?n:"constant")===n||i.$$is_boolean&&1!=i?(s.$require("rspec/core/backport_random"),e.cdecl(c,"RandomNumberGenerator",c.get("RSpec").$$scope.get("Core").$$scope.get("Backports").$$scope.get("Random"))):e.cdecl(c,"RandomNumberGenerator",e.get("Random")),function(t){{var i=$(t,"Ordering");i.$$proto,i.$$scope}!function(e,$super){function t(){}{var r=t=o(e,$super,"Identity",t),$=r.$$proto;r.$$scope}return $.$order=function(e){return e},n&&"order"}(i,null),function(e,$super){function t(){}var r=t=o(e,$super,"Random",t),$=r.$$proto,i=r.$$scope;return $.used=$.configuration=n,$.$initialize=function(e){var t=this;return t.configuration=e,t.used=!1},$["$used?"]=function(){var e=this;return e.used},$.$order=function(e){var t=this,r=n;return t.used=!0,r=i.get("RandomNumberGenerator").$new(t.configuration.$seed()),t.$shuffle(e,r)},i.get("RUBY_VERSION")["$>"]("1.9.3")?($.$shuffle=function(e,t){return e.$shuffle(a(["random"],{random:t}))},n&&"shuffle"):($.$shuffle=function(e,t){var r,$,o,a=this,i=n;return i=e.$dup(),(r=($=i.$size()).$times,r.$$p=(o=function(e){var r,$=(o.$$s||this,n);return null==e&&(e=n),$=e["$+"](t.$rand(i.$size()["$-"](e))),e["$=="]($)?n:(r=[i["$[]"]($),i["$[]"](e)],i["$[]="](e,r[0]),i["$[]="]($,r[1]))},o.$$s=a,o),r).call($),i},n&&"shuffle")}(i,null),function(e,$super){function t(){}{var r=t=o(e,$super,"Custom",t),$=r.$$proto;r.$$scope}return $.callable=n,$.$initialize=function(e){var t=this;return t.callable=e},$.$order=function(e){var t=this;return t.callable.$call(e)},n&&"order"}(i,null),function(e,$super){function t(){}var r,$=t=o(e,$super,"Registry",t),i=$.$$proto,s=$.$$scope;return i.strategies=n,i.$initialize=function(e){var t=this,r=n;return t.configuration=e,t.strategies=a([],{}),t.$register("random",s.get("Random").$new(e)),r=s.get("Identity").$new(),t.$register("defined",r),t.$register("global",r)},i.$fetch=r=function(e){var t,$,o=this,a=r.$$p,i=a||n;return r.$$p=null,(t=($=o.strategies).$fetch,t.$$p=i.$to_proc(),t).call($,e)},i.$register=function(e,t){var n=this;return n.strategies["$[]="](e,t)},i["$used_random_seed?"]=function(){var e=this;return e.strategies["$[]"]("random")["$used?"]()},n&&"used_random_seed?"}(i,null),function(t,$super){function $(){}var a,i=$=o(t,$super,"ConfigurationManager",$),s=i.$$proto,c=i.$$scope;return s.seed_forced=s.order_forced=n,i.$attr_reader("seed","ordering_registry"),s.$initialize=function(){var e=this;return e.ordering_registry=c.get("Registry").$new(e),e.seed=e.$rand(65535),e.seed_forced=!1,e.order_forced=!1},s["$seed_used?"]=function(){var e=this;return e.$ordering_registry()["$used_random_seed?"]()},s["$seed="]=function(e){var t,r=this;return(t=r.seed_forced)===n||t.$$is_boolean&&1!=t?(r.$register_ordering("global",r.$ordering_registry().$fetch("random")),r.seed=e.$to_i()):n},s["$order="]=function(t){var r,$=this,o=n,a=n,i=n;return r=e.to_ary(t.$to_s().$split(":")),o=null==r[0]?n:r[0],a=null==r[1]?n:r[1],a!==!1&&a!==n&&($.seed=a=a.$to_i()),i=function(){return(r=o["$include?"]("rand"))===n||r.$$is_boolean&&1!=r?o["$=="]("defined")?"defined":n:"random"}(),i!==!1&&i!==n?$.$register_ordering("global",$.$ordering_registry().$fetch(i)):n},s.$force=function(e){var t,r,$=this;return(t=e["$has_key?"]("seed"))===n||t.$$is_boolean&&1!=t?(t=e["$has_key?"]("order"))===n||t.$$is_boolean&&1!=t?n:(t=[e["$[]"]("order")],r=$,r["$order="].apply(r,t),t[t.length-1],$.order_forced=!0):(t=[e["$[]"]("seed")],r=$,r["$seed="].apply(r,t),t[t.length-1],$.seed_forced=!0,$.order_forced=!0)},s.$register_ordering=a=function(t,$){var o,i,s,l=this,u=a.$$p,_=u||n;return null==$&&($=c.get("Custom").$new((o=(i=c.get("Proc")).$new,o.$$p=(s=function(t){{var $;s.$$s||this}return null==t&&(t=n),$=e.yield1(_,t),$===r?$:$},s.$$s=l,s),o).call(i))),a.$$p=null,i=l.order_forced,(o=i!==!1&&i!==n?t["$=="]("global"):i)===n||o.$$is_boolean&&1!=o?l.$ordering_registry().$register(t,$):n},n&&"register_ordering"}(i,null)}(s)}(i)}(t)},Opal.modules["rspec/core/world"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$include","$attr_reader","$attr_accessor","$new","$[]=","$dup","$examples","$prune","$filter_manager","$uniq!","$configuration","$fetch","$ordering_registry","$order","$clear","$example_groups","$registry","$<<","$inclusion_filter","$exclusion_filter","$configure_group","$inject","$+","$size","$filtered_examples","$flat_map","$descendants","$<=","$sort","$declaration_line_numbers","$reporter","$announce_inclusion_filter","$announce_exclusion_filter","$empty?","$==","$length","$message","$[]","$join","$run_all_when_everything_filtered?","$zero?","$example_count","$everything_filtered_message","$description","$empty_without_conditional_filters?","$private"]),function(e){{var t=r(e,"RSpec");t.$$proto,t.$$scope}!function(e){{var t=r(e,"Core");t.$$proto,t.$$scope}!function(e,$super){function t(){}var r=t=$(e,$super,"World",t),o=r.$$proto,a=r.$$scope;return o.configuration=o.example_groups=o.line_numbers=n,r.$include(a.get("RSpec").$$scope.get("Core").$$scope.get("Hooks")),r.$attr_reader("example_groups","filtered_examples"),r.$attr_accessor("wants_to_quit"),o.$initialize=function(e){var t,r,$,o=this;return null==e&&(e=a.get("RSpec").$configuration()),o.configuration=e,o.example_groups=[],o.filtered_examples=(t=(r=a.get("Hash")).$new,t.$$p=($=function(e,t){var r=$.$$s||this,o=n;return null==e&&(e=n),null==t&&(t=n),e["$[]="](t,function(){return o=t.$examples().$dup(),o=r.$filter_manager().$prune(o),o["$uniq!"](),o}())},$.$$s=o,$),t).call(r)},o.$ordered_example_groups=function(){var e=this,t=n;return t=e.configuration.$ordering_registry().$fetch("global"),t.$order(e.example_groups)},o.$reset=function(){var e=this;return e.$example_groups().$clear(),a.get("SharedExampleGroup").$registry().$clear()},o.$filter_manager=function(){var e=this;return e.configuration.$filter_manager()},o.$register=function(e){var t=this;return t.$example_groups()["$<<"](e),e},o.$inclusion_filter=function(){var e=this;return e.configuration.$inclusion_filter()},o.$exclusion_filter=function(){var e=this;return e.configuration.$exclusion_filter()},o.$configure_group=function(e){var t=this;return t.configuration.$configure_group(e)},o.$example_count=function(){var e,t,r,$,o,i,s=this;return(e=(t=($=(o=a.get("FlatMap")).$flat_map,$.$$p=(i=function(e){i.$$s||this;return null==e&&(e=n),e.$descendants()},i.$$s=s,i),$).call(o,s.$example_groups())).$inject,e.$$p=(r=function(e,t){r.$$s||this;return null==e&&(e=n),null==t&&(t=n),e["$+"](t.$filtered_examples().$size())},r.$$s=s,r),e).call(t,0)},o.$preceding_declaration_line=function(e){var t,r,$,o=this;return(t=(r=o.$declaration_line_numbers().$sort()).$inject,t.$$p=($=function(t,r){$.$$s||this;return null==t&&(t=n),null==r&&(r=n),r["$<="](e)?r:t},$.$$s=o,$),t).call(r,n)},o.$reporter=function(){var e=this;return e.configuration.$reporter()},o.$announce_filters=function(){var e,t,r=this,$=n,o=n;return $=[],r.$announce_inclusion_filter($),r.$announce_exclusion_filter($),((e=r.$filter_manager()["$empty?"]())===n||e.$$is_boolean&&1!=e)&&r.$reporter().$message($.$length()["$=="](1)?"Run options: "+$["$[]"](0):"Run options:\n  "+$.$join("\n  ")),t=r.configuration["$run_all_when_everything_filtered?"](),(e=t!==!1&&t!==n?r.$example_count()["$zero?"]():t)===n||e.$$is_boolean&&1!=e||(r.$reporter().$message(""+r.$everything_filtered_message()+"; ignoring "+r.$inclusion_filter().$description()),r.$filtered_examples().$clear(),r.$inclusion_filter().$clear()),(e=r.$example_count()["$zero?"]())===n||e.$$is_boolean&&1!=e?n:(r.$example_groups().$clear(),(e=r.$filter_manager()["$empty?"]())===n||e.$$is_boolean&&1!=e?(e=r.$exclusion_filter()["$empty_without_conditional_filters?"]())===n||e.$$is_boolean&&1!=e?(e=r.$inclusion_filter()["$empty?"]())===n||e.$$is_boolean&&1!=e?n:r.$reporter().$message(r.$everything_filtered_message()):(o=r.$everything_filtered_message(),(e=r.configuration["$run_all_when_everything_filtered?"]())===n||e.$$is_boolean&&1!=e||o["$<<"]("; ignoring "+r.$inclusion_filter().$description()),r.$reporter().$message(o)):r.$reporter().$message("No examples found."))},o.$everything_filtered_message=function(){return"\nAll examples were filtered out"},o.$announce_inclusion_filter=function(e){var t,r=this;return(t=r.$inclusion_filter()["$empty?"]())===n||t.$$is_boolean&&1!=t?e["$<<"]("include "+r.$inclusion_filter().$description()):n},o.$announce_exclusion_filter=function(e){var t,r=this;return(t=r.$exclusion_filter()["$empty_without_conditional_filters?"]())===n||t.$$is_boolean&&1!=t?e["$<<"]("exclude "+r.$exclusion_filter().$description()):n},r.$private(),o.$declaration_line_numbers=function(){var e,t,r,$,o=this;return(e=o.line_numbers)!==!1&&e!==n?e:o.line_numbers=(t=(r=o.$example_groups()).$inject,t.$$p=($=function(e,t){$.$$s||this;return null==e&&(e=n),null==t&&(t=n),e["$+"](t.$declaration_line_numbers())},$.$$s=o,$),t).call(r,[])},n&&"declaration_line_numbers"}(t,null)}(t)}(t)},Opal.modules.fileutils=function(e){e.dynamic_require_severity="warning";{var t=(e.top,e.nil);e.breaker,e.slice}return t},Opal.modules["rspec/core/backtrace_formatter"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass,o=e.hash2;return e.add_stubs(["$format_backtrace","$backtrace_formatter","$configuration","$attr_accessor","$<<","$union","$map","$new","$gsub","$getwd","$empty?","$[]","$tap","$concat","$compact","$backtrace_line","$take_while","$!","$==","$exclude?","$relative_path","$any?","$=~","$none?"]),function(t){{var a=r(t,"RSpec");a.$$proto,a.$$scope}!function(t){{var a=r(t,"Core");a.$$proto,a.$$scope}!function(t,$super){function r(){}var a=r=$(t,$super,"BacktraceFormatter",r),i=a.$$proto,s=a.$$scope;return i.full_backtrace=i.exclusion_patterns=i.inclusion_patterns=n,e.defs(a,"$format_backtrace",function(e,t){return null==t&&(t=o([],{})),s.get("RSpec").$configuration().$backtrace_formatter().$format_backtrace(e,t)}),a.$attr_accessor("exclusion_patterns","inclusion_patterns"),i.$initialize=function(){var e,t,r,$,o=this;return o.full_backtrace=!1,o.exclusion_patterns=[]["$<<"]((e=s.get("Regexp")).$union.apply(e,[].concat((t=(r=["/libd*/ruby/","org/jruby/","bin/","/gems/","lib/rspec/(core|expectations|matchers|mocks)"]).$map,t.$$p=($=function(e){$.$$s||this;return null==e&&(e=n),s.get("Regexp").$new(e.$gsub("/",s.get("File").$$scope.get("SEPARATOR")))},$.$$s=o,$),t).call(r)))),o.inclusion_patterns=[s.get("Regexp").$new(s.get("Dir").$getwd())]},i["$full_backtrace="]=function(e){var t=this;return t.full_backtrace=e},i["$full_backtrace?"]=function(){var e,t=this;return(e=t.full_backtrace)!==!1&&e!==n?e:t.exclusion_patterns["$empty?"]()},i.$format_backtrace=function(e,t){var r,$,a,i,c,l,u,_,p,d=this;return null==t&&(t=o([],{})),(r=t["$[]"]("full_backtrace"))===n||r.$$is_boolean&&1!=r?(r=($=(i=(c=(u=(_=e).$take_while,u.$$p=(p=function(e){p.$$s||this;return null==e&&(e=n),e["$=="](s.get("RSpec").$$scope.get("Core").$$scope.get("Runner").$$scope.get("AT_EXIT_HOOK_BACKTRACE_LINE"))["$!"]()},p.$$s=d,p),u).call(_)).$map,i.$$p=(l=function(e){var t=l.$$s||this;return null==e&&(e=n),t.$backtrace_line(e)},l.$$s=d,l),i).call(c).$compact()).$tap,r.$$p=(a=function(t){{var r;a.$$s||this}return null==t&&(t=n),(r=t["$empty?"]())===n||r.$$is_boolean&&1!=r?n:(t.$concat(e),t["$<<"](""),t["$<<"]("  Showing full backtrace because every line was filtered out."),t["$<<"]("  See docs for RSpec::Configuration#backtrace_exclusion_patterns and"),t["$<<"]("  RSpec::Configuration#backtrace_inclusion_patterns for more information."))},a.$$s=d,a),r).call($):e},i.$backtrace_line=function(t){var r,$=this;try{return(r=$["$exclude?"](t))===n||r.$$is_boolean&&1!=r?s.get("RSpec").$$scope.get("Core").$$scope.get("Metadata").$relative_path(t):n}catch(o){if(e.rescue(o,[s.get("SecurityError")]))return n;throw o}},i["$exclude?"]=function(e){var t,r,$,o,a,i,s=this;return(t=s.full_backtrace)===n||t.$$is_boolean&&1!=t?(t=(r=($=s.exclusion_patterns)["$any?"],r.$$p=(o=function(t){o.$$s||this;return null==t&&(t=n),t["$=~"](e)},o.$$s=s,o),r).call($),t!==!1&&t!==n?(r=(a=s.inclusion_patterns)["$none?"],r.$$p=(i=function(t){i.$$s||this;return null==t&&(t=n),t["$=~"](e)},i.$$s=s,i),r).call(a):t):!1},n&&"exclude?"}(a,null)}(a)}(t)},Opal.modules["rspec/core/ruby_project"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=e.breaker,$=e.slice,o=e.module,a=e.gvars;return e.add_stubs(["$require","$map","$add_dir_to_load_path","$join","$root","$include?","$unshift","$determine_root","$find_first_parent_containing","$ascend_until","$exists?","$ascend","$Pathname","$expand_path","$module_function"]),t.$require("pathname"),function(t){{var i=o(t,"RSpec");i.$$proto,i.$$scope}!function(t){{var i=o(t,"Core");i.$$proto,i.$$scope}!function(t){var i,s=o(t,"RubyProject"),c=s.$$proto,l=s.$$scope;c.$add_to_load_path=function(e){var t,r,o,a=this;return e=$.call(arguments,0),(t=(r=e).$map,t.$$p=(o=function(e){var t=o.$$s||this;return null==e&&(e=n),t.$add_dir_to_load_path(l.get("File").$join(t.$root(),e))},o.$$s=a,o),t).call(r)},c.$add_dir_to_load_path=function(e){var t;return null==a.LOAD_PATH&&(a.LOAD_PATH=n),(t=a.LOAD_PATH["$include?"](e))===n||t.$$is_boolean&&1!=t?a.LOAD_PATH.$unshift(e):n},c.$root=function(){var e,t=this;
return null==t.project_root&&(t.project_root=n),(e=t.project_root)!==!1&&e!==n?e:t.project_root=t.$determine_root()},c.$determine_root=function(){var e,t=this;return(e=t.$find_first_parent_containing("spec"))!==!1&&e!==n?e:"."},c.$find_first_parent_containing=function(e){var t,r,$,o=this;return(t=(r=o).$ascend_until,t.$$p=($=function(t){$.$$s||this;return null==t&&(t=n),l.get("File")["$exists?"](l.get("File").$join(t,e))},$.$$s=o,$),t).call(r)},c.$ascend_until=i=function(){try{var t,$,o,a=this,s=i.$$p,c=s||n;return i.$$p=null,(t=($=a.$Pathname(l.get("File").$expand_path("."))).$ascend,t.$$p=(o=function(t){{var $,a;o.$$s||this}return null==t&&(t=n),($=(a=e.yield1(c,t))===r?r.$v:a)===n||$.$$is_boolean&&1!=$?n:void e.ret(t)},o.$$s=a,o),t).call($)}catch(u){if(u===e.returner)return u.$v;throw u}},s.$module_function("add_to_load_path"),s.$module_function("add_dir_to_load_path"),s.$module_function("root"),s.$module_function("determine_root"),s.$module_function("find_first_parent_containing"),s.$module_function("ascend_until"),e.donate(s,["$add_to_load_path","$add_dir_to_load_path","$root","$determine_root","$find_first_parent_containing","$ascend_until"])}(i)}(i)}(t)},Opal.modules["rspec/core/formatters/helpers"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module);return e.add_stubs(["$<","$>","$to_i","$/","$-","$*","$pluralize","$format_seconds","$sprintf","$strip_trailing_zeroes","$sub","$empty?","$==","$to_f"]),function(t){{var $=r(t,"RSpec");$.$$proto,$.$$scope}!function(t){{var $=r(t,"Core");$.$$proto,$.$$scope}!function(t){{var $=r(t,"Formatters");$.$$proto,$.$$scope}!function(t){var $=r(t,"Helpers"),o=$.$$proto,a=$.$$scope;e.cdecl(a,"SUB_SECOND_PRECISION",5),e.cdecl(a,"DEFAULT_PRECISION",2),o.$format_duration=function(e){var t=this,r=n,$=n,o=n;return r=function(){return e["$<"](1)?a.get("SUB_SECOND_PRECISION"):e["$<"](120)?a.get("DEFAULT_PRECISION"):e["$<"](300)?1:0}(),e["$>"](60)?($=e.$to_i()["$/"](60).$to_i(),o=e["$-"]($["$*"](60)),""+t.$pluralize($,"minute")+" "+t.$pluralize(t.$format_seconds(o,r),"second")):t.$pluralize(t.$format_seconds(e,r),"second")},o.$format_seconds=function(e,t){var r,$,o=this,i=n;return null==t&&(t=n),(r=t)!==!1&&r!==n?r:t=function(){return a.get(($=e["$<"](1))===n||$.$$is_boolean&&1!=$?"DEFAULT_PRECISION":"SUB_SECOND_PRECISION")}(),i=o.$sprintf("%."+t+"f",e),o.$strip_trailing_zeroes(i)},o.$strip_trailing_zeroes=function(e){var t,r=n;return r=e.$sub(/[^1-9]+$/,""),(t=r["$empty?"]())===n||t.$$is_boolean&&1!=t?r:"0"},o.$pluralize=function(e,t){return""+e+" "+t+function(){return e.$to_f()["$=="](1)?n:"s"}()},e.donate($,["$format_duration","$format_seconds","$strip_trailing_zeroes","$pluralize"])}($)}($)}($)}(t)},Opal.modules["rspec/core/formatters/deprecation_formatter"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$require","$attr_reader","$new","$deprecation_stream","$===","$summary_stream","$include?","$+","$print_deprecation_message","$printer","$<<","$deprecation_summary","$[]","$gsub","$deprecation_type_for","$private","$type","$include","$sync=","$deprecation_message_for","$deprecation_formatter","$puts","$to_s","$>","$count","$pluralize","$path","$[]=","$stash_deprecation_message","$<","$==","$too_many_warnings_message","$any?","$print_deferred_deprecation_warnings","$each","$sort_by","$to_proc","$keys","$raise"]),t.$require("rspec/core/formatters/helpers"),t.$require("set"),function(t){{var o=r(t,"RSpec");o.$$proto,o.$$scope}!function(t){var o=r(t,"Core"),a=(o.$$proto,o.$$scope);!function(t){{var o=r(t,"Formatters");o.$$proto,o.$$scope}!function(t,$super){function r(){}var o,a,i,s,c,l=r=$(t,$super,"DeprecationFormatter",r),u=l.$$proto,_=l.$$scope;return u.printer=u.seen_deprecations=u.count=n,l.$attr_reader("count","deprecation_stream","summary_stream"),u.$initialize=function(e,t){var n=this;return n.deprecation_stream=e,n.summary_stream=t,n.seen_deprecations=_.get("Set").$new(),n.count=0},u.$printer=function(){var e,t=this,r=n;return(e=t.printer)!==!1&&e!==n?e:t.printer=function(){return r=t.$deprecation_stream(),_.get("File")["$==="](r)||_.get("RaiseErrorStream")["$==="](r)?_.get("ImmediatePrinter").$new(t.$deprecation_stream(),t.$summary_stream(),t):_.get("DelayedPrinter").$new(t.$deprecation_stream(),t.$summary_stream(),t)}()},u.$deprecation=function(e){var t,r=this;return(t=r.seen_deprecations["$include?"](e))===n||t.$$is_boolean&&1!=t?(r.count=r.count["$+"](1),r.$printer().$print_deprecation_message(e),r.seen_deprecations["$<<"](e)):n},u.$deprecation_summary=function(){var e=this;return e.$printer().$deprecation_summary()},u.$deprecation_message_for=function(e){var t;return(t=e["$[]"]("message"))===n||t.$$is_boolean&&1!=t?_.get("GeneratedDeprecationMessage").$new(e):_.get("SpecifiedDeprecationMessage").$new(e)},e.cdecl(_,"RAISE_ERROR_CONFIG_NOTICE","          |\n          |If you need more of the backtrace for any of these deprecations to\n          |identify where to make the necessary changes, you can configure\n          |`config.raise_errors_for_deprecations!`, and it will turn the\n          |deprecation warnings into errors, giving you the full backtrace.\n".$gsub(/^\s+\|/,"")),e.cdecl(_,"SpecifiedDeprecationMessage",(o=(a=_.get("Struct")).$new,o.$$p=(i=function(){var t,r=i.$$s||this;return e.defn(r,"$initialize",t=function(n){{var r=this;t.$$p}return t.$$p=null,r.message=n["$[]"]("message"),e.find_super_dispatcher(r,"initialize",t,null).apply(r,[r.$deprecation_type_for(n)])}),e.defn(r,"$to_s",function(){var e=this;return null==e.message&&(e.message=n),e.message}),e.defn(r,"$too_many_warnings_message",function(){var e=n;return e="Too many similar deprecation messages reported, disregarding further reports.",e["$<<"](" Set config.deprecation_stream to a File for full output."),e}),r.$private(),e.defn(r,"$deprecation_type_for",function(e){return e["$[]"]("message").$gsub(/(\w+\/)+\w+\.rb:\d+/,"")}),n&&"deprecation_type_for"},i.$$s=l,i),o).call(a,"type")),e.cdecl(_,"GeneratedDeprecationMessage",(o=(s=_.get("Struct")).$new,o.$$p=(c=function(){var t,r=c.$$s||this;return e.defn(r,"$initialize",t=function(n){{var r=this;t.$$p}return t.$$p=null,r.data=n,e.find_super_dispatcher(r,"initialize",t,null).apply(r,[n["$[]"]("deprecated")])}),e.defn(r,"$to_s",function(){var e,t=this,r=n;return null==t.data&&(t.data=n),r=""+t.data["$[]"]("deprecated")+" is deprecated.",(e=t.data["$[]"]("replacement"))===n||e.$$is_boolean&&1!=e||r["$<<"](" Use "+t.data["$[]"]("replacement")+" instead."),(e=t.data["$[]"]("call_site"))===n||e.$$is_boolean&&1!=e||r["$<<"](" Called from "+t.data["$[]"]("call_site")+"."),r}),e.defn(r,"$too_many_warnings_message",function(){var e=this,t=n;return t="Too many uses of deprecated '"+e.$type()+"'.",t["$<<"](" Set config.deprecation_stream to a File for full output."),t}),n&&"too_many_warnings_message"},c.$$s=l,c),o).call(s,"type")),function(t,$super){function r(){}var o=r=$(t,$super,"ImmediatePrinter",r),a=o.$$proto,i=o.$$scope;return a.deprecation_stream=n,o.$include(e.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("Helpers")),o.$attr_reader("deprecation_stream","summary_stream","deprecation_formatter"),a.$initialize=function(e,t,n){var r,$,o=this;return o.deprecation_stream=e,r=[!0],$=o.deprecation_stream,$["$sync="].apply($,r),r[r.length-1],o.summary_stream=t,o.deprecation_formatter=n},a.$print_deprecation_message=function(e){var t=this,r=n;return r=t.$deprecation_formatter().$deprecation_message_for(e),t.$deprecation_stream().$puts(r.$to_s())},a.$deprecation_summary=function(){var e=this;return e.$deprecation_formatter().$count()["$>"](0)?(e.$summary_stream().$puts("\n"+e.$pluralize(e.$deprecation_formatter().$count(),"deprecation")+" logged to "+e.$deprecation_stream().$path()),e.$deprecation_stream().$puts(i.get("RAISE_ERROR_CONFIG_NOTICE"))):n},n&&"deprecation_summary"}(l,null),function(t,$super){function r(){}var o=r=$(t,$super,"DelayedPrinter",r),a=o.$$proto,i=o.$$scope;return a.seen_deprecations=a.deprecation_messages=n,e.cdecl(i,"TOO_MANY_USES_LIMIT",4),o.$include(e.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("Helpers")),o.$attr_reader("deprecation_stream","summary_stream","deprecation_formatter"),a.$initialize=function(e,t,r){var $,o,a,s,c,l=this;return l.deprecation_stream=e,l.summary_stream=t,l.deprecation_formatter=r,l.seen_deprecations=($=(o=i.get("Hash")).$new,$.$$p=(a=function(){a.$$s||this;return 0},a.$$s=l,a),$).call(o),l.deprecation_messages=($=(s=i.get("Hash")).$new,$.$$p=(c=function(e,t){c.$$s||this;return null==e&&(e=n),null==t&&(t=n),e["$[]="](t,[])},c.$$s=l,c),$).call(s)},a.$print_deprecation_message=function(e){var t,r,$=this,o=n;return o=$.$deprecation_formatter().$deprecation_message_for(e),t=o,r=$.seen_deprecations,r["$[]="](t,r["$[]"](t)["$+"](1)),$.$stash_deprecation_message(o)},a.$stash_deprecation_message=function(e){var t=this;return t.seen_deprecations["$[]"](e)["$<"](i.get("TOO_MANY_USES_LIMIT"))?t.deprecation_messages["$[]"](e)["$<<"](e.$to_s()):t.seen_deprecations["$[]"](e)["$=="](i.get("TOO_MANY_USES_LIMIT"))?t.deprecation_messages["$[]"](e)["$<<"](e.$too_many_warnings_message()):n},a.$deprecation_summary=function(){var e,t=this;return(e=t.deprecation_messages["$any?"]())===n||e.$$is_boolean&&1!=e?n:(t.$print_deferred_deprecation_warnings(),t.$deprecation_stream().$puts(i.get("RAISE_ERROR_CONFIG_NOTICE")),t.$summary_stream().$puts("\n"+t.$pluralize(t.$deprecation_formatter().$count(),"deprecation warning")+" total"))},a.$print_deferred_deprecation_warnings=function(){var e,t,r,$,o,a=this;return a.$deprecation_stream().$puts("\nDeprecation Warnings:\n\n"),(e=(t=($=(o=a.deprecation_messages.$keys()).$sort_by,$.$$p="type".$to_proc(),$).call(o)).$each,e.$$p=(r=function(e){var t,$,o,a=r.$$s||this,i=n;return null==a.deprecation_messages&&(a.deprecation_messages=n),null==e&&(e=n),i=a.deprecation_messages["$[]"](e),(t=($=i).$each,t.$$p=(o=function(e){var t=o.$$s||this;return null==e&&(e=n),t.$deprecation_stream().$puts(e)},o.$$s=a,o),t).call($),a.$deprecation_stream().$puts()},r.$$s=a,r),e).call(t)},n&&"print_deferred_deprecation_warnings"}(l,null),function(e,$super){function t(){}var r=t=$(e,$super,"RaiseErrorStream",t),o=r.$$proto,a=r.$$scope;return o.$puts=function(e){var t=this;return t.$raise(a.get("DeprecationError"),e)},o["$sync="]=function(){return n},n&&"sync="}(l,null)}(o,null)}(o),e.cdecl(a,"DeprecationError",a.get("Class").$new(a.get("StandardError")))}(o)}(t)},Opal.modules["rspec/support/caller_filter"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$join","$+","$>=","$!","$caller","$raise","$find","$=~","$*"]),function(t){{var o=r(t,"RSpec");o.$$proto,o.$$scope}!function(t,$super){function r(){}var o=r=$(t,$super,"CallerFilter",r),a=(o.$$proto,o.$$scope);return e.cdecl(a,"RSPEC_LIBS",["core","mocks","expectations","support","matchers","rails"]),e.cdecl(a,"ADDITIONAL_TOP_LEVEL_FILES",["autorun"]),e.cdecl(a,"LIB_REGEX",new RegExp("/lib/rspec/("+a.get("RSPEC_LIBS")["$+"](a.get("ADDITIONAL_TOP_LEVEL_FILES")).$join("|")+")(\\.rb|/)")),a.get("RUBY_VERSION")["$>="]("2.0.0")?(e.defs(o,"$first_non_rspec_line",function(){var e,t,r,$=this,o=n,i=n,s=n,c=n;for(o=5,i=1,s=n;(e=s["$!"]())!==n&&(!e.$$is_boolean||1==e);)c=$.$caller(i,o),c!==!1&&c!==n||$.$raise("No non-lib lines in stack"),s=(e=(t=c).$find,e.$$p=(r=function(e){{var t;r.$$s||this}return null==e&&(e=n),t=e["$=~"](a.get("LIB_REGEX")),t===n||t===!1},r.$$s=$,r),e).call(t),i=i["$+"](o),o=o["$*"](2);return s}),n&&"first_non_rspec_line"):(e.defs(o,"$first_non_rspec_line",function(){var e,t,r,$=this;return(e=(t=$.$caller()).$find,e.$$p=(r=function(e){{var t;r.$$s||this}return null==e&&(e=n),t=e["$=~"](a.get("LIB_REGEX")),t===n||t===!1},r.$$s=$,r),e).call(t)}),n&&"first_non_rspec_line")}(o,null)}(t)},Opal.modules["rspec/support/warnings"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.hash2;return e.add_stubs(["$respond_to?","$warn_with","$fetch","$first_non_rspec_line","$<<","$warn"]),function(t){var o,a=r(t,"RSpec"),i=(a.$$proto,a.$$scope);((o=a["$respond_to?"]("deprecate"))===n||o.$$is_boolean&&1!=o)&&e.defs(a,"$deprecate",function(e,t){var n=this;return null==t&&(t=$([],{})),n.$warn_with("DEPRECATION: "+e+" is deprecated.",t)}),((o=a["$respond_to?"]("warn_deprecation"))===n||o.$$is_boolean&&1!=o)&&e.defs(a,"$warn_deprecation",function(e){var t=this;return t.$warn_with("DEPRECATION: \n "+e)}),e.defs(a,"$warning",function(e,t){var n=this;return null==t&&(t=$([],{})),n.$warn_with("WARNING: "+e+".",t)}),e.defs(a,"$warn_with",function(t,r){var o,a,s,c=this,l=n;return null==r&&(r=$([],{})),l=(o=(a=r).$fetch,o.$$p=(s=function(){s.$$s||this;return i.get("CallerFilter").$first_non_rspec_line()},s.$$s=c,s),o).call(a,"call_site"),l!==!1&&l!==n&&t["$<<"](" Called from "+l+"."),e.get("Kernel").$warn(t)})}(t)},Opal.modules["rspec/expectations/extensions/object"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e,r=e.nil,$=(e.breaker,e.slice),o=e.module,a=e.hash2;return e.add_stubs(["$===","$deprecate","$to_s","$reject!","$=~","$compile","$backtrace","$raise","$extend"]),function(t){{var n=o(t,"RSpec");n.$$proto,n.$$scope}!function(t){var n=o(t,"Expectations"),i=n.$$proto,s=n.$$scope;!function(t){var n,i=o(t,"DeprecatedConstants"),s=i.$$proto,c=i.$$scope;s.$const_missing=n=function(t){var o,i,s,l=$.call(arguments,0),u=this,_=n.$$p,p=r,d=r;return n.$$p=null,function(){if(p=t,"Rspec"["$==="](p)||"Spec"["$==="](p))return c.get("RSpec").$deprecate(t.$to_s(),a(["replacement"],{replacement:"RSpec"})),c.get("RSpec");try{return e.find_super_dispatcher(u,"const_missing",n,_).apply(u,l)}catch($){if(e.rescue($,[c.get("Exception")]))return d=$,(o=(i=d.$backtrace())["$reject!"],o.$$p=(s=function(e){s.$$s||this;return null==e&&(e=r),e["$=~"](c.get("Regexp").$compile("rspec/expectations/extensions/object"))},s.$$s=u,s),o).call(i),u.$raise(d);throw $}}()},e.donate(i,["$const_missing"])}(n),i["$differ="]=function(){return s.get("RSpec").$deprecate("RSpec::Expectations.differ=(differ)")},e.donate(n,["$differ="])}(n)}(t),t.$extend(n.get("RSpec").$$scope.get("Expectations").$$scope.get("DeprecatedConstants"))},Opal.modules["rspec/expectations/extensions"]=function(e){e.dynamic_require_severity="warning";{var t=e.top;e.nil,e.breaker,e.slice}return e.add_stubs(["$require"]),t.$require("rspec/expectations/extensions/object")},Opal.modules["rspec/matchers/pretty"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.range;return e.add_stubs(["$gsub","$to_s","$map","$to_word","$Array","$length","$===","$[]","$join","$each_with_index","$<","$-","$<<","$inspect","$is_matcher_with_description?","$description","$split_words","$name","$to_sentence","$underscore","$last","$split","$class","$dup","$gsub!","$tr!","$downcase!","$private","$is_a_matcher?","$respond_to?"]),function(t){{var o=r(t,"RSpec");o.$$proto,o.$$scope}!function(t){{var o=r(t,"Matchers");o.$$proto,o.$$scope}!function(t){var o=r(t,"Pretty"),a=o.$$proto,i=o.$$scope;a.$split_words=function(e){return e.$to_s().$gsub(/_/," ")},a.$to_sentence=function(e){var t,r,o,a=this,i=n;return e===!1||e===n?"":(e=(t=(r=a.$Array(e)).$map,t.$$p=(o=function(e){var t=o.$$s||this;return null==e&&(e=n),t.$to_word(e)},o.$$s=a,o),t).call(r),function(){return i=e.$length(),0["$==="](i)?"":1["$==="](i)?" "+e["$[]"](0):2["$==="](i)?" "+e["$[]"](0)+" and "+e["$[]"](1):" "+e["$[]"]($(0,-1,!0)).$join(", ")+", and "+e["$[]"](-1)}())},a.$_pretty_print=function(e){var t,r,$,o=this,a=n;return a="",(t=(r=e).$each_with_index,t.$$p=($=function(t,r){$.$$s||this;return null==t&&(t=n),null==r&&(r=n),a["$<<"](r["$<"](e.$length()["$-"](2))?""+t.$inspect()+", ":r["$<"](e.$length()["$-"](1))?""+t.$inspect()+" and ":""+t.$inspect())},$.$$s=o,$),t).call(r),a},a.$to_word=function(e){var t,r=this;return(t=r["$is_matcher_with_description?"](e))===n||t.$$is_boolean&&1!=t?e.$inspect():e.$description()},a.$name_to_sentence=function(){var e=this;return e.$split_words(e.$name())},a.$expected_to_sentence=function(){var e,t,r=this;return null==r.expected&&(r.expected=n),t=r.expected,(e=null!=t&&t!==n?"instance-variable":n)===n||e.$$is_boolean&&1!=e?n:r.$to_sentence(r.expected)},a.$name=function(){var e,t,r=this;return null==r.name&&(r.name=n),t=r.name,(e=null!=t&&t!==n?"instance-variable":n)===n||e.$$is_boolean&&1!=e?r.$underscore(r.$class().$name().$split("::").$last()):r.name},a.$underscore=function(e){var t=n;return t=e.$to_s().$dup(),t["$gsub!"](/([A-Z]+)([A-Z][a-z])/,"\\1_\\2"),t["$gsub!"](/([a-z\d])([A-Z])/,"\\1_\\2"),t["$tr!"]("-","_"),t["$downcase!"](),t},o.$private(),a["$is_matcher_with_description?"]=function(e){var t;return t=i.get("RSpec").$$scope.get("Matchers")["$is_a_matcher?"](e),t!==!1&&t!==n?e["$respond_to?"]("description"):t},e.donate(o,["$split_words","$to_sentence","$_pretty_print","$to_word","$name_to_sentence","$expected_to_sentence","$name","$underscore","$is_matcher_with_description?"])}(o)}(o)}(t)},Opal.modules["rspec/matchers/built_in/base_matcher"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=e.breaker,$=e.slice,o=e.module,a=e.klass;return e.add_stubs(["$include","$attr_reader","$match","$expected","$empty?","$unshift","$assert_ivars","$inspect","$name_to_sentence","$expected_to_sentence","$matches?","$private","$all?","$include?","$map","$to_proc","$instance_variables","$raise","$name","$class","$to_sentence"]),function(t){{var i=o(t,"RSpec");i.$$proto,i.$$scope}!function(t){{var i=o(t,"Matchers");i.$$proto,i.$$scope}!function(t){{var i=o(t,"BuiltIn");i.$$proto,i.$$scope}!function(t,$super){function o(){}var i,s=o=a(t,$super,"BaseMatcher",o),c=s.$$proto,l=s.$$scope;return c.actual=c.expected=n,s.$include(l.get("RSpec").$$scope.get("Matchers").$$scope.get("Pretty")),s.$attr_reader("actual","expected","rescued_exception"),c.$initialize=function(e){var t=this;return null==e&&(e=n),t.expected=e},c["$matches?"]=function(e){var t=this;return t.actual=e,t.$match(t.$expected(),e)},c.$match_unless_raises=i=function(t){var o,a=this,s=i.$$p,c=s||n;t=$.call(arguments,0),i.$$p=null,(o=t["$empty?"]())===n||o.$$is_boolean&&1!=o||t.$unshift(l.get("Exception"));try{return e.yieldX(c,[])===r?r.$v:!0}catch(u){if(e.rescue(u,[t]))return a.rescued_exception=u,!1;throw u}},c.$failure_message_for_should=function(){var e=this;return e.$assert_ivars("@actual","@expected"),"expected "+e.actual.$inspect()+" to "+e.$name_to_sentence()+e.$expected_to_sentence()},c.$failure_message_for_should_not=function(){var e=this;return e.$assert_ivars("@actual","@expected"),"expected "+e.actual.$inspect()+" not to "+e.$name_to_sentence()+e.$expected_to_sentence()},c.$description=function(){var e,t=this;return(e=t.$expected())===n||e.$$is_boolean&&1!=e?t.$name_to_sentence():""+t.$name_to_sentence()+" "+t.expected.$inspect()},c["$diffable?"]=function(){return!1},c["$=="]=function(e){var t=this;return t["$matches?"](e)},s.$private(),c.$assert_ivars=function(e){var t,r,o,a,i=this;return e=$.call(arguments,0),(t=(r=(o=e)["$all?"],r.$$p=(a=function(e){var t,r,$=a.$$s||this;return null==e&&(e=n),(t=(r=$.$instance_variables()).$map,t.$$p="intern".$to_proc(),t).call(r)["$include?"](e)},a.$$s=i,a),r).call(o))===n||t.$$is_boolean&&1!=t?i.$raise(""+i.$class().$name()+" needs to supply "+i.$to_sentence(e)):n},n&&"assert_ivars"}(i,null)}(i)}(i)}(t)},Opal.modules["rspec/matchers/built_in/be_instance_of"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$instance_of?","$expected"]),function(e){{var t=r(e,"RSpec");t.$$proto,t.$$scope}!function(e){{var t=r(e,"Matchers");t.$$proto,t.$$scope}!function(e){var t=r(e,"BuiltIn"),o=(t.$$proto,t.$$scope);!function(e,$super){function t(){}{var r=t=$(e,$super,"BeAnInstanceOf",t),o=r.$$proto;r.$$scope}return o.$match=function(e,t){return t["$instance_of?"](e)},o.$description=function(){var e=this;return"be an instance of "+e.$expected()},n&&"description"}(t,o.get("BaseMatcher"))}(t)}(t)}(t)},Opal.modules["rspec/matchers/dsl"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e,r=e.nil,$=(e.breaker,e.slice),o=e.module;return e.add_stubs(["$define_method","$new","$matcher_execution_context=","$alias_method","$respond_to?","$configure","$extend"]),function(t){{var n=o(t,"RSpec");n.$$proto,n.$$scope}!function(t){{var n=o(t,"Matchers");n.$$proto,n.$$scope}!function(t){var n,a,i,s,c=o(t,"DSL"),l=c.$$proto,u=c.$$scope;l.$define=n=function(e){var t,o,a,i=this,s=n.$$p,c=s||r;return n.$$p=null,(t=(o=i).$define_method,t.$$p=(a=function(t){var n,o,i,s,l=a.$$s||this,_=r;return null==l.matcher_execution_context&&(l.matcher_execution_context=r),t=$.call(arguments,0),_=(n=u.get("RSpec").$$scope.get("Matchers").$$scope.get("DSL").$$scope.get("Matcher")).$new.apply(n,[e,c].concat(t)),o=[(s=l.matcher_execution_context)!==!1&&s!==r?s:l.matcher_execution_context=l],i=_,i["$matcher_execution_context="].apply(i,o),o[o.length-1],_},a.$$s=i,a),t).call(o,e)},c.$alias_method("matcher","define"),(a=u.get("RSpec")["$respond_to?"]("configure"))===r||a.$$is_boolean&&1!=a||(a=(i=u.get("RSpec")).$configure,a.$$p=(s=function(e){var t=s.$$s||this;return null==e&&(e=r),e.$extend(t)},s.$$s=c,s),a).call(i),e.donate(c,["$define"])}(n)}(n)}(t),n.get("RSpec").$$scope.get("Matchers").$extend(n.get("RSpec").$$scope.get("Matchers").$$scope.get("DSL"))},Opal.modules["rspec/matchers/built_in/be"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass,a=e.gvars;return e.add_stubs(["$require","$!","$inspect","$actual","$nil?","$private","$empty?","$parenthesize","$join","$inspected_args","$collect","$split_words","$to_sentence","$include","$each","$define_method","$new","$__send__","$gsub","$to_s","$negative_expectation_expression","$raise","$<<","$include?","$expected_to_sentence","$args_to_sentence","$negative_expression","$parse_expected","$shift","$is_private_on?","$predicate","$to_proc","$present_tense_predicate","$args_to_s","$prefix_to_sentence","$is_a?","$first","$methods","$private_methods","$to_sym","$prefix_and_expected","$=~"]),t.$require("rspec/matchers/dsl"),function(t){{var i=$(t,"RSpec");i.$$proto,i.$$scope}!function(t){{var i=$(t,"Matchers");i.$$proto,i.$$scope}!function(t){var i=$(t,"BuiltIn"),s=(i.$$proto,i.$$scope);!function(e,$super){function t(){}{var r=t=o(e,$super,"BeTruthy",t),$=r.$$proto;r.$$scope}return $.$match=function(e,t){return t["$!"]()["$!"]()},$.$failure_message_for_should=function(){var e=this;return"expected: truthy value\n     got: "+e.$actual().$inspect()},$.$failure_message_for_should_not=function(){var e=this;return"expected: falsey value\n     got: "+e.$actual().$inspect()},n&&"failure_message_for_should_not"}(i,s.get("BaseMatcher")),function(e,$super){function t(){}{var r=t=o(e,$super,"BeFalsey",t),$=r.$$proto;r.$$scope}return $.$match=function(e,t){return t["$!"]()},$.$failure_message_for_should=function(){var e=this;return"expected: falsey value\n     got: "+e.$actual().$inspect()},$.$failure_message_for_should_not=function(){var e=this;return"expected: truthy value\n     got: "+e.$actual().$inspect()},n&&"failure_message_for_should_not"}(i,s.get("BaseMatcher")),function(e,$super){function t(){}{var r=t=o(e,$super,"BeNil",t),$=r.$$proto;r.$$scope}return $.$match=function(e,t){return t["$nil?"]()},$.$failure_message_for_should=function(){var e=this;return"expected: nil\n     got: "+e.$actual().$inspect()},$.$failure_message_for_should_not=function(){return"expected: not nil\n     got: nil"},n&&"failure_message_for_should_not"}(i,s.get("BaseMatcher")),function(t){{var r=$(t,"BeHelpers"),o=r.$$proto;r.$$scope}r.$private(),o.$args_to_s=function(){var e,t=this;return null==t.args&&(t.args=n),(e=t.args["$empty?"]())===n||e.$$is_boolean&&1!=e?t.$parenthesize(t.$inspected_args().$join(", ")):""},o.$parenthesize=function(e){return"("+e+")"},o.$inspected_args=function(){var e,t,r,$=this;return null==$.args&&($.args=n),(e=(t=$.args).$collect,e.$$p=(r=function(e){r.$$s||this;return null==e&&(e=n),e.$inspect()},r.$$s=$,r),e).call(t)},o.$expected_to_sentence=function(){var e=this;return null==e.expected&&(e.expected=n),e.$split_words(e.expected)},o.$args_to_sentence=function(){var e=this;return null==e.args&&(e.args=n),e.$to_sentence(e.args)},e.donate(r,["$args_to_s","$parenthesize","$inspected_args","$expected_to_sentence","$args_to_sentence"])}(i),function(e,$super){function t(){}var $,a,i,s,c=t=o(e,$super,"Be",t),l=c.$$proto,u=c.$$scope;return l.actual=n,c.$include(u.get("BeHelpers")),l.$initialize=$=function(e){{var t=this;$.$$p}return e=r.call(arguments,0),$.$$p=null,t.args=e},l.$match=function(e,t){return t["$!"]()["$!"]()},l.$failure_message_for_should=function(){var e=this;return"expected "+e.actual.$inspect()+" to evaluate to true"},l.$failure_message_for_should_not=function(){var e=this;return"expected "+e.actual.$inspect()+" to evaluate to false"},(a=(i=["==","<","<=",">=",">","===","=~"]).$each,a.$$p=(s=function(e){var t,r,$,o=s.$$s||this;return null==e&&(e=n),(t=(r=o).$define_method,t.$$p=($=function(t){$.$$s||this;return null==t&&(t=n),u.get("BeComparedTo").$new(t,e)},$.$$s=o,$),t).call(r,e)},s.$$s=c,s),a).call(i)}(i,s.get("BaseMatcher")),function(e,$super){function t(){}var r=t=o(e,$super,"BeComparedTo",t),$=r.$$proto,a=r.$$scope;return $.actual=$.operator=$.expected=n,$.$initialize=function(e,t){var n,r=this;return n=[e,t],r.expected=n[0],r.operator=n[1],r.args=[]},$["$matches?"]=function(e){var t=this;return t.actual=e,t.actual.$__send__(t.operator,t.expected)},$.$failure_message_for_should=function(){var e=this;return"expected: "+e.operator+" "+e.expected.$inspect()+"\n     got: "+e.operator.$to_s().$gsub(/./," ")+" "+e.actual.$inspect()},$.$failure_message_for_should_not=function(){var e,t=this,r=n;return r="`"+t.$negative_expectation_expression()+"` not only FAILED,\nit is a bit confusing.\n",t.$raise(r["$<<"](function(){return(e=["===","=="]["$include?"](t.operator))===n||e.$$is_boolean&&1!=e?"It might be more clearly expressed in the positive?":'It might be more clearly expressed without the "be"?'}()))},$.$description=function(){var e=this;return"be "+e.operator+" "+e.$expected_to_sentence()+e.$args_to_sentence()},$.$negative_expectation_expression=function(){var e=this;return a.get("Expectations").$$scope.get("Syntax").$negative_expression("actual","be "+e.operator+" "+e.expected)},n&&"negative_expectation_expression"}(i,s.get("Be")),function(t,$super){function $(){}var i,s,c=$=o(t,$super,"BePredicate",$),l=c.$$proto,u=c.$$scope;return l.actual=l.block=l.args=l.result=l.expected=l.prefix=n,c.$include(u.get("BeHelpers")),l.$initialize=i=function(e){var t=this,$=i.$$p,o=$||n;return e=r.call(arguments,0),i.$$p=null,t.expected=t.$parse_expected(e.$shift()),t.args=e,t.block=o},l["$matches?"]=function(t){var r,$,o,a=this,i=n;a.actual=t,(r=a["$is_private_on?"](a.actual))===n||r.$$is_boolean&&1!=r||a.$raise(u.get("Expectations").$$scope.get("ExpectationNotMetError").$new("expectation set on private method `"+a.$predicate()+"`"));try{return a.result=(r=($=t).$__send__,r.$$p=a.block.$to_proc(),r).apply($,[a.$predicate()].concat(a.args))}catch(s){if(!e.rescue(s,[u.get("NameError")]))throw s;i=s}try{return a.result=(r=(o=t).$__send__,r.$$p=a.block.$to_proc(),r).apply(o,[a.$present_tense_predicate()].concat(a.args))}catch(s){if(e.rescue(s,[u.get("NameError")]))return a.$raise(i);throw s}},e.defn(c,"$===",l["$matches?"]),l.$failure_message_for_should=function(){var e=this;return"expected "+e.$predicate()+e.$args_to_s()+" to return true, got "+e.result.$inspect()},l.$failure_message_for_should_not=function(){var e=this;return"expected "+e.$predicate()+e.$args_to_s()+" to return false, got "+e.result.$inspect()},l.$description=function(){var e=this;return""+e.$prefix_to_sentence()+e.$expected_to_sentence()+e.$args_to_sentence()},c.$private(),l["$is_private_on?"]=(s=c.$methods().$first()["$is_a?"](u.get("String")))===n||s.$$is_boolean&&1!=s?function(e){var t=this;return e.$private_methods()["$include?"](t.$predicate())}:function(e){var t=this;return e.$private_methods()["$include?"](t.$predicate().$to_s())},l.$predicate=function(){var e=this;return(""+e.expected+"?").$to_sym()},l.$present_tense_predicate=function(){var e=this;return(""+e.expected+"s?").$to_sym()},l.$parse_expected=function(t){var r,$=this;return r=e.to_ary($.$prefix_and_expected(t)),$.prefix=null==r[0]?n:r[0],t=null==r[1]?n:r[1],t},l.$prefix_and_expected=function(e){var t;return e.$to_s()["$=~"](/^(be_(an?_)?)(.*)/),[(t=a["~"])===n?n:t["$[]"](1),(t=a["~"])===n?n:t["$[]"](3)]},l.$prefix_to_sentence=function(){var e=this;return e.$split_words(e.prefix)},n&&"prefix_to_sentence"}(i,s.get("BaseMatcher"))}(i)}(i)}(t)},Opal.modules["rspec/matchers/built_in/be_kind_of"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$kind_of?"]),function(e){{var t=r(e,"RSpec");t.$$proto,t.$$scope}!function(e){{var t=r(e,"Matchers");t.$$proto,t.$$scope}!function(e){var t=r(e,"BuiltIn"),o=(t.$$proto,t.$$scope);!function(e,$super){function t(){}{var r=t=$(e,$super,"BeAKindOf",t),o=r.$$proto;r.$$scope}return o.$match=function(e,t){return t["$kind_of?"](e)},n&&"match"}(t,o.get("BaseMatcher"))}(t)}(t)}(t)},Opal.modules["rspec/matchers/built_in/be_within"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$raise","$needs_expected","$respond_to?","$needs_subtractable","$<=","$abs","$-","$/","$*","$description","$private","$new","$inspect"]),function(t){{var o=r(t,"RSpec");o.$$proto,o.$$scope}!function(t){{var o=r(t,"Matchers");o.$$proto,o.$$scope}!function(t){{var o=r(t,"BuiltIn");o.$$proto,o.$$scope}!function(t,$super){function r(){}var o=r=$(t,$super,"BeWithin",r),a=o.$$proto,i=o.$$scope;return a.actual=a.expected=a.tolerance=a.delta=a.unit=n,a.$initialize=function(e){var t=this;return t.delta=e},a["$matches?"]=function(e){var t,r,$=this;return $.actual=e,r=$.expected,((t=null!=r&&r!==n?"instance-variable":n)===n||t.$$is_boolean&&1!=t)&&$.$raise($.$needs_expected()),((t=$.actual["$respond_to?"]("-"))===n||t.$$is_boolean&&1!=t)&&$.$raise($.$needs_subtractable()),$.actual["$-"]($.expected).$abs()["$<="]($.tolerance)},e.defn(o,"$==",a["$matches?"]),a.$of=function(e){var t=this;return t.expected=e,t.tolerance=t.delta,t.unit="",t},a.$percent_of=function(e){var t=this;return t.expected=e,t.tolerance=t.delta["$*"](t.expected.$abs())["$/"](100),t.unit="%",t},a.$failure_message_for_should=function(){var e=this;return"expected "+e.actual+" to "+e.$description()},a.$failure_message_for_should_not=function(){var e=this;return"expected "+e.actual+" not to "+e.$description()},a.$description=function(){var e=this;return"be within "+e.delta+e.unit+" of "+e.expected},o.$private(),a.$needs_subtractable=function(){var e=this;return i.get("ArgumentError").$new("The actual value ("+e.actual.$inspect()+") must respond to `-`")},a.$needs_expected=function(){var e=this;return i.get("ArgumentError").$new("You must set an expected value using #of: be_within("+e.delta+").of(expected_value)")},n&&"needs_expected"}(o,null)}(o)}(o)}(t)},Opal.modules["rspec/matchers/built_in/change"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$lambda","$__send__","$raise_block_syntax_error","$evaluate_value_proc","$call","$!","$change_expected?","$changed?","$matches_before?","$matches_after?","$matches_expected_delta?","$matches_min?","$matches_max?","$raise","$new","$===","$dup","$expected_matches_actual?","$message","$inspect","$failure_message_for_expected_after","$actual_delta","$-","$private","$is_a_matcher?","$description","$==","$+","$>=","$<="]),function(t){{var o=r(t,"RSpec");o.$$proto,o.$$scope}!function(t){{var o=r(t,"Matchers");o.$$proto,o.$$scope}!function(t){{var o=r(t,"BuiltIn");o.$$proto,o.$$scope}!function(t,$super){function r(){}var o,a,i=r=$(t,$super,"Change",r),s=i.$$proto,c=i.$$scope;return s.value_proc=s.eval_before=s.expected_before=s.actual_before=s.eval_after=s.expected_after=s.actual_after=s.expected_delta=s.minimum=s.maximum=s.message=n,s.$initialize=o=function(e,t){var r,$,a,i,s=this,c=o.$$p,l=c||n;return null==e&&(e=n),null==t&&(t=n),o.$$p=null,s.message=t,s.value_proc=(r=l)!==!1&&r!==n?r:($=(a=s).$lambda,$.$$p=(i=function(){i.$$s||this;return e.$__send__(t)},i.$$s=s,i),$).call(a),s.expected_after=s.expected_before=s.minimum=s.maximum=s.expected_delta=n,s.eval_before=s.eval_after=!1},s["$matches?"]=a=function(e){var t,r,$,o,i,s,c=this,l=a.$$p,u=l||n;
return a.$$p=null,u!==n&&c.$raise_block_syntax_error(),c.actual_before=c.$evaluate_value_proc(),e.$call(),c.actual_after=c.$evaluate_value_proc(),i=(s=c["$change_expected?"]()["$!"]())!==!1&&s!==n?s:c["$changed?"](),o=i!==!1&&i!==n?c["$matches_before?"]():i,$=o!==!1&&o!==n?c["$matches_after?"]():o,r=$!==!1&&$!==n?c["$matches_expected_delta?"]():$,t=r!==!1&&r!==n?c["$matches_min?"]():r,t!==!1&&t!==n?c["$matches_max?"]():t},e.defn(i,"$==",s["$matches?"]),s.$raise_block_syntax_error=function(){var e=this;return e.$raise(c.get("SyntaxError").$new("block passed to should or should_not change must use {} instead of do/end\n"))},s.$evaluate_value_proc=function(){var e=this,t=n,r=n;return function(){return t=r=e.value_proc.$call(),c.get("Enumerable")["$==="](t)||c.get("String")["$==="](t)?r.$dup():r}()},s.$failure_message_for_should=function(){var e,t,r=this;return t=r.eval_before,(e=t!==!1&&t!==n?r["$expected_matches_actual?"](r.expected_before,r.actual_before)["$!"]():t)===n||e.$$is_boolean&&1!=e?(t=r.eval_after,(e=t!==!1&&t!==n?r["$expected_matches_actual?"](r.expected_after,r.actual_after)["$!"]():t)===n||e.$$is_boolean&&1!=e?(e=r.expected_delta)===n||e.$$is_boolean&&1!=e?(e=r.minimum)===n||e.$$is_boolean&&1!=e?(e=r.maximum)===n||e.$$is_boolean&&1!=e?""+r.$message()+" should have changed, but is still "+r.actual_before.$inspect():""+r.$message()+" should have been changed by at most "+r.maximum.$inspect()+", but was changed by "+r.$actual_delta().$inspect():""+r.$message()+" should have been changed by at least "+r.minimum.$inspect()+", but was changed by "+r.$actual_delta().$inspect():""+r.$message()+" should have been changed by "+r.expected_delta.$inspect()+", but was changed by "+r.$actual_delta().$inspect():""+r.$message()+" should have been changed to "+r.$failure_message_for_expected_after()+", but is now "+r.actual_after.$inspect()):""+r.$message()+" should have initially been "+r.expected_before.$inspect()+", but was "+r.actual_before.$inspect()},s.$actual_delta=function(){var e=this;return e.actual_after["$-"](e.actual_before)},s.$failure_message_for_should_not=function(){var e=this;return""+e.$message()+" should not have changed, but did change from "+e.actual_before.$inspect()+" to "+e.actual_after.$inspect()},s.$by=function(e){var t=this;return t.expected_delta=e,t},s.$by_at_least=function(e){var t=this;return t.minimum=e,t},s.$by_at_most=function(e){var t=this;return t.maximum=e,t},s.$to=function(e){var t=this;return t.eval_after=!0,t.expected_after=e,t},s.$from=function(e){var t=this;return t.eval_before=!0,t.expected_before=e,t},s.$description=function(){var e=this;return"change #"+e.$message()},i.$private(),s.$failure_message_for_expected_after=function(){var e,t=this;return(e=c.get("RSpec").$$scope.get("Matchers")["$is_a_matcher?"](t.expected_after))===n||e.$$is_boolean&&1!=e?t.expected_after.$inspect():t.expected_after.$description()},s.$message=function(){var e,t=this;return(e=t.message)!==!1&&e!==n?e:"result"},s["$change_expected?"]=function(){var e=this;return e.expected_delta["$=="](0)["$!"]()},s["$changed?"]=function(){var e=this;return e.actual_before["$=="](e.actual_after)["$!"]()},s["$matches_before?"]=function(){var e,t=this;return(e=t.eval_before)===n||e.$$is_boolean&&1!=e?!0:t["$expected_matches_actual?"](t.expected_before,t.actual_before)},s["$matches_after?"]=function(){var e,t=this;return(e=t.eval_after)===n||e.$$is_boolean&&1!=e?!0:t["$expected_matches_actual?"](t.expected_after,t.actual_after)},s["$matches_expected_delta?"]=function(){var e,t=this;return(e=t.expected_delta)===n||e.$$is_boolean&&1!=e?!0:t.actual_before["$+"](t.expected_delta)["$=="](t.actual_after)},s["$matches_min?"]=function(){var e,t=this;return(e=t.minimum)===n||e.$$is_boolean&&1!=e?!0:t.actual_after["$-"](t.actual_before)["$>="](t.minimum)},s["$matches_max?"]=function(){var e,t=this;return(e=t.maximum)===n||e.$$is_boolean&&1!=e?!0:t.actual_after["$-"](t.actual_before)["$<="](t.maximum)},s["$expected_matches_actual?"]=function(e,t){var r;return(r=e["$==="](t))!==!1&&r!==n?r:t["$=="](e)},n&&"expected_matches_actual?"}(o,null)}(o)}(o)}(t)},Opal.modules["rspec/matchers/built_in/cover"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass;return e.add_stubs(["$all?","$cover?","$none?","$expected"]),function(e){{var t=$(e,"RSpec");t.$$proto,t.$$scope}!function(e){{var t=$(e,"Matchers");t.$$proto,t.$$scope}!function(e){var t=$(e,"BuiltIn"),a=(t.$$proto,t.$$scope);!function(e,$super){function t(){}{var $=t=o(e,$super,"Cover",t),a=$.$$proto;$.$$scope}return a.expected=n,a.$initialize=function(e){var t=this;return e=r.call(arguments,0),t.expected=e},a["$matches?"]=function(e){var t,r,$,o=this;return o.actual=e,(t=(r=o.expected)["$all?"],t.$$p=($=function(t){$.$$s||this;return null==t&&(t=n),e["$cover?"](t)},$.$$s=o,$),t).call(r)},a["$does_not_match?"]=function(e){var t,r,$,o=this;return o.actual=e,(t=(r=o.$expected())["$none?"],t.$$p=($=function(t){$.$$s||this;return null==t&&(t=n),e["$cover?"](t)},$.$$s=o,$),t).call(r)},n&&"does_not_match?"}(t,a.get("BaseMatcher"))}(t)}(t)}(t)},Opal.modules["rspec/matchers/built_in/eq"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$==","$inspect","$expected","$actual"]),function(e){{var t=r(e,"RSpec");t.$$proto,t.$$scope}!function(e){{var t=r(e,"Matchers");t.$$proto,t.$$scope}!function(e){var t=r(e,"BuiltIn"),o=(t.$$proto,t.$$scope);!function(e,$super){function t(){}{var r=t=$(e,$super,"Eq",t),o=r.$$proto;r.$$scope}return o.$match=function(e,t){return t["$=="](e)},o.$failure_message_for_should=function(){var e=this;return"\nexpected: "+e.$expected().$inspect()+"\n     got: "+e.$actual().$inspect()+"\n\n(compared using ==)\n"},o.$failure_message_for_should_not=function(){var e=this;return"\nexpected: value != "+e.$expected().$inspect()+"\n     got: "+e.$actual().$inspect()+"\n\n(compared using ==)\n"},o["$diffable?"]=function(){return!0},n&&"diffable?"}(t,o.get("BaseMatcher"))}(t)}(t)}(t)},Opal.modules["rspec/matchers/built_in/eql"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$eql?","$inspect","$expected","$actual"]),function(e){{var t=r(e,"RSpec");t.$$proto,t.$$scope}!function(e){{var t=r(e,"Matchers");t.$$proto,t.$$scope}!function(e){var t=r(e,"BuiltIn"),o=(t.$$proto,t.$$scope);!function(e,$super){function t(){}{var r=t=$(e,$super,"Eql",t),o=r.$$proto;r.$$scope}return o.$match=function(e,t){return t["$eql?"](e)},o.$failure_message_for_should=function(){var e=this;return"\nexpected: "+e.$expected().$inspect()+"\n     got: "+e.$actual().$inspect()+"\n\n(compared using eql?)\n"},o.$failure_message_for_should_not=function(){var e=this;return"\nexpected: value != "+e.$expected().$inspect()+"\n     got: "+e.$actual().$inspect()+"\n\n(compared using eql?)\n"},o["$diffable?"]=function(){return!0},n&&"diffable?"}(t,o.get("BaseMatcher"))}(t)}(t)}(t)},Opal.modules["rspec/matchers/built_in/equal"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$equal?","$inspect_object","$expected","$actual","$eq_expression","$private","$class","$object_id","$inspect","$positive_expression"]),function(e){{var t=r(e,"RSpec");t.$$proto,t.$$scope}!function(e){{var t=r(e,"Matchers");t.$$proto,t.$$scope}!function(e){var t=r(e,"BuiltIn"),o=(t.$$proto,t.$$scope);!function(e,$super){function t(){}var r=t=$(e,$super,"Equal",t),o=r.$$proto,a=r.$$scope;return o.$match=function(e,t){return t["$equal?"](e)},o.$failure_message_for_should=function(){var e=this;return"\nexpected "+e.$inspect_object(e.$expected())+"\n     got "+e.$inspect_object(e.$actual())+"\n\nCompared using equal?, which compares object identity,\nbut expected and actual are not the same object. Use\n`"+e.$eq_expression()+"` if you don't care about\nobject identity in this example.\n\n"},o.$failure_message_for_should_not=function(){var e=this;return"\nexpected not "+e.$inspect_object(e.$actual())+"\n         got "+e.$inspect_object(e.$expected())+"\n\nCompared using equal?, which compares object identity.\n\n"},o["$diffable?"]=function(){return!0},r.$private(),o.$inspect_object=function(e){return"#<"+e.$class()+":"+e.$object_id()+"> => "+e.$inspect()},o.$eq_expression=function(){return a.get("Expectations").$$scope.get("Syntax").$positive_expression("actual","eq(expected)")},n&&"eq_expression"}(t,o.get("BaseMatcher"))}(t)}(t)}(t)},Opal.modules["rspec/matchers/built_in/exist"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass;return e.add_stubs(["$select","$respond_to?","$map","$__send__","$uniq","$!","$size","$===","$raise","$new","$inspect","$first","$+","$last"]),function(e){{var t=$(e,"RSpec");t.$$proto,t.$$scope}!function(e){{var t=$(e,"Matchers");t.$$proto,t.$$scope}!function(e){var t=$(e,"BuiltIn"),a=(t.$$proto,t.$$scope);!function(e,$super){function t(){}var $=t=o(e,$super,"Exist",t),a=$.$$proto,i=$.$$scope;return a.actual=n,a.$initialize=function(e){var t=this;return e=r.call(arguments,0),t.expected=e},a["$matches?"]=function(e){var t,r,$,o,a,s,c,l=this,u=n,_=n,p=n,d=n;return l.actual=e,u=(t=(r=["exist?","exists?"]).$select,t.$$p=($=function(e){var t=$.$$s||this;return null==t.actual&&(t.actual=n),null==e&&(e=n),t.actual["$respond_to?"](e)},$.$$s=l,$),t).call(r),_=(t=(o=u).$map,t.$$p=(a=function(e){var t,r=a.$$s||this;return null==r.actual&&(r.actual=n),null==r.expected&&(r.expected=n),null==e&&(e=n),(t=r.actual).$__send__.apply(t,[e].concat(r.expected))},a.$$s=l,a),t).call(o),p=(t=(s=_).$map,t.$$p=(c=function(e){c.$$s||this;return null==e&&(e=n),e["$!"]()["$!"]()},c.$$s=l,c),t).call(s).$uniq(),function(){return d=p.$size(),0["$==="](d)?l.$raise(i.get("NoMethodError").$new(""+l.actual.$inspect()+" does not respond to either #exist? or #exists?")):1["$==="](d)?_.$first():l.$raise("#exist? and #exists? returned different values:\n\n"["$+"](" exist?: "+_.$first()+"\n")["$+"]("exists?: "+_.$last()))}()},n&&"matches?"}(t,a.get("BaseMatcher"))}(t)}(t)}(t)},Opal.modules["rspec/matchers/built_in/has"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass;return e.add_stubs(["$__send__","$predicate","$failure_message_args_description","$join","$compact","$method_description","$args_description","$private","$to_sym","$sub","$to_s","$gsub","$empty?","$map","$inspect"]),function(t){{var a=$(t,"RSpec");a.$$proto,a.$$scope}!function(t){{var a=$(t,"Matchers");a.$$proto,a.$$scope}!function(t){{var a=$(t,"BuiltIn");a.$$proto,a.$$scope}!function(t,$super){function $(){}{var a=$=o(t,$super,"Has",$),i=a.$$proto;a.$$scope}return i.expected=i.args=n,i.$initialize=function(e,t){var n,$=this;return t=r.call(arguments,1),n=[e,t],$.expected=n[0],$.args=n[1]},i["$matches?"]=function(e){var t,n=this;return(t=e).$__send__.apply(t,[n.$predicate(n.expected)].concat(n.args))},e.defn(a,"$==",i["$matches?"]),i.$failure_message_for_should=function(){var e=this;return"expected #"+e.$predicate(e.expected)+e.$failure_message_args_description()+" to return true, got false"},i.$failure_message_for_should_not=function(){var e=this;return"expected #"+e.$predicate(e.expected)+e.$failure_message_args_description()+" to return false, got true"},i.$description=function(){var e=this;return[e.$method_description(e.expected),e.$args_description()].$compact().$join(" ")},a.$private(),i.$predicate=function(e){return(""+e.$to_s().$sub("have_","has_")+"?").$to_sym()},i.$method_description=function(e){return e.$to_s().$gsub("_"," ")},i.$args_description=function(){var e,t,r,$=this;return(e=$.args["$empty?"]())===n||e.$$is_boolean&&1!=e?(e=(t=$.args).$map,e.$$p=(r=function(e){r.$$s||this;return null==e&&(e=n),e.$inspect()},r.$$s=$,r),e).call(t).$join(", "):n},i.$failure_message_args_description=function(){var e=this,t=n;return t=e.$args_description(),t!==!1&&t!==n?"("+t+")":n},n&&"failure_message_args_description"}(a,null)}(a)}(a)}(t)},Opal.modules["rspec/matchers/built_in/have"]=function(e){e.dynamic_require_severity="warning";{var t=(e.top,e.nil);e.breaker,e.slice}return t},Opal.modules["rspec/matchers/built_in/include"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass;return e.add_stubs(["$perform_match","$expected_to_sentence","$none?","$is_a_matcher?","$private","$__send__","$comparing_hash_values?","$has_key?","$==","$[]","$comparing_hash_keys?","$comparing_with_matcher?","$actual","$any?","$matches?","$include?","$is_a?","$!"]),function(e){{var t=$(e,"RSpec");t.$$proto,t.$$scope}!function(e){{var t=$(e,"Matchers");t.$$proto,t.$$scope}!function(e){var t=$(e,"BuiltIn"),a=(t.$$proto,t.$$scope);!function(e,$super){function t(){}var $=t=o(e,$super,"Include",t),a=$.$$proto,i=$.$$scope;return a.actual=a.expected=n,a.$initialize=function(e){var t=this;return e=r.call(arguments,0),t.expected=e},a["$matches?"]=function(e){var t=this;return t.actual=e,t.$perform_match("all?","all?",t.actual,t.expected)},a["$does_not_match?"]=function(e){var t=this;return t.actual=e,t.$perform_match("none?","any?",t.actual,t.expected)},a.$description=function(){var e=this;return"include"+e.$expected_to_sentence()},a["$diffable?"]=function(){var e,t,r,$=this;return(e=(t=$.expected)["$none?"],e.$$p=(r=function(e){r.$$s||this;return null==e&&(e=n),i.get("RSpec").$$scope.get("Matchers")["$is_a_matcher?"](e)},r.$$s=$,r),e).call(t)},$.$private(),a.$perform_match=function(e,t,r,$){var o,a,i,s=this;return(o=(a=$).$__send__,o.$$p=(i=function(e){var $,o,a,s,c,l=i.$$s||this;return null==e&&(e=n),($=l["$comparing_hash_values?"](r,e))===n||$.$$is_boolean&&1!=$?($=l["$comparing_hash_keys?"](r,e))===n||$.$$is_boolean&&1!=$?($=l["$comparing_with_matcher?"](l.$actual(),e))===n||$.$$is_boolean&&1!=$?r["$include?"](e):($=(s=l.$actual())["$any?"],$.$$p=(c=function(t){c.$$s||this;return null==t&&(t=n),e["$matches?"](t)},c.$$s=l,c),$).call(s):r["$has_key?"](e):($=(o=e).$__send__,$.$$p=(a=function(e,t){{var $;a.$$s||this}return null==e&&(e=n),null==t&&(t=n),$=r["$has_key?"](e),$!==!1&&$!==n?r["$[]"](e)["$=="](t):$},a.$$s=l,a),$).call(o,t)},i.$$s=s,i),o).call(a,e)},a["$comparing_hash_keys?"]=function(e,t){var r;return r=e["$is_a?"](i.get("Hash")),r!==!1&&r!==n?t["$is_a?"](i.get("Hash"))["$!"]():r},a["$comparing_hash_values?"]=function(e,t){var r;return r=e["$is_a?"](i.get("Hash")),r!==!1&&r!==n?t["$is_a?"](i.get("Hash")):r},a["$comparing_with_matcher?"]=function(e,t){var r;return r=e["$is_a?"](i.get("Array")),r!==!1&&r!==n?i.get("RSpec").$$scope.get("Matchers")["$is_a_matcher?"](t):r},n&&"comparing_with_matcher?"}(t,a.get("BaseMatcher"))}(t)}(t)}(t)},Opal.modules["rspec/matchers/built_in/match"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$match"]),function(e){{var t=r(e,"RSpec");t.$$proto,t.$$scope}!function(e){{var t=r(e,"Matchers");t.$$proto,t.$$scope}!function(e){var t=r(e,"BuiltIn"),o=(t.$$proto,t.$$scope);!function(e,$super){function t(){}{var r=t=$(e,$super,"Match",t),o=r.$$proto;r.$$scope}return o.$match=function(e,t){return t.$match(e)},o["$diffable?"]=function(){return!0},n&&"diffable?"}(t,o.get("BaseMatcher"))}(t)}(t)}(t)},Opal.modules["rspec/matchers/built_in/match_array"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$respond_to?","$difference_between_arrays","$&","$empty?","$actual","$inspect","$safe_sort","$expected","$+","$_pretty_print","$private","$sort","$dup","$to_ary","$each","$index","$delete_at"]),function(e){{var t=r(e,"RSpec");t.$$proto,t.$$scope}!function(e){{var t=r(e,"Matchers");t.$$proto,t.$$scope}!function(e){var t=r(e,"BuiltIn"),o=(t.$$proto,t.$$scope);!function(e,$super){function t(){}{var r=t=$(e,$super,"MatchArray",t),o=r.$$proto;r.$$scope}return o.extra_items=o.missing_items=n,o.$match=function(e,t){var r,$=this;return(r=t["$respond_to?"]("to_ary"))===n||r.$$is_boolean&&1!=r?!1:($.extra_items=$.$difference_between_arrays(t,e),$.missing_items=$.$difference_between_arrays(e,t),$.extra_items["$empty?"]()["$&"]($.missing_items["$empty?"]()))},o.$failure_message_for_should=function(){var e,t=this,r=n;return(e=t.$actual()["$respond_to?"]("to_ary"))===n||e.$$is_boolean&&1!=e?r="expected an array, actual collection was "+t.$actual().$inspect():(r="expected collection contained:  "+t.$safe_sort(t.$expected()).$inspect()+"\n",r=r["$+"]("actual collection contained:    "+t.$safe_sort(t.$actual()).$inspect()+"\n"),((e=t.missing_items["$empty?"]())===n||e.$$is_boolean&&1!=e)&&(r=r["$+"]("the missing elements were:      "+t.$safe_sort(t.missing_items).$inspect()+"\n")),((e=t.extra_items["$empty?"]())===n||e.$$is_boolean&&1!=e)&&(r=r["$+"]("the extra elements were:        "+t.$safe_sort(t.extra_items).$inspect()+"\n"))),r},o.$failure_message_for_should_not=function(){return"Matcher does not support should_not"},o.$description=function(){var e=this;return"contain exactly "+e.$_pretty_print(e.$expected())},r.$private(),o.$safe_sort=function(e){try{return e.$sort()}catch(t){return e}},o.$difference_between_arrays=function(e,t){var r,$,o,a=this,i=n;return i=e.$to_ary().$dup(),(r=($=t.$to_ary()).$each,r.$$p=(o=function(e){var t,r=(o.$$s||this,n);return null==e&&(e=n),(t=r=i.$index(e))===n||t.$$is_boolean&&1!=t?n:i.$delete_at(r)},o.$$s=a,o),r).call($),i},n&&"difference_between_arrays"}(t,o.get("BaseMatcher"))}(t)}(t)}(t)},Opal.modules["rspec/matchers/built_in/raise_error"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$===","$raise_message_already_set","$respond_to?","$warn","$inspect","$call","$==","$verify_message","$eval_block","$expectation_matched?","$error_and_message_match?","$block_matches?","$prevent_invalid_expectations","$!","$matches?","$[]","$=~","$message","$expected_error","$given_error","$private","$expecting_specific_exception?","$new","$raise","$backtrace_formatter","$configuration","$format_backtrace","$backtrace","$join"]),function(t){{var o=r(t,"RSpec");o.$$proto,o.$$scope}!function(t){{var o=r(t,"Matchers");o.$$proto,o.$$scope}!function(t){{var o=r(t,"BuiltIn");o.$$proto,o.$$scope}!function(t,$super){function r(){}var o,a,i=r=$(t,$super,"RaiseError",r),s=i.$$proto,c=i.$$scope;return s.expected_message=s.block=s.actual_error=s.expected_error=s.raised_expected_error=s.with_expected_message=s.eval_block=s.eval_block_passed=n,s.$initialize=o=function(e,t){var r,$=this,a=o.$$p,i=a||n,s=n;return null==e&&(e=c.get("Exception")),null==t&&(t=n),o.$$p=null,$.block=i,$.actual_error=n,function(){return s=e,c.get("String")["$==="](s)||c.get("Regexp")["$==="](s)?(r=[c.get("Exception"),e],$.expected_error=r[0],$.expected_message=r[1]):(r=[e,t],$.expected_error=r[0],$.expected_message=r[1])}()},s.$with_message=function(e){var t,r=this;return(t=r.expected_message)===n||t.$$is_boolean&&1!=t||r.$raise_message_already_set(),r.expected_message=e,r},s["$matches?"]=a=function(t,r){var $,o,i,s=this,l=a.$$p,u=l||n;if(null==r&&(r=!1),a.$$p=null,($=s.block)!==!1&&$!==n?$:s.block=u,s.raised_expected_error=!1,s.with_expected_message=!1,s.eval_block=!1,s.eval_block_passed=!1,($=t["$respond_to?"]("call"))===n||$.$$is_boolean&&1!=$)return e.get("Kernel").$warn("`raise_error` was called with non-proc object "+t.$inspect()),!1;try{t.$call()}catch(_){if(!e.rescue(_,[c.get("Exception")]))throw _;s.actual_error=_,($=(o=s.actual_error["$=="](s.expected_error))!==!1&&o!==n?o:s.expected_error["$==="](s.actual_error))===n||$.$$is_boolean&&1!=$||(s.raised_expected_error=!0,s.with_expected_message=s.$verify_message())}return r!==!1&&r!==n||(i=s.raised_expected_error,o=i!==!1&&i!==n?s.with_expected_message:i,($=o!==!1&&o!==n?s.block:o)===n||$.$$is_boolean&&1!=$||s.$eval_block()),s["$expectation_matched?"]()},e.defn(i,"$==",s["$matches?"]),s["$expectation_matched?"]=function(){var e,t=this;return e=t["$error_and_message_match?"](),e!==!1&&e!==n?t["$block_matches?"]():e},s["$error_and_message_match?"]=function(){var e,t=this;return e=t.raised_expected_error,e!==!1&&e!==n?t.with_expected_message:e},s["$block_matches?"]=function(){var e,t=this;return(e=t.eval_block)===n||e.$$is_boolean&&1!=e?!0:t.eval_block_passed},s["$does_not_match?"]=function(e){var t=this;return t.$prevent_invalid_expectations(),t["$matches?"](e,"negative_expectation")["$!"]()},s.$eval_block=function(){var t=this,r=n;t.eval_block=!0;try{return t.block["$[]"](t.actual_error),t.eval_block_passed=!0}catch($){if(e.rescue($,[c.get("Exception")]))return r=$,t.actual_error=r;throw $}},s.$verify_message=function(){var e=this,t=n;return function(){return t=e.expected_message,n["$==="](t)?!0:c.get("Regexp")["$==="](t)?e.expected_message["$=~"](e.actual_error.$message()):e.expected_message["$=="](e.actual_error.$message())}()},s.$failure_message_for_should=function(){var e,t=this;return(e=t.eval_block)===n||e.$$is_boolean&&1!=e?"expected "+t.$expected_error()+t.$given_error():t.actual_error.$message()},s.$failure_message_for_should_not=function(){var e=this;return"expected no "+e.$expected_error()+e.$given_error()},s.$description=function(){var e=this;return"raise "+e.$expected_error()},i.$private(),s.$prevent_invalid_expectations=function(){var e,t,r=this,$=n,o=n;return(e=(t=r["$expecting_specific_exception?"]())!==!1&&t!==n?t:r.expected_message)===n||e.$$is_boolean&&1!=e?n:($=function(){return t=r["$expecting_specific_exception?"](),(e=t!==!1&&t!==n?r.expected_message:t)===n||e.$$is_boolean&&1!=e?(e=r["$expecting_specific_exception?"]())===n||e.$$is_boolean&&1!=e?(e=r.expected_message)===n||e.$$is_boolean&&1!=e?n:"`expect { }.not_to raise_error(message)`":"`expect { }.not_to raise_error(SpecificErrorClass)`":"`expect { }.not_to raise_error(SpecificErrorClass, message)`"}(),o=c.get("ArgumentError").$new(""+$+" is not valid, use `expect { }.not_to raise_error` (with no args) instead"),r.$raise(o))},s.$expected_error=function(){var e=this,t=n;return function(){return t=e.expected_message,n["$==="](t)?e.expected_error.$inspect():c.get("Regexp")["$==="](t)?""+e.expected_error+" with message matching "+e.expected_message.$inspect():""+e.expected_error+" with "+e.expected_message.$inspect()}()},s.$format_backtrace=function(e){var t=n;return t=c.get("Matchers").$configuration().$backtrace_formatter(),t.$format_backtrace(e)},s.$given_error=function(){var e,t=this,r=n;return(e=t.actual_error)===n||e.$$is_boolean&&1!=e?" but nothing was raised":(r=t.$format_backtrace(t.actual_error.$backtrace()),[", got "+t.actual_error.$inspect()+" with backtrace:"].concat(r).$join("\n  # "))},s["$expecting_specific_exception?"]=function(){var e=this;return e.expected_error["$=="](c.get("Exception"))["$!"]()},s.$raise_message_already_set=function(){var e=this;return e.$raise("`expect { }.to raise_error(message).with_message(message)` is not valid. The matcher only allows the expected message to be specified once")},n&&"raise_message_already_set"}(o,null)}(o)}(o)}(t)},Opal.modules["rspec/matchers/built_in/respond_to"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass;return e.add_stubs(["$empty?","$find_failing_method_names","$inspect","$join","$collect","$with_arity","$sub","$failure_message_for_should","$pp_names","$private","$__send__","$respond_to?","$matches_arity?","$arity","$method","$<","$<=","$~","$==","$nil?","$length","$first"]),function(t){{var a=$(t,"RSpec");a.$$proto,a.$$scope}!function(t){{var a=$(t,"Matchers");a.$$proto,a.$$scope}!function(t){{var a=$(t,"BuiltIn");a.$$proto,a.$$scope}!function(t,$super){function $(){}{var a=$=o(t,$super,"RespondTo",$),i=a.$$proto;a.$$scope}return i.actual=i.failing_method_names=i.names=i.expected_arity=n,i.$initialize=function(e){var t=this;return e=r.call(arguments,0),t.names=e,t.expected_arity=n},i["$matches?"]=function(e){var t=this;return t.$find_failing_method_names(e,"reject")["$empty?"]()},e.defn(a,"$==",i["$matches?"]),i["$does_not_match?"]=function(e){var t=this;return t.$find_failing_method_names(e,"select")["$empty?"]()},i.$failure_message_for_should=function(){var e,t,r,$=this;return"expected "+$.actual.$inspect()+" to respond to "+(e=(t=$.failing_method_names).$collect,e.$$p=(r=function(e){r.$$s||this;return null==e&&(e=n),e.$inspect()},r.$$s=$,r),e).call(t).$join(", ")+$.$with_arity()},i.$failure_message_for_should_not=function(){var e=this;return e.$failure_message_for_should().$sub(/to respond to/,"not to respond to")},i.$description=function(){var e=this;return"respond to "+e.$pp_names()+e.$with_arity()},i.$with=function(e){var t=this;return t.expected_arity=e,t},i.$argument=function(){var e=this;return e},e.defn(a,"$arguments",i.$argument),a.$private(),i.$find_failing_method_names=function(e,t){var r,$,o,a=this;return a.actual=e,a.failing_method_names=(r=($=a.names).$__send__,r.$$p=(o=function(t){var r,$=o.$$s||this;return null==$.actual&&($.actual=n),null==t&&(t=n),r=$.actual["$respond_to?"](t),r!==!1&&r!==n?$["$matches_arity?"](e,t):r},o.$$s=a,o),r).call($,t)},i["$matches_arity?"]=function(e,t){var r,$=this,o=n;return(r=$.expected_arity)===n||r.$$is_boolean&&1!=r?!0:(o=e.$method(t).$arity(),o["$<"](0)?o["$~"]()["$<="]($.expected_arity):o["$=="]($.expected_arity))},i.$with_arity=function(){var e,t=this;return(e=t.expected_arity["$nil?"]())===n||e.$$is_boolean&&1!=e?" with "+t.expected_arity+" argument"+function(){return t.expected_arity["$=="](1)?"":"s"}():""},i.$pp_names=function(){var e=this;return e.names.$length()["$=="](1)?"#"+e.names.$first():e.names.$inspect()},n&&"pp_names"}(a,null)}(a)}(a)}(t)},Opal.modules["rspec/matchers/built_in/start_and_end_with"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass;return e.add_stubs(["$==","$length","$first","$respond_to?","$raise","$new","$inspect","$subset_matches?","$element_matches?","$downcase","$sub","$last","$split","$name","$class","$[]","$-@"]),function(t){{var a=$(t,"RSpec");a.$$proto,a.$$scope}!function(t){{var a=$(t,"Matchers");a.$$proto,a.$$scope}!function(t){var a=$(t,"BuiltIn"),i=(a.$$proto,a.$$scope);!function(t,$super){function $(){}var a=$=o(t,$super,"StartAndEndWith",$),i=a.$$proto,s=a.$$scope;return i.expected=i.actual=n,i.$initialize=function(e){var t=this;return e=r.call(arguments,0),t.expected=function(){return e.$length()["$=="](1)?e.$first():e}()},i["$matches?"]=function(t){var r,$=this;$.actual=function(){return(r=t["$respond_to?"]("[]"))===n||r.$$is_boolean&&1!=r?$.$raise(s.get("ArgumentError").$new(""+t.$inspect()+" does not respond to :[]")):t}();try{return(r=$.expected["$respond_to?"]("length"))===n||r.$$is_boolean&&1!=r?$["$element_matches?"]($.expected,$.actual):$["$subset_matches?"]($.expected,$.actual)}catch(o){if(e.rescue(o,[s.get("ArgumentError")]))return $.$raise(s.get("ArgumentError").$new(""+t.$inspect()+" does not have ordered elements"));throw o}},i.$failure_message_for_should=function(){var e=this;return"expected "+e.actual.$inspect()+" to "+e.$class().$name().$split("::").$last().$sub(/With/,"").$downcase()+" with "+e.expected.$inspect()},i.$failure_message_for_should_not=function(){var e=this;return"expected "+e.actual.$inspect()+" not to "+e.$class().$name().$split("::").$last().$sub(/With/,"").$downcase()+" with "+e.expected.$inspect()},n&&"failure_message_for_should_not"}(a,i.get("BaseMatcher")),function(e,$super){function t(){}{var r=t=o(e,$super,"StartWith",t),$=r.$$proto;r.$$scope}return $.actual=$.expected=n,$["$subset_matches?"]=function(e,t){return t["$[]"](0,e.$length())["$=="](e)},$["$element_matches?"]=function(){var e=this;return e.actual["$[]"](0)["$=="](e.expected)},n&&"element_matches?"}(a,i.get("StartAndEndWith")),function(e,$super){function t(){}{var r=t=o(e,$super,"EndWith",t),$=r.$$proto;r.$$scope}return $["$subset_matches?"]=function(e,t){return t["$[]"](e.$length()["$-@"](),e.$length())["$=="](e)},$["$element_matches?"]=function(e,t){return t["$[]"](-1)["$=="](e)},n&&"element_matches?"}(a,i.get("StartAndEndWith"))}(a)}(a)}(t)},Opal.modules["rspec/matchers/built_in/satisfy"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$call"]),function(t){{var o=r(t,"RSpec");o.$$proto,o.$$scope}!function(t){{var o=r(t,"Matchers");o.$$proto,o.$$scope}!function(t){{var o=r(t,"BuiltIn");o.$$proto,o.$$scope}!function(t,$super){function r(){}{var o,a,i=r=$(t,$super,"Satisfy",r),s=i.$$proto;i.$$scope}return s.block=s.actual=n,s.$initialize=o=function(){var e=this,t=o.$$p,r=t||n;return o.$$p=null,e.block=r},s["$matches?"]=a=function(e){var t=this,r=a.$$p,$=r||n;return a.$$p=null,$!==!1&&$!==n&&(t.block=$),t.actual=e,t.block.$call(e)},e.defn(i,"$==",s["$matches?"]),s.$failure_message_for_should=function(){var e=this;return"expected "+e.actual+" to satisfy block"},s.$failure_message_for_should_not=function(){var e=this;return"expected "+e.actual+" not to satisfy block"},s.$description=function(){return"satisfy block"},n&&"description"}(o,null)}(o)}(o)}(t)},Opal.modules["rspec/matchers/built_in/throw_symbol"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass,o=e.gvars;return e.add_stubs(["$nil?","$call","$catch","$throw","$==","$=~","$message","$raise","$to_sym","$!","$&","$expected","$caught","$private","$throw_description","$is_a?","$inspect","$+"]),function(t){{var a=r(t,"RSpec");a.$$proto,a.$$scope}!function(t){{var a=r(t,"Matchers");a.$$proto,a.$$scope}!function(t){{var a=r(t,"BuiltIn");a.$$proto,a.$$scope}!function(t,$super){function r(){}var a=r=$(t,$super,"ThrowSymbol",r),i=a.$$proto,s=a.$$scope;return i.expected_symbol=i.caught_arg=i.caught_symbol=i.expected_arg=n,i.$initialize=function(e,t){var r=this;return null==e&&(e=n),null==t&&(t=n),r.expected_symbol=e,r.expected_arg=t,r.caught_symbol=r.caught_arg=n},i["$matches?"]=function(t){var r,$,a,i=this,c=n,l=n;try{try{return(r=i.expected_symbol["$nil?"]())===n||r.$$is_boolean&&1!=r?(i.caught_arg=(r=($=i).$catch,r.$$p=(a=function(){var e,r,$,o=a.$$s||this;return null==o.expected_symbol&&(o.expected_symbol=n),(e=(r=o).$catch,e.$$p=($=function(){var e=$.$$s||this;return t.$call(),e.$throw("proc_did_not_throw_anything","nothing_thrown")},$.$$s=o,$),e).call(r,o.expected_symbol)},a.$$s=i,a),r).call($,"proc_did_not_throw_anything"),i.caught_arg["$=="]("nothing_thrown")?i.caught_arg=n:i.caught_symbol=i.expected_symbol):t.$call()}catch(u){if(e.rescue(u,[s.get("NameError"),s.get("ArgumentError")]))return c=u,((r=c.$message()["$=~"](/uncaught throw (`|\:)([a-zA-Z0-9_]*)(')?/))===n||r.$$is_boolean&&1!=r)&&(l=c,i.$raise()),i.caught_symbol=((r=o["~"])===n?n:r["$[]"](2)).$to_sym();l=u,i.$raise()}}finally{if(l===!1||l===n)return(r=i.expected_symbol["$nil?"]())===n||r.$$is_boolean&&1!=r?(r=i.expected_arg["$nil?"]())===n||r.$$is_boolean&&1!=r?i.caught_symbol["$=="](i.expected_symbol)["$&"](i.caught_arg["$=="](i.expected_arg)):i.caught_symbol["$=="](i.expected_symbol):i.caught_symbol["$nil?"]()["$!"]()}},e.defn(a,"$==",i["$matches?"]),i.$failure_message_for_should=function(){var e=this;return"expected "+e.$expected()+" to be thrown, got "+e.$caught()},i.$failure_message_for_should_not=function(){var e,t=this;return"expected "+t.$expected("no Symbol")+function(){return(e=t.expected_symbol)===n||e.$$is_boolean&&1!=e?n:" not"}()+" to be thrown, got "+t.$caught()},i.$description=function(){var e=this;return"throw "+e.$expected()},a.$private(),i.$expected=function(e){var t,r=this;return null==e&&(e="a Symbol"),r.$throw_description((t=r.expected_symbol)!==!1&&t!==n?t:e,r.expected_arg)},i.$caught=function(){var e,t=this;return t.$throw_description((e=t.caught_symbol)!==!1&&e!==n?e:"nothing",t.caught_arg)},i.$throw_description=function(e,t){var r,$,o=this,a=n,i=n;return a=function(){return(r=e["$is_a?"](s.get("String")))===n||r.$$is_boolean&&1!=r?e.$inspect():e}(),i=function(){return t!==!1&&t!==n?" with "+t.$inspect():($=o.expected_arg,(r=$!==!1&&$!==n?o.caught_symbol["$=="](o.expected_symbol):$)===n||r.$$is_boolean&&1!=r?"":" with no argument")}(),a["$+"](i)},n&&"throw_description"}(a,null)}(a)}(a)}(t)},Opal.modules["rspec/matchers/built_in/yield"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass;return e.add_stubs(["$new","$assert_valid_expect_block!","$call","$assert_used!","$attr_accessor","$num_yields=","$yielded_args=","$+","$num_yields","$<<","$yielded_args","$first","$===","$raise","$map","$==","$size","$arity","$probe","$send","$yielded_once?","$exactly","$set_expected_yields_count","$tap","$relativity_failure_message","$private","$human_readable_expecation_type","$human_readable_count","$empty?","$single_yield_args","$failure_reason","$zero?","$inspect","$args_match?","$positive_failure_reason","$negative_failure_reason","$join","$all_args_match?","$!","$all?","$zip","$successive_yield_args"]),function(t){{var a=$(t,"RSpec");
a.$$proto,a.$$scope}!function(t){{var a=$(t,"Matchers");a.$$proto,a.$$scope}!function(t){var a=$(t,"BuiltIn"),i=(a.$$proto,a.$$scope);!function(t,$super){function $(){}var a=$=o(t,$super,"YieldProbe",$),i=a.$$proto,s=a.$$scope;return i.used=n,e.defs(a,"$probe",function(e){var t=this,r=n;return r=t.$new(),t["$assert_valid_expect_block!"](e),e.$call(r),r["$assert_used!"](),r}),a.$attr_accessor("num_yields","yielded_args"),i.$initialize=function(){var e,t=this;return t.used=!1,e=[0,[]],t["$num_yields="](e[0]),t["$yielded_args="](e[1])},i.$to_proc=function(){var e,t,$,o=this,a=n;return o.used=!0,a=o,(e=(t=s.get("Proc")).$new,e.$$p=($=function(e){{var t;$.$$s||this}return e=r.call(arguments,0),t=a,t["$num_yields="](t.$num_yields()["$+"](1)),a.$yielded_args()["$<<"](e),n},$.$$s=o,$),e).call(t)},i.$single_yield_args=function(){var e=this;return e.$yielded_args().$first()},i["$yielded_once?"]=function(e){var t=this,r=n;return function(){return r=t.$num_yields(),1["$==="](r)?!0:0["$==="](r)?!1:t.$raise(("The "+e+" matcher is not designed to be used with a ")["$+"]("method that yields multiple times. Use the yield_successive_args ")["$+"]("matcher for that case."))}()},i.$successive_yield_args=function(){var e,t,r,$=this;return(e=(t=$.$yielded_args()).$map,e.$$p=(r=function(e){r.$$s||this;return null==e&&(e=n),e.$size()["$=="](1)?e.$first():e},r.$$s=$,r),e).call(t)},i["$assert_used!"]=function(){var e,t=this;return(e=t.used)===n||e.$$is_boolean&&1!=e?t.$raise("You must pass the argument yielded to your expect block on "["$+"]("to the method-under-test as a block. It acts as a probe that ")["$+"]("allows the matcher to detect whether or not the method-under-test ")["$+"]("yields, and, if so, how many times, and what the yielded arguments ")["$+"]("are.")):n},e.defs(a,"$assert_valid_expect_block!",function(e){var t=this;return e.$arity()["$=="](1)?n:t.$raise("Your expect block must accept an argument to be used with this "["$+"]("matcher. Pass the argument as a block on to the method you are testing."))}),n&&"assert_valid_expect_block!"}(a,null),function(e,$super){function t(){}var r=t=o(e,$super,"YieldControl",t),$=r.$$proto,a=r.$$scope;return $.expectation_type=$.expected_yields_count=n,$.$initialize=function(){var e=this;return e.expectation_type=n,e.expected_yields_count=n},$["$matches?"]=function(e){var t,r=this,$=n;return $=a.get("YieldProbe").$probe(e),(t=r.expectation_type)===n||t.$$is_boolean&&1!=t?$["$yielded_once?"]("yield_control"):$.$num_yields().$send(r.expectation_type,r.expected_yields_count)},$.$once=function(){var e=this;return e.$exactly(1),e},$.$twice=function(){var e=this;return e.$exactly(2),e},$.$exactly=function(e){var t=this;return t.$set_expected_yields_count("==",e),t},$.$at_most=function(e){var t=this;return t.$set_expected_yields_count("<=",e),t},$.$at_least=function(e){var t=this;return t.$set_expected_yields_count(">=",e),t},$.$times=function(){var e=this;return e},$.$failure_message_for_should=function(){var e,t,r,$=this;return(e=(t="expected given block to yield control").$tap,e.$$p=(r=function(e){var t=r.$$s||this;return null==e&&(e=n),e["$<<"](t.$relativity_failure_message())},r.$$s=$,r),e).call(t)},$.$failure_message_for_should_not=function(){var e,t,r,$=this;return(e=(t="expected given block not to yield control").$tap,e.$$p=(r=function(e){var t=r.$$s||this;return null==e&&(e=n),e["$<<"](t.$relativity_failure_message())},r.$$s=$,r),e).call(t)},r.$private(),$.$set_expected_yields_count=function(e,t){var r=this,$=n;return r.expectation_type=e,r.expected_yields_count=function(){return $=t,a.get("Numeric")["$==="]($)?t:"once"["$==="]($)?1:"twice"["$==="]($)?2:n}()},$.$relativity_failure_message=function(){var e,t=this;return(e=t.expected_yields_count)===n||e.$$is_boolean&&1!=e?"":" "+t.$human_readable_expecation_type()+t.$human_readable_count()},$.$human_readable_expecation_type=function(){var e=this,t=n;return function(){return t=e.expectation_type,"<="["$==="](t)?"at most ":">="["$==="](t)?"at least ":""}()},$.$human_readable_count=function(){var e=this,t=n;return function(){return t=e.expected_yields_count,1["$==="](t)?"once":2["$==="](t)?"twice":""+e.expected_yields_count+" times"}()},n&&"human_readable_count"}(a,i.get("BaseMatcher")),function(e,$super){function t(){}var r=t=o(e,$super,"YieldWithNoArgs",t),$=r.$$proto,a=r.$$scope;return $.probe=n,$["$matches?"]=function(e){var t,r=this;return r.probe=a.get("YieldProbe").$probe(e),t=r.probe["$yielded_once?"]("yield_with_no_args"),t!==!1&&t!==n?r.probe.$single_yield_args()["$empty?"]():t},$.$failure_message_for_should=function(){var e=this;return"expected given block to yield with no arguments, but "+e.$failure_reason()},$.$failure_message_for_should_not=function(){return"expected given block not to yield with no arguments, but did"},r.$private(),$.$failure_reason=function(){var e,t=this;return(e=t.probe.$num_yields()["$zero?"]())===n||e.$$is_boolean&&1!=e?"yielded with arguments: "+t.probe.$single_yield_args().$inspect():"did not yield"},n&&"failure_reason"}(a,i.get("BaseMatcher")),function(t,$super){function $(){}var a=$=o(t,$super,"YieldWithArgs",$),i=a.$$proto,s=a.$$scope;return i.probe=i.expected=i.positive_args_failure=i.actual=n,i.$initialize=function(e){var t=this;return e=r.call(arguments,0),t.expected=e},i["$matches?"]=function(e){var t,r=this;return r.probe=s.get("YieldProbe").$probe(e),r.actual=r.probe.$single_yield_args(),t=r.probe["$yielded_once?"]("yield_with_args"),t!==!1&&t!==n?r["$args_match?"]():t},e.defn(a,"$==",i["$matches?"]),i.$failure_message_for_should=function(){var e=this;return"expected given block to yield with arguments, but "+e.$positive_failure_reason()},i.$failure_message_for_should_not=function(){var e=this;return"expected given block not to yield with arguments, but "+e.$negative_failure_reason()},i.$description=function(){var e,t,r,$=this,o=n;return o="yield with args",((e=$.expected["$empty?"]())===n||e.$$is_boolean&&1!=e)&&o["$<<"]("("["$+"]((e=(t=$.expected).$map,e.$$p=(r=function(e){r.$$s||this;return null==e&&(e=n),e.$inspect()},r.$$s=$,r),e).call(t).$join(", "))["$+"](")")),o},a.$private(),i.$positive_failure_reason=function(){var e,t=this;return(e=t.probe.$num_yields()["$zero?"]())===n||e.$$is_boolean&&1!=e?t.positive_args_failure:"did not yield"},i.$negative_failure_reason=function(){var e,t=this;return(e=t["$all_args_match?"]())===n||e.$$is_boolean&&1!=e?"did":"yielded with expected arguments"["$+"]("\nexpected not: "+t.expected.$inspect())["$+"]("\n         got: "+t.actual.$inspect()+" (compared using === and ==)")},i["$args_match?"]=function(){var e,t=this,r=n;return(e=t.expected["$empty?"]())===n||e.$$is_boolean&&1!=e?(((e=r=t["$all_args_match?"]())===n||e.$$is_boolean&&1!=e)&&(t.positive_args_failure="yielded with unexpected arguments"["$+"]("\nexpected: "+t.expected.$inspect())["$+"]("\n     got: "+t.actual.$inspect()+" (compared using === and ==)")),r):((e=t.actual["$empty?"]())===n||e.$$is_boolean&&1!=e||(t.positive_args_failure="yielded with no arguments"),t.actual["$empty?"]()["$!"]())},i["$all_args_match?"]=function(){var e,t,r,$=this;return(e=$.expected.$size()["$=="]($.actual.$size())["$!"]())===n||e.$$is_boolean&&1!=e?(e=(t=$.expected.$zip($.actual))["$all?"],e.$$p=(r=function(e,t){{var $;r.$$s||this}return null==e&&(e=n),null==t&&(t=n),($=e["$==="](t))!==!1&&$!==n?$:t["$=="](e)},r.$$s=$,r),e).call(t):!1},n&&"all_args_match?"}(a,null),function(t,$super){function $(){}var a=$=o(t,$super,"YieldSuccessiveArgs",$),i=a.$$proto,s=a.$$scope;return i.probe=i.expected=i.actual=n,i.$initialize=function(e){var t=this;return e=r.call(arguments,0),t.expected=e},i["$matches?"]=function(e){var t=this;return t.probe=s.get("YieldProbe").$probe(e),t.actual=t.probe.$successive_yield_args(),t["$args_match?"]()},e.defn(a,"$==",i["$matches?"]),i.$failure_message_for_should=function(){var e=this;return"expected given block to yield successively with arguments, but yielded with unexpected arguments"["$+"]("\nexpected: "+e.expected.$inspect())["$+"]("\n     got: "+e.actual.$inspect()+" (compared using === and ==)")},i.$failure_message_for_should_not=function(){var e=this;return"expected given block not to yield successively with arguments, but yielded with expected arguments"["$+"]("\nexpected not: "+e.expected.$inspect())["$+"]("\n         got: "+e.actual.$inspect()+" (compared using === and ==)")},i.$description=function(){var e,t,r,$=this,o=n;return o="yield successive args",o["$<<"]("("["$+"]((e=(t=$.expected).$map,e.$$p=(r=function(e){r.$$s||this;return null==e&&(e=n),e.$inspect()},r.$$s=$,r),e).call(t).$join(", "))["$+"](")")),o},a.$private(),i["$args_match?"]=function(){var e,t,r,$=this;return(e=$.expected.$size()["$=="]($.actual.$size())["$!"]())===n||e.$$is_boolean&&1!=e?(e=(t=$.expected.$zip($.actual))["$all?"],e.$$p=(r=function(e,t){{var $;r.$$s||this}return null==e&&(e=n),null==t&&(t=n),($=e["$==="](t))!==!1&&$!==n?$:t["$=="](e)},r.$$s=$,r),e).call(t):!1},n&&"args_match?"}(a,null)}(a)}(a)}(t)},Opal.modules["rspec/matchers/built_in"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.range;return e.add_stubs(["$require","$autoload","$respond_to?"]),function(e){{var t=r(e,"RSpec");t.$$proto,t.$$scope}!function(e){{var t=r(e,"Matchers");t.$$proto,t.$$scope}!function(e){{var t,o=r(e,"BuiltIn");o.$$proto,o.$$scope}o.$require("rspec/matchers/built_in/base_matcher"),o.$autoload("BeAnInstanceOf","rspec/matchers/built_in/be_instance_of"),o.$autoload("Be","rspec/matchers/built_in/be"),o.$autoload("BeTruthy","rspec/matchers/built_in/be"),o.$autoload("BeFalsey","rspec/matchers/built_in/be"),o.$autoload("BeNil","rspec/matchers/built_in/be"),o.$autoload("BeComparedTo","rspec/matchers/built_in/be"),o.$autoload("BePredicate","rspec/matchers/built_in/be"),o.$autoload("BeAKindOf","rspec/matchers/built_in/be_kind_of"),o.$autoload("BeWithin","rspec/matchers/built_in/be_within"),o.$autoload("Change","rspec/matchers/built_in/change"),(t=$(1,2,!1)["$respond_to?"]("cover?"))===n||t.$$is_boolean&&1!=t||o.$autoload("Cover","rspec/matchers/built_in/cover"),o.$autoload("Eq","rspec/matchers/built_in/eq"),o.$autoload("Eql","rspec/matchers/built_in/eql"),o.$autoload("Equal","rspec/matchers/built_in/equal"),o.$autoload("Exist","rspec/matchers/built_in/exist"),o.$autoload("Has","rspec/matchers/built_in/has"),o.$autoload("Have","rspec/matchers/built_in/have"),o.$autoload("Include","rspec/matchers/built_in/include"),o.$autoload("Match","rspec/matchers/built_in/match"),o.$autoload("MatchArray","rspec/matchers/built_in/match_array"),o.$autoload("RaiseError","rspec/matchers/built_in/raise_error"),o.$autoload("RespondTo","rspec/matchers/built_in/respond_to"),o.$autoload("StartWith","rspec/matchers/built_in/start_and_end_with"),o.$autoload("EndWith","rspec/matchers/built_in/start_and_end_with"),o.$autoload("Satisfy","rspec/matchers/built_in/satisfy"),o.$autoload("ThrowSymbol","rspec/matchers/built_in/throw_symbol"),o.$autoload("YieldControl","rspec/matchers/built_in/yield"),o.$autoload("YieldWithArgs","rspec/matchers/built_in/yield"),o.$autoload("YieldWithNoArgs","rspec/matchers/built_in/yield"),o.$autoload("YieldSuccessiveArgs","rspec/matchers/built_in/yield")}(t)}(t)}(t)},Opal.modules["rspec/matchers/matcher"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass;return e.add_stubs(["$require","$define_user_override","$actual_arg_for","$define_method","$to_proc","$private","$__send__","$lambda","$name_to_sentence","$expected_to_sentence","$inspect","$actual","$include","$extend","$attr_reader","$attr_accessor","$class_exec","$new","$name","$class","$>=","$to_f","$respond_to?","$matcher_execution_context","$zero?","$arity"]),t.$require("set"),function(t){{var a=$(t,"RSpec");a.$$proto,a.$$scope}!function(t){{var a=$(t,"Matchers");a.$$proto,a.$$scope}!function(t){{var a=$(t,"DSL");a.$$proto,a.$$scope}!function(t){var o,a,i,s,c,l,u,_,p=$(t,"Macros"),d=p.$$proto,f=p.$$scope;d.$match=o=function(){var t,r,$,a=this,i=o.$$p,s=i||n;return o.$$p=null,(t=(r=a).$define_user_override,t.$$p=($=function(t){var r=$.$$s||this;null==t&&(t=n);try{return r.actual=t,e.find_iter_super_dispatcher(r,"match",$.$$def||o,null).apply(r,[].concat(r.$actual_arg_for(s)))}catch(a){if(e.rescue(a,[f.get("RSpec").$$scope.get("Expectations").$$scope.get("ExpectationNotMetError")]))return!1;throw a}},$.$$s=a,$),t).call(r,"matches?",s)},e.defn(p,"$match_for_should",d.$match),d.$match_for_should_not=a=function(){var t,r,$,o=this,i=a.$$p,s=i||n;return a.$$p=null,(t=(r=o).$define_user_override,t.$$p=($=function(t){var r=$.$$s||this;return null==t&&(t=n),r.actual=t,e.find_iter_super_dispatcher(r,"match_for_should_not",$.$$def||a,null).apply(r,[].concat(r.$actual_arg_for(s)))},$.$$s=o,$),t).call(r,"does_not_match?",s)},d.$match_unless_raises=i=function(t){var r,$,o,a=this,s=i.$$p,c=s||n;return null==t&&(t=f.get("Exception")),i.$$p=null,(r=($=a).$define_user_override,r.$$p=(o=function(r){var $=o.$$s||this;null==r&&(r=n),$.actual=r;try{return e.find_iter_super_dispatcher($,"match_unless_raises",o.$$def||i,null).apply($,[].concat($.$actual_arg_for(c)))}catch(a){if(e.rescue(a,[t]))return $.rescued_exception=a,!1}},o.$$s=a,o),r).call($,"matches?",c)},d.$failure_message_for_should=s=function(){var e=this,t=s.$$p,r=t||n;return s.$$p=null,e.$define_user_override("failure_message_for_should",r)},d.$failure_message_for_should_not=c=function(){var e=this,t=c.$$p,r=t||n;return c.$$p=null,e.$define_user_override("failure_message_for_should_not",r)},d.$description=l=function(){var e=this,t=l.$$p,r=t||n;return l.$$p=null,e.$define_user_override("description",r)},d.$diffable=function(){var e,t,n,r=this;return(e=(t=r).$define_method,e.$$p=(n=function(){n.$$s||this;return!0},n.$$s=r,n),e).call(t,"diffable?")},d.$chain=u=function(t){var $,o,a,i=this,s=u.$$p,c=s||n;return u.$$p=null,($=(o=i).$define_user_override,$.$$p=(a=function(t){var $,o=a.$$s||this;return t=r.call(arguments,0),$=a.$$p||n,a.$$p=null,e.find_iter_super_dispatcher(o,"chain",a.$$def||u,null).apply(o,[].concat(t).concat($.$to_proc())),o},a.$$s=i,a),$).call(o,t,c)},p.$private(),d.$define_user_override=_=function(t,r){var $,o,a,i,s,c=this,l=_.$$p,u=l||n;return null==c.user_method_defs&&(c.user_method_defs=n),_.$$p=null,($=(o=c.user_method_defs).$__send__,$.$$p=r.$to_proc(),$).call(o,"define_method",t),($=u)!==!1&&$!==n?$:u=(a=(i=c).$lambda,a.$$p=(s=function(){var t=s.$$s||this;return e.find_iter_super_dispatcher(t,"define_user_override",s.$$def||_,null).apply(t,[].concat(t.$actual_arg_for(r)))},s.$$s=c,s),a).call(i),($=(a=c).$define_method,$.$$p=u.$to_proc(),$).call(a,t)},e.donate(p,["$match","$match_for_should","$match_for_should_not","$match_unless_raises","$failure_message_for_should","$failure_message_for_should_not","$description","$diffable","$chain","$define_user_override"])}(a),function(t){{var n=$(t,"DefaultImplementations"),r=n.$$proto;n.$$scope}r["$diffable?"]=function(){return!1},r.$description=function(){var e=this;return""+e.$name_to_sentence()+e.$expected_to_sentence()},r.$failure_message_for_should=function(){var e=this;return"expected "+e.$actual().$inspect()+" to "+e.$name_to_sentence()+e.$expected_to_sentence()},r.$failure_message_for_should_not=function(){var e=this;return"expected "+e.$actual().$inspect()+" not to "+e.$name_to_sentence()+e.$expected_to_sentence()},e.donate(n,["$diffable?","$description","$failure_message_for_should","$failure_message_for_should_not"])}(a),function(t,$super){function $(){}var a,i,s,c=$=o(t,$super,"Matcher",$),l=c.$$proto,u=c.$$scope;return l.actual=n,c.$include(u.get("DefaultImplementations")),c.$include(u.get("RSpec").$$scope.get("Matchers")),c.$include(u.get("RSpec").$$scope.get("Matchers").$$scope.get("Pretty")),c.$extend(u.get("Macros")),c.$attr_reader("expected","actual","rescued_exception"),c.$attr_accessor("matcher_execution_context"),l.$initialize=function(e,t,$){var o,a,i=this;return $=r.call(arguments,2),i.name=e,i.actual=n,i.expected=$,(o=(a=function(e){{var t=e.$$scope;e.$$proto}return e.$include(e.user_method_defs=t.get("Module").$new()),e}(i.$singleton_class())).$class_exec,o.$$p=t.$to_proc(),o).apply(a,[].concat($))},l.$inspect=function(){var e=this;return"#<"+e.$class().$name()+" "+e.$name()+">"},u.get("RUBY_VERSION").$to_f()["$>="](1.9)?l["$respond_to_missing?"]=a=function(t,$){var o,i=r.call(arguments,0),s=this,c=a.$$p;return null==$&&($=!1),a.$$p=null,(o=e.find_super_dispatcher(s,"respond_to_missing?",a,c).apply(s,i))!==!1&&o!==n?o:s.$matcher_execution_context()["$respond_to?"](t,$)}:l["$respond_to?"]=i=function(t,$){var o,a=r.call(arguments,0),s=this,c=i.$$p;return null==$&&($=!1),i.$$p=null,(o=e.find_super_dispatcher(s,"respond_to?",i,c).apply(s,a))!==!1&&o!==n?o:s.$matcher_execution_context()["$respond_to?"](t,$)},c.$private(),l.$actual_arg_for=function(e){var t,r=this;return(t=e.$arity()["$zero?"]())===n||t.$$is_boolean&&1!=t?[r.actual]:[]},l.$method_missing=s=function(t,$){var o,a,i=this,c=s.$$p,l=c||n;return $=r.call(arguments,1),s.$$p=null,(o=i.$matcher_execution_context()["$respond_to?"](t))===n||o.$$is_boolean&&1!=o?e.find_super_dispatcher(i,"method_missing",s,null).apply(i,[t].concat($).concat(l.$to_proc())):(o=(a=i.$matcher_execution_context()).$__send__,o.$$p=l.$to_proc(),o).apply(a,[t].concat($))},n&&"method_missing"}(a,null)}(a)}(a)}(t)},Opal.modules["rspec/matchers/operator_matcher"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass,o=e.hash2;return e.add_stubs(["$registry","$[]","$[]=","$delete","$each","$ancestors","$define_method","$uses_generic_implementation_of?","$get","$class","$__send__","$last_should","$new","$eval_match","$sub","$!","$==","$respond_to?","$raise","$+","$use_custom_matcher_or_delegate","$fail_with","$inspect","$private","$owner","$method_handle_for","$last_matcher=","$__delegate_operator","$include?","$fail_with_message","$gsub"]),function(t){{var a=r(t,"RSpec");a.$$proto,a.$$scope}!function(t){{var a=r(t,"Matchers");a.$$proto,a.$$scope}!function(t,$super){function r(){}var a,i,s,c=r=$(t,$super,"OperatorMatcher",r),l=c.$$proto,u=c.$$scope;return l.expected=l.actual=l.operator=n,function(t){t.$$scope,t.$$proto;return t.$$proto.$registry=function(){var e,t=this;return null==t.registry&&(t.registry=n),(e=t.registry)!==!1&&e!==n?e:t.registry=o([],{})},t.$$proto.$register=function(e,t,r){var $,a,i,s=this;return $=e,a=s.$registry(),(i=a["$[]"]($))!==!1&&i!==n?i:a["$[]="]($,o([],{})),s.$registry()["$[]"](e)["$[]="](t,r)},t.$$proto.$unregister=function(e,t){var r,$=this;return r=$.$registry()["$[]"](e),r!==!1&&r!==n?$.$registry()["$[]"](e).$delete(t):r},t.$$proto.$get=function(t,r){try{var $,o,a,i=this;return($=(o=t.$ancestors()).$each,$.$$p=(a=function(t){var $,o=a.$$s||this,i=n;return null==t&&(t=n),$=o.$registry()["$[]"](t),i=$!==!1&&$!==n?o.$registry()["$[]"](t)["$[]"](r):$,i===!1||i===n?n:void e.ret(i)},a.$$s=i,a),$).call(o),n}catch(s){if(s===e.returner)return s.$v;throw s}},n&&"get"}(c.$singleton_class()),l.$initialize=function(e){var t=this;return t.actual=e},e.defs(c,"$use_custom_matcher_or_delegate",function(t){var r,$,o,a,i,s=this,c=n;return(r=($=s).$define_method,r.$$p=(o=function(r){var $,a,i=o.$$s||this,s=n;return null==i.actual&&(i.actual=n),null==r&&(r=n),a=i["$uses_generic_implementation_of?"](t),($=a!==!1&&a!==n?s=u.get("OperatorMatcher").$get(i.actual.$class(),t):a)===n||$.$$is_boolean&&1!=$?i.$eval_match(i.actual,t,r):i.actual.$__send__(e.get("RSpec").$$scope.get("Matchers").$last_should(),s.$new(r))},o.$$s=s,o),r).call($,t),c=t.$sub(/^=/,"!"),a=c["$=="](t)["$!"](),(r=a!==!1&&a!==n?s["$respond_to?"](c):a)===n||r.$$is_boolean&&1!=r?n:(r=(a=s).$define_method,r.$$p=(i=function(r){var $=i.$$s||this,o=n;return null==r&&(r=n),o=function(){return e.get("RSpec").$$scope.get("Matchers").$last_should()["$=="]("should")?"should_not":"should"}(),$.$raise(("RSpec does not support `"+e.get("RSpec").$$scope.get("Matchers").$last_should()+" "+c+" expected`.  ")["$+"]("Use `"+o+" "+t+" expected` instead."))},i.$$s=s,i),r).call(a,c)}),(a=(i=["==","===","=~",">",">=","<","<="]).$each,a.$$p=(s=function(e){var t=s.$$s||this;return null==e&&(e=n),t.$use_custom_matcher_or_delegate(e)},s.$$s=c,s),a).call(i),l.$fail_with_message=function(e){var t=this;return u.get("RSpec").$$scope.get("Expectations").$fail_with(e,t.expected,t.actual)},l.$description=function(){var e=this;return""+e.operator+" "+e.expected.$inspect()},c.$private(),l["$uses_generic_implementation_of?"]=function(t){var n=this;try{return u.get("Expectations").$method_handle_for(n.actual,t).$owner()["$=="](e.get("Kernel"))}catch(r){if(e.rescue(r,[u.get("NameError")]))return!1;throw r}},l.$eval_match=function(t,n,r){var $,o,a=this;return $=[a],o=e.get("RSpec").$$scope.get("Matchers"),o["$last_matcher="].apply(o,$),$[$.length-1],$=[n,r],a.operator=$[0],a.expected=$[1],a.$__delegate_operator(t,n,r)},n&&"eval_match"}(a,null),function(e){var t=r(e,"BuiltIn"),o=(t.$$proto,t.$$scope);!function(e,$super){function t(){}{var r=t=$(e,$super,"PositiveOperatorMatcher",t),o=r.$$proto;r.$$scope}return o.$__delegate_operator=function(e,t,r){var $,o=this;return($=e.$__send__(t,r))===n||$.$$is_boolean&&1!=$?o.$fail_with_message(($=["==","===","=~"]["$include?"](t))===n||$.$$is_boolean&&1!=$?"expected: "+t+" "+r.$inspect()+"\n     got: "+t.$gsub(/./," ")+" "+e.$inspect():"expected: "+r.$inspect()+"\n     got: "+e.$inspect()+" (using "+t+")"):!0},n&&"__delegate_operator"}(t,o.get("OperatorMatcher")),function(e,$super){function t(){}{var r=t=$(e,$super,"NegativeOperatorMatcher",t),o=r.$$proto;r.$$scope}return o.$__delegate_operator=function(e,t,r){var $,o=this;return($=e.$__send__(t,r))===n||$.$$is_boolean&&1!=$?!1:o.$fail_with_message("expected not: "+t+" "+r.$inspect()+"\n         got: "+t.$gsub(/./," ")+" "+e.$inspect())},n&&"__delegate_operator"}(t,o.get("OperatorMatcher"))}(a)}(a)}(t)},Opal.modules["rspec/matchers/generated_descriptions"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module);return e.add_stubs(["$attr_accessor","$last_matcher=","$last_should=","$nil?","$last_should","$gsub","$to_s","$last_description","$private","$respond_to?","$last_matcher","$description"]),function(t){{var $=r(t,"RSpec");$.$$proto,$.$$scope}!function(t){{var $=r(t,"Matchers");$.$$proto,$.$$scope}!function(e){e.$$scope,e.$$proto;return e.$attr_accessor("last_matcher","last_should")}($.$singleton_class()),e.defs($,"$clear_generated_description",function(){var e,t,r=this;return e=[n],t=r,t["$last_matcher="].apply(t,e),e[e.length-1],e=[n],t=r,t["$last_should="].apply(t,e),e[e.length-1]}),e.defs($,"$generated_description",function(){var e,t=this;return(e=t.$last_should()["$nil?"]())===n||e.$$is_boolean&&1!=e?""+t.$last_should().$to_s().$gsub("_"," ")+" "+t.$last_description():n}),$.$private(),e.defs($,"$last_description",function(){var e,t=this;return(e=t.$last_matcher()["$respond_to?"]("description"))===n||e.$$is_boolean&&1!=e?"When you call a matcher in an example without a String, like this:\n\nspecify { object.should matcher }\n\nor this:\n\nit { should matcher }\n\nRSpec expects the matcher to have a #description method. You should either\nadd a String to the example this matcher is being used in, or give it a\ndescription method. Then you won't have to suffer this lengthy warning again.\n":t.$last_matcher().$description()})}($)}(t)},Opal.modules["rspec/matchers/method_missing"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module;return e.add_stubs(["$private","$=~","$to_s","$new","$to_proc"]),function(t){{var o=$(t,"RSpec");o.$$proto,o.$$scope}!function(t){var o,a=$(t,"Matchers"),i=a.$$proto,s=a.$$scope;a.$private(),i.$method_missing=o=function(t,$){var a,i,c,l=r.call(arguments,0),u=this,_=o.$$p,p=_||n;return $=r.call(arguments,1),o.$$p=null,(a=t.$to_s()["$=~"](/^be_/))===n||a.$$is_boolean&&1!=a?(a=t.$to_s()["$=~"](/^have_/))===n||a.$$is_boolean&&1!=a?e.find_super_dispatcher(u,"method_missing",o,_).apply(u,l):(a=(c=s.get("Matchers").$$scope.get("BuiltIn").$$scope.get("Has")).$new,a.$$p=p.$to_proc(),a).apply(c,[t].concat($)):(a=(i=s.get("Matchers").$$scope.get("BuiltIn").$$scope.get("BePredicate")).$new,a.$$p=p.$to_proc(),a).apply(i,[t].concat($))},e.donate(a,["$method_missing"])}(o)}(t)},Opal.modules["rspec/matchers/compatibility"]=function(e){e.dynamic_require_severity="warning";{var t,n,r,$=e.top,o=e,a=e.nil;e.breaker,e.slice}return e.add_stubs(["$each","$===","$const_get","$any?","$include?","$public_instance_methods","$class_exec","$alias_method","$constants"]),(t=(n=o.get("RSpec").$$scope.get("Matchers").$constants()).$each,t.$$p=(r=function(e){var t,n,$,i,s,c,l,u,_,p=r.$$s||this,d=a;return null==e&&(e=a),(t=o.get("Class")["$==="](d=o.get("RSpec").$$scope.get("Matchers").$const_get(e)))===a||t.$$is_boolean&&1!=t?a:((t=(n=($=d.$public_instance_methods())["$any?"],n.$$p=(i=function(e){i.$$s||this;return null==e&&(e=a),["failure_message_for_should","failure_message_for_should"]["$include?"](e)},i.$$s=p,i),n).call($))===a||t.$$is_boolean&&1!=t||(t=(n=d).$class_exec,t.$$p=(s=function(){var e=s.$$s||this;return e.$alias_method("failure_message","failure_message_for_should")},s.$$s=p,s),t).call(n),(t=(c=(l=d.$public_instance_methods())["$any?"],c.$$p=(u=function(e){u.$$s||this;return null==e&&(e=a),["failure_message_for_should_not","failure_message_for_should_not"]["$include?"](e)},u.$$s=p,u),c).call(l))===a||t.$$is_boolean&&1!=t?a:(t=(c=d).$class_exec,t.$$p=(_=function(){var e=_.$$s||this;return e.$alias_method("negative_failure_message","failure_message_for_should_not")},_.$$s=p,_),t).call(c))},r.$$s=$,r),t).call(n)},Opal.modules["rspec/matchers/test_unit_integration"]=function(e){e.dynamic_require_severity="warning";{var t,n=(e.top,e),r=e.nil;e.breaker,e.slice}return e.add_stubs(["$send"]),(t=function(){try{return null!=n.get("MiniTest").$$scope.get("Unit").$$scope.get("TestCase")?"constant":r}catch(t){if(t.$$class===e.NameError)return r;throw t}}())===r||t.$$is_boolean&&1!=t||n.get("MiniTest").$$scope.get("Unit").$$scope.get("TestCase").$send("include",n.get("RSpec").$$scope.get("Matchers")),(t=function(){try{return null!=n.get("Test").$$scope.get("Unit").$$scope.get("TestCase")?"constant":r}catch(t){if(t.$$class===e.NameError)return r;throw t}}())===r||t.$$is_boolean&&1!=t?r:n.get("Test").$$scope.get("Unit").$$scope.get("TestCase").$send("include",n.get("RSpec").$$scope.get("Matchers"))},Opal.modules["rspec/matchers"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.range;return e.add_stubs(["$require","$===","$respond_to?","$new","$alias_method","$empty?","$equal","$be_a_kind_of","$to_proc","$register"]),t.$require("rspec/matchers/pretty"),t.$require("rspec/matchers/built_in"),t.$require("rspec/matchers/matcher"),t.$require("rspec/matchers/operator_matcher"),t.$require("rspec/matchers/generated_descriptions"),t.$require("rspec/matchers/method_missing"),t.$require("rspec/matchers/compatibility"),t.$require("rspec/matchers/dsl"),t.$require("rspec/matchers/test_unit_integration"),function(t){{var a=$(t,"RSpec");a.$$proto,a.$$scope}!function(t){var a,i,s,c,l=$(t,"Matchers"),u=l.$$proto,_=l.$$scope;e.defs(l,"$is_a_matcher?",function(t){var r;return(r=e.get("RSpec").$$scope.get("Matchers").$$scope.get("BuiltIn").$$scope.get("BaseMatcher")["$==="](t))===n||r.$$is_boolean&&1!=r?(r=t["$respond_to?"]("i_respond_to_everything_so_im_not_really_a_matcher"))===n||r.$$is_boolean&&1!=r?(r=t["$respond_to?"]("matches?"))===n||r.$$is_boolean&&1!=r?!1:(r=t["$respond_to?"]("failure_message_for_should"))!==!1&&r!==n?r:t["$respond_to?"]("failure_message"):!1:!0}),u.$be_truthy=function(){return _.get("BuiltIn").$$scope.get("BeTruthy").$new()},u.$be_falsey=function(){return _.get("BuiltIn").$$scope.get("BeFalsey").$new()},l.$alias_method("be_falsy","be_falsey"),u.$be_nil=function(){return _.get("BuiltIn").$$scope.get("BeNil").$new()},u.$be=function(e){var t,$=this;return e=r.call(arguments,0),(t=e["$empty?"]())===n||t.$$is_boolean&&1!=t?(t=$).$equal.apply(t,[].concat(e)):_.get("Matchers").$$scope.get("BuiltIn").$$scope.get("Be").$new()},u.$be_a=function(e){var t=this;return t.$be_a_kind_of(e)},l.$alias_method("be_an","be_a"),u.$be_an_instance_of=function(e){return _.get("BuiltIn").$$scope.get("BeAnInstanceOf").$new(e)},l.$alias_method("be_instance_of","be_an_instance_of"),u.$be_a_kind_of=function(e){return _.get("BuiltIn").$$scope.get("BeAKindOf").$new(e)},l.$alias_method("be_kind_of","be_a_kind_of"),u.$be_within=function(e){return _.get("BuiltIn").$$scope.get("BeWithin").$new(e)},u.$change=a=function(e,t){var r,$,o=a.$$p,i=o||n;return null==e&&(e=n),null==t&&(t=n),a.$$p=null,(r=($=_.get("BuiltIn").$$scope.get("Change")).$new,r.$$p=i.$to_proc(),r).call($,e,t)},(i=o(1,2,!1)["$respond_to?"]("cover?"))===n||i.$$is_boolean&&1!=i||(u.$cover=function(e){var t;return e=r.call(arguments,0),(t=_.get("BuiltIn").$$scope.get("Cover")).$new.apply(t,[].concat(e))}),u.$end_with=function(e){var t;return e=r.call(arguments,0),(t=_.get("BuiltIn").$$scope.get("EndWith")).$new.apply(t,[].concat(e))},u.$eq=function(e){return _.get("BuiltIn").$$scope.get("Eq").$new(e)},u.$eql=function(e){return _.get("BuiltIn").$$scope.get("Eql").$new(e)},u.$equal=function(e){return _.get("BuiltIn").$$scope.get("Equal").$new(e)},u.$exist=function(e){var t;return e=r.call(arguments,0),(t=_.get("BuiltIn").$$scope.get("Exist")).$new.apply(t,[].concat(e))},u.$include=function(e){var t;return e=r.call(arguments,0),(t=_.get("BuiltIn").$$scope.get("Include")).$new.apply(t,[].concat(e))},u.$match=function(e){return _.get("BuiltIn").$$scope.get("Match").$new(e)},l.$alias_method("match_regex","match"),u.$raise_error=s=function(e,t){var r,$,o=s.$$p,a=o||n;return null==e&&(e=_.get("Exception")),null==t&&(t=n),s.$$p=null,(r=($=_.get("BuiltIn").$$scope.get("RaiseError")).$new,r.$$p=a.$to_proc(),r).call($,e,t)},l.$alias_method("raise_exception","raise_error"),u.$respond_to=function(e){var t;return e=r.call(arguments,0),(t=_.get("BuiltIn").$$scope.get("RespondTo")).$new.apply(t,[].concat(e))},u.$satisfy=c=function(){var e,t,r=c.$$p,$=r||n;return c.$$p=null,(e=(t=_.get("BuiltIn").$$scope.get("Satisfy")).$new,e.$$p=$.$to_proc(),e).call(t)},u.$start_with=function(e){var t;return e=r.call(arguments,0),(t=_.get("BuiltIn").$$scope.get("StartWith")).$new.apply(t,[].concat(e))},u.$throw_symbol=function(e,t){return null==e&&(e=n),null==t&&(t=n),_.get("BuiltIn").$$scope.get("ThrowSymbol").$new(e,t)},u.$yield_control=function(){return _.get("BuiltIn").$$scope.get("YieldControl").$new()},u.$yield_with_no_args=function(){return _.get("BuiltIn").$$scope.get("YieldWithNoArgs").$new()},u.$yield_with_args=function(e){var t;return e=r.call(arguments,0),(t=_.get("BuiltIn").$$scope.get("YieldWithArgs")).$new.apply(t,[].concat(e))},u.$yield_successive_args=function(e){var t;return e=r.call(arguments,0),(t=_.get("BuiltIn").$$scope.get("YieldSuccessiveArgs")).$new.apply(t,[].concat(e))},u.$match_array=function(e){return _.get("BuiltIn").$$scope.get("MatchArray").$new(e)},_.get("OperatorMatcher").$register(_.get("Enumerable"),"=~",_.get("BuiltIn").$$scope.get("MatchArray")),e.donate(l,["$be_truthy","$be_falsey","$be_nil","$be","$be_a","$be_an_instance_of","$be_a_kind_of","$be_within","$change","$cover","$end_with","$eq","$eql","$equal","$exist","$include","$match","$raise_error","$respond_to","$satisfy","$start_with","$throw_symbol","$yield_control","$yield_with_no_args","$yield_with_args","$yield_successive_args","$match_array"])}(a)}(t)},Opal.modules["rspec/expectations/expectation_target"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass,a=e.hash2;return e.add_stubs(["$attr_accessor","$prevent_operator_matchers","$handle_matcher","$to_proc","$deprecated_should_enabled?","$deprecate","$should","$should_not","$deprecated_should_enabled=","$remove_method","$private","$raise","$+"]),function(t){{var i=$(t,"RSpec");i.$$proto,i.$$scope}!function(t){{var i=$(t,"Expectations");i.$$proto,i.$$scope}!function(t,$super){function $(){}var i,s,c=$=o(t,$super,"ExpectationTarget",$),l=c.$$proto,u=c.$$scope;return l.target=n,function(e){e.$$scope,e.$$proto;return e.$attr_accessor("deprecated_should_enabled"),e.$$proto["$deprecated_should_enabled?"]=e.$$proto.$deprecated_should_enabled}(c.$singleton_class()),l.$initialize=function(e){var t=this;return t.target=e},l.$to=i=function(e,t){var r,$,o=this,a=i.$$p,s=a||n;return null==e&&(e=n),null==t&&(t=n),i.$$p=null,o.$prevent_operator_matchers("to",e),(r=($=u.get("RSpec").$$scope.get("Expectations").$$scope.get("PositiveExpectationHandler")).$handle_matcher,r.$$p=s.$to_proc(),r).call($,o.target,e,t)},l.$not_to=s=function(e,t){var r,$,o=this,a=s.$$p,i=a||n;
return null==e&&(e=n),null==t&&(t=n),s.$$p=null,o.$prevent_operator_matchers("not_to",e),(r=($=u.get("RSpec").$$scope.get("Expectations").$$scope.get("NegativeExpectationHandler")).$handle_matcher,r.$$p=i.$to_proc(),r).call($,o.target,e,t)},e.defn(c,"$to_not",l.$not_to),e.defs(c,"$enable_deprecated_should",function(){var e,t,$=this;return(e=$["$deprecated_should_enabled?"]())===n||e.$$is_boolean&&1!=e?(l.$should=function(e){var t,$=this;return null==$.target&&($.target=n),e=r.call(arguments,0),u.get("RSpec").$deprecate("`expect { }.should`",a(["replacement"],{replacement:"`expect { }.to`"})),(t=$.target).$should.apply(t,[].concat(e))},l.$should_not=function(e){var t,$=this;return null==$.target&&($.target=n),e=r.call(arguments,0),u.get("RSpec").$deprecate("`expect { }.should_not`",a(["replacement"],{replacement:"`expect { }.not_to`"})),(t=$.target).$should_not.apply(t,[].concat(e))},e=[!0],t=$,t["$deprecated_should_enabled="].apply(t,e),e[e.length-1]):n}),e.defs(c,"$disable_deprecated_should",function(){var e,t,r=this;return(e=r["$deprecated_should_enabled?"]())===n||e.$$is_boolean&&1!=e?n:(r.$remove_method("should"),r.$remove_method("should_not"),e=[!1],t=r,t["$deprecated_should_enabled="].apply(t,e),e[e.length-1])}),c.$private(),l.$prevent_operator_matchers=function(e,t){var r=this;return t!==!1&&t!==n?n:r.$raise(u.get("ArgumentError"),"The expect syntax does not support operator matchers, "["$+"]("so you must pass a matcher to `#"+e+"`."))},n&&"prevent_operator_matchers"}(i,null)}(i)}(t)},Opal.modules["rspec/expectations/syntax"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.hash2;return e.add_stubs(["$extend","$last","$ancestors","$deprecate","$should_enabled?","$module_exec","$warn_about_should_unless_configured","$handle_matcher","$to_proc","$expect_enabled?","$enable_deprecated_should","$default_should_host","$disable_deprecated_should","$<<","$==","$size","$raise","$new","$first","$method_defined?","$positive_expression","$expression_generator","$negative_expression"]),function(t){{var a=$(t,"RSpec");a.$$proto,a.$$scope}!function(t){{var a=$(t,"Expectations");a.$$proto,a.$$scope}!function(t){var a=$(t,"Syntax"),i=a.$$proto,s=a.$$scope;a.$extend(a),i.$default_should_host=function(){var t,r=this;return null==r.default_should_host&&(r.default_should_host=n),(t=r.default_should_host)!==!1&&t!==n?t:r.default_should_host=e.get("Object").$ancestors().$last()},e.defs(a,"$warn_about_should!",function(){var e=this;return e.warn_about_should=!0}),e.defs(a,"$warn_about_should_unless_configured",function(e){var t,r=this;return null==r.warn_about_should&&(r.warn_about_should=n),(t=r.warn_about_should)===n||t.$$is_boolean&&1!=t?n:(s.get("RSpec").$deprecate("Using `"+e+"` from rspec-expectations' old `:should` syntax without explicitly enabling the syntax",o(["replacement"],{replacement:"the new `:expect` syntax or explicitly enable `:should`"})),r.warn_about_should=!1)}),i.$enable_should=function(t){var r,$,o,a=this;return null==t&&(t=a.$default_should_host()),a.warn_about_should=!1,(r=a["$should_enabled?"](t))===n||r.$$is_boolean&&1!=r?((r=($=t).$module_exec,r.$$p=(o=function(){var t,r,$=o.$$s||this;return e.defn($,"$should",t=function(r,$){var o,a,i=this,s=t.$$p,c=s||n;return null==r&&(r=n),null==$&&($=n),t.$$p=null,e.get("RSpec").$$scope.get("Expectations").$$scope.get("Syntax").$warn_about_should_unless_configured("should"),(o=(a=e.get("RSpec").$$scope.get("Expectations").$$scope.get("PositiveExpectationHandler")).$handle_matcher,o.$$p=c.$to_proc(),o).call(a,i,r,$)}),e.defn($,"$should_not",r=function(t,$){var o,a,i=this,s=r.$$p,c=s||n;return null==t&&(t=n),null==$&&($=n),r.$$p=null,e.get("RSpec").$$scope.get("Expectations").$$scope.get("Syntax").$warn_about_should_unless_configured("should_not"),(o=(a=e.get("RSpec").$$scope.get("Expectations").$$scope.get("NegativeExpectationHandler")).$handle_matcher,o.$$p=c.$to_proc(),o).call(a,i,t,$)}),n&&"should_not"},o.$$s=a,o),r).call($),(r=a["$expect_enabled?"]())===n||r.$$is_boolean&&1!=r?n:e.get("RSpec").$$scope.get("Expectations").$$scope.get("ExpectationTarget").$enable_deprecated_should()):n},i.$disable_should=function(t){var r,$,o,a=this;return null==t&&(t=a.$default_should_host()),(r=a["$should_enabled?"](t))===n||r.$$is_boolean&&1!=r?n:((r=($=t).$module_exec,r.$$p=(o=function(){o.$$s||this;return delete i.$should,delete i.$should_not},o.$$s=a,o),r).call($),e.get("RSpec").$$scope.get("Expectations").$$scope.get("ExpectationTarget").$disable_deprecated_should())},i.$enable_expect=function(t){var $,o,a,i=this;return null==t&&(t=e.get("RSpec").$$scope.get("Matchers")),($=i["$expect_enabled?"](t))===n||$.$$is_boolean&&1!=$?(($=(o=t).$module_exec,$.$$p=(a=function(){var t,$=a.$$s||this;return e.defn($,"$expect",t=function($){var o=this,a=t.$$p,i=a||n;return $=r.call(arguments,0),t.$$p=null,i!==n&&$["$<<"](i),$.$size()["$=="](1)||o.$raise(s.get("ArgumentError").$new("You must pass an argument or a block to #expect but not both.")),e.get("RSpec").$$scope.get("Expectations").$$scope.get("ExpectationTarget").$new($.$first())}),n&&"expect"},a.$$s=i,a),$).call(o),($=i["$should_enabled?"]())===n||$.$$is_boolean&&1!=$?n:e.get("RSpec").$$scope.get("Expectations").$$scope.get("ExpectationTarget").$enable_deprecated_should()):n},i.$disable_expect=function(t){var r,$,o,a=this;return null==t&&(t=e.get("RSpec").$$scope.get("Matchers")),(r=a["$expect_enabled?"](t))===n||r.$$is_boolean&&1!=r?n:((r=($=t).$module_exec,r.$$p=(o=function(){o.$$s||this;return delete i.$expect},o.$$s=a,o),r).call($),e.get("RSpec").$$scope.get("Expectations").$$scope.get("ExpectationTarget").$disable_deprecated_should())},i["$should_enabled?"]=function(e){var t=this;return null==e&&(e=t.$default_should_host()),e["$method_defined?"]("should")},i["$expect_enabled?"]=function(t){return null==t&&(t=e.get("RSpec").$$scope.get("Matchers")),t["$method_defined?"]("expect")},i.$positive_expression=function(e,t){var n=this;return n.$expression_generator().$positive_expression(e,t)},i.$negative_expression=function(e,t){var n=this;return n.$expression_generator().$negative_expression(e,t)},i.$expression_generator=function(){var e,t=this;return s.get((e=t["$expect_enabled?"]())===n||e.$$is_boolean&&1!=e?"ShouldExpressionGenerator":"ExpectExpressionGenerator")},function(t){{var n=$(t,"ShouldExpressionGenerator");n.$$proto,n.$$scope}e.defs(n,"$positive_expression",function(e,t){return""+e+".should "+t}),e.defs(n,"$negative_expression",function(e,t){return""+e+".should_not "+t})}(a),function(t){{var n=$(t,"ExpectExpressionGenerator");n.$$proto,n.$$scope}e.defs(n,"$positive_expression",function(e,t){return"expect("+e+").to "+t}),e.defs(n,"$negative_expression",function(e,t){return"expect("+e+").not_to "+t})}(a),e.donate(a,["$default_should_host","$enable_should","$disable_should","$enable_expect","$disable_expect","$should_enabled?","$expect_enabled?","$positive_expression","$negative_expression","$expression_generator"])}(a)}(a)}(t)},Opal.modules["rspec/matchers/configuration"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass;return e.add_stubs(["$require","$include?","$Array","$enable_expect","$disable_expect","$enable_should","$disable_should","$should_enabled?","$<<","$expect_enabled?","$respond_to?","$color_enabled?","$configuration","$attr_writer","$each","$syntax=","$warn_about_should!","$new","$reset_syntaxes_to_default"]),t.$require("rspec/expectations/syntax"),function(t){{var a=$(t,"RSpec");a.$$proto,a.$$scope}!function(t){var a=$(t,"Matchers"),i=(a.$$proto,a.$$scope);!function(t,$super){function $(){}var a,i,s,c=$=o(t,$super,"Configuration",$),l=c.$$proto,u=c.$$scope;return l.color=l.backtrace_formatter=n,l["$syntax="]=function(e){var t,r=this;return(t=r.$Array(e)["$include?"]("expect"))===n||t.$$is_boolean&&1!=t?u.get("Expectations").$$scope.get("Syntax").$disable_expect():u.get("Expectations").$$scope.get("Syntax").$enable_expect(),(t=r.$Array(e)["$include?"]("should"))===n||t.$$is_boolean&&1!=t?u.get("Expectations").$$scope.get("Syntax").$disable_should():u.get("Expectations").$$scope.get("Syntax").$enable_should()},l.$syntax=function(){var e,t=n;return t=[],(e=u.get("Expectations").$$scope.get("Syntax")["$should_enabled?"]())===n||e.$$is_boolean&&1!=e||t["$<<"]("should"),(e=u.get("Expectations").$$scope.get("Syntax")["$expect_enabled?"]())===n||e.$$is_boolean&&1!=e||t["$<<"]("expect"),t},(a=e.get("RSpec")["$respond_to?"]("configuration"))===n||a.$$is_boolean&&1!=a?(c.$attr_writer("color"),l["$color?"]=function(){var e=this;return e.color}):l["$color?"]=function(){return e.get("RSpec").$configuration()["$color_enabled?"]()},l.$add_should_and_should_not_to=function(e){var t,$,o,a=this;return e=r.call(arguments,0),(t=($=e).$each,t.$$p=(o=function(e){o.$$s||this;return null==e&&(e=n),u.get("Expectations").$$scope.get("Syntax").$enable_should(e)},o.$$s=a,o),t).call($)},c.$attr_writer("backtrace_formatter"),l.$backtrace_formatter=function(){var t,r,$=this;return(t=$.backtrace_formatter)!==!1&&t!==n?t:$.backtrace_formatter=function(){return(r=function(){try{return null!=e.get("RSpec").$$scope.get("Core").$$scope.get("BacktraceFormatter")?"constant":n}catch(t){if(t.$$class===e.NameError)return n;throw t}}())===n||r.$$is_boolean&&1!=r?u.get("NullBacktraceFormatter"):e.get("RSpec").$$scope.get("Core").$$scope.get("BacktraceFormatter")}()},l.$reset_syntaxes_to_default=function(){var e,t,n=this;return e=[["should","expect"]],t=n,t["$syntax="].apply(t,e),e[e.length-1],u.get("RSpec").$$scope.get("Expectations").$$scope.get("Syntax")["$warn_about_should!"]()},e.cdecl(u,"NullBacktraceFormatter",(a=(i=u.get("Module")).$new,a.$$p=(s=function(){var t=s.$$s||this;return e.defs(t,"$format_backtrace",function(e){return e}),n&&"format_backtrace"},s.$$s=c,s),a).call(i))}(a,null),e.defs(a,"$configuration",function(){var e,t=this;return null==t.configuration&&(t.configuration=n),(e=t.configuration)!==!1&&e!==n?e:t.configuration=i.get("Configuration").$new()}),a.$configuration().$reset_syntaxes_to_default()}(a)}(t)},Opal.modules["rspec/expectations/fail_with"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module;return e.add_stubs(["$new","$!","$raise","$+","$all_strings?","$any_multiline_strings?","$<<","$diff_as_string","$differ","$coerce_to_string","$no_procs?","$no_numbers?","$diff_as_object","$private","$none?","$===","$flatten","$all?","$any?","$multiline?","$join","$diffably_stringify","$map","$inspect","$gsub","$to_s","$method_defined?","$include?","$encode","$encoding"]),function(e){{var t=$(e,"RSpec");t.$$proto,t.$$scope}!function(e){{var t=$(e,"Expectations");t.$$proto,t.$$scope}!function(e){{var t=e.$$scope;e.$$proto}return e.$$proto.$differ=function(){var e,r=this;return null==r.differ&&(r.differ=n),(e=r.differ)!==!1&&e!==n?e:r.differ=t.get("Differ").$new()},e.$$proto.$fail_with=function(e,r,$){var o,a,i=this;return null==r&&(r=n),null==$&&($=n),(o=e["$!"]())===n||o.$$is_boolean&&1!=o||i.$raise(t.get("ArgumentError"),"Failure message is nil. Does your matcher define the "["$+"]("appropriate failure_message_for_* method to return a string?")),(o=(a=$!==!1&&$!==n)?r:a)===n||o.$$is_boolean&&1!=o||((o=i["$all_strings?"]($,r))===n||o.$$is_boolean&&1!=o?(a=i["$no_procs?"]($,r),(o=a!==!1&&a!==n?i["$no_numbers?"]($,r):a)===n||o.$$is_boolean&&1!=o||e["$<<"]("\nDiff:")["$<<"](i.$differ().$diff_as_object($,r))):(o=i["$any_multiline_strings?"]($,r))===n||o.$$is_boolean&&1!=o||e["$<<"]("\nDiff:")["$<<"](i.$differ().$diff_as_string(i.$coerce_to_string($),i.$coerce_to_string(r)))),i.$raise(t.get("RSpec").$$scope.get("Expectations").$$scope.get("ExpectationNotMetError").$new(e))},e.$private(),e.$$proto["$no_procs?"]=function(e){var $,o,a,i=this;return e=r.call(arguments,0),($=(o=e.$flatten())["$none?"],$.$$p=(a=function(e){a.$$s||this;return null==e&&(e=n),t.get("Proc")["$==="](e)},a.$$s=i,a),$).call(o)},e.$$proto["$all_strings?"]=function(e){var $,o,a,i=this;return e=r.call(arguments,0),($=(o=e.$flatten())["$all?"],$.$$p=(a=function(e){a.$$s||this;return null==e&&(e=n),t.get("String")["$==="](e)},a.$$s=i,a),$).call(o)},e.$$proto["$any_multiline_strings?"]=function(e){var t,$,o,a,i,s=this;return e=r.call(arguments,0),t=($=s)["$all_strings?"].apply($,[].concat(e)),t!==!1&&t!==n?(o=(a=e.$flatten())["$any?"],o.$$p=(i=function(e){var t=i.$$s||this;return null==e&&(e=n),t["$multiline?"](e)},i.$$s=s,i),o).call(a):t},e.$$proto["$no_numbers?"]=function(e){var $,o,a,i=this;return e=r.call(arguments,0),($=(o=e.$flatten())["$none?"],$.$$p=(a=function(e){a.$$s||this;return null==e&&(e=n),t.get("Numeric")["$==="](e)},a.$$s=i,a),$).call(o)},e.$$proto.$coerce_to_string=function(e){var r,$=this;return(r=t.get("Array")["$==="](e))===n||r.$$is_boolean&&1!=r?e:$.$diffably_stringify(e).$join("\n")},e.$$proto.$diffably_stringify=function(e){var r,$,o,a=this;return(r=($=e).$map,r.$$p=(o=function(e){{var r;o.$$s||this}return null==e&&(e=n),(r=t.get("Array")["$==="](e))===n||r.$$is_boolean&&1!=r?e.$to_s().$gsub("\n","\\n"):e.$inspect()},o.$$s=a,o),r).call($)},($a=t.get("String")["$method_defined?"]("encoding"))===n||$a.$$is_boolean&&1!=$a?(e.$$proto["$multiline?"]=function(e){return e["$include?"]("\n")},n&&"multiline?"):(e.$$proto["$multiline?"]=function(e){return e["$include?"]("\n".$encode(e.$encoding()))},n&&"multiline?")}(t.$singleton_class())}(t)}(t)},Opal.modules["rspec/expectations/errors"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass;return function(t){{var o=r(t,"RSpec");o.$$proto,o.$$scope}!function(t){var o,a=r(t,"Expectations"),i=(a.$$proto,a.$$scope);(o=function(){try{return null!=i.get("Test").$$scope.get("Unit").$$scope.get("AssertionFailedError")?"constant":n}catch(t){if(t.$$class===e.NameError)return n;throw t}}())===n||o.$$is_boolean&&1!=o?!function(e,$super){function t(){}{var r=t=$(e,$super,"ExpectationNotMetError",t);r.$$proto,r.$$scope}return n}(a,e.get("StandardError")):!function(e,$super){function t(){}{var r=t=$(e,$super,"ExpectationNotMetError",t);r.$$proto,r.$$scope}return n}(a,i.get("Test").$$scope.get("Unit").$$scope.get("AssertionFailedError"))}(o)}(t)},Opal.modules["rspec/expectations/handler"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$nil?","$respond_to?","$warn","$join","$inspect","$check_message","$last_should=","$last_matcher=","$new","$matches?","$to_proc","$call","$failure_message_for_should","$failure_message","$diffable?","$fail_with","$expected","$actual","$!","$does_not_match?","$failure_message_for_should_not","$negative_failure_message"]),function(t){{var o=r(t,"RSpec");o.$$proto,o.$$scope}!function(t){var o=r(t,"Expectations"),a=(o.$$proto,o.$$scope);!function(t,$super){function r(){}{var o=r=$(t,$super,"ExpectationHandler",r);o.$$proto,o.$$scope}return e.defs(o,"$check_message",function(t){var r,$,o;return(r=($=(o=t["$nil?"]())!==!1&&o!==n?o:t["$respond_to?"]("to_str"))!==!1&&$!==n?$:t["$respond_to?"]("call"))===n||r.$$is_boolean&&1!=r?e.get("Kernel").$warn(["WARNING: ignoring the provided expectation message argument (",t.$inspect(),") since it is not a string or a proc."].$join()):n}),n&&"check_message"}(o,null),function(t,$super){function r(){}{var o,a=r=$(t,$super,"PositiveExpectationHandler",r);a.$$proto,a.$$scope}return e.defs(a,"$handle_matcher",o=function(t,r,$){var a,i,s,c=this,l=o.$$p,u=l||n,_=n;return null==$&&($=n),o.$$p=null,c.$check_message($),a=["should"],i=e.get("RSpec").$$scope.get("Matchers"),i["$last_should="].apply(i,a),a[a.length-1],a=[r],i=e.get("RSpec").$$scope.get("Matchers"),i["$last_matcher="].apply(i,a),a[a.length-1],(a=r["$nil?"]())===n||a.$$is_boolean&&1!=a?(_=(a=(i=r)["$matches?"],a.$$p=u.$to_proc(),a).call(i,t),_!==!1&&_!==n?_:((a=$["$respond_to?"]("call"))===n||a.$$is_boolean&&1!=a||($=$.$call()),(a=$)!==!1&&a!==n?a:$=function(){return(s=r["$respond_to?"]("failure_message_for_should"))===n||s.$$is_boolean&&1!=s?r.$failure_message():r.$failure_message_for_should()}(),s=r["$respond_to?"]("diffable?"),(a=s!==!1&&s!==n?r["$diffable?"]():s)===n||a.$$is_boolean&&1!=a?e.get("RSpec").$$scope.get("Expectations").$fail_with($):e.get("RSpec").$$scope.get("Expectations").$fail_with($,r.$expected(),r.$actual()))):e.get("RSpec").$$scope.get("Matchers").$$scope.get("BuiltIn").$$scope.get("PositiveOperatorMatcher").$new(t)}),n&&"handle_matcher"}(o,a.get("ExpectationHandler")),function(t,$super){function r(){}{var o,a=r=$(t,$super,"NegativeExpectationHandler",r);a.$$proto,a.$$scope}return e.defs(a,"$handle_matcher",o=function(t,r,$){var a,i,s,c,l=this,u=o.$$p,_=u||n,p=n;return null==$&&($=n),o.$$p=null,l.$check_message($),a=["should_not"],i=e.get("RSpec").$$scope.get("Matchers"),i["$last_should="].apply(i,a),a[a.length-1],a=[r],i=e.get("RSpec").$$scope.get("Matchers"),i["$last_matcher="].apply(i,a),a[a.length-1],(a=r["$nil?"]())===n||a.$$is_boolean&&1!=a?(p=function(){return(a=r["$respond_to?"]("does_not_match?"))===n||a.$$is_boolean&&1!=a?(a=(s=r)["$matches?"],a.$$p=_.$to_proc(),a).call(s,t):(a=(i=r)["$does_not_match?"],a.$$p=_.$to_proc(),a).call(i,t)["$!"]()}(),p===!1||p===n?p:((a=$["$respond_to?"]("call"))===n||a.$$is_boolean&&1!=a||($=$.$call()),(a=$)!==!1&&a!==n?a:$=function(){return(c=r["$respond_to?"]("failure_message_for_should_not"))===n||c.$$is_boolean&&1!=c?r.$negative_failure_message():r.$failure_message_for_should_not()}(),c=r["$respond_to?"]("diffable?"),(a=c!==!1&&c!==n?r["$diffable?"]():c)===n||a.$$is_boolean&&1!=a?e.get("RSpec").$$scope.get("Expectations").$fail_with($):e.get("RSpec").$$scope.get("Expectations").$fail_with($,r.$expected(),r.$actual()))):e.get("RSpec").$$scope.get("Matchers").$$scope.get("BuiltIn").$$scope.get("NegativeOperatorMatcher").$new(t)}),n&&"handle_matcher"}(o,a.get("ExpectationHandler"))}(o)}(t)},Opal.modules["rspec/expectations/version"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=(e.nil,e.breaker,e.slice,e.module);return function(t){{var r=n(t,"RSpec");r.$$proto,r.$$scope}!function(t){{var r=n(t,"Expectations");r.$$proto,r.$$scope}!function(t){var r=n(t,"Version"),$=(r.$$proto,r.$$scope);e.cdecl($,"STRING","3.0.0.beta1")}(r)}(r)}(t)},Opal.modules["diff/lcs"]=function(e){e.dynamic_require_severity="warning";{var t=(e.top,e.nil);e.breaker,e.slice}return t},Opal.modules["diff/lcs/hunk"]=function(e){e.dynamic_require_severity="warning";{var t=(e.top,e.nil);e.breaker,e.slice}return t},Opal.modules.pp=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module;return e.add_stubs(["$inspect","$each","$<=","$length","$[]"]),function(t){{var o,a=$(t,"Kernel"),i=a.$$proto;a.$$scope}i.$pretty_inspect=function(){var e=this;return e.$inspect()},(o="undefined"==typeof console||"undefined"==typeof console.log)===n||o.$$is_boolean&&1!=o?i.$pp=function(e){var t,$,o,a=this;return e=r.call(arguments,0),(t=($=e).$each,t.$$p=(o=function(e){o.$$s||this;null==e&&(e=n),console.log(e)},o.$$s=a,o),t).call($),e.$length()["$<="](1)?e["$[]"](0):e}:e.defn(a,"$pp",i.$p),e.donate(a,["$pretty_inspect","$pp","$pp"])}(t)},Opal.modules["rspec/expectations/differ"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass,o=e.hash2;return e.add_stubs(["$require","$pick_encoding","$matching_encoding","$map!","$chomp","$split","$diff","$empty?","$each","$new","$context_lines","$file_length_difference","$>","$overlaps?","$respond_to?","$merge","$unshift","$<<","$to_s","$format","$color_diff","$!","$==","$encoding","$+","$object_to_string","$diff_as_string","$protected","$color","$color?","$configuration","$join","$map","$chr","$[]","$===","$green","$red","$blue","$lines","$singleline_pp","$sort_by","$keys","$=~","$inspect","$pp","$private","$method_defined?","$compatible?","$default_external","$encode"]),t.$require("diff/lcs"),t.$require("diff/lcs/hunk"),t.$require("pp"),function(t){{var a=r(t,"RSpec");a.$$proto,a.$$scope}!function(t){{var a=r(t,"Expectations");a.$$proto,a.$$scope}!function(t,$super){function r(){}var a,i=r=$(t,$super,"Differ",r),s=i.$$proto,c=i.$$scope;return s.$diff_as_string=function(t,r){var $,o,a,i,s,l,u,_=this,p=n,d=n,f=n,h=n,m=n,g=n,v=n,b=n;try{return p=_.$pick_encoding(t,r),d=_.$matching_encoding("",p),f=($=(o=r.$split(_.$matching_encoding("\n",p)))["$map!"],$.$$p=(a=function(e){a.$$s||this;return null==e&&(e=n),e.$chomp()},a.$$s=_,a),$).call(o),h=($=(i=t.$split(_.$matching_encoding("\n",p)))["$map!"],$.$$p=(s=function(e){s.$$s||this;return null==e&&(e=n),e.$chomp()},s.$$s=_,s),$).call(i),m=c.get("Diff").$$scope.get("LCS").$diff(f,h),($=m["$empty?"]())===n||$.$$is_boolean&&1!=$?(g=v=n,b=0,($=(l=m).$each,$.$$p=(u=function(e){var t,r,$=u.$$s||this;null==e&&(e=n);try{return v=c.get("Diff").$$scope.get("LCS").$$scope.get("Hunk").$new(f,h,e,$.$context_lines(),b),b=v.$file_length_difference(),g===!1||g===n?n:(r=$.$context_lines()["$>"](0),(t=r!==!1&&r!==n?v["$overlaps?"](g):r)===n||t.$$is_boolean&&1!=t?d["$<<"]($.$matching_encoding(g.$diff($.$format()).$to_s(),p)):(t=v["$respond_to?"]("merge"))===n||t.$$is_boolean&&1!=t?v.$unshift(g):v.$merge(g))}finally{g=v,d["$<<"]($.$matching_encoding("\n",p))}},u.$$s=_,u),$).call(l),d["$<<"](_.$matching_encoding(g.$diff(_.$format()).$to_s(),p)),d["$<<"](_.$matching_encoding("\n",p)),_.$color_diff(d)):d}catch(y){if(e.rescue(y,[c.get("Encoding").$$scope.get("CompatibilityError")]))return($=t.$encoding()["$=="](r.$encoding())["$!"]())===n||$.$$is_boolean&&1!=$?"Could not produce a diff because of the encoding of the string ("+r.$encoding()+")":("Could not produce a diff because the encoding of the actual string ("+r.$encoding()+") ")["$+"]("differs from the encoding of the expected string ("+t.$encoding()+")");throw y}},s.$diff_as_object=function(e,t){var r,$=this,o=n,a=n,i=n;return o=$.$object_to_string(e),a=$.$object_to_string(t),(r=i=$.$diff_as_string(o,a))===n||r.$$is_boolean&&1!=r?n:$.$color_diff(i)},i.$protected(),s.$format=function(){return"unified"},s.$context_lines=function(){return 3},s.$color=function(e,t){return"e["+t+"m"+e+"e[0m"},s.$red=function(e){var t=this;return t.$color(e,31)},s.$green=function(e){var t=this;return t.$color(e,32)},s.$blue=function(e){var t=this;return t.$color(e,34)},s.$color_diff=function(e){var t,r,$,o=this;return(t=c.get("RSpec").$$scope.get("Matchers").$configuration()["$color?"]())===n||t.$$is_boolean&&1!=t?e:(t=(r=e.$lines()).$map,t.$$p=($=function(e){var t=$.$$s||this,r=n;return null==e&&(e=n),function(){return r=e["$[]"](0).$chr(),"+"["$==="](r)?t.$green(e):"-"["$==="](r)?t.$red(e):"@"["$==="](r)&&e["$[]"](1).$chr()["$=="]("@")?t.$blue(e):e}()},$.$$s=o,$),t).call(r).$join()},s.$object_to_string=function(e){var t,r,$,o,a,i,s=this,l=n;return function(){return l=e,c.get("Hash")["$==="](l)?(t=(r=(o=(a=e.$keys()).$sort_by,o.$$p=(i=function(e){i.$$s||this;return null==e&&(e=n),e.$to_s()},i.$$s=s,i),o).call(a)).$map,t.$$p=($=function(t){var r=$.$$s||this,o=n,a=n,i=n;return null==t&&(t=n),o=c.get("PP").$singleline_pp(t,""),a=c.get("PP").$singleline_pp(e["$[]"](t),""),i=r.$pick_encoding(o,a),r.$matching_encoding(""+o+" => "+a,i)},$.$$s=s,$),t).call(r).$join(",\n"):c.get("String")["$==="](l)?(t=e["$=~"](/\n/))===n||t.$$is_boolean&&1!=t?e.$inspect():e:c.get("PP").$pp(e,"")}()},i.$private(),(a=c.get("String")["$method_defined?"]("encoding"))===n||a.$$is_boolean&&1!=a?(s.$pick_encoding=function(){return n},s.$matching_encoding=function(e){return e},n&&"matching_encoding"):(s.$pick_encoding=function(e,t){var r;return(r=c.get("Encoding")["$compatible?"](e,t))!==!1&&r!==n?r:c.get("Encoding").$default_external()},s.$matching_encoding=function(t,n){try{return t.$encode(n)}catch(r){if(e.rescue(r,[c.get("Encoding").$$scope.get("UndefinedConversionError")]))return t.$encode(n,o(["undef"],{undef:"replace"}));throw r}},n&&"matching_encoding")}(a,null)}(a)}(t)},Opal.modules["rspec/expectations"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module);return e.add_stubs(["$require","$instance_method","$>=","$to_i","$call","$bind","$===","$method"]),t.$require("rspec/support/caller_filter"),t.$require("rspec/support/warnings"),t.$require("rspec/expectations/extensions"),t.$require("rspec/matchers"),t.$require("rspec/expectations/expectation_target"),t.$require("rspec/matchers/configuration"),t.$require("rspec/expectations/fail_with"),t.$require("rspec/expectations/errors"),t.$require("rspec/expectations/handler"),t.$require("rspec/expectations/version"),t.$require("rspec/expectations/differ"),function(t){{var $=r(t,"RSpec");$.$$proto,$.$$scope}!function(t){var $=r(t,"Expectations"),o=($.$$proto,$.$$scope);e.cdecl(o,"KERNEL_METHOD_METHOD",e.get("Kernel").$instance_method("method")),o.get("RUBY_VERSION").$to_i()["$>="](2)?e.defs($,"$method_handle_for",function(e,t){return o.get("KERNEL_METHOD_METHOD").$bind(e).$call(t)}):e.defs($,"$method_handle_for",function(t,r){var $;return($=e.get("Kernel")["$==="](t))===n||$.$$is_boolean&&1!=$?t.$method(r):o.get("KERNEL_METHOD_METHOD").$bind(t).$call(r)})}($)}(t)},Opal.modules["test/unit/assertions"]=function(e){e.dynamic_require_severity="warning";{var t=(e.top,e.nil);e.breaker,e.slice}return t},Opal.modules.stringio=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e,r=e.nil,$=(e.breaker,e.slice,e.klass),o=e.range;return e.add_stubs(["$include","$new","$call","$close","$attr_accessor","$length","$include?","$!","$check_readable","$==","$===","$>=","$raise","$>","$+","$-","$seek","$enum_for","$eof?","$ord","$[]","$check_writable","$String","$write","$closed_write?","$closed_read?"]),function(t,$super){function n(){}var a,i,s,c=n=$(t,$super,"StringIO",n),l=c.$$proto,u=c.$$scope;return l.position=l.string=l.closed=r,c.$include(u.get("IO").$$scope.get("Readable")),c.$include(u.get("IO").$$scope.get("Writable")),e.defs(c,"$open",a=function(e,t){var n=this,$=a.$$p,o=$||r,i=r,s=r;return null==e&&(e=""),null==t&&(t=r),a.$$p=null,i=n.$new(e,t),s=o.$call(i),i.$close(),s}),c.$attr_accessor("string"),l.$initialize=function(e,t){var n,$,o=this;return null==e&&(e=""),null==t&&(t="rw"),o.string=e,o.position=e.$length(),$=t["$include?"]("r"),(n=$!==!1&&$!==r?t["$include?"]("w")["$!"]():$)===r||n.$$is_boolean&&1!=n?($=t["$include?"]("w"),(n=$!==!1&&$!==r?t["$include?"]("r")["$!"]():$)===r||n.$$is_boolean&&1!=n?r:o.closed="read"):o.closed="write"},l["$eof?"]=function(){var e=this;return e.$check_readable(),e.position["$=="](e.string.$length())},e.defn(c,"$eof",l["$eof?"]),l.$seek=function(e,t){var n=this,$=r;return null==t&&(t=u.get("IO").$$scope.get("SEEK_SET")),$=t,u.get("IO").$$scope.get("SEEK_SET")["$==="]($)?(e["$>="](0)||n.$raise(u.get("Errno").$$scope.get("EINVAL")),n.position=e):u.get("IO").$$scope.get("SEEK_CUR")["$==="]($)?n.position=n.position["$+"](e)["$>"](n.string.$length())?n.string.$length():n.position["$+"](e):u.get("IO").$$scope.get("SEEK_END")["$==="]($)&&(n.position=e["$>"](n.string.$length())?0:n.position["$-"](e)),0},l.$tell=function(){var e=this;return e.position},e.defn(c,"$pos",l.$tell),e.defn(c,"$pos=",l.$seek),l.$rewind=function(){var e=this;return e.$seek(0)},l.$each_byte=i=function(){var e,t=this,n=i.$$p,$=n||r,o=r;if(i.$$p=null,$===!1||$===r)return t.$enum_for("each_byte");for(t.$check_readable(),o=t.position;(e=t["$eof?"]())===r||e.$$is_boolean&&1!=e;)$.$call(t.string["$[]"](o).$ord()),o=o["$+"](1);return t},l.$each_char=s=function(){var e,t=this,n=s.$$p,$=n||r,o=r;if(s.$$p=null,$===!1||$===r)return t.$enum_for("each_char");for(t.$check_readable(),o=t.position;(e=t["$eof?"]())===r||e.$$is_boolean&&1!=e;)$.$call(t.string["$[]"](o)),o=o["$+"](1);return t},l.$write=function(e){var t=this,n=r,$=r;return t.$check_writable(),e=t.$String(e),t.string.$length()["$=="](t.position)?(t.string=t.string["$+"](e),t.position=t.position["$+"](e.$length())):(n=t.string["$[]"](o(0,t.position["$-"](1),!1)),$=t.string["$[]"](o(t.position["$+"](e.$length()),-1,!1)),t.string=n["$+"](e)["$+"]($),t.position=t.position["$+"](e.$length()))},l.$read=function(e,t){var n,$=this,a=r,i=r;return null==e&&(e=r),null==t&&(t=r),$.$check_readable(),(n=$["$eof?"]())===r||n.$$is_boolean&&1!=n?(a=function(){return e!==!1&&e!==r?(i=$.string["$[]"]($.position,e),$.position=$.position["$+"](e),i):(i=$.string["$[]"](o($.position,-1,!1)),$.position=$.string.$length(),i)}(),t!==!1&&t!==r?t.$write(a):a):r},l.$close=function(){var e=this;return e.closed="both"},l.$close_read=function(){var e=this;return e.closed=e.closed["$=="]("write")?"both":"read"},l.$close_write=function(){var e=this;return e.closed=e.closed["$=="]("read")?"both":"write"},l["$closed?"]=function(){var e=this;return e.closed["$=="]("both")},l["$closed_read?"]=function(){var e,t=this;return(e=t.closed["$=="]("read"))!==!1&&e!==r?e:t.closed["$=="]("both")},l["$closed_write?"]=function(){var e,t=this;return(e=t.closed["$=="]("write"))!==!1&&e!==r?e:t.closed["$=="]("both")},l.$check_writable=function(){var e,t=this;return(e=t["$closed_write?"]())===r||e.$$is_boolean&&1!=e?r:t.$raise(u.get("IOError"),"not opened for writing")},l.$check_readable=function(){var e,t=this;return(e=t["$closed_read?"]())===r||e.$$is_boolean&&1!=e?r:t.$raise(u.get("IOError"),"not opened for reading")},r&&"check_readable"}(t,n.get("IO"))},Opal.modules["rspec/core/formatters/base_formatter"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass,o=e.range,a=e.hash2;return e.add_stubs(["$require","$include","$attr_accessor","$attr_reader","$new","$start_sync_output","$<<","$examples","$restore_sync_output","$format_backtrace","$backtrace_formatter","$configuration","$metadata","$protected","$find_failed_line","$backtrace","$file_path","$[]","$match","$exist?","$readlines","$-","$to_i","$expand_path","$detect","$==","$downcase","$output_supports_sync","$sync","$output","$sync=","$!","$closed?","$respond_to?","$profile_examples","$fail_fast","$color_enabled?","$profile_examples?","$fail_fast?","$first","$reverse","$sort_by","$execution_result","$map","$inject","$+","$each","$last","$parent_groups","$example_group","$[]=","$has_key?","$top_level_description","$<=","$length","$keys","$each_value","$/","$to_f","$-@"]),t.$require("rspec/core/formatters/helpers"),t.$require("stringio"),function(t){{var i=r(t,"RSpec");i.$$proto,i.$$scope}!function(t){{var i=r(t,"Core");i.$$proto,i.$$scope}!function(t){{var i=r(t,"Formatters");i.$$proto,i.$$scope}!function(t,$super){function r(){}var i=r=$(t,$super,"BaseFormatter",r),s=i.$$proto,c=i.$$scope;return s.pending_examples=s.failed_examples=s.old_sync=n,i.$include(c.get("Helpers")),i.$attr_accessor("example_group"),i.$attr_reader("duration","examples","output"),i.$attr_reader("example_count","pending_count","failure_count"),i.$attr_reader("failed_examples","pending_examples"),s.$initialize=function(e){var t,r=this;return r.output=(t=e)!==!1&&t!==n?t:c.get("StringIO").$new(),r.example_count=r.pending_count=r.failure_count=0,r.examples=[],r.failed_examples=[],r.pending_examples=[],r.example_group=n},s.$start=function(e){var t=this;return t.$start_sync_output(),t.example_count=e},s.$example_group_started=function(e){var t=this;return t.example_group=e},s.$example_group_finished=function(){return n},s.$example_started=function(e){var t=this;return t.$examples()["$<<"](e)},s.$example_passed=function(){return n},s.$example_pending=function(e){var t=this;return t.pending_examples["$<<"](e)},s.$example_failed=function(e){var t=this;return t.failed_examples["$<<"](e)},s.$message=function(){return n},s.$stop=function(){return n},s.$start_dump=function(){return n},s.$dump_failures=function(){return n},s.$dump_summary=function(e,t,n,r){var $=this;return $.duration=e,$.example_count=t,$.failure_count=n,$.pending_count=r},s.$dump_pending=function(){return n},s.$dump_profile=function(){return n},s.$seed=function(){return n},s.$close=function(){var e=this;return e.$restore_sync_output()},s.$format_backtrace=function(e,t){var n=this;return n.$configuration().$backtrace_formatter().$format_backtrace(e,t.$metadata())},i.$protected(),s.$configuration=function(){return c.get("RSpec").$configuration()},s.$read_failed_line=function(t,r){var $,a=this,i=n,s=n,l=n;try{return($=i=a.$find_failed_line(t.$backtrace(),r.$file_path()))===n||$.$$is_boolean&&1!=$?"Unable to find matching line from backtrace":($=e.to_ary(i.$match(/(.+?):(\d+)(|:\d+)/)["$[]"](o(1,2,!1))),s=null==$[0]?n:$[0],l=null==$[1]?n:$[1],($=c.get("File")["$exist?"](s))===n||$.$$is_boolean&&1!=$?"Unable to find "+s+" to read failed line":($=c.get("File").$readlines(s)["$[]"](l.$to_i()["$-"](1)))!==!1&&$!==n?$:"Unable to find matching line in "+s)}catch(u){if(e.rescue(u,[c.get("SecurityError")]))return"Unable to read failed line";
throw u}},s.$find_failed_line=function(e,t){var r,$,o,a=this;return t=c.get("File").$expand_path(t),(r=($=e).$detect,r.$$p=(o=function(e){var r,$=(o.$$s||this,n);return null==e&&(e=n),$=e.$match(/(.+?):(\d+)(|:\d+)/),(r=$!==!1&&$!==n)?$["$[]"](1).$downcase()["$=="](t.$downcase()):r},o.$$s=a,o),r).call($)},s.$start_sync_output=function(){var e,t=this;return(e=t.$output_supports_sync())===n||e.$$is_boolean&&1!=e?n:(e=[t.$output().$sync(),!0],t.old_sync=e[0],t.$output()["$sync="](e[1]))},s.$restore_sync_output=function(){var e,t,r=this;return t=r.$output_supports_sync(),(e=t!==!1&&t!==n?r.$output()["$closed?"]()["$!"]():t)===n||e.$$is_boolean&&1!=e?n:(e=[r.old_sync],t=r.$output(),t["$sync="].apply(t,e),e[e.length-1])},s.$output_supports_sync=function(){var e=this;return e.$output()["$respond_to?"]("sync=")},s["$profile_examples?"]=function(){var e=this;return e.$configuration().$profile_examples()},s["$fail_fast?"]=function(){var e=this;return e.$configuration().$fail_fast()},s["$color_enabled?"]=function(){var e=this;return e.$configuration()["$color_enabled?"](e.$output())},s["$mute_profile_output?"]=function(e){var t,r,$=this;return(t=$["$profile_examples?"]()["$!"]())!==!1&&t!==n?t:(r=$["$fail_fast?"](),r!==!1&&r!==n?e["$=="](0)["$!"]():r)},s.$slowest_examples=function(){var t,r,$,o,i,s,l=this,u=n,_=n,p=n,d=n;return u=c.get("RSpec").$configuration().$profile_examples(),_=(t=(r=l.$examples()).$sort_by,t.$$p=($=function(e){$.$$s||this;return null==e&&(e=n),e.$execution_result()["$[]"]("run_time")},$.$$s=l,$),t).call(r).$reverse().$first(u),t=e.to_ary((o=(i=[l.$examples(),_]).$map,o.$$p=(s=function(e){var t,r,$,o=s.$$s||this;return null==e&&(e=n),(t=(r=e).$inject,t.$$p=($=function(e,t){$.$$s||this;return null==e&&(e=n),null==t&&(t=n),e["$+"](t.$execution_result()["$[]"]("run_time"))},$.$$s=o,$),t).call(r,0)},s.$$s=l,s),o).call(i)),p=null==t[0]?n:t[0],d=null==t[1]?n:t[1],a(["examples","total","slows"],{examples:_,total:p,slows:d})},s.$slowest_groups=function(){var e,t,r,$,o,i,s,l=this,u=n,_=n;return u=c.get("RSpec").$configuration().$profile_examples(),_=a([],{}),(e=(t=l.$examples()).$each,e.$$p=(r=function(e){var t,$,o,a=(r.$$s||this,n);return null==e&&(e=n),a=e.$example_group().$parent_groups().$last().$metadata()["$[]"]("example_group")["$[]"]("location"),t=a,$=_,(o=$["$[]"](t))!==!1&&o!==n?o:$["$[]="](t,c.get("Hash").$new(0)),t="total_time",$=_["$[]"](a),$["$[]="](t,$["$[]"](t)["$+"](e.$execution_result()["$[]"]("run_time"))),t="count",$=_["$[]"](a),$["$[]="](t,$["$[]"](t)["$+"](1)),(t=_["$[]"](a)["$has_key?"]("description"))===n||t.$$is_boolean&&1!=t?_["$[]"](a)["$[]="]("description",e.$example_group().$top_level_description()):n},r.$$s=l,r),e).call(t),_.$keys().$length()["$<="](1)?a([],{}):((e=($=_).$each_value,e.$$p=(o=function(e){o.$$s||this;return null==e&&(e=n),e["$[]="]("average",e["$[]"]("total_time").$to_f()["$/"](e["$[]"]("count")))},o.$$s=l,o),e).call($),(e=(i=_).$sort_by,e.$$p=(s=function(e,t){s.$$s||this;return null==e&&(e=n),null==t&&(t=n),t["$[]"]("average")["$-@"]()},s.$$s=l,s),e).call(i).$first(u))},n&&"slowest_groups"}(i,null)}(i)}(i)}(t)},Opal.modules["rspec/core/formatters/base_text_formatter"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass,o=e.gvars,a=e.hash2;return e.add_stubs(["$require","$puts","$output","$empty?","$failed_examples","$each_with_index","$pending_fixed?","$dump_pending_fixed","$dump_failure","$dump_backtrace","$>","$failure_count","$color","$failure_color","$configuration","$pending_count","$pending_color","$success_color","$mute_profile_output?","$dump_profile","$format_duration","$colorise_summary","$summary_line","$dump_commands_to_rerun_failed_examples","$each","$+","$relative_path","$location","$detail_color","$full_description","$dump_profile_slowest_examples","$dump_profile_slowest_example_groups","$slowest_examples","$/","$[]","$%","$*","$nan?","$size","$format_seconds","$bold","$execution_result","$format_caller","$slowest_groups","$pluralize","$<<","$pending_examples","$show_failures_in_pending_blocks?","$dump_failure_info","$===","$!","$==","$close","$to_set","$values","$include?","$fetch","$color_code_for","$protected","$color_enabled?","$colorize","$fixed_color","$default_color","$deprecate","$private","$backtrace_line","$backtrace_formatter","$first","$split","$to_s","$long_padding","$format_backtrace","$backtrace","$short_padding","$next","$metadata","$exception_class_name_for","$strip","$read_failed_line","$=~","$message","$find_shared_group","$dump_shared_failure_info","$name","$class","$find","$group_and_parent_groups","$parent_groups","$example_group"]),t.$require("rspec/core/formatters/base_formatter"),t.$require("set"),function(t){{var i=r(t,"RSpec");i.$$proto,i.$$scope}!function(t){{var i=r(t,"Core");i.$$proto,i.$$scope}!function(t){var i=r(t,"Formatters"),s=(i.$$proto,i.$$scope);!function(t,$super){function r(){}var i,s=r=$(t,$super,"BaseTextFormatter",r),c=s.$$proto,l=s.$$scope;return c.$message=function(e){var t=this;return t.$output().$puts(e)},c.$dump_failures=function(){var e,t,r,$=this;return(e=$.$failed_examples()["$empty?"]())===n||e.$$is_boolean&&1!=e?($.$output().$puts(),$.$output().$puts("Failures:"),(e=(t=$.$failed_examples()).$each_with_index,e.$$p=(r=function(e,t){var $,o=r.$$s||this;return null==e&&(e=n),null==t&&(t=n),o.$output().$puts(),($=o["$pending_fixed?"](e))===n||$.$$is_boolean&&1!=$?o.$dump_failure(e,t):o.$dump_pending_fixed(e,t),o.$dump_backtrace(e)},r.$$s=$,r),e).call(t)):n},c.$colorise_summary=function(e){var t=this;return t.$failure_count()["$>"](0)?t.$color(e,l.get("RSpec").$configuration().$failure_color()):t.$pending_count()["$>"](0)?t.$color(e,l.get("RSpec").$configuration().$pending_color()):t.$color(e,l.get("RSpec").$configuration().$success_color())},c.$dump_summary=i=function(t,r,$,o){{var a,s=this;i.$$p}return i.$$p=null,e.find_super_dispatcher(s,"dump_summary",i,null).apply(s,[t,r,$,o]),((a=s["$mute_profile_output?"]($))===n||a.$$is_boolean&&1!=a)&&s.$dump_profile(),s.$output().$puts("\nFinished in "+s.$format_duration(t)+"\n"),s.$output().$puts(s.$colorise_summary(s.$summary_line(r,$,o))),s.$dump_commands_to_rerun_failed_examples()},c.$dump_commands_to_rerun_failed_examples=function(){var e,t,r,$=this;return(e=$.$failed_examples()["$empty?"]())===n||e.$$is_boolean&&1!=e?($.$output().$puts(),$.$output().$puts("Failed examples:"),$.$output().$puts(),(e=(t=$.$failed_examples()).$each,e.$$p=(r=function(e){var t=r.$$s||this;return null==e&&(e=n),t.$output().$puts(t.$failure_color("rspec "+l.get("RSpec").$$scope.get("Core").$$scope.get("Metadata").$relative_path(e.$location()))["$+"](" ")["$+"](t.$detail_color("# "+e.$full_description())))},r.$$s=$,r),e).call(t)):n},c.$dump_profile=function(){var e=this;return e.$dump_profile_slowest_examples(),e.$dump_profile_slowest_example_groups()},c.$dump_profile_slowest_examples=function(){var e,t,r,$=this,o=n,a=n,i=n;return o=$.$slowest_examples(),a=o["$[]"]("slows")["$/"](o["$[]"]("total")),i="%.1f"["$%"](function(){return(e=a["$nan?"]())===n||e.$$is_boolean&&1!=e?a:0}()["$*"](100)),$.$output().$puts("\nTop "+o["$[]"]("examples").$size()+" slowest examples ("+$.$format_seconds(o["$[]"]("slows"))+" seconds, "+i+"% of total time):\n"),(e=(t=o["$[]"]("examples")).$each,e.$$p=(r=function(e){var t=r.$$s||this;return null==e&&(e=n),t.$output().$puts("  "+e.$full_description()),t.$output().$puts("    "+t.$bold(t.$format_seconds(e.$execution_result()["$[]"]("run_time")))+" "+t.$bold("seconds")+" "+t.$format_caller(e.$location()))},r.$$s=$,r),e).call(t)},c.$dump_profile_slowest_example_groups=function(){var e,t,r,$=this,o=n;return o=$.$slowest_groups(),(e=o["$empty?"]())===n||e.$$is_boolean&&1!=e?($.$output().$puts("\nTop "+o.$size()+" slowest example groups:"),(e=(t=$.$slowest_groups()).$each,e.$$p=(r=function(e,t){var $=r.$$s||this,o=n,a=n,i=n;return null==e&&(e=n),null==t&&(t=n),o=""+$.$bold($.$format_seconds(t["$[]"]("average")))+" "+$.$bold("seconds")+" average",a=""+$.$format_seconds(t["$[]"]("total_time"))+" seconds",i=$.$pluralize(t["$[]"]("count"),"example"),$.$output().$puts("  "+t["$[]"]("description")),$.$output().$puts("    "+o+" ("+a+" / "+i+") "+e)},r.$$s=$,r),e).call(t)):n},c.$summary_line=function(e,t,r){var $=this,o=n;return o=$.$pluralize(e,"example"),o["$<<"](", ")["$<<"]($.$pluralize(t,"failure")),r["$>"](0)&&o["$<<"](", "+r+" pending"),o},c.$dump_pending=function(){var e,t,r,$=this;return(e=$.$pending_examples()["$empty?"]())===n||e.$$is_boolean&&1!=e?($.$output().$puts(),$.$output().$puts("Pending:"),(e=(t=$.$pending_examples()).$each,e.$$p=(r=function(e){var t,$,o=r.$$s||this;return null==e&&(e=n),o.$output().$puts(o.$pending_color("  "+e.$full_description())),o.$output().$puts(o.$detail_color("    # "+e.$execution_result()["$[]"]("pending_message"))),o.$output().$puts(o.$detail_color("    # "+o.$format_caller(e.$location()))),$=e.$execution_result()["$[]"]("exception"),(t=$!==!1&&$!==n?l.get("RSpec").$configuration()["$show_failures_in_pending_blocks?"]():$)===n||t.$$is_boolean&&1!=t?n:(o.$dump_failure_info(e),o.$dump_backtrace(e))},r.$$s=$,r),e).call(t)):n},c.$seed=function(e){var t=this;return t.$output().$puts(),t.$output().$puts("Randomized with seed "+e),t.$output().$puts()},c.$close=function(){var e,t,r=this;return null==o.stdout&&(o.stdout=n),t=l.get("IO")["$==="](r.$output()),(e=t!==!1&&t!==n?r.$output()["$=="](o.stdout)["$!"]():t)===n||e.$$is_boolean&&1!=e?n:r.$output().$close()},e.cdecl(l,"VT100_COLORS",a(["black","red","green","yellow","blue","magenta","cyan","white"],{black:30,red:31,green:32,yellow:33,blue:34,magenta:35,cyan:36,white:37})),e.cdecl(l,"VT100_COLOR_CODES",l.get("VT100_COLORS").$values().$to_set()),c.$color_code_for=function(e){var t,r,$,o=this;return(t=l.get("VT100_COLOR_CODES")["$include?"](e))===n||t.$$is_boolean&&1!=t?(t=(r=l.get("VT100_COLORS")).$fetch,t.$$p=($=function(){var e=$.$$s||this;return e.$color_code_for("white")},$.$$s=o,$),t).call(r,e):e},c.$colorize=function(e,t){var n=this;return"e["+n.$color_code_for(t)+"m"+e+"e[0m"},s.$protected(),c.$bold=function(e){var t,r=this;return(t=r["$color_enabled?"]())===n||t.$$is_boolean&&1!=t?e:"e[1m"+e+"e[0m"},c.$color=function(e,t){var r,$=this;return(r=$["$color_enabled?"]())===n||r.$$is_boolean&&1!=r?e:$.$colorize(e,t)},c.$failure_color=function(e){var t=this;return t.$color(e,l.get("RSpec").$configuration().$failure_color())},c.$success_color=function(e){var t=this;return t.$color(e,l.get("RSpec").$configuration().$success_color())},c.$pending_color=function(e){var t=this;return t.$color(e,l.get("RSpec").$configuration().$pending_color())},c.$fixed_color=function(e){var t=this;return t.$color(e,l.get("RSpec").$configuration().$fixed_color())},c.$detail_color=function(e){var t=this;return t.$color(e,l.get("RSpec").$configuration().$detail_color())},c.$default_color=function(e){var t=this;return t.$color(e,l.get("RSpec").$configuration().$default_color())},c.$red=function(e){var t=this;return l.get("RSpec").$deprecate("RSpec::Core::Formatters::BaseTextFormatter#red",a(["replacement"],{replacement:"#failure_color"})),t.$color(e,"red")},c.$green=function(e){var t=this;return l.get("RSpec").$deprecate("RSpec::Core::Formatters::BaseTextFormatter#green",a(["replacement"],{replacement:"#success_color"})),t.$color(e,"green")},c.$yellow=function(e){var t=this;return l.get("RSpec").$deprecate("RSpec::Core::Formatters::BaseTextFormatter#yellow",a(["replacement"],{replacement:"#pending_color"})),t.$color(e,"yellow")},c.$blue=function(e){var t=this;return l.get("RSpec").$deprecate("RSpec::Core::Formatters::BaseTextFormatter#blue",a(["replacement"],{replacement:"#fixed_color"})),t.$color(e,"blue")},c.$magenta=function(e){var t=this;return l.get("RSpec").$deprecate("RSpec::Core::Formatters::BaseTextFormatter#magenta"),t.$color(e,"magenta")},c.$cyan=function(e){var t=this;return l.get("RSpec").$deprecate("RSpec::Core::Formatters::BaseTextFormatter#cyan",a(["replacement"],{replacement:"#detail_color"})),t.$color(e,"cyan")},c.$white=function(e){var t=this;return l.get("RSpec").$deprecate("RSpec::Core::Formatters::BaseTextFormatter#white",a(["replacement"],{replacement:"#default_color"})),t.$color(e,"white")},c.$short_padding=function(){return"  "},c.$long_padding=function(){return"     "},s.$private(),c.$format_caller=function(e){var t=this;return t.$configuration().$backtrace_formatter().$backtrace_line(e.$to_s().$split(":in `block").$first())},c.$dump_backtrace=function(e){var t,r,$,o=this;return(t=(r=o.$format_backtrace(e.$execution_result()["$[]"]("exception").$backtrace(),e)).$each,t.$$p=($=function(e){var t=$.$$s||this;return null==e&&(e=n),t.$output().$puts(t.$detail_color(""+t.$long_padding()+"# "+e))},$.$$s=o,$),t).call(r)},c.$dump_pending_fixed=function(e,t){var n=this;return n.$output().$puts(""+n.$short_padding()+t.$next()+") "+e.$full_description()+" FIXED"),n.$output().$puts(n.$fixed_color(""+n.$long_padding()+"Expected pending '"+e.$metadata()["$[]"]("execution_result")["$[]"]("pending_message")+"' to fail. No Error was raised."))},c["$pending_fixed?"]=function(e){return e.$execution_result()["$[]"]("pending_fixed")},c.$dump_failure=function(e,t){var n=this;return n.$output().$puts(""+n.$short_padding()+t.$next()+") "+e.$full_description()),n.$dump_failure_info(e)},c.$dump_failure_info=function(e){var t,r,$,o=this,a=n,i=n,s=n;return a=e.$execution_result()["$[]"]("exception"),i=o.$exception_class_name_for(a),o.$output().$puts(""+o.$long_padding()+o.$failure_color("Failure/Error:")+" "+o.$failure_color(o.$read_failed_line(a,e).$strip())),((t=i["$=~"](/RSpec/))===n||t.$$is_boolean&&1!=t)&&o.$output().$puts(""+o.$long_padding()+o.$failure_color(i)+":"),(t=a.$message())===n||t.$$is_boolean&&1!=t||(t=(r=a.$message().$to_s().$split("\n")).$each,t.$$p=($=function(e){var t=$.$$s||this;return null==e&&(e=n),t.$output().$puts(""+t.$long_padding()+"  "+t.$failure_color(e))},$.$$s=o,$),t).call(r),(t=s=o.$find_shared_group(e))===n||t.$$is_boolean&&1!=t?n:o.$dump_shared_failure_info(s)},c.$exception_class_name_for=function(e){var t=n;return t=e.$class().$name().$to_s(),t["$=="]("")&&(t="(anonymous error class)"),t},c.$dump_shared_failure_info=function(e){var t=this;return t.$output().$puts((""+t.$long_padding()+'Shared Example Group: "'+e.$metadata()["$[]"]("shared_group_name")+'" called from ')["$+"](""+t.$configuration().$backtrace_formatter().$backtrace_line(e.$metadata()["$[]"]("example_group")["$[]"]("location"))))},c.$find_shared_group=function(e){var t,r,$,o=this;return(t=(r=o.$group_and_parent_groups(e)).$find,t.$$p=($=function(e){$.$$s||this;return null==e&&(e=n),e.$metadata()["$[]"]("shared_group_name")},$.$$s=o,$),t).call(r)},c.$group_and_parent_groups=function(e){return e.$example_group().$parent_groups()["$+"]([e.$example_group()])},n&&"group_and_parent_groups"}(i,s.get("BaseFormatter"))}(i)}(i)}(t)},Opal.modules["rspec/core/formatters/documentation_formatter"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$require","$==","$puts","$output","$current_indentation","$strip","$description","$+","$-","$passed_output","$pending_output","$[]","$execution_result","$failure_output","$failure_color","$next_failure_index","$success_color","$pending_color","$*","$reverse","$parent_groups","$example_group"]),t.$require("rspec/core/formatters/base_text_formatter"),function(t){{var o=r(t,"RSpec");o.$$proto,o.$$scope}!function(t){{var o=r(t,"Core");o.$$proto,o.$$scope}!function(t){var o=r(t,"Formatters"),a=(o.$$proto,o.$$scope);!function(t,$super){function r(){}{var o,a,i,s,c,l=r=$(t,$super,"DocumentationFormatter",r),u=l.$$proto;l.$$scope}return u.group_level=u.next_failure_index=n,u.$initialize=o=function(t){{var n=this;o.$$p}return o.$$p=null,e.find_super_dispatcher(n,"initialize",o,null).apply(n,[t]),n.group_level=0},u.$example_group_started=a=function(t){{var n=this;a.$$p}return a.$$p=null,e.find_super_dispatcher(n,"example_group_started",a,null).apply(n,[t]),n.group_level["$=="](0)&&n.$output().$puts(),n.$output().$puts(""+n.$current_indentation()+t.$description().$strip()),n.group_level=n.group_level["$+"](1)},u.$example_group_finished=function(){var e=this;return e.group_level=e.group_level["$-"](1)},u.$example_passed=i=function(t){{var n=this;i.$$p}return i.$$p=null,e.find_super_dispatcher(n,"example_passed",i,null).apply(n,[t]),n.$output().$puts(n.$passed_output(t))},u.$example_pending=s=function(t){{var n=this;s.$$p}return s.$$p=null,e.find_super_dispatcher(n,"example_pending",s,null).apply(n,[t]),n.$output().$puts(n.$pending_output(t,t.$execution_result()["$[]"]("pending_message")))},u.$example_failed=c=function(t){{var n=this;c.$$p}return c.$$p=null,e.find_super_dispatcher(n,"example_failed",c,null).apply(n,[t]),n.$output().$puts(n.$failure_output(t,t.$execution_result()["$[]"]("exception")))},u.$failure_output=function(e){var t=this;return t.$failure_color(""+t.$current_indentation()+e.$description().$strip()+" (FAILED - "+t.$next_failure_index()+")")},u.$next_failure_index=function(){var e,t=this;return(e=t.next_failure_index)!==!1&&e!==n?e:t.next_failure_index=0,t.next_failure_index=t.next_failure_index["$+"](1)},u.$passed_output=function(e){var t=this;return t.$success_color(""+t.$current_indentation()+e.$description().$strip())},u.$pending_output=function(e,t){var n=this;return n.$pending_color(""+n.$current_indentation()+e.$description().$strip()+" (PENDING: "+t+")")},u.$current_indentation=function(){var e=this;return"  "["$*"](e.group_level)},u.$example_group_chain=function(){var e=this;return e.$example_group().$parent_groups().$reverse()},n&&"example_group_chain"}(o,a.get("BaseTextFormatter"))}(o)}(o)}(t)},Opal.modules.template=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.klass),$=e.hash2;return e.add_stubs(["$[]","$[]=","$keys","$attr_reader","$instance_exec","$to_proc","$new","$<<","$join"]),function(t,$super){function o(){}var a,i=o=r(t,$super,"Template",o),s=i.$$proto,c=i.$$scope;return s.name=s.body=n,i._cache=$([],{}),e.defs(i,"$[]",function(e){var t,r=this;return null==r._cache&&(r._cache=n),(t=r._cache["$[]"](e))!==!1&&t!==n?t:r._cache["$[]"]("templates/"+e)}),e.defs(i,"$[]=",function(e,t){var r=this;return null==r._cache&&(r._cache=n),r._cache["$[]="](e,t)}),e.defs(i,"$paths",function(){var e=this;return null==e._cache&&(e._cache=n),e._cache.$keys()}),i.$attr_reader("body"),s.$initialize=a=function(e){var t,r=this,$=a.$$p,o=$||n;return a.$$p=null,t=[e,o],r.name=t[0],r.body=t[1],c.get("Template")["$[]="](e,r)},s.$inspect=function(){var e=this;return"#<Template: '"+e.name+"'>"},s.$render=function(e){var t,n,r=this;return null==e&&(e=r),(t=(n=e).$instance_exec,t.$$p=r.body.$to_proc(),t).call(n,c.get("OutputBuffer").$new())},function(t,$super){function $(){}{var o=$=r(t,$super,"OutputBuffer",$),a=o.$$proto;o.$$scope}return a.buffer=n,a.$initialize=function(){var e=this;return e.buffer=[]},a.$append=function(e){var t=this;return t.buffer["$<<"](e)},e.defn(o,"$append=",a.$append),a.$join=function(){var e=this;return e.buffer.$join()},n&&"join"}(i,null)}(t,null)},Opal.modules.erb=function(e){e.dynamic_require_severity="warning";var t=e.top,n=(e.nil,e.breaker,e.slice,e.klass),r=e.module;return e.add_stubs(["$require","$module_function"]),t.$require("template"),function(t,$super){function $(){}{var o=$=n(t,$super,"ERB",$);o.$$proto,o.$$scope}return function(t){var n=r(t,"Util"),$=n.$$proto,o=(n.$$scope,{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),a=/[&<>"']/g;$.$html_escape=function(e){return(""+e).replace(a,function(e){return o[e]})},e.defn(n,"$h",$.$html_escape),n.$module_function("h"),n.$module_function("html_escape"),e.donate(n,["$html_escape","$h"])}(o)}(t,null)},Opal.modules["rspec/core/formatters/html_printer"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$require","$include","$puts","$indentation_style","$h","$sprintf","$[]","$==","$<<","$>","$flush","$private","$*","$-"]),t.$require("erb"),function(t){{var o=r(t,"RSpec");o.$$proto,o.$$scope}!function(t){{var o=r(t,"Core");o.$$proto,o.$$scope}!function(t){{var o=r(t,"Formatters");o.$$proto,o.$$scope}!function(t,$super){function r(){}var o=r=$(t,$super,"HtmlPrinter",r),a=o.$$proto,i=o.$$scope;return a.output=n,o.$include(i.get("ERB").$$scope.get("Util")),a.$initialize=function(e){var t=this;return t.output=e},a.$print_html_start=function(){var e=this;return e.output.$puts(i.get("HTML_HEADER")),e.output.$puts(i.get("REPORT_HEADER"))},a.$print_example_group_end=function(){var e=this;return e.output.$puts("  </dl>"),e.output.$puts("</div>")},a.$print_example_group_start=function(e,t,n){var r=this;return r.output.$puts('<div id="div_group_'+e+'" class="example_group passed">'),r.output.$puts("  <dl "+r.$indentation_style(n)+">"),r.output.$puts('  <dt id="example_group_'+e+'" class="passed">'+r.$h(t)+"</dt>")},a.$print_example_passed=function(e,t){var r=this,$=n;return $=r.$sprintf("%.5f",t),r.output.$puts('    <dd class="example passed"><span class="passed_spec_name">'+r.$h(e)+"</span><span class='duration'>"+$+"s</span></dd>")},a.$print_example_failed=function(e,t,r,$,o,a,i){var s=this,c=n;return null==i&&(i=!1),c=s.$sprintf("%.5f",r),s.output.$puts('    <dd class="example '+function(){return e!==!1&&e!==n?"pending_fixed":"failed"}()+'">'),s.output.$puts('      <span class="failed_spec_name">'+s.$h(t)+"</span>"),s.output.$puts('      <span class="duration">'+c+"s</span>"),s.output.$puts('      <div class="failure" id="failure_'+$+'">'),o!==!1&&o!==n&&(s.output.$puts('        <div class="message"><pre>'+s.$h(o["$[]"]("message"))+"</pre></div>"),s.output.$puts(i!==!1&&i!==n?'        <div class="backtrace"><pre>'+s.$h(o["$[]"]("backtrace"))+"</pre></div>":'        <div class="backtrace"><pre>'+o["$[]"]("backtrace")+"</pre></div>")),a!==!1&&a!==n&&s.output.$puts(a),s.output.$puts("      </div>"),s.output.$puts("    </dd>")},a.$print_example_pending=function(e,t){var n=this;return n.output.$puts('    <dd class="example not_implemented"><span class="not_implemented_spec_name">'+n.$h(e)+" (PENDING: "+n.$h(t)+")</span></dd>")},a.$print_summary=function(e,t,r,$,o){var a=this,i=n,s=n;return e!==!1&&e!==n?i="This was a dry-run":(i=""+r+" example"+function(){return r["$=="](1)?n:"s"}()+", ",i["$<<"](""+$+" failure"+function(){return $["$=="](1)?n:"s"}()),o["$>"](0)&&i["$<<"](", "+o+" pending")),s=a.$sprintf("%.5f",t),a.output.$puts('<script type="text/javascript">document.getElementById(\'duration\').innerHTML = "Finished in <strong>'+s+' seconds</strong>";</script>'),a.output.$puts('<script type="text/javascript">document.getElementById(\'totals\').innerHTML = "'+i+'";</script>'),a.output.$puts("</div>"),a.output.$puts("</div>"),a.output.$puts("</body>"),a.output.$puts("</html>")},a.$flush=function(){var e=this;return e.output.$flush()},a.$move_progress=function(e){var t=this;return t.output.$puts('    <script type="text/javascript">moveProgressBar(\''+e+"');</script>"),t.output.$flush()},a.$make_header_red=function(){var e=this;return e.output.$puts("    <script type=\"text/javascript\">makeRed('rspec-header');</script>")},a.$make_header_yellow=function(){var e=this;return e.output.$puts("    <script type=\"text/javascript\">makeYellow('rspec-header');</script>")},a.$make_example_group_header_red=function(e){var t=this;return t.output.$puts('    <script type="text/javascript">makeRed(\'div_group_'+e+"');</script>"),t.output.$puts('    <script type="text/javascript">makeRed(\'example_group_'+e+"');</script>")},a.$make_example_group_header_yellow=function(e){var t=this;return t.output.$puts('    <script type="text/javascript">makeYellow(\'div_group_'+e+"');</script>"),t.output.$puts('    <script type="text/javascript">makeYellow(\'example_group_'+e+"');</script>")},o.$private(),a.$indentation_style=function(e){return'style="margin-left: '+e["$-"](1)["$*"](15)+'px;"'},e.cdecl(i,"REPORT_HEADER",'<div class="rspec-report">\n\n<div id="rspec-header">\n  <div id="label">\n    <h1>RSpec Code Examples</h1>\n  </div>\n\n  <div id="display-filters">\n    <input id="passed_checkbox"  name="passed_checkbox"  type="checkbox" checked="checked" onchange="apply_filters()" value="1" /> <label for="passed_checkbox">Passed</label>\n    <input id="failed_checkbox"  name="failed_checkbox"  type="checkbox" checked="checked" onchange="apply_filters()" value="2" /> <label for="failed_checkbox">Failed</label>\n    <input id="pending_checkbox" name="pending_checkbox" type="checkbox" checked="checked" onchange="apply_filters()" value="3" /> <label for="pending_checkbox">Pending</label>\n  </div>\n\n  <div id="summary">\n    <p id="totals">&#160;</p>\n    <p id="duration">&#160;</p>\n  </div>\n</div>\n\n\n<div class="results">\n'),e.cdecl(i,"GLOBAL_SCRIPTS","\nfunction addClass(element_id, classname) {\n  document.getElementById(element_id).className += (\" \" + classname);\n}\n\nfunction removeClass(element_id, classname) {\n  var elem = document.getElementById(element_id);\n  var classlist = elem.className.replace(classname,'');\n  elem.className = classlist;\n}\n\nfunction moveProgressBar(percentDone) {\n  document.getElementById(\"rspec-header\").style.width = percentDone +\"%\";\n}\n\nfunction makeRed(element_id) {\n  removeClass(element_id, 'passed');\n  removeClass(element_id, 'not_implemented');\n  addClass(element_id,'failed');\n}\n\nfunction makeYellow(element_id) {\n  var elem = document.getElementById(element_id);\n  if (elem.className.indexOf(\"failed\") == -1) {  // class doesn't includes failed\n    if (elem.className.indexOf(\"not_implemented\") == -1) { // class doesn't include not_implemented\n      removeClass(element_id, 'passed');\n      addClass(element_id,'not_implemented');\n    }\n  }\n}\n\nfunction apply_filters() {\n  var passed_filter = document.getElementById('passed_checkbox').checked;\n  var failed_filter = document.getElementById('failed_checkbox').checked;\n  var pending_filter = document.getElementById('pending_checkbox').checked;\n\n  assign_display_style(\"example passed\", passed_filter);\n  assign_display_style(\"example failed\", failed_filter);\n  assign_display_style(\"example not_implemented\", pending_filter);\n\n  assign_display_style_for_group(\"example_group passed\", passed_filter);\n  assign_display_style_for_group(\"example_group not_implemented\", pending_filter, pending_filter || passed_filter);\n  assign_display_style_for_group(\"example_group failed\", failed_filter, failed_filter || pending_filter || passed_filter);\n}\n\nfunction get_display_style(display_flag) {\n  var style_mode = 'none';\n  if (display_flag == true) {\n    style_mode = 'block';\n  }\n  return style_mode;\n}\n\nfunction assign_display_style(classname, display_flag) {\n  var style_mode = get_display_style(display_flag);\n  var elems = document.getElementsByClassName(classname)\n  for (var i=0; i<elems.length;i++) {\n    elems[i].style.display = style_mode;\n  }\n}\n\nfunction assign_display_style_for_group(classname, display_flag, subgroup_flag) {\n  var display_style_mode = get_display_style(display_flag);\n  var subgroup_style_mode = get_display_style(subgroup_flag);\n  var elems = document.getElementsByClassName(classname)\n  for (var i=0; i<elems.length;i++) {\n    var style_mode = display_style_mode;\n    if ((display_flag != subgroup_flag) && (elems[i].getElementsByTagName('dt')[0].innerHTML.indexOf(\", \") != -1)) {\n      elems[i].style.display = subgroup_style_mode;\n    } else {\n      elems[i].style.display = display_style_mode;\n    }\n  }\n}\n"),e.cdecl(i,"GLOBAL_STYLES",'#rspec-header {\n  background: #65C400; color: #fff; height: 4em;\n}\n\n.rspec-report h1 {\n  margin: 0px 10px 0px 10px;\n  padding: 10px;\n  font-family: "Lucida Grande", Helvetica, sans-serif;\n  font-size: 1.8em;\n  position: absolute;\n}\n\n#label {\n  float:left;\n}\n\n#display-filters {\n  float:left;\n  padding: 28px 0 0 40%;\n  font-family: "Lucida Grande", Helvetica, sans-serif;\n}\n\n#summary {\n  float:right;\n  padding: 5px 10px;\n  font-family: "Lucida Grande", Helvetica, sans-serif;\n  text-align: right;\n}\n\n#summary p {\n  margin: 0 0 0 2px;\n}\n\n#summary #totals {\n  font-size: 1.2em;\n}\n\n.example_group {\n  margin: 0 10px 5px;\n  background: #fff;\n}\n\ndl {\n  margin: 0; padding: 0 0 5px;\n  font: normal 11px "Lucida Grande", Helvetica, sans-serif;\n}\n\ndt {\n  padding: 3px;\n  background: #65C400;\n  color: #fff;\n  font-weight: bold;\n}\n\ndd {\n  margin: 5px 0 5px 5px;\n  padding: 3px 3px 3px 18px;\n}\n\ndd .duration {\n  padding-left: 5px;\n  text-align: right;\n  right: 0px;\n  float:right;\n}\n\ndd.example.passed {\n  border-left: 5px solid #65C400;\n  border-bottom: 1px solid #65C400;\n  background: #DBFFB4; color: #3D7700;\n}\n\ndd.example.not_implemented {\n  border-left: 5px solid #FAF834;\n  border-bottom: 1px solid #FAF834;\n  background: #FCFB98; color: #131313;\n}\n\ndd.example.pending_fixed {\n  border-left: 5px solid #0000C2;\n  border-bottom: 1px solid #0000C2;\n  color: #0000C2; background: #D3FBFF;\n}\n\ndd.example.failed {\n  border-left: 5px solid #C20000;\n  border-bottom: 1px solid #C20000;\n  color: #C20000; background: #FFFBD3;\n}\n\n\ndt.not_implemented {\n  color: #000000; background: #FAF834;\n}\n\ndt.pending_fixed {\n  color: #FFFFFF; background: #C40D0D;\n}\n\ndt.failed {\n  color: #FFFFFF; background: #C40D0D;\n}\n\n\n#rspec-header.not_implemented {\n  color: #000000; background: #FAF834;\n}\n\n#rspec-header.pending_fixed {\n  color: #FFFFFF; background: #C40D0D;\n}\n\n#rspec-header.failed {\n  color: #FFFFFF; background: #C40D0D;\n}\n\n\n.backtrace {\n  color: #000;\n  font-size: 12px;\n}\n\na {\n  color: #BE5C00;\n}\n\n/* Ruby code, style similar to vibrant ink */\n.ruby {\n  font-size: 12px;\n  font-family: monospace;\n  color: white;\n  background-color: black;\n  padding: 0.1em 0 0.2em 0;\n}\n\n.ruby .keyword { color: #FF6600; }\n.ruby .constant { color: #339999; }\n.ruby .attribute { color: white; }\n.ruby .global { color: white; }\n.ruby .module { color: white; }\n.ruby .class { color: white; }\n.ruby .string { color: #66FF00; }\n.ruby .ident { color: white; }\n.ruby .method { color: #FFCC00; }\n.ruby .number { color: white; }\n.ruby .char { color: white; }\n.ruby .comment { color: #9933CC; }\n.ruby .symbol { color: white; }\n.ruby .regex { color: #44B4CC; }\n.ruby .punct { color: white; }\n.ruby .escape { color: white; }\n.ruby .interp { color: white; }\n.ruby .expr { color: white; }\n\n.ruby .offending { background-color: gray; }\n.ruby .linenum {\n  width: 75px;\n  padding: 0.1em 1em 0.2em 0;\n  color: #000000;\n  background-color: #FFFBD3;\n}\n'),e.cdecl(i,"HTML_HEADER",'<!DOCTYPE html>\n<html lang=\'en\'>\n<head>\n  <title>RSpec results</title>\n  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />\n  <meta http-equiv="Expires" content="-1" />\n  <meta http-equiv="Pragma" content="no-cache" />\n  <style type="text/css">\n  body {\n    margin: 0;\n    padding: 0;\n    background: #fff;\n    font-size: 80%;\n  }\n  </style>\n  <script type="text/javascript">\n    // <![CDATA[\n'+i.get("GLOBAL_SCRIPTS")+'\n    // ]]>\n  </script>\n  <style type="text/css">\n'+i.get("GLOBAL_STYLES")+"\n  </style>\n</head>\n<body>\n")}(o,null)}(o)}(o)}(t)},Opal.modules.coderay=function(e){e.dynamic_require_severity="warning";{var t=(e.top,e.nil);e.breaker,e.slice}return t},Opal.modules["rspec/core/formatters/snippet_extractor"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass,o=e.hash2,a=e.gvars,i=e.range;return e.add_stubs(["$html","$scan","$require","$new","$snippet_for","$[]","$convert","$post_process","$=~","$to_i","$lines_around","$file?","$split","$read","$max","$-","$min","$+","$length","$join","$each_with_index","$==","$<<"]),function(t){{var s=r(t,"RSpec");s.$$proto,s.$$scope}!function(t){{var s=r(t,"Core");s.$$proto,s.$$scope}!function(t){{var s=r(t,"Formatters");s.$$proto,s.$$scope}!function(t,$super){function r(){}var s=r=$(t,$super,"SnippetExtractor",r),c=s.$$proto,l=s.$$scope;!function(e,$super){function t(){}{var r=t=$(e,$super,"NullConverter",t),o=r.$$proto;r.$$scope}return o.$convert=function(e){return""+e+'\n<span class="comment"># Install the coderay gem to get syntax highlighting</span>'},n&&"convert"}(s,null),function(e,$super){function t(){}var r=t=$(e,$super,"CoderayConverter",t),a=r.$$proto,i=r.$$scope;return a.$convert=function(e){return i.get("CodeRay").$scan(e,"ruby").$html(o(["line_numbers"],{line_numbers:!1}))},n&&"convert"}(s,null);try{s.$require("coderay"),e.cvars["@@converter"]=l.get("CoderayConverter").$new()}catch(u){if(!e.rescue(u,[l.get("LoadError")]))throw u;
e.cvars["@@converter"]=l.get("NullConverter").$new()}return c.$snippet=function(t){var r,$=this,o=n,a=n,i=n;return r=e.to_ary($.$snippet_for(t["$[]"](0))),o=null==r[0]?n:r[0],a=null==r[1]?n:r[1],i=(null==(r=e.cvars["@@converter"])?n:r).$convert(o),$.$post_process(i,a)},c.$snippet_for=function(e){var t,r=this,$=n,o=n;return(t=e["$=~"](/(.*):(\d+)/))===n||t.$$is_boolean&&1!=t?["# Couldn't get snippet for "+e,1]:($=(t=a["~"])===n?n:t["$[]"](1),o=((t=a["~"])===n?n:t["$[]"](2)).$to_i(),[r.$lines_around($,o),o])},c.$lines_around=function(t,r){var $,o=n,a=n,s=n,c=n;try{return($=l.get("File")["$file?"](t))===n||$.$$is_boolean&&1!=$?"# Couldn't get snippet for "+t:(o=l.get("File").$read(t).$split("\n"),a=[0,r["$-"](3)].$max(),s=[r["$+"](1),o.$length()["$-"](1)].$min(),c=[],c.$join("\n"),o["$[]"](i(a,s,!1)).$join("\n"))}catch(u){if(e.rescue(u,[l.get("SecurityError")]))return"# Couldn't get snippet for "+t;throw u}},c.$post_process=function(e,t){var r,$,o,a=this,i=n;return i=[],(r=($=e.$split("\n")).$each_with_index,r.$$p=(o=function(e,r){var $=(o.$$s||this,n);return null==e&&(e=n),null==r&&(r=n),$='<span class="linenum">'+t["$+"](r)["$-"](2)+"</span>"+e,r["$=="](2)&&($='<span class="offending">'+$+"</span>"),i["$<<"]($)},o.$$s=a,o),r).call($),i.$join("\n")},n&&"post_process"}(s,null)}(s)}(s)}(t)},Opal.modules["rspec/core/formatters/html_formatter"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass,a=e.hash2;return e.add_stubs(["$require","$new","$private","$public","$print_html_start","$flush","$+","$==","$example_group_number","$print_example_group_end","$print_example_group_start","$description","$size","$parent_groups","$move_progress","$percent_done","$print_example_passed","$[]","$execution_result","$make_header_red","$make_example_group_header_red","$metadata","$message","$join","$format_backtrace","$backtrace","$extra_failure_content","$print_example_failed","$make_header_yellow","$make_example_group_header_yellow","$print_example_pending","$map","$backtrace_line","$backtrace_formatter","$configuration","$compact!","$snippet","$>","$to_f","$/","$to_i","$*","$example_number","$print_summary","$dry_run?"]),t.$require("rspec/core/formatters/base_text_formatter"),t.$require("rspec/core/formatters/html_printer"),function(t){{var i=$(t,"RSpec");i.$$proto,i.$$scope}!function(t){{var i=$(t,"Core");i.$$proto,i.$$scope}!function(t){var i=$(t,"Formatters"),s=(i.$$proto,i.$$scope);!function(t,$super){function $(){}var i,s,c,l,u,_,p=$=o(t,$super,"HtmlFormatter",$),d=p.$$proto,f=p.$$scope;return d.example_group_number=d.example_number=d.printer=d.header_red=d.example_group_red=d.failed_examples=d.snippet_extractor=d.example_count=n,d.$initialize=i=function(t){{var r=this;i.$$p}return i.$$p=null,e.find_super_dispatcher(r,"initialize",i,null).apply(r,[t]),r.example_group_number=0,r.example_number=0,r.header_red=n,r.printer=f.get("HtmlPrinter").$new(t)},p.$private(),d.$method_missing=s=function(e,t){s.$$p;return t=r.call(arguments,1),s.$$p=null,n},p.$public(),d.$message=function(){return n},d.$example_group_number=function(){var e=this;return e.example_group_number},d.$example_number=function(){var e=this;return e.example_number},d.$start=c=function(t){{var n=this;c.$$p}return c.$$p=null,e.find_super_dispatcher(n,"start",c,null).apply(n,[t]),n.printer.$print_html_start(),n.printer.$flush()},d.$example_group_started=l=function(t){{var n=this;l.$$p}return l.$$p=null,e.find_super_dispatcher(n,"example_group_started",l,null).apply(n,[t]),n.example_group_red=!1,n.example_group_number=n.example_group_number["$+"](1),n.$example_group_number()["$=="](1)||n.printer.$print_example_group_end(),n.printer.$print_example_group_start(n.$example_group_number(),t.$description(),t.$parent_groups().$size()),n.printer.$flush()},d.$start_dump=function(){var e=this;return e.printer.$print_example_group_end(),e.printer.$flush()},d.$example_started=u=function(t){{var n=this;u.$$p}return u.$$p=null,e.find_super_dispatcher(n,"example_started",u,null).apply(n,[t]),n.example_number=n.example_number["$+"](1)},d.$example_passed=function(e){var t=this;return t.printer.$move_progress(t.$percent_done()),t.printer.$print_example_passed(e.$description(),e.$execution_result()["$[]"]("run_time")),t.printer.$flush()},d.$example_failed=_=function(t){var r,$=this,o=(_.$$p,n),i=n,s=n;return _.$$p=null,e.find_super_dispatcher($,"example_failed",_,null).apply($,[t]),((r=$.header_red)===n||r.$$is_boolean&&1!=r)&&($.header_red=!0,$.printer.$make_header_red()),((r=$.example_group_red)===n||r.$$is_boolean&&1!=r)&&($.example_group_red=!0,$.printer.$make_example_group_header_red($.$example_group_number())),$.printer.$move_progress($.$percent_done()),o=t.$metadata()["$[]"]("execution_result")["$[]"]("exception"),i=function(){return o!==!1&&o!==n?a(["message","backtrace"],{message:o.$message(),backtrace:$.$format_backtrace(o.$backtrace(),t).$join("\n")}):!1}(),s=$.$extra_failure_content(o),$.printer.$print_example_failed(t.$execution_result()["$[]"]("pending_fixed"),t.$description(),t.$execution_result()["$[]"]("run_time"),$.failed_examples.$size(),i,function(){return(r=s["$=="](""))===n||r.$$is_boolean&&1!=r?s:!1}(),!0),$.printer.$flush()},d.$example_pending=function(e){var t,r=this;return((t=r.header_red)===n||t.$$is_boolean&&1!=t)&&r.printer.$make_header_yellow(),((t=r.example_group_red)===n||t.$$is_boolean&&1!=t)&&r.printer.$make_example_group_header_yellow(r.$example_group_number()),r.printer.$move_progress(r.$percent_done()),r.printer.$print_example_pending(e.$description(),e.$metadata()["$[]"]("execution_result")["$[]"]("pending_message")),r.printer.$flush()},d.$extra_failure_content=function(e){var t,r,$,o=this,a=n;return o.$require("rspec/core/formatters/snippet_extractor"),a=(t=(r=e.$backtrace()).$map,t.$$p=($=function(e){var t=$.$$s||this;return null==e&&(e=n),t.$configuration().$backtrace_formatter().$backtrace_line(e)},$.$$s=o,$),t).call(r),a["$compact!"](),(t=o.snippet_extractor)!==!1&&t!==n?t:o.snippet_extractor=f.get("SnippetExtractor").$new(),'    <pre class="ruby"><code>'+o.snippet_extractor.$snippet(a)+"</code></pre>"},d.$percent_done=function(){var e=this,t=n;return t=100,e.example_count["$>"](0)&&(t=e.$example_number().$to_f()["$/"](e.example_count.$to_f())["$*"](1e3).$to_i()["$/"](10).$to_f()),t},d.$dump_failures=function(){return n},d.$dump_pending=function(){return n},d.$dump_summary=function(e,t,n,r){var $=this;return $.printer.$print_summary($["$dry_run?"](),e,t,n,r),$.printer.$flush()},n&&"dump_summary"}(i,s.get("BaseTextFormatter"))}(i)}(i)}(t)},Opal.modules["rspec/core/formatters/progress_formatter"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$require","$print","$output","$success_color","$pending_color","$failure_color","$puts"]),t.$require("rspec/core/formatters/base_text_formatter"),function(t){{var o=r(t,"RSpec");o.$$proto,o.$$scope}!function(t){{var o=r(t,"Core");o.$$proto,o.$$scope}!function(t){var o=r(t,"Formatters"),a=(o.$$proto,o.$$scope);!function(t,$super){function r(){}{var o,a,i,s,c=r=$(t,$super,"ProgressFormatter",r),l=c.$$proto;c.$$scope}return l.$example_passed=o=function(t){{var n=this;o.$$p}return o.$$p=null,e.find_super_dispatcher(n,"example_passed",o,null).apply(n,[t]),n.$output().$print(n.$success_color("."))},l.$example_pending=a=function(t){{var n=this;a.$$p}return a.$$p=null,e.find_super_dispatcher(n,"example_pending",a,null).apply(n,[t]),n.$output().$print(n.$pending_color("*"))},l.$example_failed=i=function(t){{var n=this;i.$$p}return i.$$p=null,e.find_super_dispatcher(n,"example_failed",i,null).apply(n,[t]),n.$output().$print(n.$failure_color("F"))},l.$start_dump=s=function(){{var t=this;s.$$p}return s.$$p=null,e.find_super_dispatcher(t,"start_dump",s,null).apply(t,[]),t.$output().$puts()},n&&"start_dump"}(o,a.get("BaseTextFormatter"))}(o)}(o)}(t)},Opal.modules.json=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.hash2,o=e.klass;return e.add_stubs(["$new","$push","$[]=","$[]","$create_id","$json_create","$attr_accessor","$create_id=","$===","$parse","$generate","$from_object","$to_json","$responds_to?","$to_io","$write","$to_s","$to_a","$strftime"]),function(t){function o(t,r){switch(typeof t){case"string":return t;case"number":return t;case"boolean":return!!t;case"null":return n;case"object":if(!t)return n;if(t.$$is_array){for(var $=r.array_class.$new(),a=0,i=t.length;i>a;a++)$.$push(o(t[a],r));return $}var s=r.object_class.$new();for(var l in t)u.call(t,l)&&s["$[]="](l,o(t[l],r));var _;return(_=s["$[]"](c.get("JSON").$create_id()))!=n?(_=e.cget(_),_.$json_create(s)):s}}var a,i,s=r(t,"JSON"),c=(s.$$proto,s.$$scope),l=JSON.parse,u=e.hasOwnProperty;!function(e){e.$$scope,e.$$proto;return e.$attr_accessor("create_id")}(s.$singleton_class()),a=["json_class"],i=s,i["$create_id="].apply(i,a),a[a.length-1],e.defs(s,"$[]",function(e,t){var r,o=this;return null==t&&(t=$([],{})),(r=c.get("String")["$==="](e))===n||r.$$is_boolean&&1!=r?o.$generate(e,t):o.$parse(e,t)}),e.defs(s,"$parse",function(e,t){var n=this;return null==t&&(t=$([],{})),n.$from_object(l(e),t)}),e.defs(s,"$parse!",function(e,t){var n=this;return null==t&&(t=$([],{})),n.$parse(e,t)}),e.defs(s,"$from_object",function(e,t){var r,a,i;return null==t&&(t=$([],{})),r="object_class",a=t,(i=a["$[]"](r))!==!1&&i!==n?i:a["$[]="](r,c.get("Hash")),r="array_class",a=t,(i=a["$[]"](r))!==!1&&i!==n?i:a["$[]="](r,c.get("Array")),o(e,t.map)}),e.defs(s,"$generate",function(e,t){return null==t&&(t=$([],{})),e.$to_json(t)}),e.defs(s,"$dump",function(e,t,r){var $,o=this,a=n;return null==t&&(t=n),null==r&&(r=n),a=o.$generate(e),t!==!1&&t!==n?(($=t["$responds_to?"]("to_io"))===n||$.$$is_boolean&&1!=$||(t=t.$to_io()),t.$write(a),t):a})}(t),function(t,$super){function r(){}{var $=r=o(t,$super,"Object",r);$.$$proto,$.$$scope}return e.defn($,"$to_json",function(){var e=this;return e.$to_s().$to_json()}),n&&"to_json"}(t,null),function(t){{var n=r(t,"Enumerable"),$=n.$$proto;n.$$scope}$.$to_json=function(){var e=this;return e.$to_a().$to_json()},e.donate(n,["$to_json"])}(t),function(e,$super){function t(){}{var r=t=o(e,$super,"Array",t),$=r.$$proto;r.$$scope}return $.$to_json=function(){for(var e=this,t=[],n=0,r=e.length;r>n;n++)t.push(e[n].$to_json());return"["+t.join(", ")+"]"},n&&"to_json"}(t,null),function(e,$super){function t(){}{var r=t=o(e,$super,"Boolean",t),$=r.$$proto;r.$$scope}return $.$to_json=function(){var e=this;return 1==e?"true":"false"},n&&"to_json"}(t,null),function(e,$super){function t(){}{var r=t=o(e,$super,"Hash",t),$=r.$$proto;r.$$scope}return $.$to_json=function(){for(var e=this,t=[],n=e.keys,r=e.map,$=0,o=n.length;o>$;$++){var a=n[$];t.push(a.$to_s().$to_json()+":"+r[a.$hash()].$to_json())}return"{"+t.join(", ")+"}"},n&&"to_json"}(t,null),function(e,$super){function t(){}{var r=t=o(e,$super,"NilClass",t),$=r.$$proto;r.$$scope}return $.$to_json=function(){return"null"},n&&"to_json"}(t,null),function(e,$super){function t(){}{var r=t=o(e,$super,"Numeric",t),$=r.$$proto;r.$$scope}return $.$to_json=function(){var e=this;return e.toString()},n&&"to_json"}(t,null),function(t,$super){function n(){}{var r=n=o(t,$super,"String",n),$=r.$$proto;r.$$scope}return e.defn(r,"$to_json",$.$inspect)}(t,null),function(e,$super){function t(){}{var r=t=o(e,$super,"Time",t),$=r.$$proto;r.$$scope}return $.$to_json=function(){var e=this;return e.$strftime("%FT%T%z").$to_json()},n&&"to_json"}(t,null),function(e,$super){function t(){}{var r=t=o(e,$super,"Date",t),$=r.$$proto;r.$$scope}return $.$to_json=function(){var e=this;return e.$to_s().$to_json()},$.$as_json=function(){var e=this;return e.$to_s()},n&&"as_json"}(t,null)},Opal.modules["rspec/core/formatters/json_formatter"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass,a=e.hash2,i=e.gvars;return e.add_stubs(["$require","$attr_reader","$<<","$[]","$[]=","$summary_line","$mute_profile_output?","$dump_profile","$pluralize","$>","$map","$tap","$exception","$name","$class","$message","$backtrace","$format_example","$examples","$write","$output","$to_json","$===","$!","$==","$close","$dump_profile_slowest_examples","$dump_profile_slowest_example_groups","$slowest_examples","$execution_result","$update","$slowest_groups","$private","$description","$full_description","$metadata"]),t.$require("rspec/core/formatters/base_formatter"),t.$require("json"),function(t){{var s=$(t,"RSpec");s.$$proto,s.$$scope}!function(t){{var s=$(t,"Core");s.$$proto,s.$$scope}!function(t){var s=$(t,"Formatters"),c=(s.$$proto,s.$$scope);!function(t,$super){function $(){}var s,c,l,u=$=o(t,$super,"JsonFormatter",$),_=u.$$proto,p=u.$$scope;return _.output_hash=n,u.$attr_reader("output_hash"),_.$initialize=s=function(){var t=r.call(arguments,0),n=this,$=s.$$p;return s.$$p=null,e.find_super_dispatcher(n,"initialize",s,$).apply(n,t),n.output_hash=a([],{})},_.$message=function(e){var t,r,$,o=this;return(t="messages",r=o.output_hash,($=r["$[]"](t))!==!1&&$!==n?$:r["$[]="](t,[]))["$<<"](e)},_.$dump_summary=c=function(t,r,$,o){{var i,s=this;c.$$p}return c.$$p=null,e.find_super_dispatcher(s,"dump_summary",c,null).apply(s,[t,r,$,o]),s.output_hash["$[]="]("summary",a(["duration","example_count","failure_count","pending_count"],{duration:t,example_count:r,failure_count:$,pending_count:o})),s.output_hash["$[]="]("summary_line",s.$summary_line(r,$,o)),(i=s["$mute_profile_output?"]($))===n||i.$$is_boolean&&1!=i?s.$dump_profile():n},_.$summary_line=function(e,t,r){var $=this,o=n;return o=$.$pluralize(e,"example"),o["$<<"](", ")["$<<"]($.$pluralize(t,"failure")),r["$>"](0)&&o["$<<"](", "+r+" pending"),o},_.$stop=l=function(){var t,$,o,i=r.call(arguments,0),s=this,c=l.$$p;return l.$$p=null,e.find_super_dispatcher(s,"stop",l,c).apply(s,i),s.output_hash["$[]="]("examples",(t=($=s.$examples()).$map,t.$$p=(o=function(e){var t,r,$,i=o.$$s||this;return null==e&&(e=n),(t=(r=i.$format_example(e)).$tap,t.$$p=($=function(t){var r,o=($.$$s||this,n);return null==t&&(t=n),(r=o=e.$exception())===n||r.$$is_boolean&&1!=r?n:t["$[]="]("exception",a(["class","message","backtrace"],{"class":o.$class().$name(),message:o.$message(),backtrace:o.$backtrace()}))},$.$$s=i,$),t).call(r)},o.$$s=s,o),t).call($))},_.$close=function(){var e,t,r=this;return null==i.stdout&&(i.stdout=n),r.$output().$write(r.output_hash.$to_json()),t=p.get("IO")["$==="](r.$output()),(e=t!==!1&&t!==n?r.$output()["$=="](i.stdout)["$!"]():t)===n||e.$$is_boolean&&1!=e?n:r.$output().$close()},_.$dump_profile=function(){var e=this;return e.output_hash["$[]="]("profile",a([],{})),e.$dump_profile_slowest_examples(),e.$dump_profile_slowest_example_groups()},_.$dump_profile_slowest_examples=function(){var e,t,r,$=this,o=n;return $.output_hash["$[]="]("profile",a([],{})),o=$.$slowest_examples(),$.output_hash["$[]"]("profile")["$[]="]("examples",(e=(t=o["$[]"]("examples")).$map,e.$$p=(r=function(e){var t,$,o,a=r.$$s||this;return null==e&&(e=n),(t=($=a.$format_example(e)).$tap,t.$$p=(o=function(t){o.$$s||this;return null==t&&(t=n),t["$[]="]("run_time",e.$execution_result()["$[]"]("run_time"))},o.$$s=a,o),t).call($)},r.$$s=$,r),e).call(t)),$.output_hash["$[]"]("profile")["$[]="]("slowest",o["$[]"]("slows")),$.output_hash["$[]"]("profile")["$[]="]("total",o["$[]"]("total"))},_.$dump_profile_slowest_example_groups=function(){var e,t,r,$,o=this;return e="profile",t=o.output_hash,(r=t["$[]"](e))!==!1&&r!==n?r:t["$[]="](e,a([],{})),o.output_hash["$[]"]("profile")["$[]="]("groups",(e=(t=o.$slowest_groups()).$map,e.$$p=($=function(e,t){$.$$s||this;return null==e&&(e=n),null==t&&(t=n),t.$update(a(["location"],{location:e}))},$.$$s=o,$),e).call(t))},u.$private(),_.$format_example=function(e){return a(["description","full_description","status","file_path","line_number"],{description:e.$description(),full_description:e.$full_description(),status:e.$execution_result()["$[]"]("status"),file_path:e.$metadata()["$[]"]("file_path"),line_number:e.$metadata()["$[]"]("line_number")})},n&&"format_example"}(s,c.get("BaseFormatter"))}(s)}(s)}(t)},Opal.modules["rspec/core/configuration"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=e.breaker,$=e.slice,o=e.module,a=e.klass,i=e.hash2,s=e.gvars,c=e.range;return e.add_stubs(["$require","$include","$define_method","$instance_variable_defined?","$instance_variable_get","$value_for","$deprecate","$alias_method","$define_predicate_for","$each","$has_key?","$raise","$[]","$deprecate_alias_key","$define_aliases","$attr_writer","$define_reader","$Array","$add_setting","$!","$equal?","$warn","$+","$inspect","$output_stream","$first_non_rspec_line","$warning","$attr_accessor","$attr_reader","$new","$force","$ordering_manager","$merge!","$warnings=","$clear","$delete","$class_eval","$send","$mock_with","$exclusion_patterns","$exclusion_patterns=","$inclusion_patterns","$inclusion_patterns=","$===","$to_s","$map","$respond_to?","$framework_name","$==","$assert_no_example_groups_defined","$configuration","$empty?","$expect_with","$expecting_with_rspec=","$any?","$-","$>","$length","$first","$push","$full_backtrace?","$full_backtrace=","$output_to_tty?","$windows_os?","$unshift","$filter_run","$to_i","$fetch","$filter","$union","$built_in_formatter","$custom_formatter","$<<","$formatters","$file_at","$add_formatter","$deprecation_stream","$is_a?","$flatten","$command","$running_in_drb?","$default_path","$files_to_run=","$get_files_to_run","$build_hash_from","$alias_example_to","$alias_it_behaves_like_to","$include_with_low_priority","$filter_manager","$include!","$inclusions","$exclude_with_low_priority","$exclude!","$exclusions","$include_or_extend_modules","$any_apply?","$<","$select","$directory?","$add_to_load_path","$>=","$to_f","$extend","$include?","$included_modules","$mock_framework","$expectation_frameworks","$load","$expand_path","$uniq","$files_to_run","$lambda","$__send__","$to_proc","$delegate_to_ordering_manager","$module_eval","$let","$deprecation_stream=","$private","$sort","$flat_map","$gsub","$gather_directories","$extract_location","$pattern","$=~","$escape","$split","$add_location","$last","$example_groups","$world","$tty?","$string_const?","$inject","$const_get","$path_for","$retry","$underscore_with_fix_for_non_standard_rspec_naming","$sub","$underscore","$dup","$gsub!","$tr!","$downcase!","$mkdir_p","$dirname"]),t.$require("fileutils"),t.$require("rspec/core/backtrace_formatter"),t.$require("rspec/core/ruby_project"),t.$require("rspec/core/formatters/deprecation_formatter"),function(t){{var l=o(t,"RSpec");l.$$proto,l.$$scope}!function(t){{var l=o(t,"Core");l.$$proto,l.$$scope}!function(t,$super){function l(){}var u,_,p,d,f,h,m=l=a(t,$super,"Configuration",l),g=m.$$proto,v=m.$$scope;return g.reporter=g.output_stream=g.spec_files_loaded=g.preferred_options=g.formatters=g.mock_framework=g.backtrace_formatter=g.expectation_frameworks=g.color=g.requires=g.profile_examples=g.format_docstrings_block=n,m.$include(v.get("RSpec").$$scope.get("Core").$$scope.get("Hooks")),function(e,$super){function t(){}{var r=t=a(e,$super,"MustBeConfiguredBeforeExampleGroupsError",t);r.$$proto,r.$$scope}return n}(m,v.get("StandardError")),e.defs(m,"$define_reader",function(e){var t,r,$,o=this;return(t=(r=o).$define_method,t.$$p=($=function(){var t,r=$.$$s||this,o=n;return o=function(){return(t=r["$instance_variable_defined?"]("@"+e))===n||t.$$is_boolean&&1!=t?n:r.$instance_variable_get("@"+e)}(),r.$value_for(e,o)},$.$$s=o,$),t).call(r,e)}),e.defs(m,"$deprecate_alias_key",function(){return v.get("RSpec").$deprecate("add_setting with :alias option",i(["replacement"],{replacement:":alias_with"}))}),e.defs(m,"$define_aliases",function(e,t){var n=this;return n.$alias_method(t,e),n.$alias_method(""+t+"=",""+e+"="),n.$define_predicate_for(t)}),e.defs(m,"$define_predicate_for",function(e){var t,r,o,a=this;return e=$.call(arguments,0),(t=(r=e).$each,t.$$p=(o=function(e){var t=o.$$s||this;return null==e&&(e=n),t.$alias_method(""+e+"?",e)},o.$$s=a,o),t).call(r)}),e.defs(m,"$add_setting",function(e,t){var r,$,o,a=this;return null==t&&(t=i([],{})),(r=t["$has_key?"]("default"))===n||r.$$is_boolean&&1!=r||a.$raise("Use the instance add_setting method if you want to set a default"),(r=t["$[]"]("alias"))===n||r.$$is_boolean&&1!=r?(a.$attr_writer(e),a.$define_reader(e),a.$define_predicate_for(e)):(a.$deprecate_alias_key(),a.$define_aliases(t["$[]"]("alias"),e)),(r=($=a.$Array(t["$[]"]("alias_with"))).$each,r.$$p=(o=function(t){var r=o.$$s||this;return null==t&&(t=n),r.$define_aliases(e,t)},o.$$s=a,o),r).call($)}),m.$add_setting("default_path"),m.$add_setting("drb"),m.$add_setting("drb_port"),m.$add_setting("error_stream"),m.$add_setting("deprecation_stream"),m.$add_setting("fail_fast"),m.$add_setting("dry_run"),m.$add_setting("failure_exit_code"),m.$define_reader("requires"),m.$define_reader("libs"),m.$define_reader("output_stream"),g["$output_stream="]=function(e){var t,r,$=this;return r=$.reporter,(t=r!==!1&&r!==n?e["$equal?"]($.output_stream)["$!"]():r)===n||t.$$is_boolean&&1!=t?$.output_stream=e:$.$warn("RSpec's reporter has already been initialized with "["$+"](""+$.$output_stream().$inspect()+" as the output stream, so your change to ")["$+"]("`output_stream` will be ignored. You should configure it earlier for ")["$+"]("it to take effect. (Called from "+v.get("CallerFilter").$first_non_rspec_line()+")"))},m.$add_setting("pattern",i(["alias_with"],{alias_with:"filename_pattern"})),g["$pattern="]=function(e){var t,r=this;return(t=r.spec_files_loaded)===n||t.$$is_boolean&&1!=t||v.get("RSpec").$warning("Configuring `pattern` to "+e+" has no effect since RSpec has already loaded the spec files."),r.pattern=e},e.defn(m,"$filename_pattern=",g["$pattern="]),m.$add_setting("profile_examples"),m.$add_setting("run_all_when_everything_filtered"),m.$add_setting("success_color"),m.$add_setting("pending_color"),m.$add_setting("failure_color"),m.$add_setting("default_color"),m.$add_setting("fixed_color"),m.$add_setting("detail_color"),m.$add_setting("show_failures_in_pending_blocks"),g["$treat_symbols_as_metadata_keys_with_true_values="]=function(){return v.get("RSpec").$deprecate("RSpec::Core::Configuration#treat_symbols_as_metadata_keys_with_true_values=")},m.$add_setting("tty"),m.$add_setting("include_or_extend_modules"),m.$add_setting("files_to_run"),m.$add_setting("expecting_with_rspec"),m.$attr_accessor("filter_manager"),m.$attr_reader("backtrace_formatter","ordering_manager"),e.defn(m,"$backtrace_cleaner",g.$backtrace_formatter),g.$initialize=function(){var e=this;return null==s.stderr&&(s.stderr=n),null==s.stdout&&(s.stdout=n),e.expectation_frameworks=[],e.include_or_extend_modules=[],e.mock_framework=n,e.files_to_run=[],e.formatters=[],e.color=!1,e.pattern="**/*_spec.rb",e.failure_exit_code=1,e.spec_files_loaded=!1,e.backtrace_formatter=v.get("BacktraceFormatter").$new(),e.default_path="spec",e.deprecation_stream=s.stderr,e.output_stream=s.stdout,e.reporter=n,e.filter_manager=v.get("FilterManager").$new(),e.ordering_manager=v.get("Ordering").$$scope.get("ConfigurationManager").$new(),e.preferred_options=i([],{}),e.failure_color="red",e.success_color="green",e.pending_color="yellow",e.default_color="white",e.fixed_color="blue",e.detail_color="cyan",e.profile_examples=!1,e.requires=[],e.libs=[]},g.$force=function(e){var t,r,$=this;return $.$ordering_manager().$force(e),$.preferred_options["$merge!"](e),t=[$.$value_for("warnings",n)],r=$,r["$warnings="].apply(r,t),t[t.length-1]},g.$reset=function(){var e=this;return e.spec_files_loaded=!1,e.reporter=n,e.formatters.$clear()},g.$add_setting=function(e,t){var r,$,o,a=this,s=n;return null==t&&(t=i([],{})),s=t.$delete("default"),(r=($=function(e){e.$$scope,e.$$proto;return e}(a.$singleton_class())).$class_eval,r.$$p=(o=function(){var n=o.$$s||this;return n.$add_setting(e,t)},o.$$s=a,o),r).call($),s!==!1&&s!==n?a.$send(""+e+"=",s):n},g.$mock_framework=function(){var e,t=this;return((e=t.mock_framework)===n||e.$$is_boolean&&1!=e)&&t.$mock_with("rspec"),t.mock_framework},g["$mock_framework="]=function(e){var t=this;return t.$mock_with(e)},g.$backtrace_exclusion_patterns=function(){var e=this;return e.backtrace_formatter.$exclusion_patterns()},g["$backtrace_exclusion_patterns="]=function(e){var t,n,r=this;return t=[e],n=r.backtrace_formatter,n["$exclusion_patterns="].apply(n,t),t[t.length-1]},g.$backtrace_inclusion_patterns=function(){var e=this;return e.backtrace_formatter.$inclusion_patterns()},g["$backtrace_inclusion_patterns="]=function(e){var t,n,r=this;return t=[e],n=r.backtrace_formatter,n["$inclusion_patterns="].apply(n,t),t[t.length-1]},g.$mock_with=u=function(t){var $,o,a,i,s=this,c=u.$$p,l=c||n,_=n,p=n,d=n,f=n;return u.$$p=null,_=function(){return p=t,v.get("Module")["$==="](p)?t:v.get("String")["$==="](p)||v.get("Symbol")["$==="](p)?(s.$require(function(){return p=t.$to_s(),/rspec/i["$==="](p)?"rspec/core/mocking/with_rspec":/mocha/i["$==="](p)?"rspec/core/mocking/with_mocha":/rr/i["$==="](p)?"rspec/core/mocking/with_rr":/flexmock/i["$==="](p)?"rspec/core/mocking/with_flexmock":"rspec/core/mocking/with_absolutely_nothing"}()),v.get("RSpec").$$scope.get("Core").$$scope.get("MockFrameworkAdapter")):n}(),$=e.to_ary((o=(a=[_,s.mock_framework]).$map,o.$$p=(i=function(e){{var t;i.$$s||this}return null==e&&(e=n),(t=e["$respond_to?"]("framework_name"))===n||t.$$is_boolean&&1!=t?"unnamed":e.$framework_name()},i.$$s=s,i),o).call(a)),d=null==$[0]?n:$[0],f=null==$[1]?n:$[1],d["$=="](f)||s.$assert_no_example_groups_defined("mock_framework"),l!==n&&((($=_["$respond_to?"]("configuration"))===n||$.$$is_boolean&&1!=$)&&s.$raise(""+_+" must respond to `configuration` so that mock_with can yield it."),e.yield1(l,_.$configuration())===r)?r.$v:s.mock_framework=_},g.$expectation_frameworks=function(){var e,t=this;return(e=t.expectation_frameworks["$empty?"]())===n||e.$$is_boolean&&1!=e||t.$expect_with("rspec"),t.expectation_frameworks},g["$expectation_framework="]=function(e){var t=this;return t.$expect_with(e)},g.$expect_with=_=function(t){var o,a,i,s=this,c=_.$$p,l=c||n,u=n;return t=$.call(arguments,0),_.$$p=null,u=(o=(a=t).$map,o.$$p=(i=function(t){var r,$,o=i.$$s||this,a=n;return null==t&&(t=n),function(){return a=t,v.get("Module")["$==="](a)?t:"rspec"["$==="](a)?(o.$require("rspec/expectations"),r=[!0],$=o,$["$expecting_with_rspec="].apply($,r),r[r.length-1],e.get("RSpec").$$scope.get("Matchers")):"stdlib"["$==="](a)?(o.$require("test/unit/assertions"),e.get("Test").$$scope.get("Unit").$$scope.get("Assertions")):o.$raise(v.get("ArgumentError"),""+t.$inspect()+" is not supported")}()},i.$$s=s,i),o).call(a),(o=u["$-"](s.expectation_frameworks)["$any?"]())===n||o.$$is_boolean&&1!=o||s.$assert_no_example_groups_defined("expect_with"),l!==n&&(u.$length()["$>"](1)&&s.$raise("expect_with only accepts a block with a single argument. Call expect_with "+u.$length()+" times, once with each argument, instead."),((o=u.$first()["$respond_to?"]("configuration"))===n||o.$$is_boolean&&1!=o)&&s.$raise(""+u.$first()+" must respond to `configuration` so that expect_with can yield it."),e.yield1(l,u.$first().$configuration())===r)?r.$v:(o=s.expectation_frameworks).$push.apply(o,[].concat(u))},g["$full_backtrace?"]=function(){var e=this;return e.backtrace_formatter["$full_backtrace?"]()},g["$full_backtrace="]=function(e){var t,n,r=this;return t=[e],n=r.backtrace_formatter,n["$full_backtrace="].apply(n,t),t[t.length-1]},g.$color=function(e){var t,r=this;return null==e&&(e=r.$output_stream()),(t=r["$output_to_tty?"](e))===n||t.$$is_boolean&&1!=t?!1:r.$value_for("color",r.color)},g["$color="]=function(e){var t,r,$=this;return e!==!1&&e!==n?(r=v.get("RSpec")["$windows_os?"](),(t=r!==!1&&r!==n?v.get("ENV")["$[]"]("ANSICON")["$!"]():r)===n||t.$$is_boolean&&1!=t?$.color=!0:(v.get("RSpec").$warning("You must use ANSICON 1.31 or later (http://adoxa.3eeweb.com/ansicon/) to use colour on Windows"),$.color=!1)):n},m.$alias_method("color_enabled","color"),m.$alias_method("color_enabled=","color="),m.$define_predicate_for("color_enabled","color"),g["$libs="]=function(e){var t,r,$,o=this;return(t=(r=e).$map,t.$$p=($=function(e){var t=$.$$s||this;return null==t.libs&&(t.libs=n),null==s.LOAD_PATH&&(s.LOAD_PATH=n),null==e&&(e=n),t.libs.$unshift(e),s.LOAD_PATH.$unshift(e)},$.$$s=o,$),t).call(r)},g["$requires="]=function(e){var t,r,$,o=this;return v.get("RSpec").$deprecate("RSpec::Core::Configuration#requires=(paths)",i(["replacement"],{replacement:"paths.each {|path| require path}"})),(t=(r=e).$map,t.$$p=($=function(e){var t=$.$$s||this;return null==e&&(e=n),t.$require(e)},$.$$s=o,$),t).call(r),o.requires=o.requires["$+"](e)},g["$line_numbers="]=function(e){var t,r,$,o=this;return o.$filter_run(i(["line_numbers"],{line_numbers:(t=(r=e).$map,t.$$p=($=function(e){$.$$s||this;return null==e&&(e=n),e.$to_i()},$.$$s=o,$),t).call(r)}))},g.$line_numbers=function(){var e=this;return e.$filter().$fetch("line_numbers",[])},g["$full_description="]=function(e){var t,r,$,o,a=this;return a.$filter_run(i(["full_description"],{full_description:(t=v.get("Regexp")).$union.apply(t,[].concat((r=($=a.$Array(e)).$map,r.$$p=(o=function(e){o.$$s||this;return null==e&&(e=n),v.get("Regexp").$new(e)},o.$$s=a,o),r).call($)))}))},g.$full_description=function(){var e=this;return e.$filter().$fetch("full_description",n)},g.$add_formatter=function(e,t){var r,o,a,i,s=this,c=n;return t=$.call(arguments,1),c=(r=(o=s.$built_in_formatter(e))!==!1&&o!==n?o:s.$custom_formatter(e))!==!1&&r!==n?r:s.$raise(v.get("ArgumentError"),"Formatter '"+e+"' unknown - maybe you meant 'documentation' or 'progress'?."),(r=t["$empty?"]())===n||r.$$is_boolean&&1!=r||t["$<<"](s.$output_stream()),s.$formatters()["$<<"]((r=c).$new.apply(r,[].concat((o=(a=t).$map,o.$$p=(i=function(e){var t,r=i.$$s||this;return null==e&&(e=n),(t=v.get("String")["$==="](e))===n||t.$$is_boolean&&1!=t?e:r.$file_at(e)},i.$$s=s,i),o).call(a))))},m.$alias_method("formatter=","add_formatter"),g.$formatters=function(){var e,t=this;return(e=t.formatters)!==!1&&e!==n?e:t.formatters=[]},g.$reporter=function(){var e,t,r=this;return(e=r.reporter)!==!1&&e!==n?e:r.reporter=function(){return(t=r.$formatters()["$empty?"]())===n||t.$$is_boolean&&1!=t||r.$add_formatter("progress"),r.$add_formatter(v.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("DeprecationFormatter"),r.$deprecation_stream(),r.$output_stream()),(t=v.get("Reporter")).$new.apply(t,[r].concat(r.$formatters()))}()},g.$profile_examples=function(){var e,t,r=this,$=n;return $=r.$value_for("profile_examples",r.profile_examples),(e=(t=$!==!1&&$!==n)?$["$is_a?"](v.get("Integer"))["$!"]():t)===n||e.$$is_boolean&&1!=e?$:10},g["$files_or_directories_to_run="]=function(e){var t,r,o,a,i=this;return e=$.call(arguments,0),e=e.$flatten(),o=(a=i.$command()["$=="]("rspec"))!==!1&&a!==n?a:v.get("Runner")["$running_in_drb?"](),r=o!==!1&&o!==n?i.$default_path():o,(t=r!==!1&&r!==n?e["$empty?"]():r)===n||t.$$is_boolean&&1!=t||e["$<<"](i.$default_path()),t=[i.$get_files_to_run(e)],r=i,r["$files_to_run="].apply(r,t),t[t.length-1]},g.$alias_example_to=function(e,t){var r=n;return t=$.call(arguments,1),r=v.get("Metadata").$build_hash_from(t),v.get("RSpec").$$scope.get("Core").$$scope.get("ExampleGroup").$alias_example_to(e,r)},g.$alias_it_behaves_like_to=function(e,t){return null==t&&(t=""),v.get("RSpec").$$scope.get("Core").$$scope.get("ExampleGroup").$alias_it_behaves_like_to(e,t)},m.$alias_method("alias_it_should_behave_like_to","alias_it_behaves_like_to"),g.$filter_run_including=function(e){var t=this;return e=$.call(arguments,0),t.$filter_manager().$include_with_low_priority(v.get("Metadata").$build_hash_from(e))},m.$alias_method("filter_run","filter_run_including"),g["$inclusion_filter="]=function(e){var t=this;return t.$filter_manager()["$include!"](v.get("Metadata").$build_hash_from([e]))},m.$alias_method("filter=","inclusion_filter="),g.$inclusion_filter=function(){var e=this;return e.$filter_manager().$inclusions()},m.$alias_method("filter","inclusion_filter"),g.$filter_run_excluding=function(e){var t=this;return e=$.call(arguments,0),t.$filter_manager().$exclude_with_low_priority(v.get("Metadata").$build_hash_from(e))},g["$exclusion_filter="]=function(e){var t=this;return t.$filter_manager()["$exclude!"](v.get("Metadata").$build_hash_from([e]))},g.$exclusion_filter=function(){var e=this;return e.$filter_manager().$exclusions()},g.$include=function(e,t){var n=this;return t=$.call(arguments,1),n.$include_or_extend_modules()["$<<"](["include",e,v.get("Metadata").$build_hash_from(t)])},g.$extend=function(e,t){var n=this;return t=$.call(arguments,1),n.$include_or_extend_modules()["$<<"](["extend",e,v.get("Metadata").$build_hash_from(t)])
},g.$configure_group=function(e){var t,r,$,o=this;return(t=(r=o.$include_or_extend_modules()).$each,t.$$p=($=function(t,r,o){var a,i,s=$.$$s||this;return null==t&&(t=n),null==r&&(r=n),null==o&&(o=n),(a=(i=o["$empty?"]())!==!1&&i!==n?i:e["$any_apply?"](o))===n||a.$$is_boolean&&1!=a?n:s.$send("safe_"+t,r,e)},$.$$s=o,$),t).call(r)},g.$safe_include=function(e,t){return t["$<"](e)?n:t.$send("include",e)},g.$setup_load_path_and_require=function(e){var t,r,$,o,a,i,s=this,c=n;return c=(t=(r=["lib",s.$default_path()]).$select,t.$$p=($=function(e){$.$$s||this;return null==e&&(e=n),v.get("File")["$directory?"](e)},$.$$s=s,$),t).call(r),(t=v.get("RSpec").$$scope.get("Core").$$scope.get("RubyProject")).$add_to_load_path.apply(t,[].concat(c)),(o=(a=e).$each,o.$$p=(i=function(e){var t=i.$$s||this;return null==e&&(e=n),t.$require(e)},i.$$s=s,i),o).call(a),s.requires=s.requires["$+"](e)},g.$safe_extend=v.get("RUBY_VERSION").$to_f()["$>="](1.9)?function(e,t){return function(e){e.$$scope,e.$$proto;return e}(t.$singleton_class())["$<"](e)?n:t.$extend(e)}:function(e,t){var r;return(r=function(e){e.$$scope,e.$$proto;return e}(t.$singleton_class()).$included_modules()["$include?"](e))===n||r.$$is_boolean&&1!=r?t.$extend(e):n},g.$configure_mock_framework=function(){var e=this;return v.get("RSpec").$$scope.get("Core").$$scope.get("ExampleGroup").$send("include",e.$mock_framework())},g.$configure_expectation_framework=function(){var e,t,r,$=this;return(e=(t=$.$expectation_frameworks()).$each,e.$$p=(r=function(e){r.$$s||this;return null==e&&(e=n),v.get("RSpec").$$scope.get("Core").$$scope.get("ExampleGroup").$send("include",e)},r.$$s=$,r),e).call(t)},g.$load_spec_files=function(){var e,t,r,$=this;return(e=(t=$.$files_to_run().$uniq()).$each,e.$$p=(r=function(e){var t=r.$$s||this;return null==e&&(e=n),t.$load(v.get("File").$expand_path(e))},r.$$s=$,r),e).call(t),$.spec_files_loaded=!0},e.cdecl(v,"DEFAULT_FORMATTER",(p=(d=m).$lambda,p.$$p=(f=function(e){f.$$s||this;return null==e&&(e=n),e},f.$$s=m,f),p).call(d)),g.$format_docstrings=h=function(){var e=this,t=h.$$p,r=t||n;return h.$$p=null,e.format_docstrings_block=function(){return r!==n?r:v.get("DEFAULT_FORMATTER")}()},g.$format_docstrings_block=function(){var e,t=this;return(e=t.format_docstrings_block)!==!1&&e!==n?e:t.format_docstrings_block=v.get("DEFAULT_FORMATTER")},e.defs(m,"$delegate_to_ordering_manager",function(e){var t,r,o,a=this;return e=$.call(arguments,0),(t=(r=e).$each,t.$$p=(o=function(e){var t,r,a,i=o.$$s||this;return null==e&&(e=n),(t=(r=i).$define_method,t.$$p=(a=function(t){var r,o,i,s=a.$$s||this;return t=$.call(arguments,0),r=a.$$p||n,a.$$p=null,(o=(i=s.$ordering_manager()).$__send__,o.$$p=r.$to_proc(),o).apply(i,[e].concat(t))},a.$$s=i,a),t).call(r,e)},o.$$s=a,o),t).call(r)}),m.$delegate_to_ordering_manager("seed="),m.$delegate_to_ordering_manager("seed"),m.$delegate_to_ordering_manager("order="),m.$delegate_to_ordering_manager("register_ordering"),m.$delegate_to_ordering_manager("seed_used?","ordering_registry"),g["$warnings="]=function(e){return s.VERBOSE=e["$!"]()["$!"]()},g.$warnings=function(){return null==s.VERBOSE&&(s.VERBOSE=n),s.VERBOSE},g.$expose_current_running_example_as=function(e){var t,r,$,o=this;return(t=(r=v.get("ExposeCurrentExample")).$module_eval,t.$$p=($=function(){var t,r,o,a=$.$$s||this;return a.$extend(v.get("RSpec").$$scope.get("SharedContext")),(t=(r=a).$let,t.$$p=(o=function(e){o.$$s||this;return null==e&&(e=n),e},o.$$s=a,o),t).call(r,e)},$.$$s=o,$),t).call(r),o.$include(v.get("ExposeCurrentExample"))},function(e){{var t=o(e,"ExposeCurrentExample");t.$$proto,t.$$scope}}(m),g["$raise_errors_for_deprecations!"]=function(){var e,t,n=this;return e=[v.get("Formatters").$$scope.get("DeprecationFormatter").$$scope.get("RaiseErrorStream").$new()],t=n,t["$deprecation_stream="].apply(t,e),e[e.length-1]},m.$private(),g.$get_files_to_run=function(e){var t,r,$,o=this;return(t=(r=v.get("FlatMap")).$flat_map,t.$$p=($=function(e){var t,r=$.$$s||this;return null==e&&(e=n),(t=v.get("File").$$scope.get("ALT_SEPARATOR"))===n||t.$$is_boolean&&1!=t||(e=e.$gsub(v.get("File").$$scope.get("ALT_SEPARATOR"),v.get("File").$$scope.get("SEPARATOR"))),(t=v.get("File")["$directory?"](e))===n||t.$$is_boolean&&1!=t?r.$extract_location(e):r.$gather_directories(e)},$.$$s=o,$),t).call(r,e).$sort()},g.$gather_directories=function(e){var t,r=this,$=n,o=n;return $="{"+r.$pattern().$gsub(/\s*,\s*/,",")+"}",o=function(){return v.get("Dir")["$[]"]((t=r.$pattern()["$=~"](new RegExp("^"+v.get("Regexp").$escape(e))))===n||t.$$is_boolean&&1!=t?""+e+"/"+$:$)}(),o.$sort()},g.$extract_location=function(e){var t,r,$,o,a,i=this,l=n;return(t=e["$=~"](/^(.*?)((?:\:\d+)+)$/))===n||t.$$is_boolean&&1!=t||(t=[(r=s["~"])===n?n:r["$[]"](1),(r=($=((a=s["~"])===n?n:a["$[]"](2))["$[]"](c(1,-1,!1)).$split(":")).$map,r.$$p=(o=function(e){o.$$s||this;return null==e&&(e=n),e.$to_i()},o.$$s=i,o),r).call($)],e=t[0],l=t[1],i.$filter_manager().$add_location(e,l)),e},g.$command=function(){return null==s[0]&&(s[0]=n),s[0].$split(v.get("File").$$scope.get("SEPARATOR")).$last()},g.$value_for=function(e,t){var r,$=this;return null==t&&(t=n),(r=$.preferred_options["$has_key?"](e))===n||r.$$is_boolean&&1!=r?t:$.preferred_options["$[]"](e)},g.$assert_no_example_groups_defined=function(e){var t,r=this;return(t=v.get("RSpec").$world().$example_groups()["$any?"]())===n||t.$$is_boolean&&1!=t?n:r.$raise(v.get("MustBeConfiguredBeforeExampleGroupsError").$new(("RSpec's "+e+" configuration option must be configured before ")["$+"]("any example groups are defined, but you have already defined a group.")))},g["$output_to_tty?"]=function(e){var t,r,$=this;return null==e&&(e=$.$output_stream()),(t=$["$tty?"]())!==!1&&t!==n?t:(r=e["$respond_to?"]("tty?"),r!==!1&&r!==n?e["$tty?"]():r)},g.$built_in_formatter=function(e){var t=this,r=n;return function(){return r=e.$to_s(),"d"["$==="](r)||"doc"["$==="](r)||"documentation"["$==="](r)||"s"["$==="](r)||"n"["$==="](r)||"spec"["$==="](r)||"nested"["$==="](r)?(t.$require("rspec/core/formatters/documentation_formatter"),v.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("DocumentationFormatter")):"h"["$==="](r)||"html"["$==="](r)?(t.$require("rspec/core/formatters/html_formatter"),v.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("HtmlFormatter")):"p"["$==="](r)||"progress"["$==="](r)?(t.$require("rspec/core/formatters/progress_formatter"),v.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("ProgressFormatter")):"j"["$==="](r)||"json"["$==="](r)?(t.$require("rspec/core/formatters/json_formatter"),v.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("JsonFormatter")):n}()},g.$custom_formatter=function(t){var r,$,o,a=this;if(!((r=v.get("Class")["$==="](t))===n||r.$$is_boolean&&1!=r))return t;if((r=a["$string_const?"](t))===n||r.$$is_boolean&&1!=r)return n;try{return(r=($=t.$gsub(/^::/,"").$split("::")).$inject,r.$$p=(o=function(e,t){o.$$s||this;return null==e&&(e=n),null==t&&(t=n),e.$const_get(t)},o.$$s=a,o),r).call($,v.get("Object"))}catch(i){if(e.rescue(i,[v.get("NameError")]))return(r=a.$require(a.$path_for(t)))===n||r.$$is_boolean&&1!=r?a.$raise():a.$retry();throw i}},g["$string_const?"]=function(e){var t;return t=e["$is_a?"](v.get("String")),t!==!1&&t!==n?/\A[A-Z][a-zA-Z0-9_:]*\z/["$=~"](e):t},g.$path_for=function(e){var t=this;return t.$underscore_with_fix_for_non_standard_rspec_naming(e)},g.$underscore_with_fix_for_non_standard_rspec_naming=function(e){var t=this;return t.$underscore(e).$sub(/(^|\/)r_spec($|\/)/,"\\1rspec\\2")},g.$underscore=function(e){var t=n;return t=e.$to_s().$dup(),t["$gsub!"](/::/,"/"),t["$gsub!"](/([A-Z]+)([A-Z][a-z])/,"\\1_\\2"),t["$gsub!"](/([a-z\d])([A-Z])/,"\\1_\\2"),t["$tr!"]("-","_"),t["$downcase!"](),t},g.$file_at=function(e){return v.get("FileUtils").$mkdir_p(v.get("File").$dirname(e)),v.get("File").$new(e,"w")},n&&"file_at"}(l,null)}(l)}(t)},Opal.modules.optparse=function(e){e.dynamic_require_severity="warning";{var t=(e.top,e.nil);e.breaker,e.slice}return t},Opal.modules["rspec/core/project_initializer"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$create_spec_helper_file","$create_dot_rspec_file","$delete_if_confirmed","$exist?","$report_exists","$report_creating","$open","$write","$mkdir_p","$puts","$=~","$gets","$rm_rf"]),function(e){{var t=r(e,"RSpec");t.$$proto,t.$$scope}!function(e){{var t=r(e,"Core");t.$$proto,t.$$scope}!function(e,$super){function t(){}var r=t=$(e,$super,"ProjectInitializer",t),o=r.$$proto,a=r.$$scope;return o.$initialize=function(e){var t=this;return null==e&&(e=n),t.arg=e},o.$run=function(){var e=this;return e.$create_spec_helper_file(),e.$create_dot_rspec_file(),e.$delete_if_confirmed("lib/tasks/rspec.rake","  If the file in lib/tasks/rspec.rake is the one generated by rspec-rails-1x,\n  you can get rid of it, as it is no longer needed with rspec-2.\n")},o.$create_dot_rspec_file=function(){var e,t,r,$=this;return(e=a.get("File")["$exist?"](".rspec"))===n||e.$$is_boolean&&1!=e?($.$report_creating(".rspec"),(e=(t=a.get("File")).$open,e.$$p=(r=function(e){r.$$s||this;return null==e&&(e=n),e.$write("--color\n--format progress\n")},r.$$s=$,r),e).call(t,".rspec","w")):$.$report_exists(".rspec")},o.$create_spec_helper_file=function(){var e,t,r,$=this;return(e=a.get("File")["$exist?"]("spec/spec_helper.rb"))===n||e.$$is_boolean&&1!=e?($.$report_creating("spec/spec_helper.rb"),a.get("FileUtils").$mkdir_p("spec"),(e=(t=a.get("File")).$open,e.$$p=(r=function(e){r.$$s||this;return null==e&&(e=n),e.$write("# This file was generated by the `rspec --init` command. Conventionally, all\n# specs live under a `spec` directory, which RSpec adds to the `$LOAD_PATH`.\n# Require this file using `require \"spec_helper\"` to ensure that it is only\n# loaded once.\n#\n# See http://rubydoc.info/gems/rspec-core/RSpec/Core/Configuration\nRSpec.configure do |config|\n  # Limit the spec run to only specs with the focus metadata. If no specs have\n  # the filtering metadata and `run_all_when_everything_filtered = true` then\n  # all specs will run.\n  #config.filter_run :focus\n\n  # Run all specs when none match the provided filter. This works well in\n  # conjunction with `config.filter_run :focus`, as it will run the entire\n  # suite when no specs have `:filter` metadata.\n  #config.run_all_when_everything_filtered = true\n\n  # Run specs in random order to surface order dependencies. If you find an\n  # order dependency and want to debug it, you can fix the order by providing\n  # the seed, which is printed after each run.\n  #     --seed 1234\n  #config.order = 'random'\nend\n")},r.$$s=$,r),e).call(t,"spec/spec_helper.rb","w")):$.$report_exists("spec/spec_helper.rb")},o.$delete_if_confirmed=function(e,t){var r,$=this;return(r=a.get("File")["$exist?"](e))===n||r.$$is_boolean&&1!=r?n:($.$puts(),$.$puts(t),$.$puts(),$.$puts("  delete   "+e+"? [y/n]"),(r=$.$gets()["$=~"](/y/i))===n||r.$$is_boolean&&1!=r?n:a.get("FileUtils").$rm_rf(e))},o.$report_exists=function(e){var t=this;return t.$puts("   exist   "+e)},o.$report_creating=function(e){var t=this;return t.$puts("  create   "+e)},n&&"report_creating"}(t,null)}(t)}(t)},Opal.modules["rspec/core/option_parser"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e,r=e.nil,$=(e.breaker,e.slice,e.module),o=e.klass,a=e.hash2,i=e.range;return e.add_stubs(["$require","$parse!","$new","$alias_method","$empty?","$convert_deprecated_args","$delete","$parser","$abort","$message","$map!","$===","$deprecate","$banner=","$on","$[]","$[]=","$<<","$to_i","$run","$exit","$warning","$separator","$last","$nil?","$==","$Integer","$+","$compile","$escape","$=~","$split","$gsub","$to_sym","$Float","$puts","$on_tail"]),t.$require("optparse"),function(t){{var n=$(t,"Core");n.$$proto,n.$$scope}!function(t,$super){function n(){}var $=n=o(t,$super,"Parser",n),s=$.$$proto,c=$.$$scope;return e.defs($,"$parse!",function(e){var t=this;return t.$new()["$parse!"](e)}),function(e){e.$$scope,e.$$proto;return e.$alias_method("parse","parse!")}($.$singleton_class()),s["$parse!"]=function(t){var n,$=this,o=r,i=r;if((n=t["$empty?"]())!==r&&(!n.$$is_boolean||1==n))return a([],{});$.$convert_deprecated_args(t),o=function(){return(n=t.$delete("--tty"))===r||n.$$is_boolean&&1!=n?a([],{}):a(["tty"],{tty:!0})}();try{$.$parser(o)["$parse!"](t)}catch(s){if(!e.rescue(s,[c.get("OptionParser").$$scope.get("InvalidOption")]))throw s;i=s,$.$abort(""+i.$message()+"\n\nPlease use --help for a listing of valid options")}return o},s.$convert_deprecated_args=function(e){var t,n,$,o=this;return(t=(n=e)["$map!"],t.$$p=($=function(e){var t=($.$$s||this,r);return null==e&&(e=r),function(){return t=e,"--formatter"["$==="](t)?(c.get("RSpec").$deprecate("the --formatter option",a(["replacement"],{replacement:"-f or --format"})),"--format"):"--default_path"["$==="](t)?"--default-path":"--line_number"["$==="](t)?"--line-number":e}()},$.$$s=o,$),t).call(n)},$.$alias_method("parse","parse!"),s.$parser=function(t){var n,$,o,s=this;return(n=($=c.get("OptionParser")).$new,n.$$p=(o=function(n){var $,s,l,u,_,p,d,f,h,m,g,v,b,y,x,w,k,S,E,R,O,M,q,A,C,T,j,z,I,N,F,B,P,D,H,L,U,G,Y,V,X,K,W,Z,J,Q,et,tt,nt,rt,$t,ot,at,it=o.$$s||this;return null==n&&(n=r),$=["Usage: rspec [options] [files or directories]\n\n"],s=n,s["$banner="].apply(s,$),$[$.length-1],($=(s=n).$on,$.$$p=(l=function(e){{var n,$,o;l.$$s||this}return null==e&&(e=r),n="libs",$=t,(o=$["$[]"](n))!==!1&&o!==r?o:$["$[]="](n,[]),t["$[]"]("libs")["$<<"](e)},l.$$s=it,l),$).call(s,"-I PATH","Specify PATH to add to $LOAD_PATH (may be used more than once)."),($=(u=n).$on,$.$$p=(_=function(e){{var n,$,o;_.$$s||this}return null==e&&(e=r),n="requires",$=t,(o=$["$[]"](n))!==!1&&o!==r?o:$["$[]="](n,[]),t["$[]"]("requires")["$<<"](e)},_.$$s=it,_),$).call(u,"-r","--require PATH","Require a file."),($=(p=n).$on,$.$$p=(d=function(e){d.$$s||this;return null==e&&(e=r),t["$[]="]("custom_options_file",e)},d.$$s=it,d),$).call(p,"-O","--options PATH","Specify the path to a custom options file."),($=(f=n).$on,$.$$p=(h=function(e){h.$$s||this;return null==e&&(e=r),t["$[]="]("order",e)},h.$$s=it,h),$).call(f,"--order TYPE[:SEED]","Run examples by the specified order type.","  [defined] examples and groups are run in the order they are defined","  [rand]    randomize the order of groups and examples","  [random]  alias for rand","  [random:SEED] e.g. --order random:123"),($=(m=n).$on,$.$$p=(g=function(e){g.$$s||this;return null==e&&(e=r),t["$[]="]("order","rand:"+e)},g.$$s=it,g),$).call(m,"--seed SEED",c.get("Integer"),"Equivalent of --order rand:SEED."),($=(v=n).$on,$.$$p=(b=function(e){b.$$s||this;return null==e&&(e=r),t["$[]="]("fail_fast",!0)},b.$$s=it,b),$).call(v,"--fail-fast","Abort the run on first failure."),($=(y=n).$on,$.$$p=(x=function(e){x.$$s||this;return null==e&&(e=r),t["$[]="]("fail_fast",!1)},x.$$s=it,x),$).call(y,"--no-fail-fast","Do not abort the run on first failure."),($=(w=n).$on,$.$$p=(k=function(e){k.$$s||this;return null==e&&(e=r),t["$[]="]("failure_exit_code",e)},k.$$s=it,k),$).call(w,"--failure-exit-code CODE",c.get("Integer"),"Override the exit code used when there are failing specs."),($=(S=n).$on,$.$$p=(E=function(e){E.$$s||this;return null==e&&(e=r),t["$[]="]("dry_run",!0)},E.$$s=it,E),$).call(S,"--dry-run","Print the formatter output of your suite without","  running any examples or hooks"),($=(R=n).$on,$.$$p=(O=function(e){O.$$s||this;return null==e&&(e=r),t["$[]="]("drb",e)},O.$$s=it,O),$).call(R,"-X","--[no-]drb","Run examples via DRb."),($=(M=n).$on,$.$$p=(q=function(e){q.$$s||this;return null==e&&(e=r),t["$[]="]("drb_port",e.$to_i())},q.$$s=it,q),$).call(M,"--drb-port PORT","Port to connect to the DRb server."),($=(A=n).$on,$.$$p=(C=function(e){var t=C.$$s||this;return null==e&&(e=r),t.$require("rspec/core/project_initializer"),c.get("ProjectInitializer").$new(e).$run(),t.$exit()},C.$$s=it,C),$).call(A,"--init","Initialize your project with RSpec."),($=(T=n).$on,$.$$p=(j=function(e){var t=j.$$s||this;return null==e&&(e=r),c.get("RSpec").$warning("--configure is deprecated with no effect. Use --init instead.",a(["call_site"],{call_site:r})),t.$exit()},j.$$s=it,j),$).call(T,"--configure","Deprecated. Use --init instead."),n.$separator("\n  **** Output ****\n\n"),($=(z=n).$on,$.$$p=(I=function(e){{var n,$,o;I.$$s||this}return null==e&&(e=r),n="formatters",$=t,(o=$["$[]"](n))!==!1&&o!==r?o:$["$[]="](n,[]),t["$[]"]("formatters")["$<<"]([e])},I.$$s=it,I),$).call(z,"-f","--format FORMATTER","Choose a formatter.","  [p]rogress (default - dots)","  [d]ocumentation (group and example names)","  [h]tml","  [j]son","  custom formatter class name"),($=(N=n).$on,$.$$p=(F=function(e){{var n,$,o;F.$$s||this}return null==e&&(e=r),n="formatters",$=t,(o=$["$[]"](n))!==!1&&o!==r?o:$["$[]="](n,[["progress"]]),t["$[]"]("formatters").$last()["$<<"](e)},F.$$s=it,F),$).call(N,"-o","--out FILE","Write output to a file instead of $stdout. This option applies","  to the previously specified --format, or the default format","  if no format is specified."),($=(B=n).$on,$.$$p=(P=function(e){P.$$s||this;return null==e&&(e=r),t["$[]="]("full_backtrace",!0)},P.$$s=it,P),$).call(B,"-b","--backtrace","Enable full backtrace."),($=(D=n).$on,$.$$p=(H=function(e){H.$$s||this;return null==e&&(e=r),t["$[]="]("color",e)},H.$$s=it,H),$).call(D,"-c","--[no-]color","--[no-]colour","Enable color in the output."),($=(L=n).$on,$.$$p=(U=function(n){var $,o=U.$$s||this;return null==n&&(n=r),t["$[]="]("profile_examples",function(){if(!(($=n["$nil?"]())===r||$.$$is_boolean&&1!=$))return!0;if(n["$=="](!1))return!1;try{return o.$Integer(n)}catch(t){if(e.rescue(t,[c.get("ArgumentError")]))return c.get("RSpec").$warning("Non integer specified as profile count, seperate "["$+"]("your path from options with -- e.g. ")["$+"]("`rspec --profile -- "+n+"`"),a(["call_site"],{call_site:r})),!0;throw t}return r}())},U.$$s=it,U),$).call(L,"-p","--[no-]profile [COUNT]","Enable profiling of examples and list the slowest examples (default: 10)."),($=(G=n).$on,$.$$p=(Y=function(){Y.$$s||this;return t["$[]="]("warnings",!0)},Y.$$s=it,Y),$).call(G,"-w","--warnings","Enable ruby warnings"),n.$separator("\n  **** Filtering/tags ****\n\n    In addition to the following options for selecting specific files, groups,\n    or examples, you can select a single example by appending the line number to\n    the filename:\n\n      rspec path/to/a_spec.rb:37\n\n"),($=(V=n).$on,$.$$p=(X=function(e){X.$$s||this;return null==e&&(e=r),t["$[]="]("pattern",e)},X.$$s=it,X),$).call(V,"-P","--pattern PATTERN",'Load files matching pattern (default: "spec/**/*_spec.rb").'),($=(K=n).$on,$.$$p=(W=function(e){{var n,$,o;W.$$s||this}return null==e&&(e=r),(n="full_description",$=t,(o=$["$[]"](n))!==!1&&o!==r?o:$["$[]="](n,[]))["$<<"](c.get("Regexp").$compile(c.get("Regexp").$escape(e)))},W.$$s=it,W),$).call(K,"-e","--example STRING","Run examples whose full nested names include STRING (may be","  used more than once)"),($=(Z=n).$on,$.$$p=(J=function(e){{var n,$,o;J.$$s||this}return null==e&&(e=r),(n="line_numbers",$=t,(o=$["$[]"](n))!==!1&&o!==r?o:$["$[]="](n,[]))["$<<"](e)},J.$$s=it,J),$).call(Z,"-l","--line-number LINE","Specify line number of an example or group (may be","  used more than once)."),($=(Q=n).$on,$.$$p=(et=function(n){var $,o,s,c=et.$$s||this,l=r,u=r,_=r,p=r;return null==n&&(n=r),l=function(){return($=n["$=~"](/^~/))===r||$.$$is_boolean&&1!=$?"inclusion_filter":"exclusion_filter"}(),$=e.to_ary(n.$gsub(/^(~@|~|@)/,"").$split(":",2)),u=null==$[0]?r:$[0],_=null==$[1]?r:$[1],u=u.$to_sym(),$=l,o=t,(s=o["$[]"]($))!==!1&&s!==r?s:o["$[]="]($,a([],{})),t["$[]"](l)["$[]="](u,function(){return p=_,r["$==="](p)?!0:"true"["$==="](p)?!0:"false"["$==="](p)?!1:"nil"["$==="](p)?r:/^:/["$==="](p)?_["$[]"](i(1,-1,!1)).$to_sym():/^\d+$/["$==="](p)?c.$Integer(_):/^\d+.\d+$/["$==="](p)?c.$Float(_):_}())},et.$$s=it,et),$).call(Q,"-t","--tag TAG[:VALUE]","Run examples with the specified tag, or exclude examples","by adding ~ before the tag.","  - e.g. ~slow","  - TAG is always converted to a symbol"),($=(tt=n).$on,$.$$p=(nt=function(e){nt.$$s||this;return null==e&&(e=r),t["$[]="]("default_path",e)},nt.$$s=it,nt),$).call(tt,"--default-path PATH","Set the default path where RSpec looks for examples (can","  be a path to a file or a directory)."),n.$separator("\n  **** Utility ****\n\n"),($=(rt=n).$on,$.$$p=($t=function(){var e=$t.$$s||this;return e.$puts(c.get("RSpec").$$scope.get("Core").$$scope.get("Version").$$scope.get("STRING")),e.$exit()},$t.$$s=it,$t),$).call(rt,"-v","--version","Display the version."),($=(ot=n).$on_tail,$.$$p=(at=function(){var e=at.$$s||this;return e.$puts(n),e.$exit()},at.$$s=it,at),$).call(ot,"-h","--help","You're looking at it.")},o.$$s=s,o),n).call($)},r&&"parser"}(n,null)}(n.get("RSpec"))},Opal.modules.shellwords=function(e){e.dynamic_require_severity="warning";{var t=(e.top,e.nil);e.breaker,e.slice}return t},Opal.modules["rspec/core/configuration_options"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass,a=e.hash,i=e.hash2;return e.add_stubs(["$require","$attr_reader","$map","$sub","$filter_manager=","$filter_manager","$libs=","$[]","$options","$setup_load_path_and_require","$process_options_into","$load_formatters_into","$inject","$merge","$include?","$+","$each","$has_key?","$include","$delete","$exclude","$<<","$file_options","$command_line_options","$env_options","$new","$configuration","$private","$to_set","$!","$unshift","$reverse","$reject","$force?","$force","$send","$order","$keys","$add_formatter","$custom_options_file","$custom_options","$global_options","$project_options","$local_options","$parse!","$split","$options_from","$local_options_file","$project_options_file","$global_options_file","$parse","$args_from_options_file","$exist?","$options_file_as_erb_string","$flat_map","$to_proc","$result","$read","$binding","$join","$expand_path","$warning"]),t.$require("erb"),t.$require("shellwords"),function(t){{var s=$(t,"RSpec");s.$$proto,s.$$scope}!function(t){{var s=$(t,"Core");s.$$proto,s.$$scope}!function(t,$super){function $(){}var s=$=o(t,$super,"ConfigurationOptions",$),c=s.$$proto,l=s.$$scope;return c.filter_manager=c.command_line_options=c.args=c.local_options=c.project_options=c.global_options=n,s.$attr_reader("options"),c.$initialize=function(e){var t,r,$,o=this;return o.args=(t=(r=e).$map,t.$$p=($=function(e){$.$$s||this;return null==e&&(e=n),e.$sub("default_path","default-path").$sub("line_number","line-number")},$.$$s=o,$),t).call(r)},c.$configure=function(e){var t,r,$,o=this;return t=[o.$filter_manager()],r=e,r["$filter_manager="].apply(r,t),t[t.length-1],t=[($=o.$options()["$[]"]("libs"))!==!1&&$!==n?$:[]],r=e,r["$libs="].apply(r,t),t[t.length-1],e.$setup_load_path_and_require((t=o.$options()["$[]"]("requires"))!==!1&&t!==n?t:[]),o.$process_options_into(e),o.$load_formatters_into(e)},c.$parse_options=function(){var e,t,r,$,o,a,i=this;return i.options=(e=(t=($=(o=i.$file_options()["$<<"](i.$command_line_options())["$<<"](i.$env_options())).$each,$.$$p=(a=function(e){var t,r=a.$$s||this;return null==e&&(e=n),(t=e["$has_key?"]("inclusion_filter"))===n||t.$$is_boolean&&1!=t||r.$filter_manager().$include(e.$delete("inclusion_filter")),(t=e["$has_key?"]("exclusion_filter"))===n||t.$$is_boolean&&1!=t?n:r.$filter_manager().$exclude(e.$delete("exclusion_filter"))},a.$$s=i,a),$).call(o)).$inject,e.$$p=(r=function(e,t){var $,o,a,i=r.$$s||this;return null==e&&(e=n),null==t&&(t=n),($=(o=e).$merge,$.$$p=(a=function(e,t,r){{var $;a.$$s||this}return null==e&&(e=n),null==t&&(t=n),null==r&&(r=n),($=["libs","requires"]["$include?"](e))===n||$.$$is_boolean&&1!=$?r:t["$+"](r)},a.$$s=i,a),$).call(o,t)},r.$$s=i,r),e).call(t)},c.$drb_argv=function(){var e=this;return l.get("DrbOptions").$new(e.$options(),e.$filter_manager()).$options()},c.$filter_manager=function(){var e,t=this;return(e=t.filter_manager)!==!1&&e!==n?e:t.filter_manager=l.get("RSpec").$configuration().$filter_manager()},s.$private(),e.cdecl(l,"UNFORCED_OPTIONS",["requires","profile","drb","libs","files_or_directories_to_run","line_numbers","full_description","full_backtrace","tty"].$to_set()),e.cdecl(l,"UNPROCESSABLE_OPTIONS",["libs","formatters","requires"].$to_set()),c["$force?"]=function(e){return l.get("UNFORCED_OPTIONS")["$include?"](e)["$!"]()},c.$order=function(e,t){var $,o,a,i=this;return t=r.call(arguments,1),($=(o=t.$reverse()).$each,$.$$p=(a=function(t){{var r;a.$$s||this}return null==t&&(t=n),(r=e.$delete(t))===n||r.$$is_boolean&&1!=r?n:e.$unshift(t)},a.$$s=i,a),$).call(o),e},c.$process_options_into=function(e){var t,r,$,o,i,s=this,c=n;return c=(t=(r=s.$options()).$reject,t.$$p=($=function(e,t){$.$$s||this;return null==e&&(e=n),null==t&&(t=n),l.get("UNPROCESSABLE_OPTIONS")["$include?"](e)},$.$$s=s,$),t).call(r),(t=(o=s.$order(c.$keys(),"default_path","pattern")).$each,t.$$p=(i=function(t){var r,$=i.$$s||this;return null==t&&(t=n),(r=$["$force?"](t))===n||r.$$is_boolean&&1!=r?e.$send(""+t+"=",c["$[]"](t)):e.$force(a(t,c["$[]"](t)))},i.$$s=s,i),t).call(o)},c.$load_formatters_into=function(e){var t,r,$,o=this;return(t=o.$options()["$[]"]("formatters"))===n||t.$$is_boolean&&1!=t?n:(t=(r=o.$options()["$[]"]("formatters")).$each,t.$$p=($=function(t){{var r;$.$$s||this}return null==t&&(t=n),(r=e).$add_formatter.apply(r,[].concat(t))},$.$$s=o,$),t).call(r)},c.$file_options=function(){var e,t=this;return(e=t.$custom_options_file())===n||e.$$is_boolean&&1!=e?[t.$global_options(),t.$project_options(),t.$local_options()]:[t.$custom_options()]},c.$env_options=function(){var e;return(e=l.get("ENV")["$[]"]("SPEC_OPTS"))===n||e.$$is_boolean&&1!=e?i([],{}):l.get("Parser")["$parse!"](l.get("Shellwords").$split(l.get("ENV")["$[]"]("SPEC_OPTS")))},c.$command_line_options=function(){var e,t=this;return(e=t.command_line_options)!==!1&&e!==n?e:t.command_line_options=l.get("Parser")["$parse!"](t.args).$merge(i(["files_or_directories_to_run"],{files_or_directories_to_run:t.args}))},c.$custom_options=function(){var e=this;return e.$options_from(e.$custom_options_file())},c.$local_options=function(){var e,t=this;return(e=t.local_options)!==!1&&e!==n?e:t.local_options=t.$options_from(t.$local_options_file())},c.$project_options=function(){var e,t=this;return(e=t.project_options)!==!1&&e!==n?e:t.project_options=t.$options_from(t.$project_options_file())},c.$global_options=function(){var e,t=this;return(e=t.global_options)!==!1&&e!==n?e:t.global_options=t.$options_from(t.$global_options_file())},c.$options_from=function(e){var t=this;return l.get("Parser").$parse(t.$args_from_options_file(e))},c.$args_from_options_file=function(e){var t,r,$=this,o=n;return(t=(r=e!==!1&&e!==n)?l.get("File")["$exist?"](e):r)===n||t.$$is_boolean&&1!=t?[]:(o=$.$options_file_as_erb_string(e),(t=(r=l.get("FlatMap")).$flat_map,t.$$p="shellsplit".$to_proc(),t).call(r,o.$split(/\n+/)))},c.$options_file_as_erb_string=function(e){var t=this;return l.get("ERB").$new(l.get("File").$read(e),n,"-").$result(t.$binding())},c.$custom_options_file=function(){var e=this;return e.$command_line_options()["$[]"]("custom_options_file")},c.$project_options_file=function(){return".rspec"},c.$local_options_file=function(){return".rspec-local"},c.$global_options_file=function(){try{return l.get("File").$join(l.get("File").$expand_path("~"),".rspec")}catch(t){if(e.rescue(t,[l.get("ArgumentError")]))return l.get("RSpec").$warning("Unable to find ~/.rspec because the HOME environment variable is not set"),n;throw t}},n&&"global_options_file"}(s,null)}(s)}(t)},Opal.modules["rspec/core/command_line"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass,o=e.gvars;return e.add_stubs(["$===","$new","$parse_options","$configuration","$world","$error_stream=","$==","$output_stream","$output_stream=","$configure","$load_spec_files","$announce_filters","$report","$run_hook","$all?","$map","$run","$ordered_example_groups","$failure_exit_code","$reporter","$example_count"]),function(e){{var t=r(e,"RSpec");t.$$proto,t.$$scope}!function(e){{var t=r(e,"Core");t.$$proto,t.$$scope}!function(e,$super){function t(){}var r=t=$(e,$super,"CommandLine",t),a=r.$$proto,i=r.$$scope;return a.configuration=a.options=a.world=n,a.$initialize=function(e,t,r){var $,o=this;return null==t&&(t=i.get("RSpec").$configuration()),null==r&&(r=i.get("RSpec").$world()),($=i.get("Array")["$==="](e))===n||$.$$is_boolean&&1!=$||(e=i.get("ConfigurationOptions").$new(e),e.$parse_options()),o.options=e,o.configuration=t,o.world=r},a.$run=function(e,t){var r,$,a,i=this;return null==o.stdout&&(o.stdout=n),r=[e],$=i.configuration,$["$error_stream="].apply($,r),r[r.length-1],i.configuration.$output_stream()["$=="](o.stdout)&&(r=[t],$=i.configuration,$["$output_stream="].apply($,r),r[r.length-1]),i.options.$configure(i.configuration),i.configuration.$load_spec_files(),i.world.$announce_filters(),(r=($=i.configuration.$reporter()).$report,r.$$p=(a=function(e){var t,r,$,o,i=a.$$s||this;null==i.configuration&&(i.configuration=n),null==i.world&&(i.world=n),null==e&&(e=n);try{return i.configuration.$run_hook("before","suite"),(t=(r=($=i.world.$ordered_example_groups()).$map,r.$$p=(o=function(t){o.$$s||this;return null==t&&(t=n),t.$run(e)},o.$$s=i,o),r).call($)["$all?"]())===n||t.$$is_boolean&&1!=t?i.configuration.$failure_exit_code():0}finally{i.configuration.$run_hook("after","suite")}},a.$$s=i,a),r).call($,i.world.$example_count())},n&&"run"}(t,null)}(t)}(t)},Opal.modules.socket=function(e){e.dynamic_require_severity="warning";{var t=(e.top,e.nil);e.breaker,e.slice}return t},Opal.modules.uri=function(e){e.dynamic_require_severity="warning";{var t=(e.top,e.nil);e.breaker,e.slice}return t},Opal.modules["drb/drb"]=function(e){e.dynamic_require_severity="warning";{var t=(e.top,e.nil);e.breaker,e.slice}return t},Opal.modules["rspec/core/drb_options"]=function(e){e.dynamic_require_severity="warning";var t=(e.top,e),n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$[]","$<<","$add_failure_exit_code","$add_full_description","$add_line_numbers","$add_filter","$inclusions","$exclusions","$add_formatters","$add_libs","$add_requires","$+","$to_s","$each","$delete","$source","$push","$inject","$empty?","$each_pair","$include?","$==","$is_a?"]),function(t){{var o=r(t,"Core");o.$$proto,o.$$scope}!function(t,$super){function r(){}var o=r=$(t,$super,"DrbOptions",r),a=o.$$proto,i=o.$$scope;return a.submitted_options=a.filter_manager=n,a.$initialize=function(e,t){var n=this;return n.submitted_options=e,n.filter_manager=t},a.$options=function(){var e,t=this,r=n;return r=[],(e=t.submitted_options["$[]"]("color"))===n||e.$$is_boolean&&1!=e||r["$<<"]("--color"),(e=t.submitted_options["$[]"]("profile_examples"))===n||e.$$is_boolean&&1!=e||r["$<<"]("--profile"),(e=t.submitted_options["$[]"]("full_backtrace"))===n||e.$$is_boolean&&1!=e||r["$<<"]("--backtrace"),(e=t.submitted_options["$[]"]("tty"))===n||e.$$is_boolean&&1!=e||r["$<<"]("--tty"),(e=t.submitted_options["$[]"]("fail_fast"))===n||e.$$is_boolean&&1!=e||r["$<<"]("--fail-fast"),(e=t.submitted_options["$[]"]("custom_options_file"))===n||e.$$is_boolean&&1!=e||r["$<<"]("--options")["$<<"](t.submitted_options["$[]"]("custom_options_file")),(e=t.submitted_options["$[]"]("order"))===n||e.$$is_boolean&&1!=e||r["$<<"]("--order")["$<<"](t.submitted_options["$[]"]("order")),t.$add_failure_exit_code(r),t.$add_full_description(r),t.$add_line_numbers(r),t.$add_filter(r,"inclusion",t.filter_manager.$inclusions()),t.$add_filter(r,"exclusion",t.filter_manager.$exclusions()),t.$add_formatters(r),t.$add_libs(r),t.$add_requires(r),r["$+"](t.submitted_options["$[]"]("files_or_directories_to_run"))},a.$add_failure_exit_code=function(e){var t,r=this;return(t=r.submitted_options["$[]"]("failure_exit_code"))===n||t.$$is_boolean&&1!=t?n:e["$<<"]("--failure-exit-code")["$<<"](r.submitted_options["$[]"]("failure_exit_code").$to_s())},a.$add_full_description=function(e){var t,r,$,o=this;return(t=o.submitted_options["$[]"]("full_description"))===n||t.$$is_boolean&&1!=t?n:(t=(r=o.submitted_options["$[]"]("full_description")).$each,t.$$p=($=function(t){$.$$s||this;return null==t&&(t=n),e["$<<"]("--example")["$<<"](t.$source().$delete("\\"))},$.$$s=o,$),t).call(r)},a.$add_line_numbers=function(e){var t,r,$,o,a=this;return(t=a.submitted_options["$[]"]("line_numbers"))===n||t.$$is_boolean&&1!=t?n:(t=e).$push.apply(t,[].concat((r=($=a.submitted_options["$[]"]("line_numbers")).$inject,r.$$p=(o=function(e,t){o.$$s||this;return null==e&&(e=n),null==t&&(t=n),e["$<<"]("--line_number")["$<<"](t)},o.$$s=a,o),r).call($,[])))},e.cdecl(i,"CONDITIONAL_FILTERS",["if","unless"]),a.$add_filter=function(e,t,r){var $,o,a,s=this;
return($=r["$empty?"]())===n||$.$$is_boolean&&1!=$?($=(o=r).$each_pair,$.$$p=(a=function(r,$){var o,s=(a.$$s||this,n);return null==r&&(r=n),null==$&&($=n),(o=i.get("CONDITIONAL_FILTERS")["$include?"](r))===n||o.$$is_boolean&&1!=o?(s=function(){return t["$=="]("inclusion")?r.$to_s():"~"+r}(),(o=$["$is_a?"](i.get("String")))===n||o.$$is_boolean&&1!=o||s["$<<"](":"+$),e["$<<"]("--tag")["$<<"](s)):n},a.$$s=s,a),$).call(o):n},a.$add_formatters=function(e){var t,r,$,o=this;return(t=o.submitted_options["$[]"]("formatters"))===n||t.$$is_boolean&&1!=t?n:(t=(r=o.submitted_options["$[]"]("formatters")).$each,t.$$p=($=function(t){{var r;$.$$s||this}return null==t&&(t=n),e["$<<"]("--format")["$<<"](t["$[]"](0)),(r=t["$[]"](1))===n||r.$$is_boolean&&1!=r?n:e["$<<"]("--out")["$<<"](t["$[]"](1))},$.$$s=o,$),t).call(r)},a.$add_libs=function(e){var t,r,$,o=this;return(t=o.submitted_options["$[]"]("libs"))===n||t.$$is_boolean&&1!=t?n:(t=(r=o.submitted_options["$[]"]("libs")).$each,t.$$p=($=function(t){$.$$s||this;return null==t&&(t=n),e["$<<"]("-I")["$<<"](t)},$.$$s=o,$),t).call(r)},a.$add_requires=function(e){var t,r,$,o=this;return(t=o.submitted_options["$[]"]("requires"))===n||t.$$is_boolean&&1!=t?n:(t=(r=o.submitted_options["$[]"]("requires")).$each,t.$$p=($=function(t){$.$$s||this;return null==t&&(t=n),e["$<<"]("--require")["$<<"](t)},$.$$s=o,$),t).call(r)},n&&"add_requires"}(o,null)}(t.get("RSpec"))},Opal.modules["rspec/core/drb_command_line"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$require","$[]","$options","$start_service","$new_with_uri","$drb_port","$run","$drb_argv"]),t.$require("drb/drb"),t.$require("rspec/core/drb_options"),function(t){{var o=r(t,"RSpec");o.$$proto,o.$$scope}!function(t){{var o=r(t,"Core");o.$$proto,o.$$scope}!function(t,$super){function r(){}var o=r=$(t,$super,"DRbCommandLine",r),a=o.$$proto,i=o.$$scope;return a.options=n,a.$initialize=function(e){var t=this;return t.options=e},a.$drb_port=function(){var e,t,r=this;return(e=(t=r.options.$options()["$[]"]("drb_port"))!==!1&&t!==n?t:i.get("ENV")["$[]"]("RSPEC_DRB"))!==!1&&e!==n?e:8989},a.$run=function(t,r){var $=this,o=n;try{i.get("DRb").$start_service("druby://localhost:0")}catch(a){if(!e.rescue(a,[i.get("SocketError"),i.get("Errno").$$scope.get("EADDRNOTAVAIL")]))throw a;i.get("DRb").$start_service("druby://:0")}return o=i.get("DRbObject").$new_with_uri("druby://127.0.0.1:"+$.$drb_port()),o.$run($.options.$drb_argv(),t,r)},n&&"run"}(o,null)}(o)}(t)},Opal.modules["rspec/core/runner"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass,o=e.gvars;return e.add_stubs(["$autorun_disabled?","$installed_at_exit?","$running_in_drb?","$at_exit","$nil?","$kind_of?","$to_i","$run","$!","$==","$exit","$-","$current_server","$require","$getaddress","$gethostname","$any?","$host","$URI","$uri","$trap","$wants_to_quit","$exit!","$wants_to_quit=","$puts","$trap_interrupt","$new","$parse_options","$[]","$options","$reset"]),function(t){{var a=r(t,"RSpec");a.$$proto,a.$$scope}!function(t){{var a=r(t,"Core");a.$$proto,a.$$scope}!function(t,$super){function r(){}var a=r=$(t,$super,"Runner",r),i=(a.$$proto,a.$$scope);return e.defs(a,"$autorun",function(){var e,t,r,$,a=this;return(e=(t=(r=a["$autorun_disabled?"]())!==!1&&r!==n?r:a["$installed_at_exit?"]())!==!1&&t!==n?t:a["$running_in_drb?"]())===n||e.$$is_boolean&&1!=e?((e=(t=a).$at_exit,e.$$p=($=function(){var e,t,r=$.$$s||this,a=n;return null==o["!"]&&(o["!"]=n),null==o.stderr&&(o.stderr=n),null==o.stdout&&(o.stdout=n),(e=(t=o["!"]["$nil?"]())!==!1&&t!==n?t:o["!"]["$kind_of?"](i.get("SystemExit")))===n||e.$$is_boolean&&1!=e?n:(a=r.$run(i.get("ARGV"),o.stderr,o.stdout).$to_i(),(e=a["$=="](0)["$!"]())===n||e.$$is_boolean&&1!=e?n:r.$exit(a))},$.$$s=a,$),e).call(t),a.installed_at_exit=!0):n}),e.cdecl(i,"AT_EXIT_HOOK_BACKTRACE_LINE","rspec/core/runner:"+22["$-"](2)+":in `autorun'"),e.defs(a,"$disable_autorun!",function(){var e=this;return e.autorun_disabled=!0}),e.defs(a,"$autorun_disabled?",function(){var e,t=this;return null==t.autorun_disabled&&(t.autorun_disabled=n),(e=t.autorun_disabled)!==!1&&e!==n?e:t.autorun_disabled=!1}),e.defs(a,"$installed_at_exit?",function(){var e,t=this;return null==t.installed_at_exit&&(t.installed_at_exit=n),(e=t.installed_at_exit)!==!1&&e!==n?e:t.installed_at_exit=!1}),e.defs(a,"$running_in_drb?",function(){var t,r,$,o=this,a=n,s=n;try{try{return r=null!=i.DRb,(t=r!==!1&&r!==n?i.get("DRb").$current_server():r)===n||t.$$is_boolean&&1!=t?n:(o.$require("socket"),o.$require("uri"),a=i.get("IPSocket").$getaddress(i.get("Socket").$gethostname()),s=(t=(r=["127.0.0.1","localhost",a])["$any?"],t.$$p=($=function(e){var t=$.$$s||this;return null==e&&(e=n),e["$=="](t.$URI(i.get("DRb").$current_server().$uri()).$host())},$.$$s=o,$),t).call(r))}catch(c){if(e.rescue(c,[i.get("DRb").$$scope.get("DRbServerNotFound")]))return n;throw c}}finally{return(t=s)!==!1&&t!==n?t:!1}}),e.defs(a,"$trap_interrupt",function(){var e,t,r,$=this;return(e=(t=$).$trap,e.$$p=(r=function(){var e,t,$=r.$$s||this;return(e=i.get("RSpec").$wants_to_quit())===n||e.$$is_boolean&&1!=e||$["$exit!"](1),e=[!0],t=i.get("RSpec"),t["$wants_to_quit="].apply(t,e),e[e.length-1],i.get("STDERR").$puts("\nExiting... Interrupt again to exit immediately.")},r.$$s=$,r),e).call(t,"INT")}),e.defs(a,"$run",function(t,r,$){var a,s=this,c=n;null==o.stderr&&(o.stderr=n),null==o.stdout&&(o.stdout=n),null==r&&(r=o.stderr),null==$&&($=o.stdout);try{if(s.$trap_interrupt(),c=i.get("ConfigurationOptions").$new(t),c.$parse_options(),(a=c.$options()["$[]"]("drb"))===n||a.$$is_boolean&&1!=a)return i.get("CommandLine").$new(c).$run(r,$);s.$require("rspec/core/drb_command_line");try{return i.get("DRbCommandLine").$new(c).$run(r,$)}catch(l){if(e.rescue(l,[i.get("DRb").$$scope.get("DRbConnError")]))return r.$puts("No DRb server is running. Running in local process instead ..."),i.get("CommandLine").$new(c).$run(r,$);throw l}}finally{i.get("RSpec").$reset()}}),n&&"run"}(a,null)}(a)}(t)},Opal.modules["rspec/core/example"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=e.breaker,$=e.slice,o=e.module,a=e.klass,i=e.hash2;return e.add_stubs(["$each","$define_method","$[]","$delegate_to_metadata","$empty?","$to_s","$metadata","$location","$call","$format_docstrings_block","$configuration","$attr_reader","$for_example","$alias_method","$current_example=","$start","$pending","$dry_run?","$with_around_each_hooks","$run_before_each","$instance_exec","$to_proc","$message","$set_exception","$run_after_each","$instance_variable_set","$instance_variables","$assign_generated_description","$finish","$__send__","$public_instance_methods","$new","$class","$any_apply?","$all_apply?","$around_each_hooks_for","$example_group","$!","$==","$first","$backtrace","$reporter","$instance_exec_with_rescue","$private","$around_each_hooks","$run_around_each_hooks","$example_started","$record","$now","$record_finished","$example_failed","$example_pending","$===","$example_passed","$merge","$to_f","$-","$execution_result","$setup_mocks_for_rspec","$run_before_each_hooks","$run_after_each_hooks","$verify_mocks","$teardown_mocks_for_rspec","$verify_mocks_for_rspec","$expecting_with_rspec?","$pending?","$<<","$generated_description","$clear_generated_description","$update"]),function(t){{var s=o(t,"RSpec");s.$$proto,s.$$scope}!function(t){{var s=o(t,"Core");s.$$proto,s.$$scope}!function(t,$super){function o(){}var s,c,l,u=o=a(t,$super,"Example",o),_=u.$$proto,p=u.$$scope;return _.example_group_class=_.options=_.example_group_instance=_.metadata=_.around_each_hooks=_.exception=_.pending_declared_in_example=n,e.defs(u,"$delegate_to_metadata",function(e){var t,r,o,a=this;return e=$.call(arguments,0),(t=(r=e).$each,t.$$p=(o=function(e){var t,r,$,a=o.$$s||this;return null==e&&(e=n),(t=(r=a).$define_method,t.$$p=($=function(){var t=$.$$s||this;return null==t.metadata&&(t.metadata=n),t.metadata["$[]"](e)},$.$$s=a,$),t).call(r,e)},o.$$s=a,o),t).call(r)}),u.$delegate_to_metadata("full_description","execution_result","file_path","pending","location"),_.$description=function(){var e,t=this,r=n;return r=function(){return(e=t.$metadata()["$[]"]("description").$to_s()["$empty?"]())===n||e.$$is_boolean&&1!=e?t.$metadata()["$[]"]("description"):"example at "+t.$location()}(),p.get("RSpec").$configuration().$format_docstrings_block().$call(r)},u.$attr_reader("exception"),u.$attr_reader("metadata"),u.$attr_reader("example_group_instance"),_.$initialize=function(e,t,r,$){var o,a=this;return null==$&&($=n),o=[e,r,$],a.example_group_class=o[0],a.options=o[1],a.example_block=o[2],a.metadata=a.example_group_class.$metadata().$for_example(t,r),a.example_group_instance=a.exception=n,a.pending_declared_in_example=!1},_.$options=function(){var e=this;return e.options},_.$example_group=function(){var e=this;return e.example_group_class},u.$alias_method("pending?","pending"),_.$run=function(t,r){var $,o,a,i,s,c,l=this,u=n;try{l.example_group_instance=t,$=[l],o=p.get("RSpec"),o["$current_example="].apply(o,$),$[$.length-1],l.$start(r);try{try{(($=(o=l.$pending())!==!1&&o!==n?o:p.get("RSpec").$configuration()["$dry_run?"]())===n||$.$$is_boolean&&1!=$)&&($=(o=l).$with_around_each_hooks,$.$$p=(a=function(){var t,r,$=a.$$s||this,o=n;null==$.example_block&&($.example_block=n),null==$.example_group_instance&&($.example_group_instance=n);try{try{return $.$run_before_each(),(t=(r=$.example_group_instance).$instance_exec,t.$$p=$.example_block.$to_proc(),t).call(r,$)}catch(i){if(e.rescue(i,[p.get("Pending").$$scope.get("PendingDeclaredInExample")]))return o=i,$.pending_declared_in_example=o.$message();if(!e.rescue(i,[p.get("Exception")]))throw i;o=i,$.$set_exception(o)}}finally{$.$run_after_each()}},a.$$s=l,a),$).call(o)}catch(_){if(!e.rescue(_,[p.get("Exception")]))throw _;u=_,l.$set_exception(u)}}finally{($=(i=l.example_group_instance.$instance_variables()).$each,$.$$p=(s=function(e){var t=s.$$s||this;return null==t.example_group_instance&&(t.example_group_instance=n),null==e&&(e=n),t.example_group_instance.$instance_variable_set(e,n)},s.$$s=l,s),$).call(i),l.example_group_instance=n;try{l.$assign_generated_description()}catch(_){if(!e.rescue(_,[p.get("Exception")]))throw _;u=_,l.$set_exception(u,"while assigning the example description")}}return l.$finish(r)}finally{$=[n],c=p.get("RSpec"),c["$current_example="].apply(c,$),$[$.length-1]}},function(t,$super){function r(){}var o,i,s,c,l,u=r=a(t,$super,"Procsy",r),_=u.$$proto,p=u.$$scope;return u.$attr_reader("metadata"),(o=(i=p.get("Proc").$public_instance_methods(!1)).$each,o.$$p=(s=function(e){var t,r,o,a=s.$$s||this;return null==e&&(e=n),(t=(r=a).$define_method,t.$$p=(o=function(t){var r,a,i,s=o.$$s||this;return null==s.proc&&(s.proc=n),t=$.call(arguments,0),r=o.$$p||n,o.$$p=null,(a=(i=s.proc).$__send__,a.$$p=r.$to_proc(),a).apply(i,[e].concat(t))},o.$$s=a,o),t).call(r,e)},s.$$s=u,s),o).call(i),e.defn(u,"$run",_.$call),_.$initialize=c=function(e){var t=this,r=c.$$p,$=r||n;return c.$$p=null,t.metadata=e,t.proc=$},_.$wrap=l=function(){var e,t,r=this,$=l.$$p,o=$||n;return l.$$p=null,(e=(t=r.$class()).$new,e.$$p=o.$to_proc(),e).call(t,r.$metadata())},n&&"wrap"}(u,null),_["$any_apply?"]=function(e){var t=this;return t.$metadata()["$any_apply?"](e)},_["$all_apply?"]=function(e){var t,r=this;return(t=r.metadata["$all_apply?"](e))!==!1&&t!==n?t:r.example_group_class["$all_apply?"](e)},_.$around_each_hooks=function(){var e,t=this;return(e=t.around_each_hooks)!==!1&&e!==n?e:t.around_each_hooks=t.$example_group().$around_each_hooks_for(t)},_.$set_exception=function(e,t){var r,$,o=this,a=n;return null==t&&(t=n),$=o.exception,(r=$!==!1&&$!==n?t["$=="]("dont_print")["$!"]():$)===n||r.$$is_boolean&&1!=r||(a="\nAn error occurred "+t+"\n  "+e.$class()+": "+e.$message()+"\n  occurred at "+e.$backtrace().$first()+"\n\n",p.get("RSpec").$configuration().$reporter().$message(a)),(r=o.exception)!==!1&&r!==n?r:o.exception=e},_.$fail_with_exception=function(e,t){var n=this;return n.$start(e),n.$set_exception(t),n.$finish(e)},_.$instance_exec_with_rescue=s=function(e){var t,r,$=this,o=s.$$p,a=o||n;return null==e&&(e=n),s.$$p=null,(t=(r=$.example_group_instance).$instance_exec_with_rescue,t.$$p=a.$to_proc(),t).call(r,$,e)},_.$instance_exec=c=function(e){var t,r,o=this,a=c.$$p,i=a||n;return e=$.call(arguments,0),c.$$p=null,(t=(r=o.example_group_instance).$instance_exec,t.$$p=i.$to_proc(),t).apply(r,[].concat(e))},u.$private(),_.$with_around_each_hooks=l=function(){var t,$,o=this,a=l.$$p,i=a||n,s=n;l.$$p=null;try{return(t=o.$around_each_hooks()["$empty?"]())===n||t.$$is_boolean&&1!=t?o.example_group_class.$run_around_each_hooks(o,(t=($=p.get("Procsy")).$new,t.$$p=i.$to_proc(),t).call($,o.$metadata())):(t=e.yieldX(i,[]),t===r?t:t)}catch(c){if(e.rescue(c,[p.get("Exception")]))return s=c,o.$set_exception(s,"in an around(:each) hook");throw c}},_.$start=function(e){var t=this;return e.$example_started(t),t.$record(i(["started_at"],{started_at:p.get("RSpec").$$scope.get("Core").$$scope.get("Time").$now()}))},_.$finish=function(e){var t,r=this;return(t=r.exception)===n||t.$$is_boolean&&1!=t?(t=r.pending_declared_in_example)===n||t.$$is_boolean&&1!=t?(t=r.$pending())===n||t.$$is_boolean&&1!=t?(r.$record_finished("passed"),e.$example_passed(r),!0):(r.$record_finished("pending",i(["pending_message"],{pending_message:function(){return(t=p.get("String")["$==="](r.$pending()))===n||t.$$is_boolean&&1!=t?p.get("Pending").$$scope.get("NO_REASON_GIVEN"):r.$pending()}()})),e.$example_pending(r),!0):(r.$record_finished("pending",i(["pending_message"],{pending_message:r.pending_declared_in_example})),e.$example_pending(r),!0):(r.$record_finished("failed",i(["exception"],{exception:r.exception})),e.$example_failed(r),!1)},_.$record_finished=function(e,t){var r=this,$=n;return null==t&&(t=i([],{})),$=p.get("RSpec").$$scope.get("Core").$$scope.get("Time").$now(),r.$record(t.$merge(i(["status","finished_at","run_time"],{status:e,finished_at:$,run_time:$["$-"](r.$execution_result()["$[]"]("started_at")).$to_f()})))},_.$run_before_each=function(){var e=this;return e.example_group_instance.$setup_mocks_for_rspec(),e.example_group_class.$run_before_each_hooks(e)},_.$run_after_each=function(){var t=this,r=n;try{try{return t.example_group_class.$run_after_each_hooks(t),t.$verify_mocks()}catch($){if(e.rescue($,[p.get("Exception")]))return r=$,t.$set_exception(r,"in an after(:each) hook");throw $}}finally{t.example_group_instance.$teardown_mocks_for_rspec()}},_.$verify_mocks=function(){var t=this,r=n;try{return t.example_group_instance.$verify_mocks_for_rspec()}catch($){if(e.rescue($,[p.get("Exception")]))return r=$,t.$set_exception(r,"dont_print");throw $}},_.$assign_generated_description=function(){var e,t,r=this;return(e=p.get("RSpec").$configuration()["$expecting_with_rspec?"]())===n||e.$$is_boolean&&1!=e?n:(t=r.$metadata()["$[]"]("description_args")["$empty?"](),(e=t!==!1&&t!==n?r["$pending?"]()["$!"]():t)===n||e.$$is_boolean&&1!=e||r.$metadata()["$[]"]("description_args")["$<<"](p.get("RSpec").$$scope.get("Matchers").$generated_description()),p.get("RSpec").$$scope.get("Matchers").$clear_generated_description())},_.$record=function(e){var t=this;return null==e&&(e=i([],{})),t.$execution_result().$update(e)},n&&"record"}(s,null)}(s)}(t)},Opal.modules["rspec/core/shared_example_group/collection"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$fetch_examples","$private","$[]","$source_for","$find","$has_key?","$reverse"]),function(e){{var t=r(e,"RSpec");t.$$proto,t.$$scope}!function(e){{var t=r(e,"Core");t.$$proto,t.$$scope}!function(e){{var t=r(e,"SharedExampleGroup");t.$$proto,t.$$scope}!function(e,$super){function t(){}{var r=t=$(e,$super,"Collection",t),o=r.$$proto;r.$$scope}return o.examples=o.sources=n,o.$initialize=function(e,t){var n,r=this;return n=[e,t],r.sources=n[0],r.examples=n[1]},o["$[]"]=function(e){var t=this;return t.$fetch_examples(e)},r.$private(),o.$fetch_examples=function(e){var t=this;return t.examples["$[]"](t.$source_for(e))["$[]"](e)},o.$source_for=function(e){var t,r,$,o=this;return(t=(r=o.sources.$reverse()).$find,t.$$p=($=function(t){var r=$.$$s||this;return null==r.examples&&(r.examples=n),null==t&&(t=n),r.examples["$[]"](t)["$has_key?"](e)},$.$$s=o,$),t).call(r)},n&&"source_for"}(t,null)}(t)}(t)}(t)},Opal.modules["rspec/core/shared_example_group"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e,r=e.nil,$=(e.breaker,e.slice),o=e.module,a=e.range,i=e.klass,s=e.hash2;return e.add_stubs(["$add_group","$to_proc","$registry","$alias_method","$shared_example_groups_for","$[]","$ancestors","$new","$ensure_block_has_source_location","$first_non_rspec_line","$key?","$first","$shift","$warn_if_key_taken","$add_shared_example_group","$empty?","$send","$class_eval","$extend","$configuration","$shared_example_groups","$[]=","$clear","$private","$any?","$===","$example_block_for","$warn_with","$gsub","$formatted_location","$join","$source_location","$method_defined?","$define_method","$split"]),function(t){{var n=o(t,"RSpec");n.$$proto,n.$$scope}!function(t){{var n=o(t,"Core");n.$$proto,n.$$scope}!function(t){var n,c=o(t,"SharedExampleGroup"),l=c.$$proto,u=c.$$scope;l.$shared_examples=n=function(e){var t,o,a=this,i=n.$$p,s=i||r;return e=$.call(arguments,0),n.$$p=null,(t=(o=u.get("SharedExampleGroup").$registry()).$add_group,t.$$p=s.$to_proc(),t).apply(o,[a].concat(e))},c.$alias_method("shared_context","shared_examples"),c.$alias_method("share_examples_for","shared_examples"),c.$alias_method("shared_examples_for","shared_examples"),l.$shared_example_groups=function(){var e,t=this;return(e=u.get("SharedExampleGroup").$registry()).$shared_example_groups_for.apply(e,["main"].concat(t.$ancestors()["$[]"](a(0,-1,!1))))},function(t){var n,a=o(t,"TopLevelDSL"),i=a.$$proto,s=a.$$scope;i.$shared_examples=n=function(e){var t,o,a=n.$$p,i=a||r;return e=$.call(arguments,0),n.$$p=null,(t=(o=s.get("SharedExampleGroup").$registry()).$add_group,t.$$p=i.$to_proc(),t).apply(o,["main"].concat(e))},a.$alias_method("shared_context","shared_examples"),a.$alias_method("share_examples_for","shared_examples"),a.$alias_method("shared_examples_for","shared_examples"),i.$shared_example_groups=function(){return s.get("SharedExampleGroup").$registry().$shared_example_groups_for("main")},e.donate(a,["$shared_examples","$shared_example_groups"])}(c),e.defs(c,"$registry",function(){var e,t=this;return null==t.registry&&(t.registry=r),(e=t.registry)!==!1&&e!==r?e:t.registry=u.get("Registry").$new()}),function(e,$super){function t(){}var n,o,a=t=i(e,$super,"Registry",t),c=a.$$proto,l=a.$$scope;return c.shared_example_groups=r,c.$add_group=n=function(e,t){var o,a,i,s=this,c=n.$$p,u=c||r,_=r,p=r;return t=$.call(arguments,1),n.$$p=null,s.$ensure_block_has_source_location(u,l.get("CallerFilter").$first_non_rspec_line()),(o=s["$key?"](t.$first()))===r||o.$$is_boolean&&1!=o||(_=t.$shift(),s.$warn_if_key_taken(e,_,u),s.$add_shared_example_group(e,_,u)),(o=t["$empty?"]())===r||o.$$is_boolean&&1!=o?(p=l.get("Module").$new(),(o=(a=function(e){e.$$scope,e.$$proto;return e}(p.$singleton_class())).$send,o.$$p=(i=function(e){{var t,n;i.$$s||this}return null==e&&(e=r),(t=(n=e).$class_eval,t.$$p=u.$to_proc(),t).call(n)},i.$$s=s,i),o).call(a,"define_method","extended"),(o=l.get("RSpec").$configuration()).$extend.apply(o,[p].concat(t))):r},c.$shared_example_groups_for=function(e){var t=this;return e=$.call(arguments,0),l.get("Collection").$new(e,t.$shared_example_groups())},c.$shared_example_groups=function(){var e,t,n,$,o=this;return(e=o.shared_example_groups)!==!1&&e!==r?e:o.shared_example_groups=(t=(n=l.get("Hash")).$new,t.$$p=($=function(e,t){$.$$s||this;return null==e&&(e=r),null==t&&(t=r),e["$[]="](t,l.get("Hash").$new())},$.$$s=o,$),t).call(n)},c.$clear=function(){var e=this;return e.$shared_example_groups().$clear()},a.$private(),c.$add_shared_example_group=function(e,t,n){var r=this;return r.$shared_example_groups()["$[]"](e)["$[]="](t,n)},c["$key?"]=function(e){var t,n,$,o=this;return(t=(n=[l.get("String"),l.get("Symbol"),l.get("Module")])["$any?"],t.$$p=($=function(t){$.$$s||this;return null==t&&(t=r),t["$==="](e)},$.$$s=o,$),t).call(n)},c.$warn_if_key_taken=function(e,t,n){var $,o=this,a=r;return($=a=o.$example_block_for(e,t))===r||$.$$is_boolean&&1!=$?r:l.get("RSpec").$warn_with(("            |WARNING: Shared example group '"+t+"' has been previously defined at:\n            |  "+o.$formatted_location(a)+"\n            |...and you are now defining it at:\n            |  "+o.$formatted_location(n)+"\n            |The new definition will overwrite the original one.\n").$gsub(/^ +\|/,""),s(["call_site"],{call_site:r}))},c.$formatted_location=function(e){return e.$source_location().$join(":")},c.$example_block_for=function(e,t){var n=this;return n.$shared_example_groups()["$[]"](e)["$[]"](t)},(o=l.get("Proc")["$method_defined?"]("source_location"))===r||o.$$is_boolean&&1!=o?(c.$ensure_block_has_source_location=function(e,t){var n,r,$,o=this;return e.$extend((n=(r=l.get("Module")).$new,n.$$p=($=function(){var e,n,r,o=$.$$s||this;return(e=(n=o).$define_method,e.$$p=(r=function(){r.$$s||this;return t.$split(":")},r.$$s=o,r),e).call(n,"source_location")},$.$$s=o,$),n).call(r))},r&&"ensure_block_has_source_location"):(c.$ensure_block_has_source_location=function(){return r},r&&"ensure_block_has_source_location")}(c,null),e.donate(c,["$shared_examples","$shared_example_groups"])}(n)}(n)}(t),t.$extend(n.get("RSpec").$$scope.get("Core").$$scope.get("SharedExampleGroup").$$scope.get("TopLevelDSL")),n.get("Module").$send("include",n.get("RSpec").$$scope.get("Core").$$scope.get("SharedExampleGroup").$$scope.get("TopLevelDSL"))},Opal.modules["rspec/core/example_group"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass,a=e.hash2,i=e.gvars;return e.add_stubs(["$extend","$include","$world","$register","$each","$define_method","$[]","$metadata","$call","$format_docstrings_block","$configuration","$delegate_to_metadata","$alias_method","$build_hash_from","$update","$<<","$examples","$new","$last","$define_example_method","$describe","$find_and_eval_shared","$to_proc","$[]=","$define_nested_shared_group_method","$shared_example_groups","$raise","$inspect","$module_exec","$module_eval","$filtered_examples","$+","$inject","$descendant_filtered_examples","$children","$respond_to?","$superclass","$is_a?","$subclass","$set_it_up","$assign_const","$define_helpers_on","$descendants","$select","$<","$ancestors","$==","$configure_mock_framework","$configure_expectation_framework","$ensure_example_groups_are_configured","$first","$shift","$unshift","$process","$superclass_metadata","$register_globals","$hooks","$configure_group","$empty?","$instance_variables","$before_all_ivars","$instance_variable_get","$instance_variable_set","$assign_before_all_ivars","$isolate_for_all_hook","$run_hook","$store_before_all_ivars","$wants_to_quit","$top_level?","$clear_remaining_example_groups","$example_group_started","$run_before_all_hooks","$run_examples","$all?","$map","$run","$order","$ordering_strategy","$fail_fast?","$wants_to_quit=","$fail_filtered_examples","$run_after_all_hooks","$clear","$example_group_finished","$fetch","$ordering_registry","$warn","$gsub","$set_ivars","$!","$fail_with_exception","$any_apply?","$all_apply?","$collect","$declaration_line_numbers","$description","$parent_groups","$described_class","$class","$instance_exec","$current_example","$set_exception","$base_name_for","$constant_scope_for","$disambiguate","$const_set","$gsub!","$upcase","$lstrip!","$const_defined?","$next!"]),function(t){{var s=$(t,"RSpec");s.$$proto,s.$$scope}!function(t){{var i=$(t,"Core");i.$$proto,i.$$scope}!function(t,$super){function $(){}var i,s,c,l,u,_,p=$=o(t,$super,"ExampleGroup",$),d=p.$$proto,f=p.$$scope;return p.$extend(f.get("Hooks")),p.$include(f.get("MemoizedHelpers")),p.$include(f.get("Pending")),p.$extend(f.get("SharedExampleGroup")),e.defs(p,"$world",function(){return f.get("RSpec").$world()}),e.defs(p,"$register",function(){var e=this;return e.$world().$register(e)}),function(t){{var $=t.$$scope;t.$$proto}return e.defs(t,"$delegate_to_metadata",function(e){var t,$,o,a=this;return e=r.call(arguments,0),(t=($=e).$each,t.$$p=(o=function(e){var t,r,$,a=o.$$s||this;return null==e&&(e=n),(t=(r=a).$define_method,t.$$p=($=function(){var t=$.$$s||this;return t.$metadata()["$[]"]("example_group")["$[]"](e)},$.$$s=a,$),t).call(r,e)},o.$$s=a,o),t).call($)}),t.$$proto.$description=function(){var e=this,t=n;return t=e.$metadata()["$[]"]("example_group")["$[]"]("description"),$.get("RSpec").$configuration().$format_docstrings_block().$call(t)},t.$delegate_to_metadata("described_class","file_path"),t.$alias_method("display_name","description"),t.$alias_method("describes","described_class"),e.defs(t,"$define_example_method",function(e,t){var o,i,s,c=this;return null==t&&(t=a([],{})),(o=(i=c).$define_method,o.$$p=(s=function(e){var o,i,c=s.$$s||this,l=n,u=n,_=n;return e=r.call(arguments,0),o=s.$$p||n,s.$$p=null,(i=e).$to_a&&!i.$to_a.$$stub?i=i.$to_a():i.$$is_array?i:i=[i],l=null==i[0]?n:i[0],u=r.call(i,1),_=$.get("Metadata").$build_hash_from(u),o!==!1&&o!==n||_.$update(a(["pending"],{pending:$.get("RSpec").$$scope.get("Core").$$scope.get("Pending").$$scope.get("NOT_YET_IMPLEMENTED")})),_.$update(t),c.$examples()["$<<"]($.get("RSpec").$$scope.get("Core").$$scope.get("Example").$new(c,l,_,o)),c.$examples().$last()},s.$$s=c,s),o).call(i,e)}),t.$define_example_method("example"),t.$define_example_method("it"),t.$define_example_method("specify"),t.$define_example_method("focus",a(["focused","focus"],{focused:!0,focus:!0})),t.$define_example_method("focused",a(["focused","focus"],{focused:!0,focus:!0})),t.$define_example_method("fit",a(["focused","focus"],{focused:!0,focus:!0})),t.$define_example_method("pending",a(["pending"],{pending:!0})),t.$define_example_method("xexample",a(["pending"],{pending:"Temporarily disabled with xexample"})),t.$define_example_method("xit",a(["pending"],{pending:"Temporarily disabled with xit"})),t.$define_example_method("xspecify",a(["pending"],{pending:"Temporarily disabled with xspecify"})),t.$$proto.$alias_example_to=function(e,t){var n=this;return null==t&&(t=a([],{})),function(e){e.$$scope,e.$$proto;return e}(n.$singleton_class()).$define_example_method(e,t)},e.defs(t,"$define_nested_shared_group_method",function(e,t){var $,o,a,i=this;return null==t&&(t="it should behave like"),($=(o=i).$define_method,$.$$p=(a=function(e,$){var o,i,s,c,l=a.$$s||this,u=n;return null==e&&(e=n),$=r.call(arguments,1),o=a.$$p||n,a.$$p=null,u=(i=(s=l).$describe,i.$$p=(c=function(){var t,n,r=c.$$s||this;return(t=(n=r).$find_and_eval_shared,t.$$p=o.$to_proc(),t).apply(n,["examples",e].concat($))},c.$$s=l,c),i).call(s,""+t+" "+e),u.$metadata()["$[]="]("shared_group_name",e),u},a.$$s=i,a),$).call(o,e)}),t.$define_nested_shared_group_method("it_behaves_like","behaves like"),t.$define_nested_shared_group_method("it_should_behave_like"),t.$$proto.$alias_it_behaves_like_to=TMP_6=function(e,t){var $,o,a=this,i=TMP_6.$$p,s=i||n;return t=r.call(arguments,1),TMP_6.$$p=null,($=(o=function(e){e.$$scope,e.$$proto;return e}(a.$singleton_class())).$define_nested_shared_group_method,$.$$p=s.$to_proc(),$).apply(o,[e].concat(t))},n&&"alias_it_behaves_like_to"}(p.$singleton_class()),e.defs(p,"$include_context",i=function(e,t){var $,o,a=this,s=i.$$p,c=s||n;return t=r.call(arguments,1),i.$$p=null,($=(o=a).$find_and_eval_shared,$.$$p=c.$to_proc(),$).apply(o,["context",e].concat(t))}),e.defs(p,"$include_examples",s=function(e,t){var $,o,a=this,i=s.$$p,c=i||n;return t=r.call(arguments,1),s.$$p=null,($=(o=a).$find_and_eval_shared,$.$$p=c.$to_proc(),$).apply(o,["examples",e].concat(t))}),e.defs(p,"$find_and_eval_shared",c=function(e,t,$){var o,a,i,s=this,l=c.$$p,u=l||n,_=n;return $=r.call(arguments,2),c.$$p=null,((o=_=s.$shared_example_groups()["$[]"](t))===n||o.$$is_boolean&&1!=o)&&s.$raise(f.get("ArgumentError"),"Could not find shared "+e+" "+t.$inspect()),(o=(a=s).$module_exec,o.$$p=_.$to_proc(),o).apply(a,[].concat($)),u!==!1&&u!==n?(o=(i=s).$module_eval,o.$$p=u.$to_proc(),o).call(i):n}),e.defs(p,"$examples",function(){var e,t=this;return null==t.examples&&(t.examples=n),(e=t.examples)!==!1&&e!==n?e:t.examples=[]}),e.defs(p,"$filtered_examples",function(){var e=this;return e.$world().$filtered_examples()["$[]"](e)}),e.defs(p,"$descendant_filtered_examples",function(){var e,t,r,$,o=this;return null==o.descendant_filtered_examples&&(o.descendant_filtered_examples=n),(e=o.descendant_filtered_examples)!==!1&&e!==n?e:o.descendant_filtered_examples=o.$filtered_examples()["$+"]((t=(r=o.$children()).$inject,t.$$p=($=function(e,t){$.$$s||this;return null==e&&(e=n),null==t&&(t=n),e["$+"](t.$descendant_filtered_examples())},$.$$s=o,$),t).call(r,[]))}),e.defs(p,"$metadata",function(){var e,t,r=this;return null==r.metadata&&(r.metadata=n),t=r.metadata,(e=null!=t&&t!==n?"instance-variable":n)===n||e.$$is_boolean&&1!=e?n:r.metadata}),e.defs(p,"$superclass_metadata",function(){var e,t,r=this;return null==r.superclass_metadata&&(r.superclass_metadata=n),(e=r.superclass_metadata)!==!1&&e!==n?e:r.superclass_metadata=function(){return(t=r.$superclass()["$respond_to?"]("metadata"))===n||t.$$is_boolean&&1!=t?n:r.$superclass().$metadata()}()}),e.defs(p,"$describe",l=function(e){var t,$,o=this,i=l.$$p,s=i||n,c=n;return e=r.call(arguments,0),l.$$p=null,((t=e.$last()["$is_a?"](f.get("Hash")))===n||t.$$is_boolean&&1!=t)&&e["$<<"](a([],{})),e.$last().$update(a(["example_group_block"],{example_group_block:s})),c=(t=($=o).$subclass,t.$$p=s.$to_proc(),t).call($,o,e),o.$children()["$<<"](c),c}),function(e){e.$$scope,e.$$proto;return e.$alias_method("context","describe")}(p.$singleton_class()),e.defs(p,"$subclass",u=function(e,t){var r,$,o,a=u.$$p,i=a||n,s=n;return u.$$p=null,s=f.get("Class").$new(e),(r=s).$set_it_up.apply(r,[].concat(t)),f.get("ExampleGroups").$assign_const(s),i!==!1&&i!==n&&($=(o=s).$module_eval,$.$$p=i.$to_proc(),$).call(o),f.get("MemoizedHelpers").$define_helpers_on(s),s}),e.defs(p,"$children",function(){var e,t=this;return null==t.children&&(t.children=n),(e=t.children)!==!1&&e!==n?e:t.children=[]}),e.defs(p,"$descendants",function(){var e,t,r,$,o=this;return null==o._descendants&&(o._descendants=n),(e=o._descendants)!==!1&&e!==n?e:o._descendants=[o]["$+"]((t=(r=o.$children()).$inject,t.$$p=($=function(e,t){$.$$s||this;return null==e&&(e=n),null==t&&(t=n),e["$+"](t.$descendants())},$.$$s=o,$),t).call(r,[]))}),e.defs(p,"$parent_groups",function(){var e,t,r,$,o=this;return null==o.parent_groups&&(o.parent_groups=n),(e=o.parent_groups)!==!1&&e!==n?e:o.parent_groups=(t=(r=o.$ancestors()).$select,t.$$p=($=function(e){$.$$s||this;return null==e&&(e=n),e["$<"](f.get("RSpec").$$scope.get("Core").$$scope.get("ExampleGroup"))},$.$$s=o,$),t).call(r)}),e.defs(p,"$top_level?",function(){var e,t=this;return null==t.top_level&&(t.top_level=n),(e=t.top_level)!==!1&&e!==n?e:t.top_level=t.$superclass()["$=="](f.get("ExampleGroup"))}),e.defs(p,"$ensure_example_groups_are_configured",function(){var t;return(t=null!=e.cvars["@@example_groups_configured"]?"class variable":n)===n||t.$$is_boolean&&1!=t?(f.get("RSpec").$configuration().$configure_mock_framework(),f.get("RSpec").$configuration().$configure_expectation_framework(),e.cvars["@@example_groups_configured"]=!0):n}),e.defs(p,"$set_it_up",function(e){var t,$=this,o=n;return e=r.call(arguments,0),$.$ensure_example_groups_are_configured(),(t=e.$first()["$is_a?"](f.get("Symbol")))===n||t.$$is_boolean&&1!=t||(o=e.$shift()),e["$<<"](f.get("Metadata").$build_hash_from(e)),o!==!1&&o!==n&&e.$unshift(o),$.metadata=(t=f.get("RSpec").$$scope.get("Core").$$scope.get("Metadata").$new($.$superclass_metadata())).$process.apply(t,[].concat(e)),$.order=n,$.$hooks().$register_globals($,f.get("RSpec").$configuration().$hooks()),$.$world().$configure_group($)}),e.defs(p,"$before_all_ivars",function(){var e,t=this;return null==t.before_all_ivars&&(t.before_all_ivars=n),(e=t.before_all_ivars)!==!1&&e!==n?e:t.before_all_ivars=a([],{})}),e.defs(p,"$store_before_all_ivars",function(e){var t,r,$,o=this;return(t=e.$instance_variables()["$empty?"]())===n||t.$$is_boolean&&1!=t?(t=(r=e.$instance_variables()).$each,t.$$p=($=function(t){var r=$.$$s||this;return null==t&&(t=n),r.$before_all_ivars()["$[]="](t,e.$instance_variable_get(t))},$.$$s=o,$),t).call(r):n}),e.defs(p,"$assign_before_all_ivars",function(e,t){var r,$,o,a=this;return(r=($=e).$each,r.$$p=(o=function(e,r){o.$$s||this;return null==e&&(e=n),null==r&&(r=n),t.$instance_variable_set(e,r)
},o.$$s=a,o),r).call($)}),e.defs(p,"$run_before_all_hooks",function(e){var t,r,$,o=this;if((t=o.$descendant_filtered_examples()["$empty?"]())!==n&&(!t.$$is_boolean||1==t))return n;try{return o.$assign_before_all_ivars(o.$superclass().$before_all_ivars(),e),(t=(r=f.get("AllHookMemoizedHash").$$scope.get("Before")).$isolate_for_all_hook,t.$$p=($=function(){var t=$.$$s||this;return t.$run_hook("before","all",e)},$.$$s=o,$),t).call(r,e)}finally{o.$store_before_all_ivars(e)}}),e.defs(p,"$run_around_each_hooks",function(e,t){var n=this;return n.$run_hook("around","each",e,t)}),e.defs(p,"$run_before_each_hooks",function(e){var t=this;return t.$run_hook("before","each",e)}),e.defs(p,"$run_after_each_hooks",function(e){var t=this;return t.$run_hook("after","each",e)}),e.defs(p,"$run_after_all_hooks",function(e){var t,r,$,o=this;return(t=o.$descendant_filtered_examples()["$empty?"]())===n||t.$$is_boolean&&1!=t?(o.$assign_before_all_ivars(o.$before_all_ivars(),e),(t=(r=f.get("AllHookMemoizedHash").$$scope.get("After")).$isolate_for_all_hook,t.$$p=($=function(){var t=$.$$s||this;return t.$run_hook("after","all",e)},$.$$s=o,$),t).call(r,e)):n}),e.defs(p,"$run",function(t){var r,$,o,a,i=this,s=n,c=n,l=n;if((r=f.get("RSpec").$wants_to_quit())!==n&&(!r.$$is_boolean||1==r))return(r=i["$top_level?"]())===n||r.$$is_boolean&&1!=r||f.get("RSpec").$clear_remaining_example_groups(),n;t.$example_group_started(i);try{try{return i.$run_before_all_hooks(i.$new()),s=i.$run_examples(t),c=(r=($=i.$ordering_strategy().$order(i.$children())).$map,r.$$p=(o=function(e){o.$$s||this;return null==e&&(e=n),e.$run(t)},o.$$s=i,o),r).call($)["$all?"](),(r=s!==!1&&s!==n)?c:r}catch(u){if(e.rescue(u,[f.get("Exception")]))return l=u,(r=i["$fail_fast?"]())===n||r.$$is_boolean&&1!=r||(r=[!0],a=f.get("RSpec"),a["$wants_to_quit="].apply(a,r),r[r.length-1]),i.$fail_filtered_examples(l,t);throw u}}finally{i.$run_after_all_hooks(i.$new()),i.$before_all_ivars().$clear(),t.$example_group_finished(i)}}),e.defs(p,"$ordering_strategy",function(){var e,t,r,$=this,o=n,a=n;return o=$.$metadata().$fetch("order","global"),a=f.get("RSpec").$configuration().$ordering_registry(),(e=(t=a).$fetch,e.$$p=(r=function(){var e=r.$$s||this;return e.$warn(("            |WARNING: Ignoring unknown ordering specified using `:order => "+o.$inspect()+"` metadata.\n            |         Falling back to configured global ordering.\n            |         Unrecognized ordering specified at: "+e.$metadata()["$[]"]("example_group")["$[]"]("location")+"\n").$gsub(/^ +\|/,"")),a.$fetch("global")},r.$$s=$,r),e).call(t,o)}),e.defs(p,"$run_examples",function(e){var t,r,$,o=this;return(t=(r=o.$ordering_strategy().$order(o.$filtered_examples())).$map,t.$$p=($=function(t){var r,o,a=$.$$s||this,i=n,s=n;return null==t&&(t=n),(r=f.get("RSpec").$wants_to_quit())===n||r.$$is_boolean&&1!=r?(i=a.$new(),a.$set_ivars(i,a.$before_all_ivars()),s=t.$run(i,e),o=a["$fail_fast?"](),(r=o!==!1&&o!==n?s["$!"]():o)===n||r.$$is_boolean&&1!=r||(r=[!0],o=f.get("RSpec"),o["$wants_to_quit="].apply(o,r),r[r.length-1]),s):n},$.$$s=o,$),t).call(r)["$all?"]()}),e.defs(p,"$fail_filtered_examples",function(e,t){var r,$,o,a,i,s=this;return(r=($=s.$filtered_examples()).$each,r.$$p=(o=function(r){o.$$s||this;return null==r&&(r=n),r.$fail_with_exception(t,e)},o.$$s=s,o),r).call($),(r=(a=s.$children()).$each,r.$$p=(i=function(r){i.$$s||this;return null==r&&(r=n),t.$example_group_started(r),r.$fail_filtered_examples(e,t),t.$example_group_finished(r)},i.$$s=s,i),r).call(a),!1}),e.defs(p,"$fail_fast?",function(){return f.get("RSpec").$configuration()["$fail_fast?"]()}),e.defs(p,"$any_apply?",function(e){var t=this;return t.$metadata()["$any_apply?"](e)}),e.defs(p,"$all_apply?",function(e){var t=this;return t.$metadata()["$all_apply?"](e)}),e.defs(p,"$declaration_line_numbers",function(){var e,t,r,$,o,a,i=this;return null==i.declaration_line_numbers&&(i.declaration_line_numbers=n),(e=i.declaration_line_numbers)!==!1&&e!==n?e:i.declaration_line_numbers=[i.$metadata()["$[]"]("example_group")["$[]"]("line_number")]["$+"]((t=(r=i.$examples()).$collect,t.$$p=($=function(e){$.$$s||this;return null==e&&(e=n),e.$metadata()["$[]"]("line_number")},$.$$s=i,$),t).call(r))["$+"]((t=(o=i.$children()).$inject,t.$$p=(a=function(e,t){a.$$s||this;return null==e&&(e=n),null==t&&(t=n),e["$+"](t.$declaration_line_numbers())},a.$$s=i,a),t).call(o,[]))}),e.defs(p,"$top_level_description",function(){var e=this;return e.$parent_groups().$last().$description()}),e.defs(p,"$set_ivars",function(e,t){var r,$,o,a=this;return(r=($=t).$each,r.$$p=(o=function(t,r){o.$$s||this;return null==t&&(t=n),null==r&&(r=n),e.$instance_variable_set(t,r)},o.$$s=a,o),r).call($)}),d.$described_class=function(){var e=this;return e.$class().$described_class()},d.$instance_exec_with_rescue=_=function(t,r){var $,o,a=this,i=_.$$p,s=i||n,c=n;null==r&&(r=n),_.$$p=null;try{return($=(o=a).$instance_exec,$.$$p=s.$to_proc(),$).call(o,t)}catch(l){if(e.rescue(l,[f.get("Exception")]))return c=l,($=f.get("RSpec").$current_example())===n||$.$$is_boolean&&1!=$?a.$raise():f.get("RSpec").$current_example().$set_exception(c,r);throw l}},n&&"instance_exec_with_rescue"}(i,null)}(s),function(t){var r=$(t,"ExampleGroups"),o=(r.$$proto,r.$$scope);e.defs(r,"$assign_const",function(e){var t=this,r=n,$=n,o=n;return r=t.$base_name_for(e),$=t.$constant_scope_for(e),o=t.$disambiguate(r,$),$.$const_set(o,e)}),e.defs(r,"$constant_scope_for",function(e){var t=this,r=n;return r=e.$superclass(),r["$=="](o.get("Core").$$scope.get("ExampleGroup"))&&(r=t),r}),e.defs(r,"$base_name_for",function(e){var t,r,$,o=this,a=n;return(t=e.$description()["$empty?"]())===n||t.$$is_boolean&&1!=t?(a=" "["$+"](e.$description()),(t=(r=a)["$gsub!"],t.$$p=($=function(){{var e;$.$$s||this}return((e=i["~"])===n?n:e["$[]"](1)).$upcase()},$.$$s=o,$),t).call(r,/[^0-9a-zA-Z]+([0-9a-zA-Z])/),a["$lstrip!"](),a["$gsub!"](/\W/,""),a["$gsub!"](/\A([^A-Z]|\z)/,"Nested\\1"),a):"Anonymous"}),e.defs(r,"$disambiguate",function(e,t){var r,$;if((r=t["$const_defined?"](e))===n||r.$$is_boolean&&1!=r)return e;for(e["$<<"]("_2");($=t["$const_defined?"](e))!==n&&(!$.$$is_boolean||1==$);)e["$next!"]();return e})}(s)}(t)},Opal.modules["rspec/mocks/instance_method_stasher"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$attr_reader","$<","$to_f","$!","$method_defined_directly_on_klass?","$__send__","$stashed_method_name","$private","$method_handle_for","$method_defined_on_klass?","$method_owned_by_klass?","$method_defined?","$private_method_defined?","$owner","$instance_method","$===","$class","$=="]),function(t){{var o=r(t,"RSpec");o.$$proto,o.$$scope}!function(t){{var o=r(t,"Mocks");o.$$proto,o.$$scope}!function(t,$super){function r(){}var o=r=$(t,$super,"InstanceMethodStasher",r),a=o.$$proto,i=o.$$scope;return a.method_is_stashed=a.klass=a.method=a.original_method=a.object=n,a.$initialize=function(e,t){var r=this;return r.object=e,r.method=t,r.klass=function(e){e.$$scope,e.$$proto;return e}(e.$singleton_class()),r.original_method=n,r.method_is_stashed=!1},o.$attr_reader("original_method"),i.get("RUBY_VERSION").$to_f()["$<"](1.9)?(a["$method_is_stashed?"]=function(){var e=this;return e.method_is_stashed},a.$stash=function(){var e,t,r=this;return(e=(t=r["$method_defined_directly_on_klass?"]()["$!"]())!==!1&&t!==n?t:r.method_is_stashed)===n||e.$$is_boolean&&1!=e?(r.klass.$__send__("alias_method",r.$stashed_method_name(),r.method),r.method_is_stashed=!0):n},a.$stashed_method_name=function(){var e=this;return"obfuscated_by_rspec_mocks__"+e.method},o.$private("stashed_method_name"),a.$restore=function(){var e,t=this;return(e=t.method_is_stashed)===n||e.$$is_boolean&&1!=e?n:((e=t.klass.$__send__("method_defined?",t.method))===n||e.$$is_boolean&&1!=e||t.klass.$__send__("undef_method",t.method),t.klass.$__send__("alias_method",t.method,t.$stashed_method_name()),t.klass.$__send__("remove_method",t.$stashed_method_name()),t.method_is_stashed=!1)}):(a["$method_is_stashed?"]=function(){var e=this;return e.original_method["$!"]()["$!"]()},a.$stash=function(){var t,r=this;return(t=r["$method_defined_directly_on_klass?"]()["$!"]())===n||t.$$is_boolean&&1!=t?(t=r.original_method)!==!1&&t!==n?t:r.original_method=e.get("RSpec").$$scope.get("Mocks").$method_handle_for(r.object,r.method):n},a.$restore=function(){var e,t=this;return(e=t.original_method)===n||e.$$is_boolean&&1!=e?n:((e=t.klass.$__send__("method_defined?",t.method))===n||e.$$is_boolean&&1!=e||t.klass.$__send__("undef_method",t.method),t.klass.$__send__("define_method",t.method,t.original_method),t.original_method=n)}),o.$private(),a["$method_defined_directly_on_klass?"]=function(){var e,t=this;return e=t["$method_defined_on_klass?"](),e!==!1&&e!==n?t["$method_owned_by_klass?"]():e},a["$method_defined_on_klass?"]=function(e){var t,r=this;return null==e&&(e=r.klass),(t=e["$method_defined?"](r.method))!==!1&&t!==n?t:e["$private_method_defined?"](r.method)},a["$method_owned_by_klass?"]=function(){var e,t=this,r=n;return r=t.klass.$instance_method(t.method).$owner(),((e=i.get("Module")["$==="](r))===n||e.$$is_boolean&&1!=e)&&(r=r.$class()),(e=r["$=="](t.klass))!==!1&&e!==n?e:t["$method_defined_on_klass?"](r)["$!"]()},n&&"method_owned_by_klass?"}(o,null)}(o)}(t)},Opal.modules["rspec/mocks/method_double"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass,a=e.hash2;return e.add_stubs(["$attr_reader","$new","$original_method","$method_handle_for","$method_name","$__send__","$to_proc","$alias_method","$===","$private_method_defined?","$object_singleton_class","$protected_method_defined?","$visibility","$stash","$define_proxy_method","$save_original_method!","$class_exec","$define_method","$proxy_method_invoked","$message_received","$method_is_stashed?","$restore","$restore_original_visibility","$method_defined?","$each","$verify_messages_received","$expectations","$restore_original_method","$clear","$stubs","$configure_method","$message_expectation_class","$<<","$unshift","$setup_simple_method_double","$any?","$add_stub","$empty?","$raise_method_not_stubbed_error","$reset","$delete","$raise"]),function(t){{var i=$(t,"RSpec");i.$$proto,i.$$scope}!function(t){{var i=$(t,"Mocks");i.$$proto,i.$$scope}!function(t,$super){function $(){}var i,s,c,l,u=$=o(t,$super,"MethodDouble",$),_=u.$$proto,p=u.$$scope;return _.original_method=_.method_stasher=_.proxy=_.object=_.method_name=_.method_is_proxied=_.original_visibility=n,u.$attr_reader("method_name","object","expectations","stubs"),_.$initialize=function(e,t,r){var $=this;return $.method_name=t,$.object=e,$.proxy=r,$.original_visibility=n,$.method_stasher=p.get("InstanceMethodStasher").$new(e,t),$.method_is_proxied=!1,$.expectations=[],$.stubs=[]},_.$original_method=function(){var e,t,$,o,a,i=this;return(e=i.original_method)!==!1&&e!==n?e:i.original_method=(t=($=i.method_stasher.$original_method())!==!1&&$!==n?$:i.proxy.$method_handle_for(i.$method_name()))!==!1&&t!==n?t:($=(o=p.get("Proc")).$new,$.$$p=(a=function(e){var t,$,o,i=a.$$s||this;return null==i.object&&(i.object=n),null==i.method_name&&(i.method_name=n),e=r.call(arguments,0),t=a.$$p||n,a.$$p=null,($=(o=i.object).$__send__,$.$$p=t.$to_proc(),$).apply(o,["method_missing",i.method_name].concat(e))},a.$$s=i,a),$).call(o)},u.$alias_method("save_original_method!","original_method"),_.$visibility=function(){var e,t=this;return(e=p.get("TestDouble")["$==="](t.object))===n||e.$$is_boolean&&1!=e?(e=t.$object_singleton_class()["$private_method_defined?"](t.method_name))===n||e.$$is_boolean&&1!=e?(e=t.$object_singleton_class()["$protected_method_defined?"](t.method_name))===n||e.$$is_boolean&&1!=e?"public":"protected":"private":"public"},_.$object_singleton_class=function(){var e=this;return function(e){e.$$scope,e.$$proto;return e}(e.object.$singleton_class())},_.$configure_method=function(){var e,t=this;return t.original_visibility=[t.$visibility(),t.$method_name()],((e=t.method_is_proxied)===n||e.$$is_boolean&&1!=e)&&t.method_stasher.$stash(),t.$define_proxy_method()},_.$define_proxy_method=function(){var e,t,$,o=this;return(e=o.method_is_proxied)===n||e.$$is_boolean&&1!=e?(o["$save_original_method!"](),(e=(t=o.$object_singleton_class()).$class_exec,e.$$p=($=function(e,t,o){var a,i,s,c=$.$$s||this;return null==e&&(e=n),null==t&&(t=n),null==o&&(o=n),(a=(i=c).$define_method,a.$$p=(s=function(t){var $,o,a,i=s.$$s||this;return t=r.call(arguments,0),$=s.$$p||n,s.$$p=null,(o=(a=e).$proxy_method_invoked,o.$$p=$.$to_proc(),o).apply(a,[i].concat(t))},s.$$s=c,s),a).call(i,t),c.$__send__(o,t)},$.$$s=o,$),e).call(t,o,o.$method_name(),o.$visibility()),o.method_is_proxied=!0):n},_.$proxy_method_invoked=i=function(e,t){var $,o,a=this,s=i.$$p,c=s||n;return t=r.call(arguments,1),i.$$p=null,($=(o=a.proxy).$message_received,$.$$p=c.$to_proc(),$).apply(o,[a.$method_name()].concat(t))},_.$restore_original_method=function(){var e,t=this;return(e=t.method_is_proxied)===n||e.$$is_boolean&&1!=e?n:(t.$object_singleton_class().$__send__("remove_method",t.method_name),(e=t.method_stasher["$method_is_stashed?"]())===n||e.$$is_boolean&&1!=e||t.method_stasher.$restore(),t.$restore_original_visibility(),t.method_is_proxied=!1)},_.$restore_original_visibility=function(){var e,t,r,$=this;return t=$.original_visibility,(e=t!==!1&&t!==n?(r=$.$object_singleton_class()["$method_defined?"]($.method_name))!==!1&&r!==n?r:$.$object_singleton_class()["$private_method_defined?"]($.method_name):t)===n||e.$$is_boolean&&1!=e?n:(e=$.$object_singleton_class()).$__send__.apply(e,[].concat($.original_visibility))},_.$verify=function(){var e,t,r,$=this;return(e=(t=$.$expectations()).$each,e.$$p=(r=function(e){r.$$s||this;return null==e&&(e=n),e.$verify_messages_received()},r.$$s=$,r),e).call(t)},_.$reset=function(){var e=this;return e.$restore_original_method(),e.$clear()},_.$clear=function(){var e=this;return e.$expectations().$clear(),e.$stubs().$clear()},_.$message_expectation_class=function(){return p.get("MessageExpectation")},_.$add_expectation=s=function(e,t,r,$){var o,a,i=this,c=s.$$p,l=c||n,u=n;return s.$$p=null,i.$configure_method(),u=(o=(a=i.$message_expectation_class()).$new,o.$$p=l.$to_proc(),o).call(a,e,t,r,i,1,$),i.$expectations()["$<<"](u),u},_.$build_expectation=function(e,t){var r=this,$=n;return $=p.get("IGNORED_BACKTRACE_LINE"),r.$message_expectation_class().$new(e,t,$,r)},_.$add_stub=c=function(e,t,r,$){var o,i,s=this,l=c.$$p,u=l||n,_=n;return null==$&&($=a([],{})),c.$$p=null,s.$configure_method(),_=(o=(i=s.$message_expectation_class()).$new,o.$$p=u.$to_proc(),o).call(i,e,t,r,s,"any",$),s.$stubs().$unshift(_),_},_.$add_simple_stub=function(e,t){var n=this;return n.$setup_simple_method_double(e,t,n.$stubs())},_.$add_simple_expectation=function(e,t,n,r){var $=this;return $.$setup_simple_method_double(e,t,$.$expectations(),n,r)},_.$setup_simple_method_double=function(e,t,r,$,o){var a=this,i=n;return null==$&&($=n),null==o&&(o=n),a.$define_proxy_method(),i=p.get("SimpleMessageExpectation").$new(e,t,$,o),r.$unshift(i),i},_.$add_default_stub=l=function(e){var t,$,o=this,a=l.$$p,i=a||n;return e=r.call(arguments,0),l.$$p=null,(t=o.$stubs()["$any?"]())===n||t.$$is_boolean&&1!=t?(t=($=o).$add_stub,t.$$p=i.$to_proc(),t).apply($,[].concat(e)):n},_.$remove_stub=function(){var e,t=this;return(e=t.$stubs()["$empty?"]())===n||e.$$is_boolean&&1!=e||t.$raise_method_not_stubbed_error(),(e=t.$expectations()["$empty?"]())===n||e.$$is_boolean&&1!=e?t.$stubs().$clear():t.$reset()},_.$remove_single_stub=function(e){var t,r,$=this;return $.$stubs().$delete(e),r=$.$stubs()["$empty?"](),(t=r!==!1&&r!==n?$.$expectations()["$empty?"]():r)===n||t.$$is_boolean&&1!=t?n:$.$restore_original_method()},_.$raise_method_not_stubbed_error=function(){var e=this;return e.$raise(p.get("MockExpectationError"),"The method `"+e.$method_name()+"` was not stubbed or was already unstubbed")},e.cdecl(p,"IGNORED_BACKTRACE_LINE","this backtrace line is ignored")}(i,null)}(i)}(t)},Opal.modules["rspec/mocks/argument_matchers"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass,a=e.hash2;return e.add_stubs(["$===","$==","$=~","$include?","$all?","$has_key?","$[]","$sub","$inspect","$none?","$superset?","$new","$join","$respond_to?","$matches?","$instance_of?","$kind_of?","$anythingize_lonely_keys","$first","$count","$alias_method","$private","$class","$last","$delete_at","$each","$[]=","$anything"]),function(t){{var i=$(t,"RSpec");i.$$proto,i.$$scope}!function(t){{var i=$(t,"Mocks");i.$$proto,i.$$scope}!function(t){var i=$(t,"ArgumentMatchers"),s=i.$$proto,c=i.$$scope;!function(e,$super){function t(){}{var r=t=o(e,$super,"AnyArgsMatcher",t),$=r.$$proto;r.$$scope}return $.$description=function(){return"any args"},n&&"description"}(i,null),function(e,$super){function t(){}{var r=t=o(e,$super,"AnyArgMatcher",t),$=r.$$proto;r.$$scope}return $.$initialize=function(){return n},$["$=="]=function(){return!0},n&&"=="}(i,null),function(e,$super){function t(){}{var r=t=o(e,$super,"NoArgsMatcher",t),$=r.$$proto;r.$$scope}return $.$description=function(){return"no args"},n&&"description"}(i,null),function(e,$super){function t(){}var r=t=o(e,$super,"RegexpMatcher",t),$=r.$$proto,a=r.$$scope;return $.regexp=n,$.$initialize=function(e){var t=this;return t.regexp=e},$["$=="]=function(e){var t,r=this;return(t=a.get("Regexp")["$==="](e))===n||t.$$is_boolean&&1!=t?e["$=~"](r.regexp):e["$=="](r.regexp)},n&&"=="}(i,null),function(e,$super){function t(){}{var r=t=o(e,$super,"BooleanMatcher",t),$=r.$$proto;r.$$scope}return $.$initialize=function(){return n},$["$=="]=function(e){return[!0,!1]["$include?"](e)},n&&"=="}(i,null),function(t,$super){function r(){}var $=r=o(t,$super,"HashIncludingMatcher",r),a=$.$$proto,i=$.$$scope;return a.expected=n,a.$initialize=function(e){var t=this;return t.expected=e},a["$=="]=function(t){var r,$,o,a=this;try{return(r=($=a.expected)["$all?"],r.$$p=(o=function(e,r){{var $;o.$$s||this}return null==e&&(e=n),null==r&&(r=n),$=t["$has_key?"](e),$!==!1&&$!==n?r["$=="](t["$[]"](e)):$},o.$$s=a,o),r).call($)}catch(s){if(e.rescue(s,[i.get("NoMethodError")]))return!1;throw s}},a.$description=function(){var e=this;return"hash_including("+e.expected.$inspect().$sub(/^\{/,"").$sub(/\}$/,"")+")"},n&&"description"}(i,null),function(t,$super){function r(){}var $=r=o(t,$super,"HashExcludingMatcher",r),a=$.$$proto,i=$.$$scope;return a.expected=n,a.$initialize=function(e){var t=this;return t.expected=e},a["$=="]=function(t){var r,$,o,a=this;try{return(r=($=a.expected)["$none?"],r.$$p=(o=function(e,r){{var $;o.$$s||this}return null==e&&(e=n),null==r&&(r=n),$=t["$has_key?"](e),$!==!1&&$!==n?r["$=="](t["$[]"](e)):$},o.$$s=a,o),r).call($)}catch(s){if(e.rescue(s,[i.get("NoMethodError")]))return!1;throw s}},a.$description=function(){var e=this;return"hash_not_including("+e.expected.$inspect().$sub(/^\{/,"").$sub(/\}$/,"")+")"},n&&"description"}(i,null),function(e,$super){function t(){}var r=t=o(e,$super,"ArrayIncludingMatcher",t),$=r.$$proto,a=r.$$scope;return $.expected=n,$.$initialize=function(e){var t=this;return t.expected=e},$["$=="]=function(e){var t=this;return a.get("Set").$new(e)["$superset?"](a.get("Set").$new(t.expected))},$.$description=function(){var e=this;return"array_including("+e.expected.$join(",")+")"},n&&"description"}(i,null),function(e,$super){function t(){}{var $=t=o(e,$super,"DuckTypeMatcher",t),a=$.$$proto;$.$$scope}return a.methods_to_respond_to=n,a.$initialize=function(e){var t=this;return e=r.call(arguments,0),t.methods_to_respond_to=e},a["$=="]=function(e){var t,r,$,o=this;return(t=(r=o.methods_to_respond_to)["$all?"],t.$$p=($=function(t){$.$$s||this;return null==t&&(t=n),e["$respond_to?"](t)},$.$$s=o,$),t).call(r)},n&&"=="}(i,null),function(e,$super){function t(){}{var r=t=o(e,$super,"MatcherMatcher",t),$=r.$$proto;r.$$scope}return $.matcher=n,$.$initialize=function(e){var t=this;return t.matcher=e},$["$=="]=function(e){var t=this;return t.matcher["$matches?"](e)},n&&"=="}(i,null),function(e,$super){function t(){}{var r=t=o(e,$super,"EqualityProxy",t),$=r.$$proto;r.$$scope}return $.given=n,$.$initialize=function(e){var t=this;return t.given=e},$["$=="]=function(e){var t=this;return t.given["$=="](e)},n&&"=="}(i,null),function(e,$super){function t(){}{var r=t=o(e,$super,"InstanceOf",t),$=r.$$proto;r.$$scope}return $.klass=n,$.$initialize=function(e){var t=this;return t.klass=e},$["$=="]=function(e){var t=this;return e["$instance_of?"](t.klass)},n&&"=="}(i,null),function(e,$super){function t(){}{var r=t=o(e,$super,"KindOf",t),$=r.$$proto;r.$$scope}return $.klass=n,$.$initialize=function(e){var t=this;return t.klass=e},$["$=="]=function(e){var t=this;return e["$kind_of?"](t.klass)},n&&"=="}(i,null),s.$any_args=function(){return c.get("AnyArgsMatcher").$new()},s.$anything=function(){return c.get("AnyArgMatcher").$new(n)},s.$no_args=function(){return c.get("NoArgsMatcher").$new()},s.$duck_type=function(e){var t;return e=r.call(arguments,0),(t=c.get("DuckTypeMatcher")).$new.apply(t,[].concat(e))},s.$boolean=function(){return c.get("BooleanMatcher").$new(n)},s.$hash_including=function(e){var t,n=this;return e=r.call(arguments,0),c.get("HashIncludingMatcher").$new((t=n).$anythingize_lonely_keys.apply(t,[].concat(e)))},s.$array_including=function(e){var t,$,o=n;return e=r.call(arguments,0),o=function(){return $=c.get("Array")["$==="](e.$first()),(t=$!==!1&&$!==n?e.$count()["$=="](1):$)===n||t.$$is_boolean&&1!=t?e:e.$first()}(),c.get("ArrayIncludingMatcher").$new(o)},s.$hash_excluding=function(e){var t,n=this;return e=r.call(arguments,0),c.get("HashExcludingMatcher").$new((t=n).$anythingize_lonely_keys.apply(t,[].concat(e)))},i.$alias_method("hash_not_including","hash_excluding"),s.$instance_of=function(e){return c.get("InstanceOf").$new(e)},i.$alias_method("an_instance_of","instance_of"),s.$kind_of=function(e){return c.get("KindOf").$new(e)},i.$alias_method("a_kind_of","kind_of"),i.$private(),s.$anythingize_lonely_keys=function(e){var t,$,o,i=this,s=n;return e=r.call(arguments,0),s=function(){return e.$last().$class()["$=="](c.get("Hash"))?e.$delete_at(-1):a([],{})}(),(t=($=e).$each,t.$$p=(o=function(e){var t=o.$$s||this;return null==e&&(e=n),s["$[]="](e,t.$anything())},o.$$s=i,o),t).call($),s},e.donate(i,["$any_args","$anything","$no_args","$duck_type","$boolean","$hash_including","$array_including","$hash_excluding","$instance_of","$kind_of","$anythingize_lonely_keys"])}(i)}(i)}(t)},Opal.modules["rspec/mocks/object_reference"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=e.breaker,$=(e.slice,e.module),o=e.klass;return e.add_stubs(["$===","$new","$raise","$inspect","$name","$!","$object","$private","$original_value","$original"]),function(t){{var a=$(t,"RSpec");a.$$proto,a.$$scope}!function(t){var a=$(t,"Mocks"),i=(a.$$proto,a.$$scope);!function(t,$super){function r(){}var $=r=o(t,$super,"ObjectReference",r),a=($.$$proto,$.$$scope);return e.defs($,"$for",function(e,t){var r=this,$=n;return null==t&&(t=!1),function(){return $=e,a.get("Module")["$==="]($)?a.get("DirectModuleReference").$new(e):a.get("String")["$==="]($)?a.get("NamedObjectReference").$new(e):t!==!1&&t!==n?a.get("DirectObjectReference").$new(e):r.$raise(a.get("ArgumentError"),"Module or String expected, got "+e.$inspect())}()}),n&&"for"}(a,null),function(t,$super){function $(){}var a,i=$=o(t,$super,"DirectObjectReference",$),s=i.$$proto,c=i.$$scope;return s.object=n,s.$initialize=function(e){var t=this;return t.object=e},s.$description=function(){var e=this;return e.object.$inspect()},s.$const_to_replace=function(){var e=this;return e.$raise(c.get("ArgumentError"),"Can not perform constant replacement with an object.")},s["$defined?"]=function(){return!0},s.$when_loaded=a=function(){var t,$=this,o=a.$$p,i=o||n;return a.$$p=null,t=e.yield1(i,$.object),t===r?t:t},n&&"when_loaded"}(a,null),function(t,$super){function r(){}{var $=r=o(t,$super,"DirectModuleReference",r),a=$.$$proto;$.$$scope}return a.object=n,a.$const_to_replace=function(){var e=this;return e.object.$name()},e.defn($,"$description",a.$const_to_replace)}(a,i.get("DirectObjectReference")),function(t,$super){function $(){}var a,i=$=o(t,$super,"NamedObjectReference",$),s=i.$$proto,c=i.$$scope;return s.const_name=s.object=n,s.$initialize=function(e){var t=this;return t.const_name=e},s["$defined?"]=function(){var e=this;return e.$object()["$!"]()["$!"]()},s.$const_to_replace=function(){var e=this;return e.const_name},e.defn(i,"$description",s.$const_to_replace),s.$when_loaded=a=function(){var t,$=this,o=a.$$p,i=o||n;return a.$$p=null,(t=$.$object())===n||t.$$is_boolean&&1!=t?n:(t=e.yield1(i,$.$object()),t===r?t:t)},i.$private(),s.$object=function(){var e,t=this;return(e=t.object)!==!1&&e!==n?e:t.object=c.get("Constant").$original(t.const_name).$original_value()},n&&"object"}(a,null)}(a)}(t)},Opal.modules["rspec/mocks/example_methods"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.hash2;return e.add_stubs(["$require","$include","$declare_double","$for","$declare_verifying_double","$warn_about_expectations=","$proxy_for","$space","$stub","$hide","$new","$to_proc","$class_exec","$method_defined?","$private","$verify_doubled_constant_names?","$configuration","$!","$defined?","$raise","$+","$name","$===","$last","$<<"]),t.$require("rspec/mocks/object_reference"),function(t){{var a=$(t,"RSpec");a.$$proto,a.$$scope}!function(t){{var a=$(t,"Mocks");a.$$proto,a.$$scope}!function(t){var a,i=$(t,"ExampleMethods"),s=i.$$proto,c=i.$$scope;i.$include(c.get("RSpec").$$scope.get("Mocks").$$scope.get("ArgumentMatchers")),s.$double=function(e){var t,n=this;return e=r.call(arguments,0),(t=n).$declare_double.apply(t,[c.get("Mock")].concat(e))},s.$instance_double=function(e,t){var $,o=this,a=n;return t=r.call(arguments,1),a=c.get("ObjectReference").$for(e),($=o).$declare_verifying_double.apply($,[c.get("InstanceVerifyingDouble"),a].concat(t))},s.$class_double=function(e,t){var $,o=this,a=n;return t=r.call(arguments,1),a=c.get("ObjectReference").$for(e),($=o).$declare_verifying_double.apply($,[c.get("ClassVerifyingDouble"),a].concat(t))},s.$object_double=function(e,t){var $,o=this,a=n;return t=r.call(arguments,1),a=c.get("ObjectReference").$for(e,"allow_direct_object_refs"),($=o).$declare_verifying_double.apply($,[c.get("ObjectVerifyingDouble"),a].concat(t))},s.$allow_message_expectations_on_nil=function(){var e,t;return e=[!1],t=c.get("RSpec").$$scope.get("Mocks").$space().$proxy_for(n),t["$warn_about_expectations="].apply(t,e),e[e.length-1]},s.$stub_const=function(e,t,n){return null==n&&(n=o([],{})),c.get("ConstantMutator").$stub(e,t,n)},s.$hide_const=function(e){return c.get("ConstantMutator").$hide(e)},s.$have_received=a=function(e){var t,r,$=a.$$p,o=$||n;return a.$$p=null,(t=(r=c.get("Matchers").$$scope.get("HaveReceived")).$new,t.$$p=o.$to_proc(),t).call(r,e)},e.defs(i,"$included",function(e){var t,r,$,o=this;return(t=(r=e).$class_exec,t.$$p=($=function(){var e,t=$.$$s||this;return(e=t["$method_defined?"]("expect"))===n||e.$$is_boolean&&1!=e?t.$include(c.get("ExpectHost")):n},$.$$s=o,$),t).call(r)}),i.$private(),s.$declare_verifying_double=function(e,t,$){var o,a,i=this;return $=r.call(arguments,2),a=c.get("RSpec").$$scope.get("Mocks").$configuration()["$verify_doubled_constant_names?"](),(o=a!==!1&&a!==n?t["$defined?"]()["$!"]():a)===n||o.$$is_boolean&&1!=o||i.$raise(c.get("NameError"),(""+t.$name()+" is not a defined constant. ")["$+"]("Perhaps you misspelt it? ")["$+"]("Disable check with verify_doubled_constant_names configuration option.")),(o=i).$declare_double.apply(o,[e,t].concat($))},s.$declare_double=function(e,t){var $;return t=r.call(arguments,1),(($=c.get("Hash")["$==="](t.$last()))===n||$.$$is_boolean&&1!=$)&&t["$<<"](o([],{})),($=e).$new.apply($,[].concat(t))},function(e){{var t=$(e,"ExpectHost");t.$$proto,t.$$scope}}(i),e.donate(i,["$double","$instance_double","$class_double","$object_double","$allow_message_expectations_on_nil","$stub_const","$hide_const","$have_received","$declare_verifying_double","$declare_double"])}(a)}(a)}(t)},Opal.modules["rspec/mocks/proxy"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=e.breaker,$=e.slice,o=e.module,a=e.klass,i=e.hash2;return e.add_stubs(["$new","$==","$orig_object","$object","$message","$expectation_ordering","$space","$[]=","$attr_reader","$method_double_for","$null_object?","$!","$add_default_stub","$add_expectation","$to_proc","$add_simple_expectation","$build_expectation","$any?","$expectations","$raise_expectation_on_mocked_method","$stubs","$raise_expectation_on_unstubbed_method","$each","$matches?","$invoke","$call","$matches_name_but_not_args","$raise_unexpected_message_args_error","$add_stub","$add_simple_stub","$remove_stub","$remove_single_stub","$each_value","$verify","$reset","$clear","$detect","$negative_expectation_for?","$invoked","$<<","$record_message_received","$find_matching_expectation","$find_matching_method_stub","$called_max_times?","$actual_received_count_matters?","$increase_actual_received_count!","$find_almost_matching_expectation","$expected_messages_received?","$advise","$has_negative_expectation?","$find_almost_matching_stub","$raise_missing_default_stub_error","$===","$__send__","$superclass","$raise_unexpected_message_error","$private","$[]","$to_sym","$find_best_matching_expectation_for","$find","$any_instance_class_recorder_observing_method?","$class","$build_alias_method_name","$any_instance_recorder_for","$method_handle_for","$configure_method","$already_observing?","$nil?"]),function(t){{var s=o(t,"RSpec");s.$$proto,s.$$scope}!function(t){var s=o(t,"Mocks"),c=(s.$$proto,s.$$scope);!function(t,$super){function o(){}var s,c,l,u,_,p,d,f,h,m,g=o=a(t,$super,"Proxy",o),v=g.$$proto,b=g.$$scope;return v.null_object=v.object=v.error_generator=v.expectation_ordering=v.messages_received=v.method_doubles=v.order_group=n,e.cdecl(b,"SpecificMessage",(s=(c=b.get("Struct")).$new,s.$$p=(l=function(){var t=l.$$s||this;return e.defn(t,"$==",function(e){var t,n=this;return(t=e.$orig_object()["$=="](n.$object()))?e.$message()["$=="](n.$message()):t}),n&&"=="},l.$$s=g,l),s).call(c,"object","message")),v.$initialize=function(e,t,r,$){var o,a,s,c=this;return null==r&&(r=n),null==$&&($=i([],{})),c.object=e,c.order_group=t,c.name=r,c.error_generator=b.get("ErrorGenerator").$new(e,r),c.expectation_ordering=b.get("RSpec").$$scope.get("Mocks").$space().$expectation_ordering(),c.messages_received=[],c.options=$,c.null_object=!1,c.method_doubles=(o=(a=b.get("Hash")).$new,o.$$p=(s=function(e,t){var r=s.$$s||this;return null==r.object&&(r.object=n),null==e&&(e=n),null==t&&(t=n),e["$[]="](t,b.get("MethodDouble").$new(r.object,t,r))},s.$$s=c,s),o).call(a)},g.$attr_reader("object"),v["$null_object?"]=function(){var e=this;return e.null_object},v.$as_null_object=function(){var e=this;return e.null_object=!0,e.object},v.$method_handle_for=function(){return n},v.$add_message_expectation=u=function(e,t,r){var $,o,a,s,c=this,l=u.$$p,_=l||n,p=n;return null==r&&(r=i([],{})),u.$$p=null,p=c.$method_double_for(t),o=c["$null_object?"](),($=o!==!1&&o!==n?_["$!"]():o)===n||$.$$is_boolean&&1!=$||($=(o=p).$add_default_stub,$.$$p=(a=function(){var e=a.$$s||this;return null==e.object&&(e.object=n),e.object},a.$$s=c,a),$).call(o,c.error_generator,c.expectation_ordering,e,r),($=(s=p).$add_expectation,$.$$p=_.$to_proc(),$).call(s,c.error_generator,c.expectation_ordering,e,r)},v.$add_simple_expectation=function(e,t,n){var r=this;return r.$method_double_for(e).$add_simple_expectation(e,t,r.error_generator,n)},v.$build_expectation=function(e){var t=this,r=n;return r=t.$method_double_for(e),r.$build_expectation(t.error_generator,t.expectation_ordering)},v.$replay_received_message_on=_=function(e){var t,r,$,o=this,a=_.$$p,i=a||n,s=n,c=n;return _.$$p=null,s=e.$message(),c=o.$method_double_for(s),(t=c.$expectations()["$any?"]())===n||t.$$is_boolean&&1!=t||o.error_generator.$raise_expectation_on_mocked_method(s),((t=(r=o["$null_object?"]())!==!1&&r!==n?r:c.$stubs()["$any?"]())===n||t.$$is_boolean&&1!=t)&&o.error_generator.$raise_expectation_on_unstubbed_method(s),(t=(r=o.messages_received).$each,t.$$p=($=function(t,r,o){{var a,s;$.$$s||this}return null==t&&(t=n),null==r&&(r=n),null==o&&(o=n),(a=(s=e)["$matches?"].apply(s,[t].concat(r)))===n||a.$$is_boolean&&1!=a?n:(e.$invoke(n),i!==!1&&i!==n?(a=i).$call.apply(a,[].concat(r)):n)},$.$$s=o,$),t).call(r)},v.$check_for_unexpected_arguments=function(e){var t,r,$,o=this;return(t=(r=o.messages_received).$each,t.$$p=($=function(t,r,o){var a,i,s=$.$$s||this;return null==t&&(t=n),null==r&&(r=n),null==o&&(o=n),(a=(i=e).$matches_name_but_not_args.apply(i,[t].concat(r)))===n||a.$$is_boolean&&1!=a?n:(a=s).$raise_unexpected_message_args_error.apply(a,[e].concat(r))
},$.$$s=o,$),t).call(r)},v.$add_stub=p=function(e,t,r){var $,o,a=this,s=p.$$p,c=s||n;return null==r&&(r=i([],{})),p.$$p=null,($=(o=a.$method_double_for(t)).$add_stub,$.$$p=c.$to_proc(),$).call(o,a.error_generator,a.expectation_ordering,e,r)},v.$add_simple_stub=function(e,t){var n=this;return n.$method_double_for(e).$add_simple_stub(e,t)},v.$remove_stub=function(e){var t=this;return t.$method_double_for(e).$remove_stub()},v.$remove_single_stub=function(e,t){var n=this;return n.$method_double_for(e).$remove_single_stub(t)},v.$verify=function(){var e,t,r,$=this;try{return(e=(t=$.method_doubles).$each_value,e.$$p=(r=function(e){r.$$s||this;return null==e&&(e=n),e.$verify()},r.$$s=$,r),e).call(t)}finally{$.$reset()}},v.$reset=function(){var e,t,r,$=this;return(e=(t=$.method_doubles).$each_value,e.$$p=(r=function(e){r.$$s||this;return null==e&&(e=n),e.$reset()},r.$$s=$,r),e).call(t),$.messages_received.$clear()},v["$received_message?"]=d=function(e,t){var r,o,a,i=this,s=d.$$p,c=s||n;return t=$.call(arguments,1),d.$$p=null,(r=(o=i.messages_received)["$any?"],r.$$p=(a=function(r){a.$$s||this;return null==r&&(r=n),r["$=="]([e,t,c])},a.$$s=i,a),r).call(o)},v["$has_negative_expectation?"]=function(e){var t,r,$,o=this;return(t=(r=o.$method_double_for(e).$expectations()).$detect,t.$$p=($=function(t){$.$$s||this;return null==t&&(t=n),t["$negative_expectation_for?"](e)},$.$$s=o,$),t).call(r)},v.$record_message_received=f=function(e,t){var r=this,o=f.$$p,a=o||n;return t=$.call(arguments,1),f.$$p=null,r.order_group.$invoked(b.get("SpecificMessage").$new(r.$object(),e)),r.messages_received["$<<"]([e,t,a])},v.$message_received=h=function(e,t){var r,o,a,i,s,c,l,u,_,p,d,f,m,g,v,y,x=this,w=h.$$p,k=w||n,S=n,E=n;return t=$.call(arguments,1),h.$$p=null,(r=(o=x).$record_message_received,r.$$p=k.$to_proc(),r).apply(o,[e].concat(t)),S=(r=x).$find_matching_expectation.apply(r,[e].concat(t)),E=(a=x).$find_matching_method_stub.apply(a,[e].concat(t)),c=(l=E!==!1&&E!==n)?S:l,(i=(s=c!==!1&&c!==n?S["$called_max_times?"]():c)!==!1&&s!==n?s:(c=E!==!1&&E!==n)?S["$!"]():c)===n||i.$$is_boolean&&1!=i?S!==!1&&S!==n?(c=(u=S).$invoke,c.$$p=k.$to_proc(),c).apply(u,[E].concat(t)):(c=S=(_=x).$find_almost_matching_expectation.apply(_,[e].concat(t)))===n||c.$$is_boolean&&1!=c?(d=E=(f=x).$find_almost_matching_stub.apply(f,[e].concat(t)))===n||d.$$is_boolean&&1!=d?(g=b.get("Class")["$==="](x.object))===n||g.$$is_boolean&&1!=g?(g=(y=x.object).$__send__,g.$$p=k.$to_proc(),g).apply(y,["method_missing",e].concat(t)):(g=(v=x.object.$superclass()).$__send__,g.$$p=k.$to_proc(),g).apply(v,[e].concat(t)):((d=E).$advise.apply(d,[].concat(t)),(m=x).$raise_missing_default_stub_error.apply(m,[E].concat(t))):(((c=S["$expected_messages_received?"]())===n||c.$$is_boolean&&1!=c)&&((c=x["$null_object?"]())===n||c.$$is_boolean&&1!=c||(c=S).$advise.apply(c,[].concat(t))),(p=(d=x["$has_negative_expectation?"](e))!==!1&&d!==n?d:x["$null_object?"]())===n||p.$$is_boolean&&1!=p?(p=x).$raise_unexpected_message_args_error.apply(p,[S].concat(t)):n):((i=(s=S!==!1&&S!==n)?S["$actual_received_count_matters?"]():s)===n||i.$$is_boolean&&1!=i||S["$increase_actual_received_count!"](),(i=S=(s=x).$find_almost_matching_expectation.apply(s,[e].concat(t)))===n||i.$$is_boolean&&1!=i||((i=S["$expected_messages_received?"]())===n||i.$$is_boolean&&1!=i)&&(i=S).$advise.apply(i,[].concat(t)),(c=(l=E).$invoke,c.$$p=k.$to_proc(),c).apply(l,[n].concat(t)))},v.$raise_unexpected_message_error=function(e,t){var n,r=this;return t=$.call(arguments,1),(n=r.error_generator).$raise_unexpected_message_error.apply(n,[e].concat(t))},v.$raise_unexpected_message_args_error=function(e,t){var n,r=this;return t=$.call(arguments,1),(n=r.error_generator).$raise_unexpected_message_args_error.apply(n,[e].concat(t))},v.$raise_missing_default_stub_error=function(e,t){var n,r=this;return t=$.call(arguments,1),(n=r.error_generator).$raise_missing_default_stub_error.apply(n,[e].concat(t))},g.$private(),v.$method_double_for=function(e){var t=this;return t.method_doubles["$[]"](e.$to_sym())},v.$find_matching_expectation=function(e,t){var r,o,a,i=this;return t=$.call(arguments,1),(r=(o=i).$find_best_matching_expectation_for,r.$$p=(a=function(r){{var $;a.$$s||this}return null==r&&(r=n),($=r)["$matches?"].apply($,[e].concat(t))},a.$$s=i,a),r).call(o,e)},v.$find_almost_matching_expectation=function(e,t){var r,o,a,i=this;return t=$.call(arguments,1),(r=(o=i).$find_best_matching_expectation_for,r.$$p=(a=function(r){{var $;a.$$s||this}return null==r&&(r=n),($=r).$matches_name_but_not_args.apply($,[e].concat(t))},a.$$s=i,a),r).call(o,e)},v.$find_best_matching_expectation_for=m=function(t){try{var $,o,a,i=this,s=m.$$p,c=s||n,l=n;return m.$$p=null,l=n,($=(o=i.$method_double_for(t).$expectations()).$each,$.$$p=(a=function(t){{var $,o;a.$$s||this}return null==t&&(t=n),($=(o=e.yield1(c,t))===r?r.$v:o)===n||$.$$is_boolean&&1!=$?n:((($=t["$called_max_times?"]())===n||$.$$is_boolean&&1!=$)&&e.ret(t),($=l)!==!1&&$!==n?$:l=t)},a.$$s=i,a),$).call(o),l}catch(u){if(u===e.returner)return u.$v;throw u}},v.$find_matching_method_stub=function(e,t){var r,o,a,i=this;return t=$.call(arguments,1),(r=(o=i.$method_double_for(e).$stubs()).$find,r.$$p=(a=function(r){{var $;a.$$s||this}return null==r&&(r=n),($=r)["$matches?"].apply($,[e].concat(t))},a.$$s=i,a),r).call(o)},v.$find_almost_matching_stub=function(e,t){var r,o,a,i=this;return t=$.call(arguments,1),(r=(o=i.$method_double_for(e).$stubs()).$find,r.$$p=(a=function(r){{var $;a.$$s||this}return null==r&&(r=n),($=r).$matches_name_but_not_args.apply($,[e].concat(t))},a.$$s=i,a),r).call(o)},n&&"find_almost_matching_stub"}(s,null),function(t,$super){function r(){}var o,i,s=r=a(t,$super,"PartialMockProxy",r),c=s.$$proto,l=s.$$scope;return c.object=n,c.$method_handle_for=function(t){var r,$=this;try{return(r=$["$any_instance_class_recorder_observing_method?"]($.object.$class(),t))===n||r.$$is_boolean&&1!=r||(t=e.get("RSpec").$$scope.get("Mocks").$any_instance_recorder_for($.object.$class()).$build_alias_method_name(t)),e.get("RSpec").$$scope.get("Mocks").$method_handle_for($.object,t)}catch(o){if(e.rescue(o,[l.get("NameError")]))return n;throw o}},c.$add_simple_expectation=o=function(t){var n=$.call(arguments,0),r=this,a=o.$$p;return o.$$p=null,r.$method_double_for(t).$configure_method(),e.find_super_dispatcher(r,"add_simple_expectation",o,a).apply(r,n)},c.$add_simple_stub=i=function(t){var n=$.call(arguments,0),r=this,o=i.$$p;return i.$$p=null,r.$method_double_for(t).$configure_method(),e.find_super_dispatcher(r,"add_simple_stub",i,o).apply(r,n)},s.$private(),c["$any_instance_class_recorder_observing_method?"]=function(t,r){var $,o=this,a=n;return($=e.get("RSpec").$$scope.get("Mocks").$any_instance_recorder_for(t)["$already_observing?"](r))===n||$.$$is_boolean&&1!=$?(a=t.$superclass(),($=a["$nil?"]())===n||$.$$is_boolean&&1!=$?o["$any_instance_class_recorder_observing_method?"](a,r):!1):!0},n&&"any_instance_class_recorder_observing_method?"}(s,c.get("Proxy"))}(s)}(t)},Opal.modules["rspec/mocks/proxy_for_nil"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass,a=e.hash2;return e.add_stubs(["$attr_accessor","$warn_about_expectations?","$warn","$private","$first_non_rspec_line"]),function(t){{var i=$(t,"RSpec");i.$$proto,i.$$scope}!function(t){var i=$(t,"Mocks"),s=(i.$$proto,i.$$scope);!function(t,$super){function $(){}var i,s,c,l,u=$=o(t,$super,"ProxyForNil",$),_=u.$$proto,p=u.$$scope;return _.$initialize=i=function(t){{var r=this;i.$$p}return i.$$p=null,r.warn_about_expectations=!0,e.find_super_dispatcher(r,"initialize",i,null).apply(r,[n,t])},u.$attr_accessor("warn_about_expectations"),e.defn(u,"$warn_about_expectations?",_.$warn_about_expectations),_.$add_message_expectation=s=function(t,$,o){var i,c=r.call(arguments,0),l=this,u=s.$$p;return null==o&&(o=a([],{})),s.$$p=null,(i=l["$warn_about_expectations?"]())===n||i.$$is_boolean&&1!=i||l.$warn($),e.find_super_dispatcher(l,"add_message_expectation",s,u).apply(l,c)},_.$add_negative_message_expectation=c=function(t,$){var o,a=r.call(arguments,0),i=this,s=c.$$p;return c.$$p=null,(o=i["$warn_about_expectations?"]())===n||o.$$is_boolean&&1!=o||i.$warn($),e.find_super_dispatcher(i,"add_negative_message_expectation",c,s).apply(i,a)},_.$add_stub=l=function(t,$,o){var i,s=r.call(arguments,0),c=this,u=l.$$p;return null==o&&(o=a([],{})),l.$$p=null,(i=c["$warn_about_expectations?"]())===n||i.$$is_boolean&&1!=i||c.$warn($),e.find_super_dispatcher(c,"add_stub",l,u).apply(c,s)},u.$private(),_.$warn=function(e){var t=n;return t=p.get("CallerFilter").$first_non_rspec_line(),p.get("Kernel").$warn("An expectation of :"+e+" was set on nil. Called from "+t+". Use allow_message_expectations_on_nil to disable warnings.")},n&&"warn"}(i,s.get("Proxy"))}(i)}(t)},Opal.modules["rspec/mocks/test_double"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.hash2;return e.add_stubs(["$extend","$send","$__initialize_as_test_double","$as_null_object","$__mock_proxy","$null_object?","$==","$class","$sprintf","$object_id","$inspect","$gsub","$alias_method","$new","$private","$===","$empty?","$assign_stubs","$record_message_received","$to_proc","$include?","$raise","$raise_unexpected_message_error","$each_pair","$add_simple_stub","$proxy_for"]),function(t){{var a=$(t,"RSpec");a.$$proto,a.$$scope}!function(t){{var a=$(t,"Mocks");a.$$proto,a.$$scope}!function(t){var a,i,s=$(t,"TestDouble"),c=s.$$proto,l=s.$$scope;e.defs(s,"$extend_onto",function(e,t,r){var $=this;return null==t&&(t=n),null==r&&(r=o([],{})),e.$extend($),e.$send("__initialize_as_test_double",t,r)}),c.$initialize=function(e,t){var r=this;return null==e&&(e=n),null==t&&(t=o([],{})),r.$__initialize_as_test_double(e,t)},c.$as_null_object=function(){var e=this;return e.$__mock_proxy().$as_null_object()},c["$null_object?"]=function(){var e=this;return e.$__mock_proxy()["$null_object?"]()},c["$=="]=function(e){var t=this;return e["$=="](t.$__mock_proxy())},c.$inspect=function(){var e=this;return null==e.name&&(e.name=n),"#<"+e.$class()+":"+e.$sprintf("0x%x",e.$object_id())+" @name="+e.name.$inspect()+">"},c.$to_s=function(){var e=this;return e.$inspect().$gsub("<","[").$gsub(">","]")},s.$alias_method("to_str","to_s"),c["$respond_to?"]=a=function(t,$){var o,i=r.call(arguments,0),s=this,c=a.$$p;return null==$&&($=!1),a.$$p=null,(o=s.$__mock_proxy()["$null_object?"]())===n||o.$$is_boolean&&1!=o?e.find_super_dispatcher(s,"respond_to?",a,c).apply(s,i):!0},c.$__build_mock_proxy=function(e){var t=this;return null==t.name&&(t.name=n),l.get("Proxy").$new(t,e,t.name)},s.$private(),c.$__initialize_as_test_double=function(e,t){var r,$,a=this;return null==e&&(e=n),null==t&&(t=o([],{})),$=l.get("Hash")["$==="](e),(r=$!==!1&&$!==n?t["$empty?"]():$)===n||r.$$is_boolean&&1!=r?a.name=e:(t=e,a.name=n),a.$assign_stubs(t)},c.$method_missing=i=function(t,$){var o,a,s=r.call(arguments,0),c=this,u=i.$$p,_=u||n,p=n;if($=r.call(arguments,1),i.$$p=null,(o=c.$__mock_proxy()["$null_object?"]())!==n&&(!o.$$is_boolean||1==o)){if(p=t,"to_int"["$==="](p))return 0;if("to_a"["$==="](p)||"to_ary"["$==="](p))return n}(o=(a=c.$__mock_proxy()).$record_message_received,o.$$p=_.$to_proc(),o).apply(a,[t].concat($));try{return(o=c.$__mock_proxy()["$null_object?"]())===n||o.$$is_boolean&&1!=o?e.find_super_dispatcher(c,"method_missing",i,u).apply(c,s):c}catch(d){if(e.rescue(d,[l.get("NameError")]))return(o=["to_a","to_ary"]["$include?"](t))===n||o.$$is_boolean&&1!=o||c.$raise(l.get("NoMethodError")),(o=c.$__mock_proxy()).$raise_unexpected_message_error.apply(o,[t].concat($));throw d}},c.$assign_stubs=function(e){var t,r,$,o=this;return(t=(r=e).$each_pair,t.$$p=($=function(e,t){var r=$.$$s||this;return null==e&&(e=n),null==t&&(t=n),r.$__mock_proxy().$add_simple_stub(e,t)},$.$$s=o,$),t).call(r)},c.$__mock_proxy=function(){var t=this;return e.get("RSpec").$$scope.get("Mocks").$proxy_for(t)},e.donate(s,["$initialize","$as_null_object","$null_object?","$==","$inspect","$to_s","$respond_to?","$__build_mock_proxy","$__initialize_as_test_double","$method_missing","$assign_stubs","$__mock_proxy"])}(a)}(a)}(t)},Opal.modules["rspec/mocks/mock"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=(e.nil,e.breaker,e.slice,e.module),r=e.klass;return e.add_stubs(["$include"]),function(e){{var t=n(e,"RSpec");t.$$proto,t.$$scope}!function(e){{var t=n(e,"Mocks");t.$$proto,t.$$scope}!function(e,$super){function t(){}var n=t=r(e,$super,"Mock",t),$=(n.$$proto,n.$$scope);return n.$include($.get("TestDouble"))}(t,null)}(t)}(t)},Opal.modules["rspec/mocks/argument_list_matcher"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass;return e.add_stubs(["$require","$attr_reader","$empty?","$first","$===","$collect","$matcher_for","$match_any_args?","$block_passes?","$matchers_match?","$private","$is_matcher?","$new","$respond_to?","$any?","$call","$=="]),t.$require("rspec/mocks/argument_matchers"),function(t){{var a=$(t,"RSpec");a.$$proto,a.$$scope}!function(t){{var a=$(t,"Mocks");a.$$proto,a.$$scope}!function(t,$super){function $(){}var a,i=$=o(t,$super,"ArgumentListMatcher",$),s=i.$$proto,c=i.$$scope;return s.block=s.matchers=s.match_any_args=n,i.$attr_reader("expected_args"),s.$initialize=a=function(e){var t,$,o,i=this,s=a.$$p,l=s||n,u=n;return e=r.call(arguments,0),a.$$p=null,i.expected_args=e,i.block=function(){return(t=e["$empty?"]())===n||t.$$is_boolean&&1!=t?n:l}(),i.match_any_args=!1,i.matchers=n,function(){return u=e.$first(),c.get("ArgumentMatchers").$$scope.get("AnyArgsMatcher")["$==="](u)?i.match_any_args=!0:i.matchers=c.get("ArgumentMatchers").$$scope.get("NoArgsMatcher")["$==="](u)?[]:(t=($=e).$collect,t.$$p=(o=function(e){var t=o.$$s||this;return null==e&&(e=n),t.$matcher_for(e)},o.$$s=i,o),t).call($)}()},s["$args_match?"]=function(e){var t,$,o,a=this;return e=r.call(arguments,0),(t=($=a["$match_any_args?"]())!==!1&&$!==n?$:(o=a)["$block_passes?"].apply(o,[].concat(e)))!==!1&&t!==n?t:($=a)["$matchers_match?"].apply($,[].concat(e))},i.$private(),s.$matcher_for=function(e){var t,r=this;return(t=r["$is_matcher?"](e))===n||t.$$is_boolean&&1!=t?(t=c.get("Regexp")["$==="](e))===n||t.$$is_boolean&&1!=t?c.get("ArgumentMatchers").$$scope.get("EqualityProxy").$new(e):c.get("ArgumentMatchers").$$scope.get("RegexpMatcher").$new(e):c.get("ArgumentMatchers").$$scope.get("MatcherMatcher").$new(e)},s["$is_matcher?"]=function(e){var t,r,$,o,a=this;return(t=e["$respond_to?"]("i_respond_to_everything_so_im_not_really_a_matcher"))===n||t.$$is_boolean&&1!=t?(t=(r=($=["failure_message_for_should","failure_message"])["$any?"],r.$$p=(o=function(t){o.$$s||this;return null==t&&(t=n),e["$respond_to?"](t)},o.$$s=a,o),r).call($),t!==!1&&t!==n?e["$respond_to?"]("matches?"):t):!1},s["$block_passes?"]=function(e){var t,$=this;return e=r.call(arguments,0),(t=$.block)===n||t.$$is_boolean&&1!=t?n:(t=$.block).$call.apply(t,[].concat(e))},s["$matchers_match?"]=function(e){var t=this;return e=r.call(arguments,0),t.matchers["$=="](e)},s["$match_any_args?"]=function(){var e=this;return e.match_any_args},e.cdecl(c,"MATCH_ALL",i.$new(c.get("ArgumentMatchers").$$scope.get("AnyArgsMatcher").$new()))}(a,null)}(a)}(t)},Opal.modules["rspec/mocks/message_expectation"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=e.breaker,$=e.slice,o=e.module,a=e.klass,i=e.hash2;return e.add_stubs(["$==","$line","$raise_expectation_error","$attr_accessor","$attr_reader","$attr_writer","$protected","$opts=","$object","$method_name","$register","$new","$inner_implementation_action=","$expected_args","$negative?","$raise","$ignoring_args?","$max","$size","$terminal_implementation_action=","$===","$raise_only_valid_on_a_partial_mock","$inner_action","$implementation","$warning","$original_method","$respond_to?","$exception","$throw","$<<","$initial_implementation_action=","$args_match?","$yield_receiver_to_implementation_block?","$unshift","$orig_object","$+","$expectation_count_type","$handle_order_constraint","$present?","$call","$to_proc","$invoke","$!","$>","$>=","$expected_messages_received?","$failed_fast?","$generate_error","$matches_exact_count?","$matches_at_least_count?","$matches_at_most_count?","$verify_invocation_order","$<=","$similar_messages","$empty?","$raise_similar_message_args_error","$describe_expectation","$raise_out_of_order_error","$set_expected_received_count","$raise_double_negation_error","$private","$initial_action=","$inner_action=","$terminal_action=","$nil?","$raise_missing_block_error","$each","$arity","$length","$raise_wrong_arity_error","$instance_exec","$shift","$first","$last","$map","$actions","$any?","$compact","$initial_action","$terminal_action","$cannot_modify_further_error","$insert","$backtrace"]),function(t){{var s=o(t,"RSpec");s.$$proto,s.$$scope}!function(t){{var s=o(t,"Mocks");s.$$proto,s.$$scope}!function(e,$super){function t(){}var r=t=a(e,$super,"SimpleMessageExpectation",t),o=r.$$proto,i=r.$$scope;return o.response=o.message=o.backtrace_line=n,o.$initialize=function(e,t,r,$){var o,a=this;return null==$&&($=n),o=[e,t,r,$],a.message=o[0],a.response=o[1],a.error_generator=o[2],a.backtrace_line=o[3],a.received=!1},o.$invoke=function(e){var t=this;return e=$.call(arguments,0),t.received=!0,t.response},o["$matches?"]=function(e,t){var n=this;return t=$.call(arguments,1),n.message["$=="](e)},o["$called_max_times?"]=function(){return!1},o.$verify_messages_received=function(){var e,t,r,$=this;return(e=(t=i.get("InsertOntoBacktrace")).$line,e.$$p=(r=function(){var e,t=r.$$s||this;return null==t.received&&(t.received=n),null==t.error_generator&&(t.error_generator=n),null==t.message&&(t.message=n),(e=t.received)===n||e.$$is_boolean&&1!=e?t.error_generator.$raise_expectation_error(t.message,1,i.get("ArgumentListMatcher").$$scope.get("MATCH_ALL"),0,n):n},r.$$s=$,r),e).call(t,$.backtrace_line)},n&&"verify_messages_received"}(s,null),function(t,$super){function o(){}var s,c,l,u,_,p,d,f,h,m,g,v,b=o=a(t,$super,"MessageExpectation",o),y=b.$$proto,x=b.$$scope;return y.error_generator=y.method_double=y.order_group=y.argument_list_matcher=y.expected_received_count=y.at_least=y.yield_receiver_to_implementation_block=y.args_to_yield=y.eval_context=y.message=y.exactly=y.at_most=y.actual_received_count=y.expected_from=y.ordered=y.similar_messages=y.failed_fast=n,b.$attr_accessor("error_generator","implementation"),b.$attr_reader("message"),b.$attr_reader("orig_object"),b.$attr_writer("expected_received_count","expected_from","argument_list_matcher"),b.$protected("expected_received_count=","expected_from=","error_generator","error_generator=","implementation="),y.$initialize=s=function(e,t,r,$,o,a){var c,l,u=this,_=s.$$p,p=_||n;return null==o&&(o=1),null==a&&(a=i([],{})),s.$$p=null,u.error_generator=e,c=[a],l=u.error_generator,l["$opts="].apply(l,c),c[c.length-1],u.expected_from=r,u.method_double=$,u.orig_object=u.method_double.$object(),u.message=u.method_double.$method_name(),u.actual_received_count=0,u.expected_received_count=o,u.argument_list_matcher=x.get("ArgumentListMatcher").$$scope.get("MATCH_ALL"),u.order_group=t,u.order_group.$register(u),u.ordered=!1,u.at_least=u.at_most=u.exactly=n,u.args_to_yield=[],u.failed_fast=n,u.eval_context=n,u.yield_receiver_to_implementation_block=!1,u.implementation=x.get("Implementation").$new(),c=[p],l=u,l["$inner_implementation_action="].apply(l,c),c[c.length-1]},y.$expected_args=function(){var e=this;return e.argument_list_matcher.$expected_args()},y.$and_return=c=function(e){var t,r,o,a=this,i=c.$$p,s=i||n;return e=$.call(arguments,0),c.$$p=null,(t=a["$negative?"]())===n||t.$$is_boolean&&1!=t?(((t=(r=a["$ignoring_args?"]())!==!1&&r!==n?r:(o=a.expected_received_count["$=="](0))?a.at_least:o)===n||t.$$is_boolean&&1!=t)&&(a.expected_received_count=[a.expected_received_count,e.$size()].$max()),s!==!1&&s!==n?(t=[s],r=a,r["$inner_implementation_action="].apply(r,t),t[t.length-1]):(t=[x.get("AndReturnImplementation").$new(e)],r=a,r["$terminal_implementation_action="].apply(r,t),t[t.length-1]),n):a.$raise("`and_return` is not supported with negative message expectations")},y.$and_yield_receiver_to_implementation=function(){var e=this;return e.yield_receiver_to_implementation_block=!0,e},y["$yield_receiver_to_implementation_block?"]=function(){var e=this;return e.yield_receiver_to_implementation_block},y.$and_call_original=function(){var e,t=this;return(e=x.get("RSpec").$$scope.get("Mocks").$$scope.get("TestDouble")["$==="](t.method_double.$object()))===n||e.$$is_boolean&&1!=e?((e=t.$implementation().$inner_action())===n||e.$$is_boolean&&1!=e||x.get("RSpec").$warning("You're overriding a previous implementation for this stub"),t.implementation=x.get("AndCallOriginalImplementation").$new(t.method_double.$original_method()),t.yield_receiver_to_implementation_block=!1):t.error_generator.$raise_only_valid_on_a_partial_mock("and_call_original")},y.$and_raise=function(e,t){var r,$,o,a,i,s=this;return null==e&&(e=x.get("RuntimeError")),null==t&&(t=n),(r=e["$respond_to?"]("exception"))===n||r.$$is_boolean&&1!=r||(e=function(){return t!==!1&&t!==n?e.$exception(t):e.$exception()}()),r=[(o=(a=x.get("Proc")).$new,o.$$p=(i=function(){var t=i.$$s||this;return t.$raise(e)},i.$$s=s,i),o).call(a)],$=s,$["$terminal_implementation_action="].apply($,r),r[r.length-1],n},y.$and_throw=function(e){var t,r,o,a,i,s=this;return e=$.call(arguments,0),t=[(o=(a=x.get("Proc")).$new,o.$$p=(i=function(){var t,n=i.$$s||this;return(t=n).$throw.apply(t,[].concat(e))},i.$$s=s,i),o).call(a)],r=s,r["$terminal_implementation_action="].apply(r,t),t[t.length-1],n},y.$and_yield=l=function(t){var o,a,i=this,s=l.$$p,c=s||n;return t=$.call(arguments,0),l.$$p=null,c!==!1&&c!==n&&e.yield1(c,i.eval_context=x.get("Object").$new())===r?r.$v:(i.args_to_yield["$<<"](t),o=[x.get("AndYieldImplementation").$new(i.args_to_yield,i.eval_context,i.error_generator)],a=i,a["$initial_implementation_action="].apply(a,o),o[o.length-1],i)},y["$matches?"]=function(e,t){var n,r,o=this;return t=$.call(arguments,1),(n=o.message["$=="](e))?(r=o.argument_list_matcher)["$args_match?"].apply(r,[].concat(t)):n},y.$invoke=u=function(e,t){var r,o,a,i,s=this,c=u.$$p,l=c||n;t=$.call(arguments,1),u.$$p=null,(r=s["$yield_receiver_to_implementation_block?"]())===n||r.$$is_boolean&&1!=r||t.$unshift(s.$orig_object()),(r=(o=s["$negative?"]())!==!1&&o!==n?o:(a=(i=s.exactly)!==!1&&i!==n?i:s.at_most,a!==!1&&a!==n?s.actual_received_count["$=="](s.expected_received_count):a))===n||r.$$is_boolean&&1!=r||(s.actual_received_count=s.actual_received_count["$+"](1),s.failed_fast=!0,(r=s.error_generator).$raise_expectation_error.apply(r,[s.message,s.expected_received_count,s.argument_list_matcher,s.actual_received_count,s.$expectation_count_type()].concat(t))),s.order_group.$handle_order_constraint(s);try{return(o=s.$implementation()["$present?"]())===n||o.$$is_boolean&&1!=o?e!==!1&&e!==n?(o=(i=e).$invoke,o.$$p=l.$to_proc(),o).apply(i,[n].concat(t)):n:(o=(a=s.$implementation()).$call,o.$$p=l.$to_proc(),o).apply(a,[].concat(t))}finally{s.actual_received_count=s.actual_received_count["$+"](1)}},y["$negative?"]=function(){var e,t=this;return(e=t.expected_received_count["$=="](0))?t.at_least["$!"]():e},y["$called_max_times?"]=function(){var e,t,r,$=this;return r=$.expected_received_count["$=="]("any")["$!"](),t=r!==!1&&r!==n?$.at_least["$!"]():r,e=t!==!1&&t!==n?$.expected_received_count["$>"](0):t,e!==!1&&e!==n?$.actual_received_count["$>="]($.expected_received_count):e},y.$matches_name_but_not_args=function(e,t){var n,r,o=this;return t=$.call(arguments,1),(n=o.message["$=="](e))?(r=o.argument_list_matcher)["$args_match?"].apply(r,[].concat(t))["$!"]():n},y.$verify_messages_received=function(){var e,t,r,$=this;return(e=(t=x.get("InsertOntoBacktrace")).$line,e.$$p=(r=function(){var e,t,$=r.$$s||this;return(e=(t=$["$expected_messages_received?"]())!==!1&&t!==n?t:$["$failed_fast?"]())===n||e.$$is_boolean&&1!=e?$.$generate_error():n},r.$$s=$,r),e).call(t,$.expected_from)},y["$expected_messages_received?"]=function(){var e,t,r,$=this;return(e=(t=(r=$["$ignoring_args?"]())!==!1&&r!==n?r:$["$matches_exact_count?"]())!==!1&&t!==n?t:$["$matches_at_least_count?"]())!==!1&&e!==n?e:$["$matches_at_most_count?"]()},y["$ensure_expected_ordering_received!"]=function(){var e,t=this;return(e=t.ordered)===n||e.$$is_boolean&&1!=e||t.order_group.$verify_invocation_order(t),!0},y["$ignoring_args?"]=function(){var e=this;return e.expected_received_count["$=="]("any")},y["$matches_at_least_count?"]=function(){var e,t=this;return e=t.at_least,e!==!1&&e!==n?t.actual_received_count["$>="](t.expected_received_count):e},y["$matches_at_most_count?"]=function(){var e,t=this;return e=t.at_most,e!==!1&&e!==n?t.actual_received_count["$<="](t.expected_received_count):e},y["$matches_exact_count?"]=function(){var e=this;return e.expected_received_count["$=="](e.actual_received_count)},y.$similar_messages=function(){var e,t=this;return(e=t.similar_messages)!==!1&&e!==n?e:t.similar_messages=[]},y.$advise=function(e){var t=this;return e=$.call(arguments,0),t.$similar_messages()["$<<"](e)},y.$generate_error=function(){var e,t,r=this;return(e=r.$similar_messages()["$empty?"]())===n||e.$$is_boolean&&1!=e?(t=r.error_generator).$raise_similar_message_args_error.apply(t,[r].concat(r.similar_messages)):(e=r.error_generator).$raise_expectation_error.apply(e,[r.message,r.expected_received_count,r.argument_list_matcher,r.actual_received_count,r.$expectation_count_type()].concat(r.$expected_args()))},y.$expectation_count_type=function(){var e,t=this;return(e=t.at_least)===n||e.$$is_boolean&&1!=e?(e=t.at_most)===n||e.$$is_boolean&&1!=e?n:"at_most":"at_least"},y.$description=function(){var e,t=this;return(e=t.error_generator).$describe_expectation.apply(e,[t.message,t.expected_received_count,t.actual_received_count].concat(t.$expected_args()))},y.$raise_out_of_order_error=function(){var e=this;return e.error_generator.$raise_out_of_order_error(e.message)},y.$with=_=function(e){var t,r,o=this,a=_.$$p,i=a||n;return e=$.call(arguments,0),_.$$p=null,(t=e["$empty?"]())===n||t.$$is_boolean&&1!=t||o.$raise(x.get("ArgumentError"),"`with` must have at least one argument. Use `no_args` matcher to set the expectation of receiving no arguments."),t=[i],r=o,r["$inner_implementation_action="].apply(r,t),t[t.length-1],o.argument_list_matcher=(t=x.get("ArgumentListMatcher")).$new.apply(t,[].concat(e)),o},y.$exactly=p=function(e){var t,r,$=this,o=p.$$p,a=o||n;return p.$$p=null,t=[a],r=$,r["$inner_implementation_action="].apply(r,t),t[t.length-1],$.$set_expected_received_count("exactly",e),$},y.$at_least=d=function(e){var t,r,$=this,o=d.$$p,a=o||n;return d.$$p=null,$.$set_expected_received_count("at_least",e),e["$=="](0)&&$.$raise("at_least(0) has been removed, use allow(...).to receive(:message) instead"),t=[a],r=$,r["$inner_implementation_action="].apply(r,t),t[t.length-1],$},y.$at_most=f=function(e){var t,r,$=this,o=f.$$p,a=o||n;return f.$$p=null,t=[a],r=$,r["$inner_implementation_action="].apply(r,t),t[t.length-1],$.$set_expected_received_count("at_most",e),$},y.$times=h=function(){var e,t,r=this,$=h.$$p,o=$||n;return h.$$p=null,e=[o],t=r,t["$inner_implementation_action="].apply(t,e),e[e.length-1],r},y.$never=function(){var e,t=this;return(e=t["$negative?"]())===n||e.$$is_boolean&&1!=e||x.get("ErrorGenerator").$raise_double_negation_error("expect(obj)"),t.expected_received_count=0,t},y.$once=m=function(){var e,t,r=this,$=m.$$p,o=$||n;return m.$$p=null,e=[o],t=r,t["$inner_implementation_action="].apply(t,e),e[e.length-1],r.$set_expected_received_count("exactly",1),r},y.$twice=g=function(){var e,t,r=this,$=g.$$p,o=$||n;return g.$$p=null,e=[o],t=r,t["$inner_implementation_action="].apply(t,e),e[e.length-1],r.$set_expected_received_count("exactly",2),r},y.$ordered=v=function(){var e,t,r=this,$=v.$$p,o=$||n;return v.$$p=null,e=[o],t=r,t["$inner_implementation_action="].apply(t,e),e[e.length-1],r.ordered=!0,r},y["$ordered?"]=function(){var e=this;return e.ordered},y["$negative_expectation_for?"]=function(e){var t,n=this;return(t=n.message["$=="](e))?n["$negative?"]():t},y["$actual_received_count_matters?"]=function(){var e,t,r=this;return(e=(t=r.at_least)!==!1&&t!==n?t:r.at_most)!==!1&&e!==n?e:r.exactly},y["$increase_actual_received_count!"]=function(){var e=this;return e.actual_received_count=e.actual_received_count["$+"](1)},b.$private(),y["$failed_fast?"]=function(){var e=this;return e.failed_fast},y.$set_expected_received_count=function(e,t){var r=this,$=n;return r.at_least=e["$=="]("at_least"),r.at_most=e["$=="]("at_most"),r.exactly=e["$=="]("exactly"),r.expected_received_count=function(){return $=t,x.get("Numeric")["$==="]($)?t:"once"["$==="]($)?1:"twice"["$==="]($)?2:n}()},y["$initial_implementation_action="]=function(e){var t,n,r=this;return t=[e],n=r.$implementation(),n["$initial_action="].apply(n,t),t[t.length-1]},y["$inner_implementation_action="]=function(e){var t,r,$=this;return(t=$.$implementation().$inner_action())===n||t.$$is_boolean&&1!=t||x.get("RSpec").$warning("You're overriding a previous implementation for this stub"),e!==!1&&e!==n?(t=[e],r=$.$implementation(),r["$inner_action="].apply(r,t),t[t.length-1]):n},y["$terminal_implementation_action="]=function(e){var t,n,r=this;return t=[e],n=r.$implementation(),n["$terminal_action="].apply(n,t),t[t.length-1]},n&&"terminal_implementation_action="}(s,null),function(e,$super){function t(){}{var r,o=t=a(e,$super,"AndYieldImplementation",t),i=o.$$proto;o.$$scope}return i.args_to_yield=i.eval_context=i.error_generator=n,i.$initialize=function(e,t,n){var r=this;return r.args_to_yield=e,r.eval_context=t,r.error_generator=n},i.$call=r=function(e){var t,o,a,i=this,s=r.$$p,c=s||n,l=n;return e=$.call(arguments,0),r.$$p=null,o=i.args_to_yield["$empty?"](),(t=o!==!1&&o!==n?i.eval_context["$nil?"]():o)===n||t.$$is_boolean&&1!=t?(c!==!1&&c!==n||i.error_generator.$raise_missing_block_error(i.args_to_yield),l=n,(t=(o=i.args_to_yield).$each,t.$$p=(a=function(e){var t,r,$=a.$$s||this;return null==$.error_generator&&($.error_generator=n),null==$.eval_context&&($.eval_context=n),null==e&&(e=n),(t=(r=c.$arity()["$>"](-1))?e.$length()["$=="](c.$arity())["$!"]():r)===n||t.$$is_boolean&&1!=t||$.error_generator.$raise_wrong_arity_error(e,c.$arity()),l=function(){return(t=$.eval_context)===n||t.$$is_boolean&&1!=t?(t=c).$call.apply(t,[].concat(e)):(t=(r=$.eval_context).$instance_exec,t.$$p=c.$to_proc(),t).apply(r,[].concat(e))}()},a.$$s=i,a),t).call(o),l):n},n&&"call"}(s,null),function(e,$super){function t(){}{var r,o=t=a(e,$super,"AndReturnImplementation",t),i=o.$$proto;o.$$scope}return i.values_to_return=n,i.$initialize=function(e){var t=this;return t.values_to_return=e},i.$call=r=function(e){{var t=this;r.$$p}return e=$.call(arguments,0),r.$$p=null,t.values_to_return.$size()["$>"](1)?t.values_to_return.$shift():t.values_to_return.$first()},n&&"call"}(s,null),function(e,$super){function t(){}{var r,o=t=a(e,$super,"Implementation",t),i=o.$$proto;o.$$scope}return o.$attr_accessor("initial_action","inner_action","terminal_action"),i.$call=r=function(e){var t,o,a,i=this,s=r.$$p,c=s||n;return e=$.call(arguments,0),r.$$p=null,(t=(o=i.$actions()).$map,t.$$p=(a=function(t){{var r,$;a.$$s||this}return null==t&&(t=n),(r=($=t).$call,r.$$p=c.$to_proc(),r).apply($,[].concat(e))},a.$$s=i,a),t).call(o).$last()},i["$present?"]=function(){var e=this;return e.$actions()["$any?"]()},o.$private(),i.$actions=function(){var e=this;return[e.$initial_action(),e.$inner_action(),e.$terminal_action()].$compact()},n&&"actions"}(s,null),function(t,$super){function r(){}var o,i=r=a(t,$super,"AndCallOriginalImplementation",r),s=i.$$proto,c=i.$$scope;return s.method=n,s.$initialize=function(e){var t=this;return t.method=e},e.cdecl(c,"CannotModifyFurtherError",c.get("Class").$new(c.get("StandardError"))),s["$initial_action="]=function(){var e=this;return e.$raise(e.$cannot_modify_further_error())},s["$inner_action="]=function(){var e=this;return e.$raise(e.$cannot_modify_further_error())},s["$terminal_action="]=function(){var e=this;return e.$raise(e.$cannot_modify_further_error())},s["$present?"]=function(){return!0},s.$inner_action=function(){return!0},s.$call=o=function(e){var t,r,a=this,i=o.$$p,s=i||n;return e=$.call(arguments,0),o.$$p=null,(t=(r=a.method).$call,t.$$p=s.$to_proc(),t).apply(r,[].concat(e))},i.$private(),s.$cannot_modify_further_error=function(){return c.get("CannotModifyFurtherError").$new("This method has already been configured "["$+"]("to call the original implementation, and cannot be modified further."))},n&&"cannot_modify_further_error"}(s,null),function(t,$super){function $(){}var o,i=$=a(t,$super,"InsertOntoBacktrace",$),s=(i.$$proto,i.$$scope);return e.defs(i,"$line",o=function(t){var $,a=o.$$p,i=a||n,c=n;
o.$$p=null;try{return $=e.yieldX(i,[]),$===r?$:$}catch(l){if(e.rescue(l,[s.get("RSpec").$$scope.get("Mocks").$$scope.get("MockExpectationError")]))return c=l,c.$backtrace().$insert(0,t),s.get("Kernel").$raise(c);throw l}}),n&&"line"}(s,null)}(s)}(t)},Opal.modules["rspec/mocks/order_group"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass,o=e.range;return e.add_stubs(["$<<","$==","$find","$to_proc","$remaining_expectations","$each_with_index","$ordered?","$+","$include?","$ready_for?","$consume","$raise_out_of_order_error","$expectations_invoked_in_order?","$clear","$empty?","$private","$[]","$invoked_expectations","$expected_invocations","$select","$compact","$map","$expectation_for"]),function(t){{var a=r(t,"RSpec");a.$$proto,a.$$scope}!function(t){{var a=r(t,"Mocks");a.$$proto,a.$$scope}!function(t,$super){function r(){}{var a=r=$(t,$super,"OrderGroup",r),i=a.$$proto;a.$$scope}return i.expectations=i.invocation_order=i.index=n,i.$initialize=function(){var e=this;return e.expectations=[],e.invocation_order=[],e.index=0},i.$register=function(e){var t=this;return t.expectations["$<<"](e)},i.$invoked=function(e){var t=this;return t.invocation_order["$<<"](e)},i["$ready_for?"]=function(e){var t,n,r=this;return(t=(n=r.$remaining_expectations()).$find,t.$$p="ordered?".$to_proc(),t).call(n)["$=="](e)},i.$consume=function(){try{var t,r,$,o=this;return(t=(r=o.$remaining_expectations()).$each_with_index,t.$$p=($=function(t,r){var o,a=$.$$s||this;return null==a.index&&(a.index=n),null==t&&(t=n),null==r&&(r=n),(o=t["$ordered?"]())===n||o.$$is_boolean&&1!=o?n:(a.index=a.index["$+"](r["$+"](1)),void e.ret(t))},$.$$s=o,$),t).call(r),n}catch(a){if(a===e.returner)return a.$v;throw a}},i.$handle_order_constraint=function(e){var t,r,$=this;return r=e["$ordered?"](),(t=r!==!1&&r!==n?$.$remaining_expectations()["$include?"](e):r)===n||t.$$is_boolean&&1!=t?n:(t=$["$ready_for?"](e))===n||t.$$is_boolean&&1!=t?e.$raise_out_of_order_error():$.$consume()},i.$verify_invocation_order=function(e){var t,r=this;return((t=r["$expectations_invoked_in_order?"]())===n||t.$$is_boolean&&1!=t)&&e.$raise_out_of_order_error(),!0},i.$clear=function(){var e=this;return e.index=0,e.invocation_order.$clear(),e.expectations.$clear()},i["$empty?"]=function(){var e=this;return e.expectations["$empty?"]()},a.$private(),i.$remaining_expectations=function(){var e,t=this;return(e=t.expectations["$[]"](o(t.index,-1,!1)))!==!1&&e!==n?e:[]},i["$expectations_invoked_in_order?"]=function(){var e=this;return e.$invoked_expectations()["$=="](e.$expected_invocations())},i.$invoked_expectations=function(){var e,t,r,$=this;return(e=(t=$.expectations).$select,e.$$p=(r=function(e){var t,$=r.$$s||this;return null==$.invocation_order&&($.invocation_order=n),null==e&&(e=n),t=e["$ordered?"](),t!==!1&&t!==n?$.invocation_order["$include?"](e):t},r.$$s=$,r),e).call(t)},i.$expected_invocations=function(){var e,t,r,$=this;return(e=(t=$.invocation_order).$map,e.$$p=(r=function(e){var t=r.$$s||this;return null==e&&(e=n),t.$expectation_for(e)},r.$$s=$,r),e).call(t).$compact()},i.$expectation_for=function(e){var t,r,$,o=this;return(t=(r=o.expectations).$find,t.$$p=($=function(t){$.$$s||this;return null==t&&(t=n),e["$=="](t)},$.$$s=o,$),t).call(r)},n&&"expectation_for"}(a,null)}(a)}(t)},Opal.modules["rspec/mocks/errors"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass;return function(e){{var t=r(e,"RSpec");t.$$proto,t.$$scope}!function(e){var t=r(e,"Mocks"),o=(t.$$proto,t.$$scope);!function(e,$super){function t(){}{var r=t=$(e,$super,"MockExpectationError",t);r.$$proto,r.$$scope}return n}(t,o.get("Exception")),function(e,$super){function t(){}{var r=t=$(e,$super,"AmbiguousReturnError",t);r.$$proto,r.$$scope}return n}(t,o.get("StandardError"))}(t)}(t)},Opal.modules["rspec/mocks/error_generator"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass,a=e.hash2;return e.add_stubs(["$attr_writer","$__raise","$intro","$arg_message","$format_args","$expected_args","$format_received_args","$inspect","$message","$join","$collect","$expected_part_of_expectation_error","$received_part_of_expectation_error","$%","$description","$range_description","$+","$count_message","$method_call_args_description","$first","$===","$>","$length","$gsub","$arg_list","$raise","$private","$nil?","$[]","$opts","$empty?","$arg_has_valid_description","$respond_to?","$!","$received_arg_list","$to_proc","$<","$==","$pretty_print","$abs"]),function(t){{var i=$(t,"RSpec");i.$$proto,i.$$scope}!function(t){{var i=$(t,"Mocks");i.$$proto,i.$$scope}!function(t,$super){function $(){}var i=$=o(t,$super,"ErrorGenerator",$),s=i.$$proto,c=i.$$scope;return s.opts=s.name=s.target=n,i.$attr_writer("opts"),s.$initialize=function(e,t){var n=this;return n.target=e,n.name=t},s.$opts=function(){var e,t=this;return(e=t.opts)!==!1&&e!==n?e:t.opts=a([],{})},s.$raise_unexpected_message_error=function(e,t){var n,$=this;return t=r.call(arguments,1),$.$__raise(""+$.$intro()+" received unexpected message :"+e+(n=$).$arg_message.apply(n,[].concat(t)))},s.$raise_unexpected_message_args_error=function(e,t){var $,o,a=this,i=n,s=n;return t=r.call(arguments,1),i=($=a).$format_args.apply($,[].concat(e.$expected_args())),s=(o=a).$format_received_args.apply(o,[].concat(t)),a.$__raise(""+a.$intro()+" received "+e.$message().$inspect()+" with unexpected arguments\n  expected: "+i+"\n       got: "+s)},s.$raise_missing_default_stub_error=function(e,t){var $,o,a=this,i=n,s=n;return t=r.call(arguments,1),i=($=a).$format_args.apply($,[].concat(e.$expected_args())),s=(o=a).$format_received_args.apply(o,[].concat(t)),a.$__raise(""+a.$intro()+" received "+e.$message().$inspect()+" with unexpected arguments\n  expected: "+i+"\n       got: "+s+"\n Please stub a default value first if message might be received with other args as well. \n")},s.$raise_similar_message_args_error=function(e,t){var $,o,a,i,s=this,c=n,l=n;return t=r.call(arguments,1),c=($=s).$format_args.apply($,[].concat(e.$expected_args())),l=(o=(a=t).$collect,o.$$p=(i=function(e){var t,r=i.$$s||this;return null==e&&(e=n),(t=r).$format_received_args.apply(t,[].concat(e))},i.$$s=s,i),o).call(a).$join(", "),s.$__raise(""+s.$intro()+" received "+e.$message().$inspect()+" with unexpected arguments\n  expected: "+c+"\n       got: "+l)},s.$raise_expectation_error=function(e,t,$,o,a,i){var s,c,l=this,u=n,_=n;return i=r.call(arguments,5),u=l.$expected_part_of_expectation_error(t,a,$),_=(s=l).$received_part_of_expectation_error.apply(s,[o].concat(i)),l.$__raise("("+l.$intro()+")."+e+(c=l).$format_args.apply(c,[].concat(i))+"\n    "+u+"\n    "+_)},s.$raise_unimplemented_error=function(e,t){var n=this;return n.$__raise("%s does not implement:\n  %s"["$%"]([e.$description(),t]))},s.$raise_arity_error=function(e,t){var n=this;return n.$__raise("Wrong number of arguments. Expected %s, got %s."["$%"]([e.$range_description(),t]))},s.$received_part_of_expectation_error=function(e,t){var n=this;return t=r.call(arguments,1),("received: "+n.$count_message(e))["$+"](n.$method_call_args_description(t))},s.$expected_part_of_expectation_error=function(e,t,n){var r=this;return("expected: "+r.$count_message(e,t))["$+"](r.$method_call_args_description(n.$expected_args()))},s.$method_call_args_description=function(e){var t=n;return t=e.$first(),c.get("ArgumentMatchers").$$scope.get("AnyArgsMatcher")["$==="](t)?" with any arguments":c.get("ArgumentMatchers").$$scope.get("NoArgsMatcher")["$==="](t)?" with no arguments":e.$length()["$>"](0)?" with arguments: "+e.$inspect().$gsub(/\A\[(.+)\]\z/,"(\\1)"):""},s.$describe_expectation=function(e,t,n,$){var o,a=this;return $=r.call(arguments,3),"have received "+e+(o=a).$format_args.apply(o,[].concat($))+" "+a.$count_message(t)},s.$raise_out_of_order_error=function(e){var t=this;return t.$__raise(""+t.$intro()+" received :"+e+" out of order")},s.$raise_block_failed_error=function(e,t){var n=this;return n.$__raise(""+n.$intro()+" received :"+e+" but passed block failed with: "+t)},s.$raise_missing_block_error=function(e){var t,n=this;return n.$__raise(""+n.$intro()+" asked to yield |"+(t=n).$arg_list.apply(t,[].concat(e))+"| but no block was passed")},s.$raise_wrong_arity_error=function(e,t){var n,r=this;return r.$__raise(""+r.$intro()+" yielded |"+(n=r).$arg_list.apply(n,[].concat(e))+"| to block with arity of "+t)},s.$raise_only_valid_on_a_partial_mock=function(e){var t=this;return t.$__raise((""+t.$intro()+" is a pure mock object. `"+e+"` is only ")["$+"]("available on a partial mock object."))},s.$raise_expectation_on_unstubbed_method=function(e){var t=this;return t.$__raise((""+t.$intro()+" expected to have received "+e+", but that ")["$+"]("method has not been stubbed."))},s.$raise_expectation_on_mocked_method=function(e){var t=this;return t.$__raise((""+t.$intro()+" expected to have received "+e+", but that ")["$+"]("method has been mocked instead of stubbed."))},e.defs(i,"$raise_double_negation_error",function(e){var t=this;return t.$raise("Isn't life confusing enough? You've already set a "["$+"]("negative message expectation and now you are trying to ")["$+"]("negate it again with `never`. What does an expression like ")["$+"]("`"+e+".not_to receive(:msg).never` even mean?"))}),i.$private(),s.$intro=function(){var e,t=this;return(e=t.name)===n||e.$$is_boolean&&1!=e?(e=c.get("TestDouble")["$==="](t.target))===n||e.$$is_boolean&&1!=e?(e=c.get("Class")["$==="](t.target))===n||e.$$is_boolean&&1!=e?(e=t.target)===n||e.$$is_boolean&&1!=e?"nil":t.target:"<"+t.target.$inspect()+" (class)>":"Double":"Double "+t.name.$inspect()},s.$__raise=function(e){var t,r=this;return((t=r.$opts()["$[]"]("message")["$nil?"]())===n||t.$$is_boolean&&1!=t)&&(e=r.$opts()["$[]"]("message")),c.get("Kernel").$raise(c.get("RSpec").$$scope.get("Mocks").$$scope.get("MockExpectationError"),e)},s.$arg_message=function(e){var t,n=this;return e=r.call(arguments,0)," with "["$+"]((t=n).$format_args.apply(t,[].concat(e)))},s.$format_args=function(e){var t,$=this;return e=r.call(arguments,0),(t=e["$empty?"]())===n||t.$$is_boolean&&1!=t?"("["$+"]((t=$).$arg_list.apply(t,[].concat(e)))["$+"](")"):"(no args)"},s.$arg_list=function(e){var t,$,o,a=this;return e=r.call(arguments,0),(t=($=e).$collect,t.$$p=(o=function(e){var t,r=o.$$s||this;return null==e&&(e=n),(t=r.$arg_has_valid_description(e))===n||t.$$is_boolean&&1!=t?e.$inspect():e.$description()},o.$$s=a,o),t).call($).$join(", ")},s.$arg_has_valid_description=function(e){var t;return(t=e["$respond_to?"]("description"))===n||t.$$is_boolean&&1!=t?!1:(t=e.$description()["$nil?"]()["$!"](),t!==!1&&t!==n?e.$description()["$empty?"]()["$!"]():t)},s.$format_received_args=function(e){var t,$=this;return e=r.call(arguments,0),(t=e["$empty?"]())===n||t.$$is_boolean&&1!=t?"("["$+"]((t=$).$received_arg_list.apply(t,[].concat(e)))["$+"](")"):"(no args)"},s.$received_arg_list=function(e){var t,n;return e=r.call(arguments,0),(t=(n=e).$collect,t.$$p="inspect".$to_proc(),t).call(n).$join(", ")},s.$count_message=function(e,t){var r,$,o=this;return null==t&&(t=n),(r=($=e["$<"](0))!==!1&&$!==n?$:t["$=="]("at_least"))===n||r.$$is_boolean&&1!=r?t["$=="]("at_most")?"at most "+o.$pretty_print(e):o.$pretty_print(e):"at least "+o.$pretty_print(e.$abs())},s.$pretty_print=function(e){return""+e+" time"+function(){return e["$=="](1)?"":"s"}()},n&&"pretty_print"}(i,null)}(i)}(t)},Opal.modules.securerandom=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module);return e.add_stubs(["$gsub"]),function(t){{var $=r(t,"SecureRandom");$.$$proto,$.$$scope}e.defs($,"$uuid",function(){var e,t,r,$=this;return(e=(t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx").$gsub,e.$$p=(r=function(e){r.$$s||this;null==e&&(e=n);var t=16*Math.random()|0,$="x"==e?t:3&t|8;return $.toString(16)},r.$$s=$,r),e).call(t,/[xy]/)})}(t)},Opal.modules["rspec/mocks/space"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass,o=e.hash2;return e.add_stubs(["$attr_reader","$each_value","$verify","$proxies","$any_instance_recorders","$reset_all","$reset","$clear","$expectation_ordering","$new","$__id__","$fetch","$[]=","$delete","$select","$===","$object","$values","$id_for","$__build_mock_proxy","$verify_partial_doubles?","$configuration","$has_key?","$!","$method_defined?","$require","$equal?","$_id2ref","$instance_exec","$uuid"]),function(t){{var a=r(t,"RSpec");a.$$proto,a.$$scope}!function(t){{var a=r(t,"Mocks");a.$$proto,a.$$scope}!function(t,$super){function r(){}var a,i,s=r=$(t,$super,"Space",r),c=s.$$proto,l=s.$$scope;return c.expectation_ordering=n,s.$attr_reader("proxies","any_instance_recorders"),c.$initialize=function(){var e=this;return e.proxies=o([],{}),e.any_instance_recorders=o([],{})},c.$verify_all=function(){var e,t,r,$,o,a=this;return(e=(t=a.$proxies()).$each_value,e.$$p=(r=function(e){r.$$s||this;return null==e&&(e=n),e.$verify()},r.$$s=a,r),e).call(t),(e=($=a.$any_instance_recorders()).$each_value,e.$$p=(o=function(e){o.$$s||this;return null==e&&(e=n),e.$verify()},o.$$s=a,o),e).call($)},c.$reset_all=function(){var e,t,r,$=this;return l.get("ConstantMutator").$reset_all(),(e=(t=$.$proxies()).$each_value,e.$$p=(r=function(e){r.$$s||this;return null==e&&(e=n),e.$reset()},r.$$s=$,r),e).call(t),$.$proxies().$clear(),$.$any_instance_recorders().$clear(),$.$expectation_ordering().$clear()},c.$expectation_ordering=function(){var e,t=this;return(e=t.expectation_ordering)!==!1&&e!==n?e:t.expectation_ordering=l.get("OrderGroup").$new()},c.$any_instance_recorder_for=function(e){var t,r,$,o=this,a=n;return a=e.$__id__(),(t=(r=o.$any_instance_recorders()).$fetch,t.$$p=($=function(){var t=$.$$s||this;return t.$any_instance_recorders()["$[]="](a,l.get("AnyInstance").$$scope.get("Recorder").$new(e))},$.$$s=o,$),t).call(r,a)},c.$remove_any_instance_recorder_for=function(e){var t=this;return t.$any_instance_recorders().$delete(e.$__id__())},c.$proxies_of=function(e){var t,r,$,o=this;return(t=(r=o.$proxies().$values()).$select,t.$$p=($=function(t){$.$$s||this;return null==t&&(t=n),e["$==="](t.$object())},$.$$s=o,$),t).call(r)},c.$proxy_for=function(e){var t,r,$,o=this,a=n;return a=o.$id_for(e),(t=(r=o.$proxies()).$fetch,t.$$p=($=function(){var t,r=$.$$s||this,o=n;return r.$proxies()["$[]="](a,function(){return o=e,l.get("NilClass")["$==="](o)?l.get("ProxyForNil").$new(r.$expectation_ordering()):l.get("TestDouble")["$==="](o)?e.$__build_mock_proxy(r.$expectation_ordering()):(t=l.get("RSpec").$$scope.get("Mocks").$configuration()["$verify_partial_doubles?"]())===n||t.$$is_boolean&&1!=t?l.get("PartialMockProxy").$new(e,r.$expectation_ordering()):l.get("VerifyingPartialMockProxy").$new(e,r.$expectation_ordering())}())},$.$$s=o,$),t).call(r,a)},e.defn(s,"$ensure_registered",c.$proxy_for),c["$registered?"]=function(e){var t=this;return t.$proxies()["$has_key?"](t.$id_for(e))},i=null==e.Object.$$scope.BasicObject?n:"constant",(a=i!==!1&&i!==n?e.get("BasicObject")["$method_defined?"]("__id__")["$!"]():i)===n||a.$$is_boolean&&1!=a?(c.$id_for=function(e){return e.$__id__()},n&&"id_for"):(s.$require("securerandom"),c.$id_for=function(t){var r,$,o,a=this,i=n;return i=t.$__id__(),(r=t["$equal?"](e.get("ObjectSpace").$_id2ref(i)))===n||r.$$is_boolean&&1!=r?(r=($=t).$instance_exec,r.$$p=(o=function(){var t,r=o.$$s||this;return null==r.__id_for_rspec_mocks_space&&(r.__id_for_rspec_mocks_space=n),(t=r.__id_for_rspec_mocks_space)!==!1&&t!==n?t:r.__id_for_rspec_mocks_space=e.get("SecureRandom").$uuid()},o.$$s=a,o),r).call($):i},n&&"id_for")}(a,null)}(a)}(t)},Opal.modules["rspec/mocks/extensions/marshal"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module;return e.add_stubs(["$nil?","$space","$!","$registered?","$===","$dump_without_mocks","$dup","$alias_method","$undef_method"]),function(t){{var o=$(t,"Marshal");o.$$proto,o.$$scope}!function(t){{var $=t.$$scope;t.$$proto}return t.$$proto.$dump_with_mocks=function(t,o){var a,i,s,c=this;return o=r.call(arguments,1),(a=(i=(s=e.get("RSpec").$$scope.get("Mocks").$space()["$nil?"]())!==!1&&s!==n?s:e.get("RSpec").$$scope.get("Mocks").$space()["$registered?"](t)["$!"]())!==!1&&i!==n?i:$.get("NilClass")["$==="](t))===n||a.$$is_boolean&&1!=a?(i=c).$dump_without_mocks.apply(i,[t.$dup()].concat(o)):(a=c).$dump_without_mocks.apply(a,[t].concat(o))},t.$alias_method("dump_without_mocks","dump"),t.$undef_method("dump"),t.$alias_method("dump","dump_with_mocks")}(o.$singleton_class())}(t)},Opal.modules["rspec/mocks/any_instance/chain"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass;return e.add_stubs(["$define_method","$record","$to_proc","$include","$create_message_expectation_on","$inject","$__send__","$last","$first","$messages","$any?","$==","$negated?","$raise_double_negation_error","$private","$empty?","$verify_invocation_order","$<<","$unshift"]),function(t){{var a=$(t,"RSpec");a.$$proto,a.$$scope}!function(t){{var a=$(t,"Mocks");a.$$proto,a.$$scope}!function(t){{var a=$(t,"AnyInstance");a.$$proto,a.$$scope}!function(t,$super){function a(){}var i,s,c,l=a=o(t,$super,"Chain",a),u=l.$$proto,_=l.$$scope;return u.messages=n,u.$initialize=i=function(e,t){var $=this,o=i.$$p,a=o||n;return t=r.call(arguments,1),i.$$p=null,$.recorder=e,$.expectation_args=t,$.expectation_block=a},function(t){{var o=$(t,"Customizations");o.$$proto,o.$$scope}e.defs(o,"$record",function(e){var t,$,o,a=this;return(t=($=a).$define_method,t.$$p=(o=function(t){var $,a,i,s=o.$$s||this;return t=r.call(arguments,0),$=o.$$p||n,o.$$p=null,(a=(i=s).$record,a.$$p=$.$to_proc(),a).apply(i,[e].concat(t))},o.$$s=a,o),t).call($,e)}),o.$record("and_return"),o.$record("and_raise"),o.$record("and_throw"),o.$record("and_yield"),o.$record("and_call_original"),o.$record("with"),o.$record("once"),o.$record("twice"),o.$record("any_number_of_times"),o.$record("exactly"),o.$record("times"),o.$record("never"),o.$record("at_least"),o.$record("at_most")}(l),l.$include(_.get("Customizations")),u["$playback!"]=function(e){var t,r,$,o=this,a=n;return a=o.$create_message_expectation_on(e),(t=(r=o.$messages()).$inject,t.$$p=($=function(e,t){{var r,o;$.$$s||this}return null==e&&(e=n),null==t&&(t=n),(r=(o=e).$__send__,r.$$p=t.$last().$to_proc(),r).apply(o,[].concat(t.$first()))},$.$$s=o,$),t).call(r,a)},u["$constrained_to_any_of?"]=function(e){var t,$,o,a=this;return e=r.call(arguments,0),(t=($=e)["$any?"],t.$$p=(o=function(e){var t,r,$,a=o.$$s||this;return null==e&&(e=n),(t=(r=a.$messages())["$any?"],t.$$p=($=function(t){$.$$s||this;return null==t&&(t=n),t.$first().$first()["$=="](e)},$.$$s=a,$),t).call(r)},o.$$s=a,o),t).call($)},u["$expectation_fulfilled!"]=function(){var e=this;return e.expectation_fulfilled=!0},u.$never=s=function(){var t,$=r.call(arguments,0),o=this,a=s.$$p;return s.$$p=null,(t=o["$negated?"]())===n||t.$$is_boolean&&1!=t||_.get("ErrorGenerator").$raise_double_negation_error("expect_any_instance_of(MyClass)"),e.find_super_dispatcher(o,"never",s,a).apply(o,$)},l.$private(),u["$negated?"]=function(){var e,t,r,$=this;return(e=(t=$.$messages())["$any?"],e.$$p=(r=function(e,t){r.$$s||this;return message=e[0],null==t&&(t=n),message["$=="]("never")},r.$$s=$,r),e).call(t)},u.$messages=function(){var e,t=this;return(e=t.messages)!==!1&&e!==n?e:t.messages=[]},u.$last_message=function(){var e,t=this;return(e=t.$messages()["$empty?"]())===n||e.$$is_boolean&&1!=e?t.$messages().$last().$first().$first():n},u.$record=c=function(e,t){var $,o,a=this,i=c.$$p,s=i||n;return t=r.call(arguments,1),c.$$p=null,($=(o=a).$verify_invocation_order,$.$$p=s.$to_proc(),$).apply(o,[e].concat(t)),a.$messages()["$<<"]([t.$unshift(e),s]),a},n&&"record"}(a,null)}(a)}(a)}(t)},Opal.modules["rspec/mocks/any_instance/stub_chain"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass,a=e.hash2;return e.add_stubs(["$private","$proxy_for","$add_stub","$to_proc","$<<","$[]","$stubs","$message","$yield_receiver_to_any_instance_implementation_blocks?","$configuration","$and_yield_receiver_to_implementation","$include?","$invocation_order","$last_message","$raise"]),function(t){{var i=$(t,"RSpec");i.$$proto,i.$$scope}!function(t){{var i=$(t,"Mocks");i.$$proto,i.$$scope}!function(t){var i=$(t,"AnyInstance"),s=(i.$$proto,i.$$scope);!function(t,$super){function $(){}var i,s=$=o(t,$super,"StubChain",$),c=s.$$proto,l=s.$$scope;return c.expectation_block=c.expectation_args=c.recorder=c.invocation_order=n,c["$expectation_fulfilled?"]=function(){return!0},s.$private(),c.$create_message_expectation_on=function(t){var r,$,o=this,a=n,i=n,s=n;return a=e.get("RSpec").$$scope.get("Mocks").$proxy_for(t),i=l.get("IGNORED_BACKTRACE_LINE"),s=(r=($=a).$add_stub,r.$$p=o.expectation_block.$to_proc(),r).apply($,[i].concat(o.expectation_args)),o.recorder.$stubs()["$[]"](s.$message())["$<<"](s),(r=l.get("RSpec").$$scope.get("Mocks").$configuration()["$yield_receiver_to_any_instance_implementation_blocks?"]())===n||r.$$is_boolean&&1!=r||s.$and_yield_receiver_to_implementation(),s},c.$invocation_order=function(){var e,t=this;return(e=t.invocation_order)!==!1&&e!==n?e:t.invocation_order=a(["with","and_return","and_raise","and_yield","and_call_original"],{"with":[n],and_return:["with",n],and_raise:["with",n],and_yield:["with",n],and_call_original:["with",n]})},c.$verify_invocation_order=i=function(e,t){{var $,o=this;i.$$p}return t=r.call(arguments,1),i.$$p=null,($=o.$invocation_order()["$[]"](e)["$include?"](o.$last_message()))===n||$.$$is_boolean&&1!=$?o.$raise(l.get("NoMethodError"),"Undefined method "+e):n},n&&"verify_invocation_order"}(i,s.get("Chain"))}(i)}(i)}(t)},Opal.modules["rspec/mocks/any_instance/stub_chain_chain"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass,o=e.hash2;return e.add_stubs(["$private","$stub_chain_on","$to_proc"]),function(t){{var a=r(t,"RSpec");a.$$proto,a.$$scope}!function(t){{var a=r(t,"Mocks");a.$$proto,a.$$scope}!function(t){var a=r(t,"AnyInstance"),i=(a.$$proto,a.$$scope);!function(t,$super){function r(){}{var a=r=$(t,$super,"StubChainChain",r),i=a.$$proto;a.$$scope}return i.expectation_block=i.expectation_args=i.invocation_order=n,a.$private(),i.$create_message_expectation_on=function(t){var n,r,$=this;return(n=(r=e.get("RSpec").$$scope.get("Mocks").$$scope.get("StubChain")).$stub_chain_on,n.$$p=$.expectation_block.$to_proc(),n).apply(r,[t].concat($.expectation_args))},i.$invocation_order=function(){var e,t=this;return(e=t.invocation_order)!==!1&&e!==n?e:t.invocation_order=o(["and_return","and_raise","and_yield"],{and_return:[n],and_raise:[n],and_yield:[n]})},n&&"invocation_order"}(a,i.get("StubChain"))}(a)}(a)}(t)},Opal.modules["rspec/mocks/any_instance/expectation_chain"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass,a=e.hash2;return e.add_stubs(["$constrained_to_any_of?","$private","$proxy_for","$add_message_expectation","$to_proc","$yield_receiver_to_any_instance_implementation_blocks?","$configuration","$and_yield_receiver_to_implementation"]),function(t){{var i=$(t,"RSpec");i.$$proto,i.$$scope}!function(t){{var i=$(t,"Mocks");i.$$proto,i.$$scope}!function(t){var i=$(t,"AnyInstance"),s=(i.$$proto,i.$$scope);!function(t,$super){function $(){}{var a,i,s=$=o(t,$super,"ExpectationChain",$),c=s.$$proto;s.$$scope}return c.expectation_fulfilled=n,c["$expectation_fulfilled?"]=function(){var e,t=this;return(e=t.expectation_fulfilled)!==!1&&e!==n?e:t["$constrained_to_any_of?"]("never","any_number_of_times")},c.$initialize=a=function(t){var n=r.call(arguments,0),$=this,o=a.$$p;return t=r.call(arguments,0),a.$$p=null,$.expectation_fulfilled=!1,e.find_super_dispatcher($,"initialize",a,o).apply($,n)},s.$private(),c.$verify_invocation_order=i=function(e,t){i.$$p;return t=r.call(arguments,1),i.$$p=null,n},n&&"verify_invocation_order"}(i,s.get("Chain")),function(t,$super){function r(){}var $=r=o(t,$super,"PositiveExpectationChain",r),i=$.$$proto,s=$.$$scope;return i.expectation_block=i.expectation_args=i.invocation_order=n,$.$private(),i.$create_message_expectation_on=function(t){var r,$,o=this,a=n,i=n,c=n;return a=e.get("RSpec").$$scope.get("Mocks").$proxy_for(t),i=s.get("IGNORED_BACKTRACE_LINE"),c=(r=($=a).$add_message_expectation,r.$$p=o.expectation_block.$to_proc(),r).apply($,[i].concat(o.expectation_args)),(r=s.get("RSpec").$$scope.get("Mocks").$configuration()["$yield_receiver_to_any_instance_implementation_blocks?"]())===n||r.$$is_boolean&&1!=r||c.$and_yield_receiver_to_implementation(),c},i.$invocation_order=function(){var e,t=this;return(e=t.invocation_order)!==!1&&e!==n?e:t.invocation_order=a(["with","and_return","and_raise"],{"with":[n],and_return:["with",n],and_raise:["with",n]})},n&&"invocation_order"}(i,s.get("ExpectationChain"))}(i)}(i)}(t)},Opal.modules["rspec/mocks/any_instance/message_chains"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$new","$[]=","$[]","$<<","$reject!","$===","$find","$all?","$expectation_fulfilled?","$compact","$map","$last","$to_s","$each","$expectation_fulfilled!","$raise_if_second_instance_to_receive_message","$playback!","$private","$!","$equal?","$raise","$join","$sort","$unfulfilled_expectations"]),function(e){{var t=r(e,"RSpec");t.$$proto,t.$$scope}!function(e){{var t=r(e,"Mocks");t.$$proto,t.$$scope}!function(e){{var t=r(e,"AnyInstance");t.$$proto,t.$$scope}!function(e,$super){function t(){}var r=t=$(e,$super,"MessageChains",t),o=r.$$proto,a=r.$$scope;return o.chains_by_method_name=o.instance_with_expectation=n,o.$initialize=function(){var e,t,r,$=this;return $.chains_by_method_name=(e=(t=a.get("Hash")).$new,e.$$p=(r=function(e,t){r.$$s||this;return null==e&&(e=n),null==t&&(t=n),e["$[]="](t,[])},r.$$s=$,r),e).call(t)},o["$[]"]=function(e){var t=this;return t.chains_by_method_name["$[]"](e)},o.$add=function(e,t){var n=this;return n.chains_by_method_name["$[]"](e)["$<<"](t),t},o["$remove_stub_chains_for!"]=function(e){var t,r,$,o=this;return(t=(r=o.chains_by_method_name["$[]"](e))["$reject!"],t.$$p=($=function(e){$.$$s||this;return null==e&&(e=n),a.get("StubChain")["$==="](e)},$.$$s=o,$),t).call(r)},o["$has_expectation?"]=function(e){var t,r,$,o=this;return(t=(r=o.chains_by_method_name["$[]"](e)).$find,t.$$p=($=function(e){$.$$s||this;return null==e&&(e=n),a.get("ExpectationChain")["$==="](e)},$.$$s=o,$),t).call(r)},o["$all_expectations_fulfilled?"]=function(){var e,t,r,$=this;return(e=(t=$.chains_by_method_name)["$all?"],e.$$p=(r=function(e,t){var $,o,a,i=r.$$s||this;return null==e&&(e=n),null==t&&(t=n),($=(o=t)["$all?"],$.$$p=(a=function(e){a.$$s||this;return null==e&&(e=n),e["$expectation_fulfilled?"]()},a.$$s=i,a),$).call(o)},r.$$s=$,r),e).call(t)},o.$unfulfilled_expectations=function(){var e,t,r,$=this;return(e=(t=$.chains_by_method_name).$map,e.$$p=(r=function(e,t){{var $;r.$$s||this}return null==e&&(e=n),null==t&&(t=n),($=t.$last()["$expectation_fulfilled?"]())===n||$.$$is_boolean&&1!=$?($=a.get("ExpectationChain")["$==="](t.$last()))===n||$.$$is_boolean&&1!=$?n:e.$to_s():n},r.$$s=$,r),e).call(t).$compact()},o["$received_expected_message!"]=function(e){var t,r,$,o=this;return(t=(r=o.chains_by_method_name["$[]"](e)).$each,t.$$p=($=function(e){$.$$s||this;return null==e&&(e=n),e["$expectation_fulfilled!"]()},$.$$s=o,$),t).call(r)},o["$playback!"]=function(e,t){var r,$,o,a=this;return a.$raise_if_second_instance_to_receive_message(e),(r=($=a.chains_by_method_name["$[]"](t)).$each,r.$$p=(o=function(t){o.$$s||this;return null==t&&(t=n),t["$playback!"](e)},o.$$s=a,o),r).call($)},r.$private(),o.$raise_if_second_instance_to_receive_message=function(e){var t,r,$=this;return(t=a.get("ExpectationChain")["$==="](e))===n||t.$$is_boolean&&1!=t||((t=$.instance_with_expectation)!==!1&&t!==n?t:$.instance_with_expectation=e),r=a.get("ExpectationChain")["$==="](e),(t=r!==!1&&r!==n?$.instance_with_expectation["$equal?"](e)["$!"]():r)===n||t.$$is_boolean&&1!=t?n:$.$raise(a.get("RSpec").$$scope.get("Mocks").$$scope.get("MockExpectationError"),"Exactly one instance should have received the following message(s) but didn't: "+$.$unfulfilled_expectations().$sort().$join(", "))},n&&"raise_if_second_instance_to_receive_message"}(t,null)}(t)}(t)}(t)},Opal.modules["rspec/mocks/any_instance/recorder"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=e.breaker,$=e.slice,o=e.module,a=e.klass,i=e.hash2;return e.add_stubs(["$attr_reader","$new","$[]=","$===","$each","$and_return","$stub","$observe!","$add","$message_chains","$to_proc","$normalize_chain","$never","$should_receive","$include?","$to_sym","$raise","$remove_stub_chains_for!","$remove_single_stub","$[]","$stubs","$proxies_of","$clear","$has_expectation?","$stop_observing!","$!","$all_expectations_fulfilled?","$join","$sort","$unfulfilled_expectations","$stop_all_observation!","$remove_any_instance_recorder_for","$space","$restore_method!","$ensure_registered","$playback!","$received_expected_message!","$private","$unshift","$reverse","$map","$split","$to_s","$shift","$first","$mark_invoked!","$public_protected_or_private_method_defined?","$build_alias_method_name","$restore_original_method!","$remove_dummy_method!","$class_exec","$remove_method","$alias_method","$method_defined?","$private_method_defined?","$delete","$verify_partial_doubles?","$configuration","$already_observing?","$<<","$backup_method!","$__send__","$owner","$method_handle_for","$any_instance_recorder_for","$instance_that_received","$inspect"]),function(t){{var s=o(t,"RSpec");s.$$proto,s.$$scope}!function(t){{var s=o(t,"Mocks");s.$$proto,s.$$scope}!function(t){{var s=o(t,"AnyInstance");s.$$proto,s.$$scope}!function(t,$super){function o(){}var s,c,l,u,_,p=o=a(t,$super,"Recorder",o),d=p.$$proto,f=p.$$scope;return d.observed_methods=d.klass=d.expectation_set=d.played_methods=n,p.$attr_reader("message_chains","stubs","klass"),d.$initialize=function(e){var t,r,$,o=this;return o.message_chains=f.get("MessageChains").$new(),o.stubs=(t=(r=f.get("Hash")).$new,t.$$p=($=function(e,t){$.$$s||this;return null==e&&(e=n),null==t&&(t=n),e["$[]="](t,[])},$.$$s=o,$),t).call(r),o.observed_methods=[],o.played_methods=i([],{}),o.klass=e,o.expectation_set=!1},d.$stub=s=function(e){var t,r,$,o,a=this,i=s.$$p,c=i||n;return s.$$p=null,(t=f.get("Hash")["$==="](e))===n||t.$$is_boolean&&1!=t?(a["$observe!"](e),a.$message_chains().$add(e,(t=(o=f.get("StubChain")).$new,t.$$p=c.$to_proc(),t).call(o,a,e))):(t=(r=e).$each,t.$$p=($=function(e,t){var r=$.$$s||this;return null==e&&(e=n),null==t&&(t=n),r.$stub(e).$and_return(t)},$.$$s=a,$),t).call(r)},d.$stub_chain=c=function(e){var t,r,o,a=this,i=c.$$p,s=i||n;return e=$.call(arguments,0),c.$$p=null,(t=(r=a).$normalize_chain,t.$$p=(o=function(e,t){var r,$,a=o.$$s||this;return null==e&&(e=n),null==t&&(t=n),a["$observe!"](e),a.$message_chains().$add(e,(r=($=f.get("StubChainChain")).$new,r.$$p=s.$to_proc(),r).apply($,[a].concat(t)))},o.$$s=a,o),t).apply(r,[].concat(e))},d.$should_receive=l=function(e){var t,r,$=this,o=l.$$p,a=o||n;return l.$$p=null,$.expectation_set=!0,$["$observe!"](e),$.$message_chains().$add(e,(t=(r=f.get("PositiveExpectationChain")).$new,t.$$p=a.$to_proc(),t).call(r,$,e))},d.$should_not_receive=u=function(e){var t,r,$=this,o=u.$$p,a=o||n;return u.$$p=null,(t=(r=$).$should_receive,t.$$p=a.$to_proc(),t).call(r,e).$never()},d.$unstub=function(t){var r,$,o,a=this;return((r=a.observed_methods["$include?"](t.$to_sym()))===n||r.$$is_boolean&&1!=r)&&a.$raise(f.get("RSpec").$$scope.get("Mocks").$$scope.get("MockExpectationError"),"The method `"+t+"` was not stubbed or was already unstubbed"),a.$message_chains()["$remove_stub_chains_for!"](t),(r=($=e.get("RSpec").$$scope.get("Mocks").$proxies_of(a.klass)).$each,r.$$p=(o=function(e){var r,$,a,i=o.$$s||this;return null==e&&(e=n),(r=($=i.$stubs()["$[]"](t)).$each,r.$$p=(a=function(r){a.$$s||this;return null==r&&(r=n),e.$remove_single_stub(t,r)},a.$$s=i,a),r).call($)},o.$$s=a,o),r).call($),a.$stubs()["$[]"](t).$clear(),(r=a.$message_chains()["$has_expectation?"](t))===n||r.$$is_boolean&&1!=r?a["$stop_observing!"](t):n},d.$verify=function(){var t,r,$=this;try{return r=$.expectation_set,(t=r!==!1&&r!==n?$.$message_chains()["$all_expectations_fulfilled?"]()["$!"]():r)===n||t.$$is_boolean&&1!=t?n:$.$raise(f.get("RSpec").$$scope.get("Mocks").$$scope.get("MockExpectationError"),"Exactly one instance should have received the following message(s) but didn't: "+$.$message_chains().$unfulfilled_expectations().$sort().$join(", "))}finally{$["$stop_all_observation!"](),e.get("RSpec").$$scope.get("Mocks").$space().$remove_any_instance_recorder_for($.klass)
}},d["$stop_all_observation!"]=function(){var e,t,r,$=this;return(e=(t=$.observed_methods).$each,e.$$p=(r=function(e){var t=r.$$s||this;return null==e&&(e=n),t["$restore_method!"](e)},r.$$s=$,r),e).call(t)},d["$playback!"]=function(e,t){var r,$=this;return f.get("RSpec").$$scope.get("Mocks").$space().$ensure_registered(e),$.$message_chains()["$playback!"](e,t),$.played_methods["$[]="](t,e),(r=$.$message_chains()["$has_expectation?"](t))===n||r.$$is_boolean&&1!=r?n:$["$received_expected_message!"](t)},d.$instance_that_received=function(e){var t=this;return t.played_methods["$[]"](e)},d.$build_alias_method_name=function(e){return"__"+e+"_without_any_instance__"},d["$already_observing?"]=function(e){var t=this;return t.observed_methods["$include?"](e)},p.$private(),d.$normalize_chain=_=function(t){var o,a,i,s,c,l,u=this,p=_.$$p,d=p||n;return t=$.call(arguments,0),_.$$p=null,(o=(a=(s=(c=t.$shift().$to_s().$split(".")).$map,s.$$p=(l=function(e){l.$$s||this;return null==e&&(e=n),e.$to_sym()},l.$$s=u,l),s).call(c).$reverse()).$each,o.$$p=(i=function(e){i.$$s||this;return null==e&&(e=n),t.$unshift(e)},i.$$s=u,i),o).call(a),o=e.yieldX(d,[t.$first(),t]),o===r?o:o},d["$received_expected_message!"]=function(e){var t=this;return t.$message_chains()["$received_expected_message!"](e),t["$restore_method!"](e),t["$mark_invoked!"](e)},d["$restore_method!"]=function(e){var t,r=this;return(t=r["$public_protected_or_private_method_defined?"](r.$build_alias_method_name(e)))===n||t.$$is_boolean&&1!=t?r["$remove_dummy_method!"](e):r["$restore_original_method!"](e)},d["$restore_original_method!"]=function(e){var t,r,$,o=this,a=n;return a=o.$build_alias_method_name(e),(t=(r=o.klass).$class_exec,t.$$p=($=function(){var t=$.$$s||this;return t.$remove_method(e),t.$alias_method(e,a),t.$remove_method(a)},$.$$s=o,$),t).call(r)},d["$remove_dummy_method!"]=function(e){var t,n,r,$=this;return(t=(n=$.klass).$class_exec,t.$$p=(r=function(){var t=r.$$s||this;return t.$remove_method(e)},r.$$s=$,r),t).call(n)},d["$backup_method!"]=function(e){var t,r,$,o=this,a=n;return a=o.$build_alias_method_name(e),(t=o["$public_protected_or_private_method_defined?"](e))===n||t.$$is_boolean&&1!=t?n:(t=(r=o.klass).$class_exec,t.$$p=($=function(){var t=$.$$s||this;return t.$alias_method(a,e)},$.$$s=o,$),t).call(r)},d["$public_protected_or_private_method_defined?"]=function(e){var t,r=this;return(t=r.klass["$method_defined?"](e))!==!1&&t!==n?t:r.klass["$private_method_defined?"](e)},d["$stop_observing!"]=function(e){var t=this;return t["$restore_method!"](e),t.observed_methods.$delete(e)},d["$observe!"]=function(t){var r,o,a,i=this;return(r=f.get("RSpec").$$scope.get("Mocks").$configuration()["$verify_partial_doubles?"]())===n||r.$$is_boolean&&1!=r||((r=i.klass["$method_defined?"](t))===n||r.$$is_boolean&&1!=r)&&i.$raise(f.get("MockExpectationError")),(r=i["$already_observing?"](t))===n||r.$$is_boolean&&1!=r||i["$stop_observing!"](t),i.observed_methods["$<<"](t),i["$backup_method!"](t),(r=(o=i.klass).$__send__,r.$$p=(a=function(r){var o,i,s,c=a.$$s||this,l=n;return r=$.call(arguments,0),o=a.$$p||n,a.$$p=null,l=e.get("RSpec").$$scope.get("Mocks").$method_handle_for(c,t).$owner(),e.get("RSpec").$$scope.get("Mocks").$any_instance_recorder_for(l)["$playback!"](c,t),(i=(s=c).$__send__,i.$$p=o.$to_proc(),i).apply(s,[t].concat(r))},a.$$s=i,a),r).call(o,"define_method",t)},d["$mark_invoked!"]=function(t){var r,o,a,i=this;return i["$backup_method!"](t),(r=(o=i.klass).$__send__,r.$$p=(a=function(r){var o,i=a.$$s||this,s=n,c=n;return r=$.call(arguments,0),o=a.$$p||n,a.$$p=null,s=e.get("RSpec").$$scope.get("Mocks").$method_handle_for(i,t).$owner(),c=e.get("RSpec").$$scope.get("Mocks").$any_instance_recorder_for(s).$instance_that_received(t),i.$raise(f.get("RSpec").$$scope.get("Mocks").$$scope.get("MockExpectationError"),"The message '"+t+"' was received by "+i.$inspect()+" but has already been received by "+c)},a.$$s=i,a),r).call(o,"define_method",t)},n&&"mark_invoked!"}(s,null)}(s)}(s)}(t)},Opal.modules["rspec/mocks/mutate_const"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=e.breaker,$=e.slice,o=e.module,a=e.klass,i=e.hash2,s=e.hash;return e.add_stubs(["$==","$arity","$method","$const_defined?","$const_defined_on?","$const_get","$raise","$name","$select","$constants","$inject","$get_const_defined_on","$split","$normalize_const_name","$!","$===","$join","$sub","$extend","$attr_reader","$attr_accessor","$attr_writer","$class","$new","$previously_defined=","$recursive_const_defined?","$stubbed=","$hidden=","$previously_defined?","$original_value=","$recursive_const_get","$private_class_method","$find","$to_constant","$unmutated","$to_proc","$raise_on_invalid_const","$mutate","$fetch","$transfer_nested_constants?","$configuration","$include","$pop","$full_constant_name","$original_value","$__send__","$const_set","$verify_constants_to_transfer!","$transfer_nested_constants","$each","$respond_to?","$+","$map","$-","$constants_defined_on","$any?","$dup","$shift","$first","$register_mutator","$rspec_reset","$reverse","$mutators","$clear","$<<","$lambda"]),function(t){{var c=o(t,"RSpec");c.$$proto,c.$$scope}!function(t){var c=o(t,"Mocks"),l=(c.$$proto,c.$$scope);!function(t){var $,a=o(t,"RecursiveConstMethods"),i=a.$$proto,s=a.$$scope;s.get("Module").$method("const_defined?").$arity()["$=="](1)?(i["$const_defined_on?"]=function(e,t){return e["$const_defined?"](t)},i.$get_const_defined_on=function(e,t){var r,$=this;return(r=$["$const_defined_on?"](e,t))===n||r.$$is_boolean&&1!=r?$.$raise(s.get("NameError"),"uninitialized constant "+e.$name()+"::"+t):e.$const_get(t)},i.$constants_defined_on=function(e){var t,r,$,o=this;return(t=(r=e.$constants()).$select,t.$$p=($=function(t){var r=$.$$s||this;return null==t&&(t=n),r["$const_defined_on?"](e,t)},$.$$s=o,$),t).call(r)}):(i["$const_defined_on?"]=function(e,t){return e["$const_defined?"](t,!1)},i.$get_const_defined_on=function(e,t){return e.$const_get(t,!1)},i.$constants_defined_on=function(e){return e.$constants(!1)}),i.$recursive_const_get=function(e){var t,r,$,o=this;return(t=(r=o.$normalize_const_name(e).$split("::")).$inject,t.$$p=($=function(e,t){var r=$.$$s||this;return null==e&&(e=n),null==t&&(t=n),r.$get_const_defined_on(e,t)},$.$$s=o,$),t).call(r,s.get("Object"))},i["$recursive_const_defined?"]=$=function(t){try{var o,a,i,c=this,l=$.$$p,u=l||n;return $.$$p=null,(o=(a=c.$normalize_const_name(t).$split("::")).$inject,o.$$p=(i=function(t,$){var o,a,c=i.$$s||this;return mod=t[0],full_name=t[1],null==$&&($=n),(o=(a=u!==n)?s.get("Module")["$==="](mod)["$!"]():a)===n||o.$$is_boolean&&1!=o||e.yieldX(u,[full_name,$])!==r?(((o=c["$const_defined_on?"](mod,$))===n||o.$$is_boolean&&1!=o)&&e.ret(!1),[c.$get_const_defined_on(mod,$),[mod,$].$join("::")]):r.$v},i.$$s=c,i),o).call(a,[s.get("Object"),""])}catch(_){if(_===e.returner)return _.$v;throw _}},i.$normalize_const_name=function(e){return e.$sub(/\A::/,"")},e.donate(a,["$const_defined_on?","$get_const_defined_on","$constants_defined_on","$const_defined_on?","$get_const_defined_on","$constants_defined_on","$recursive_const_get","$recursive_const_defined?","$normalize_const_name"])}(c),function(t,$super){function r(){}var $=r=a(t,$super,"Constant",r),o=$.$$proto,i=$.$$scope;return o.previously_defined=o.stubbed=o.hidden=n,$.$extend(i.get("RecursiveConstMethods")),o.$initialize=function(e){var t=this;return t.name=e,t.previously_defined=!1,t.stubbed=!1,t.hidden=!1},$.$attr_reader("name"),$.$attr_accessor("original_value"),$.$attr_writer("previously_defined","stubbed","hidden"),o["$previously_defined?"]=function(){var e=this;return e.previously_defined},o["$mutated?"]=function(){var e,t=this;return(e=t.stubbed)!==!1&&e!==n?e:t.hidden},o["$stubbed?"]=function(){var e=this;return e.stubbed},o["$hidden?"]=function(){var e=this;return e.hidden},o.$to_s=function(){var e=this;return"#<"+e.$class().$name()+" "+e.$name()+">"},e.defn($,"$inspect",o.$to_s),e.defs($,"$unmutated",function(e){var t,r,$=this,o=n;return o=$.$new(e),t=[$["$recursive_const_defined?"](e)],r=o,r["$previously_defined="].apply(r,t),t[t.length-1],t=[!1],r=o,r["$stubbed="].apply(r,t),t[t.length-1],t=[!1],r=o,r["$hidden="].apply(r,t),t[t.length-1],(t=o["$previously_defined?"]())===n||t.$$is_boolean&&1!=t||(t=[$.$recursive_const_get(e)],r=o,r["$original_value="].apply(r,t),t[t.length-1]),o}),$.$private_class_method("unmutated"),e.defs($,"$original",function(e){var t=this,r=n;return r=i.get("ConstantMutator").$find(e),r!==!1&&r!==n?r.$to_constant():t.$unmutated(e)}),n&&"original"}(c,null),function(t,$super){function o(){}var c=o=a(t,$super,"ConstantMutator",o),l=(c.$$proto,c.$$scope);return c.$extend(l.get("RecursiveConstMethods")),e.defs(c,"$stub",function(e,t,r){var $,o,a,s=this,c=n;return null==r&&(r=i([],{})),c=function(){return l.get(($=(o=(a=s)["$recursive_const_defined?"],o.$$p=s.$raise_on_invalid_const().$to_proc(),o).call(a,e))===n||$.$$is_boolean&&1!=$?"UndefinedConstantSetter":"DefinedConstantReplacer")}(),s.$mutate(c.$new(e,t,r.$fetch("transfer_nested_constants",l.get("RSpec").$$scope.get("Mocks").$configuration()["$transfer_nested_constants?"]()))),t}),e.defs(c,"$hide",function(e){var t,r=this;return(t=r["$recursive_const_defined?"](e))===n||t.$$is_boolean&&1!=t?n:(r.$mutate(l.get("ConstantHider").$new(e,n,i([],{}))),n)}),function(e,$super){function t(){}var r=t=a(e,$super,"BaseMutator",t),$=r.$$proto,o=r.$$scope;return $.full_constant_name=$.context_parts=n,r.$include(o.get("RecursiveConstMethods")),r.$attr_reader("original_value","full_constant_name"),$.$initialize=function(e,t,n){var r=this;return r.full_constant_name=r.$normalize_const_name(e),r.mutated_value=t,r.transfer_nested_constants=n,r.context_parts=r.full_constant_name.$split("::"),r.const_name=r.context_parts.$pop()},$.$to_constant=function(){var e,t,r=this,$=n;return $=o.get("Constant").$new(r.$full_constant_name()),e=[r.$original_value()],t=$,t["$original_value="].apply(t,e),e[e.length-1],$},n&&"to_constant"}(c,null),function(t,$super){function r(){}{var o,i=r=a(t,$super,"ConstantHider",r),s=i.$$proto;i.$$scope}return s.context_parts=s.context=s.const_name=s.original_value=n,s.$mutate=function(){var e=this;return e.context=e.$recursive_const_get(e.context_parts.$join("::")),e.original_value=e.$get_const_defined_on(e.context,e.const_name),e.context.$__send__("remove_const",e.const_name)},s.$to_constant=o=function(){var t,r,a=$.call(arguments,0),i=this,s=o.$$p,c=n;return o.$$p=null,c=e.find_super_dispatcher(i,"to_constant",o,s).apply(i,a),t=[!0],r=c,r["$hidden="].apply(r,t),t[t.length-1],t=[!0],r=c,r["$previously_defined="].apply(r,t),t[t.length-1],c},s.$rspec_reset=function(){var e=this;return e.context.$const_set(e.const_name,e.original_value)},n&&"rspec_reset"}(c,l.get("BaseMutator")),function(t,$super){function r(){}var o,i=r=a(t,$super,"DefinedConstantReplacer",r),c=i.$$proto,l=i.$$scope;return c.context_parts=c.context=c.const_name=c.mutated_value=c.original_value=c.transfer_nested_constants=c.full_constant_name=n,c.$mutate=function(){var e=this,t=n;return e.context=e.$recursive_const_get(e.context_parts.$join("::")),e.original_value=e.$get_const_defined_on(e.context,e.const_name),t=e["$verify_constants_to_transfer!"](),e.context.$__send__("remove_const",e.const_name),e.context.$const_set(e.const_name,e.mutated_value),e.$transfer_nested_constants(t)},c.$to_constant=o=function(){var t,r,a=$.call(arguments,0),i=this,s=o.$$p,c=n;return o.$$p=null,c=e.find_super_dispatcher(i,"to_constant",o,s).apply(i,a),t=[!0],r=c,r["$stubbed="].apply(r,t),t[t.length-1],t=[!0],r=c,r["$previously_defined="].apply(r,t),t[t.length-1],c},c.$rspec_reset=function(){var e=this;return e.context.$__send__("remove_const",e.const_name),e.context.$const_set(e.const_name,e.original_value)},c.$transfer_nested_constants=function(e){var t,r,$,o=this;return(t=(r=e).$each,t.$$p=($=function(e){var t=$.$$s||this;return null==t.mutated_value&&(t.mutated_value=n),null==e&&(e=n),t.mutated_value.$const_set(e,t.$get_const_defined_on(t.$original_value(),e))},$.$$s=o,$),t).call(r)},c["$verify_constants_to_transfer!"]=function(){var e,t,r,$,o=this,a=n,i=n;return(e=o.transfer_nested_constants)===n||e.$$is_boolean&&1!=e?[]:((e=(t=s(o.original_value,"the original value",o.mutated_value,"the stubbed value")).$each,e.$$p=(r=function(e,t){var $,o=r.$$s||this;return null==o.full_constant_name&&(o.full_constant_name=n),null==e&&(e=n),null==t&&(t=n),($=e["$respond_to?"]("constants"))===n||$.$$is_boolean&&1!=$?o.$raise(l.get("ArgumentError"),("Cannot transfer nested constants for "+o.full_constant_name+" ")["$+"]("since "+t+" is not a class or module and only classes ")["$+"]("and modules support nested constants.")):n},r.$$s=o,r),e).call(t),(e=l.get("Array")["$==="](o.transfer_nested_constants))===n||e.$$is_boolean&&1!=e?o.$constants_defined_on(o.original_value):(l.get("RUBY_VERSION")["$=="]("1.8.7")&&(o.transfer_nested_constants=(e=($=o.transfer_nested_constants).$map,e.$$p="to_s".$to_proc(),e).call($)),a=o.transfer_nested_constants["$-"](o.$constants_defined_on(o.original_value)),(e=a["$any?"]())===n||e.$$is_boolean&&1!=e||(i=o.$constants_defined_on(o.original_value)["$-"](o.transfer_nested_constants),o.$raise(l.get("ArgumentError"),("Cannot transfer nested constant(s) "+a.$join(" and ")+" ")["$+"]("for "+o.full_constant_name+" since they are not defined. Did you mean ")["$+"](""+i.$join(" or ")+"?"))),o.transfer_nested_constants))},n&&"verify_constants_to_transfer!"}(c,l.get("BaseMutator")),function(t,$super){function o(){}var i,s=o=a(t,$super,"UndefinedConstantSetter",o),c=s.$$proto,l=s.$$scope;return c.context_parts=c.deepest_defined_const=c.const_name=c.mutated_value=c.const_to_remove=n,c.$mutate=function(){var e,t,$,o,a,i=this,s=n,c=n;return s=i.context_parts.$dup(),i.deepest_defined_const=(e=(t=i.context_parts).$inject,e.$$p=($=function(e,t){var o,a=$.$$s||this;return null==e&&(e=n),null==t&&(t=n),(o=a["$const_defined_on?"](e,t))===n||o.$$is_boolean&&1!=o?(r.$v=e,r):(s.$shift(),a.$get_const_defined_on(e,t))},$.$$s=i,$),e).call(t,l.get("Object")),c=(e=(o=s).$inject,e.$$p=(a=function(e,t){a.$$s||this;return null==e&&(e=n),null==t&&(t=n),e.$const_set(t,l.get("Module").$new())},a.$$s=i,a),e).call(o,i.deepest_defined_const),i.const_to_remove=(e=s.$first())!==!1&&e!==n?e:i.const_name,c.$const_set(i.const_name,i.mutated_value)},c.$to_constant=i=function(){var t,r,o=$.call(arguments,0),a=this,s=i.$$p,c=n;return i.$$p=null,c=e.find_super_dispatcher(a,"to_constant",i,s).apply(a,o),t=[!0],r=c,r["$stubbed="].apply(r,t),t[t.length-1],t=[!1],r=c,r["$previously_defined="].apply(r,t),t[t.length-1],c},c.$rspec_reset=function(){var e=this;return e.deepest_defined_const.$__send__("remove_const",e.const_to_remove)},n&&"rspec_reset"}(c,l.get("BaseMutator")),e.defs(c,"$mutate",function(e){var t=this;return t.$register_mutator(e),e.$mutate()}),e.defs(c,"$reset_all",function(){var e,t,r,$=this;return(e=(t=$.$mutators().$reverse()).$each,e.$$p=(r=function(e){r.$$s||this;return null==e&&(e=n),e.$rspec_reset()},r.$$s=$,r),e).call(t),$.$mutators().$clear()}),e.defs(c,"$mutators",function(){var e,t=this;return null==t.mutators&&(t.mutators=n),(e=t.mutators)!==!1&&e!==n?e:t.mutators=[]}),e.defs(c,"$register_mutator",function(e){var t=this;return t.$mutators()["$<<"](e)}),e.defs(c,"$find",function(e){var t,r,$,o=this;return(t=(r=o.$mutators()).$find,t.$$p=($=function(t){$.$$s||this;return null==t&&(t=n),t.$full_constant_name()["$=="](e)},$.$$s=o,$),t).call(r)}),e.defs(c,"$raise_on_invalid_const",function(){var e,t,r,$=this;return(e=(t=$).$lambda,e.$$p=(r=function(e,t){var $=r.$$s||this;return null==e&&(e=n),null==t&&(t=n),$.$raise(("Cannot stub constant "+t+" on "+e+" ")["$+"]("since "+e+" is not a module."))},r.$$s=$,r),e).call(t)}),n&&"raise_on_invalid_const"}(c,null),e.cdecl(l,"ConstantStubber",l.get("ConstantMutator"))}(c)}(t)},Opal.modules["rspec/mocks/matchers/have_received"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass;return e.add_stubs(["$+","$expect","$expected_messages_received_in_order?","$ensure_count_unconstrained","$never","$generate_failure_message","$description","$each","$define_method","$<<","$private","$build_expectation","$mock_proxy","$apply_constraints_to","$send","$count_constraint","$raise","$detect","$include?","$map","$to_proc","$check_for_unexpected_arguments","$generate_error","$message","$replay_received_message_on","$expected_messages_received?","$ensure_expected_ordering_received!","$proxy_for"]),function(t){{var a=$(t,"RSpec");a.$$proto,a.$$scope}!function(t){{var a=$(t,"Mocks");a.$$proto,a.$$scope}!function(t){{var a=$(t,"Matchers");a.$$proto,a.$$scope}!function(t,$super){function $(){}var a,i,s,c,l,u=$=o(t,$super,"HaveReceived",$),_=u.$$proto,p=u.$$scope;return _.block=_.method_name=_.constraints=_.expectation=_.subject=n,e.cdecl(p,"COUNT_CONSTRAINTS",["exactly","at_least","at_most","times","once","twice"]),e.cdecl(p,"ARGS_CONSTRAINTS",["with"]),e.cdecl(p,"CONSTRAINTS",p.get("COUNT_CONSTRAINTS")["$+"](p.get("ARGS_CONSTRAINTS"))["$+"](["ordered"])),_.$initialize=a=function(e){var t=this,r=a.$$p,$=r||n;return a.$$p=null,t.method_name=e,t.block=$,t.constraints=[],t.subject=n},_.$name=function(){return"have_received"},_["$matches?"]=i=function(e){var t,r=this,$=i.$$p,o=$||n;return i.$$p=null,(t=r.block)!==!1&&t!==n?t:r.block=o,r.subject=e,r.expectation=r.$expect(),r["$expected_messages_received_in_order?"]()},_["$does_not_match?"]=function(e){var t=this;return t.subject=e,t.$ensure_count_unconstrained(),t.expectation=t.$expect().$never(),t["$expected_messages_received_in_order?"]()},_.$failure_message=function(){var e=this;return e.$generate_failure_message()},_.$negative_failure_message=function(){var e=this;return e.$generate_failure_message()},_.$description=function(){var e=this;return e.$expect().$description()},(s=(c=p.get("CONSTRAINTS")).$each,s.$$p=(l=function(e){var t,$,o,a=l.$$s||this;return null==e&&(e=n),(t=($=a).$define_method,t.$$p=(o=function(t){var $=o.$$s||this;return null==$.constraints&&($.constraints=n),t=r.call(arguments,0),$.constraints["$<<"]([e].concat(t)),$},o.$$s=a,o),t).call($,e)},l.$$s=u,l),s).call(c),u.$private(),_.$expect=function(){var e=this,t=n;return t=e.$mock_proxy().$build_expectation(e.method_name),e.$apply_constraints_to(t),t},_.$apply_constraints_to=function(e){var t,r,$,o=this;return(t=(r=o.constraints).$each,t.$$p=($=function(t){{var r;$.$$s||this}return null==t&&(t=n),(r=e).$send.apply(r,[].concat(t))},$.$$s=o,$),t).call(r)},_.$ensure_count_unconstrained=function(){var e,t=this;return(e=t.$count_constraint())===n||e.$$is_boolean&&1!=e?n:t.$raise(p.get("RSpec").$$scope.get("Mocks").$$scope.get("MockExpectationError"),"can't use "+t.$count_constraint()+" when negative")},_.$count_constraint=function(){var e,t,r,$,o,a=this;return(e=(t=($=(o=a.constraints).$map,$.$$p="first".$to_proc(),$).call(o)).$detect,e.$$p=(r=function(e){r.$$s||this;return null==e&&(e=n),p.get("COUNT_CONSTRAINTS")["$include?"](e)},r.$$s=a,r),e).call(t)},_.$generate_failure_message=function(){var t=this,r=n;try{return t.$mock_proxy().$check_for_unexpected_arguments(t.expectation),t.expectation.$generate_error()}catch($){if(e.rescue($,[p.get("RSpec").$$scope.get("Mocks").$$scope.get("MockExpectationError")]))return r=$,r.$message();throw $}},_["$expected_messages_received_in_order?"]=function(){var e,t,r=this;return(e=(t=r.$mock_proxy()).$replay_received_message_on,e.$$p=r.block.$to_proc(),e).call(t,r.expectation),e=r.expectation["$expected_messages_received?"](),e!==!1&&e!==n?r.expectation["$ensure_expected_ordering_received!"]():e},_.$mock_proxy=function(){var e=this;return p.get("RSpec").$$scope.get("Mocks").$proxy_for(e.subject)},n&&"mock_proxy"}(a,null)}(a)}(a)}(t)},Opal.modules["rspec/mocks/matchers/receive"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass;return e.add_stubs(["$first_non_rspec_line","$warn_if_any_instance","$setup_mock_proxy_method_substitute","$unshift","$new","$setup_expectation","$to_proc","$setup_any_instance_method_substitute","$each","$method_defined?","$define_method","$<<","$public_instance_methods","$private","$===","$warning","$klass","$proxy_for","$setup_method_substitute","$any_instance_recorder_for","$to_sym","$__send__","$playback_onto"]),function(t){{var a=$(t,"RSpec");a.$$proto,a.$$scope}!function(t){{var a=$(t,"Mocks");a.$$proto,a.$$scope}!function(t){{var a=$(t,"Matchers");a.$$proto,a.$$scope}!function(t,$super){function $(){}var a,i,s,c,l,u,_,p,d,f=$=o(t,$super,"Receive",$),h=f.$$proto,m=f.$$scope;return h.recorded_customizations=h.backtrace_line=h.message=h.block=n,h.$initialize=function(e,t){var n=this;return n.message=e,n.block=t,n.recorded_customizations=[],n.backtrace_line=m.get("CallerFilter").$first_non_rspec_line()},h.$name=function(){return"receive"},h.$setup_expectation=a=function(e){var t=this,r=a.$$p,$=r||n;return a.$$p=null,t.$warn_if_any_instance("expect",e),t.$setup_mock_proxy_method_substitute(e,"add_message_expectation",$)},e.defn(f,"$matches?",h.$setup_expectation),h.$setup_negative_expectation=i=function(e){var t,r,$=this,o=i.$$p,a=o||n;return i.$$p=null,$.recorded_customizations.$unshift(m.get("Customization").$new("never",[],n)),$.$warn_if_any_instance("expect",e),(t=(r=$).$setup_expectation,t.$$p=a.$to_proc(),t).call(r,e)},e.defn(f,"$does_not_match?",h.$setup_negative_expectation),h.$setup_allowance=s=function(e){var t=this,r=s.$$p,$=r||n;return s.$$p=null,t.$warn_if_any_instance("allow",e),t.$setup_mock_proxy_method_substitute(e,"add_stub",$)},h.$setup_any_instance_expectation=c=function(e){var t=this,r=c.$$p,$=r||n;return c.$$p=null,t.$setup_any_instance_method_substitute(e,"should_receive",$)},h.$setup_any_instance_negative_expectation=l=function(e){var t=this,r=l.$$p,$=r||n;return l.$$p=null,t.$setup_any_instance_method_substitute(e,"should_not_receive",$)},h.$setup_any_instance_allowance=u=function(e){var t=this,r=u.$$p,$=r||n;return u.$$p=null,t.$setup_any_instance_method_substitute(e,"stub",$)},(_=(p=m.get("MessageExpectation").$public_instance_methods(!1)).$each,_.$$p=(d=function(e){var t,$,o,a=d.$$s||this;return null==e&&(e=n),(t=a["$method_defined?"](e))===n||t.$$is_boolean&&1!=t?(t=($=a).$define_method,t.$$p=(o=function(t){var $,a=o.$$s||this;return null==a.recorded_customizations&&(a.recorded_customizations=n),t=r.call(arguments,0),$=o.$$p||n,o.$$p=null,a.recorded_customizations["$<<"](m.get("Customization").$new(e,t,$)),a},o.$$s=a,o),t).call($,e):n},d.$$s=f,d),_).call(p),f.$private(),h.$warn_if_any_instance=function(e,t){var r;return(r=m.get("AnyInstance").$$scope.get("Recorder")["$==="](t))===n||r.$$is_boolean&&1!=r?n:m.get("RSpec").$warning(("`"+e+"("+t.$klass()+".any_instance).to` ")["$<<"]("is probably not what you meant, it does not operate on ")["$<<"]("any instance of `"+t.$klass()+"`. ")["$<<"]("Use `"+e+"_any_instance_of("+t.$klass()+").to` instead."))},h.$setup_mock_proxy_method_substitute=function(t,r,$){var o=this,a=n;return a=e.get("RSpec").$$scope.get("Mocks").$proxy_for(t),o.$setup_method_substitute(a,r,$,o.backtrace_line)},h.$setup_any_instance_method_substitute=function(t,r,$){var o=this,a=n;return a=e.get("RSpec").$$scope.get("Mocks").$any_instance_recorder_for(t),o.$setup_method_substitute(a,r,$)},h.$setup_method_substitute=function(e,t,$,o){var a,i,s,c,l=this,u=n;return o=r.call(arguments,3),o["$<<"](l.message.$to_sym()),u=(a=(i=e).$__send__,a.$$p=((s=l.block)!==!1&&s!==n?s:$).$to_proc(),a).apply(i,[t].concat(o)),(a=(s=l.recorded_customizations).$each,a.$$p=(c=function(e){c.$$s||this;return null==e&&(e=n),e.$playback_onto(u)},c.$$s=l,c),a).call(s),u},function(e,$super){function t(){}{var r=t=o(e,$super,"Customization",t),$=r.$$proto;r.$$scope}return $.block=$.method_name=$.args=n,$.$initialize=function(e,t,n){var r=this;return r.method_name=e,r.args=t,r.block=n},$.$playback_onto=function(e){var t,n,r=this;return(t=(n=e).$__send__,t.$$p=r.block.$to_proc(),t).apply(n,[r.method_name].concat(r.args))},n&&"playback_onto"}(f,null)}(a,null)}(a)}(a)}(t)},Opal.modules["rspec/mocks/matchers/receive_messages"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=e.breaker,$=(e.slice,e.module),o=e.klass;return e.add_stubs(["$first_non_rspec_line","$warn_about_block","$each_message_on","$add_simple_expectation","$proxy_on","$raise","$+","$add_simple_stub","$and_return","$should_receive","$any_instance_of","$stub","$private","$proxy_for","$any_instance_recorder_for","$each"]),function(t){{var a=$(t,"RSpec");a.$$proto,a.$$scope}!function(t){{var a=$(t,"Mocks");a.$$proto,a.$$scope}!function(t){{var a=$(t,"Matchers");a.$$proto,a.$$scope}!function(t,$super){function $(){}var a,i,s,c,l,u=$=o(t,$super,"ReceiveMessages",$),_=u.$$proto,p=u.$$scope;return _.message_return_value_hash=n,_.$initialize=function(e){var t=this;return t.message_return_value_hash=e,t.backtrace_line=p.get("CallerFilter").$first_non_rspec_line()},_.$name=function(){return"receive_messages"},_.$setup_expectation=a=function(e){var t,r,$,o=this,i=a.$$p,s=i||n;return a.$$p=null,s!==n&&o.$warn_about_block(),(t=(r=o).$each_message_on,t.$$p=($=function(e,t,r){var o=$.$$s||this;return null==o.backtrace_line&&(o.backtrace_line=n),null==e&&(e=n),null==t&&(t=n),null==r&&(r=n),e.$add_simple_expectation(t,r,o.backtrace_line)},$.$$s=o,$),t).call(r,o.$proxy_on(e))},e.defn(u,"$matches?",_.$setup_expectation),_.$setup_negative_expectation=function(){var e=this;return e.$raise(p.get("NegationUnsupportedError"),"`expect(...).to_not receive_messages` is not supported since it "["$+"]("doesn't really make sense. What would it even mean?"))},e.defn(u,"$does_not_match?",_.$setup_negative_expectation),_.$setup_allowance=i=function(e){var t,r,$,o=this,a=i.$$p,s=a||n;return i.$$p=null,s!==n&&o.$warn_about_block(),(t=(r=o).$each_message_on,t.$$p=($=function(e,t,r){$.$$s||this;return null==e&&(e=n),null==t&&(t=n),null==r&&(r=n),e.$add_simple_stub(t,r)},$.$$s=o,$),t).call(r,o.$proxy_on(e))},_.$setup_any_instance_expectation=s=function(e){var t,r,$,o=this,a=s.$$p,i=a||n;return s.$$p=null,i!==n&&o.$warn_about_block(),(t=(r=o).$each_message_on,t.$$p=($=function(e,t,r){$.$$s||this;return null==e&&(e=n),null==t&&(t=n),null==r&&(r=n),e.$should_receive(t).$and_return(r)},$.$$s=o,$),t).call(r,o.$any_instance_of(e))},_.$setup_any_instance_allowance=c=function(e){var t=this,r=c.$$p,$=r||n;return c.$$p=null,$!==n&&t.$warn_about_block(),t.$any_instance_of(e).$stub(t.message_return_value_hash)},_.$warn_about_block=function(){var e=this;return e.$raise("Implementation blocks aren't supported with `receive_messages`")},u.$private(),_.$proxy_on=function(t){return e.get("RSpec").$$scope.get("Mocks").$proxy_for(t)},_.$any_instance_of=function(t){return e.get("RSpec").$$scope.get("Mocks").$any_instance_recorder_for(t)},_.$each_message_on=l=function(t){var $,o,a,i=this,s=l.$$p,c=s||n;return l.$$p=null,($=(o=i.message_return_value_hash).$each,$.$$p=(a=function($,o){{var i;a.$$s||this}return null==$&&($=n),null==o&&(o=n),i=e.yieldX(c,[t,$,o]),i===r?i:i},a.$$s=i,a),$).call(o)},n&&"each_message_on"}(a,null)}(a)}(a)}(t)},Opal.modules["rspec/mocks/stub_chain"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass;return e.add_stubs(["$stub_chain","$new","$to_proc","$attr_reader","$format_chain","$>","$length","$chain","$find_matching_stub","$shift","$block","$invoke","$stub","$object","$stub_chain_on","$private","$===","$last","$pop","$each","$<<","$lambda","$split","$join","$__send__","$proxy_for","$to_sym","$first"]),function(t){{var a=$(t,"RSpec");a.$$proto,a.$$scope}!function(t){{var a=$(t,"Mocks");a.$$proto,a.$$scope}!function(t,$super){function $(){}var a,i,s,c=$=o(t,$super,"StubChain",$),l=c.$$proto,u=c.$$scope;return e.defs(c,"$stub_chain_on",a=function(e,t){var $,o,i=this,s=a.$$p,c=s||n;return t=r.call(arguments,1),a.$$p=null,($=(o=i).$new,$.$$p=c.$to_proc(),$).apply(o,[e].concat(t)).$stub_chain()}),c.$attr_reader("object","chain","block"),l.$initialize=i=function(t,$){var o,a,s,c=this,l=i.$$p,u=l||n;return $=r.call(arguments,1),i.$$p=null,c.object=t,o=e.to_ary((a=(s=c).$format_chain,a.$$p=u.$to_proc(),a).apply(s,[].concat($))),c.chain=null==o[0]?n:o[0],c.block=null==o[1]?n:o[1]},l.$stub_chain=function(){var e,t,r,$,o,a,i=this,s=n,c=n;return i.$chain().$length()["$>"](1)?(e=s=i.$find_matching_stub())===n||e.$$is_boolean&&1!=e?(c=u.get("Mock").$new(),(e=(r=i.$object()).$stub,e.$$p=($=function(){$.$$s||this;return c},$.$$s=i,$),e).call(r,i.$chain().$shift()),(e=(o=u.get("StubChain")).$stub_chain_on,e.$$p=i.$block().$to_proc(),e).apply(o,[c].concat(i.$chain()))):(i.$chain().$shift(),(e=(t=s.$invoke(n)).$stub_chain,e.$$p=i.$block().$to_proc(),e).apply(t,[].concat(i.$chain()))):(e=(a=i.$object()).$stub,e.$$p=i.$block().$to_proc(),e).call(a,i.$chain().$shift())},c.$private(),l.$format_chain=s=function(e){var t,$,o,a=this,i=s.$$p,c=i||n,l=n;return e=r.call(arguments,0),s.$$p=null,(t=u.get("Hash")["$==="](e.$last()))===n||t.$$is_boolean&&1!=t||(l=e.$pop(),(t=($=l).$each,t.$$p=(o=function(t,r){var $,a,i,s=o.$$s||this;return null==t&&(t=n),null==r&&(r=n),e["$<<"](t),c=($=(a=s).$lambda,$.$$p=(i=function(){i.$$s||this;return r},i.$$s=s,i),$).call(a)},o.$$s=a,o),t).call($)),[e.$join(".").$split("."),c]},l.$find_matching_stub=function(){var t=this;return e.get("RSpec").$$scope.get("Mocks").$proxy_for(t.$object()).$__send__("find_matching_method_stub",t.$chain().$first().$to_sym())},n&&"find_matching_stub"}(a,null)}(a)}(t)},Opal.modules["rspec/mocks/targets"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass,a=e.hash2;return e.add_stubs(["$new","$define_method","$===","$raise_unsupported_matcher","$define_matcher","$to_proc","$fetch","$raise_negation_unsupported","$private","$__send__","$raise","$+","$expression","$name","$class","$delegate_to","$disallow_negation","$delegate_not_to"]),function(t){{var i=$(t,"RSpec");i.$$proto,i.$$scope}!function(t){var i=$(t,"Mocks"),s=(i.$$proto,i.$$scope);e.cdecl(s,"UnsupportedMatcherError",s.get("Class").$new(s.get("StandardError"))),e.cdecl(s,"NegationUnsupportedError",s.get("Class").$new(s.get("StandardError"))),function(t,$super){function $(){}var i,s=$=o(t,$super,"TargetBase",$),c=s.$$proto,l=s.$$scope;return c.target=n,c.$initialize=function(e){var t=this;return t.target=e},e.defs(s,"$delegate_to",function(e){var t,r,$,o=this;return(t=(r=o).$define_method,t.$$p=($=function(t){var r,o,a,i=$.$$s||this;return null==t&&(t=n),r=$.$$p||n,$.$$p=null,((o=(a=l.get("Matchers").$$scope.get("Receive")["$==="](t))!==!1&&a!==n?a:l.get("Matchers").$$scope.get("ReceiveMessages")["$==="](t))===n||o.$$is_boolean&&1!=o)&&i.$raise_unsupported_matcher("to",t),(o=(a=i).$define_matcher,o.$$p=r.$to_proc(),o).call(a,t,e)},$.$$s=o,$),t).call(r,"to")}),e.defs(s,"$delegate_not_to",function(e,t){var r,$,o,i=this,s=n;return null==t&&(t=a([],{})),s=t.$fetch("from"),(r=($=i).$define_method,r.$$p=(o=function(t){var r,$,a,i=o.$$s||this,c=n;return null==t&&(t=n),r=o.$$p||n,o.$$p=null,function(){return c=t,l.get("Matchers").$$scope.get("Receive")["$==="](c)?($=(a=i).$define_matcher,$.$$p=r.$to_proc(),$).call(a,t,e):l.get("Matchers").$$scope.get("ReceiveMessages")["$==="](c)?i.$raise_negation_unsupported(s,t):i.$raise_unsupported_matcher(s,t)}()},o.$$s=i,o),r).call($,s)}),e.defs(s,"$disallow_negation",function(e){var t,$,o,a=this;return(t=($=a).$define_method,t.$$p=(o=function(t,$){var a=o.$$s||this;return null==t&&(t=n),$=r.call(arguments,1),a.$raise_negation_unsupported(e,t)},o.$$s=a,o),t).call($,e)}),s.$private(),c.$define_matcher=i=function(e,t){var r,$,o=this,a=i.$$p,s=a||n;return i.$$p=null,(r=($=e).$__send__,r.$$p=s.$to_proc(),r).call($,t,o.target)},c.$raise_unsupported_matcher=function(e,t){var n=this;return n.$raise(l.get("UnsupportedMatcherError"),"only the `receive` or `receive_messages` matchers are supported "["$+"]("with `"+n.$expression()+"(...)."+e+"`, but you have provided: "+t))},c.$raise_negation_unsupported=function(e,t){var n=this;return n.$raise(l.get("NegationUnsupportedError"),("`"+n.$expression()+"(...)."+e+" "+t.$name()+"` is not supported since it ")["$+"]("doesn't really make sense. What would it even mean?"))},c.$expression=function(){var e=this;return e.$class().$$scope.get("EXPRESSION")},n&&"expression"}(i,null),function(t,$super){function n(){}var r=n=o(t,$super,"AllowanceTarget",n),$=(r.$$proto,r.$$scope);return e.cdecl($,"EXPRESSION","allow"),r.$delegate_to("setup_allowance"),r.$disallow_negation("not_to"),r.$disallow_negation("to_not")}(i,s.get("TargetBase")),function(t,$super){function n(){}var r=n=o(t,$super,"ExpectationTarget",n),$=(r.$$proto,r.$$scope);return e.cdecl($,"EXPRESSION","expect"),r.$delegate_to("setup_expectation"),r.$delegate_not_to("setup_negative_expectation",a(["from"],{from:"not_to"})),r.$delegate_not_to("setup_negative_expectation",a(["from"],{from:"to_not"}))
}(i,s.get("TargetBase")),function(t,$super){function n(){}var r=n=o(t,$super,"AnyInstanceAllowanceTarget",n),$=(r.$$proto,r.$$scope);return e.cdecl($,"EXPRESSION","allow_any_instance_of"),r.$delegate_to("setup_any_instance_allowance"),r.$disallow_negation("not_to"),r.$disallow_negation("to_not")}(i,s.get("TargetBase")),function(t,$super){function n(){}var r=n=o(t,$super,"AnyInstanceExpectationTarget",n),$=(r.$$proto,r.$$scope);return e.cdecl($,"EXPRESSION","expect_any_instance_of"),r.$delegate_to("setup_any_instance_expectation"),r.$delegate_not_to("setup_any_instance_negative_expectation",a(["from"],{from:"not_to"})),r.$delegate_not_to("setup_any_instance_negative_expectation",a(["from"],{from:"to_not"}))}(i,s.get("TargetBase"))}(i)}(t)},Opal.modules["rspec/mocks/syntax"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.hash2;return e.add_stubs(["$deprecate","$should_enabled?","$class_exec","$warn_unless_should_configured","$[]","$[]=","$first_non_rspec_line","$expect_message","$to_proc","$never","$===","$each","$and_return","$stub","$allow_message","$remove_stub","$proxy_for","$space","$stub_chain_on","$as_null_object","$received_message?","$respond_to?","$any_instance_recorder_for","$default_should_syntax_host","$expect_enabled?","$new","$warn_about_block","$method_defined?","$==","$>","$to_f","$last","$ancestors"]),function(t){{var a=$(t,"RSpec");a.$$proto,a.$$scope}!function(t){{var a=$(t,"Mocks");a.$$proto,a.$$scope}!function(t){var a=$(t,"Syntax"),i=a.$$proto,s=a.$$scope;e.defs(a,"$warn_about_should!",function(){var e=this;return e.warn_about_should=!0}),e.defs(a,"$warn_unless_should_configured",function(e){var t,r=this;return null==r.warn_about_should&&(r.warn_about_should=n),(t=r.warn_about_should)===n||t.$$is_boolean&&1!=t?n:(s.get("RSpec").$deprecate("Using `"+e+"` from rspec-mocks' old `:should` syntax without explicitly enabling the syntax",o(["replacement"],{replacement:"the new `:expect` syntax or explicitly enable `:should`"})),r.warn_about_should=!1)}),e.defs(a,"$enable_should",function(t){var $,a,i,c=this;return null==t&&(t=c.$default_should_syntax_host()),c.warn_about_should=!1,($=c["$should_enabled?"](t))===n||$.$$is_boolean&&1!=$?($=(a=t).$class_exec,$.$$p=(i=function(){var t,$,a,c,l,u,_,p,d=i.$$s||this;return e.defn(d,"$should_receive",t=function(r,$){var a,i,c,l=this,u=t.$$p,_=u||n;return null==$&&($=o([],{})),t.$$p=null,e.get("RSpec").$$scope.get("Mocks").$$scope.get("Syntax").$warn_unless_should_configured("should_receive"),a="expected_from",i=$,(c=i["$[]"](a))!==!1&&c!==n?c:i["$[]="](a,s.get("CallerFilter").$first_non_rspec_line()),(a=(i=e.get("RSpec").$$scope.get("Mocks")).$expect_message,a.$$p=_.$to_proc(),a).call(i,l,r,$)}),e.defn(d,"$should_not_receive",$=function(t){var r,a,i=this,c=$.$$p,l=c||n,u=n;return $.$$p=null,e.get("RSpec").$$scope.get("Mocks").$$scope.get("Syntax").$warn_unless_should_configured("should_not_receive"),u=o(["expected_from"],{expected_from:s.get("CallerFilter").$first_non_rspec_line()}),(r=(a=e.get("RSpec").$$scope.get("Mocks")).$expect_message,r.$$p=l.$to_proc(),r).call(a,i,t,u).$never()}),e.defn(d,"$stub",a=function(t,r){var $,i,c,l,u=this,_=a.$$p,p=_||n;return null==r&&(r=o([],{})),a.$$p=null,e.get("RSpec").$$scope.get("Mocks").$$scope.get("Syntax").$warn_unless_should_configured("stub"),($=e.get("Hash")["$==="](t))===n||$.$$is_boolean&&1!=$?(r["$[]="]("expected_from",s.get("CallerFilter").$first_non_rspec_line()),($=(l=e.get("RSpec").$$scope.get("Mocks")).$allow_message,$.$$p=p.$to_proc(),$).call(l,u,t,r)):($=(i=t).$each,$.$$p=(c=function(e,t){var r=c.$$s||this;return null==e&&(e=n),null==t&&(t=n),r.$stub(e).$and_return(t)},c.$$s=u,c),$).call(i)}),e.defn(d,"$unstub",function(t){var n=this;return e.get("RSpec").$$scope.get("Mocks").$$scope.get("Syntax").$warn_unless_should_configured("unstub"),e.get("RSpec").$$scope.get("Mocks").$space().$proxy_for(n).$remove_stub(t)}),e.defn(d,"$stub_chain",c=function(t){var $,o,a=this,i=c.$$p,s=i||n;return t=r.call(arguments,0),c.$$p=null,e.get("RSpec").$$scope.get("Mocks").$$scope.get("Syntax").$warn_unless_should_configured("stub_chain"),($=(o=e.get("RSpec").$$scope.get("Mocks").$$scope.get("StubChain")).$stub_chain_on,$.$$p=s.$to_proc(),$).apply(o,[a].concat(t))}),e.defn(d,"$as_null_object",function(){var t=this;return e.get("RSpec").$$scope.get("Mocks").$$scope.get("Syntax").$warn_unless_should_configured("as_null_object"),t._null_object=!0,e.get("RSpec").$$scope.get("Mocks").$proxy_for(t).$as_null_object()}),e.defn(d,"$null_object?",function(){var t,r=this;return e.get("RSpec").$$scope.get("Mocks").$$scope.get("Syntax").$warn_unless_should_configured("null_object?"),t=r._null_object,null!=t&&t!==n?"instance-variable":n}),e.defn(d,"$received_message?",l=function(t,$){var o,a,i=this,s=l.$$p,c=s||n;return $=r.call(arguments,1),l.$$p=null,e.get("RSpec").$$scope.get("Mocks").$$scope.get("Syntax").$warn_unless_should_configured("received_message?"),(o=(a=e.get("RSpec").$$scope.get("Mocks").$proxy_for(i))["$received_message?"],o.$$p=c.$to_proc(),o).apply(a,[t].concat($))}),(u=s.get("Class")["$respond_to?"]("any_instance"))===n||u.$$is_boolean&&1!=u?(u=(_=s.get("Class")).$class_exec,u.$$p=(p=function(){var t=p.$$s||this;return e.defn(t,"$any_instance",function(){var t=this;return e.get("RSpec").$$scope.get("Mocks").$$scope.get("Syntax").$warn_unless_should_configured("any_instance"),e.get("RSpec").$$scope.get("Mocks").$any_instance_recorder_for(t)}),n&&"any_instance"},p.$$s=d,p),u).call(_):n},i.$$s=c,i),$).call(a):n}),e.defs(a,"$disable_should",function(e){var t,r,$,o,a,c=this;return null==e&&(e=c.$default_should_syntax_host()),(t=c["$should_enabled?"](e))===n||t.$$is_boolean&&1!=t?n:((t=(r=e).$class_exec,t.$$p=($=function(){$.$$s||this;return delete i.$should_receive,delete i.$should_not_receive,delete i.$stub,delete i.$unstub,delete i.$stub_chain,delete i.$as_null_object,delete i["$null_object?"],delete i["$received_message?"]},$.$$s=c,$),t).call(r),(t=(o=s.get("Class")).$class_exec,t.$$p=(a=function(){a.$$s||this;return delete i.$any_instance},a.$$s=c,a),t).call(o))}),e.defs(a,"$enable_expect",function(t){var r,$,o,a,i,c=this;return null==t&&(t=e.get("RSpec").$$scope.get("Mocks").$$scope.get("ExampleMethods")),(r=c["$expect_enabled?"](t))===n||r.$$is_boolean&&1!=r?((r=($=t).$class_exec,r.$$p=(o=function(){var t,r,$=o.$$s||this;return e.defn($,"$receive",t=function(e){var r=t.$$p,$=r||n;return t.$$p=null,s.get("Matchers").$$scope.get("Receive").$new(e,$)}),e.defn($,"$receive_messages",r=function(e){var t=r.$$p,$=t||n,o=n;return r.$$p=null,o=s.get("Matchers").$$scope.get("ReceiveMessages").$new(e),$!==n&&o.$warn_about_block(),o}),e.defn($,"$allow",function(e){return s.get("AllowanceTarget").$new(e)}),e.defn($,"$expect_any_instance_of",function(e){return s.get("AnyInstanceExpectationTarget").$new(e)}),e.defn($,"$allow_any_instance_of",function(e){return s.get("AnyInstanceAllowanceTarget").$new(e)}),n&&"allow_any_instance_of"},o.$$s=c,o),r).call($),(r=(a=s.get("RSpec").$$scope.get("Mocks").$$scope.get("ExampleMethods").$$scope.get("ExpectHost")).$class_exec,r.$$p=(i=function(){var t=i.$$s||this;return e.defn(t,"$expect",function(e){return s.get("ExpectationTarget").$new(e)}),n&&"expect"},i.$$s=c,i),r).call(a)):n}),e.defs(a,"$disable_expect",function(t){var r,$,o,a,c,l=this;return null==t&&(t=e.get("RSpec").$$scope.get("Mocks").$$scope.get("ExampleMethods")),(r=l["$expect_enabled?"](t))===n||r.$$is_boolean&&1!=r?n:((r=($=t).$class_exec,r.$$p=(o=function(){o.$$s||this;return delete i.$receive,delete i.$receive_messages,delete i.$allow,delete i.$expect_any_instance_of,delete i.$allow_any_instance_of},o.$$s=l,o),r).call($),(r=(a=s.get("RSpec").$$scope.get("Mocks").$$scope.get("ExampleMethods").$$scope.get("ExpectHost")).$class_exec,r.$$p=(c=function(){c.$$s||this;return delete i.$expect},c.$$s=l,c),r).call(a))}),e.defs(a,"$should_enabled?",function(e){var t=this;return null==e&&(e=t.$default_should_syntax_host()),e["$method_defined?"]("should_receive")}),e.defs(a,"$expect_enabled?",function(t){return null==t&&(t=e.get("RSpec").$$scope.get("Mocks").$$scope.get("ExampleMethods")),t["$method_defined?"]("allow")}),e.defs(a,"$default_should_syntax_host",function(){var t,r,$;return $=null!=s.JRUBY_VERSION,r=$!==!1&&$!==n?s.get("JRUBY_VERSION")["$=="]("1.7.4"):$,(t=r!==!1&&r!==n?s.get("RUBY_VERSION").$to_f()["$>"](1.8):r)===n||t.$$is_boolean&&1!=t?(t=null==e.Object.$$scope.BasicObject?n:"constant")===n||t.$$is_boolean&&1!=t?s.get("Object"):s.get("Object").$ancestors().$last()["$=="](e.get("BasicObject"))?e.get("BasicObject"):s.get("Object"):e.get("BasicObject")})}(a)}(a)}(t)},Opal.modules["rspec/mocks/configuration"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass;return e.add_stubs(["$each","$enable_should","$include?","$Array","$enable_expect","$disable_expect","$disable_should","$should_enabled?","$<<","$expect_enabled?","$!","$syntax=","$warn_about_should!","$new","$reset_syntaxes_to_default","$configuration"]),function(t){{var a=$(t,"RSpec");a.$$proto,a.$$scope}!function(t){var a=$(t,"Mocks"),i=(a.$$proto,a.$$scope);!function(e,$super){function t(){}var $=t=o(e,$super,"Configuration",t),a=$.$$proto,i=$.$$scope;return a.yield_receiver_to_any_instance_implementation_blocks=a.verify_doubled_constant_names=a.transfer_nested_constants=a.verify_partial_doubles=n,a.$initialize=function(){var e=this;return e.yield_receiver_to_any_instance_implementation_blocks=!0,e.verify_doubled_constant_names=!1,e.transfer_nested_constants=!1,e.verify_partial_doubles=!1},a["$yield_receiver_to_any_instance_implementation_blocks?"]=function(){var e=this;return e.yield_receiver_to_any_instance_implementation_blocks},a["$yield_receiver_to_any_instance_implementation_blocks="]=function(e){var t=this;return t.yield_receiver_to_any_instance_implementation_blocks=e},a.$add_stub_and_should_receive_to=function(e){var t,$,o,a=this;return e=r.call(arguments,0),(t=($=e).$each,t.$$p=(o=function(e){o.$$s||this;return null==e&&(e=n),i.get("Syntax").$enable_should(e)},o.$$s=a,o),t).call($)},a["$syntax="]=function(e){var t,r=this;return(t=r.$Array(e)["$include?"]("expect"))===n||t.$$is_boolean&&1!=t?i.get("Syntax").$disable_expect():i.get("Syntax").$enable_expect(),(t=r.$Array(e)["$include?"]("should"))===n||t.$$is_boolean&&1!=t?i.get("Syntax").$disable_should():i.get("Syntax").$enable_should()},a.$syntax=function(){var e,t=n;return t=[],(e=i.get("Syntax")["$should_enabled?"]())===n||e.$$is_boolean&&1!=e||t["$<<"]("should"),(e=i.get("Syntax")["$expect_enabled?"]())===n||e.$$is_boolean&&1!=e||t["$<<"]("expect"),t},a["$verify_doubled_constant_names?"]=function(){var e=this;return e.verify_doubled_constant_names["$!"]()["$!"]()},a["$verify_doubled_constant_names="]=function(e){var t=this;return t.verify_doubled_constant_names=e},a["$transfer_nested_constants?"]=function(){var e=this;return e.transfer_nested_constants["$!"]()["$!"]()},a["$transfer_nested_constants="]=function(e){var t=this;return t.transfer_nested_constants=e},a["$verify_partial_doubles="]=function(e){var t=this;return t.verify_partial_doubles=e["$!"]()["$!"]()},a["$verify_partial_doubles?"]=function(){var e=this;return e.verify_partial_doubles},a.$reset_syntaxes_to_default=function(){var e,t,n=this;return e=[["should","expect"]],t=n,t["$syntax="].apply(t,e),e[e.length-1],i.get("RSpec").$$scope.get("Mocks").$$scope.get("Syntax")["$warn_about_should!"]()},n&&"reset_syntaxes_to_default"}(a,null),e.defs(a,"$configuration",function(){var e,t=this;return null==t.configuration&&(t.configuration=n),(e=t.configuration)!==!1&&e!==n?e:t.configuration=i.get("Configuration").$new()}),a.$configuration().$reset_syntaxes_to_default()}(a)}(t)},Opal.modules["rspec/mocks/arity_calculator"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$<=","$min_arity","$max_arity","$==","$to_s","$private","$method_defined?","$>=","$arity","$method","$~","$supports_optional_and_splat_args?","$parameters","$any?","$count","$!","$<","$/"]),function(t){{var o=r(t,"RSpec");o.$$proto,o.$$scope}!function(t){{var o=r(t,"Mocks");o.$$proto,o.$$scope}!function(t,$super){function r(){}var o,a=r=$(t,$super,"ArityCalculator",r),i=a.$$proto,s=a.$$scope;return i.method=n,i.$initialize=function(e){var t=this;return t.method=e},i["$within_range?"]=function(e){var t,n=this;return(t=n.$min_arity()["$<="](e))?e["$<="](n.$max_arity()):t},i.$range_description=function(){var e=this;return e.$min_arity()["$=="](e.$max_arity())?e.$min_arity().$to_s():e.$max_arity()["$=="](s.get("INFINITY"))?""+e.$min_arity()+" or more":""+e.$min_arity()+" to "+e.$max_arity()},a.$private(),i.$method=function(){var e=this;return e.method},e.defs(a,"$supports_optional_and_splat_args?",function(){return s.get("Method")["$method_defined?"]("parameters")}),i.$min_arity=function(){var e=this;return e.$method().$arity()["$>="](0)?e.$method().$arity():e.$method().$arity()["$~"]()},i.$max_arity=(o=a["$supports_optional_and_splat_args?"]())===n||o.$$is_boolean&&1!=o?function(){var e=this;return e.$method().$arity()["$<"](0)?s.get("INFINITY"):e.$method().$arity()}:function(){var e,t,r,$,o,a=this,i=n;return i=a.$method().$parameters(),(e=(t=(r=i)["$any?"],t.$$p=($=function(e,t){$.$$s||this;return null==e&&(e=n),null==t&&(t=n),e["$=="]("rest")},$.$$s=a,$),t).call(r))===n||e.$$is_boolean&&1!=e?(e=(t=i).$count,e.$$p=(o=function(e,t){o.$$s||this;return null==e&&(e=n),null==t&&(t=n),e["$=="]("block")["$!"]()},o.$$s=a,o),e).call(t):s.get("INFINITY")},e.cdecl(s,"INFINITY",1["$/"](0))}(o,null)}(o)}(t)},Opal.modules["rspec/mocks/verifying_message_expecation"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass;return e.add_stubs(["$require","$attr_accessor","$===","$first","$>","$length","$ensure_arity!","$private","$nil?","$method_reference","$when_defined","$new","$within_range?","$raise_arity_error"]),t.$require("rspec/mocks/arity_calculator"),function(t){{var a=$(t,"RSpec");a.$$proto,a.$$scope}!function(t){var a=$(t,"Mocks"),i=(a.$$proto,a.$$scope);!function(t,$super){function $(){}var a,i,s=$=o(t,$super,"VerifyingMessageExpectation",$),c=s.$$proto,l=s.$$scope;return s.$attr_accessor("method_reference"),c.$initialize=a=function(t){var n=r.call(arguments,0),$=this,o=a.$$p;return t=r.call(arguments,0),a.$$p=null,e.find_super_dispatcher($,"initialize",a,o).apply($,n)},c.$with=i=function(t){var $,o=r.call(arguments,0),a=this,s=i.$$p,c=n;return t=r.call(arguments,0),i.$$p=null,(($=l.get("ArgumentMatchers").$$scope.get("AnyArgsMatcher")["$==="](t.$first()))===n||$.$$is_boolean&&1!=$)&&(c=function(){return($=l.get("ArgumentMatchers").$$scope.get("NoArgsMatcher")["$==="](t.$first()))===n||$.$$is_boolean&&1!=$?t.$length()["$>"](0)?t.$length():e.find_super_dispatcher(a,"with",i,s).apply(a,o):0}(),a["$ensure_arity!"](c)),e.find_super_dispatcher(a,"with",i,s).apply(a,o)},s.$private(),c["$ensure_arity!"]=function(e){var t,r,$,o=this;return(t=o.$method_reference()["$nil?"]())===n||t.$$is_boolean&&1!=t?(t=(r=o.$method_reference()).$when_defined,t.$$p=($=function(t){var r,o=$.$$s||this,a=n;return null==o.error_generator&&(o.error_generator=n),null==t&&(t=n),a=l.get("ArityCalculator").$new(t),(r=a["$within_range?"](e))===n||r.$$is_boolean&&1!=r?(o.failed_fast=!0,o.error_generator.$raise_arity_error(a,e)):n},$.$$s=o,$),t).call(r):n},n&&"ensure_arity!"}(a,i.get("MessageExpectation"))}(a)}(t)},Opal.modules["rspec/mocks/method_reference"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=e.breaker,$=(e.slice,e.module),o=e.klass;return e.add_stubs(["$when_loaded","$method_implemented?","$method_defined?","$original_method","$implemented?","$private","$defined?","$find_method","$==","$<","$to_i","$[]","$split","$instance_method","$dup","$respond_to?","$method"]),function(t){{var a=$(t,"RSpec");a.$$proto,a.$$scope}!function(t){var a=$(t,"Mocks"),i=(a.$$proto,a.$$scope);!function(t,$super){function $(){}{var a,i,s=$=o(t,$super,"MethodReference",$),c=s.$$proto;s.$$scope}return c.module_reference=n,c.$initialize=function(e,t){var n=this;return n.module_reference=e,n.method_name=t},c["$implemented?"]=function(){var e,t,r,$=this;return(e=(t=$.module_reference).$when_loaded,e.$$p=(r=function(e){var t=r.$$s||this;return null==e&&(e=n),t["$method_implemented?"](e)},r.$$s=$,r),e).call(t)},c["$defined?"]=function(){var e,t,r,$=this;return(e=(t=$.module_reference).$when_loaded,e.$$p=(r=function(e){var t=r.$$s||this;return null==e&&(e=n),t["$method_defined?"](e)},r.$$s=$,r),e).call(t)},c.$when_defined=a=function(){var t,$=this,o=a.$$p,i=o||n,s=n;return a.$$p=null,(t=s=$.$original_method())===n||t.$$is_boolean&&1!=t?n:(t=e.yield1(i,s),t===r?t:t)},c.$when_unimplemented=i=function(){var t,$=this,o=i.$$p,a=o||n;return i.$$p=null,(t=$["$implemented?"]())===n||t.$$is_boolean&&1!=t?(t=e.yieldX(a,[]),t===r?t:t):n},s.$private(),c.$original_method=function(){var e,t,r,$=this;return(e=(t=$.module_reference).$when_loaded,e.$$p=(r=function(e){var t,$=r.$$s||this;return null==e&&(e=n),t=$["$defined?"](),t!==!1&&t!==n?$.$find_method(e):t},r.$$s=$,r),e).call(t)},n&&"original_method"}(a,null),function(t,$super){function r(){}var $,a,i=r=o(t,$super,"InstanceMethodReference",r),s=i.$$proto,c=i.$$scope;return s.method_name=n,i.$private(),s["$method_implemented?"]=function(e){var t=this;return e["$method_defined?"](t.method_name)},e.defn(i,"$method_defined?",s["$method_implemented?"]),($=(a=c.get("RUBY_PLATFORM")["$=="]("java"))?c.get("JRUBY_VERSION").$split(".")["$[]"](-1).$to_i()["$<"](5):a)===n||$.$$is_boolean&&1!=$?(s.$find_method=function(e){var t=this;return e.$instance_method(t.method_name)},n&&"find_method"):(s.$find_method=function(e){var t=this;return e.$dup().$instance_method(t.method_name)},n&&"find_method")}(a,i.get("MethodReference")),function(e,$super){function t(){}{var r=t=o(e,$super,"ObjectMethodReference",t),$=r.$$proto;r.$$scope}return $.method_name=n,r.$private(),$["$method_implemented?"]=function(e){var t=this;return e["$respond_to?"](t.method_name)},$["$method_defined?"]=function(e){var t=this;return function(e){e.$$scope,e.$$proto;return e}(e.$singleton_class())["$method_defined?"](t.method_name)},$.$find_method=function(e){var t=this;return e.$method(t.method_name)},n&&"find_method"}(a,i.get("MethodReference"))}(a)}(t)},Opal.modules["rspec/mocks/verifying_proxy"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=e.breaker,$=e.slice,o=e.module,a=e.hash2,i=e.klass;return e.add_stubs(["$require","$ensure_implemented","$defined?","$when_unimplemented","$raise_unimplemented_error","$[]","$method_reference","$include","$new","$[]=","$tap","$method_reference=","$ensure_arity!","$length","$private","$when_defined","$within_range?","$raise","$arity","$respond_to?","$save_original_method!","$original_method"]),t.$require("rspec/mocks/verifying_message_expecation"),t.$require("rspec/mocks/method_reference"),function(t){{var s=o(t,"RSpec");s.$$proto,s.$$scope}!function(t){var s=o(t,"Mocks"),c=(s.$$proto,s.$$scope);!function(t){{var r,i,s,c=o(t,"VerifyingProxyMethods"),l=c.$$proto;c.$$scope}l.$add_stub=r=function(t,n,o){var i=$.call(arguments,0),s=this,c=r.$$p;return null==o&&(o=a([],{})),r.$$p=null,s.$ensure_implemented(n),e.find_super_dispatcher(s,"add_stub",r,c).apply(s,i)},l.$add_simple_stub=i=function(t,n){var r=$.call(arguments,0),o=this,a=i.$$p;return n=$.call(arguments,1),i.$$p=null,o.$ensure_implemented(t),e.find_super_dispatcher(o,"add_simple_stub",i,a).apply(o,r)},l.$add_message_expectation=s=function(t,n,r){var o=$.call(arguments,0),i=this,c=s.$$p;return null==r&&(r=a([],{})),s.$$p=null,i.$ensure_implemented(n),e.find_super_dispatcher(i,"add_message_expectation",s,c).apply(i,o)},l.$ensure_implemented=function(e){var t,r,$,o=this;return null==o.doubled_module&&(o.doubled_module=n),(t=o.doubled_module["$defined?"]())===n||t.$$is_boolean&&1!=t?n:(t=(r=o.$method_reference()["$[]"](e)).$when_unimplemented,t.$$p=($=function(){var t=$.$$s||this;return null==t.error_generator&&(t.error_generator=n),null==t.doubled_module&&(t.doubled_module=n),t.error_generator.$raise_unimplemented_error(t.doubled_module,e)},$.$$s=o,$),t).call(r)},e.donate(c,["$add_stub","$add_simple_stub","$add_message_expectation","$ensure_implemented"])}(s),function(t,$super){function r(){}var $,o=r=i(t,$super,"VerifyingProxy",r),a=o.$$proto,s=o.$$scope;return a.method_reference=n,o.$include(s.get("VerifyingProxyMethods")),a.$initialize=$=function(t,r,o,a){{var i,c,l,u=this;$.$$p}return $.$$p=null,e.find_super_dispatcher(u,"initialize",$,null).apply(u,[t,r]),u.object=t,u.doubled_module=o,u.method_reference_class=a,u.method_doubles=(i=(c=s.get("Hash")).$new,i.$$p=(l=function(e,t){var r=l.$$s||this;return null==r.object&&(r.object=n),null==e&&(e=n),null==t&&(t=n),e["$[]="](t,s.get("VerifyingMethodDouble").$new(r.object,t,r,r.$method_reference()["$[]"](t)))},l.$$s=u,l),i).call(c)},a.$method_reference=function(){var e,t,r,$,o=this;return(e=o.method_reference)!==!1&&e!==n?e:o.method_reference=(t=(r=s.get("Hash")).$new,t.$$p=($=function(e,t){var r=$.$$s||this;return null==r.method_reference_class&&(r.method_reference_class=n),null==r.doubled_module&&(r.doubled_module=n),null==e&&(e=n),null==t&&(t=n),e["$[]="](t,r.method_reference_class.$new(r.doubled_module,t))},$.$$s=o,$),t).call(r)},n&&"method_reference"}(s,c.get("Proxy")),function(t,$super){function r(){}var $,o=r=i(t,$super,"VerifyingPartialMockProxy",r),a=o.$$proto,s=o.$$scope;return a.method_doubles=n,o.$include(s.get("VerifyingProxyMethods")),a.$initialize=$=function(t,r){{var o,a,i,c=this;$.$$p}return $.$$p=null,e.find_super_dispatcher(c,"initialize",$,null).apply(c,[t,r]),c.doubled_module=s.get("DirectObjectReference").$new(t),c.method_doubles=(o=(a=s.get("Hash")).$new,o.$$p=(i=function(e,r){var $=i.$$s||this;return null==e&&(e=n),null==r&&(r=n),e["$[]="](r,s.get("VerifyingExistingMethodDouble").$new(t,r,$))},i.$$s=c,i),o).call(a)},a.$method_reference=function(){var e=this;return e.method_doubles},n&&"method_reference"}(s,c.get("PartialMockProxy")),function(t,$super){function r(){}var o,a,s,c=r=i(t,$super,"VerifyingMethodDouble",r),l=c.$$proto,u=c.$$scope;return l.method_reference=n,l.$initialize=o=function(t,n,r,$){{var a=this;o.$$p}return o.$$p=null,e.find_super_dispatcher(a,"initialize",o,null).apply(a,[t,n,r]),a.method_reference=$},l.$message_expectation_class=function(){return u.get("VerifyingMessageExpectation")},l.$add_expectation=a=function(t){var r,o,i,s=$.call(arguments,0),c=this,l=a.$$p;return t=$.call(arguments,0),a.$$p=null,(r=(o=e.find_super_dispatcher(c,"add_expectation",a,l).apply(c,s)).$tap,r.$$p=(i=function(e){var t,r,$=i.$$s||this;return null==$.method_reference&&($.method_reference=n),null==e&&(e=n),t=[$.method_reference],r=e,r["$method_reference="].apply(r,t),t[t.length-1]},i.$$s=c,i),r).call(o)},l.$proxy_method_invoked=s=function(t,n){var r=$.call(arguments,0),o=this,a=s.$$p;return n=$.call(arguments,1),s.$$p=null,o["$ensure_arity!"](n.$length()),e.find_super_dispatcher(o,"proxy_method_invoked",s,a).apply(o,r)},c.$private(),l["$ensure_arity!"]=function(e){var t,r,$,o=this;return(t=(r=o.method_reference).$when_defined,t.$$p=($=function(t){var r,o=$.$$s||this,a=n;return null==t&&(t=n),a=u.get("ArityCalculator").$new(t),(r=a["$within_range?"](e))===n||r.$$is_boolean&&1!=r?o.$raise(u.get("ArgumentError"),"wrong number of arguments ("+e+" for "+t.$arity()+")"):n},$.$$s=o,$),t).call(r)},n&&"ensure_arity!"}(s,c.get("MethodDouble")),function(t,$super){function $(){}{var o,a,s,c=$=i(t,$super,"VerifyingExistingMethodDouble",$),l=c.$$proto;c.$$scope}return l.valid_method=n,l.$initialize=o=function(t,n,r){{var $=this;o.$$p}return o.$$p=null,e.find_super_dispatcher($,"initialize",o,null).apply($,[t,n,r,$]),$.valid_method=t["$respond_to?"](n),$["$save_original_method!"]()},l.$when_defined=a=function(){var t,$=this,o=a.$$p,i=o||n;return a.$$p=null,t=e.yield1(i,$.$original_method()),t===r?t:t},l.$when_unimplemented=s=function(){var t,$=this,o=s.$$p,a=o||n;return s.$$p=null,(t=$.valid_method)===n||t.$$is_boolean&&1!=t?(t=e.yieldX(a,[]),t===r?t:t):n},n&&"when_unimplemented"}(s,c.get("VerifyingMethodDouble"))}(s)}(t)},Opal.modules["rspec/mocks/verifying_double"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass,a=e.hash2;return e.add_stubs(["$require","$null_object?","$ensure_implemented","$__mock_proxy","$include","$__initialize_as_test_double","$new","$stub","$const_to_replace"]),t.$require("rspec/mocks/mock"),t.$require("rspec/mocks/verifying_proxy"),function(t){{var i=$(t,"RSpec");i.$$proto,i.$$scope}!function(t){var i=$(t,"Mocks"),s=(i.$$proto,i.$$scope);!function(t){{var o,a=$(t,"VerifyingDouble"),i=a.$$proto;a.$$scope}i.$method_missing=o=function(t,$){var a,i=r.call(arguments,0),s=this,c=o.$$p;return $=r.call(arguments,1),o.$$p=null,(a=s["$null_object?"]())===n||a.$$is_boolean&&1!=a||s.$__mock_proxy().$ensure_implemented(t),e.find_super_dispatcher(s,"method_missing",o,c).apply(s,i)},e.donate(a,["$method_missing"])}(i),function(e,$super){function t(){}var $=t=o(e,$super,"InstanceVerifyingDouble",t),a=$.$$proto,i=$.$$scope;return a.doubled_module=n,$.$include(i.get("TestDouble")),$.$include(i.get("VerifyingDouble")),a.$initialize=function(e,t){var n,$=this;return t=r.call(arguments,1),$.doubled_module=e,(n=$).$__initialize_as_test_double.apply(n,[e].concat(t))},a.$__build_mock_proxy=function(e){var t=this;return i.get("VerifyingProxy").$new(t,e,t.doubled_module,i.get("InstanceMethodReference"))},n&&"__build_mock_proxy"}(i,null),function(t){var o=$(t,"ObjectVerifyingDoubleMethods"),i=o.$$proto,s=o.$$scope;o.$include(s.get("TestDouble")),o.$include(s.get("VerifyingDouble")),i.$initialize=function(e,t){var n,$=this;return t=r.call(arguments,1),$.doubled_module=e,(n=$).$__initialize_as_test_double.apply(n,[e].concat(t))},i.$__build_mock_proxy=function(e){var t=this;return null==t.doubled_module&&(t.doubled_module=n),s.get("VerifyingProxy").$new(t,e,t.doubled_module,s.get("ObjectMethodReference"))},i.$as_stubbed_const=function(e){var t=this;return null==t.doubled_module&&(t.doubled_module=n),null==e&&(e=a([],{})),s.get("ConstantMutator").$stub(t.doubled_module.$const_to_replace(),t,e),t},e.donate(o,["$initialize","$__build_mock_proxy","$as_stubbed_const"])}(i),function(e,$super){function t(){}var n=t=o(e,$super,"ObjectVerifyingDouble",t),r=(n.$$proto,n.$$scope);return n.$include(r.get("ObjectVerifyingDoubleMethods"))}(i,null),function(e,$super){function t(){}var n=t=o(e,$super,"ClassVerifyingDouble",t),r=(n.$$proto,n.$$scope);return n.$include(r.get("ObjectVerifyingDoubleMethods"))}(i,s.get("Module"))}(i)}(t)},Opal.modules["rspec/mocks/framework"]=function(e){e.dynamic_require_severity="warning";{var t=e.top;e.nil,e.breaker,e.slice}return e.add_stubs(["$require"]),t.$require("rspec/support/caller_filter"),t.$require("rspec/support/warnings"),t.$require("rspec/mocks/instance_method_stasher"),t.$require("rspec/mocks/method_double"),t.$require("rspec/mocks/argument_matchers"),t.$require("rspec/mocks/example_methods"),t.$require("rspec/mocks/proxy"),t.$require("rspec/mocks/proxy_for_nil"),t.$require("rspec/mocks/test_double"),t.$require("rspec/mocks/mock"),t.$require("rspec/mocks/argument_list_matcher"),t.$require("rspec/mocks/message_expectation"),t.$require("rspec/mocks/order_group"),t.$require("rspec/mocks/errors"),t.$require("rspec/mocks/error_generator"),t.$require("rspec/mocks/space"),t.$require("rspec/mocks/extensions/marshal"),t.$require("rspec/mocks/any_instance/chain"),t.$require("rspec/mocks/any_instance/stub_chain"),t.$require("rspec/mocks/any_instance/stub_chain_chain"),t.$require("rspec/mocks/any_instance/expectation_chain"),t.$require("rspec/mocks/any_instance/message_chains"),t.$require("rspec/mocks/any_instance/recorder"),t.$require("rspec/mocks/mutate_const"),t.$require("rspec/mocks/matchers/have_received"),t.$require("rspec/mocks/matchers/receive"),t.$require("rspec/mocks/matchers/receive_messages"),t.$require("rspec/mocks/stub_chain"),t.$require("rspec/mocks/targets"),t.$require("rspec/mocks/syntax"),t.$require("rspec/mocks/configuration"),t.$require("rspec/mocks/verifying_double")},Opal.modules["rspec/mocks/version"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=(e.nil,e.breaker,e.slice,e.module);return function(t){{var r=n(t,"RSpec");r.$$proto,r.$$scope}!function(t){{var r=n(t,"Mocks");r.$$proto,r.$$scope}!function(t){var r=n(t,"Version"),$=(r.$$proto,r.$$scope);e.cdecl($,"STRING","3.0.0.beta1")}(r)}(r)}(t)},Opal.modules["rspec/mocks"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.hash2;return e.add_stubs(["$require","$attr_accessor","$class_exec","$include","$space","$space=","$new","$verify_all","$reset_all","$proxy_for","$proxies_of","$any_instance_recorder_for","$fetch","$first_non_rspec_line","$add_stub","$to_proc","$add_message_expectation","$instance_method","$===","$call","$bind","$method"]),t.$require("rspec/mocks/framework"),t.$require("rspec/mocks/version"),function(t){{var o=r(t,"RSpec");o.$$proto,o.$$scope}!function(t){var o=r(t,"Mocks"),a=(o.$$proto,o.$$scope);!function(t){{var r=t.$$scope;t.$$proto}return t.$attr_accessor("space"),t.$$proto.$setup=function(e){var t,$,o,a,i=this;return(t=($=function(e){e.$$scope,e.$$proto;return e}(e.$singleton_class())).$class_exec,t.$$p=(o=function(){var e=o.$$s||this;return e.$include(r.get("RSpec").$$scope.get("Mocks").$$scope.get("ExampleMethods"))},o.$$s=i,o),t).call($),t=i,(a=t.$space())!==!1&&a!==n?a:t["$space="](r.get("RSpec").$$scope.get("Mocks").$$scope.get("Space").$new())},t.$$proto.$verify=function(){var e=this;return e.$space().$verify_all()},t.$$proto.$teardown=function(){var e=this;return e.$space().$reset_all()},t.$$proto.$proxy_for=function(e){var t=this;return t.$space().$proxy_for(e)},t.$$proto.$proxies_of=function(e){var t=this;return t.$space().$proxies_of(e)},t.$$proto.$any_instance_recorder_for=function(e){var t=this;return t.$space().$any_instance_recorder_for(e)},t.$$proto.$allow_message=TMP_2=function(t,o,a){var i,s,c,l,u=this,_=TMP_2.$$p,p=_||n,d=n;return null==a&&(a=$([],{})),TMP_2.$$p=null,d=(i=(s=a).$fetch,i.$$p=(c=function(){c.$$s||this;return r.get("CallerFilter").$first_non_rspec_line()},c.$$s=u,c),i).call(s,"expected_from"),(i=(l=e.get("RSpec").$$scope.get("Mocks").$proxy_for(t)).$add_stub,i.$$p=p.$to_proc(),i).call(l,d,o,a)},t.$$proto.$expect_message=TMP_4=function(t,o,a){var i,s,c,l,u=this,_=TMP_4.$$p,p=_||n,d=n;return null==a&&(a=$([],{})),TMP_4.$$p=null,d=(i=(s=a).$fetch,i.$$p=(c=function(){c.$$s||this;return r.get("CallerFilter").$first_non_rspec_line()},c.$$s=u,c),i).call(s,"expected_from"),(i=(l=e.get("RSpec").$$scope.get("Mocks").$proxy_for(t)).$add_message_expectation,i.$$p=p.$to_proc(),i).call(l,d,o,a)},e.cdecl(r,"KERNEL_METHOD_METHOD",e.get("Kernel").$instance_method("method")),t.$$proto.$method_handle_for=function(t,$){var o;return(o=e.get("Kernel")["$==="](t))===n||o.$$is_boolean&&1!=o?t.$method($):r.get("KERNEL_METHOD_METHOD").$bind(t).$call($)},n&&"method_handle_for"}(o.$singleton_class()),e.cdecl(a,"IGNORED_BACKTRACE_LINE","this backtrace line is ignored")}(o)}(t)},Opal.modules["rspec/core/mocking/with_rspec"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=(e.nil,e.breaker,e.slice,e.module);return e.add_stubs(["$require","$configuration","$setup","$verify","$teardown"]),t.$require("rspec/mocks"),function(t){{var r=n(t,"RSpec");r.$$proto,r.$$scope}!function(t){{var r=n(t,"Core");r.$$proto,r.$$scope}!function(t){var r=n(t,"MockFrameworkAdapter"),$=r.$$proto,o=r.$$scope;e.defs(r,"$framework_name",function(){return"rspec"}),e.defs(r,"$configuration",function(){return o.get("RSpec").$$scope.get("Mocks").$configuration()}),$.$setup_mocks_for_rspec=function(){var e=this;return o.get("RSpec").$$scope.get("Mocks").$setup(e)},$.$verify_mocks_for_rspec=function(){return o.get("RSpec").$$scope.get("Mocks").$verify()},$.$teardown_mocks_for_rspec=function(){return o.get("RSpec").$$scope.get("Mocks").$teardown()},e.donate(r,["$setup_mocks_for_rspec","$verify_mocks_for_rspec","$teardown_mocks_for_rspec"])}(r)}(r)}(t)},Opal.modules["rspec/support/version"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=(e.nil,e.breaker,e.slice,e.module);return function(t){{var r=n(t,"RSpec");r.$$proto,r.$$scope}!function(t){{var r=n(t,"Support");r.$$proto,r.$$scope}!function(t){var r=n(t,"Version"),$=(r.$$proto,r.$$scope);e.cdecl($,"STRING","3.0.0.beta1")}(r)}(r)}(t)},Opal.modules["rspec/support"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=(e.nil,e.breaker,e.slice,e.module);
return e.add_stubs(["$require"]),t.$require("rspec/support/version"),function(e){{var t=n(e,"RSpec");t.$$proto,t.$$scope}!function(e){{var t=n(e,"Support");t.$$proto,t.$$scope}}(t)}(t)},Opal.modules["rspec/core/warnings"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=(e.nil,e.breaker,e.slice,e.module),r=e.hash2;return e.add_stubs(["$deprecation","$reporter","$configuration","$merge","$first_non_rspec_line"]),function(t){var $=n(t,"RSpec"),o=($.$$proto,$.$$scope);e.defs($,"$deprecate",function(e,t){return null==t&&(t=r([],{})),o.get("RSpec").$configuration().$reporter().$deprecation(r(["deprecated","call_site"],{deprecated:e,call_site:o.get("CallerFilter").$first_non_rspec_line()}).$merge(t))}),e.defs($,"$warn_deprecation",function(e){return o.get("RSpec").$configuration().$reporter().$deprecation(r(["message"],{message:e}))})}(t)},Opal.modules["rspec/core/shared_context"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module;return e.add_stubs(["$each","$playback_onto","$__shared_context_recordings","$new","$__send__","$to_proc","$block","$method_name","$args","$define_method","$<<","$record","$+","$instance_methods"]),function(t){var o=$(t,"RSpec"),a=(o.$$proto,o.$$scope);!function(t){{var o=$(t,"Core");o.$$proto,o.$$scope}!function(t){var o,a,i,s=$(t,"SharedContext"),c=s.$$proto,l=s.$$scope;c.$included=function(e){var t,r,$,o=this;return(t=(r=o.$__shared_context_recordings()).$each,t.$$p=($=function(t){$.$$s||this;return null==t&&(t=n),t.$playback_onto(e)},$.$$s=o,$),t).call(r)},c.$__shared_context_recordings=function(){var e,t=this;return null==t.__shared_context_recordings&&(t.__shared_context_recordings=n),(e=t.__shared_context_recordings)!==!1&&e!==n?e:t.__shared_context_recordings=[]},e.cdecl(l,"Recording",(o=(a=l.get("Struct")).$new,o.$$p=(i=function(){var t=i.$$s||this;return e.defn(t,"$playback_onto",function(e){var t,n,r=this;return(t=(n=e).$__send__,t.$$p=r.$block().$to_proc(),t).apply(n,[r.$method_name()].concat(r.$args()))}),n&&"playback_onto"},i.$$s=s,i),o).call(a,"method_name","args","block")),e.defs(s,"$record",function(e){var t,$,o,a=this;return(t=($=e).$each,t.$$p=(o=function(e){var t,$,a,i=o.$$s||this;return null==e&&(e=n),(t=($=i).$define_method,t.$$p=(a=function(t){var $,o=a.$$s||this;return t=r.call(arguments,0),$=a.$$p||n,a.$$p=null,o.$__shared_context_recordings()["$<<"](l.get("Recording").$new(e,t,$))},a.$$s=i,a),t).call($,e)},o.$$s=a,o),t).call($)}),s.$record(["describe","context"]["$+"](l.get("Hooks").$instance_methods(!1))["$+"](l.get("MemoizedHelpers").$$scope.get("ClassMethods").$instance_methods(!1))),e.donate(s,["$included","$__shared_context_recordings"])}(o)}(o),e.cdecl(a,"SharedContext",a.get("Core").$$scope.get("SharedContext"))}(t)},Opal.modules["rspec/core"]=function(e){e.dynamic_require_severity="warning";var t,n,r,$,o,a=e.top,i=e.nil,s=e.breaker,c=e.slice,l=e.module,u=e.klass,_=e.hash2,p=i;return e.add_stubs(["$lambda","$require","$[]","$autoload","$wants_to_quit","$world","$wants_to_quit=","$new","$warn_deprecation","$first_non_rspec_line","$configuration","$clear","$example_groups","$current","$[]=","$=~","$define_method","$to_proc","$method","$expand_path","$fetch","$const_get"]),p=function(){return(t=(n=a.$require_relative)&&!n.$$stub||a["$respond_to_missing?"]("require_relative")?"method":i)===i||t.$$is_boolean&&1!=t?(t=($=a).$lambda,t.$$p=(o=function(e){var t=o.$$s||this;return null==e&&(e=i),t.$require("rspec/"+e)},o.$$s=a,o),t).call($):(t=(n=a).$lambda,t.$$p=(r=function(e){var t=r.$$s||this;return null==e&&(e=i),t.$require("rspec/core/../"+e)},r.$$s=a,r),t).call(n)}(),a.$require("set"),a.$require("time"),a.$require("rbconfig"),p["$[]"]("core/version"),a.$require("rspec/support/caller_filter"),a.$require("rspec/core/warnings"),a.$require("rspec/support/warnings"),p["$[]"]("core/flat_map"),p["$[]"]("core/filter_manager"),p["$[]"]("core/dsl"),p["$[]"]("core/reporter"),p["$[]"]("core/hooks"),p["$[]"]("core/memoized_helpers"),p["$[]"]("core/metadata"),p["$[]"]("core/pending"),p["$[]"]("core/formatters"),p["$[]"]("core/ordering"),p["$[]"]("core/world"),p["$[]"]("core/configuration"),p["$[]"]("core/option_parser"),p["$[]"]("core/configuration_options"),p["$[]"]("core/command_line"),p["$[]"]("core/runner"),p["$[]"]("core/example"),p["$[]"]("core/shared_example_group/collection"),p["$[]"]("core/shared_example_group"),p["$[]"]("core/example_group"),function(r){var $,o,a,p=l(r,"RSpec"),d=(p.$$proto,p.$$scope);p.$autoload("SharedContext","rspec/core/shared_context"),e.defs(p,"$wants_to_quit",function(){var e=this;return e.$world().$wants_to_quit()}),e.defs(p,"$wants_to_quit=",function(e){var t,n,r=this;return t=[e],n=r.$world(),n["$wants_to_quit="].apply(n,t),t[t.length-1]}),e.defs(p,"$world",function(){var e,t=this;return null==t.world&&(t.world=i),(e=t.world)!==!1&&e!==i?e:t.world=d.get("RSpec").$$scope.get("Core").$$scope.get("World").$new()}),e.defs(p,"$world=",function(e){var t=this;return t.world=e}),e.defs(p,"$reset",function(){var e=this;return e.world=i,e.configuration=i}),e.defs(p,"$configuration",$=function(){var e,t=this,n=$.$$p,r=n||i;return null==t.configuration&&(t.configuration=i),$.$$p=null,r!==i&&d.get("RSpec").$warn_deprecation("\n*****************************************************************\nDEPRECATION WARNING\n\n* RSpec.configuration with a block is deprecated and has no effect.\n* please use RSpec.configure with a block instead.\n\nCalled from "+d.get("CallerFilter").$first_non_rspec_line()+"\n*****************************************************************\n\n"),(e=t.configuration)!==!1&&e!==i?e:t.configuration=d.get("RSpec").$$scope.get("Core").$$scope.get("Configuration").$new()}),e.defs(p,"$configuration=",function(e){var t=this;return t.configuration=e}),e.defs(p,"$configure",o=function(){var t,n=this,r=o.$$p,$=r||i;return o.$$p=null,$!==i?(t=e.yield1($,n.$configuration()),t===s?t:t):i}),e.defs(p,"$clear_remaining_example_groups",function(){var e=this;return e.$world().$example_groups().$clear()}),e.defs(p,"$current_example",function(){return d.get("Thread").$current()["$[]"]("_rspec_current_example")}),e.defs(p,"$current_example=",function(e){return d.get("Thread").$current()["$[]="]("_rspec_current_example",e)}),e.defs(p,"$windows_os?",function(){return d.get("RbConfig").$$scope.get("CONFIG")["$[]"]("host_os")["$=~"](/cygwin|mswin|mingw|bccwin|wince|emx/)}),function(r){var $=l(r,"Core"),o=($.$$proto,$.$$scope);!function(r,$super){function $(){}{var o=$=u(r,$super,"Time",$);o.$$proto,o.$$scope}return function(r){r.$$scope,r.$$proto;return(t=(n=r).$define_method,t.$$p=e.get("Time").$method("now").$to_proc(),t).call(n,"now")}(o.$singleton_class())}($,null),e.defs($,"$path_to_executable",function(){var e,t=this;return null==t.path_to_executable&&(t.path_to_executable=i),(e=t.path_to_executable)!==!1&&e!==i?e:t.path_to_executable=o.get("File").$expand_path("../../../exe/rspec","rspec/core")})}(p),e.cdecl(d,"MODULES_TO_AUTOLOAD",_(["Matchers","Expectations","Mocks"],{Matchers:"rspec/expectations",Expectations:"rspec/expectations",Mocks:"rspec/mocks"})),e.defs(p,"$const_missing",a=function(t){try{{var n,r,$,o=this;a.$$p}return a.$$p=null,o.$require((n=(r=d.get("MODULES_TO_AUTOLOAD")).$fetch,n.$$p=($=function(){var t=$.$$s||this;e.ret(e.find_iter_super_dispatcher(t,"const_missing",$.$$def||a,null).apply(t,c.call(arguments)))},$.$$s=o,$),n).call(r,t)),e.get("RSpec").$const_get(t)}catch(i){if(i===e.returner)return i.$v;throw i}})}(a)},Opal.modules["rspec/version"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=(e.nil,e.breaker,e.slice,e.module);return function(t){{var r=n(t,"RSpec");r.$$proto,r.$$scope}!function(t){var r=n(t,"Version"),$=(r.$$proto,r.$$scope);e.cdecl($,"STRING","3.0.0.beta1")}(r)}(t)},Opal.modules.rspec=function(e){e.dynamic_require_severity="warning";{var t=e.top;e.nil,e.breaker,e.slice}return e.add_stubs(["$require"]),t.$require("rspec/core"),t.$require("rspec/version")},Opal.modules["opal/rspec/requires"]=function(e){e.dynamic_require_severity="warning";{var t=e.top;e.nil,e.breaker,e.slice}return e.add_stubs(["$require"]),t.$require("corelib/dir"),t.$require("thread"),t.$require("set"),t.$require("time"),t.$require("rbconfig"),t.$require("pathname"),t.$require("rspec/core/version"),t.$require("rspec/core/flat_map"),t.$require("rspec/core/filter_manager"),t.$require("rspec/core/dsl"),t.$require("rspec/core/reporter"),t.$require("rspec/core/hooks"),t.$require("rspec/core/memoized_helpers"),t.$require("rspec/core/metadata"),t.$require("rspec/core/pending"),t.$require("rspec/core/formatters"),t.$require("rspec/core/ordering"),t.$require("rspec/core/world"),t.$require("rspec/core/configuration"),t.$require("rspec/core/option_parser"),t.$require("rspec/core/configuration_options"),t.$require("rspec/core/command_line"),t.$require("rspec/core/runner"),t.$require("rspec/core/example"),t.$require("rspec/core/shared_example_group/collection"),t.$require("rspec/core/shared_example_group"),t.$require("rspec/core/example_group"),t.$require("rspec/core/mocking/with_rspec"),t.$require("rspec/support"),t.$require("rspec/core"),t.$require("rspec/expectations"),t.$require("rspec/mocks"),t.$require("rspec"),t.$require("rspec/core/formatters/base_text_formatter"),t.$require("rspec/core/formatters/html_printer"),t.$require("rspec/matchers/pretty"),t.$require("rspec/matchers/built_in/base_matcher"),t.$require("rspec/matchers/built_in/be")},Opal.modules["opal/rspec/fixes"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e,r=e.nil,$=e.breaker,o=(e.slice,e.module),a=e.klass,i=e.gvars;return e.add_stubs(["$flatten","$map","$module_function","$!","$raise","$+","$new","$dup","$to_s","$gsub","$tr","$downcase","$=~","$[]","$empty?","$description","$upcase","$lstrip","$const_defined?","$next","$__id__","$original_method","$expect","$subject"]),function(t){{var n,a=o(t,"FlatMap"),i=a.$$proto;a.$$scope}i.$flat_map=n=function(t){var o,a,i,s=this,c=n.$$p,l=c||r;return n.$$p=null,(o=(a=t).$map,o.$$p=(i=function(t){{var n;i.$$s||this}return null==t&&(t=r),n=e.yield1(l,t),n===$?n:n},i.$$s=s,i),o).call(a).$flatten()},a.$module_function("flat_map"),e.donate(a,["$flat_map"])}(n.get("RSpec").$$scope.get("Core")),function(t,$super){function n(){}{var $=n=a(t,$super,"CallerFilter",n);$.$$proto,$.$$scope}return e.defs($,"$first_non_rspec_line",function(){return""}),r&&"first_non_rspec_line"}(n.get("RSpec"),null),function(t){var n=o(t,"Expectations"),$=(n.$$proto,n.$$scope);e.defs(n,"$fail_with",function(e,t,n){var o,a=this;return null==t&&(t=r),null==n&&(n=r),(o=e["$!"]())===r||o.$$is_boolean&&1!=o||a.$raise($.get("ArgumentError"),"Failure message is nil. Does your matcher define the "["$+"]("appropriate failure_message_for_* method to return a string?")),a.$raise($.get("RSpec").$$scope.get("Expectations").$$scope.get("ExpectationNotMetError").$new(e))})}(n.get("RSpec")),function(t){{var n=o(t,"RSpec");n.$$proto,n.$$scope}!function(t){{var n=o(t,"Matchers");n.$$proto,n.$$scope}!function(t){{var n=o(t,"Pretty"),$=n.$$proto;n.$$scope}$.$underscore=function(e){var t=r;return t=e.$to_s().$dup(),t=t.$gsub(/([A-Z]+)([A-Z][a-z])/,"$1_$2"),t=t.$gsub(/([a-z\d])([A-Z])/,"$1_$2"),t=t.$tr("-","_"),t=t.$downcase()},e.donate(n,["$underscore"])}(n)}(n)}(t),function(e,$super){function t(){}{var n=t=a(e,$super,"BePredicate",t),$=n.$$proto;n.$$scope}return $.$prefix_and_expected=function(e){return null==i["~"]&&(i["~"]=r),e.$to_s()["$=~"](/^(be_(an?_)?)(.*)/),[i["~"]["$[]"](1),i["~"]["$[]"](3)]},r&&"prefix_and_expected"}(n.get("RSpec").$$scope.get("Matchers").$$scope.get("BuiltIn"),null),function(t){{var n=o(t,"ExampleGroups");n.$$proto,n.$$scope}e.defs(n,"$base_name_for",function(e){var t,n,$,o=this,a=r;return(t=e.$description()["$empty?"]())===r||t.$$is_boolean&&1!=t?(a=" "["$+"](e.$description()),a=(t=(n=a).$gsub,t.$$p=($=function(e){$.$$s||this;return null==e&&(e=r),e["$[]"](1).$upcase()},$.$$s=o,$),t).call(n,/[^0-9a-zA-Z]+([0-9a-zA-Z])/),a=a.$lstrip(),a=a.$gsub(/\W/,""),a=a.$gsub(/^([^A-Z]|$)/,"Nested$1")):"Anonymous"}),e.defs(n,"$disambiguate",function(e,t){var n,$;if((n=t["$const_defined?"](e))===r||n.$$is_boolean&&1!=n)return e;for(e=e["$+"]("_2");($=t["$const_defined?"](e))!==r&&(!$.$$is_boolean||1==$);)e=e.$next();return e})}(n.get("RSpec")),function(e,$super){function t(){}{var n=t=a(e,$super,"Space",t),$=n.$$proto;n.$$scope}return $.$id_for=function(e){return e.$__id__()},r&&"id_for"}(n.get("RSpec").$$scope.get("Mocks"),null),function(e,$super){function t(){}{var n=t=a(e,$super,"MethodDouble",t),$=n.$$proto;n.$$scope}return $.original_method=$.method_stasher=r,$["$save_original_method!"]=function(){var e,t=this;return(e=t.original_method)!==!1&&e!==r?e:t.original_method=t.method_stasher.$original_method()},r&&"save_original_method!"}(n.get("RSpec").$$scope.get("Mocks"),null),function(t){{var n=o(t,"RSpec");n.$$proto,n.$$scope}!function(t){{var n=o(t,"Core");n.$$proto,n.$$scope}!function(t){{var n=o(t,"MemoizedHelpers"),r=n.$$proto;n.$$scope}r.$is_expected=function(){var e=this;return e.$expect(e.$subject())},e.donate(n,["$is_expected"])}(n)}(n)}(t)},Opal.modules["opal/rspec/text_formatter"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass;return e.add_stubs(["$empty?","$failed_examples","$puts","$each_with_index","$dump_failure","$short_padding","$next","$full_description","$dump_failure_info","$[]","$execution_result","$to_s","$name","$class","$red","$long_padding","$each","$split","$message","$==","$green","$finish_with_code"]),function(t){{var o=r(t,"Opal");o.$$proto,o.$$scope}!function(t){{var o=r(t,"RSpec");o.$$proto,o.$$scope}!function(t,$super){function r(){}{var o=r=$(t,$super,"TextFormatter",r),a=o.$$proto;o.$$scope}return a.$dump_failures=function(){var e,t,r,$=this;return(e=$.$failed_examples()["$empty?"]())===n||e.$$is_boolean&&1!=e?($.$puts("\nFailures:"),(e=(t=$.$failed_examples()).$each_with_index,e.$$p=(r=function(e,t){var $=r.$$s||this;return null==e&&(e=n),null==t&&(t=n),$.$puts("\n"),$.$dump_failure(e,t)},r.$$s=$,r),e).call(t)):$.$puts("\nFinished")},a.$dump_failure=function(e,t){var n=this;return n.$puts(""+n.$short_padding()+t.$next()+") "+e.$full_description()),n.$dump_failure_info(e)},a.$dump_failure_info=function(e){var t,r,$,o=this,a=n,i=n;return a=e.$execution_result()["$[]"]("exception"),i=a.$class().$name().$to_s(),o.$red(""+o.$long_padding()+i+":"),(t=(r=a.$message().$to_s().$split("\n")).$each,t.$$p=($=function(e){var t=$.$$s||this;return null==e&&(e=n),t.$red(""+t.$long_padding()+"  "+e)},$.$$s=o,$),t).call(r)},a.$dump_summary=function(e,t,r,$){var o=this,a=n;return o.duration=e,o.example_count=t,o.failure_count=r,o.pending_count=$,a="\n"+t+" examples, "+r+" failures (time taken: "+e+")",r["$=="](0)?(o.$green(a),o.$finish_with_code(0)):(o.$red(a),o.$finish_with_code(1))},a.$finish_with_code=function(t){"undefined"!=typeof phantom?phantom.exit(t):e.global.OPAL_SPEC_CODE=t},a.$green=function(e){return console.log("[32m"+e+"[0m")},a.$red=function(e){return console.log("[31m"+e+"[0m")},a.$short_padding=function(){return"  "},a.$long_padding=function(){return"     "},n&&"long_padding"}(o,e.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("BaseFormatter"))}(o)}(t)},Opal.modules["opal/rspec/browser_formatter"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass,a=e.hash2;return e.add_stubs(["$require","$include","$new","$<<","$id","$+","$append_to_head","$size","$parent_groups","$description","$style","$*","$-","$class_name=","$sprintf","$[]","$execution_result","$to_s","$name","$class","$short_padding","$each","$long_padding","$split","$message","$h","$html=","$add_scripts","$attr_reader","$===","$__send__","$gsub","$native"]),t.$require("erb"),function(t){{var i=$(t,"Opal");i.$$proto,i.$$scope}!function(t){{var i=$(t,"RSpec");i.$$proto,i.$$scope}!function(t,$super){function $(){}var i,s,c,l,u,_,p=$=o(t,$super,"BrowserFormatter",$),d=p.$$proto,f=p.$$scope;return d.rspec_group=d.rspec_dl=d.rspec_dt=d.rspec_results=d.example_group_failed=n,p.$include(f.get("ERB").$$scope.get("Util")),e.cdecl(f,"CSS_STYLES",e.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("HtmlPrinter").$$scope.get("GLOBAL_STYLES")),d.$start=i=function(){var t=r.call(arguments,0),$=this,o=i.$$p,s=n,c=n,l=n;return i.$$p=null,e.find_super_dispatcher($,"start",i,o).apply($,t),s=f.get("Element").$new(document.body),s["$<<"](f.get("Element").$new("div",a(["html"],{html:f.get("REPORT_TEMPLATE")}))),$.rspec_results=f.get("Element").$id("rspec-results"),c=f.get("CSS_STYLES")["$+"]("\n body { padding: 0; margin: 0 }"),l=f.get("Element").$new("style",a(["type","css_text"],{type:"text/css",css_text:c})),l.$append_to_head()},d.$example_group_started=s=function(t){var $=r.call(arguments,0),o=this,i=s.$$p,c=n;return s.$$p=null,e.find_super_dispatcher(o,"example_group_started",s,i).apply(o,$),o.example_group_failed=!1,c=t.$parent_groups().$size(),o.rspec_group=f.get("Element").$new("div",a(["class_name"],{class_name:"example_group passed"})),o.rspec_dl=f.get("Element").$new("dl"),o.rspec_dt=f.get("Element").$new("dt",a(["class_name","text"],{class_name:"passed",text:t.$description()})),o.rspec_group["$<<"](o.rspec_dl),o.rspec_dl["$<<"](o.rspec_dt),o.rspec_dl.$style("margin-left",""+c["$-"](2)["$*"](15)+"px"),o.rspec_results["$<<"](o.rspec_group)},d.$example_group_finished=c=function(){var t,$,o=r.call(arguments,0),a=this,i=c.$$p;return c.$$p=null,e.find_super_dispatcher(a,"example_group_finished",c,i).apply(a,o),(t=a.example_group_failed)===n||t.$$is_boolean&&1!=t?n:(t=["example_group failed"],$=a.rspec_group,$["$class_name="].apply($,t),t[t.length-1],t=["failed"],$=a.rspec_dt,$["$class_name="].apply($,t),t[t.length-1],t=["failed"],$=f.get("Element").$id("rspec-header"),$["$class_name="].apply($,t),t[t.length-1])},d.$example_failed=l=function(t){var $,o,i,s=r.call(arguments,0),c=this,u=l.$$p,_=n,p=n,d=n,h=n;return l.$$p=null,e.find_super_dispatcher(c,"example_failed",l,u).apply(c,s),_=c.$sprintf("%0.5f",t.$execution_result()["$[]"]("run_time")),p=t.$execution_result()["$[]"]("exception"),d=p.$class().$name().$to_s(),h=""+c.$short_padding()+d+":\n",($=(o=p.$message().$to_s().$split("\n")).$each,$.$$p=(i=function(e){var t=i.$$s||this;return null==e&&(e=n),h=h["$+"](""+t.$long_padding()+"  "+e+"\n")},i.$$s=c,i),$).call(o),c.example_group_failed=!0,c.rspec_dl["$<<"](f.get("Element").$new("dd",a(["class_name","html"],{class_name:"example failed",html:'          <span class="failed_spec_name">'+c.$h(t.$description())+'</span>\n          <span class="duration">'+_+'s</span>\n          <div class="failure">\n            <div class="message"><pre>'+c.$h(h)+"</pre></div>\n          </div>\n"})))},d.$example_passed=u=function(t){var $=r.call(arguments,0),o=this,i=u.$$p,s=n;return u.$$p=null,e.find_super_dispatcher(o,"example_passed",u,i).apply(o,$),s=o.$sprintf("%0.5f",t.$execution_result()["$[]"]("run_time")),o.rspec_dl["$<<"](f.get("Element").$new("dd",a(["class_name","html"],{class_name:"example passed",html:'          <span class="passed_spec_name">'+o.$h(t.$description())+'</span>\n          <span class="duration">'+s+"s</span>\n"})))},d.$dump_summary=_=function(t,$,o){var a,i,s=r.call(arguments,0),c=this,l=_.$$p,u=n;return _.$$p=null,e.find_super_dispatcher(c,"dump_summary",_,l).apply(c,s),u=""+$+" examples, "+o+" failures",a=[u],i=f.get("Element").$id("totals"),i["$html="].apply(i,a),a[a.length-1],t="Finished in <strong>"+c.$sprintf("%.5f",t)+" seconds</strong>",a=[t],i=f.get("Element").$id("duration"),i["$html="].apply(i,a),a[a.length-1],c.$add_scripts()},d.$add_scripts=function(){var t=n;return t=e.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("HtmlPrinter").$$scope.get("GLOBAL_SCRIPTS"),window.eval(t)},d.$short_padding=function(){return"  "},d.$long_padding=function(){return"     "},function(t,$super){function r(){}var $=r=o(t,$super,"Element",r),i=$.$$proto,s=$.$$scope;return i["native"]=n,$.$attr_reader("native"),e.defs($,"$id",function(e){var t=this;return t.$new(document.getElementById(e))}),i.$initialize=function(e,t){var r,$,o,i=this;return null==t&&(t=a([],{})),i["native"]=(r=s.get("String")["$==="](e))===n||r.$$is_boolean&&1!=r?e:document.createElement(e),(r=($=t).$each,r.$$p=(o=function(e,t){var r=o.$$s||this;return null==e&&(e=n),null==t&&(t=n),r.$__send__(""+e+"=",t)},o.$$s=i,o),r).call($)},i["$class_name="]=function(e){var t=this;return t["native"].className=e},i["$html="]=function(e){var t=this;return t["native"].innerHTML=e},i["$text="]=function(e){var t,n,r=this;return t=[e.$gsub(/</,"&lt").$gsub(/>/,"&gt")],n=r,n["$html="].apply(n,t),t[t.length-1]},i["$type="]=function(e){var t=this;return t["native"].type=e},i.$append=function(e){var t=this;return t["native"].appendChild(e.$native())},e.defn($,"$<<",i.$append),i["$css_text="]=function(e){var t=this;t["native"].styleSheet?t["native"].styleSheet.cssText=e:t["native"].appendChild(document.createTextNode(e))},i.$style=function(e,t){var n=this;return n["native"].style[e]=t},i.$append_to_head=function(){var e=this;return document.getElementsByTagName("head")[0].appendChild(e["native"])},n&&"append_to_head"}(p,null),e.cdecl(f,"REPORT_TEMPLATE",'<div class="rspec-report">\n\n  <div id="rspec-header">\n    <div id="label">\n      <h1>RSpec Code Examples</h1>\n    </div>\n\n    <div id="display-filters">\n      <input id="passed_checkbox"  name="passed_checkbox"  type="checkbox" checked="checked" onchange="apply_filters()" value="1" /> <label for="passed_checkbox">Passed</label>\n      <input id="failed_checkbox"  name="failed_checkbox"  type="checkbox" checked="checked" onchange="apply_filters()" value="2" /> <label for="failed_checkbox">Failed</label>\n      <input id="pending_checkbox" name="pending_checkbox" type="checkbox" checked="checked" onchange="apply_filters()" value="3" /> <label for="pending_checkbox">Pending</label>\n    </div>\n\n    <div id="summary">\n      <p id="totals">&#160;</p>\n      <p id="duration">&#160;</p>\n    </div>\n  </div>\n\n  <div id="rspec-results" class="results">\n  </div>\n</div>\n')}(i,e.get("RSpec").$$scope.get("Core").$$scope.get("Formatters").$$scope.get("BaseFormatter"))}(i)}(t)},Opal.modules["opal/rspec/runner"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice,e.module),$=e.klass,o=e.hash2,a=e.gvars;return e.add_stubs(["$phantom?","$browser?","$run","$new","$world","$configuration","$error_stream=","$output_stream","$output_stream=","$start","$run_examples","$run_async_examples","$finish","$all?","$map","$example_groups","$reporter","$example_count","$run_hook"]),function(t){{var i=r(t,"Opal");i.$$proto,i.$$scope}!function(t){{var i=r(t,"RSpec");i.$$proto,i.$$scope}!function(t,$super){function r(){}var i,s=r=$(t,$super,"Runner",r),c=s.$$proto,l=s.$$scope;return c.configuration=c.world=c.reporter=n,function(e){{var t=e.$$scope;e.$$proto}return e.$$proto["$browser?"]=function(){return"undefined"!=typeof document},e.$$proto["$phantom?"]=function(){return"undefined"!=typeof phantom||"undefined"!=typeof OPAL_SPEC_PHANTOM},e.$$proto.$default_formatter=function(){var e,r=this;return t.get((e=r["$phantom?"]())===n||e.$$is_boolean&&1!=e?"BrowserFormatter":"TextFormatter")},e.$$proto.$autorun=function(){var e,r=this;return(e=r["$browser?"]())===n||e.$$is_boolean&&1!=e?t.get("Runner").$new().$run():setTimeout(function(){t.get("Runner").$new().$run()},0)},n&&"autorun"}(s.$singleton_class()),c.$initialize=function(t){var n=this;return null==t&&(t=o([],{})),n.options=t,n.world=e.get("RSpec").$world(),n.configuration=e.get("RSpec").$configuration()},c.$run=function(e,t){var r,$,o,i=this;return null==a.stdout&&(a.stdout=n),null==e&&(e=a.stdout),null==t&&(t=a.stdout),r=[e],$=i.configuration,$["$error_stream="].apply($,r),r[r.length-1],r=i.configuration,($=r.$output_stream())!==!1&&$!==n?$:r["$output_stream="](t),i.$start(),i.$run_examples(),(r=($=i).$run_async_examples,r.$$p=(o=function(){var e=o.$$s||this;return e.$finish()},o.$$s=i,o),r).call($)},c.$run_examples=function(){var e,t,r,$=this;return(e=(t=$.world.$example_groups()).$map,e.$$p=(r=function(e){var t=r.$$s||this;return null==t.reporter&&(t.reporter=n),null==e&&(e=n),e.$run(t.reporter)},r.$$s=$,r),e).call(t)["$all?"]()},c.$run_async_examples=i=function(){var e=this,t=i.$$p,r=t||n;return i.$$p=null,l.get("AsyncRunner").$new(e,e.reporter,r).$run()},c.$start=function(){var e=this;return e.reporter=e.configuration.$reporter(),e.reporter.$start(e.world.$example_count()),e.configuration.$run_hook("before","suite")},c.$finish=function(){var e=this;return e.configuration.$run_hook("after","suite"),e.reporter.$finish()},n&&"finish"}(i,null)}(i)}(t)},Opal.modules["opal/rspec/async"]=function(e){e.dynamic_require_severity="warning";var t=e.top,n=e.nil,r=(e.breaker,e.slice),$=e.module,o=e.klass;return e.add_stubs(["$build_hash_from","$register","$extend","$continue_async","$clone","$examples","$run_next_example","$empty?","$finish","$run_example","$pop","$example_group","$example_group_started","$new","$run","$example_finished","$example_group_finished","$call","$<<","$include","$current_example=","$instance_variable_set","$start","$run_before_each","$instance_exec","$to_proc","$set_exception","$delay","$finished?","$async_example_finished","$[]","$options","$run_after_each","$each","$instance_variables","$assign_generated_description"]),function(t){{var a=$(t,"Opal");a.$$proto,a.$$scope}!function(t){{var a=$(t,"RSpec");a.$$proto,a.$$scope}!function(t){var o,a,i=$(t,"AsyncHelpers"),s=i.$$proto,c=i.$$scope;!function(t){var o,a=$(t,"ClassMethods"),i=a.$$proto,s=a.$$scope;i.$async=o=function(t,$){var a=this,i=o.$$p,c=i||n,l=n;return $=r.call(arguments,1),o.$$p=null,l=e.get("RSpec").$$scope.get("Core").$$scope.get("Metadata").$build_hash_from($),s.get("Opal").$$scope.get("RSpec").$$scope.get("AsyncExample").$register(a,t,l,c)},e.donate(a,["$async"])}(i),e.defs(i,"$included",function(e){return e.$extend(c.get("ClassMethods"))}),s.$async=o=function(){var e=this,t=o.$$p,r=t||n;return null==e.example&&(e.example=n),o.$$p=null,e.example.$continue_async(r)},e.defn(i,"$run_async",s.$async),s.$delay=a=function(e){var t=this,r=a.$$p,$=r||n;return a.$$p=null,setTimeout($,1e3*e),t},e.defn(i,"$set_timeout",s.$delay),e.donate(i,["$async","$run_async","$delay","$set_timeout"])}(a),function(e,$super){function t(){}var r=t=o(e,$super,"AsyncRunner",t),$=r.$$proto,a=r.$$scope;return $.examples=$.reporter=$.finish_block=n,$.$initialize=function(e,t,n){var r=this;return r.runner=e,r.reporter=t,r.finish_block=n},$.$run=function(){var e=this;return e.examples=a.get("AsyncExample").$examples().$clone(),e.$run_next_example()},$.$run_next_example=function(){var e,t=this;return(e=t.examples["$empty?"]())===n||e.$$is_boolean&&1!=e?t.$run_example(t.examples.$pop()):t.$finish()},$.$run_example=function(e){var t,r,$,o=this,a=n,i=n;return a=e.$example_group(),o.reporter.$example_group_started(a),i=a.$new(),(t=(r=e).$run,t.$$p=($=function(){var t=$.$$s||this;return t.$example_finished(e)},$.$$s=o,$),t).call(r,i,o.reporter)},$.$example_finished=function(e){var t=this;return t.reporter.$example_group_finished(e.$example_group()),t.$run_next_example()},$.$finish=function(){var e=this;return e.finish_block.$call()},n&&"finish"}(a,null),function(t,$super){function $(){}var a,i=$=o(t,$super,"AsyncExample",$),s=i.$$proto,c=i.$$scope;return s.example_block=s.example_group_instance=s.finished=s.reporter=s.after_run_block=n,e.defs(i,"$register",function(e){var t,n=this;return e=r.call(arguments,0),n.$examples()["$<<"]((t=n).$new.apply(t,[].concat(e)))}),e.defs(i,"$examples",function(){var e,t=this;return null==t.examples&&(t.examples=n),(e=t.examples)!==!1&&e!==n?e:t.examples=[]}),i.$include(c.get("AsyncHelpers")),s.$run=a=function(t,r){var $,o,i,s,l,u=this,_=a.$$p,p=_||n,d=n,f=n;a.$$p=null,u.example_group_instance=t,u.reporter=r,u.after_run_block=p,u.finished=!1,d=!0,$=[u],o=e.get("RSpec"),o["$current_example="].apply(o,$),$[$.length-1],t.$instance_variable_set("@example",u),u.$start(r);try{u.$run_before_each(),($=(o=u.example_group_instance).$instance_exec,$.$$p=u.example_block.$to_proc(),$).call(o,u)}catch(h){if(!e.rescue(h,[c.get("Exception")]))throw h;f=h,u.$set_exception(f),d=!1}return d!==!1&&d!==n?($=(i=u).$delay,$.$$p=(s=function(){var e,t=s.$$s||this;return(e=t["$finished?"]())===n||e.$$is_boolean&&1!=e?(t.$set_exception(c.get("RuntimeError").$new("timeout")),t.$async_example_finished()):n},s.$$s=u,s),$).call(i,(l=u.$options()["$[]"]("timeout"))!==!1&&l!==n?l:10):u.$async_example_finished()},s.$continue_async=function(t){var r,$=this,o=n;if((r=$["$finished?"]())!==n&&(!r.$$is_boolean||1==r))return n;try{t.$call()}catch(a){if(!e.rescue(a,[c.get("Exception")]))throw a;o=a,$.$set_exception(o)}return $.$async_example_finished()},s["$finished?"]=function(){var e=this;return e.finished},s.$async_example_finished=function(){var t,r,$,o,a=this,i=n;a.finished=!0;try{try{a.$run_after_each()}catch(s){if(!e.rescue(s,[c.get("Exception")]))throw s;i=s,a.$set_exception(i)}}finally{(t=(r=a.example_group_instance.$instance_variables()).$each,t.$$p=($=function(e){var t=$.$$s||this;return null==t.example_group_instance&&(t.example_group_instance=n),null==e&&(e=n),t.example_group_instance.$instance_variable_set(e,n)},$.$$s=a,$),t).call(r),a.example_group_instance=n;try{a.$assign_generated_description()}catch(s){if(!e.rescue(s,[c.get("Exception")]))throw s;i=s,a.$set_exception(i,"while assigning the example description")}}return a.$finish(a.reporter),t=[n],o=e.get("RSpec"),o["$current_example="].apply(o,t),t[t.length-1],a.after_run_block.$call()},n&&"async_example_finished"}(a,e.get("RSpec").$$scope.get("Core").$$scope.get("Example"))}(a)}(t)},Opal.modules["opal/rspec"]=function(e){e.dynamic_require_severity="warning";var t,n,r,$=e.top,o=e,a=e.nil,i=(e.breaker,e.slice,e.klass);return e.add_stubs(["$require","$configure","$formatter=","$default_formatter","$include","$expect_with","$syntax="]),function(e,$super){function t(){}{var n=t=i(e,$super,"MiniTest",t);n.$$proto,n.$$scope}return function(e,$super){function t(){}{var n=t=i(e,$super,"Unit",t);n.$$proto,n.$$scope}return a}(n,null)}($,null),e.cdecl(o,"Test",o.get("MiniTest")),$.$require("opal/rspec/requires"),$.$require("opal/rspec/fixes"),$.$require("opal/rspec/text_formatter"),$.$require("opal/rspec/browser_formatter"),$.$require("opal/rspec/runner"),$.$require("opal/rspec/async"),(t=(n=o.get("RSpec")).$configure,t.$$p=(r=function(e){var t,n,$,i=r.$$s||this;return null==e&&(e=a),t=[o.get("Opal").$$scope.get("RSpec").$$scope.get("Runner").$default_formatter()],n=e,n["$formatter="].apply(n,t),t[t.length-1],e.$include(o.get("Opal").$$scope.get("RSpec").$$scope.get("AsyncHelpers")),(t=(n=e).$expect_with,t.$$p=($=function(e){{var t,n;$.$$s||this}return null==e&&(e=a),t=[["should","expect"]],n=e,n["$syntax="].apply(n,t),t[t.length-1]},$.$$s=i,$),t).call(n,"rspec")},r.$$s=$,r),t).call(n)},Opal.modules["opal-rspec"]=function(e){e.dynamic_require_severity="warning";{var t=e.top;e.nil,e.breaker,e.slice}return e.add_stubs(["$require"]),t.$require("opal/rspec")},function(e){e.dynamic_require_severity="warning";{var t=e.top;e.nil,e.breaker,e.slice}return e.add_stubs(["$require"]),t.$require("opal"),t.$require("opal-rspec")}(Opal);